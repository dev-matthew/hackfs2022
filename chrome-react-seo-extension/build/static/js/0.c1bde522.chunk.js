/*! For license information please see 0.c1bde522.chunk.js.LICENSE.txt */
(this["webpackJsonpchrome-react-seo-extension"]=this["webpackJsonpchrome-react-seo-extension"]||[]).push([[0],[,function(t,e,r){"use strict";r.d(e,"k",(function(){return s})),r.d(e,"j",(function(){return c})),r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return h})),r.d(e,"o",(function(){return l})),r.d(e,"p",(function(){return f})),r.d(e,"l",(function(){return d})),r.d(e,"i",(function(){return m})),r.d(e,"d",(function(){return y})),r.d(e,"e",(function(){return g})),r.d(e,"c",(function(){return b})),r.d(e,"g",(function(){return v})),r.d(e,"f",(function(){return w})),r.d(e,"h",(function(){return _})),r.d(e,"n",(function(){return S})),r.d(e,"m",(function(){return E}));const n=new(r(3).a)("bytes/5.6.1");function i(t){return!!t.toHexString}function o(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return o(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function s(t){return d(t)&&!(t.length%2)||c(t)}function a(t){return"number"===typeof t&&t==t&&t%1===0}function c(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"===typeof t)return!1;if(!a(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!a(r)||r<0||r>=256)return!1}return!0}function u(t,e){if(e||(e={}),"number"===typeof t){n.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),o(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),i(t)&&(t=t.toHexString()),d(t)){let r=t.substring(2);r.length%2&&("left"===e.hexPad?r="0"+r:"right"===e.hexPad?r+="0":n.throwArgumentError("hex data is odd-length","value",t));const i=[];for(let t=0;t<r.length;t+=2)i.push(parseInt(r.substring(t,t+2),16));return o(new Uint8Array(i))}return c(t)?o(new Uint8Array(t)):n.throwArgumentError("invalid arrayify value","value",t)}function h(t){const e=t.map((t=>u(t))),r=e.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(r);return e.reduce(((t,e)=>(n.set(e,t),t+e.length)),0),o(n)}function l(t){let e=u(t);if(0===e.length)return e;let r=0;for(;r<e.length&&0===e[r];)r++;return r&&(e=e.slice(r)),e}function f(t,e){(t=u(t)).length>e&&n.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),o(r)}function d(t,e){return!("string"!==typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}const p="0123456789abcdef";function m(t,e){if(e||(e={}),"number"===typeof t){n.checkSafeUint53(t,"invalid hexlify value");let e="";for(;t;)e=p[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("bigint"===typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),i(t))return t.toHexString();if(d(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":n.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(c(t)){let e="0x";for(let r=0;r<t.length;r++){let n=t[r];e+=p[(240&n)>>4]+p[15&n]}return e}return n.throwArgumentError("invalid hexlify value","value",t)}function y(t){if("string"!==typeof t)t=m(t);else if(!d(t)||t.length%2)return null;return(t.length-2)/2}function g(t,e,r){return"string"!==typeof t?t=m(t):(!d(t)||t.length%2)&&n.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function b(t){let e="0x";return t.forEach((t=>{e+=m(t).substring(2)})),e}function v(t){const e=w(m(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function w(t){"string"!==typeof t&&(t=m(t)),d(t)||n.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}function _(t,e){for("string"!==typeof t?t=m(t):d(t)||n.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&n.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function S(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(s(t)){let r=u(t);64===r.length?(e.v=27+(r[32]>>7),r[32]&=127,e.r=m(r.slice(0,32)),e.s=m(r.slice(32,64))):65===r.length?(e.r=m(r.slice(0,32)),e.s=m(r.slice(32,64)),e.v=r[64]):n.throwArgumentError("invalid signature string","signature",t),e.v<27&&(0===e.v||1===e.v?e.v+=27:n.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=m(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){const r=f(u(e._vs),32);e._vs=m(r);const i=r[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=i:e.recoveryParam!==i&&n.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),r[0]&=127;const o=m(r);null==e.s?e.s=o:e.s!==o&&n.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?n.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{const r=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==r&&n.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&d(e.r)?e.r=_(e.r,32):n.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&d(e.s)?e.s=_(e.s,32):n.throwArgumentError("signature missing or invalid s","signature",t);const r=u(e.s);r[0]>=128&&n.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const i=m(r);e._vs&&(d(e._vs)||n.throwArgumentError("signature invalid _vs","signature",t),e._vs=_(e._vs,32)),null==e._vs?e._vs=i:e._vs!==i&&n.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function E(t){return m(h([(t=S(t)).r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}},function(t,e,r){"use strict";t.exports=r(364)},function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));let n=!1,i=!1;const o={debug:1,default:2,info:2,warning:3,error:4,off:5};let s=o.default,a=null;const c=function(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var u,h;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(u||(u={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(h||(h={}));const l="0123456789abcdef";class f{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const r=t.toLowerCase();null==o[r]&&this.throwArgumentError("invalid log level name","logLevel",t),s>o[r]||console.log.apply(console,e)}debug(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._log(f.levels.DEBUG,e)}info(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._log(f.levels.INFO,e)}warn(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._log(f.levels.WARNING,e)}makeError(t,e,r){if(i)return this.makeError("censored error",e,{});e||(e=f.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((t=>{const e=r[t];try{if(e instanceof Uint8Array){let r="";for(let t=0;t<e.length;t++)r+=l[e[t]>>4],r+=l[15&e[t]];n.push(t+"=Uint8Array(0x"+r+")")}else n.push(t+"="+JSON.stringify(e))}catch(a){n.push(t+"="+JSON.stringify(r[t].toString()))}})),n.push("code=".concat(e)),n.push("version=".concat(this.version));const o=t;let s="";switch(e){case h.NUMERIC_FAULT:{s="NUMERIC_FAULT";const e=t;switch(e){case"overflow":case"underflow":case"division-by-zero":s+="-"+e;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case h.CALL_EXCEPTION:case h.INSUFFICIENT_FUNDS:case h.MISSING_NEW:case h.NONCE_EXPIRED:case h.REPLACEMENT_UNDERPRICED:case h.TRANSACTION_REPLACED:case h.UNPREDICTABLE_GAS_LIMIT:s=e}s&&(t+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const a=new Error(t);return a.reason=o,a.code=e,Object.keys(r).forEach((function(t){a[t]=r[t]})),a}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,f.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){t||this.throwError(e,r,n)}assertArgument(t,e,r,n){t||this.throwArgumentError(e,r,n)}checkNormalize(t){null==t&&(t="platform missing String.prototype.normalize"),c&&this.throwError("platform missing String.prototype.normalize",f.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:c})}checkSafeUint53(t,e){"number"===typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,r){r=r?": "+r:"",t<e&&this.throwError("missing argument"+r,f.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+r,f.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",f.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",f.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",f.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return a||(a=new f("logger/5.6.0")),a}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),n){if(!t)return;this.globalLogger().throwError("error censorship permanent",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}i=!!t,n=!!e}static setLogLevel(t){const e=o[t.toLowerCase()];null!=e?s=e:f.globalLogger().warn("invalid log level - "+t)}static from(t){return new f(t)}}f.errors=h,f.levels=u},function(t,e,r){"use strict";r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return c})),r.d(e,"b",(function(){return u})),r.d(e,"g",(function(){return h})),r.d(e,"c",(function(){return p})),r.d(e,"a",(function(){return m}));var n=r(3);var i=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const o=new n.a("properties/5.6.0");function s(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function a(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||"object"!==typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function c(t){return i(this,void 0,void 0,(function*(){const e=Object.keys(t).map((e=>{const r=t[e];return Promise.resolve(r).then((t=>({key:e,value:t})))}));return(yield Promise.all(e)).reduce(((t,e)=>(t[e.key]=e.value,t)),{})}))}function u(t,e){t&&"object"===typeof t||o.throwArgumentError("invalid object","object",t),Object.keys(t).forEach((r=>{e[r]||o.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)}))}function h(t){const e={};for(const r in t)e[r]=t[r];return e}const l={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function f(t){if(void 0===t||null===t||l[typeof t])return!0;if(Array.isArray(t)||"object"===typeof t){if(!Object.isFrozen(t))return!1;const r=Object.keys(t);for(let n=0;n<r.length;n++){let i=null;try{i=t[r[n]]}catch(e){continue}if(!f(i))return!1}return!0}return o.throwArgumentError("Cannot deepCopy ".concat(typeof t),"object",t)}function d(t){if(f(t))return t;if(Array.isArray(t))return Object.freeze(t.map((t=>p(t))));if("object"===typeof t){const e={};for(const r in t){const n=t[r];void 0!==n&&s(e,r,p(n))}return e}return o.throwArgumentError("Cannot deepCopy ".concat(typeof t),"object",t)}function p(t){return d(t)}class m{constructor(t){for(const e in t)this[e]=p(t[e])}}},function(t,e,r){(function(n){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(i=n))})),e.splice(i,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(r){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(r){}!t&&"undefined"!==typeof n&&"env"in n&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DEBUG);return t},e.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=r(475)(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(22))},function(t,e){t.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function n(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function i(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var o={},s={};function a(t,e){var r,n,i;return e?(i=0<=(t>>>=0)&&t<256)&&(n=s[t])?n:(r=u(t,(0|t)<0?-1:0,!0),i&&(s[t]=r),r):(i=-128<=(t|=0)&&t<128)&&(n=o[t])?n:(r=u(t,t<0?-1:0,!1),i&&(o[t]=r),r)}function c(t,e){if(isNaN(t))return e?b:g;if(e){if(t<0)return b;if(t>=p)return E}else{if(t<=-m)return A;if(t+1>=m)return S}return t<0?c(-t,e).neg():u(t%d|0,t/d|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=c,n.fromBits=u;var h=Math.pow;function l(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return g;if("number"===typeof e?(r=e,e=!1):e=!!e,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(t.substring(1),e,r).neg();for(var i=c(h(r,8)),o=g,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+a),r);if(a<8){var f=c(h(r,a));o=o.mul(f).add(c(u))}else o=(o=o.mul(i)).add(c(u))}return o.unsigned=e,o}function f(t,e){return"number"===typeof t?c(t,e):"string"===typeof t?l(t,e):u(t.low,t.high,"boolean"===typeof e?e:t.unsigned)}n.fromString=l,n.fromValue=f;var d=4294967296,p=d*d,m=p/2,y=a(1<<24),g=a(0);n.ZERO=g;var b=a(0,!0);n.UZERO=b;var v=a(1);n.ONE=v;var w=a(1,!0);n.UONE=w;var _=a(-1);n.NEG_ONE=_;var S=u(-1,2147483647,!1);n.MAX_VALUE=S;var E=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=E;var A=u(0,-2147483648,!1);n.MIN_VALUE=A;var M=n.prototype;M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},M.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var e=c(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=c(h(t,6),this.unsigned),o=this,s="";;){var a=o.div(i),u=(o.sub(a.mul(i)).toInt()>>>0).toString(t);if((o=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},M.isZero=function(){return 0===this.high&&0===this.low},M.eqz=M.isZero,M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return 1===(1&this.low)},M.isEven=function(){return 0===(1&this.low)},M.equals=function(t){return i(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},M.eq=M.equals,M.notEquals=function(t){return!this.eq(t)},M.neq=M.notEquals,M.ne=M.notEquals,M.lessThan=function(t){return this.comp(t)<0},M.lt=M.lessThan,M.lessThanOrEqual=function(t){return this.comp(t)<=0},M.lte=M.lessThanOrEqual,M.le=M.lessThanOrEqual,M.greaterThan=function(t){return this.comp(t)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function(t){return this.comp(t)>=0},M.gte=M.greaterThanOrEqual,M.ge=M.greaterThanOrEqual,M.compare=function(t){if(i(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(v)},M.neg=M.negate,M.add=function(t){i(t)||(t=f(t));var e=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,c=t.low>>>16,h=0,l=0,d=0,p=0;return d+=(p+=o+(65535&t.low))>>>16,l+=(d+=n+c)>>>16,h+=(l+=r+a)>>>16,h+=e+s,u((d&=65535)<<16|(p&=65535),(h&=65535)<<16|(l&=65535),this.unsigned)},M.subtract=function(t){return i(t)||(t=f(t)),this.add(t.neg())},M.sub=M.subtract,M.multiply=function(t){if(this.isZero())return g;if(i(t)||(t=f(t)),r)return u(r.mul(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned);if(t.isZero())return g;if(this.eq(A))return t.isOdd()?A:g;if(t.eq(A))return this.isOdd()?A:g;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(y)&&t.lt(y))return c(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,o=this.low>>>16,s=65535&this.low,a=t.high>>>16,h=65535&t.high,l=t.low>>>16,d=65535&t.low,p=0,m=0,b=0,v=0;return b+=(v+=s*d)>>>16,m+=(b+=o*d)>>>16,b&=65535,m+=(b+=s*l)>>>16,p+=(m+=n*d)>>>16,m&=65535,p+=(m+=o*l)>>>16,m&=65535,p+=(m+=s*h)>>>16,p+=e*d+n*l+o*h+s*a,u((b&=65535)<<16|(v&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},M.mul=M.multiply,M.divide=function(t){if(i(t)||(t=f(t)),t.isZero())throw Error("division by zero");var e,n,o;if(r)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?r.div_u:r.div_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return b;if(t.gt(this.shru(1)))return w;o=b}else{if(this.eq(A))return t.eq(v)||t.eq(_)?A:t.eq(A)?v:(e=this.shr(1).div(t).shl(1)).eq(g)?t.isNegative()?v:_:(n=this.sub(t.mul(e)),o=e.add(n.div(t)));if(t.eq(A))return this.unsigned?b:g;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=g}for(n=this;n.gte(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(e)/Math.LN2),a=s<=48?1:h(2,s-48),l=c(e),d=l.mul(t);d.isNegative()||d.gt(n);)d=(l=c(e-=a,this.unsigned)).mul(t);l.isZero()&&(l=v),o=o.add(l),n=n.sub(d)}return o},M.div=M.divide,M.modulo=function(t){return i(t)||(t=f(t)),r?u((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},M.mod=M.modulo,M.rem=M.modulo,M.not=function(){return u(~this.low,~this.high,this.unsigned)},M.and=function(t){return i(t)||(t=f(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},M.or=function(t){return i(t)||(t=f(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},M.xor=function(t){return i(t)||(t=f(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},M.shiftLeft=function(t){return i(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function(t){return i(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function(t){if(i(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.shr_u=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},M.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},M.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return a})),r.d(e,"i",(function(){return u})),r.d(e,"g",(function(){return f})),r.d(e,"h",(function(){return m})),r.d(e,"c",(function(){return g})),r.d(e,"d",(function(){return w})),r.d(e,"a",(function(){return S})),r.d(e,"f",(function(){return M})),r.d(e,"e",(function(){return T}));var n=r(6),i=r.n(n),o=r(2),s=r.n(o);var a;function c(t){switch(t){case 0:case"deflate":return a.deflate;case 1:case"gzip":return a.gzip;default:return a.UNRECOGNIZED}}!function(t){t[t.deflate=0]="deflate",t[t.gzip=1]="gzip",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a||(a={}));const u={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.ecdsaCompact&&l.encode(t.ecdsaCompact,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={ecdsaCompact:void 0};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.ecdsaCompact=l.decode(r,r.uint32());else r.skipType(7&t)}return i},fromJSON:t=>({ecdsaCompact:B(t.ecdsaCompact)?l.fromJSON(t.ecdsaCompact):void 0}),toJSON(t){const e={};return void 0!==t.ecdsaCompact&&(e.ecdsaCompact=t.ecdsaCompact?l.toJSON(t.ecdsaCompact):void 0),e},fromPartial(t){const e={ecdsaCompact:void 0};return e.ecdsaCompact=void 0!==t.ecdsaCompact&&null!==t.ecdsaCompact?l.fromPartial(t.ecdsaCompact):void 0,e}};function h(){return{bytes:new Uint8Array,recovery:0}}const l={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.bytes.length&&e.uint32(10).bytes(t.bytes),0!==t.recovery&&e.uint32(16).uint32(t.recovery),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=h();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.bytes=r.bytes();break;case 2:i.recovery=r.uint32();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({bytes:B(t.bytes)?k(t.bytes):new Uint8Array,recovery:B(t.recovery)?Number(t.recovery):0}),toJSON(t){const e={};return void 0!==t.bytes&&(e.bytes=N(void 0!==t.bytes?t.bytes:new Uint8Array)),void 0!==t.recovery&&(e.recovery=Math.round(t.recovery)),e},fromPartial(t){var e,r;const n=h();return n.bytes=null!==(e=t.bytes)&&void 0!==e?e:new Uint8Array,n.recovery=null!==(r=t.recovery)&&void 0!==r?r:0,n}};const f={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.timestamp&&e.uint32(8).uint64(t.timestamp),void 0!==t.signature&&u.encode(t.signature,e.uint32(18).fork()).ldelim(),void 0!==t.secp256k1Uncompressed&&p.encode(t.secp256k1Uncompressed,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={timestamp:0,signature:void 0,secp256k1Uncompressed:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.timestamp=D(r.uint64());break;case 2:i.signature=u.decode(r,r.uint32());break;case 3:i.secp256k1Uncompressed=p.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({timestamp:B(t.timestamp)?Number(t.timestamp):0,signature:B(t.signature)?u.fromJSON(t.signature):void 0,secp256k1Uncompressed:B(t.secp256k1Uncompressed)?p.fromJSON(t.secp256k1Uncompressed):void 0}),toJSON(t){const e={};return void 0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),void 0!==t.signature&&(e.signature=t.signature?u.toJSON(t.signature):void 0),void 0!==t.secp256k1Uncompressed&&(e.secp256k1Uncompressed=t.secp256k1Uncompressed?p.toJSON(t.secp256k1Uncompressed):void 0),e},fromPartial(t){var e;const r={timestamp:0,signature:void 0,secp256k1Uncompressed:void 0};return r.timestamp=null!==(e=t.timestamp)&&void 0!==e?e:0,r.signature=void 0!==t.signature&&null!==t.signature?u.fromPartial(t.signature):void 0,r.secp256k1Uncompressed=void 0!==t.secp256k1Uncompressed&&null!==t.secp256k1Uncompressed?p.fromPartial(t.secp256k1Uncompressed):void 0,r}};function d(){return{bytes:new Uint8Array}}const p={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.bytes.length&&e.uint32(10).bytes(t.bytes),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=d();for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.bytes=r.bytes();else r.skipType(7&t)}return i},fromJSON:t=>({bytes:B(t.bytes)?k(t.bytes):new Uint8Array}),toJSON(t){const e={};return void 0!==t.bytes&&(e.bytes=N(void 0!==t.bytes?t.bytes:new Uint8Array)),e},fromPartial(t){var e;const r=d();return r.bytes=null!==(e=t.bytes)&&void 0!==e?e:new Uint8Array,r}};const m={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.identityKey&&f.encode(t.identityKey,e.uint32(10).fork()).ldelim(),void 0!==t.preKey&&f.encode(t.preKey,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={identityKey:void 0,preKey:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.identityKey=f.decode(r,r.uint32());break;case 2:i.preKey=f.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({identityKey:B(t.identityKey)?f.fromJSON(t.identityKey):void 0,preKey:B(t.preKey)?f.fromJSON(t.preKey):void 0}),toJSON(t){const e={};return void 0!==t.identityKey&&(e.identityKey=t.identityKey?f.toJSON(t.identityKey):void 0),void 0!==t.preKey&&(e.preKey=t.preKey?f.toJSON(t.preKey):void 0),e},fromPartial(t){const e={identityKey:void 0,preKey:void 0};return e.identityKey=void 0!==t.identityKey&&null!==t.identityKey?f.fromPartial(t.identityKey):void 0,e.preKey=void 0!==t.preKey&&null!==t.preKey?f.fromPartial(t.preKey):void 0,e}};const y={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.keyBundle&&m.encode(t.keyBundle,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={keyBundle:void 0};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.keyBundle=m.decode(r,r.uint32());else r.skipType(7&t)}return i},fromJSON:t=>({keyBundle:B(t.keyBundle)?m.fromJSON(t.keyBundle):void 0}),toJSON(t){const e={};return void 0!==t.keyBundle&&(e.keyBundle=t.keyBundle?m.toJSON(t.keyBundle):void 0),e},fromPartial(t){const e={keyBundle:void 0};return e.keyBundle=void 0!==t.keyBundle&&null!==t.keyBundle?m.fromPartial(t.keyBundle):void 0,e}};const g={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.v1&&y.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={v1:void 0};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.v1=y.decode(r,r.uint32());else r.skipType(7&t)}return i},fromJSON:t=>({v1:B(t.v1)?y.fromJSON(t.v1):void 0}),toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?y.toJSON(t.v1):void 0),e},fromPartial(t){const e={v1:void 0};return e.v1=void 0!==t.v1&&null!==t.v1?y.fromPartial(t.v1):void 0,e}};const b={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return""!==t.authorityId&&e.uint32(10).string(t.authorityId),""!==t.typeId&&e.uint32(18).string(t.typeId),0!==t.versionMajor&&e.uint32(24).uint32(t.versionMajor),0!==t.versionMinor&&e.uint32(32).uint32(t.versionMinor),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.authorityId=r.string();break;case 2:i.typeId=r.string();break;case 3:i.versionMajor=r.uint32();break;case 4:i.versionMinor=r.uint32();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({authorityId:B(t.authorityId)?String(t.authorityId):"",typeId:B(t.typeId)?String(t.typeId):"",versionMajor:B(t.versionMajor)?Number(t.versionMajor):0,versionMinor:B(t.versionMinor)?Number(t.versionMinor):0}),toJSON(t){const e={};return void 0!==t.authorityId&&(e.authorityId=t.authorityId),void 0!==t.typeId&&(e.typeId=t.typeId),void 0!==t.versionMajor&&(e.versionMajor=Math.round(t.versionMajor)),void 0!==t.versionMinor&&(e.versionMinor=Math.round(t.versionMinor)),e},fromPartial(t){var e,r,n,i;const o={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};return o.authorityId=null!==(e=t.authorityId)&&void 0!==e?e:"",o.typeId=null!==(r=t.typeId)&&void 0!==r?r:"",o.versionMajor=null!==(n=t.versionMajor)&&void 0!==n?n:0,o.versionMinor=null!==(i=t.versionMinor)&&void 0!==i?i:0,o}};function v(){return{type:void 0,parameters:{},fallback:void 0,compression:void 0,content:new Uint8Array}}const w={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.type&&b.encode(t.type,e.uint32(10).fork()).ldelim(),Object.entries(t.parameters).forEach((t=>{let[r,n]=t;_.encode({key:r,value:n},e.uint32(18).fork()).ldelim()})),void 0!==t.fallback&&e.uint32(26).string(t.fallback),void 0!==t.compression&&e.uint32(40).int32(t.compression),0!==t.content.length&&e.uint32(34).bytes(t.content),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=v();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.type=b.decode(r,r.uint32());break;case 2:const e=_.decode(r,r.uint32());void 0!==e.value&&(i.parameters[e.key]=e.value);break;case 3:i.fallback=r.string();break;case 5:i.compression=r.int32();break;case 4:i.content=r.bytes();break;default:r.skipType(7&t)}}return i},fromJSON(t){return{type:B(t.type)?b.fromJSON(t.type):void 0,parameters:(e=t.parameters,"object"===typeof e&&null!==e?Object.entries(t.parameters).reduce(((t,e)=>{let[r,n]=e;return t[r]=String(n),t}),{}):{}),fallback:B(t.fallback)?String(t.fallback):void 0,compression:B(t.compression)?c(t.compression):void 0,content:B(t.content)?k(t.content):new Uint8Array};var e},toJSON(t){const e={};return void 0!==t.type&&(e.type=t.type?b.toJSON(t.type):void 0),e.parameters={},t.parameters&&Object.entries(t.parameters).forEach((t=>{let[r,n]=t;e.parameters[r]=n})),void 0!==t.fallback&&(e.fallback=t.fallback),void 0!==t.compression&&(e.compression=void 0!==t.compression?function(t){switch(t){case a.deflate:return"deflate";case a.gzip:return"gzip";default:return"UNKNOWN"}}(t.compression):void 0),void 0!==t.content&&(e.content=N(void 0!==t.content?t.content:new Uint8Array)),e},fromPartial(t){var e,r,n,i;const o=v();return o.type=void 0!==t.type&&null!==t.type?b.fromPartial(t.type):void 0,o.parameters=Object.entries(null!==(e=t.parameters)&&void 0!==e?e:{}).reduce(((t,e)=>{let[r,n]=e;return void 0!==n&&(t[r]=String(n)),t}),{}),o.fallback=null!==(r=t.fallback)&&void 0!==r?r:void 0,o.compression=null!==(n=t.compression)&&void 0!==n?n:void 0,o.content=null!==(i=t.content)&&void 0!==i?i:new Uint8Array,o}};const _={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return""!==t.key&&e.uint32(10).string(t.key),""!==t.value&&e.uint32(18).string(t.value),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={key:"",value:""};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.key=r.string();break;case 2:i.value=r.string();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({key:B(t.key)?String(t.key):"",value:B(t.value)?String(t.value):""}),toJSON(t){const e={};return void 0!==t.key&&(e.key=t.key),void 0!==t.value&&(e.value=t.value),e},fromPartial(t){var e,r;const n={key:"",value:""};return n.key=null!==(e=t.key)&&void 0!==e?e:"",n.value=null!==(r=t.value)&&void 0!==r?r:"",n}};const S={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.aes256GcmHkdfSha256&&A.encode(t.aes256GcmHkdfSha256,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={aes256GcmHkdfSha256:void 0};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.aes256GcmHkdfSha256=A.decode(r,r.uint32());else r.skipType(7&t)}return i},fromJSON:t=>({aes256GcmHkdfSha256:B(t.aes256GcmHkdfSha256)?A.fromJSON(t.aes256GcmHkdfSha256):void 0}),toJSON(t){const e={};return void 0!==t.aes256GcmHkdfSha256&&(e.aes256GcmHkdfSha256=t.aes256GcmHkdfSha256?A.toJSON(t.aes256GcmHkdfSha256):void 0),e},fromPartial(t){const e={aes256GcmHkdfSha256:void 0};return e.aes256GcmHkdfSha256=void 0!==t.aes256GcmHkdfSha256&&null!==t.aes256GcmHkdfSha256?A.fromPartial(t.aes256GcmHkdfSha256):void 0,e}};function E(){return{hkdfSalt:new Uint8Array,gcmNonce:new Uint8Array,payload:new Uint8Array}}const A={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.hkdfSalt.length&&e.uint32(10).bytes(t.hkdfSalt),0!==t.gcmNonce.length&&e.uint32(18).bytes(t.gcmNonce),0!==t.payload.length&&e.uint32(26).bytes(t.payload),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=E();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.hkdfSalt=r.bytes();break;case 2:i.gcmNonce=r.bytes();break;case 3:i.payload=r.bytes();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({hkdfSalt:B(t.hkdfSalt)?k(t.hkdfSalt):new Uint8Array,gcmNonce:B(t.gcmNonce)?k(t.gcmNonce):new Uint8Array,payload:B(t.payload)?k(t.payload):new Uint8Array}),toJSON(t){const e={};return void 0!==t.hkdfSalt&&(e.hkdfSalt=N(void 0!==t.hkdfSalt?t.hkdfSalt:new Uint8Array)),void 0!==t.gcmNonce&&(e.gcmNonce=N(void 0!==t.gcmNonce?t.gcmNonce:new Uint8Array)),void 0!==t.payload&&(e.payload=N(void 0!==t.payload?t.payload:new Uint8Array)),e},fromPartial(t){var e,r,n;const i=E();return i.hkdfSalt=null!==(e=t.hkdfSalt)&&void 0!==e?e:new Uint8Array,i.gcmNonce=null!==(r=t.gcmNonce)&&void 0!==r?r:new Uint8Array,i.payload=null!==(n=t.payload)&&void 0!==n?n:new Uint8Array,i}};const M={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.sender&&m.encode(t.sender,e.uint32(10).fork()).ldelim(),void 0!==t.recipient&&m.encode(t.recipient,e.uint32(18).fork()).ldelim(),0!==t.timestamp&&e.uint32(24).uint64(t.timestamp),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={sender:void 0,recipient:void 0,timestamp:0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.sender=m.decode(r,r.uint32());break;case 2:i.recipient=m.decode(r,r.uint32());break;case 3:i.timestamp=D(r.uint64());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({sender:B(t.sender)?m.fromJSON(t.sender):void 0,recipient:B(t.recipient)?m.fromJSON(t.recipient):void 0,timestamp:B(t.timestamp)?Number(t.timestamp):0}),toJSON(t){const e={};return void 0!==t.sender&&(e.sender=t.sender?m.toJSON(t.sender):void 0),void 0!==t.recipient&&(e.recipient=t.recipient?m.toJSON(t.recipient):void 0),void 0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),e},fromPartial(t){var e;const r={sender:void 0,recipient:void 0,timestamp:0};return r.sender=void 0!==t.sender&&null!==t.sender?m.fromPartial(t.sender):void 0,r.recipient=void 0!==t.recipient&&null!==t.recipient?m.fromPartial(t.recipient):void 0,r.timestamp=null!==(e=t.timestamp)&&void 0!==e?e:0,r}};function I(){return{headerBytes:new Uint8Array,ciphertext:void 0}}const R={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.headerBytes.length&&e.uint32(10).bytes(t.headerBytes),void 0!==t.ciphertext&&S.encode(t.ciphertext,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=I();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.headerBytes=r.bytes();break;case 2:i.ciphertext=S.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({headerBytes:B(t.headerBytes)?k(t.headerBytes):new Uint8Array,ciphertext:B(t.ciphertext)?S.fromJSON(t.ciphertext):void 0}),toJSON(t){const e={};return void 0!==t.headerBytes&&(e.headerBytes=N(void 0!==t.headerBytes?t.headerBytes:new Uint8Array)),void 0!==t.ciphertext&&(e.ciphertext=t.ciphertext?S.toJSON(t.ciphertext):void 0),e},fromPartial(t){var e;const r=I();return r.headerBytes=null!==(e=t.headerBytes)&&void 0!==e?e:new Uint8Array,r.ciphertext=void 0!==t.ciphertext&&null!==t.ciphertext?S.fromPartial(t.ciphertext):void 0,r}};const T={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.v1&&R.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={v1:void 0};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.v1=R.decode(r,r.uint32());else r.skipType(7&t)}return i},fromJSON:t=>({v1:B(t.v1)?R.fromJSON(t.v1):void 0}),toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?R.toJSON(t.v1):void 0),e},fromPartial(t){const e={v1:void 0};return e.v1=void 0!==t.v1&&null!==t.v1?R.fromPartial(t.v1):void 0,e}};var C=(()=>{if("undefined"!==typeof C)return C;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw"Unable to locate global object"})();const O=C.atob||(t=>C.Buffer.from(t,"base64").toString("binary"));function k(t){const e=O(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const P=C.btoa||(t=>C.Buffer.from(t,"binary").toString("base64"));function N(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return P(e.join(""))}function D(t){if(t.gt(Number.MAX_SAFE_INTEGER))throw new C.Error("Value is larger than Number.MAX_SAFE_INTEGER");return t.toNumber()}function B(t){return null!==t&&void 0!==t}s.a.util.Long!==i.a&&(s.a.util.Long=i.a,s.a.configure())}).call(this,r(21))},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(250).Buffer}catch(T){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;o*=i,s=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&s<i,"Invalid character"),o+=s}return o}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){h(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(T){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?f[6-c.length]+c+r:c+r}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=d[t],h=p[t];r="";var l=this.clone();for(l.negative=0;!l.isZero();){var m=l.modrn(h).toString(t);r=(l=l.idivn(h)).isZero()?m+r:f[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(s,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,s=t.words,a=e.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,_=v>>>13,S=0|s[4],E=8191&S,A=S>>>13,M=0|s[5],I=8191&M,R=M>>>13,T=0|s[6],C=8191&T,O=T>>>13,k=0|s[7],P=8191&k,N=k>>>13,D=0|s[8],B=8191&D,x=D>>>13,L=0|s[9],U=8191&L,j=L>>>13,K=0|a[0],F=8191&K,q=K>>>13,V=0|a[1],z=8191&V,H=V>>>13,G=0|a[2],W=8191&G,J=G>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],$=8191&Q,tt=Q>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(m,F)|0,o=Math.imul(m,q);var gt=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),i=(i=Math.imul(g,q))+Math.imul(b,F)|0,o=Math.imul(b,q),n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var bt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,F),i=(i=Math.imul(w,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(b,z)|0,o=o+Math.imul(b,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(A,F)|0,o=Math.imul(A,q),n=n+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(O,F)|0,o=Math.imul(O,q),n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var St=(u+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(x,F)|0,o=Math.imul(x,q),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ut)|0;var At=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(j,F)|0,o=Math.imul(j,q),n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(g,ct)|0,i=(i=i+Math.imul(g,ut)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(j,z)|0,o=Math.imul(j,H),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(j,W)|0,o=Math.imul(j,J),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(A,ct)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0;var Rt=(u+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Tt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0;var Ct=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ft)|0;var Ot=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var kt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,ct),i=(i=Math.imul(U,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var Pt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(j,lt)|0,o=Math.imul(j,ft);var Nt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Dt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=yt,c[1]=gt,c[2]=bt,c[3]=vt,c[4]=wt,c[5]=_t,c[6]=St,c[7]=Et,c[8]=At,c[9]=Mt,c[10]=It,c[11]=Rt,c[12]=Tt,c[13]=Ct,c[14]=Ot,c[15]=kt,c[16]=Pt,c[17]=Nt,c[18]=Dt,0!==u&&(c[19]=u,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var h=o-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function b(t,e,r){return g(t,e,r)}function v(t,e){this.x=t,this.y=e}Math.imul||(y=m),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):r<63?m(this,t,e):r<1024?g(this,t,e):b(this,t,e)},v.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},v.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<s;d++){var p=r[h+d],m=n[h+d],y=r[h+d+s],g=n[h+d+s],b=l*y-f*g;g=l*g+f*y,y=b,r[h+d]=p+y,n[h+d]=m+g,r[h+d+s]=p-y,n[h+d+s]=m-g,d!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},v.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),b(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(c)):(r.isub(e),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new I(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function R(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(S,_),S.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},S.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,_),i(A,_),i(M,_),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new S;else if("p224"===t)e=new E;else if("p192"===t)e=new A;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return w[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(l,new o(1).iushln(p-y-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=y}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new R(t)},i(R,I),R.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},R.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},R.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},R.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},R.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(70)(t))},function(t,e,r){"use strict";function n(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}t.exports=function(t,e,r){if(!t||"string"===typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof e&&(r=e,e=""),e&&(r.code=e);try{return n(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const e=function(){};e.prototype=Object.create(Object.getPrototypeOf(t));return n(new e,r)}}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){"use strict";const n=r(470),i=r(118),o=r(58),{CID:s}=r(85),{base58btc:a}=r(71),c=r(9),u=Symbol.for("nodejs.util.inspect.custom"),{toString:h}=r(29),{equals:l}=r(45),f=new Map,d=Symbol.for("@multiformats/js-multiaddr/multiaddr");class p{constructor(t){if(null==t&&(t=""),Object.defineProperty(this,d,{value:!0}),t instanceof Uint8Array)this.bytes=n.fromBytes(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error('multiaddr "'.concat(t,'" must start with a "/"'));this.bytes=n.fromString(t)}else{if(!p.isMultiaddr(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=n.fromBytes(t.bytes)}}toString(){return n.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const t={},e=this.toString().split("/");return t.family="ip4"===e[1]?4:6,t.host=e[2],t.transport=e[3],t.port=parseInt(e[4]),t}protos(){return this.protoCodes().map((t=>Object.assign({},i(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;for(;r<e.length;){const s=o.decode(e,r),a=o.decode.bytes,c=i(s);r+=n.sizeForAddr(c,e.slice(r+a))+a,t.push(s)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return n.bytesToTuples(this.bytes)}stringTuples(){const t=n.bytesToTuples(this.bytes);return n.tuplesToStringTuples(t)}encapsulate(t){return t=new p(t),new p(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error("Address "+this+" does not contain subaddress: "+t);return new p(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new p(n.tuplesToBytes(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===i.names.ipfs.code)),e=t.pop();if(e&&e[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?h(a.decode("z".concat(t)),"base58btc"):h(s.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>!!i(t[0]).path))[0][1],t||(t=null)}catch(e){t=null}return t}equals(t){return l(this.bytes,t.bytes)}async resolve(){const t=this.protos().find((t=>t.resolvable));if(!t)return[this];const e=f.get(t.name);if(!e)throw c(new Error("no available resolver for ".concat(t.name)),"ERR_NO_AVAILABLE_RESOLVER");return(await e(this)).map((t=>new p(t)))}nodeAddress(){const t=this.protoCodes(),e=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==t[0]&&41!==t[0]&&54!==t[0]&&55!==t[0])throw new Error("no protocol with name: \"'".concat(e[0],'\'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".'));if("tcp"!==r[2]&&"udp"!==r[2])throw new Error("no protocol with name: \"'".concat(e[1],'\'". Must have a valid transport protocol: "{tcp, udp}".'));return{family:41===t[0]||55===t[0]?6:4,address:r[1],port:parseInt(r[3])}}isThinWaistAddress(t){const e=(t||this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}static fromNodeAddress(t,e){if(!t)throw new Error("requires node address object");if(!e)throw new Error("requires transport protocol");let r;switch(t.family){case 4:r="ip4";break;case 6:r="ip6";break;default:throw Error("Invalid addr family. Got '".concat(t.family,"' instead of 4 or 6"))}return new p("/"+[r,t.address,e,t.port].join("/"))}static isName(t){return!!p.isMultiaddr(t)&&t.protos().some((t=>t.resolvable))}static isMultiaddr(t){return t instanceof p||Boolean(t&&t[d])}[u](){return"<Multiaddr "+h(this.bytes,"base16")+" - "+n.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+h(this.bytes,"base16")+" - "+n.bytesToString(this.bytes)+">"}}p.protocols=i,p.resolvers=f,t.exports={Multiaddr:p,multiaddr:function(t){return new p(t)},protocols:i,resolvers:f}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(131),i=r.n(n),o=r(1);function s(t){return"0x"+i.a.keccak_256(Object(o.a)(t))}},function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"e",(function(){return s})),r.d(e,"a",(function(){return a})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return u}));var n=r(1),i=r(44);function o(t){return"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),Object(n.a)(t)}function s(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function a(t){return"string"===typeof t?Object(i.f)(t,i.a.NFKC):Object(n.a)(t)}function c(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let t=null;for(const e in r)if(e.toLowerCase()===n[i]){t=r[e];break}if(null===t)return null;r=t}return r}function u(t){const e=Object(n.a)(t);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const r=Object(n.i)(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}},function(t,e,r){var n=r(19),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e){t.exports={options:{usePureJavaScript:!1}}},function(t,e,r){"use strict";r.r(e),r.d(e,"CURVE",(function(){return h})),r.d(e,"Point",(function(){return m})),r.d(e,"Signature",(function(){return b})),r.d(e,"getPublicKey",(function(){return H})),r.d(e,"recoverPublicKey",(function(){return G})),r.d(e,"getSharedSecret",(function(){return J})),r.d(e,"sign",(function(){return tt})),r.d(e,"signSync",(function(){return et})),r.d(e,"verify",(function(){return nt})),r.d(e,"schnorr",(function(){return mt})),r.d(e,"utils",(function(){return vt}));var n=r(189);const i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(8),u=s**BigInt(256),h={a:i,b:BigInt(7),P:u-s**BigInt(32)-BigInt(977),n:u-BigInt("432420386565659656852420866394968145599"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function l(t){const{a:e,b:r}=h,n=k(t*t),i=k(n*t);return k(i+e*t+r)}const f=h.a===i;class d{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof m))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new d(t.x,t.y,o)}static toAffineBatch(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;const r=new Array(t.length),n=N(t.reduce(((t,n,o)=>n===i?t:(r[o]=t,k(t*n,e))),o),e);return t.reduceRight(((t,n,o)=>n===i?t:(r[o]=k(t*r[o],e),k(t*n,e))),n),r}(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return d.toAffineBatch(t).map(d.fromAffine)}equals(t){if(!(t instanceof d))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:i,y:o,z:a}=t,c=k(n**s),u=k(a**s),h=k(e*u),l=k(i*c),f=k(k(r*a)*u),p=k(k(o*n)*c);return h===l&&f===p}negate(){return new d(this.x,k(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,n=k(t**s),i=k(e**s),o=k(i**s),u=k(s*(k((t+i)**s)-n-o)),h=k(a*n),l=k(h**s),f=k(l-s*u),p=k(h*(u-f)-c*o),m=k(s*e*r);return new d(f,p,m)}add(t){if(!(t instanceof d))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:o,y:a,z:c}=t;if(o===i||a===i)return this;if(e===i||r===i)return t;const u=k(n**s),h=k(c**s),l=k(e*h),f=k(o*u),p=k(k(r*c)*h),m=k(k(a*n)*u),y=k(f-l),g=k(m-p);if(y===i)return g===i?this.double():d.ZERO;const b=k(y**s),v=k(y*b),w=k(l*b),_=k(g**s-v-s*w),S=k(g*(w-_)-p*v),E=k(n*c*y);return new d(_,S,E)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let e=O(t);d.BASE;const r=d.ZERO;if(e===i)return r;if(e===o)return this;if(!f){let t=r,n=this;for(;e>i;)e&o&&(t=t.add(n)),n=n.double(),e>>=o;return t}let{k1neg:n,k1:s,k2neg:a,k2:c}=x(e),u=r,l=r,p=this;for(;s>i||c>i;)s&o&&(u=u.add(p)),c&o&&(l=l.add(p)),p=p.double(),s>>=o,c>>=o;return n&&(u=u.negate()),a&&(l=l.negate()),l=new d(k(l.x*h.beta),l.y,l.z),u.add(l)}precomputeWindow(t){const e=f?128/t+1:256/t+1,r=[];let n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(d.BASE)&&(e=m.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&p.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=d.normalizeZ(n),p.set(e,n)));let i=d.ZERO,s=d.ZERO;const a=1+(f?128/r:256/r),c=2**(r-1),u=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let f=0;f<a;f++){const e=f*c;let r=Number(t&u);if(t>>=l,r>c&&(r-=h,t+=o),0===r){let t=n[e];f%2&&(t=t.negate()),s=s.add(t)}else{let t=n[e+Math.abs(r)-1];r<0&&(t=t.negate()),i=i.add(t)}}return{p:i,f:s}}multiply(t,e){let r,n,i=O(t);if(f){const{k1neg:t,k1:o,k2neg:s,k2:a}=x(i);let{p:c,f:u}=this.wNAF(o,e),{p:l,f:f}=this.wNAF(a,e);t&&(c=c.negate()),s&&(l=l.negate()),l=new d(k(l.x*h.beta),l.y,l.z),r=c.add(l),n=u.add(f)}else{const{p:t,f:o}=this.wNAF(i,e);r=t,n=o}return d.normalizeZ([r,n])[0]}toAffine(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N(this.z);const{x:e,y:r,z:n}=this,i=t,s=k(i*i),a=k(s*i),c=k(e*s),u=k(r*a);if(k(n*i)!==o)throw new Error("invZ was invalid");return new m(c,u)}}d.BASE=new d(h.Gx,h.Gy,o),d.ZERO=new d(i,o,i);const p=new WeakMap;class m{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,p.delete(this)}static fromCompressedHex(t){const e=32===t.length,r=T(e?t:t.subarray(1));if(!K(r))throw new Error("Point is not on curve");let n=function(t){const{P:e}=h,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),l=t*t*t%e,f=l*l*t%e,d=P(f,a)*f%e,p=P(d,a)*f%e,m=P(p,s)*l%e,y=P(m,n)*m%e,g=P(y,i)*y%e,b=P(g,c)*g%e,v=P(b,u)*b%e,w=P(v,c)*g%e,_=P(w,a)*f%e,S=P(_,o)*y%e,E=P(S,r)*l%e;return P(E,s)}(l(r));const i=(n&o)===o;if(e)i&&(n=k(-n));else{1===(1&t[0])!==i&&(n=k(-n))}const c=new m(r,n);return c.assertValidity(),c}static fromUncompressedHex(t){const e=T(t.subarray(1,33)),r=T(t.subarray(33,65)),n=new m(e,r);return n.assertValidity(),n}static fromHex(t){const e=C(t),r=e.length,n=e[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(e);if(65===r&&4===n)return this.fromUncompressedHex(e);throw new Error("Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ".concat(r))}static fromPrivateKey(t){return m.BASE.multiply(q(t))}static fromSignature(t,e,r){const n=L(t=C(t)),{r:o,s:s}=z(e);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");if(n===i)throw new Error("Cannot recover signature: msgHash cannot be 0");const a=1&r?"03":"02",c=m.fromHex(a+E(o)),{n:u}=h,l=N(o,u),f=k(-n*l,u),d=k(s*l,u),p=m.BASE.multiplyAndAddUnsafe(c,f,d);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return R(this.toHex(t))}toHex(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=E(this.x);if(t){const t=this.y&o?"03":"02";return"".concat(t).concat(e)}return"04".concat(e).concat(E(this.y))}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!K(e)||!K(r))throw new Error(t);const n=k(r*r);if(k(n-l(e))!==i)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new m(this.x,k(-this.y))}double(){return d.fromAffine(this).double().toAffine()}add(t){return d.fromAffine(this).add(d.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return d.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const n=d.fromAffine(this),s=e===i||e===o||this!==m.BASE?n.multiplyUnsafe(e):n.multiply(e),a=d.fromAffine(t).multiplyUnsafe(r),c=s.add(a);return c.equals(d.ZERO)?void 0:c.toAffine()}}function y(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function g(t){if(t.length<2||2!==t[0])throw new Error("Invalid signature integer tag: ".concat(S(t)));const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:T(r),left:t.subarray(e+2)}}m.BASE=new m(h.Gx,h.Gy),m.ZERO=new m(i,i);class b{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=w(t),r="Signature.fromCompact";if("string"!==typeof t&&!e)throw new TypeError("".concat(r,": Expected string or Uint8Array"));const n=e?S(t):t;if(128!==n.length)throw new Error("".concat(r,": Expected 64-byte hex"));return new b(I(n.slice(0,64)),I(n.slice(64,128)))}static fromDER(t){const e=w(t);if("string"!==typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=function(t){if(t.length<2||48!=t[0])throw new Error("Invalid signature tag: ".concat(S(t)));if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=g(t.subarray(2)),{data:n,left:i}=g(r);if(i.length)throw new Error("Invalid signature: left bytes after parsing: ".concat(S(i)));return{r:e,s:n}}(e?t:R(t));return new b(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!j(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!j(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=h.n>>o;return this.s>t}normalizeS(){return this.hasHighS()?new b(this.r,h.n-this.s):this}toDERRawBytes(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return R(this.toDERHex(t))}toDERHex(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=y(M(this.s));if(t)return e;const r=y(M(this.r)),n=M(r.length/2),i=M(e.length/2),o=M(r.length/2+e.length/2+4);return"30".concat(o,"02").concat(n).concat(r,"02").concat(i).concat(e)}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return R(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}function v(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(!e.every(w))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const n=e.reduce(((t,e)=>t+e.length),0),i=new Uint8Array(n);for(let o=0,s=0;o<e.length;o++){const t=e[o];i.set(t,s),s+=t.length}return i}function w(t){return t instanceof Uint8Array}const _=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function S(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=_[t[r]];return e}function E(t){if(t>u)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function A(t){return R(E(t))}function M(t){const e=t.toString(16);return 1&e.length?"0".concat(e):e}function I(t){if("string"!==typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt("0x".concat(t))}function R(t){if("string"!==typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function T(t){return I(S(t))}function C(t){return t instanceof Uint8Array?Uint8Array.from(t):R(t)}function O(t){if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"===typeof t&&j(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function k(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;const r=t%e;return r>=i?r:e+r}function P(t,e){const{P:r}=h;let n=t;for(;e-- >i;)n*=n,n%=r;return n}function N(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;if(t===i||e<=i)throw new Error("invert: expected positive integers, got n=".concat(t," mod=").concat(e));let r=k(t,e),n=e,s=i,a=o,c=o,u=i;for(;r!==i;){const t=n/r,e=n%r,i=s-c*t,o=a-u*t;n=r,r=e,s=c,a=u,c=i,u=o}const l=n;if(l!==o)throw new Error("invert: does not exist");return k(s,e)}const D=(t,e)=>(t+e/s)/e,B=s**BigInt(128);function x(t){const{n:e}=h,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=D(s*t,e),c=D(-n*t,e);let u=k(t-a*r-c*i,e),l=k(-a*n-c*s,e);const f=u>B,d=l>B;if(f&&(u=e-u),d&&(l=e-l),u>B||l>B)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:d,k2:l}}function L(t){const{n:e}=h,r=8*t.length-256;let n=T(t);return r>0&&(n>>=BigInt(r)),n>=e&&(n-=e),n}class U{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return vt.hmacSha256(this.k,...e)}hmacSync(){if("function"!==typeof vt.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=vt.hmacSha256Sync(this.k,...e);if(n instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return n}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function j(t){return i<t&&t<h.n}function K(t){return i<t&&t<h.P}function F(t,e,r){const n=T(t);if(!j(n))return;const{n:s}=h,a=m.BASE.multiply(n),c=k(a.x,s);if(c===i)return;const u=k(N(n,s)*k(e+r*c,s),s);if(u===i)return;const l=new b(c,u);return{sig:l,recovery:(a.x===l.r?0:2)|Number(a.y&o)}}function q(t){let e;if("bigint"===typeof t)e=t;else if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"===typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");e=I(t)}else{if(!w(t))throw new TypeError("Expected valid private key");if(32!==t.length)throw new Error("Expected 32 bytes of private key");e=T(t)}if(!j(e))throw new Error("Expected private key: 0 < key < n");return e}function V(t){return t instanceof m?(t.assertValidity(),t):m.fromHex(t)}function z(t){if(t instanceof b)return t.assertValidity(),t;try{return b.fromDER(t)}catch(e){return b.fromCompact(t)}}function H(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return m.fromPrivateKey(t).toRawBytes(e)}function G(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m.fromSignature(t,e,r).toRawBytes(n)}function W(t){const e=w(t),r="string"===typeof t,n=(e||r)&&t.length;return e?33===n||65===n:r?66===n||130===n:t instanceof m}function J(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(W(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!W(e))throw new TypeError("getSharedSecret: second arg must be public key");const n=V(e);return n.assertValidity(),n.multiply(q(t)).toRawBytes(r)}function Y(t){return T(t.length>32?t.slice(0,32):t)}function Z(t){const e=Y(t),r=k(e,h.n);return X(r<i?e:r)}function X(t){if("bigint"!==typeof t)throw new Error("Expected bigint");return R(E(t))}function Q(t,e,r){if(null==t)throw new Error('sign: expected valid message hash, not "'.concat(t,'"'));const n=C(t),i=q(e),o=[X(i),Z(n)];if(null!=r){!0===r&&(r=vt.randomBytes(32));const t=C(r);if(32!==t.length)throw new Error("sign: Expected 32 bytes of extra data");o.push(t)}return{seed:v(...o),m:Y(n),d:i}}function $(t,e){let{sig:r,recovery:n}=t;const{canonical:i,der:o,recovered:s}=Object.assign({canonical:!0,der:!0},e);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=o?r.toDERRawBytes():r.toCompactRawBytes();return s?[a,n]:a}async function tt(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{seed:n,m:i,d:o}=Q(t,e,r.extraEntropy);let s;const a=new U;for(await a.reseed(n);!(s=F(await a.generate(),i,o));)await a.reseed();return $(s,r)}function et(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{seed:n,m:i,d:o}=Q(t,e,r.extraEntropy);let s;const a=new U;for(a.reseedSync(n);!(s=F(a.generateSync(),i,o));)a.reseedSync();return $(s,r)}const rt={strict:!0};function nt(t,e,r){let n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rt;try{n=z(t),e=C(e)}catch(b){return!1}const{r:s,s:a}=n;if(o.strict&&n.hasHighS())return!1;const c=L(e);if(c===i)return!1;let u;try{u=V(r)}catch(b){return!1}const{n:l}=h,f=N(a,l),d=k(c*f,l),p=k(s*f,l),y=m.BASE.multiplyAndAddUnsafe(u,d,p);if(!y)return!1;const g=k(y.x,l);return g===s}function it(t){return k(T(t),h.n)}function ot(t){return(t.y&o)===i}class st{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=C(t);if(64!==e.length)throw new TypeError("SchnorrSignature.fromHex: expected 64 bytes, not ".concat(e.length));const r=T(e.subarray(0,32)),n=T(e.subarray(32,64));return new st(r,n)}assertValidity(){const{r:t,s:e}=this;if(!K(t)||!j(e))throw new Error("Invalid signature")}toHex(){return E(this.r)+E(this.s)}toRawBytes(){return R(this.toHex())}}function at(t,e,r){if(null==t)throw new TypeError('sign: Expected valid message, not "'.concat(t,'"'));const n=C(t),i=q(e),o=C(r);if(32!==o.length)throw new TypeError("sign: Expected 32 bytes of aux randomness");const s=m.fromPrivateKey(i),a=s.toRawX();return{m:n,P:s,px:a,d:ot(s)?i:h.n-i,rand:o}}function ct(t,e){return A(t^T(e))}function ut(t){const e=k(T(t),h.n);if(e===i)throw new Error("sign: Creation of signature failed. k is zero");const r=m.fromPrivateKey(e),n=r.toRawX();return{R:r,rx:n,k:ot(r)?e:h.n-e}}function ht(t,e,r,n){return new st(t.x,k(e+r*n,h.n)).toRawBytes()}function lt(t,e,r){const n=t instanceof st,i=n?t:st.fromHex(t);return n&&i.assertValidity(),{...i,m:C(e),P:V(r)}}function ft(t,e,r,n){const i=m.BASE.multiplyAndAddUnsafe(e,q(r),k(-n,h.n));return!(!i||!ot(i)||i.x!==t)}async function dt(t,e,r){try{const{r:n,s:i,m:o,P:s}=lt(t,e,r),a=it(await vt.taggedHash(gt.challenge,A(n),s.toRawX(),o));return ft(n,s,i,a)}catch(n){return!1}}function pt(t,e,r){try{const{r:n,s:i,m:o,P:s}=lt(t,e,r),a=it(vt.taggedHashSync(gt.challenge,A(n),s.toRawX(),o));return ft(n,s,i,a)}catch(n){return!1}}const mt={Signature:st,getPublicKey:function(t){return m.fromPrivateKey(t).toRawX()},sign:async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt.randomBytes();const{m:n,px:i,d:o,rand:s}=at(t,e,r),a=ct(o,await vt.taggedHash(gt.aux,s)),{R:c,rx:u,k:h}=ut(await vt.taggedHash(gt.nonce,a,i,n)),l=it(await vt.taggedHash(gt.challenge,u,i,n)),f=ht(c,h,l,o),d=await dt(f,n,i);if(!d)throw new Error("sign: Invalid signature produced");return f},verify:dt,signSync:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt.randomBytes();const{m:n,px:i,d:o,rand:s}=at(t,e,r),a=ct(o,vt.taggedHashSync(gt.aux,s)),{R:c,rx:u,k:h}=ut(vt.taggedHashSync(gt.nonce,a,i,n)),l=it(vt.taggedHashSync(gt.challenge,u,i,n)),f=ht(c,h,l,o),d=pt(f,n,i);if(!d)throw new Error("sign: Invalid signature produced");return f},verifySync:pt};m.BASE._setWindowSize(8);const yt={node:n,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},gt={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},bt={},vt={isValidPrivateKey(t){try{return q(t),!0}catch(e){return!1}},privateAdd:(t,e)=>A(k(q(t)+T(C(e)),h.n)),privateNegate:t=>{const e=q(t);return A(h.n-e)},pointAddScalar:(t,e,r)=>{const n=m.fromHex(t),i=T(C(e)),s=m.BASE.multiplyAndAddUnsafe(n,i,o);if(!s)throw new Error("Tweaked point at infinity");return s.toRawBytes(r)},pointMultiply:(t,e,r)=>{const n=m.fromHex(t),i=T(C(e));return n.multiply(i).toRawBytes(r)},hashToPrivateKey:t=>{if((t=C(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return A(k(T(t),h.n-o)+o)},randomBytes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(yt.web)return yt.web.getRandomValues(new Uint8Array(t));if(yt.node){const{randomBytes:e}=yt.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>vt.hashToPrivateKey(vt.randomBytes(40)),bytesToHex:S,hexToBytes:R,concatBytes:v,mod:k,invert:N,sha256:async function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(yt.web){const t=await yt.web.subtle.digest("SHA-256",v(...e));return new Uint8Array(t)}if(yt.node){const{createHash:t}=yt.node,r=t("sha256");return e.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(yt.web){const e=await yt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=v(...r),i=await yt.web.subtle.sign("HMAC",e,n);return new Uint8Array(i)}if(yt.node){const{createHmac:e}=yt.node,n=e("sha256",t);return r.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async function(t){let e=bt[t];if(void 0===e){const r=await vt.sha256(Uint8Array.from(t,(t=>t.charCodeAt(0))));e=v(r,r),bt[t]=e}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return vt.sha256(e,...n)},taggedHashSync:function(t){if("function"!==typeof vt.sha256Sync)throw new Error("utils.sha256Sync is undefined, you need to set it");let e=bt[t];if(void 0===e){const r=vt.sha256Sync(Uint8Array.from(t,(t=>t.charCodeAt(0))));e=v(r,r),bt[t]=e}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return vt.sha256Sync(e,...n)},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.BASE;const r=e===m.BASE?e:new m(e.x,e.y);return r._setWindowSize(t),r.multiply(a),r}}},function(t,e,r){var n;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return a(u(t),arguments)}function s(t,e){return o.apply(null,[t].concat(e||[]))}function a(t,e){var r,n,s,a,c,u,h,l,f,d=1,p=t.length,m="";for(n=0;n<p;n++)if("string"===typeof t[n])m+=t[n];else if("object"===typeof t[n]){if((a=t[n]).keys)for(r=e[d],s=0;s<a.keys.length;s++){if(void 0==r)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[s],a.keys[s-1]));r=r[a.keys[s]]}else r=a.param_no?e[a.param_no]:e[d++];if(i.not_type.test(a.type)&&i.not_primitive.test(a.type)&&r instanceof Function&&(r=r()),i.numeric_arg.test(a.type)&&"number"!==typeof r&&isNaN(r))throw new TypeError(o("[sprintf] expecting number but found %T",r));switch(i.number.test(a.type)&&(l=r>=0),a.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,a.width?parseInt(a.width):0);break;case"e":r=a.precision?parseFloat(r).toExponential(a.precision):parseFloat(r).toExponential();break;case"f":r=a.precision?parseFloat(r).toFixed(a.precision):parseFloat(r);break;case"g":r=a.precision?String(Number(r.toPrecision(a.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=a.precision?r.substring(0,a.precision):r;break;case"t":r=String(!!r),r=a.precision?r.substring(0,a.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=a.precision?r.substring(0,a.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=a.precision?r.substring(0,a.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}i.json.test(a.type)?m+=r:(!i.number.test(a.type)||l&&!a.sign?f="":(f=l?"+":"-",r=r.toString().replace(i.sign,"")),u=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",h=a.width-(f+r).length,c=a.width&&h>0?u.repeat(h):"",m+=a.align?f+r+c:"0"===u?f+c+r:c+f+r)}return m}var c=Object.create(null);function u(t){if(c[t])return c[t];for(var e,r=t,n=[],o=0;r;){if(null!==(e=i.text.exec(r)))n.push(e[0]);else if(null!==(e=i.modulo.exec(r)))n.push("%");else{if(null===(e=i.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){o|=1;var s=[],a=e[2],u=[];if(null===(u=i.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(a=a.substring(u[0].length));)if(null!==(u=i.key_access.exec(a)))s.push(u[1]);else{if(null===(u=i.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}e[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}r=r.substring(e[0].length)}return c[t]=n}e.sprintf=o,e.vsprintf=s,"undefined"!==typeof window&&(window.sprintf=o,window.vsprintf=s,void 0===(n=function(){return{sprintf:o,vsprintf:s}}.call(e,r,e,t))||(t.exports=n))}()},function(t,e,r){"use strict";(function(t){var n=r(379),i=r(380),o=r(208);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,r);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,e,r)}function u(t,e,r,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=f(t,e);return t}(t,e,r,n):"string"===typeof e?function(t,e,r){"string"===typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(c.isBuffer(e)){var r=0|d(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(n=e.length)!==n?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(h(e),t=a(t,e<0?0:0|d(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return F(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return T(this,e,r);case"latin1":case"binary":return C(this,e,r);case"base64":return M(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){var o,s=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=r;o<a;o++)if(u(t,o)===u(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var l=!0,f=0;f<c;f++)if(u(t,o+f)!==u(e,f)){l=!1;break}if(l)return o}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function w(t,e,r,n){return V(F(e,t.length-r),t,r,n)}function _(t,e,r,n){return V(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return _(t,e,r,n)}function E(t,e,r,n){return V(q(e),t,r,n)}function A(t,e,r,n){return V(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function M(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,c,u=t[i],h=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=r)switch(l){case 1:u<128&&(h=u);break;case 2:128===(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)>127&&(h=c);break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=R));return r}(n)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return u(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return function(t,e,r,n){return h(e),e<=0?a(t,e):void 0!==r?"string"===typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},c.allocUnsafe=function(t){return l(null,t)},c.allocUnsafeSlow=function(t){return l(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):m.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),h=t.slice(e,r),l=0;l<a;++l)if(u[l]!==h[l]){o=u[l],s=h[l];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function O(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=K(t[o]);return i}function k(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,r,n,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function x(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,o){return o||x(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function U(t,e,r,n,o){return o||x(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;r=new c(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},c.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},c.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||N(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||N(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);N(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);N(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},c.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=c.isBuffer(t)?t:F(new c(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function K(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function V(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(21))},function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"e",(function(){return p})),r.d(e,"d",(function(){return m})),r.d(e,"b",(function(){return y})),r.d(e,"c",(function(){return g}));var n=r(1),i=r(30),o=r(13),s=r(41);const a=new(r(3).a)("address/5.6.1");function c(t){Object(n.l)(t,20)||a.throwArgumentError("invalid address","address",t);const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=e[n].charCodeAt(0);const i=Object(n.a)(Object(o.a)(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(15&i[n>>1])>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}const u={};for(let b=0;b<10;b++)u[String(b)]=String(b);for(let b=0;b<26;b++)u[String.fromCharCode(65+b)]=String(10+b);const h=Math.floor((l=9007199254740991,Math.log10?Math.log10(l):Math.log(l)/Math.LN10));var l;function f(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>u[t])).join("");for(;e.length>=h;){let t=e.substring(0,h);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function d(t){let e=null;if("string"!==typeof t&&a.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=c(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&a.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==f(t)&&a.throwArgumentError("bad icap checksum","address",t),e=Object(i.c)(t.substring(4));e.length<40;)e="0"+e;e=c("0x"+e)}else a.throwArgumentError("invalid address","address",t);return e}function p(t){try{return d(t),!0}catch(e){}return!1}function m(t){let e=Object(i.b)(d(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+f("XE00"+e)+e}function y(t){let e=null;try{e=d(t.from)}catch(c){a.throwArgumentError("missing from address","transaction",t)}const r=Object(n.o)(Object(n.a)(i.a.from(t.nonce).toHexString()));return d(Object(n.e)(Object(o.a)(Object(s.encode)([e,r])),12))}function g(t,e,r){return 32!==Object(n.d)(e)&&a.throwArgumentError("salt must be 32 bytes","salt",e),32!==Object(n.d)(r)&&a.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),d(Object(n.e)(Object(o.a)(Object(n.b)(["0xff",d(t),e,r])),12))}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var c,u=[],h=!1,l=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";const{CID:n}=r(85),i=r(84),o=r(273),s=r(71),a=r(116),{base58btc:c}=r(71),{base32:u}=r(84),{base16:h}=r(272),l=r(73),f=r(166),d=r(284),{PeerIdProto:p}=r(504),{equals:m}=r(45),{fromString:y}=r(24),{toString:g}=r(29),{identity:b}=r(103),v={...i,...o,...s,...a},w=Object.keys(v).reduce(((t,e)=>t.or(v[e])),u.decoder);const _=d(class{constructor(t,e,r){if(!(t instanceof Uint8Array))throw new Error("invalid id provided");if(e&&r&&!m(e.public.bytes,r.bytes))throw new Error("inconsistent arguments");this._id=t,this._idB58String=c.encode(this.id).substring(1),this._privKey=e,this._pubKey=r}get id(){return this._id}set id(t){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(t){this._privKey=t}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{const t=l.decode(this.id);t.code===b.code&&(this._pubKey=f.unmarshalPublicKey(t.digest))}catch(t){}return this._pubKey}set pubKey(t){this._pubKey=t}marshalPubKey(){if(this.pubKey)return f.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return f.marshalPrivateKey(this.privKey)}marshal(t){return p.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:t?null:this.marshalPrivKey()}).finish()}toPrint(){let t=this.toB58String();t.startsWith("Qm")&&(t=t.slice(2));let e=6;return t.length<e&&(e=t.length),"<peer.ID "+t.substr(0,e)+">"}toJSON(){return{id:this.toB58String(),privKey:M(this.marshalPrivKey()),pubKey:M(this.marshalPubKey())}}toHexString(){return h.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){const t=n.createV1(114,l.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:t.toString(),enumerable:!1})}return this._idCIDString}equals(t){if(t instanceof Uint8Array)return m(this.id,t);if(t.id)return m(this.id,t.id);throw new Error("not valid Id")}isEqual(t){return this.equals(t)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&m(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(l.decode(this.id).code===b.code)return!0}catch(t){}return!1}},{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});e=t.exports=_;const S=t=>t.bytes.length<=42?l.create(b.code,t.bytes).bytes:t.hash(),E=async(t,e)=>{const r=await S(e);return new _(r,t,e)};e.create=async t=>{(t=t||{}).bits=t.bits||2048,t.keyType=t.keyType||"RSA";const e=await f.generateKeyPair(t.keyType,t.bits);return E(e,e.public)},e.createFromHexString=t=>new _(h.decode("f"+t)),e.createFromBytes=t=>{try{const r=n.decode(t);if(!A(r))throw new Error("Supplied PeerID CID is invalid");return e.createFromCID(r)}catch{if(l.decode(t).code!==b.code)throw new Error("Supplied PeerID CID is invalid");return new _(t)}},e.createFromB58String=t=>e.createFromBytes(c.decode("z"+t));const A=t=>114===t.code||112===t.code;function M(t){if(t)return g(t,"base64pad")}e.createFromCID=t=>{if(!(t=n.asCID(t))||!A(t))throw new Error("Supplied PeerID CID is invalid");return new _(t.multihash.bytes)},e.createFromPubKey=async t=>{let e=t;if("string"===typeof e&&(e=y(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const r=await f.unmarshalPublicKey(e);return E(void 0,r)},e.createFromPrivKey=async t=>{if("string"===typeof t&&(t=y(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const e=await f.unmarshalPrivateKey(t);return E(e,e.public)},e.createFromJSON=async t=>{const e=c.decode("z"+t.id),r=t.privKey&&y(t.privKey,"base64pad"),n=t.pubKey&&y(t.pubKey,"base64pad"),i=n&&await f.unmarshalPublicKey(n);if(!r)return new _(e,void 0,i);const o=await f.unmarshalPrivateKey(r),s=await S(o.public);let a;if(i&&(a=await S(i)),i&&!m(s,a))throw new Error("Public and private key do not match");if(e&&!m(s,e))throw new Error("Id and private key do not match");return new _(e,o,i)},e.createFromProtobuf=async t=>{"string"===typeof t&&(t=y(t,"base16"));let e,r,{id:n,privKey:i,pubKey:o}=p.decode(t);if(i=!!i&&await f.unmarshalPrivateKey(i),o=!!o&&await f.unmarshalPublicKey(o),i&&(r=await S(i.public)),o&&(e=await S(o)),i){if(o&&!m(r,e))throw new Error("Public and private key do not match");return new _(r,i,i.public)}if(o)return new _(e,void 0,o);if(n)return new _(n);throw new Error("Protobuf did not contain any usable key material")},e.parse=t=>("1"!==t.charAt(0)&&"Q"!==t.charAt(0)||(t="z".concat(t)),e.createFromBytes(w.decode(t))),e.isPeerId=t=>Boolean("object"===typeof t&&t._id&&t._idB58String)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(271);e.fromString=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=n[e];if(!r)throw new Error('Unsupported encoding "'.concat(e,'"'));return r.decoder.decode("".concat(r.prefix).concat(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.concat=function(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return a}));var n=r(6),i=r.n(n),o=r(2),s=r.n(o);const a={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.payload&&e.uint32(10).bytes(t.payload),void 0!==t.contentTopic&&e.uint32(18).string(t.contentTopic),void 0!==t.version&&e.uint32(24).uint32(t.version),void 0!==t.timestampDeprecated&&e.uint32(33).double(t.timestampDeprecated),void 0!==t.timestamp&&e.uint32(80).sint64(t.timestamp),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={payload:void 0,contentTopic:void 0,version:void 0,timestampDeprecated:void 0,timestamp:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.payload=r.bytes();break;case 2:i.contentTopic=r.string();break;case 3:i.version=r.uint32();break;case 4:i.timestampDeprecated=r.double();break;case 10:i.timestamp=r.sint64();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({payload:f(t.payload)?h(t.payload):void 0,contentTopic:f(t.contentTopic)?String(t.contentTopic):void 0,version:f(t.version)?Number(t.version):void 0,timestampDeprecated:f(t.timestampDeprecated)?Number(t.timestampDeprecated):void 0,timestamp:f(t.timestamp)?i.a.fromString(t.timestamp):void 0}),toJSON(t){const e={};return void 0!==t.payload&&(e.payload=void 0!==t.payload?function(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return l(e.join(""))}(t.payload):void 0),void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),void 0!==t.version&&(e.version=Math.round(t.version)),void 0!==t.timestampDeprecated&&(e.timestampDeprecated=t.timestampDeprecated),void 0!==t.timestamp&&(e.timestamp=(t.timestamp||void 0).toString()),e},fromPartial(t){var e,r,n,o;const s={payload:void 0,contentTopic:void 0,version:void 0,timestampDeprecated:void 0,timestamp:void 0};return s.payload=null!==(e=t.payload)&&void 0!==e?e:void 0,s.contentTopic=null!==(r=t.contentTopic)&&void 0!==r?r:void 0,s.version=null!==(n=t.version)&&void 0!==n?n:void 0,s.timestampDeprecated=null!==(o=t.timestampDeprecated)&&void 0!==o?o:void 0,s.timestamp=void 0!==t.timestamp&&null!==t.timestamp?i.a.fromValue(t.timestamp):void 0,s}};var c=(()=>{if("undefined"!==typeof c)return c;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw"Unable to locate global object"})();const u=c.atob||(t=>c.Buffer.from(t,"base64").toString("binary"));function h(t){const e=u(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const l=c.btoa||(t=>c.Buffer.from(t,"binary").toString("base64"));function f(t){return null!==t&&void 0!==t}s.a.util.Long!==i.a&&(s.a.util.Long=i.a,s.a.configure())}).call(this,r(21))},function(t,e,r){"use strict";e.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"},e.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_PEER_DIAL_INTERCEPTED:"ERR_PEER_DIAL_INTERCEPTED",ERR_CONNECTION_INTERCEPTED:"ERR_CONNECTION_INTERCEPTED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}},function(t,e,r){(function(e,n,i,o){var s=r(16),a=r(479),c=t.exports=s.util=s.util||{};function u(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function h(t){if(this.data="",this.read=0,"string"===typeof t)this.data=t;else if(c.isArrayBuffer(t)||c.isArrayBufferView(t))if("undefined"!==typeof o&&t instanceof o)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof h||"object"===typeof t&&"string"===typeof t.data&&"number"===typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!==typeof e&&e.nextTick&&!e.browser)return c.nextTick=e.nextTick,void(c.setImmediate="function"===typeof n?n:c.nextTick);if("function"===typeof n)return c.setImmediate=function(){return n.apply(void 0,arguments)},void(c.nextTick=function(t){return n(t)});if(c.setImmediate=function(t){setTimeout(t,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var t="forge.setImmediate",r=[];c.setImmediate=function(e){r.push(e),1===r.length&&window.postMessage(t,"*")},window.addEventListener("message",(function(e){if(e.source===window&&e.data===t){e.stopPropagation();var n=r.slice();r.length=0,n.forEach((function(t){t()}))}}),!0)}if("undefined"!==typeof MutationObserver){var i=Date.now(),o=!0,s=document.createElement("div");r=[];new MutationObserver((function(){var t=r.slice();r.length=0,t.forEach((function(t){t()}))})).observe(s,{attributes:!0});var a=c.setImmediate;c.setImmediate=function(t){Date.now()-i>15?(i=Date.now(),a(t)):(r.push(t),1===r.length&&s.setAttribute("a",o=!o))}}c.nextTick=c.setImmediate}(),c.isNodejs="undefined"!==typeof e&&e.versions&&e.versions.node,c.globalScope=c.isNodejs?i:"undefined"===typeof self?window:self,c.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c.isArrayBuffer=function(t){return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer},c.isArrayBufferView=function(t){return t&&c.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},c.ByteBuffer=h,c.ByteStringBuffer=h;c.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},c.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},c.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},c.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},c.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},c.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},c.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(c.encodeUtf8(t))},c.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},c.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},c.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},c.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},c.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},c.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},c.ByteStringBuffer.prototype.putInt=function(t,e){u(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},c.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},c.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},c.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},c.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},c.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},c.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},c.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},c.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},c.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},c.ByteStringBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},c.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},c.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},c.ByteStringBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},c.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},c.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},c.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},c.ByteStringBuffer.prototype.copy=function(){var t=c.createBuffer(this.data);return t.read=this.read,t},c.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},c.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},c.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},c.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},c.ByteStringBuffer.prototype.toString=function(){return c.decodeUtf8(this.bytes())},c.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=c.isArrayBuffer(t),n=c.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},c.DataBuffer.prototype.length=function(){return this.write-this.read},c.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},c.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},c.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},c.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},c.DataBuffer.prototype.putBytes=function(t,e){if(c.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(c.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof c.DataBuffer||"object"===typeof t&&"number"===typeof t.read&&"number"===typeof t.write&&c.isArrayBufferView(t.data)){n=new Uint8Array(t.data.byteLength,t.read,t.length());return this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(t instanceof c.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"===typeof t){var i;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.hex.decode(t,i,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.base64.decode(t,i,this.write),this;if("utf8"===e&&(t=c.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.raw.decode(i),this;if("utf16"===e)return this.accommodate(2*t.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=c.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},c.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},c.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},c.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},c.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},c.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},c.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},c.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},c.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},c.DataBuffer.prototype.putInt=function(t,e){u(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},c.DataBuffer.prototype.putSignedInt=function(t,e){return u(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},c.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},c.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},c.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},c.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},c.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},c.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},c.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},c.DataBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},c.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},c.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},c.DataBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},c.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},c.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},c.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},c.DataBuffer.prototype.copy=function(){return new c.DataBuffer(this)},c.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},c.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},c.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},c.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},c.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return c.binary.raw.encode(e);if("hex"===t)return c.binary.hex.encode(e);if("base64"===t)return c.binary.base64.encode(e);if("utf8"===t)return c.text.utf8.decode(e);if("utf16"===t)return c.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},c.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=c.encodeUtf8(t)),new c.ByteBuffer(t)},c.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},c.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o},c.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},c.bytesToHex=function(t){return c.createBuffer(t).toHex()},c.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";c.encode64=function(t,e){for(var r,n,i,o="",s="",a=0;a<t.length;)r=t.charCodeAt(a++),n=t.charCodeAt(a++),i=t.charCodeAt(a++),o+=l.charAt(r>>2),o+=l.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=l.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":l.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+=o},c.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,i,o="",s=0;s<t.length;)e=f[t.charCodeAt(s++)-43],r=f[t.charCodeAt(s++)-43],n=f[t.charCodeAt(s++)-43],i=f[t.charCodeAt(s++)-43],o+=String.fromCharCode(e<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},c.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},c.decodeUtf8=function(t){return decodeURIComponent(escape(t))},c.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},c.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},c.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},c.binary.hex.encode=c.bytesToHex,c.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var i=0,o=r=r||0;for(1&t.length&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n},c.binary.base64.encode=function(t,e){for(var r,n,i,o="",s="",a=0;a<t.byteLength;)r=t[a++],n=t[a++],i=t[a++],o+=l.charAt(r>>2),o+=l.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=l.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":l.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+=o},c.binary.base64.decode=function(t,e,r){var n,i,o,s,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,u=r=r||0;c<t.length;)n=f[t.charCodeAt(c++)-43],i=f[t.charCodeAt(c++)-43],o=f[t.charCodeAt(c++)-43],s=f[t.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==o&&(a[u++]=(15&i)<<4|o>>2,64!==s&&(a[u++]=(3&o)<<6|s));return e?u-r:a.subarray(0,u)},c.binary.base58.encode=function(t,e){return c.binary.baseN.encode(t,d,e)},c.binary.base58.decode=function(t,e){return c.binary.baseN.decode(t,d,e)},c.text={utf8:{},utf16:{}},c.text.utf8.encode=function(t,e,r){t=c.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},c.text.utf8.decode=function(t){return c.decodeUtf8(String.fromCharCode.apply(null,t))},c.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var i=new Uint16Array(n.buffer),o=r=r||0,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n},c.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},c.deflate=function(t,e,r){if(e=c.decode64(t.deflate(c.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},c.inflate=function(t,e,r){var n=t.inflate(c.encode64(e)).rval;return null===n?null:c.decode64(n)};var p=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=c.encode64(JSON.stringify(r)),n=t.setItem(e,r)),"undefined"!==typeof n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},m=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(c.decode64(r))),r},y=function(t,e,r,n){var i=m(t,e);null===i&&(i={}),i[r]=n,p(t,e,i)},g=function(t,e,r){var n=m(t,e);return null!==n&&(n=r in n?n[r]:null),n},b=function(t,e,r){var n=m(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),p(t,e,n)}},v=function(t,e){p(t,e,null)},w=function(t,e,r){var n,i=null;"undefined"===typeof r&&(r=["web","flash"]);var o=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),o="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return i};c.setItem=function(t,e,r,n,i){w(y,arguments,i)},c.getItem=function(t,e,r,n){return w(g,arguments,n)},c.removeItem=function(t,e,r,n){w(b,arguments,n)},c.clearItems=function(t,e,r){w(v,arguments,r)},c.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},c.format=function(t){for(var e,r,n=/%./g,i=0,o=[],s=0;e=n.exec(t);){(r=t.substring(s,n.lastIndex-2)).length>0&&o.push(r),s=n.lastIndex;var a=e[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")},c.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",h=u.length>3?u.length%3:0;return c+(h?u.substr(0,h)+a:"")+u.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")},c.formatSize=function(t){return t=t>=1073741824?c.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?c.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?c.formatNumber(t/1024,0)+" KiB":c.formatNumber(t,0)+" bytes"},c.bytesFromIP=function(t){return-1!==t.indexOf(".")?c.bytesFromIPv4(t):-1!==t.indexOf(":")?c.bytesFromIPv6(t):null},c.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=c.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},c.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}))).length+e),n=c.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var o=c.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},c.bytesToIP=function(t){return 4===t.length?c.bytesToIPv4(t):16===t.length?c.bytesToIPv6(t):null},c.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},c.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=c.bytesToHex(t[i]+t[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=r[r.length-1],a=e.length;s&&a===s.end+1?(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:a,end:a})}e.push(o)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),0===u.start&&e.unshift(""),7===u.end&&e.push(""))}return e.join(":")},c.estimateCores=function(t,e){if("function"===typeof t&&(e=t,t={}),t=t||{},"cores"in c&&!t.update)return e(null,c.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return c.cores=navigator.hardwareConcurrency,e(null,c.cores);if("undefined"===typeof Worker)return c.cores=1,e(null,c.cores);if("undefined"===typeof Blob)return c.cores=2,e(null,c.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function t(n,i,o){if(0===i){var s=Math.floor(n.reduce((function(t,e){return t+e}),0)/n.length);return c.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,c.cores)}!function(t,e){for(var n=[],i=[],o=0;o<t;++o){var s=new Worker(r);s.addEventListener("message",(function(r){if(i.push(r.data),i.length===t){for(var o=0;o<t;++o)n[o].terminate();e(null,i)}})),n.push(s)}for(o=0;o<t;++o)n[o].postMessage(o)}(o,(function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],o=r[n]=[],s=0;s<t;++s)if(n!==s){var a=e[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}(o,r)),t(n,i-1,o)}))}([],5,16)}}).call(this,r(22),r(110).setImmediate,r(21),r(19).Buffer)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(271);e.toString=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=n[e];if(!r)throw new Error('Unsupported encoding "'.concat(e,'"'));return r.encoder.encode(t).substring(1)}},function(t,e,r){"use strict";r.d(e,"d",(function(){return f})),r.d(e,"a",(function(){return p})),r.d(e,"c",(function(){return v})),r.d(e,"b",(function(){return w}));var n=r(8),i=r.n(n),o=r(1),s=r(3),a=r(130),c=i.a.BN;const u=new s.a(a.a),h={},l=9007199254740991;function f(t){return null!=t&&(p.isBigNumber(t)||"number"===typeof t&&t%1===0||"string"===typeof t&&!!t.match(/^-?[0-9]+$/)||Object(o.l)(t)||"bigint"===typeof t||Object(o.j)(t))}let d=!1;class p{constructor(t,e){t!==h&&u.throwError("cannot call constructor directly; use BigNumber.from",s.a.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return y(g(this).fromTwos(t))}toTwos(t){return y(g(this).toTwos(t))}abs(){return"-"===this._hex[0]?p.from(this._hex.substring(1)):this}add(t){return y(g(this).add(g(t)))}sub(t){return y(g(this).sub(g(t)))}div(t){return p.from(t).isZero()&&b("division-by-zero","div"),y(g(this).div(g(t)))}mul(t){return y(g(this).mul(g(t)))}mod(t){const e=g(t);return e.isNeg()&&b("division-by-zero","mod"),y(g(this).umod(e))}pow(t){const e=g(t);return e.isNeg()&&b("negative-power","pow"),y(g(this).pow(e))}and(t){const e=g(t);return(this.isNegative()||e.isNeg())&&b("unbound-bitwise-result","and"),y(g(this).and(e))}or(t){const e=g(t);return(this.isNegative()||e.isNeg())&&b("unbound-bitwise-result","or"),y(g(this).or(e))}xor(t){const e=g(t);return(this.isNegative()||e.isNeg())&&b("unbound-bitwise-result","xor"),y(g(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&b("negative-width","mask"),y(g(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&b("negative-width","shl"),y(g(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&b("negative-width","shr"),y(g(this).shrn(t))}eq(t){return g(this).eq(g(t))}lt(t){return g(this).lt(g(t))}lte(t){return g(this).lte(g(t))}gt(t){return g(this).gt(g(t))}gte(t){return g(this).gte(g(t))}isNegative(){return"-"===this._hex[0]}isZero(){return g(this).isZero()}toNumber(){try{return g(this).toNumber()}catch(t){b("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return u.throwError("this platform does not support BigInt",s.a.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?d||(d=!0,u.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?u.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",s.a.errors.UNEXPECTED_ARGUMENT,{}):u.throwError("BigNumber.toString does not accept parameters",s.a.errors.UNEXPECTED_ARGUMENT,{})),g(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof p)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new p(h,m(t)):t.match(/^-?[0-9]+$/)?new p(h,m(new c(t))):u.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&b("underflow","BigNumber.from",t),(t>=l||t<=-l)&&b("overflow","BigNumber.from",t),p.from(String(t));const e=t;if("bigint"===typeof e)return p.from(e.toString());if(Object(o.j)(e))return p.from(Object(o.i)(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"===typeof t)return p.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"===typeof t&&(Object(o.l)(t)||"-"===t[0]&&Object(o.l)(t.substring(1))))return p.from(t)}return u.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function m(t){if("string"!==typeof t)return m(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&u.throwArgumentError("invalid hex","value",t),"0x00"===(t=m(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function y(t){return p.from(m(t))}function g(t){const e=p.from(t).toHexString();return"-"===e[0]?new c("-"+e.substring(3),16):new c(e.substring(2),16)}function b(t,e,r){const n={fault:t,operation:e};return null!=r&&(n.value=r),u.throwError(t,s.a.errors.NUMERIC_FAULT,n)}function v(t){return new c(t,36).toString(16)}function w(t){return new c(t,16).toString(36)}},function(t,e){const r=function(){let t;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(;r.length;)t=r.shift()(t);return t},n=t=>t&&("function"===typeof t[Symbol.asyncIterator]||"function"===typeof t[Symbol.iterator]||"function"===typeof t.next),i=t=>t&&"function"===typeof t.sink&&n(t.source),o=t=>e=>(t.sink(e),t.source),s=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];if(i(e[0])){const t=e[0];e[0]=()=>t.source}else if(n(e[0])){const t=e[0];e[0]=()=>t}if(e.length>1&&i(e[e.length-1])&&(e[e.length-1]=e[e.length-1].sink),e.length>2)for(let r=1;r<e.length-1;r++)i(e[r])&&(e[r]=o(e[r]));return r(...e)};t.exports=s,t.exports.pipe=s,t.exports.rawPipe=r,t.exports.isIterable=n,t.exports.isDuplex=i},,function(t,e,r){"use strict";var n,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!==t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"===typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"===typeof t.on&&g(t,"error",e,r)}(t,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,r,n){var i,o,s,a;if(u(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"===typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=h(t))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"===typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[t];if(void 0===c)return!1;if("function"===typeof c)o(c,this,e);else{var u=c.length,h=y(c,u);for(r=0;r<u;++r)o(h[r],this,e)}return!0},a.prototype.addListener=function(t,e){return l(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return l(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,d(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,i,o,s;if(u(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){"use strict";r.d(e,"b",(function(){return E})),r.d(e,"a",(function(){return A})),r.d(e,"g",(function(){return M})),r.d(e,"f",(function(){return I})),r.d(e,"c",(function(){return R})),r.d(e,"e",(function(){return T})),r.d(e,"d",(function(){return C}));var n=r(106),i=r(1),o=r(30),s=r(44),a=r(712),c=r(4),u=r(46),h=r(353),l=r(343),f=r(38),d=r(717);const p=new(r(3).a)("hdnode/5.6.2"),m=o.a.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),y=Object(s.f)("Bitcoin seed"),g=2147483648;function b(t){return(1<<t)-1<<8-t}function v(t){return Object(i.h)(Object(i.i)(t),32)}function w(t){return n.a.encode(Object(i.b)([t,Object(i.e)(Object(h.c)(Object(h.c)(t)),0,4)]))}function _(t){if(null==t)return d.a.en;if("string"===typeof t){const e=d.a[t];return null==e&&p.throwArgumentError("unknown locale","wordlist",t),e}return t}const S={},E="m/44'/60'/0'/0/0";class A{constructor(t,e,r,n,o,s,a,l){if(t!==S)throw new Error("HDNode constructor cannot be called directly");if(e){const t=new u.a(e);Object(c.d)(this,"privateKey",t.privateKey),Object(c.d)(this,"publicKey",t.compressedPublicKey)}else Object(c.d)(this,"privateKey",null),Object(c.d)(this,"publicKey",Object(i.i)(r));Object(c.d)(this,"parentFingerprint",n),Object(c.d)(this,"fingerprint",Object(i.e)(Object(h.b)(Object(h.c)(this.publicKey)),0,4)),Object(c.d)(this,"address",Object(f.c)(this.publicKey)),Object(c.d)(this,"chainCode",o),Object(c.d)(this,"index",s),Object(c.d)(this,"depth",a),null==l?(Object(c.d)(this,"mnemonic",null),Object(c.d)(this,"path",null)):"string"===typeof l?(Object(c.d)(this,"mnemonic",null),Object(c.d)(this,"path",l)):(Object(c.d)(this,"mnemonic",l),Object(c.d)(this,"path",l.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return w(Object(i.b)([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",Object(i.i)(this.depth),this.parentFingerprint,Object(i.h)(Object(i.i)(this.index),4),this.chainCode,null!=this.privateKey?Object(i.b)(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new A(S,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let e=this.path;e&&(e+="/"+(2147483647&t));const r=new Uint8Array(37);if(t&g){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(Object(i.a)(this.privateKey),1),e&&(e+="'")}else r.set(Object(i.a)(this.publicKey));for(let i=24;i>=0;i-=8)r[33+(i>>3)]=t>>24-i&255;const n=Object(i.a)(Object(h.a)(l.a.sha512,this.chainCode,r)),s=n.slice(0,32),a=n.slice(32);let c=null,f=null;if(this.privateKey)c=v(o.a.from(s).add(this.privateKey).mod(m));else{f=new u.a(Object(i.i)(s))._addPoint(this.publicKey)}let d=e;const p=this.mnemonic;return p&&(d=Object.freeze({phrase:p.phrase,path:e,locale:p.locale||"en"})),new A(S,c,f,this.fingerprint,v(a),t,this.depth+1,d)}derivePath(t){const e=t.split("/");if(0===e.length||"m"===e[0]&&0!==this.depth)throw new Error("invalid path - "+t);"m"===e[0]&&e.shift();let r=this;for(let n=0;n<e.length;n++){const t=e[n];if(t.match(/^[0-9]+'$/)){const e=parseInt(t.substring(0,t.length-1));if(e>=g)throw new Error("invalid path index - "+t);r=r._derive(g+e)}else{if(!t.match(/^[0-9]+$/))throw new Error("invalid path component - "+t);{const e=parseInt(t);if(e>=g)throw new Error("invalid path index - "+t);r=r._derive(e)}}}return r}static _fromSeed(t,e){const r=Object(i.a)(t);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=Object(i.a)(Object(h.a)(l.a.sha512,y,r));return new A(S,v(n.slice(0,32)),null,"0x00000000",v(n.slice(32)),0,0,e)}static fromMnemonic(t,e,r){return t=R(I(t,r=_(r)),r),A._fromSeed(M(t,e),{phrase:t,path:"m",locale:r.locale})}static fromSeed(t){return A._fromSeed(t,null)}static fromExtendedKey(t){const e=n.a.decode(t);82===e.length&&w(e.slice(0,78))===t||p.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=e[4],o=Object(i.i)(e.slice(5,9)),s=parseInt(Object(i.i)(e.slice(9,13)).substring(2),16),a=Object(i.i)(e.slice(13,45)),c=e.slice(45,78);switch(Object(i.i)(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new A(S,null,Object(i.i)(c),o,a,s,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==c[0])break;return new A(S,Object(i.i)(c.slice(1)),null,o,a,s,r,null)}return p.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function M(t,e){e||(e="");const r=Object(s.f)("mnemonic"+e,s.a.NFKD);return Object(a.a)(Object(s.f)(t,s.a.NFKD),r,2048,64,"sha512")}function I(t,e){e=_(e),p.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=Object(i.a)(new Uint8Array(Math.ceil(11*r.length/8)));let o=0;for(let i=0;i<r.length;i++){let t=e.getWordIndex(r[i].normalize("NFKD"));if(-1===t)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)t&1<<10-e&&(n[o>>3]|=1<<7-o%8),o++}const s=32*r.length/3,a=b(r.length/3);if((Object(i.a)(Object(h.c)(n.slice(0,s/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return Object(i.i)(n.slice(0,s/8))}function R(t,e){if(e=_(e),(t=Object(i.a)(t)).length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let i=0;i<t.length;i++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[i],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[i]>>8-n,r.push(t[i]&(1<<8-n)-1),n+=3);const o=t.length/4,s=Object(i.a)(Object(h.c)(t))[0]&b(o);return r[r.length-1]<<=o,r[r.length-1]|=s>>8-o,e.join(r.map((t=>e.getWord(t))))}function T(t,e){try{return I(t,e),!0}catch(r){}return!1}function C(t){return("number"!==typeof t||t<0||t>=g||t%1)&&p.throwArgumentError("invalid account index","index",t),"m/44'/60'/".concat(t,"'/0/0")}},function(t,e,r){"use strict";r.d(e,"f",(function(){return u.c})),r.d(e,"e",(function(){return u.b})),r.d(e,"c",(function(){return i.a})),r.d(e,"d",(function(){return o})),r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return y}));var n=r(7),i=r(49);class o{constructor(t,e){if(!t)throw new Error("missing identity key");if(!e)throw new Error("missing pre-key");this.identityKey=t,this.preKey=e}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}toBytes(){return n.h.encode(this).finish()}static fromBytes(t){const e=n.h.decode(t);if(!e.identityKey)throw new Error("missing identity key");if(!e.preKey)throw new Error("missing pre-key");return new o(new i.a(e.identityKey),new i.a(e.preKey))}}var s=r(60),a=r(17),c=r(79),u=r(43),h=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class l{constructor(t){if(!t.secp256k1)throw new Error("invalid private key");if(32!==t.secp256k1.bytes.length)throw new Error("invalid private key length: ".concat(t.secp256k1.bytes.length));if(this.timestamp=t.timestamp,this.secp256k1=t.secp256k1,!t.publicKey)throw new Error("missing public key");this.publicKey=new i.a(t.publicKey)}static generate(){const t={bytes:a.utils.randomPrivateKey()},e=(new Date).getTime();return new l({secp256k1:t,timestamp:e,publicKey:new i.a({secp256k1Uncompressed:{bytes:a.getPublicKey(t.bytes)},timestamp:e})})}generated(){if(this.timestamp)return new Date(this.timestamp)}sign(t){return h(this,void 0,void 0,(function*(){if(!this.secp256k1)throw new Error("invalid private key");const[e,r]=yield a.sign(t,this.secp256k1.bytes,{recovered:!0,der:!1});return new c.a({ecdsaCompact:{bytes:e,recovery:r}})}))}signKey(t){return h(this,void 0,void 0,(function*(){if(!t.secp256k1Uncompressed)throw new Error("invalid public key");const e=yield Object(u.d)(t.bytesToSign());return t.signature=yield this.sign(e),t}))}sharedSecret(t){if(!t.secp256k1Uncompressed)throw new Error("invalid public key");if(!this.secp256k1)throw new Error("invalid private key");return a.getSharedSecret(this.secp256k1.bytes,t.secp256k1Uncompressed.bytes,!1)}encrypt(t,e,r){const n=this.sharedSecret(e);return Object(u.c)(t,n,r)}decrypt(t,e,r){const n=this.sharedSecret(e);return Object(u.b)(t,n,r)}matches(t){return this.publicKey.equals(t)}toBytes(){return s.c.encode(this).finish()}static fromBytes(t){return new l(s.c.decode(t))}}var f=r(63),d=r(47),p=r(134),m=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class y{constructor(t,e){this.identityKey=t,this.preKeys=e||[]}static generate(t){return m(this,void 0,void 0,(function*(){const e=l.generate();t&&(yield e.publicKey.signWithWallet(t));const r=new y(e);return yield r.addPreKey(),r}))}getCurrentPreKey(){return this.preKeys[0]}findPreKey(t){const e=this.preKeys.find((e=>e.matches(t)));if(!e)throw new p.a;return e}addPreKey(){return m(this,void 0,void 0,(function*(){const t=l.generate();yield this.identityKey.signKey(t.publicKey),this.preKeys.unshift(t)}))}getPublicKeyBundle(){return new o(this.identityKey.publicKey,this.getCurrentPreKey().publicKey)}sharedSecret(t,e,r){return m(this,void 0,void 0,(function*(){if(!t.identityKey||!t.preKey)throw new Error("invalid peer key bundle");if(!(yield t.identityKey.verifyKey(t.preKey)))throw new Error("peer preKey signature invalid");if(!this.identityKey)throw new Error("missing identity key");let n,i,o;r?(o=this.findPreKey(e),n=o.sharedSecret(t.identityKey),i=this.identityKey.sharedSecret(t.preKey)):(o=this.findPreKey(e),n=this.identityKey.sharedSecret(t.preKey),i=o.sharedSecret(t.identityKey));const s=o.sharedSecret(t.preKey),a=new Uint8Array(n.length+i.length+s.length);return a.set(n,0),a.set(i,n.length),a.set(s,n.length+i.length),a}))}static storageSigRequestText(t){return"XMTP : Enable Identity\n"+"".concat(Object(d.a)(t),"\n")+"\nFor more info: https://xmtp.org/signatures/"}encode(t){return m(this,void 0,void 0,(function*(){if(0===this.preKeys.length)throw new Error("missing pre-keys");if(!this.identityKey)throw new Error("missing identity key");const e=s.e.encode({identityKey:this.identityKey,preKeys:this.preKeys}).finish(),r=Object(d.b)(new Uint8Array(32)),n=Object(d.c)(yield t.signMessage(y.storageSigRequestText(r))),i=yield Object(u.c)(e,n);return s.b.encode({walletPreKey:r,ciphertext:i}).finish()}))}static decode(t,e){var r;return m(this,void 0,void 0,(function*(){const n=function(t){try{return s.a.decode(t).v1}catch(e){if(e instanceof RangeError||e instanceof Error&&e.message.startsWith("invalid wire type"))return s.b.decode(t);throw new Error("Couldn't decode encrypted bundle:"+e)}}(e);if(!n)throw new Error("invalid bundle version");if(!n.walletPreKey)throw new Error("missing wallet pre-key");const i=Object(d.c)(yield t.signMessage(y.storageSigRequestText(n.walletPreKey)));if(!(null===(r=null===n||void 0===n?void 0:n.ciphertext)||void 0===r?void 0:r.aes256GcmHkdfSha256))throw new Error("missing bundle ciphertext");const o=new f.c(n.ciphertext),a=function(t){try{return s.d.decode(t).v1}catch(e){if(e instanceof RangeError||e instanceof Error&&e.message.startsWith("invalid wire type"))return s.e.decode(t);throw new Error("Couldn't decode private bundle:"+e)}}(yield Object(u.b)(o,i));if(!a)throw new Error("could not decode bundle");if(!a.identityKey)throw new Error("missing identity key");if(0===a.preKeys.length)throw new Error("missing pre-keys");return new y(new l(a.identityKey),a.preKeys.map((t=>new l(t))))}))}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"d",(function(){return h})),r.d(e,"g",(function(){return l})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return d}));var n=r(59),i=r(136),o=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const s=t=>"/xmtp/0/".concat(t,"/proto"),a=(t,e)=>{const r=[t,e];return r.sort(),s("dm-".concat(r.join("-")))},c=t=>s("contact-".concat(t)),u=t=>s("intro-".concat(t)),h=t=>s("privatestore-".concat(t)),l=t=>new Promise((e=>setTimeout(e,t))),f=(t,e,r)=>{let n;const i=new Promise(((e,i)=>{n=setTimeout((()=>i(new Error(r))),t)}));return Promise.race([e(),i]).then((t=>(clearTimeout(n),t)))};function d(t,e,r){return o(this,void 0,void 0,(function*(){const o=new i.a(e);yield t.lightPush.push(yield n.c.fromBytes(o.toBytes(),c(r)))}))}},function(t,e,r){(function(){var e;function r(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new r(null)}var i="undefined"!==typeof navigator;i&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=function(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var c=32767&this[t],u=this[t++]>>15,h=a*c+u*s;i=((c=s*c+((32767&h)<<15)+r[n]+(1073741823&i))>>>30)+(h>>>15)+a*u+(i>>>30),r[n++]=1073741823&c}return i},e=30):i&&"Netscape"!=navigator.appName?(r.prototype.am=function(t,e,r,n,i,o){for(;--o>=0;){var s=e*this[t++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i},e=26):(r.prototype.am=function(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var c=16383&this[t],u=this[t++]>>14,h=a*c+u*s;i=((c=s*c+((16383&h)<<14)+r[n]+i)>>28)+(h>>14)+a*u,r[n++]=268435455&c}return i},e=28),r.prototype.DB=e,r.prototype.DM=(1<<e)-1,r.prototype.DV=1<<e;r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-e,r.prototype.F2=2*e-52;var o,s,a=new Array;for(o="0".charCodeAt(0),s=0;s<=9;++s)a[o++]=s;for(o="a".charCodeAt(0),s=10;s<36;++s)a[o++]=s;for(o="A".charCodeAt(0),s=10;s<36;++s)a[o++]=s;function c(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function u(t,e){var r=a[t.charCodeAt(e)];return null==r?-1:r}function h(t){var e=n();return e.fromInt(t),e}function l(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function f(t){this.m=t}function d(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function p(t,e){return t&e}function m(t,e){return t|e}function y(t,e){return t^e}function g(t,e){return t&~e}function b(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function v(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function w(){}function _(t){return t}function S(t){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}f.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},f.prototype.revert=function(t){return t},f.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},f.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},f.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},d.prototype.convert=function(t){var e=n();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e},d.prototype.revert=function(t){var e=n();return t.copyTo(e),this.reduce(e),e},d.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},d.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},r.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},r.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},r.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;--i>=0;){var a=8==n?255&t[i]:u(t,i);a<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},r.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},r.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},r.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},r.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<i,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},r.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},r.prototype.multiplyTo=function(t,e){var n=this.abs(),i=t.abs(),o=n.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+n.t]=n.am(0,i[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)},r.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},r.prototype.divRemTo=function(t,e,i){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),c=this.s,u=t.s,h=this.DB-l(o[o.t-1]);h>0?(o.lShiftTo(h,a),s.lShiftTo(h,i)):(o.copyTo(a),s.copyTo(i));var f=a.t,d=a[f-1];if(0!=d){var p=d*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),m=this.FV/p,y=(1<<this.F1)/p,g=1<<this.F2,b=i.t,v=b-f,w=null==e?n():e;for(a.dlShiftTo(v,w),i.compareTo(w)>=0&&(i[i.t++]=1,i.subTo(w,i)),r.ONE.dlShiftTo(f,w),w.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--v>=0;){var _=i[--b]==d?this.DM:Math.floor(i[b]*m+(i[b-1]+g)*y);if((i[b]+=a.am(0,_,i,v,0,f))<_)for(a.dlShiftTo(v,w),i.subTo(w,i);i[b]<--_;)i.subTo(w,i)}null!=e&&(i.drShiftTo(f,e),c!=u&&r.ZERO.subTo(e,e)),i.t=f,i.clamp(),h>0&&i.rShiftTo(h,i),c<0&&r.ZERO.subTo(i,i)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},r.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(t,e){if(t>4294967295||t<1)return r.ONE;var i=n(),o=n(),s=e.convert(this),a=l(t)-1;for(s.copyTo(i);--a>=0;)if(e.sqrTo(i,o),(t&1<<a)>0)e.mulTo(o,s,i);else{var c=i;i=o,o=c}return e.revert(i)},r.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=c(r));s>=0;)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=c(r));return i?o:"0"},r.prototype.negate=function(){var t=n();return r.ZERO.subTo(this,t),t},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(t){var e=n();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e},r.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new f(e):new d(e),this.exp(t,r)},r.ZERO=h(0),r.ONE=h(1),w.prototype.convert=_,w.prototype.revert=_,w.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},w.prototype.sqrTo=function(t,e){t.squareTo(e)},S.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e},S.prototype.revert=function(t){return t},S.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},S.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},S.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var E,A,M,I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/I[I.length-1];function T(){var t;t=(new Date).getTime(),A[M++]^=255&t,A[M++]^=t>>8&255,A[M++]^=t>>16&255,A[M++]^=t>>24&255,M>=B&&(M-=B)}if(r.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},r.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=h(r),o=n(),s=n(),a="";for(this.divRemTo(i,o,s);o.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(t)+a},r.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),o=!1,s=0,a=0,c=0;c<t.length;++c){var h=u(t,c);h<0?"-"==t.charAt(c)&&0==this.signum()&&(o=!0):(a=e*a+h,++s>=n&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),o&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(r.ONE.shiftLeft(t-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(r.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}},r.prototype.bitwiseTo=function(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},r.prototype.changeBit=function(t,e){var n=r.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},r.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},r.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},r.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},r.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},r.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},r.prototype.millerRabin=function(t){var e=this.subtract(r.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var o=e.shiftRight(i);(t=t+1>>1)>I.length&&(t=I.length);for(var s=n(),a=0;a<t;++a){s.fromInt(I[Math.floor(Math.random()*I.length)]);var c=s.modPow(o,this);if(0!=c.compareTo(r.ONE)&&0!=c.compareTo(e)){for(var u=1;u++<i&&0!=c.compareTo(e);)if(0==(c=c.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=c.compareTo(e))return!1}}return!0},r.prototype.clone=function(){var t=n();return this.copyTo(t),t},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},r.prototype.equals=function(t){return 0==this.compareTo(t)},r.prototype.min=function(t){return this.compareTo(t)<0?this:t},r.prototype.max=function(t){return this.compareTo(t)>0?this:t},r.prototype.and=function(t){var e=n();return this.bitwiseTo(t,p,e),e},r.prototype.or=function(t){var e=n();return this.bitwiseTo(t,m,e),e},r.prototype.xor=function(t){var e=n();return this.bitwiseTo(t,y,e),e},r.prototype.andNot=function(t){var e=n();return this.bitwiseTo(t,g,e),e},r.prototype.not=function(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},r.prototype.shiftLeft=function(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},r.prototype.shiftRight=function(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},r.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+b(this[t]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=v(this[r]^e);return t},r.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},r.prototype.setBit=function(t){return this.changeBit(t,m)},r.prototype.clearBit=function(t){return this.changeBit(t,g)},r.prototype.flipBit=function(t){return this.changeBit(t,y)},r.prototype.add=function(t){var e=n();return this.addTo(t,e),e},r.prototype.subtract=function(t){var e=n();return this.subTo(t,e),e},r.prototype.multiply=function(t){var e=n();return this.multiplyTo(t,e),e},r.prototype.divide=function(t){var e=n();return this.divRemTo(t,e,null),e},r.prototype.remainder=function(t){var e=n();return this.divRemTo(t,null,e),e},r.prototype.divideAndRemainder=function(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)},r.prototype.modPow=function(t,e){var r,i,o=t.bitLength(),s=h(1);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new f(e):e.isEven()?new S(e):new d(e);var a=new Array,c=3,u=r-1,p=(1<<r)-1;if(a[1]=i.convert(this),r>1){var m=n();for(i.sqrTo(a[1],m);c<=p;)a[c]=n(),i.mulTo(m,a[c-2],a[c]),c+=2}var y,g,b=t.t-1,v=!0,w=n();for(o=l(t[b])-1;b>=0;){for(o>=u?y=t[b]>>o-u&p:(y=(t[b]&(1<<o+1)-1)<<u-o,b>0&&(y|=t[b-1]>>this.DB+o-u)),c=r;0==(1&y);)y>>=1,--c;if((o-=c)<0&&(o+=this.DB,--b),v)a[y].copyTo(s),v=!1;else{for(;c>1;)i.sqrTo(s,w),i.sqrTo(w,s),c-=2;c>0?i.sqrTo(s,w):(g=s,s=w,w=g),i.mulTo(w,a[y],s)}for(;b>=0&&0==(t[b]&1<<o);)i.sqrTo(s,w),g=s,s=w,w=g,--o<0&&(o=this.DB-1,--b)}return i.revert(s)},r.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;for(var n=t.clone(),i=this.clone(),o=h(1),s=h(0),a=h(0),c=h(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);n.compareTo(i)>=0?(n.subTo(i,n),e&&o.subTo(a,o),s.subTo(c,s)):(i.subTo(n,i),e&&a.subTo(o,a),c.subTo(s,c))}return 0!=i.compareTo(r.ONE)?r.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},r.prototype.pow=function(t){return this.exp(t,new w)},r.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},r.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=I[I.length-1]){for(e=0;e<I.length;++e)if(r[0]==I[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<I.length;){for(var n=I[e],i=e+1;i<I.length&&n<R;)n*=I[i++];for(n=r.modInt(n);e<i;)if(n%I[e++]==0)return!1}return r.millerRabin(t)},r.prototype.square=function(){var t=n();return this.squareTo(t),t},r.prototype.Barrett=S,null==A){var C;if(A=new Array,M=0,"undefined"!==typeof window&&window.crypto)if(window.crypto.getRandomValues){var O=new Uint8Array(32);for(window.crypto.getRandomValues(O),C=0;C<32;++C)A[M++]=O[C]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var k=window.crypto.random(32);for(C=0;C<k.length;++C)A[M++]=255&k.charCodeAt(C)}for(;M<B;)C=Math.floor(65536*Math.random()),A[M++]=C>>>8,A[M++]=255&C;M=0,T()}function P(){if(null==E){for(T(),(E=new D).init(A),M=0;M<A.length;++M)A[M]=0;M=0}return E.next()}function N(){}function D(){this.i=0,this.j=0,this.S=new Array}N.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=P()},D.prototype.init=function(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},D.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var B=256;t.exports={default:r,BigInteger:r,SecureRandom:N}}).call(this)},function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"c",(function(){return b})),r.d(e,"e",(function(){return v})),r.d(e,"b",(function(){return S})),r.d(e,"f",(function(){return I})),r.d(e,"d",(function(){return T}));var n=r(20),i=r(30),o=r(1),s=r(714),a=r(13),c=r(4),u=r(41),h=r(46),l=r(3);const f=new l.a("transactions/5.6.2");var d;function p(t){return"0x"===t?null:Object(n.a)(t)}function m(t){return"0x"===t?s.d:i.a.from(t)}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(d||(d={}));const y=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],g={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function b(t){const e=Object(h.b)(t);return Object(n.a)(Object(o.e)(Object(a.a)(Object(o.e)(e,1)),12))}function v(t,e){return b(Object(h.c)(Object(o.a)(t),e))}function w(t,e){const r=Object(o.o)(i.a.from(t).toHexString());return r.length>32&&f.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function _(t,e){return{address:Object(n.a)(t),storageKeys:(e||[]).map(((e,r)=>(32!==Object(o.d)(e)&&f.throwArgumentError("invalid access list storageKey","accessList[".concat(t,":").concat(r,"]"),e),e.toLowerCase())))}}function S(t){if(Array.isArray(t))return t.map(((t,e)=>Array.isArray(t)?(t.length>2&&f.throwArgumentError("access list expected to be [ address, storageKeys[] ]","value[".concat(e,"]"),t),_(t[0],t[1])):_(t.address,t.storageKeys)));const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return _(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function E(t){return S(t).map((t=>[t.address,t.storageKeys]))}function A(t,e){if(null!=t.gasPrice){const e=i.a.from(t.gasPrice),r=i.a.from(t.maxFeePerGas||0);e.eq(r)||f.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:r})}const r=[w(t.chainId||0,"chainId"),w(t.nonce||0,"nonce"),w(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),w(t.maxFeePerGas||0,"maxFeePerGas"),w(t.gasLimit||0,"gasLimit"),null!=t.to?Object(n.a)(t.to):"0x",w(t.value||0,"value"),t.data||"0x",E(t.accessList||[])];if(e){const t=Object(o.n)(e);r.push(w(t.recoveryParam,"recoveryParam")),r.push(Object(o.o)(t.r)),r.push(Object(o.o)(t.s))}return Object(o.c)(["0x02",u.encode(r)])}function M(t,e){const r=[w(t.chainId||0,"chainId"),w(t.nonce||0,"nonce"),w(t.gasPrice||0,"gasPrice"),w(t.gasLimit||0,"gasLimit"),null!=t.to?Object(n.a)(t.to):"0x",w(t.value||0,"value"),t.data||"0x",E(t.accessList||[])];if(e){const t=Object(o.n)(e);r.push(w(t.recoveryParam,"recoveryParam")),r.push(Object(o.o)(t.r)),r.push(Object(o.o)(t.s))}return Object(o.c)(["0x01",u.encode(r)])}function I(t,e){if(null==t.type||0===t.type)return null!=t.accessList&&f.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),function(t,e){Object(c.b)(t,g);const r=[];y.forEach((function(e){let n=t[e.name]||[];const i={};e.numeric&&(i.hexPad="left"),n=Object(o.a)(Object(o.i)(n,i)),e.length&&n.length!==e.length&&n.length>0&&f.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n),e.maxLength&&(n=Object(o.o)(n),n.length>e.maxLength&&f.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n)),r.push(Object(o.i)(n))}));let n=0;if(null!=t.chainId?(n=t.chainId,"number"!==typeof n&&f.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!Object(o.k)(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),0!==n&&(r.push(Object(o.i)(n)),r.push("0x"),r.push("0x")),!e)return u.encode(r);const i=Object(o.n)(e);let s=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),s+=2*n+8,i.v>28&&i.v!==s&&f.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&f.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(Object(o.i)(s)),r.push(Object(o.o)(Object(o.a)(i.r))),r.push(Object(o.o)(Object(o.a)(i.s))),u.encode(r)}(t,e);switch(t.type){case 1:return M(t,e);case 2:return A(t,e)}return f.throwError("unsupported transaction type: ".concat(t.type),l.a.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function R(t,e,r){try{const r=m(e[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");t.v=r}catch(n){f.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Object(o.h)(e[1],32),t.s=Object(o.h)(e[2],32);try{const e=Object(a.a)(r(t));t.from=v(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(n){}}function T(t){const e=Object(o.a)(t);if(e[0]>127)return function(t){const e=u.decode(t);9!==e.length&&6!==e.length&&f.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:m(e[0]).toNumber(),gasPrice:m(e[1]),gasLimit:m(e[2]),to:p(e[3]),value:m(e[4]),data:e[5],chainId:0};if(6===e.length)return r;try{r.v=i.a.from(e[6]).toNumber()}catch(n){return r}if(r.r=Object(o.h)(e[7],32),r.s=Object(o.h)(e[8],32),i.a.from(r.r).isZero()&&i.a.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let i=r.v-27;const s=e.slice(0,6);0!==r.chainId&&(s.push(Object(o.i)(r.chainId)),s.push("0x"),s.push("0x"),i-=2*r.chainId+8);const c=Object(a.a)(u.encode(s));try{r.from=v(c,{r:Object(o.i)(r.r),s:Object(o.i)(r.s),recoveryParam:i})}catch(n){}r.hash=Object(a.a)(t)}return r.type=null,r}(e);switch(e[0]){case 1:return function(t){const e=u.decode(t.slice(1));8!==e.length&&11!==e.length&&f.throwArgumentError("invalid component count for transaction type: 1","payload",Object(o.i)(t));const r={type:1,chainId:m(e[0]).toNumber(),nonce:m(e[1]).toNumber(),gasPrice:m(e[2]),gasLimit:m(e[3]),to:p(e[4]),value:m(e[5]),data:e[6],accessList:S(e[7])};return 8===e.length||(r.hash=Object(a.a)(t),R(r,e.slice(8),M)),r}(e);case 2:return function(t){const e=u.decode(t.slice(1));9!==e.length&&12!==e.length&&f.throwArgumentError("invalid component count for transaction type: 2","payload",Object(o.i)(t));const r=m(e[2]),n=m(e[3]),i={type:2,chainId:m(e[0]).toNumber(),nonce:m(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:m(e[4]),to:p(e[5]),value:m(e[6]),data:e[7],accessList:S(e[8])};return 9===e.length||(i.hash=Object(a.a)(t),R(i,e.slice(9),A)),i}(e)}return f.throwError("unsupported transaction type: ".concat(e[0]),l.a.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}},function(t,e,r){var n=e;n.utils=r(56),n.common=r(95),n.sha=r(425),n.ripemd=r(429),n.hmac=r(430),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e,r){"use strict";e.encode=r(521),e.decode=r(522),e.varintEncode=r(290),e.varintDecode=r(291),e.int32BEEncode=r(523),e.int32BEDecode=r(524)},function(t,e,r){"use strict";r.r(e),r.d(e,"encode",(function(){return u})),r.d(e,"decode",(function(){return f}));var n=r(1),i=r(3);const o=new i.a("rlp/5.6.1");function s(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function a(t,e,r){let n=0;for(let i=0;i<r;i++)n=256*n+t[e+i];return n}function c(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(c(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=s(e.length);return r.unshift(247+r.length),r.concat(e)}Object(n.k)(t)||o.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(Object(n.a)(t));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=s(e.length);return r.unshift(183+r.length),r.concat(e)}function u(t){return Object(n.i)(c(t))}function h(t,e,r,n){const s=[];for(;r<e+1+n;){const a=l(t,r);s.push(a.result),(r+=a.consumed)>e+1+n&&o.throwError("child data too short",i.a.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:s}}function l(t,e){if(0===t.length&&o.throwError("data too short",i.a.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&o.throwError("data short segment too short",i.a.errors.BUFFER_OVERRUN,{});const n=a(t,e+1,r);return e+1+r+n>t.length&&o.throwError("data long segment too short",i.a.errors.BUFFER_OVERRUN,{}),h(t,e,e+1+r,r+n)}if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&o.throwError("data array too short",i.a.errors.BUFFER_OVERRUN,{}),h(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&o.throwError("data array too short",i.a.errors.BUFFER_OVERRUN,{});const s=a(t,e+1,r);e+1+r+s>t.length&&o.throwError("data array too short",i.a.errors.BUFFER_OVERRUN,{});return{consumed:1+r+s,result:Object(n.i)(t.slice(e+1+r,e+1+r+s))}}if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&o.throwError("data too short",i.a.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:Object(n.i)(t.slice(e+1,e+1+r))}}return{consumed:1,result:Object(n.i)(t[e])}}function f(t){const e=Object(n.a)(t),r=l(e,0);return r.consumed!==e.length&&o.throwArgumentError("invalid rlp data","data",t),r.result}},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(466),e),i(r(467),e),i(r(468),e),i(r(469),e)},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return u}));var n=r(63),i=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const o="undefined"!==typeof window?window.crypto:r(378).webcrypto,s=new ArrayBuffer(0);function a(t){return i(this,void 0,void 0,(function*(){return new Uint8Array(yield o.subtle.digest("SHA-256",t))}))}function c(t,e,r){return i(this,void 0,void 0,(function*(){const i=o.getRandomValues(new Uint8Array(n.b)),s=o.getRandomValues(new Uint8Array(n.a)),a=yield l(e,i),c=yield o.subtle.encrypt(h(s,r),a,t);return new n.c({aes256GcmHkdfSha256:{payload:new Uint8Array(c),hkdfSalt:i,gcmNonce:s}})}))}function u(t,e,r){return i(this,void 0,void 0,(function*(){if(!t.aes256GcmHkdfSha256)throw new Error("invalid payload ciphertext");const n=yield l(e,t.aes256GcmHkdfSha256.hkdfSalt),i=yield o.subtle.decrypt(h(t.aes256GcmHkdfSha256.gcmNonce,r),n,t.aes256GcmHkdfSha256.payload);return new Uint8Array(i)}))}function h(t,e){const r={name:"AES-GCM",iv:t};return e&&(r.additionalData=e),r}function l(t,e){return i(this,void 0,void 0,(function*(){const r=yield o.subtle.importKey("raw",t,"HKDF",!1,["deriveKey"]);return o.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:e,info:s},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return c})),r.d(e,"f",(function(){return h})),r.d(e,"d",(function(){return f})),r.d(e,"e",(function(){return d})),r.d(e,"h",(function(){return p})),r.d(e,"g",(function(){return m}));var n=r(1);const i=new(r(3).a)("strings/5.6.1");var o,s;function a(t,e,r,n,i){if(t===s.BAD_PREFIX||t===s.UNEXPECTED_CONTINUE){let t=0;for(let n=e+1;n<r.length&&r[n]>>6===2;n++)t++;return t}return t===s.OVERRUN?r.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(o||(o={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(s||(s={}));const c=Object.freeze({error:function(t,e,r,n,o){return i.throwArgumentError("invalid codepoint at offset ".concat(e,"; ").concat(t),"bytes",r)},ignore:a,replace:function(t,e,r,n,i){return t===s.OVERLONG?(n.push(i),0):(n.push(65533),a(t,e,r))}});function u(t,e){null==e&&(e=c.error),t=Object(n.a)(t);const r=[];let i=0;for(;i<t.length;){const n=t[i++];if(n>>7===0){r.push(n);continue}let o=null,a=null;if(192===(224&n))o=1,a=127;else if(224===(240&n))o=2,a=2047;else{if(240!==(248&n)){i+=e(128===(192&n)?s.UNEXPECTED_CONTINUE:s.BAD_PREFIX,i-1,t,r);continue}o=3,a=65535}if(i-1+o>=t.length){i+=e(s.OVERRUN,i-1,t,r);continue}let c=n&(1<<8-o-1)-1;for(let u=0;u<o;u++){let n=t[i];if(128!=(192&n)){i+=e(s.MISSING_CONTINUE,i,t,r),c=null;break}c=c<<6|63&n,i++}null!==c&&(c>1114111?i+=e(s.OUT_OF_RANGE,i-1-o,t,r,c):c>=55296&&c<=57343?i+=e(s.UTF16_SURROGATE,i-1-o,t,r,c):c<=a?i+=e(s.OVERLONG,i-1-o,t,r,c):r.push(c))}return r}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.current;e!=o.current&&(i.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const e=t.charCodeAt(n);if(e<128)r.push(e);else if(e<2048)r.push(e>>6|192),r.push(63&e|128);else if(55296==(64512&e)){n++;const i=t.charCodeAt(n);if(n>=t.length||56320!==(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&e)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(e>>12|224),r.push(e>>6&63|128),r.push(63&e|128)}return Object(n.a)(r)}function l(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function f(t,e){return'"'+u(t,e).map((t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?l(t):l(55296+((t-=65536)>>10&1023))+l(56320+(1023&t))})).join("")+'"'}function d(t){return t.map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function p(t,e){return d(u(t,e))}function m(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.current;return u(h(t,e))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.equals=function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}},function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"c",(function(){return h})),r.d(e,"b",(function(){return l}));var n=r(344),i=r(1),o=r(4);const s=new(r(3).a)("signing-key/5.6.2");let a=null;function c(){return a||(a=new n.a("secp256k1")),a}class u{constructor(t){Object(o.d)(this,"curve","secp256k1"),Object(o.d)(this,"privateKey",Object(i.i)(t)),32!==Object(i.d)(this.privateKey)&&s.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const e=c().keyFromPrivate(Object(i.a)(this.privateKey));Object(o.d)(this,"publicKey","0x"+e.getPublic(!1,"hex")),Object(o.d)(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),Object(o.d)(this,"_isSigningKey",!0)}_addPoint(t){const e=c().keyFromPublic(Object(i.a)(this.publicKey)),r=c().keyFromPublic(Object(i.a)(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")}signDigest(t){const e=c().keyFromPrivate(Object(i.a)(this.privateKey)),r=Object(i.a)(t);32!==r.length&&s.throwArgumentError("bad digest length","digest",t);const n=e.sign(r,{canonical:!0});return Object(i.n)({recoveryParam:n.recoveryParam,r:Object(i.h)("0x"+n.r.toString(16),32),s:Object(i.h)("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const e=c().keyFromPrivate(Object(i.a)(this.privateKey)),r=c().keyFromPublic(Object(i.a)(l(t)));return Object(i.h)("0x"+e.derive(r.getPublic()).toString(16),32)}static isSigningKey(t){return!(!t||!t._isSigningKey)}}function h(t,e){const r=Object(i.n)(e),n={r:Object(i.a)(r.r),s:Object(i.a)(r.s)};return"0x"+c().recoverPubKey(Object(i.a)(t),n,r.recoveryParam).encode("hex",!1)}function l(t,e){const r=Object(i.a)(t);if(32===r.length){const t=new u(r);return e?"0x"+c().keyFromPrivate(r).getPublic(!0,"hex"):t.publicKey}return 33===r.length?e?Object(i.i)(r):"0x"+c().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+c().keyFromPublic(r).getPublic(!0,"hex"):Object(i.i)(r):s.throwArgumentError("invalid public or private key","key","[REDACTED]")}},function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return a}));var n=r(17),i=r(43);function o(t){return i.a.getRandomValues(t)}const s=n.utils.bytesToHex;function a(t){t.startsWith("0x")&&(t=t.slice(2));const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}},function(t,e,r){"use strict";const n=r(471),i=r(118),{CID:o}=r(85),{base32:s}=r(84),{base58btc:a}=r(71),c=r(73),u=r(58),{toString:h}=r(29),{fromString:l}=r(24),{concat:f}=r(25);function d(t,e){return e instanceof Uint8Array?d.toString(t,e):d.toBytes(t,e)}function p(t){if(!n.isIP(t))throw new Error("invalid ip address");return n.toBytes(t)}function m(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function y(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function g(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2);return h(e,"base32")+":"+y(r)}t.exports=d,d.toString=function(t,e){switch(i(t).code){case 4:case 41:return function(t){const e=n.toString(t);if(!e||!n.isIP(e))throw new Error("invalid ip address");return e}(e);case 6:case 273:case 33:case 132:return y(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(t){const e=u.decode(t);if((t=t.slice(u.decode.bytes)).length!==e)throw new Error("inconsistent lengths");return h(t)}(e);case 421:return function(t){const e=u.decode(t),r=t.slice(u.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return h(r,"base58btc")}(e);case 444:case 445:return g(e);default:return h(e,"base16")}},d.toBytes=function(t,e){switch(i(t).code){case 4:case 41:return p(e);case 6:case 273:case 33:case 132:return m(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(t){const e=l(t),r=Uint8Array.from(u.encode(e.length));return f([r,e],r.length+e.length)}(e);case 421:return function(t){let e;e="Q"===t[0]||"1"===t[0]?c.decode(a.decode("z".concat(t))).bytes:o.parse(t).multihash.bytes;const r=Uint8Array.from(u.encode(e.length));return f([r,e],r.length+e.length)}(e);case 444:return function(t){const e=t.split(":");if(2!==e.length)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(16!==e[0].length)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");const r=s.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=m(n);return f([r,i],r.length+i.length)}(e);case 445:return function(t){const e=t.split(":");if(2!==e.length)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(56!==e[0].length)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");const r=s.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=m(n);return f([r,i],r.length+i.length)}(e);default:return l(e,"base16")}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return Fe}));var n={};r.r(n),r.d(n,"decode",(function(){return wt})),r.d(n,"encode",(function(){return _t}));var i={};r.r(i),r.d(i,"AbiCoder",(function(){return ct})),r.d(i,"defaultAbiCoder",(function(){return ut})),r.d(i,"Fragment",(function(){return G})),r.d(i,"ConstructorFragment",(function(){return X})),r.d(i,"ErrorFragment",(function(){return tt})),r.d(i,"EventFragment",(function(){return W})),r.d(i,"FunctionFragment",(function(){return Q})),r.d(i,"ParamType",(function(){return z})),r.d(i,"FormatTypes",(function(){return q})),r.d(i,"checkResultErrors",(function(){return m})),r.d(i,"Logger",(function(){return l.a})),r.d(i,"RLP",(function(){return re})),r.d(i,"_fetchData",(function(){return Be})),r.d(i,"fetchJson",(function(){return xe})),r.d(i,"poll",(function(){return Le})),r.d(i,"checkProperties",(function(){return h.b})),r.d(i,"deepCopy",(function(){return h.c})),r.d(i,"defineReadOnly",(function(){return h.d})),r.d(i,"getStatic",(function(){return h.e})),r.d(i,"resolveProperties",(function(){return h.f})),r.d(i,"shallowCopy",(function(){return h.g})),r.d(i,"arrayify",(function(){return u.a})),r.d(i,"concat",(function(){return u.b})),r.d(i,"stripZeros",(function(){return u.o})),r.d(i,"zeroPad",(function(){return u.p})),r.d(i,"isBytes",(function(){return u.j})),r.d(i,"isBytesLike",(function(){return u.k})),r.d(i,"defaultPath",(function(){return Vt.b})),r.d(i,"HDNode",(function(){return Vt.a})),r.d(i,"SigningKey",(function(){return ne.a})),r.d(i,"Interface",(function(){return vt})),r.d(i,"LogDescription",(function(){return dt})),r.d(i,"TransactionDescription",(function(){return pt})),r.d(i,"base58",(function(){return St.a})),r.d(i,"base64",(function(){return n})),r.d(i,"hexlify",(function(){return u.i})),r.d(i,"isHexString",(function(){return u.l})),r.d(i,"hexConcat",(function(){return u.c})),r.d(i,"hexStripZeros",(function(){return u.f})),r.d(i,"hexValue",(function(){return u.g})),r.d(i,"hexZeroPad",(function(){return u.h})),r.d(i,"hexDataLength",(function(){return u.d})),r.d(i,"hexDataSlice",(function(){return u.e})),r.d(i,"nameprep",(function(){return Nt})),r.d(i,"_toEscapedUtf8String",(function(){return N.d})),r.d(i,"toUtf8Bytes",(function(){return N.f})),r.d(i,"toUtf8CodePoints",(function(){return N.g})),r.d(i,"toUtf8String",(function(){return N.h})),r.d(i,"Utf8ErrorFuncs",(function(){return N.b})),r.d(i,"formatBytes32String",(function(){return ie})),r.d(i,"parseBytes32String",(function(){return oe})),r.d(i,"dnsEncode",(function(){return Kt})),r.d(i,"hashMessage",(function(){return Ft.a})),r.d(i,"namehash",(function(){return jt})),r.d(i,"isValidName",(function(){return Ut})),r.d(i,"id",(function(){return ht.a})),r.d(i,"_TypedDataEncoder",(function(){return qt.a})),r.d(i,"getAddress",(function(){return v.a})),r.d(i,"getIcapAddress",(function(){return v.d})),r.d(i,"getContractAddress",(function(){return v.b})),r.d(i,"getCreate2Address",(function(){return v.c})),r.d(i,"isAddress",(function(){return v.e})),r.d(i,"formatEther",(function(){return Ie})),r.d(i,"parseEther",(function(){return Re})),r.d(i,"formatUnits",(function(){return Ae})),r.d(i,"parseUnits",(function(){return Me})),r.d(i,"commify",(function(){return Ee})),r.d(i,"computeHmac",(function(){return Ht.a})),r.d(i,"keccak256",(function(){return lt.a})),r.d(i,"ripemd160",(function(){return Ht.b})),r.d(i,"sha256",(function(){return Ht.c})),r.d(i,"sha512",(function(){return Ht.d})),r.d(i,"randomBytes",(function(){return te.a})),r.d(i,"shuffled",(function(){return ee})),r.d(i,"solidityPack",(function(){return Xt})),r.d(i,"solidityKeccak256",(function(){return Qt})),r.d(i,"soliditySha256",(function(){return $t})),r.d(i,"splitSignature",(function(){return u.n})),r.d(i,"joinSignature",(function(){return u.m})),r.d(i,"accessListify",(function(){return se.b})),r.d(i,"parseTransaction",(function(){return se.d})),r.d(i,"serializeTransaction",(function(){return se.f})),r.d(i,"TransactionTypes",(function(){return se.a})),r.d(i,"getJsonWalletAddress",(function(){return zt.a})),r.d(i,"computeAddress",(function(){return se.c})),r.d(i,"recoverAddress",(function(){return se.e})),r.d(i,"computePublicKey",(function(){return ne.b})),r.d(i,"recoverPublicKey",(function(){return ne.c})),r.d(i,"verifyMessage",(function(){return Te.b})),r.d(i,"verifyTypedData",(function(){return Te.c})),r.d(i,"getAccountPath",(function(){return Vt.d})),r.d(i,"mnemonicToEntropy",(function(){return Vt.f})),r.d(i,"entropyToMnemonic",(function(){return Vt.c})),r.d(i,"isValidMnemonic",(function(){return Vt.e})),r.d(i,"mnemonicToSeed",(function(){return Vt.g})),r.d(i,"SupportedAlgorithm",(function(){return Ue.a})),r.d(i,"UnicodeNormalizationForm",(function(){return N.a})),r.d(i,"Utf8ErrorReason",(function(){return N.c})),r.d(i,"Indexed",(function(){return yt}));var o=r(7),s=r(17),a=r(79),c=r(47),u=r(1),h=r(4),l=r(3);const f="abi/5.6.4";var d=r(30);const p=new l.a(f);function m(t){const e=[],r=function(t,n){if(Array.isArray(n))for(let o in n){const s=t.slice();s.push(o);try{r(s,n[o])}catch(i){e.push({path:s,error:i})}}};return r([],t),e}class y{constructor(t,e,r,n){this.name=t,this.type=e,this.localName=r,this.dynamic=n}_throwError(t,e){p.throwArgumentError(t,this.localName,e)}}class g{constructor(t){Object(h.d)(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return Object(u.c)(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(Object(u.b)(t._data))}writeBytes(t){let e=Object(u.a)(t);const r=e.length%this.wordSize;return r&&(e=Object(u.b)([e,this._padding.slice(r)])),this._writeData(e)}_getValue(t){let e=Object(u.a)(d.a.from(t));return e.length>this.wordSize&&p.throwError("value out-of-bounds",l.a.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=Object(u.b)([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class b{constructor(t,e,r,n){Object(h.d)(this,"_data",Object(u.a)(t)),Object(h.d)(this,"wordSize",e||32),Object(h.d)(this,"_coerceFunc",r),Object(h.d)(this,"allowLoose",n),this._offset=0}get data(){return Object(u.i)(this._data)}get consumed(){return this._offset}static coerce(t,e){let r=t.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):b.coerce(t,e)}_peekBytes(t,e,r){let n=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+e<=this._data.length?n=e:p.throwError("data out-of-bounds",l.a.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(t){return new b(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let r=this._peekBytes(0,t,!!e);return this._offset+=r.length,r.slice(0,t)}readValue(){return d.a.from(this.readBytes(this.wordSize))}}var v=r(20);class w extends y{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=Object(v.a)(e)}catch(r){this._throwError(r.message,e)}return t.writeValue(e)}decode(t){return Object(v.a)(Object(u.h)(t.readValue().toHexString(),20))}}class _ extends y{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const S=new l.a(f);function E(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"===typeof r){let t={};n=e.map((e=>{const n=e.localName;return n||S.throwError("cannot encode object for signature with missing names",l.a.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]&&S.throwError("cannot encode object for signature with duplicate names",l.a.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]=!0,r[n]}))}else S.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&S.throwArgumentError("types/value length mismatch","tuple",r);let i=new g(t.wordSize),o=new g(t.wordSize),s=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=o.length;t.encode(o,r);let n=i.writeUpdatableValue();s.push((t=>{n(t+e)}))}else t.encode(i,r)})),s.forEach((t=>{t(i.length)}));let a=t.appendWriter(i);return a+=t.appendWriter(o),a}function A(t,e){let r=[],n=t.subReader(0);e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readValue(),s=n.subReader(r.toNumber());try{i=e.decode(s)}catch(o){if(o.code===l.a.errors.BUFFER_OVERRUN)throw o;i=o,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(o){if(o.code===l.a.errors.BUFFER_OVERRUN)throw o;i=o,i.baseType=e.name,i.name=e.localName,i.type=e.type}void 0!=i&&r.push(i)}));const i=e.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});e.forEach(((t,e)=>{let n=t.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const o=r[e];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw o}}):r[n]=o}));for(let o=0;o<r.length;o++){const t=r[o];t instanceof Error&&Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class M extends y{constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),this.coder=t,this.length=e}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let r=this.length;-1===r&&(r=e.length,t.writeValue(e.length)),S.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let i=0;i<e.length;i++)n.push(this.coder);return E(t,n,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber(),32*e>t._data.length&&S.throwError("insufficient data length",l.a.errors.BUFFER_OVERRUN,{length:t._data.length,count:e}));let r=[];for(let n=0;n<e;n++)r.push(new _(this.coder));return t.coerce(this.name,A(t,r))}}class I extends y{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class R extends y{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=Object(u.a)(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class T extends R{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,Object(u.i)(super.decode(t)))}}class C extends y{constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=Object(u.a)(e);return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return t.coerce(this.name,Object(u.i)(t.readBytes(this.size)))}}class O extends y{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}var k=r(714);class P extends y{constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),this.size=t,this.signed=e}defaultValue(){return 0}encode(t,e){let r=d.a.from(e),n=k.a.mask(8*t.wordSize);if(this.signed){let t=n.mask(8*this.size-1);(r.gt(t)||r.lt(t.add(k.c).mul(k.b)))&&this._throwError("value out-of-bounds",e)}else(r.lt(k.d)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(r)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}var N=r(44);class D extends R{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Object(N.f)(e))}decode(t){return Object(N.h)(super.decode(t))}}class B extends y{constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)}));super("tuple","tuple("+n.join(",")+")",e,r),this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let i=r.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[n]))})),Object.freeze(t)}encode(t,e){return E(t,this.coders,e)}decode(t){return t.coerce(this.name,A(t,this.coders))}}const x=new l.a(f),L={};let U={calldata:!0,memory:!0,storage:!0},j={calldata:!0,memory:!0};function K(t,e){if("bytes"===t||"string"===t){if(U[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&j[e])return!0;return(U[e]||"payable"===e)&&x.throwArgumentError("invalid modifier","name",e),!1}function F(t,e){for(let r in e)Object(h.d)(t,r,e[r])}const q=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),V=new RegExp(/^(.*)\[([0-9]*)\]$/);class z{constructor(t,e){t!==L&&x.throwError("use fromString",l.a.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),F(this,e);let r=this.type.match(V);F(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:z.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=q.sighash),q[t]||x.throwArgumentError("invalid format type","format",t),t===q.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==q.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===q.full?", ":",")+")"):e+=this.type,t!==q.sighash&&(!0===this.indexed&&(e+=" indexed"),t===q.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"===typeof t?z.fromString(t,e):z.fromObject(t)}static fromObject(t){return z.isParamType(t)?t:new z(L,{name:t.name||null,type:et(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(z.fromObject):null})}static fromString(t,e){return r=function(t,e){let r=t;function n(e){x.throwArgumentError("unexpected character at position ".concat(e),"param",t)}function i(t){let r={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(r.indexed=!1),r}t=t.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},s=o;for(let a=0;a<t.length;a++){let r=t[a];switch(r){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(a),s.state.allowType=!1,s.type=et(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(e||n(a),s.indexed=!0,s.name=""),K(s.type,s.name)&&(s.name=""),s.type=et(s.type);let t=s;s=s.parent,s||n(a),delete t.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(e||n(a),s.indexed=!0,s.name=""),K(s.type,s.name)&&(s.name=""),s.type=et(s.type);let o=i(s.parent);s.parent.components.push(o),delete s.parent,s=o;break;case" ":s.state.allowType&&""!==s.type&&(s.type=et(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(e||n(a),s.indexed&&n(a),s.indexed=!0,s.name=""):K(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(a),s.type+=r,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(a),s.type+=r,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=r,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=r,delete s.state.allowArray):s.state.readArray?s.type+=r:n(a)}}return s.parent&&x.throwArgumentError("unexpected eof","param",t),delete o.state,"indexed"===s.name?(e||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):K(s.type,s.name)&&(s.name=""),o.type=et(o.type),o}(t,!!e),z.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(t){return!(null==t||!t._isParamType)}}function H(t,e){return function(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let o=t[i];","===o&&0===n?(e.push(r),r=""):(r+=o,"("===o?n++:")"===o&&(n--,-1===n&&x.throwArgumentError("unbalanced parenthesis","value",t)))}r&&e.push(r);return e}(t).map((t=>z.fromString(t,e)))}class G{constructor(t,e){t!==L&&x.throwError("use a static from method",l.a.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),F(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return G.isFragment(t)?t:"string"===typeof t?G.fromString(t):G.fromObject(t)}static fromObject(t){if(G.isFragment(t))return t;switch(t.type){case"function":return Q.fromObject(t);case"event":return W.fromObject(t);case"constructor":return X.fromObject(t);case"error":return tt.fromObject(t);case"fallback":case"receive":return null}return x.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?W.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?Q.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?X.fromString(t.trim()):"error"===t.split(" ")[0]?tt.fromString(t.substring(5).trim()):x.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class W extends G{format(t){if(t||(t=q.sighash),q[t]||x.throwArgumentError("invalid format type","format",t),t===q.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==q.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===q.full?", ":",")+") ",t!==q.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"===typeof t?W.fromString(t):W.fromObject(t)}static fromObject(t){if(W.isEventFragment(t))return t;"event"!==t.type&&x.throwArgumentError("invalid event object","value",t);const e={name:nt(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(z.fromObject):[],type:"event"};return new W(L,e)}static fromString(t){let e=t.match(it);e||x.throwArgumentError("invalid event string","value",t);let r=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":r=!0;break;case"":break;default:x.warn("unknown modifier: "+t)}})),W.fromObject({name:e[1].trim(),anonymous:r,inputs:H(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function J(t,e){e.gas=null;let r=t.split("@");return 1!==r.length?(r.length>2&&x.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||x.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=d.a.from(r[1]),r[0]):t}function Y(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Z(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&x.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&x.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||x.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&x.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&x.throwArgumentError("unable to determine stateMutability","value",t),e}class X extends G{format(t){if(t||(t=q.sighash),q[t]||x.throwArgumentError("invalid format type","format",t),t===q.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});t===q.sighash&&x.throwError("cannot format a constructor for sighash",l.a.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===q.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"===typeof t?X.fromString(t):X.fromObject(t)}static fromObject(t){if(X.isConstructorFragment(t))return t;"constructor"!==t.type&&x.throwArgumentError("invalid constructor object","value",t);let e=Z(t);e.constant&&x.throwArgumentError("constructor cannot be constant","value",t);const r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(z.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?d.a.from(t.gas):null};return new X(L,r)}static fromString(t){let e={type:"constructor"},r=(t=J(t,e)).match(it);return r&&"constructor"===r[1].trim()||x.throwArgumentError("invalid constructor string","value",t),e.inputs=H(r[2].trim(),!1),Y(r[3].trim(),e),X.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class Q extends X{format(t){if(t||(t=q.sighash),q[t]||x.throwArgumentError("invalid format type","format",t),t===q.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==q.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===q.full?", ":",")+") ",t!==q.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"===typeof t?Q.fromString(t):Q.fromObject(t)}static fromObject(t){if(Q.isFunctionFragment(t))return t;"function"!==t.type&&x.throwArgumentError("invalid function object","value",t);let e=Z(t);const r={type:t.type,name:nt(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(z.fromObject):[],outputs:t.outputs?t.outputs.map(z.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?d.a.from(t.gas):null};return new Q(L,r)}static fromString(t){let e={type:"function"},r=(t=J(t,e)).split(" returns ");r.length>2&&x.throwArgumentError("invalid function string","value",t);let n=r[0].match(it);if(n||x.throwArgumentError("invalid function signature","value",t),e.name=n[1].trim(),e.name&&nt(e.name),e.inputs=H(n[2],!1),Y(n[3].trim(),e),r.length>1){let n=r[1].match(it);""==n[1].trim()&&""==n[3].trim()||x.throwArgumentError("unexpected tokens","value",t),e.outputs=H(n[2],!1)}else e.outputs=[];return Q.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function $(t){const e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||x.throwArgumentError("cannot specify user defined ".concat(e," error"),"fragment",t),t}class tt extends G{format(t){if(t||(t=q.sighash),q[t]||x.throwArgumentError("invalid format type","format",t),t===q.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==q.sighash&&(e+="error "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===q.full?", ":",")+") ",e.trim()}static from(t){return"string"===typeof t?tt.fromString(t):tt.fromObject(t)}static fromObject(t){if(tt.isErrorFragment(t))return t;"error"!==t.type&&x.throwArgumentError("invalid error object","value",t);const e={type:t.type,name:nt(t.name),inputs:t.inputs?t.inputs.map(z.fromObject):[]};return $(new tt(L,e))}static fromString(t){let e={type:"error"},r=t.match(it);return r||x.throwArgumentError("invalid error signature","value",t),e.name=r[1].trim(),e.name&&nt(e.name),e.inputs=H(r[2],!1),$(tt.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&"error"===t.type}}function et(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const rt=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function nt(t){return t&&t.match(rt)||x.throwArgumentError('invalid identifier "'.concat(t,'"'),"value",t),t}const it=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");const ot=new l.a(f),st=new RegExp(/^bytes([0-9]*)$/),at=new RegExp(/^(u?int)([0-9]*)$/);class ct{constructor(t){Object(h.d)(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new w(t.name);case"bool":return new I(t.name);case"string":return new D(t.name);case"bytes":return new T(t.name);case"array":return new M(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new B((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new O(t.name)}let e=t.type.match(at);if(e){let r=parseInt(e[2]||"256");return(0===r||r>256||r%8!==0)&&ot.throwArgumentError("invalid "+e[1]+" bit length","param",t),new P(r/8,"int"===e[1],t.name)}if(e=t.type.match(st),e){let r=parseInt(e[1]);return(0===r||r>32)&&ot.throwArgumentError("invalid bytes length","param",t),new C(r,t.name)}return ot.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new b(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new g(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(z.from(t))));return new B(e,"_").defaultValue()}encode(t,e){t.length!==e.length&&ot.throwError("types/values length mismatch",l.a.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const r=t.map((t=>this._getCoder(z.from(t)))),n=new B(r,"_"),i=this._getWriter();return n.encode(i,e),i.data}decode(t,e,r){const n=t.map((t=>this._getCoder(z.from(t))));return new B(n,"_").decode(this._getReader(Object(u.a)(e),r))}}const ut=new ct;var ht=r(197),lt=r(13);const ft=new l.a(f);class dt extends h.a{}class pt extends h.a{}class mt extends h.a{}class yt extends h.a{static isIndexed(t){return!(!t||!t._isIndexed)}}const gt={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function bt(t,e){const r=new Error("deferred error during ABI decoding triggered accessing ".concat(t));return r.error=e,r}class vt{constructor(t){let e=[];e="string"===typeof t?JSON.parse(t):t,Object(h.d)(this,"fragments",e.map((t=>G.from(t))).filter((t=>null!=t))),Object(h.d)(this,"_abiCoder",Object(h.e)(new.target,"getAbiCoder")()),Object(h.d)(this,"functions",{}),Object(h.d)(this,"errors",{}),Object(h.d)(this,"events",{}),Object(h.d)(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void ft.warn("duplicate definition - constructor"):void Object(h.d)(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let r=t.format();e[r]?ft.warn("duplicate definition - "+r):e[r]=t})),this.deploy||Object(h.d)(this,"deploy",X.from({payable:!1,type:"constructor"})),Object(h.d)(this,"_isInterface",!0)}format(t){t||(t=q.full),t===q.sighash&&ft.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===q.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return ut}static getAddress(t){return Object(v.a)(t)}static getSighash(t){return Object(u.e)(Object(ht.a)(t.format()),0,4)}static getEventTopic(t){return Object(ht.a)(t.format())}getFunction(t){if(Object(u.l)(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];ft.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===r.length?ft.throwArgumentError("no matching function","name",e):r.length>1&&ft.throwArgumentError("multiple matching functions","name",e),this.functions[r[0]]}const e=this.functions[Q.fromString(t).format()];return e||ft.throwArgumentError("no matching function","signature",t),e}getEvent(t){if(Object(u.l)(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];ft.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===r.length?ft.throwArgumentError("no matching event","name",e):r.length>1&&ft.throwArgumentError("multiple matching events","name",e),this.events[r[0]]}const e=this.events[W.fromString(t).format()];return e||ft.throwArgumentError("no matching event","signature",t),e}getError(t){if(Object(u.l)(t)){const e=Object(h.e)(this.constructor,"getSighash");for(const r in this.errors){if(t===e(this.errors[r]))return this.errors[r]}ft.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));return 0===r.length?ft.throwArgumentError("no matching error","name",e):r.length>1&&ft.throwArgumentError("multiple matching errors","name",e),this.errors[r[0]]}const e=this.errors[Q.fromString(t).format()];return e||ft.throwArgumentError("no matching error","signature",t),e}getSighash(t){if("string"===typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(r){throw e}}return Object(h.e)(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"===typeof t&&(t=this.getEvent(t)),Object(h.e)(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){"string"===typeof t&&(t=this.getError(t));const r=Object(u.a)(e);return Object(u.i)(r.slice(0,4))!==this.getSighash(t)&&ft.throwArgumentError("data signature does not match error ".concat(t.name,"."),"data",Object(u.i)(r)),this._decodeParams(t.inputs,r.slice(4))}encodeErrorResult(t,e){return"string"===typeof t&&(t=this.getError(t)),Object(u.i)(Object(u.b)([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){"string"===typeof t&&(t=this.getFunction(t));const r=Object(u.a)(e);return Object(u.i)(r.slice(0,4))!==this.getSighash(t)&&ft.throwArgumentError("data signature does not match function ".concat(t.name,"."),"data",Object(u.i)(r)),this._decodeParams(t.inputs,r.slice(4))}encodeFunctionData(t,e){return"string"===typeof t&&(t=this.getFunction(t)),Object(u.i)(Object(u.b)([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){"string"===typeof t&&(t=this.getFunction(t));let r=Object(u.a)(e),n=null,i="",o=null,s=null,a=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,r)}catch(c){}break;case 4:{const t=Object(u.i)(r.slice(0,4)),e=gt[t];if(e)o=this._abiCoder.decode(e.inputs,r.slice(4)),s=e.name,a=e.signature,e.reason&&(n=o[0]),"Error"===s?i="; VM Exception while processing transaction: reverted with reason string ".concat(JSON.stringify(o[0])):"Panic"===s&&(i="; VM Exception while processing transaction: reverted with panic code ".concat(o[0]));else try{const e=this.getError(t);o=this._abiCoder.decode(e.inputs,r.slice(4)),s=e.name,a=e.format()}catch(c){}break}}return ft.throwError("call revert exception"+i,l.a.errors.CALL_EXCEPTION,{method:t.format(),data:Object(u.i)(e),errorArgs:o,errorName:s,errorSignature:a,reason:n})}encodeFunctionResult(t,e){return"string"===typeof t&&(t=this.getFunction(t)),Object(u.i)(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"===typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&ft.throwError("too many arguments for "+t.format(),l.a.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let r=[];t.anonymous||r.push(this.getEventTopic(t));const n=(t,e)=>"string"===t.type?Object(ht.a)(e):"bytes"===t.type?Object(lt.a)(Object(u.i)(e)):("bool"===t.type&&"boolean"===typeof e&&(e=e?"0x01":"0x00"),t.type.match(/^u?int/)&&(e=d.a.from(e).toHexString()),"address"===t.type&&this._abiCoder.encode(["address"],[e]),Object(u.h)(Object(u.i)(e),32));for(e.forEach(((e,i)=>{let o=t.inputs[i];o.indexed?null==e?r.push(null):"array"===o.baseType||"tuple"===o.baseType?ft.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,e):Array.isArray(e)?r.push(e.map((t=>n(o,t)))):r.push(n(o,e)):null!=e&&ft.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){"string"===typeof t&&(t=this.getEvent(t));const r=[],n=[],i=[];return t.anonymous||r.push(this.getEventTopic(t)),e.length!==t.inputs.length&&ft.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((t,o)=>{const s=e[o];if(t.indexed)if("string"===t.type)r.push(Object(ht.a)(s));else if("bytes"===t.type)r.push(Object(lt.a)(s));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([t.type],[s]))}else n.push(t),i.push(s)})),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(t,e,r){if("string"===typeof t&&(t=this.getEvent(t)),null!=r&&!t.anonymous){let e=this.getEventTopic(t);Object(u.l)(r[0],32)&&r[0].toLowerCase()===e||ft.throwError("fragment/topic mismatch",l.a.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:r[0]}),r=r.slice(1)}let n=[],i=[],o=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(z.fromObject({type:"bytes32",name:t.name})),o.push(!0)):(n.push(t),o.push(!1)):(i.push(t),o.push(!1))}));let s=null!=r?this._abiCoder.decode(n,Object(u.b)(r)):null,a=this._abiCoder.decode(i,e,!0),c=[],h=0,f=0;t.inputs.forEach(((t,e)=>{if(t.indexed)if(null==s)c[e]=new yt({_isIndexed:!0,hash:null});else if(o[e])c[e]=new yt({_isIndexed:!0,hash:s[f++]});else try{c[e]=s[f++]}catch(r){c[e]=r}else try{c[e]=a[h++]}catch(r){c[e]=r}if(t.name&&null==c[t.name]){const r=c[e];r instanceof Error?Object.defineProperty(c,t.name,{enumerable:!0,get:()=>{throw bt("property ".concat(JSON.stringify(t.name)),r)}}):c[t.name]=r}}));for(let u=0;u<c.length;u++){const t=c[u];t instanceof Error&&Object.defineProperty(c,u,{enumerable:!0,get:()=>{throw bt("index ".concat(u),t)}})}return Object.freeze(c)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new pt({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:d.a.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new dt({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=Object(u.i)(t);let r=this.getError(e.substring(0,10).toLowerCase());return r?new mt({args:this._abiCoder.decode(r.inputs,"0x"+e.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(t){return!(!t||!t._isInterface)}}function wt(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Object(u.a)(e)}function _t(t){t=Object(u.a)(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var St=r(106);function Et(t,e){e||(e=function(t){return[parseInt(t,16)]});let r=0,n={};return t.split(",").forEach((t=>{let i=t.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])})),n}function At(t){let e=0;return t.split(",").map((t=>{let r=t.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=e+parseInt(r[0],16);return e=parseInt(r[1],16),{l:n,h:e}}))}function Mt(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&-1!==i.e.indexOf(t-r))continue;return i}}return null}const It=At("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Rt="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),Tt=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Ct=Et("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Ot=Et("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),kt=Et("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e})),Pt=At("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Nt(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=Object(N.g)(t);var r;r=e.map((t=>{if(Rt.indexOf(t)>=0)return[];if(t>=65024&&t<=65039)return[];let e=function(t){let e=Mt(t,Tt);if(e)return[t+e.s];let r=Ct[t];if(r)return r;let n=Ot[t];return n?[t+n[0]]:kt[t]||null}(t);return e||[t]})),e=r.reduce(((t,e)=>(e.forEach((e=>{t.push(e)})),t)),[]),e=Object(N.g)(Object(N.e)(e),N.a.NFKC),e.forEach((t=>{if(Mt(t,Pt))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),e.forEach((t=>{if(Mt(t,It))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let n=Object(N.e)(e);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");if(n.length>63)throw new Error("too long");return n}var Dt=r(132);const Bt=new l.a(Dt.a),xt=new Uint8Array(32);xt.fill(0);const Lt=new RegExp("^((.*)\\.)?([^.]+)$");function Ut(t){try{const e=t.split(".");for(let t=0;t<e.length;t++)if(0===Nt(e[t]).length)throw new Error("empty");return!0}catch(e){}return!1}function jt(t){"string"!==typeof t&&Bt.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,r=xt;for(;e.length;){const n=e.match(Lt);null!=n&&""!==n[2]||Bt.throwArgumentError("invalid ENS address; missing component","name",t);const i=Object(N.f)(Nt(n[3]));r=Object(lt.a)(Object(u.b)([r,Object(lt.a)(i)])),e=n[2]||""}return Object(u.i)(r)}function Kt(t){return Object(u.i)(Object(u.b)(t.split(".").map((t=>{const e=Object(N.f)("_"+Nt(t));return e[0]=e.length-1,e}))))+"00"}var Ft=r(715),qt=r(716),Vt=r(34),zt=r(67),Ht=r(353);const Gt=new RegExp("^bytes([0-9]+)$"),Wt=new RegExp("^(u?int)([0-9]*)$"),Jt=new RegExp("^(.*)\\[([0-9]*)\\]$"),Yt=new l.a("solidity/5.6.1");function Zt(t,e,r){switch(t){case"address":return r?Object(u.p)(e,32):Object(u.a)(e);case"string":return Object(N.f)(e);case"bytes":return Object(u.a)(e);case"bool":return e=e?"0x01":"0x00",r?Object(u.p)(e,32):Object(u.a)(e)}let n=t.match(Wt);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||0===i||i>256)&&Yt.throwArgumentError("invalid number type","type",t),r&&(i=256),e=d.a.from(e).toTwos(i),Object(u.p)(e,i/8)}if(n=t.match(Gt),n){const i=parseInt(n[1]);return(String(i)!==n[1]||0===i||i>32)&&Yt.throwArgumentError("invalid bytes type","type",t),Object(u.a)(e).byteLength!==i&&Yt.throwArgumentError("invalid value for ".concat(t),"value",e),r?Object(u.a)((e+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):e}if(n=t.match(Jt),n&&Array.isArray(e)){const r=n[1];parseInt(n[2]||String(e.length))!=e.length&&Yt.throwArgumentError("invalid array length for ".concat(t),"value",e);const i=[];return e.forEach((function(t){i.push(Zt(r,t,!0))})),Object(u.b)(i)}return Yt.throwArgumentError("invalid type","type",t)}function Xt(t,e){t.length!=e.length&&Yt.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach((function(t,n){r.push(Zt(t,e[n]))})),Object(u.i)(Object(u.b)(r))}function Qt(t,e){return Object(lt.a)(Xt(t,e))}function $t(t,e){return Object(Ht.c)(Xt(t,e))}var te=r(141);function ee(t){for(let e=(t=t.slice()).length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}var re=r(41),ne=r(46);function ie(t){const e=Object(N.f)(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Object(u.i)(Object(u.b)([e,"0x0000000000000000000000000000000000000000000000000000000000000000"]).slice(0,32))}function oe(t){const e=Object(u.a)(t);if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===e[r-1];)r--;return Object(N.h)(e.slice(0,r))}var se=r(38),ae=r(130);const ce=new l.a(ae.a),ue={},he=d.a.from(0),le=d.a.from(-1);function fe(t,e,r,n){const i={fault:e,operation:r};return void 0!==n&&(i.value=n),ce.throwError(t,l.a.errors.NUMERIC_FAULT,i)}let de="0";for(;de.length<256;)de+=de;function pe(t){if("number"!==typeof t)try{t=d.a.from(t).toNumber()}catch(e){}return"number"===typeof t&&t>=0&&t<=256&&!(t%1)?"1"+de.substring(0,t):ce.throwArgumentError("invalid decimal size","decimals",t)}function me(t,e){null==e&&(e=0);const r=pe(e),n=(t=d.a.from(t)).lt(he);n&&(t=t.mul(le));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=t.div(r).toString();return t=1===r.length?o:o+"."+i,n&&(t="-"+t),t}function ye(t,e){null==e&&(e=0);const r=pe(e);"string"===typeof t&&t.match(/^-?[0-9.]+$/)||ce.throwArgumentError("invalid decimal value","value",t);const n="-"===t.substring(0,1);n&&(t=t.substring(1)),"."===t&&ce.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&ce.throwArgumentError("too many decimal points","value",t);let o=i[0],s=i[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>r.length-1&&fe("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<r.length-1;)s+="0";const a=d.a.from(o),c=d.a.from(s);let u=a.mul(r).add(c);return n&&(u=u.mul(le)),u}class ge{constructor(t,e,r,n){t!==ue&&ce.throwError("cannot use FixedFormat constructor; use FixedFormat.from",l.a.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=r,this.decimals=n,this.name=(e?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=pe(n),Object.freeze(this)}static from(t){if(t instanceof ge)return t;"number"===typeof t&&(t="fixed128x".concat(t));let e=!0,r=128,n=18;if("string"===typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||ce.throwArgumentError("invalid fixed format","format",t),e="u"!==i[1],r=parseInt(i[2]),n=parseInt(i[3])}else if(t){const i=(e,r,n)=>null==t[e]?n:(typeof t[e]!==r&&ce.throwArgumentError("invalid fixed format ("+e+" not "+r+")","format."+e,t[e]),t[e]);e=i("signed","boolean",e),r=i("width","number",r),n=i("decimals","number",n)}return r%8&&ce.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),n>80&&ce.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new ge(ue,e,r,n)}}class be{constructor(t,e,r,n){t!==ue&&ce.throwError("cannot use FixedNumber constructor; use FixedNumber.from",l.a.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=e,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&ce.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const e=ye(this._value,this.format.decimals),r=ye(t._value,t.format.decimals);return be.fromValue(e.add(r),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=ye(this._value,this.format.decimals),r=ye(t._value,t.format.decimals);return be.fromValue(e.sub(r),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=ye(this._value,this.format.decimals),r=ye(t._value,t.format.decimals);return be.fromValue(e.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=ye(this._value,this.format.decimals),r=ye(t._value,t.format.decimals);return be.fromValue(e.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");1===t.length&&t.push("0");let e=be.from(t[0],this.format);const r=!t[1].match(/^(0*)$/);return this.isNegative()&&r&&(e=e.subUnsafe(ve.toFormat(e.format))),e}ceiling(){const t=this.toString().split(".");1===t.length&&t.push("0");let e=be.from(t[0],this.format);const r=!t[1].match(/^(0*)$/);return!this.isNegative()&&r&&(e=e.addUnsafe(ve.toFormat(e.format))),e}round(t){null==t&&(t=0);const e=this.toString().split(".");if(1===e.length&&e.push("0"),(t<0||t>80||t%1)&&ce.throwArgumentError("invalid decimal count","decimals",t),e[1].length<=t)return this;const r=be.from("1"+de.substring(0,t),this.format),n=we.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(t){if(null==t)return this._hex;t%8&&ce.throwArgumentError("invalid byte width","width",t);const e=d.a.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return Object(u.h)(e,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return be.fromString(this._value,t)}static fromValue(t,e,r){return null!=r||null==e||Object(d.d)(e)||(r=e,e=null),null==e&&(e=0),null==r&&(r="fixed"),be.fromString(me(t,e),ge.from(r))}static fromString(t,e){null==e&&(e="fixed");const r=ge.from(e),n=ye(t,r.decimals);!r.signed&&n.lt(he)&&fe("unsigned value cannot be negative","overflow","value",t);let i=null;r.signed?i=n.toTwos(r.width).toHexString():(i=n.toHexString(),i=Object(u.h)(i,r.width/8));const o=me(n,r.decimals);return new be(ue,i,o,r)}static fromBytes(t,e){null==e&&(e="fixed");const r=ge.from(e);if(Object(u.a)(t).length>r.width/8)throw new Error("overflow");let n=d.a.from(t);r.signed&&(n=n.fromTwos(r.width));const i=n.toTwos((r.signed?0:1)+r.width).toHexString(),o=me(n,r.decimals);return new be(ue,i,o,r)}static from(t,e){if("string"===typeof t)return be.fromString(t,e);if(Object(u.j)(t))return be.fromBytes(t,e);try{return be.fromValue(t,0,e)}catch(r){if(r.code!==l.a.errors.INVALID_ARGUMENT)throw r}return ce.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!(!t||!t._isFixedNumber)}}const ve=be.from(1),we=be.from("0.5"),_e=new l.a("units/5.6.1"),Se=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Ee(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||"."===t||"-."===t)&&_e.throwArgumentError("invalid value","value",t);let r=e[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");let i="";for(2===e.length&&(i="."+(e[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);const o=[];for(;r.length;){if(r.length<=3){o.unshift(r);break}{const t=r.length-3;o.unshift(r.substring(t)),r=r.substring(0,t)}}return n+o.join(",")+i}function Ae(t,e){if("string"===typeof e){const t=Se.indexOf(e);-1!==t&&(e=3*t)}return me(t,null!=e?e:18)}function Me(t,e){if("string"!==typeof t&&_e.throwArgumentError("value must be a string","value",t),"string"===typeof e){const t=Se.indexOf(e);-1!==t&&(e=3*t)}return ye(t,null!=e?e:18)}function Ie(t){return Ae(t,18)}function Re(t){return Me(t,18)}var Te=r(78);var Ce=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};function Oe(t,e){return Ce(this,void 0,void 0,(function*(){null==e&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};!0!==e.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client");const n=yield fetch(t,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach(((t,e)=>{o[e.toLowerCase()]=t})):n.headers.keys().forEach((t=>{o[t.toLowerCase()]=n.headers.get(t)})),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:Object(u.a)(new Uint8Array(i))}}))}var ke=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const Pe=new l.a("web/5.6.1");function Ne(t){return new Promise((e=>{setTimeout(e,t)}))}function De(t,e){if(null==t)return null;if("string"===typeof t)return t;if(Object(u.k)(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return Object(N.h)(t)}catch(r){}return Object(u.i)(t)}return t}function Be(t,e,r){const n="object"===typeof t&&null!=t.throttleLimit?t.throttleLimit:12;Pe.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"===typeof t?t.throttleCallback:null,o="object"===typeof t&&"number"===typeof t.throttleSlotInterval?t.throttleSlotInterval:100;Pe.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s="object"===typeof t&&!!t.errorPassThrough,a={};let c=null;const u={method:"GET"};let h=!1,f=12e4;if("string"===typeof t)c=t;else if("object"===typeof t){if(null!=t&&null!=t.url||Pe.throwArgumentError("missing URL","connection.url",t),c=t.url,"number"===typeof t.timeout&&t.timeout>0&&(f=t.timeout),t.headers)for(const e in t.headers)a[e.toLowerCase()]={key:e,value:String(t.headers[e])},["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0&&(h=!0);if(u.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==c.substring(0,6)&&!0!==t.allowInsecureAuthentication&&Pe.throwError("basic authentication requires a secure https url",l.a.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const e=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+_t(Object(N.f)(e))}}null!=t.skipFetchSetup&&(u.skipFetchSetup=!!t.skipFetchSetup)}const d=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),p=c?c.match(d):null;if(p)try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]},body:wt(p[2])};let e=t.body;return r&&(e=r(t.body,t)),Promise.resolve(e)}catch(b){Pe.throwError("processing response error",l.a.errors.SERVER_ERROR,{body:De(p[1],p[2]),error:b,requestBody:null,requestMethod:"GET",url:c})}e&&(u.method="POST",u.body=e,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const m={};Object.keys(a).forEach((t=>{const e=a[t];m[e.key]=e.value})),u.headers=m;const y=function(){let t=null;return{promise:new Promise((function(e,r){f&&(t=setTimeout((()=>{null!=t&&(t=null,r(Pe.makeError("timeout",l.a.errors.TIMEOUT,{requestBody:De(u.body,m["content-type"]),requestMethod:u.method,timeout:f,url:c})))}),f))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),g=function(){return ke(this,void 0,void 0,(function*(){for(let t=0;t<n;t++){let e=null;try{if(e=yield Oe(c,u),t<n)if(301===e.statusCode||302===e.statusCode){const t=e.headers.location||"";if("GET"===u.method&&t.match(/^https:/)){c=e.headers.location;continue}}else if(429===e.statusCode){let r=!0;if(i&&(r=yield i(t,c)),r){let r=0;const n=e.headers["retry-after"];r="string"===typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,t))),yield Ne(r);continue}}}catch(b){e=b.response,null==e&&(y.cancel(),Pe.throwError("missing response",l.a.errors.SERVER_ERROR,{requestBody:De(u.body,m["content-type"]),requestMethod:u.method,serverError:b,url:c}))}let a=e.body;if(h&&304===e.statusCode?a=null:!s&&(e.statusCode<200||e.statusCode>=300)&&(y.cancel(),Pe.throwError("bad response",l.a.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:De(a,e.headers?e.headers["content-type"]:null),requestBody:De(u.body,m["content-type"]),requestMethod:u.method,url:c})),r)try{const t=yield r(a,e);return y.cancel(),t}catch(b){if(b.throttleRetry&&t<n){let e=!0;if(i&&(e=yield i(t,c)),e){const e=o*parseInt(String(Math.random()*Math.pow(2,t)));yield Ne(e);continue}}y.cancel(),Pe.throwError("processing response error",l.a.errors.SERVER_ERROR,{body:De(a,e.headers?e.headers["content-type"]:null),error:b,requestBody:De(u.body,m["content-type"]),requestMethod:u.method,url:c})}return y.cancel(),a}return Pe.throwError("failed response",l.a.errors.SERVER_ERROR,{requestBody:De(u.body,m["content-type"]),requestMethod:u.method,url:c})}))}();return Promise.race([y.promise,g])}function xe(t,e,r){let n=null;if(null!=e){n=Object(N.f)(e);const r="string"===typeof t?{url:t}:Object(h.g)(t);if(r.headers){0!==Object.keys(r.headers).filter((t=>"content-type"===t.toLowerCase())).length||(r.headers=Object(h.g)(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};t=r}return Be(t,n,((t,e)=>{let n=null;if(null!=t)try{n=JSON.parse(Object(N.h)(t))}catch(i){Pe.throwError("invalid JSON",l.a.errors.SERVER_ERROR,{body:t,error:i})}return r&&(n=r(n,e)),n}))}function Le(t,e){return e||(e={}),null==(e=Object(h.g)(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(r,n){let i=null,o=!1;const s=()=>!o&&(o=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout((()=>{s()&&n(new Error("timeout"))}),e.timeout));const a=e.retryLimit;let c=0;!function i(){return t().then((function(t){if(void 0!==t)s()&&r(t);else if(e.oncePoll)e.oncePoll.once("poll",i);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!o){if(c++,c>a)return void(s()&&n(new Error("retry limit reached")));let t=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));t<e.floor&&(t=e.floor),t>e.ceiling&&(t=e.ceiling),setTimeout(i,t)}return null}),(function(t){s()&&n(t)}))}()}))}var Ue=r(343);new l.a("ethers/5.6.9");var je=r(43),Ke=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class Fe{constructor(t){var e;if(!(null===(e=null===t||void 0===t?void 0:t.secp256k1Uncompressed)||void 0===e?void 0:e.bytes))throw new Error("invalid public key");if(65!==t.secp256k1Uncompressed.bytes.length)throw new Error("invalid public key length: ".concat(t.secp256k1Uncompressed.bytes.length));if(4!==t.secp256k1Uncompressed.bytes[0])throw new Error("unrecognized public key prefix: ".concat(t.secp256k1Uncompressed.bytes[0]));this.timestamp=t.timestamp,this.secp256k1Uncompressed=t.secp256k1Uncompressed,t.signature&&(this.signature=new a.a(t.signature))}generated(){if(this.timestamp)return new Date(this.timestamp)}verify(t,e){return!!this.secp256k1Uncompressed&&(!!t.ecdsaCompact&&s.verify(t.ecdsaCompact.bytes,e,this.secp256k1Uncompressed.bytes))}bytesToSign(){return o.g.encode({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed}).finish()}identitySigRequestText(){return"XMTP : Create Identity\n"+"".concat(Object(c.a)(this.bytesToSign()),"\n")+"\nFor more info: https://xmtp.org/signatures/"}verifyKey(t){return Ke(this,void 0,void 0,(function*(){if(void 0===typeof t.signature)return!1;if(!t.secp256k1Uncompressed)return!1;const e=yield Object(je.d)(t.bytesToSign());return!!t.signature&&this.verify(t.signature,e)}))}signWithWallet(t){return Ke(this,void 0,void 0,(function*(){if(!this.secp256k1Uncompressed)throw new Error("missing public key");const e=yield t.signMessage(this.identitySigRequestText()),r=i.splitSignature(e),n=Object(c.c)(r.r),o=Object(c.c)(r.s),s=new Uint8Array(64);s.set(n),s.set(o,n.length),this.signature=new a.a({ecdsaCompact:{bytes:s,recovery:r.recoveryParam}})}))}walletSignatureAddress(){if(!this.signature)throw new Error("key is not signed");if(!this.secp256k1Uncompressed)throw new Error("missing public key");const t=Object(c.c)(i.hashMessage(this.identitySigRequestText())),e=this.signature.getPublicKey(t);if(!e)throw new Error("key signature is malformed");return e.getEthereumAddress()}getEthereumAddress(){if(!this.secp256k1Uncompressed)throw new Error("missing public key");return i.computeAddress(this.secp256k1Uncompressed.bytes)}equals(t){if(!this.secp256k1Uncompressed||!t.secp256k1Uncompressed)return!this.secp256k1Uncompressed&&!t.secp256k1Uncompressed;for(let e=0;e<this.secp256k1Uncompressed.bytes.length;e++)if(this.secp256k1Uncompressed.bytes[e]!==t.secp256k1Uncompressed.bytes[e])return!1;return!0}toBytes(){return o.g.encode(this).finish()}static fromBytes(t){return new Fe(o.g.decode(t))}}},,function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e,r){"use strict";var n=e,i=r(61),o=r(51),s=r(252);n.assert=o,n.toArray=s.toArray,n.zero2=s.zero2,n.toHex=s.toHex,n.encode=s.encode,n.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},n.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var s,a,c=t.andln(3)+i&3,u=e.andln(3)+o&3;3===c&&(c=-1),3===u&&(u=-1),s=0===(1&c)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==u?c:-c,r[0].push(s),a=0===(1&u)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==c?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},n.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(t){return"string"===typeof t?n.toArray(t,"hex"):t},n.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,r){"use strict";!function(e){function r(t){return parseInt(t)===t}function n(t){if(!r(t.length))return!1;for(var e=0;e<t.length;e++)if(!r(t[e])||t[e]<0||t[e]>255)return!1;return!0}function i(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(r(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function o(t){return new Uint8Array(t)}function s(t,e,r,n,i){null==n&&null==i||(t=t.slice?t.slice(n,i):Array.prototype.slice.call(t,n,i)),e.set(t,r)}var a={toBytes:function(t){var e=[],r=0;for(t=encodeURI(t);r<t.length;){var n=t.charCodeAt(r++);37===n?(e.push(parseInt(t.substr(r,2),16)),r+=2):e.push(n)}return i(e)},fromBytes:function(t){for(var e=[],r=0;r<t.length;){var n=t[r];n<128?(e.push(String.fromCharCode(n)),r++):n>191&&n<224?(e.push(String.fromCharCode((31&n)<<6|63&t[r+1])),r+=2):(e.push(String.fromCharCode((15&n)<<12|(63&t[r+1])<<6|63&t[r+2])),r+=3)}return e.join("")}},c=function(){var t="0123456789abcdef";return{toBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},fromBytes:function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];r.push(t[(240&i)>>4]+t[15&i])}return r.join("")}}}(),u={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],d=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],b=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],_=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],S=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],E=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],A=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function M(t){for(var e=[],r=0;r<t.length;r+=4)e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return e}var I=function(t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(t,!0)}),this._prepare()};I.prototype._prepare=function(){var t=u[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(t+1),i=this.key.length/4,o=M(this.key);for(e=0;e<i;e++)r=e>>2,this._Ke[r][e%4]=o[e],this._Kd[t-r][e%4]=o[e];for(var s,a=0,c=i;c<n;){if(s=o[i-1],o[0]^=l[s>>16&255]<<24^l[s>>8&255]<<16^l[255&s]<<8^l[s>>24&255]^h[a]<<24,a+=1,8!=i)for(e=1;e<i;e++)o[e]^=o[e-1];else{for(e=1;e<i/2;e++)o[e]^=o[e-1];s=o[i/2-1],o[i/2]^=l[255&s]^l[s>>8&255]<<8^l[s>>16&255]<<16^l[s>>24&255]<<24;for(e=i/2+1;e<i;e++)o[e]^=o[e-1]}for(e=0;e<i&&c<n;)f=c>>2,d=c%4,this._Ke[f][d]=o[e],this._Kd[t-f][d]=o[e++],c++}for(var f=1;f<t;f++)for(var d=0;d<4;d++)s=this._Kd[f][d],this._Kd[f][d]=_[s>>24&255]^S[s>>16&255]^E[s>>8&255]^A[255&s]},I.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,r=[0,0,0,0],n=M(t),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)r[i]=d[n[i]>>24&255]^p[n[(i+1)%4]>>16&255]^m[n[(i+2)%4]>>8&255]^y[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Ke[e][i],c[4*i]=255&(l[n[i]>>24&255]^a>>24),c[4*i+1]=255&(l[n[(i+1)%4]>>16&255]^a>>16),c[4*i+2]=255&(l[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(l[255&n[(i+3)%4]]^a);return c},I.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,r=[0,0,0,0],n=M(t),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)r[i]=g[n[i]>>24&255]^b[n[(i+3)%4]>>16&255]^v[n[(i+2)%4]>>8&255]^w[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,c=o(16);for(i=0;i<4;i++)a=this._Kd[e][i],c[4*i]=255&(f[n[i]>>24&255]^a>>24),c[4*i+1]=255&(f[n[(i+3)%4]>>16&255]^a>>16),c[4*i+2]=255&(f[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(f[255&n[(i+1)%4]]^a);return c};var R=function(t){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new I(t)};R.prototype.encrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16)s(t,r,0,n,n+16),s(r=this._aes.encrypt(r),e,n);return e},R.prototype.decrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16)s(t,r,0,n,n+16),s(r=this._aes.decrypt(r),e,n);return e};var T=function(t,e){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=o(16);this._lastCipherblock=i(e,!0),this._aes=new I(t)};T.prototype.encrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16){s(t,r,0,n,n+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),s(this._lastCipherblock,e,n)}return e},T.prototype.decrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16){s(t,r,0,n,n+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)e[n+a]=r[a]^this._lastCipherblock[a];s(t,this._lastCipherblock,0,n,n+16)}return e};var C=function(t,e,r){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(e,!0),this._aes=new I(t)};C.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},C.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var O=function(t,e){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=o(16);this._lastPrecipher=i(e,!0),this._lastPrecipherIndex=16,this._aes=new I(t)};O.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},O.prototype.decrypt=O.prototype.encrypt;var k=function(t){if(!(this instanceof k))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"===typeof t?(this._counter=o(16),this.setValue(t)):this.setBytes(t)};k.prototype.setValue=function(t){if("number"!==typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;e>=0;--e)this._counter[e]=t%256,t>>=8},k.prototype.setBytes=function(t){if(16!=(t=i(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},k.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var P=function(t,e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof k||(e=new k(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new I(t)};P.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[r]^=this._remainingCounter[this._remainingCounterIndex++];return e},P.prototype.decrypt=P.prototype.encrypt;var N={AES:I,Counter:k,ModeOfOperation:{ecb:R,cbc:T,cfb:C,ofb:O,ctr:P},utils:{hex:c,utf8:a},padding:{pkcs7:{pad:function(t){var e=16-(t=i(t,!0)).length%16,r=o(t.length+e);s(t,r);for(var n=t.length;n<r.length;n++)r[n]=e;return r},strip:function(t){if((t=i(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var r=t.length-e,n=0;n<e;n++)if(t[r+n]!==e)throw new Error("PKCS#7 invalid padding byte");var a=o(r);return s(t,a,0,0,r),a}}},_arrayTest:{coerceArray:i,createArray:o,copyArray:s}};t.exports=N}()},function(t,e,r){"use strict";const{Buffer:n}=r(19),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let c=a,u=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,u),u+=this._bufs[e].length;return t}if(c<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+c):this._bufs[s[0]].slice(h,h+c);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(c>e)){this._bufs[n].copy(t,u,h,h+c),u+=e;break}this._bufs[n].copy(t,u,h),u+=e,c-=e,h&&(h=0)}return t.length>u?t.slice(0,u):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];for(;s<e.length;){if(e.length-s>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)!function(e){o.prototype[e]=null===t[e]?function(t,r){return this.slice(t,t+r)[e](0,r)}:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.slice(r,r+t[e])[e](0)}}(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},,function(t,e,r){"use strict";var n=r(51),i=r(10);function o(t,e){return 55296===(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320===(64512&t.charCodeAt(e+1)))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function c(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"===typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=s(i)),r+=c(i.toString(16))}return r},e.zero2=a,e.zero8=c,e.join32=function(t,e,r,i){var o=r-e;n(o%4===0);for(var s=new Array(o/4),a=0,c=e;a<s.length;a++,c+=4){var u;u="big"===i?t[c]<<24|t[c+1]<<16|t[c+2]<<8|t[c+3]:t[c+3]<<24|t[c+2]<<16|t[c+1]<<8|t[c],s[a]=u>>>0}return s},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,s=(o<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,o,s,a){var c=0,u=e;return c+=(u=u+n>>>0)<e?1:0,c+=(u=u+o>>>0)<o?1:0,t+r+i+s+(c+=(u=u+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,o,s,a){return e+n+o+a>>>0},e.sum64_5_hi=function(t,e,r,n,i,o,s,a,c,u){var h=0,l=e;return h+=(l=l+n>>>0)<e?1:0,h+=(l=l+o>>>0)<o?1:0,h+=(l=l+a>>>0)<a?1:0,t+r+i+s+c+(h+=(l=l+u>>>0)<u?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,o,s,a,c,u){return e+n+o+a+u>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(457),i=r(65);class o{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(t));throw Error("Unknown type, must be binary type")}}class s{constructor(t,e,r){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(t),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return c(this,t)}}class a{constructor(t){this.decoders=t}or(t){return c(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(t),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}const c=(t,e)=>new a({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class u{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new o(t,e,r),this.decoder=new s(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const h=t=>{let{name:e,prefix:r,encode:n,decode:i}=t;return new u(e,r,n,i)};e.Codec=u,e.baseX=t=>{let{prefix:e,name:r,alphabet:o}=t;const{encode:s,decode:a}=n(o,r);return h({prefix:e,name:r,encode:s,decode:t=>i.coerce(a(t))})},e.from=h,e.or=c,e.rfc4648=t=>{let{name:e,prefix:r,bitsPerChar:n,alphabet:i}=t;return h({prefix:r,name:e,encode:t=>((t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(t,i,n),decode:t=>((t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let o=t.length;for(;"="===t[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let h=0;h<o;++h){const e=i[t[h]];if(void 0===e)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|e,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,i,n,e)})}},function(t,e,r){t.exports={encode:r(472),decode:r(473),encodingLength:r(474)}},function(t,e,r){"use strict";r.d(e,"b",(function(){return lr})),r.d(e,"c",(function(){return he})),r.d(e,"a",(function(){return Xe}));var n={};r.r(n),r.d(n,"sign",(function(){return z})),r.d(n,"nodeId",(function(){return H}));var i=r(190),o=r.n(i),s=r(17),a=r(131),c=r(25),u=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const h={name:"AES-GCM",length:128};var l=r(24),f=r(29);function d(t){if("string"===typeof t){const e=t.replace(/^0x/i,"");return Object(l.fromString)(e,"base16")}return t}const p=t=>Object(f.toString)(t,"base16"),m=t=>Object(f.toString)(t,"utf8"),y=t=>Object(l.fromString)(t,"utf8");var g=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};function b(t,e){let r=1,n=0,i=Promise.resolve(new Uint8Array);for(;n<e;){const e=new Uint8Array([r>>24,r>>16,r>>8,r]),o=Object(c.concat)([e,t],e.length+t.length),s=N(o);i=i.then((t=>s.then((e=>{const r=new Uint8Array(e);return Object(c.concat)([t,r],t.length+r.length)})))),n+=32,r+=1}return i}function v(t,e){if(32!==t.length)throw new Error("Bad private key, it should be 32 bytes but it's actually ".concat(t.length," bytes long"));if(65!==e.length)throw new Error("Bad public key, it should be 65 bytes but it's actually ".concat(e.length," bytes long"));if(4!==e[0])throw new Error("Bad public key, a valid public key would begin with 4");{const r=s.getSharedSecret(t,e,!0);return new Uint8Array(d(r).slice(1))}}function w(t,e){return g(this,void 0,void 0,(function*(){const r=P(32),n=yield v(r,t),i=yield b(n,32),o=P(16),a=i.slice(0,16),u=yield(h=o,l=a,f=e,k().importKey("raw",l,"AES-CTR",!1,["encrypt"]).then((t=>k().encrypt({name:"AES-CTR",counter:h,length:128},t,f))).then((t=>new Uint8Array(t))));var h,l,f;const d=Object(c.concat)([o,u],o.length+u.length),p=yield N(i.slice(16)),m=yield function(t,e){const r={name:"HMAC",hash:{name:"SHA-256"}};return k().importKey("raw",t,r,!1,["sign"]).then((t=>k().sign(r,t,e))).then((t=>new Uint8Array(t)))}(p,d),y=s.getPublicKey(r,!1);return Object(c.concat)([y,d,m],y.length+d.length+m.length)}))}function _(t,e){return g(this,void 0,void 0,(function*(){if(e.length<=113)throw new Error("Invalid Ciphertext. Data is too small. It should ba at least ".concat(113," bytes"));if(4!==e[0])throw new Error("Not a valid ciphertext. It should begin with 4 but actually begin with ".concat(e[0]));{const o=e.slice(0,65),s=e.length-113,a=e.slice(65,81),c=e.slice(65,81+s),u=c.slice(16),h=e.slice(81+s),l=v(t,o),f=yield b(l,32),[d,p]=yield N(f.slice(16)).then((t=>[f.slice(0,16),t]));if(!(yield function(t,e,r){const n={name:"HMAC",hash:{name:"SHA-256"}};return k().importKey("raw",t,n,!1,["verify"]).then((t=>k().verify(n,t,r,e)))}(p,c,h)))throw new Error("Incorrect MAC");return r=a,n=d,i=u,k().importKey("raw",n,"AES-CTR",!1,["decrypt"]).then((t=>k().decrypt({name:"AES-CTR",counter:r,length:128},t,i))).then((t=>new Uint8Array(t)))}var r,n,i}))}var S=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};function E(t,e){return S(this,void 0,void 0,(function*(){let r=new Uint8Array([0]);r=function(t,e){const r=T(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e.length,!0),n=n.slice(0,r),(t=Object(c.concat)([t,n]))[0]|=r,t}(r,t),r=Object(c.concat)([r,t]);let n=1+T(t)+t.length;e&&(n+=65);const i=256-n%256,o=P(i);if(!function(t,e){if(t.length!==e)return!1;return e<=3||-1!==t.findIndex((t=>0!==t))}(o,i))throw new Error("failed to generate random padding of size "+i);let a;if(r=Object(c.concat)([r,o]),e){r[0]|=4;const t=D(r),n=yield function(t,e){return C(this,void 0,void 0,(function*(){const[r,n]=yield s.sign(t,e,{recovered:!0,der:!1});return Object(c.concat)([r,[n]],r.length+1)}))}(t,e);r=Object(c.concat)([r,n]),a={signature:n,publicKey:s.getPublicKey(e,!1)}}return{payload:r,sig:a}}))}function A(t){const e=function(t){return 3&new DataView(t.buffer).getUint8(0)}(t);if(0===e)return;const r=function(t,e){let r=t.slice(1,1+e);e<4&&(r=Object(c.concat)([r,new Uint8Array(4-e)],4));return new DataView(r.buffer).getInt32(0,!0)}(t,e),n=1+e,i=t.slice(n,n+r),o=function(t){return 4==(4&new DataView(t.buffer).getUint8(0))}(t);let a;if(o){const e=function(t){return t.slice(t.length-65,t.length)}(t),r=function(t,e){if(e)return D(t.slice(0,t.length-65));return D(t)}(t,o),n=function(t,e){const r=new DataView(e.slice(64).buffer).getUint8(0),n=s.Signature.fromCompact(e.slice(0,64));return s.recoverPublicKey(t,n,r,!1)}(r,e);a={signature:e,publicKey:n}}return{payload:i,sig:a}}function M(t,e){return S(this,void 0,void 0,(function*(){return _(e,t)}))}function I(t,e){return S(this,void 0,void 0,(function*(){const r=P(12),n=yield function(t,e,r){return u(this,void 0,void 0,(function*(){return k().importKey("raw",e,h,!1,["encrypt"]).then((e=>k().encrypt(Object.assign({iv:t},h),e,r))).then((t=>new Uint8Array(t)))}))}(r,d(e),t);return Object(c.concat)([n,r])}))}function R(t,e){return S(this,void 0,void 0,(function*(){const r=t.length-12,n=t.slice(0,r);return function(t,e,r){return u(this,void 0,void 0,(function*(){return k().importKey("raw",e,h,!1,["decrypt"]).then((e=>k().decrypt(Object.assign({iv:t},h),e,r))).then((t=>new Uint8Array(t)))}))}(t.slice(r),d(e),n)}))}function T(t){let e=1;for(let r=t.length;r>=256;r/=256)e++;return e}var C=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const O={node:o.a,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0};function k(){if(O.web)return O.web.subtle;if(O.node)return O.node.webcrypto.subtle;throw new Error("The environment doesn't have Crypto Subtle API (if in the browser, be sure to use to be in a secure context, ie, https)")}const P=s.utils.randomBytes,N=s.utils.sha256;s.getPublicKey;function D(t){return new Uint8Array(a.keccak256.arrayBuffer(t))}function B(t){64===t.length&&(t=Object(c.concat)([[4],t],65));return s.Point.fromHex(t).toRawBytes(!0)}function x(t,e,r){try{const n=s.Signature.fromCompact(t.slice(0,64));return s.verify(n,e,r)}catch(n){return!1}}var L=r(42),U=r(11);var j;!function(t){t.Prod="prod",t.Test="test"}(j||(j={}));const K={fleets:{"wakuv2.prod":{"waku-websocket":{"node-01.ac-cn-hongkong-c.wakuv2.prod":"/dns4/node-01.ac-cn-hongkong-c.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAm4v86W3bmT1BiH6oSPzcsSr24iDQpSN5Qa992BCjjwgrD","node-01.do-ams3.wakuv2.prod":"/dns4/node-01.do-ams3.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAmL5okWopX7NqZWBUKVqW8iUxCEmd5GMHLVPwCgzYzQv3e","node-01.gc-us-central1-a.wakuv2.prod":"/dns4/node-01.gc-us-central1-a.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAmVkKntsECaYfefR1V2yCR79CegLATuTPE6B9TxgxBiiiA"}},"wakuv2.test":{"waku-websocket":{"node-01.ac-cn-hongkong-c.wakuv2.test":"/dns4/node-01.ac-cn-hongkong-c.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAkvWiyFsgRhuJEb9JfjYxEkoHLgnUQmr1N5mKWnYjxYRVm","node-01.do-ams3.wakuv2.test":"/dns4/node-01.do-ams3.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAmPLe7Mzm8TsYUubgCAW1aJoeFScxrLj8ppHFivPo97bUZ","node-01.gc-us-central1-a.wakuv2.test":"/dns4/node-01.gc-us-central1-a.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAmJb2e28qLXxT5kZxVUUoJt72EMzNGXB47Rxx5hw3q4YjS"}}}};var F=r(5),q=r.n(F),V=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};function z(t,e){return V(this,void 0,void 0,(function*(){return s.sign(D(e),t,{der:!1})}))}function H(t){const e=s.Point.fromHex(t).toRawBytes(!1);return p(D(e.slice(1)))}const G="Invalid record id";var W,J=r(41),Y=r(48),Z=r.n(Y),X=r(58),Q=r(104),$=r(103),tt=r(23),et=r.n(tt);!function(t){t[t.rsa=0]="rsa",t[t.ed25519=1]="ed25519",t[t.secp256k1=2]="secp256k1"}(W||(W={}));var rt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class nt{constructor(t,e){let r=e;if(r&&(r=B(r)),(this._privateKey=t)&&!this.privateKeyVerify())throw new Error("Invalid private key");if((this._publicKey=r)&&!this.publicKeyVerify())throw new Error("Invalid public key");this.type=W.secp256k1}static generate(){return rt(this,void 0,void 0,(function*(){const t=P(32),e=s.getPublicKey(t);return new nt(t,e)}))}privateKeyVerify(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._privateKey;return!t||s.utils.isValidPrivateKey(t)}publicKeyVerify(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._publicKey;if(t)try{return s.Point.fromHex(t),!0}catch(e){return!1}return!0}get privateKey(){if(!this._privateKey)throw new Error;return this._privateKey}get publicKey(){if(!this._publicKey)throw new Error;return this._publicKey}hasPrivateKey(){return!!this._privateKey}}var it=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const{keysPBM:ot,supportedKeys:st}=Q.keys,at="Keypair type not implemented";function ct(t,e,r){if(t===W.secp256k1)return new nt(e,r);throw new Error(at)}var ut=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const ht=q()("waku:enr");class lt extends Map{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(1),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(Object.entries(t)),this.seq=e,this.signature=r}static create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(1),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ut(this,void 0,void 0,(function*(){const n=new lt(t,e,r);try{const t=n.publicKey;if(t){const e=ct(n.keypairType,void 0,t);n.peerId=yield function(t){return it(this,void 0,void 0,(function*(){if(t.type===W.secp256k1){const e=t.hasPrivateKey()?new st.secp256k1.Secp256k1PrivateKey(t.privateKey,t.publicKey):void 0,r=new st.secp256k1.Secp256k1PublicKey(t.publicKey),n=yield $.identity.digest(r.bytes);return new et.a(n.bytes,e,r)}throw new Error(at)}))}(e)}}catch(i){ht("Could not calculate peer id for ENR",i)}return n}))}static createV4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return 33!==t.length&&(t=B(t)),lt.create(Object.assign(Object.assign({},e),{id:y("v4"),secp256k1:t}))}static createFromPeerId(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=function(t){const e=ot.PublicKey.decode(t.pubKey.bytes);return ct(e.Type,t.privKey?t.privKey.marshal():void 0,e.Data)}(t);if(r.type===W.secp256k1)return lt.createV4(r.publicKey,e);throw new Error}static decodeFromValues(t){return ut(this,void 0,void 0,(function*(){if(!Array.isArray(t))throw new Error("Decoded ENR must be an array");if(t.length%2!==0)throw new Error("Decoded ENR must have an even number of elements");const[e,r,...n]=t;if(!e||Array.isArray(e))throw new Error("Decoded ENR invalid signature: must be a byte array");if(!r||Array.isArray(r))throw new Error("Decoded ENR invalid sequence number: must be a byte array");const i={};for(let t=0;t<n.length;t+=2)try{i[m(n[t])]=n[t+1]}catch(c){ht("Failed to decode ENR key to UTF-8, skipping it",n[t],c)}const o="0x"+(r.length?p(r):"00"),s=yield lt.create(i,BigInt(o),e),a=d(J.encode([r,...n]));if(!s.verify(a,e))throw new Error("Unable to verify ENR signature");return s}))}static decode(t){const e=J.decode(t).map(d);return lt.decodeFromValues(e)}static decodeTxt(t){if(!t.startsWith(this.RECORD_PREFIX))throw new Error("\"string encoded ENR must start with '".concat(this.RECORD_PREFIX,"'"));return lt.decode(Object(l.fromString)(t.slice(4),"base64url"))}set(t,e){return this.signature=null,this.seq++,super.set(t,e)}get id(){const t=this.get("id");if(!t)throw new Error("id not found.");return m(t)}get keypairType(){if("v4"===this.id)return W.secp256k1;throw new Error(G)}get publicKey(){if("v4"===this.id)return this.get("secp256k1");throw new Error(G)}get keypair(){if(this.publicKey){const t=this.publicKey;return ct(this.keypairType,void 0,t)}}get nodeId(){if("v4"===this.id)return this.publicKey?H(this.publicKey):void 0;throw new Error(G)}get ip(){const t=this.get("ip");return t?Z.a.toString(U.protocols.names.ip4.code,t):void 0}set ip(t){t?this.set("ip",Z.a.toBytes(U.protocols.names.ip4.code,t)):this.delete("ip")}get tcp(){const t=this.get("tcp");return t?Number(Z.a.toString(U.protocols.names.tcp.code,t)):void 0}set tcp(t){void 0===t?this.delete("tcp"):this.set("tcp",Z.a.toBytes(U.protocols.names.tcp.code,t))}get udp(){const t=this.get("udp");return t?Number(Z.a.toString(U.protocols.names.udp.code,t)):void 0}set udp(t){void 0===t?this.delete("udp"):this.set("udp",Z.a.toBytes(U.protocols.names.udp.code,t))}get ip6(){const t=this.get("ip6");return t?Z.a.toString(U.protocols.names.ip6.code,t):void 0}set ip6(t){t?this.set("ip6",Z.a.toBytes(U.protocols.names.ip6.code,t)):this.delete("ip6")}get tcp6(){const t=this.get("tcp6");return t?Number(Z.a.toString(U.protocols.names.tcp.code,t)):void 0}set tcp6(t){void 0===t?this.delete("tcp6"):this.set("tcp6",Z.a.toBytes(U.protocols.names.tcp.code,t))}get udp6(){const t=this.get("udp6");return t?Number(Z.a.toString(U.protocols.names.udp.code,t)):void 0}set udp6(t){void 0===t?this.delete("udp6"):this.set("udp6",Z.a.toBytes(U.protocols.names.udp.code,t))}get multiaddrs(){const t=this.get("multiaddrs");if(t)return function(t){const e=[];let r=0;for(;r<t.length;){const n=new DataView(t.buffer,r,2).getUint16(0);r+=2;const i=t.slice(r,r+n);r+=n;const o=new U.Multiaddr(i);e.push(o)}return e}(t)}set multiaddrs(t){if(void 0===t)this.delete("multiaddrs");else{const e=function(t){const e=t.reduce(((t,e)=>t+2+e.bytes.length),0),r=new Uint8Array(e),n=new DataView(r.buffer);let i=0;return t.forEach((t=>{if(t.getPeerId())throw new Error("`multiaddr` field MUST not contain peer id");n.setUint16(i,t.bytes.length),i+=2,r.set(t.bytes,i),i+=t.bytes.length})),r}(t);this.set("multiaddrs",e)}}getLocationMultiaddr(t){if("udp"===t)return this.getLocationMultiaddr("udp4")||this.getLocationMultiaddr("udp6");if("tcp"===t)return this.getLocationMultiaddr("tcp4")||this.getLocationMultiaddr("tcp6");const e=t.endsWith("6"),r=this.get(e?"ip6":"ip");if(!r)return;const n=t.startsWith("udp"),i=t.startsWith("tcp");let o,s;if(n)o="udp",s=e?this.get("udp6"):this.get("udp");else{if(!i)return;o="tcp",s=e?this.get("tcp6"):this.get("tcp")}if(!s)return;const a=U.protocols.names[e?"ip6":"ip4"],c=a.size/8,u=U.protocols.names[o],h=Object(X.encode)(u.code),l=new Uint8Array(3+c+h.length);return l[0]=a.code,l.set(r,1),l.set(h,1+c),l.set(s,1+c+h.length),new U.Multiaddr(l)}setLocationMultiaddr(t){const e=t.protoNames();if(2!==e.length&&"udp"!==e[1]&&"tcp"!==e[1])throw new Error("Invalid multiaddr");const r=t.tuples();if(!r[0][1]||!r[1][1])throw new Error("Invalid multiaddr");4===r[0][0]?(this.set("ip",r[0][1]),this.set(e[1],r[1][1])):(this.set("ip6",r[0][1]),this.set(e[1]+"6",r[1][1]))}getFullMultiaddr(t){if(this.peerId){const e=this.getLocationMultiaddr(t);if(e)return e.encapsulate("/p2p/".concat(this.peerId.toB58String()))}}getFullMultiaddrs(){if(this.peerId&&this.multiaddrs){const t=this.peerId;return this.multiaddrs.map((e=>e.encapsulate("/p2p/".concat(t.toB58String()))))}return[]}get waku2(){const t=this.get("waku2");if(t)return function(t){const e={relay:!1,store:!1,filter:!1,lightPush:!1};return t%2&&(e.relay=!0),(t>>=1)%2&&(e.store=!0),(t>>=1)%2&&(e.filter=!0),(t>>=1)%2&&(e.lightPush=!0),e}(t[0])}set waku2(t){if(void 0===t)this.delete("waku2");else{const e=function(t){let e=0;return t.lightPush&&(e+=1),e<<=1,t.filter&&(e+=1),e<<=1,t.store&&(e+=1),e<<=1,t.relay&&(e+=1),e}(t);this.set("waku2",new Uint8Array([e]))}}verify(t,e){if(!this.get("id")||"v4"!==this.id)throw new Error(G);if(!this.publicKey)throw new Error("Failed to verify ENR: No public key");return x(e,D(t),this.publicKey)}sign(t,e){return ut(this,void 0,void 0,(function*(){if("v4"!==this.id)throw new Error(G);return this.signature=yield z(e,t),this.signature}))}encodeToValues(t){return ut(this,void 0,void 0,(function*(){const e=Array.from(this.keys()).sort(((t,e)=>t.localeCompare(e))).map((t=>[t,this.get(t)])).map((t=>{let[e,r]=t;return[y(e),r]})).flat();if(e.unshift(new Uint8Array([Number(this.seq)])),t)e.unshift(yield this.sign(d(J.encode(e)),t));else{if(!this.signature)throw new Error("No valid signature found");e.unshift(this.signature)}return e}))}encode(t){return ut(this,void 0,void 0,(function*(){const e=d(J.encode(yield this.encodeToValues(t)));if(e.length>=300)throw new Error("ENR must be less than 300 bytes");return e}))}encodeTxt(t){return ut(this,void 0,void 0,(function*(){return lt.RECORD_PREFIX+Object(f.toString)(yield this.encode(t),"base64url")}))}}lt.RECORD_PREFIX="enr:";var ft=r(198),dt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const{cloudflare:pt,google:mt,opendns:yt}=ft.endpoints;class gt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[pt,mt,yt];this.endpoints=t}resolveTXT(t){return dt(this,void 0,void 0,(function*(){const e=(yield Object(ft.query)({questions:[{type:"TXT",name:t}]})).answers.map((t=>t.data)),r=[];return e.forEach((t=>{"string"===typeof t?r.push(t):Array.isArray(t)?t.forEach((t=>{"string"===typeof t?r.push(t):r.push(m(t))})):r.push(m(t))})),r}))}}var bt=r(346);class vt{static parseAndVerifyRoot(t,e){if(!t.startsWith(this.ROOT_PREFIX))throw new Error("ENRTree root entry must start with '".concat(this.ROOT_PREFIX,"'"));const r=vt.parseRootValues(t),n=bt.decode.asBytes(e),i=t.split(" sig")[0],o=y(i);if(!x(Object(l.fromString)(r.signature,"base64url").slice(0,64),D(o),new Uint8Array(n)))throw new Error("Unable to verify ENRTree root signature");return r.eRoot}static parseRootValues(t){const e=t.match(/^enrtree-root:v1 e=([^ ]+) l=([^ ]+) seq=(\d+) sig=([^ ]+)$/);if(!Array.isArray(e))throw new Error("Could not parse ENRTree root entry");e.shift();const[r,n,i,o]=e;if(!r)throw new Error("Could not parse 'e' value from ENRTree root entry");if(!n)throw new Error("Could not parse 'l' value from ENRTree root entry");if(!i)throw new Error("Could not parse 'seq' value from ENRTree root entry");if(!o)throw new Error("Could not parse 'sig' value from ENRTree root entry");return{eRoot:r,lRoot:n,seq:Number(i),signature:o}}static parseTree(t){if(!t.startsWith(this.TREE_PREFIX))throw new Error("ENRTree tree entry must start with '".concat(this.TREE_PREFIX,"'"));const e=t.match(/^enrtree:\/\/([^@]+)@(.+)$/);if(!Array.isArray(e))throw new Error("Could not parse ENRTree tree entry");e.shift();const[r,n]=e;if(!r)throw new Error("Could not parse public key from ENRTree tree entry");if(!n)throw new Error("Could not parse domain from ENRTree tree entry");return{publicKey:r,domain:n}}static parseBranch(t){if(!t.startsWith(this.BRANCH_PREFIX))throw new Error("ENRTree branch entry must start with '".concat(this.BRANCH_PREFIX,"'"));return t.split(this.BRANCH_PREFIX)[1].split(",")}}vt.RECORD_PREFIX=lt.RECORD_PREFIX,vt.TREE_PREFIX="enrtree:",vt.BRANCH_PREFIX="enrtree-branch:",vt.ROOT_PREFIX="enrtree-root:";var wt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const _t=Object(F.debug)("waku:discovery:fetch_nodes");function St(t,e){return e.relay>=t.relay&&e.store>=t.store&&e.filter>=t.filter&&e.lightPush>=t.lightPush}function Et(t,e){if(!t.nodeId)return!1;for(const r of e)if(t.nodeId===r.nodeId)return!1;return!0}function At(t,e){t.relay&&(e.relay+=1),t.store&&(e.store+=1),t.filter&&(e.filter+=1),t.lightPush&&(e.lightPush+=1)}function Mt(t,e,r){if(St(e,r))throw"Internal Error: Waku2 wanted capabilities are already fulfilled";const n=function(t,e){return{relay:e.relay<t.relay,store:e.store<t.store,filter:e.filter<t.filter,lightPush:e.lightPush<t.lightPush}}(e,r);return n.relay&&t.relay||n.store&&t.store||n.filter&&t.filter||n.lightPush&&t.lightPush}var It=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const Rt=Object(F.debug)("waku:discovery:dns");class Tt{constructor(t){this._errorTolerance=10,this._DNSTreeCache={},this.dns=t}static dnsOverHttp(t){const e=new gt(t);return new Tt(e)}getPeers(t,e){return It(this,void 0,void 0,(function*(){const r=Math.floor(Math.random()*t.length),{publicKey:n,domain:i}=vt.parseTree(t[r]),o={domain:i,publicKey:n,visits:{}},s=yield function(t,e,r){var n,i,o,s;return wt(this,void 0,void 0,(function*(){const a={relay:null!==(n=t.relay)&&void 0!==n?n:0,store:null!==(i=t.store)&&void 0!==i?i:0,filter:null!==(o=t.filter)&&void 0!==o?o:0,lightPush:null!==(s=t.lightPush)&&void 0!==s?s:0},c=a.relay+a.store+a.filter+a.lightPush,u={relay:0,store:0,filter:0,lightPush:0};let h=0;const l=[];for(;!St(a,u)&&h<c+e;){const t=yield r();t&&Et(t,l)&&(t.waku2&&Mt(t.waku2,a,u)&&(At(t.waku2,u),l.push(t)),_t("got new peer candidate from DNS address=".concat(t.nodeId,"@").concat(t.ip))),h++}return l}))}(e,this._errorTolerance,(()=>this._search(i,o)));return Rt("retrieved peers: ",s),s}))}_search(t,e){return It(this,void 0,void 0,(function*(){try{const n=yield this._getTXTRecord(t,e);let i,o;e.visits[t]=!0;const s=function(t){return t.startsWith(vt.ROOT_PREFIX)?vt.ROOT_PREFIX:t.startsWith(vt.BRANCH_PREFIX)?vt.BRANCH_PREFIX:t.startsWith(vt.RECORD_PREFIX)?vt.RECORD_PREFIX:""}(n);try{switch(s){case vt.ROOT_PREFIX:return i=vt.parseAndVerifyRoot(n,e.publicKey),yield this._search(i,e);case vt.BRANCH_PREFIX:return o=vt.parseBranch(n),i=function(t,e){const r={};for(const[i,o]of t.entries())e.visits[o]&&(r[i]=!0);if(Object.keys(r).length===t.length)throw new Error("Unresolvable circular path detected");let n;do{n=Math.floor(Math.random()*t.length)}while(r[n]);return t[n]}(o,e),yield this._search(i,e);case vt.RECORD_PREFIX:return lt.decodeTxt(n);default:return null}}catch(r){return Rt("Failed to search DNS tree ".concat(s," at subdomain ").concat(t,": ").concat(r)),null}}catch(r){return Rt("Failed to retrieve TXT record at subdomain ".concat(t,": ").concat(r)),null}}))}_getTXTRecord(t,e){return It(this,void 0,void 0,(function*(){if(this._DNSTreeCache[t])return this._DNSTreeCache[t];const r=t!==e.domain?"".concat(t,".").concat(e.domain):e.domain,n=yield this.dns.resolveTXT(r);if(!n.length)throw new Error("Received empty result array while fetching TXT record");if(!n[0].length)throw new Error("Received empty TXT record");const i=n.join("");return this._DNSTreeCache[t]=i,i}))}}var Ct=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const Ot=q()("waku:discovery:bootstrap");class kt{constructor(t){var e;const r=null!==(e=t.maxPeers)&&void 0!==e?e:kt.DefaultMaxPeers;if(t.default)Ot("Use hosted list of peers."),this.getBootstrapPeers=()=>Promise.resolve(function(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.Prod,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(r<=0)return[];switch(e){case j.Prod:t=K.fleets["wakuv2.prod"]["waku-websocket"];break;case j.Test:t=K.fleets["wakuv2.test"]["waku-websocket"];break;default:t=K.fleets["wakuv2.prod"]["waku-websocket"]}return t=Object.values(t),t=t.map((t=>new U.Multiaddr(t))),Pt(t,r)}(void 0,r));else if(void 0!==t.peers&&t.peers.length>0){const e=t.peers.map((t=>"string"===typeof t?new U.Multiaddr(t):t)),n=Pt(e,r);Ot("Use provided list of peers (reduced to maxPeers)",e.map((t=>t.toString()))),this.getBootstrapPeers=()=>Promise.resolve(n)}else if("function"===typeof t.getPeers){Ot("Bootstrap: Use provided getPeers function.");const e=t.getPeers;this.getBootstrapPeers=()=>Ct(this,void 0,void 0,(function*(){return Pt(yield e(),r).map((t=>new U.Multiaddr(t)))}))}else if(t.enrUrl){const e=t.wantedNodeCapabilityCount;if(!e)throw"`wantedNodeCapabilityCount` must be defined when using `enrUrl`";const r=t.enrUrl;Ot("Use provided EIP-1459 ENR Tree URL.");const n=Tt.dnsOverHttp();this.getBootstrapPeers=()=>Ct(this,void 0,void 0,(function*(){const t=yield n.getPeers([r],e);return Ot("Found ".concat(t.length," peers")),t.map((t=>t.getFullMultiaddrs())).flat()}))}else Ot("No bootstrap method specified, no peer will be returned"),this.getBootstrapPeers=void 0}}function Pt(t,e){return t.length<=e?t:Object(L.shuffle)(t).slice(0,e)}kt.DefaultMaxPeers=1;var Nt=r(347),Dt=r(348),Bt=r.n(Dt),xt=r(199),Lt=r.n(xt),Ut=r(349),jt=r.n(Ut),Kt=r(200),Ft=r.n(Kt),qt=r(193),Vt=r.n(qt),zt=r(192),Ht=r.n(zt),Gt=r(40),Wt=r.n(Gt),Jt=r(31),Yt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},Zt=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"===typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}},Xt=function(t){return this instanceof Xt?(this.v=t,this):new Xt(t)},Qt=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=i[t](e)).value instanceof Xt?Promise.resolve(r.value.v).then(c,u):h(o[0][2],r)}catch(n){h(o[0][3],n)}var r}function c(t){a("next",t)}function u(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}};function $t(t){var e,r,n,i;return Yt(this,void 0,void 0,(function*(){const o=[];try{for(e=Zt(t);!(r=yield e.next()).done;){const t=r.value;o.push(t)}}catch(s){n={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}if(0===o.length)return;return o[Math.round(Math.random()*(o.length-1))]}))}function te(t,e){return Qt(this,arguments,(function*(){var r,n;try{for(var i,o=Zt(t.peerStore.getPeers());!(i=yield Xt(o.next())).done;){const t=i.value;let r=!1;for(let n=0;n<e.length;n++)if(t.protocols.includes(e[n])){r=!0;break}r&&(yield yield Xt(t))}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&(yield Xt(n.call(o)))}finally{if(r)throw r.error}}}))}var ee=r(6),re=r.n(ee),ne=r(2),ie=r.n(ne),oe=r(26),se=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const ae=q()("waku:message");var ce,ue;!function(t){t.Asymmetric="asymmetric",t.Symmetric="symmetric"}(ce||(ce={}));class he{constructor(t,e,r){this.proto=t,this._signaturePublicKey=e,this._signature=r}static fromUtf8String(t,e,r){return se(this,void 0,void 0,(function*(){const n=y(t);return he.fromBytes(n,e,r)}))}static fromBytes(t,e,r){return se(this,void 0,void 0,(function*(){const{timestamp:n,encPublicKey:i,symKey:o,sigPrivKey:s}=Object.assign({timestamp:new Date},r||{});let a,c=t,u=0;if(i&&o)throw"Pass either `encPublicKey` or `symKey`, not both.";if(i){const t=yield E(c,s);c=yield function(t,e){return S(this,void 0,void 0,(function*(){return w(d(e),t)}))}(t.payload,i),a=t.sig,u=1}else if(o){const t=yield E(c,s);c=yield I(t.payload,o),a=t.sig,u=1}return new he({payload:c,timestampDeprecated:n.valueOf()/1e3,timestamp:re.a.fromNumber(n.valueOf()).mul(1e6),version:u,contentTopic:e},null===a||void 0===a?void 0:a.publicKey,null===a||void 0===a?void 0:a.signature)}))}static decode(t,e){return se(this,void 0,void 0,(function*(){const r=oe.a.decode(ne.Reader.create(t));return he.decodeProto(r,e)}))}static decodeProto(t,e){var r,n;return se(this,void 0,void 0,(function*(){if(void 0===t.payload)return void ae("Payload is undefined");const i=t.payload;let o,s;if(1===t.version&&t.payload){if(void 0===e)return void ae("Payload is encrypted but no private keys have been provided.");const a=t=>!!t,c=(yield Promise.all(e.map((e=>{let{key:r,method:n,contentTopics:o}=e;return se(this,void 0,void 0,(function*(){if(!o||t.contentTopic&&o.includes(t.contentTopic))switch(n){case ce.Asymmetric:try{return yield M(i,r)}catch(e){return void ae("Failed to decrypt message using asymmetric encryption despite decryption method being specified",e)}case ce.Symmetric:try{return yield R(i,r)}catch(e){return void ae("Failed to decrypt message using asymmetric encryption despite decryption method being specified",e)}default:try{return yield R(i,r)}catch(e){ae("Failed to decrypt message using symmetric encryption",e);try{return yield M(i,r)}catch(e){return void ae("Failed to decrypt message using asymmetric encryption",e)}}}}))})))).filter(a);if(0===c.length)return void ae("Failed to decrypt payload.");const u=c[0],h=yield A(u);if(!h)return void ae("Failed to decode payload.");Object.assign(t,{payload:h.payload}),o=null===(r=h.sig)||void 0===r?void 0:r.publicKey,s=null===(n=h.sig)||void 0===n?void 0:n.signature}return new he(t,o,s)}))}encode(){return oe.a.encode(this.proto).finish()}get payloadAsUtf8(){if(!this.payload)return"";try{return m(this.payload)}catch(t){return ae("Could not decode byte as UTF-8",t),""}}get payload(){if(this.proto.payload)return new Uint8Array(this.proto.payload)}get contentTopic(){return this.proto.contentTopic}get version(){return this.proto.version}get timestamp(){try{if(this.proto.timestamp){const t=this.proto.timestamp.div(1e6).toNumber();return new Date(t)}if(this.proto.timestampDeprecated)return new Date(1e3*this.proto.timestampDeprecated)}catch(t){return}}get signaturePublicKey(){return this._signaturePublicKey}get signature(){return this._signature}}var le=new Uint8Array(16);function fe(){if(!ue&&!(ue="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ue(le)}var de=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var pe=function(t){return"string"===typeof t&&de.test(t)},me=[],ye=0;ye<256;++ye)me.push((ye+256).toString(16).substr(1));var ge=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(me[t[e+0]]+me[t[e+1]]+me[t[e+2]]+me[t[e+3]]+"-"+me[t[e+4]]+me[t[e+5]]+"-"+me[t[e+6]]+me[t[e+7]]+"-"+me[t[e+8]]+me[t[e+9]]+"-"+me[t[e+10]]+me[t[e+11]]+me[t[e+12]]+me[t[e+13]]+me[t[e+14]]+me[t[e+15]]).toLowerCase();if(!pe(r))throw TypeError("Stringified UUID is invalid");return r};var be=function(t,e,r){var n=(t=t||{}).random||(t.rng||fe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return ge(n)};const ve={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.a.Writer.create();!0===t.subscribe&&e.uint32(8).bool(t.subscribe),""!==t.topic&&e.uint32(18).string(t.topic);for(const r of t.contentFilters)we.encode(r,e.uint32(26).fork()).ldelim();return e},decode(t,e){const r=t instanceof ie.a.Reader?t:new ie.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={subscribe:!1,topic:"",contentFilters:[]};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.subscribe=r.bool();break;case 2:i.topic=r.string();break;case 3:i.contentFilters.push(we.decode(r,r.uint32()));break;default:r.skipType(7&t)}}return i},fromJSON:t=>({subscribe:!!Ee(t.subscribe)&&Boolean(t.subscribe),topic:Ee(t.topic)?String(t.topic):"",contentFilters:Array.isArray(null===t||void 0===t?void 0:t.contentFilters)?t.contentFilters.map((t=>we.fromJSON(t))):[]}),toJSON(t){const e={};return void 0!==t.subscribe&&(e.subscribe=t.subscribe),void 0!==t.topic&&(e.topic=t.topic),t.contentFilters?e.contentFilters=t.contentFilters.map((t=>t?we.toJSON(t):void 0)):e.contentFilters=[],e},fromPartial(t){var e,r,n;const i={subscribe:!1,topic:"",contentFilters:[]};return i.subscribe=null!==(e=t.subscribe)&&void 0!==e&&e,i.topic=null!==(r=t.topic)&&void 0!==r?r:"",i.contentFilters=(null===(n=t.contentFilters)||void 0===n?void 0:n.map((t=>we.fromPartial(t))))||[],i}};const we={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.a.Writer.create();return""!==t.contentTopic&&e.uint32(10).string(t.contentTopic),e},decode(t,e){const r=t instanceof ie.a.Reader?t:new ie.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={contentTopic:""};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.contentTopic=r.string();else r.skipType(7&t)}return i},fromJSON:t=>({contentTopic:Ee(t.contentTopic)?String(t.contentTopic):""}),toJSON(t){const e={};return void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),e},fromPartial(t){var e;const r={contentTopic:""};return r.contentTopic=null!==(e=t.contentTopic)&&void 0!==e?e:"",r}};const _e={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.a.Writer.create();for(const r of t.messages)oe.a.encode(r,e.uint32(10).fork()).ldelim();return e},decode(t,e){const r=t instanceof ie.a.Reader?t:new ie.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={messages:[]};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.messages.push(oe.a.decode(r,r.uint32()));else r.skipType(7&t)}return i},fromJSON:t=>({messages:Array.isArray(null===t||void 0===t?void 0:t.messages)?t.messages.map((t=>oe.a.fromJSON(t))):[]}),toJSON(t){const e={};return t.messages?e.messages=t.messages.map((t=>t?oe.a.toJSON(t):void 0)):e.messages=[],e},fromPartial(t){var e;const r={messages:[]};return r.messages=(null===(e=t.messages)||void 0===e?void 0:e.map((t=>oe.a.fromPartial(t))))||[],r}};const Se={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.a.Writer.create();return""!==t.requestId&&e.uint32(10).string(t.requestId),void 0!==t.request&&ve.encode(t.request,e.uint32(18).fork()).ldelim(),void 0!==t.push&&_e.encode(t.push,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof ie.a.Reader?t:new ie.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={requestId:"",request:void 0,push:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.requestId=r.string();break;case 2:i.request=ve.decode(r,r.uint32());break;case 3:i.push=_e.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({requestId:Ee(t.requestId)?String(t.requestId):"",request:Ee(t.request)?ve.fromJSON(t.request):void 0,push:Ee(t.push)?_e.fromJSON(t.push):void 0}),toJSON(t){const e={};return void 0!==t.requestId&&(e.requestId=t.requestId),void 0!==t.request&&(e.request=t.request?ve.toJSON(t.request):void 0),void 0!==t.push&&(e.push=t.push?_e.toJSON(t.push):void 0),e},fromPartial(t){var e;const r={requestId:"",request:void 0,push:void 0};return r.requestId=null!==(e=t.requestId)&&void 0!==e?e:"",r.request=void 0!==t.request&&null!==t.request?ve.fromPartial(t.request):void 0,r.push=void 0!==t.push&&null!==t.push?_e.fromPartial(t.push):void 0,r}};function Ee(t){return null!==t&&void 0!==t}ie.a.util.Long!==re.a&&(ie.a.util.Long=re.a,ie.a.configure());class Ae{constructor(t){this.proto=t}static createRequest(t,e,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Ae({requestId:r||be(),request:{subscribe:n,topic:t,contentFilters:e},push:void 0})}static decode(t){const e=Se.decode(ne.Reader.create(t));return new Ae(e)}encode(){return Se.encode(this.proto).finish()}get push(){return this.proto.push}get requestId(){return this.proto.requestId}}var Me=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},Ie=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"===typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}};const Re="/vac/waku/filter/2.0.0-beta1",Te=q()("waku:filter");class Ce{constructor(t){this.libp2p=t,this.subscriptions=new Map,this.decryptionKeys=new Map,this.libp2p.handle(Re,this.onRequest.bind(this))}subscribe(t,e,r){return Me(this,void 0,void 0,(function*(){const n=(null===r||void 0===r?void 0:r.pubsubTopic)||cr,i=e.map((t=>({contentTopic:t}))),o=Ae.createRequest(n,i,void 0,!0),s=yield this.getPeer(null===r||void 0===r?void 0:r.peerId),a=yield this.newStream(s);try{yield Object(Jt.pipe)([o.encode()],Wt.a.encode(),a)}catch(c){throw Te("Error subscribing to peer ",s.id.toB58String(),"for content topics",e,": ",c),c}return this.addCallback(o.requestId,t),()=>Me(this,void 0,void 0,(function*(){yield this.unsubscribe(n,i,o.requestId,s),this.removeCallback(o.requestId)}))}))}onRequest(t){let{stream:e}=t;return Me(this,void 0,void 0,(function*(){Te("Receiving message push");try{yield Object(Jt.pipe)(e.source,Wt.a.decode(),(t=>{var e,r;return Me(this,void 0,void 0,(function*(){var n,i,o,s;try{for(e=Ie(t);!(r=yield e.next()).done;){const t=r.value,e=Ae.decode(t.slice());(null===(s=null===(o=e.push)||void 0===o?void 0:o.messages)||void 0===s?void 0:s.length)&&(yield this.pushMessages(e.requestId,e.push.messages))}}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(n)throw n.error}}}))}))}catch(t){Te("Error decoding message",t)}}))}pushMessages(t,e){return Me(this,void 0,void 0,(function*(){const r=this.subscriptions.get(t);if(!r)return void Te("No callback registered for request ID ".concat(t));const n=Array.from(this.decryptionKeys).map((t=>{let[e,{method:r,contentTopics:n}]=t;return{key:e,method:r,contentTopics:n}}));for(const t of e){const e=yield he.decodeProto(t,n);e?r(e):Te("Not able to decode message")}}))}addCallback(t,e){this.subscriptions.set(t,e)}removeCallback(t){this.subscriptions.delete(t)}unsubscribe(t,e,r,n){return Me(this,void 0,void 0,(function*(){const i=Ae.createRequest(t,e,r,!1),o=yield this.newStream(n);try{yield Object(Jt.pipe)([i.encode()],Wt.a.encode(),o.sink)}catch(s){throw Te("Error unsubscribing",s),s}}))}newStream(t){return Me(this,void 0,void 0,(function*(){const e=this.libp2p.connectionManager.get(t.id);if(!e)throw new Error("Failed to get a connection to the peer");const{stream:r}=yield e.newStream(Re);return r}))}getPeer(t){return Me(this,void 0,void 0,(function*(){let e;if(t){if(e=yield this.libp2p.peerStore.get(t),!e)throw new Error("Failed to retrieve connection details for provided peer in peer store: ".concat(t.toB58String()))}else if(e=yield this.randomPeer,!e)throw new Error("Failed to find known peer that registers waku filter protocol");return e}))}addDecryptionKey(t,e){this.decryptionKeys.set(d(t),null!==e&&void 0!==e?e:{})}deleteDecryptionKey(t){this.decryptionKeys.delete(d(t))}get peers(){return te(this.libp2p,[Re])}get randomPeer(){return $t(this.peers)}}var Oe=r(135),ke=r.n(Oe);const Pe={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.a.Writer.create();return""!==t.pubSubTopic&&e.uint32(10).string(t.pubSubTopic),void 0!==t.message&&oe.a.encode(t.message,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof ie.a.Reader?t:new ie.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={pubSubTopic:"",message:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.pubSubTopic=r.string();break;case 2:i.message=oe.a.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({pubSubTopic:Be(t.pubSubTopic)?String(t.pubSubTopic):"",message:Be(t.message)?oe.a.fromJSON(t.message):void 0}),toJSON(t){const e={};return void 0!==t.pubSubTopic&&(e.pubSubTopic=t.pubSubTopic),void 0!==t.message&&(e.message=t.message?oe.a.toJSON(t.message):void 0),e},fromPartial(t){var e;const r={pubSubTopic:"",message:void 0};return r.pubSubTopic=null!==(e=t.pubSubTopic)&&void 0!==e?e:"",r.message=void 0!==t.message&&null!==t.message?oe.a.fromPartial(t.message):void 0,r}};const Ne={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.a.Writer.create();return!0===t.isSuccess&&e.uint32(8).bool(t.isSuccess),""!==t.info&&e.uint32(18).string(t.info),e},decode(t,e){const r=t instanceof ie.a.Reader?t:new ie.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={isSuccess:!1,info:""};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.isSuccess=r.bool();break;case 2:i.info=r.string();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({isSuccess:!!Be(t.isSuccess)&&Boolean(t.isSuccess),info:Be(t.info)?String(t.info):""}),toJSON(t){const e={};return void 0!==t.isSuccess&&(e.isSuccess=t.isSuccess),void 0!==t.info&&(e.info=t.info),e},fromPartial(t){var e,r;const n={isSuccess:!1,info:""};return n.isSuccess=null!==(e=t.isSuccess)&&void 0!==e&&e,n.info=null!==(r=t.info)&&void 0!==r?r:"",n}};const De={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.a.Writer.create();return""!==t.requestId&&e.uint32(10).string(t.requestId),void 0!==t.request&&Pe.encode(t.request,e.uint32(18).fork()).ldelim(),void 0!==t.response&&Ne.encode(t.response,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof ie.a.Reader?t:new ie.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={requestId:"",request:void 0,response:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.requestId=r.string();break;case 2:i.request=Pe.decode(r,r.uint32());break;case 3:i.response=Ne.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({requestId:Be(t.requestId)?String(t.requestId):"",request:Be(t.request)?Pe.fromJSON(t.request):void 0,response:Be(t.response)?Ne.fromJSON(t.response):void 0}),toJSON(t){const e={};return void 0!==t.requestId&&(e.requestId=t.requestId),void 0!==t.request&&(e.request=t.request?Pe.toJSON(t.request):void 0),void 0!==t.response&&(e.response=t.response?Ne.toJSON(t.response):void 0),e},fromPartial(t){var e;const r={requestId:"",request:void 0,response:void 0};return r.requestId=null!==(e=t.requestId)&&void 0!==e?e:"",r.request=void 0!==t.request&&null!==t.request?Pe.fromPartial(t.request):void 0,r.response=void 0!==t.response&&null!==t.response?Ne.fromPartial(t.response):void 0,r}};function Be(t){return null!==t&&void 0!==t}ie.a.util.Long!==re.a&&(ie.a.util.Long=re.a,ie.a.configure());class xe{constructor(t){this.proto=t}static createRequest(t,e){return new xe({requestId:be(),request:{message:t.proto,pubSubTopic:e},response:void 0})}static decode(t){const e=De.decode(ne.Reader.create(t));return new xe(e)}encode(){return De.encode(this.proto).finish()}get query(){return this.proto.request}get response(){return this.proto.response}}var Le=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const Ue="/vac/waku/lightpush/2.0.0-beta1";class je{constructor(t,e){this.libp2p=t,(null===e||void 0===e?void 0:e.pubSubTopic)?this.pubSubTopic=e.pubSubTopic:this.pubSubTopic=cr}push(t,e){return Le(this,void 0,void 0,(function*(){let r;if(null===e||void 0===e?void 0:e.peerId){if(r=yield this.libp2p.peerStore.get(e.peerId),!r)throw"Peer is unknown"}else r=yield this.randomPeer;if(!r)throw"No peer available";if(!r.protocols.includes(Ue))throw"Peer does not register waku light push protocol";const n=this.libp2p.connectionManager.get(r.id);if(!n)throw"Failed to get a connection to the peer";const{stream:i}=yield n.newStream(Ue);try{const r=(null===e||void 0===e?void 0:e.pubSubTopic)?e.pubSubTopic:this.pubSubTopic,n=xe.createRequest(t,r),s=yield Object(Jt.pipe)([n.encode()],Wt.a.encode(),i,Wt.a.decode(),ke.a);try{const t=xe.decode(s.slice()).response;return t||(console.log("No response in PushRPC"),null)}catch(o){console.log("Failed to decode push reply",o)}}catch(o){console.log("Failed to send waku light push request",o)}return null}))}get peers(){return te(this.libp2p,[Ue])}get randomPeer(){return $t(this.peers)}}var Ke=r(201),Fe=r.n(Ke),qe=r(194);const Ve=["/vac/waku/relay/2.0.0-beta2","/vac/waku/relay/2.0.0"],ze=5e3;function He(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;const i=t.topics.get(e);if(!i)return new Set;let o=[];return i.forEach((e=>{const r=t.peers.get(e);r&&Ve.includes(r.protocol)&&n(e)&&o.push(e)})),o=Object(L.shuffle)(o),r>0&&o.length>r&&(o=o.slice(0,r)),new Set(o)}var Ge=r(195);class We extends Ge.Heartbeat{constructor(t){super(t)}start(){if(this._heartbeatTimer)return;const t=this._heartbeat.bind(this),e=setTimeout((()=>{var e;t(),null===(e=this._heartbeatTimer)||void 0===e||e.runPeriodically(t,1e3)}),100);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(t,e)=>{this._heartbeatTimer._intervalId=setInterval(t,e)},cancel:()=>{var t;clearTimeout(e),clearInterval(null===(t=this._heartbeatTimer)||void 0===t?void 0:t._intervalId)}}}stop(){this._heartbeatTimer&&(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){const{D:t,Dlo:e,Dhi:r,Dscore:n,Dout:i}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;const o=new Map,s=t=>{let e=o.get(t);return void 0===e&&(e=this.gossipsub.score.score(t),o.set(t,e)),e},a=new Map,c=new Map,u=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach(((o,h)=>{const l=t=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",t,h),this.gossipsub.score.prune(t,h),this.gossipsub._addBackoff(t,h),o.delete(t);const e=c.get(t);e?e.push(h):c.set(t,[h])},f=t=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",t,h),this.gossipsub.score.graft(t,h),o.add(t);const e=a.get(t);e?e.push(h):a.set(t,[h])};if(o.forEach((t=>{const e=s(t);e<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",t,e,h),l(t),u.set(t,!0))})),o.size<e){const e=this.gossipsub.backoff.get(h),r=t-o.size;He(this.gossipsub,h,r,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!e||!e.has(t))&&s(t)>=0)).forEach(f)}if(o.size>r){let e=Array.from(o);e.sort(((t,e)=>s(e)-s(t))),e=e.slice(0,n).concat(Object(L.shuffle)(e.slice(n)));let r=0;if(e.slice(0,t).forEach((t=>{this.gossipsub.outbound.get(t)&&r++})),r<i){const n=t=>{const r=e[t];for(let n=t;n>0;n--)e[n]=e[n-1];e[0]=r};if(r>0){let i=r;for(let r=1;r<t&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}let i=t-r;for(let r=t;r<e.length&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}e.slice(t).forEach(l)}if(o.size>=e){let t=0;if(o.forEach((e=>{this.gossipsub.outbound.get(e)&&t++})),t<i){const e=i-t,r=this.gossipsub.backoff.get(h);He(this.gossipsub,h,e,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!r||!r.has(t))&&s(t)>=0)).forEach(f)}}if(this.gossipsub.heartbeatTicks%60===0&&o.size>1){const t=Array.from(o).sort(((t,e)=>s(t)-s(e))),e=Math.floor(o.size/2),r=s(t[e]);if(r<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){const t=this.gossipsub.backoff.get(h);He(this.gossipsub,h,2,(e=>o.has(e)&&!this.gossipsub.direct.has(e)&&(!t||!t.has(e))&&s(e)>r)).forEach((t=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,h),f(t)}))}}this.gossipsub._emitGossip(h,o)}));const h=this.gossipsub._now();this.gossipsub.lastpub.forEach(((t,e)=>{t+6e4<h&&(this.gossipsub.fanout.delete(e),this.gossipsub.lastpub.delete(e))})),this.gossipsub.fanout.forEach(((e,r)=>{const n=this.gossipsub.topics.get(r);if(e.forEach((t=>{(!(null===n||void 0===n?void 0:n.has(t))||s(t)<this.gossipsub._options.scoreThresholds.publishThreshold)&&e.delete(t)})),e.size<t){const n=t-e.size;He(this.gossipsub,r,n,(t=>!e.has(t)&&!this.gossipsub.direct.has(t)&&s(t)>=this.gossipsub._options.scoreThresholds.publishThreshold)).forEach((t=>{e.add(t)}))}this.gossipsub._emitGossip(r,e)})),this.gossipsub._sendGraftPrune(a,c,u),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}var Je=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const Ye=q()("waku:relay");class Ze extends Fe.a{constructor(t,e){var r;super(t,Object.assign(e,{globalSignaturePolicy:qe.SignaturePolicy.StrictNoSign})),this.heartbeat=new We(this),this.observers={},this.decryptionKeys=new Map;const n=Ve;Object.assign(this,{multicodecs:n}),this.pubSubTopic=(null===e||void 0===e?void 0:e.pubSubTopic)||cr,null===(r=null===e||void 0===e?void 0:e.decryptionKeys)||void 0===r||r.forEach((t=>{this.addDecryptionKey(t)}))}start(){const t=Object.create(null,{start:{get:()=>super.start}});return Je(this,void 0,void 0,(function*(){yield t.start.call(this),this.subscribe(this.pubSubTopic)}))}send(t){const e=Object.create(null,{publish:{get:()=>super.publish}});return Je(this,void 0,void 0,(function*(){const r=t.encode();yield e.publish.call(this,this.pubSubTopic,r)}))}addDecryptionKey(t,e){this.decryptionKeys.set(d(t),null!==e&&void 0!==e?e:{})}deleteDecryptionKey(t){this.decryptionKeys.delete(d(t))}addObserver(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length?(this.observers[""]||(this.observers[""]=new Set),this.observers[""].add(t)):e.forEach((e=>{this.observers[e]||(this.observers[e]=new Set),this.observers[e].add(t)}))}deleteObserver(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length?this.observers[""]&&this.observers[""].delete(t):e.forEach((e=>{this.observers[e]&&this.observers[e].delete(t)}))}getPeers(){return He(this,this.pubSubTopic,this._options.D,(t=>this.score.score(t)>=this._options.scoreThresholds.publishThreshold))}subscribe(t){this.on(t,(e=>{const r=Array.from(this.decryptionKeys).map((t=>{let[e,{method:r,contentTopics:n}]=t;return{key:e,method:r,contentTopics:n}}));Ye("Message received on ".concat(t)),he.decode(e.data,r).then((t=>{t?(this.observers[""]&&this.observers[""].forEach((e=>{e(t)})),t.contentTopic&&this.observers[t.contentTopic]&&this.observers[t.contentTopic].forEach((e=>{e(t)}))):Ye("Failed to decode Waku Message")})).catch((t=>{Ye("Failed to decode Waku Message",t)}))})),super.subscribe(t)}join(t){var e;if(!this.started)throw new Error("WakuRelayPubSub has not started");const r=this.fanout.get(t);if(r)r.forEach((t=>{this.score.score(t)<0&&r.delete(t)})),r.size<this._options.D&&He(this,t,this._options.D-r.size,(t=>!r.has(t)&&!this.direct.has(t)&&this.score.score(t)>=0)).forEach((t=>r.add(t))),this.mesh.set(t,r),this.fanout.delete(t),this.lastpub.delete(t);else{const e=He(this,t,this._options.D,(t=>!this.direct.has(t)&&this.score.score(t)>=0));this.mesh.set(t,e)}null===(e=this.mesh.get(t))||void 0===e||e.forEach((e=>{this.log("JOIN: Add mesh link to %s in %s",e,t),this._sendGraft(e,t)}))}_publish(t){return Je(this,void 0,void 0,(function*(){const e=yield this.getCanonicalMsgIdStr(t);t.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(t,e),this.gossipTracer.deliverMessage(e)),this.seenCache.put(e),this.messageCache.put(t,e);const r=new Set;t.topicIDs.forEach((t=>{if(!this.topics.get(t))return;this.direct.forEach((t=>{r.add(t)}));let e=this.mesh.get(t);if(!e||!e.size){if(e=this.fanout.get(t),!e){const r=He(this,t,this._options.D,(t=>this.score.score(t)>=this._options.scoreThresholds.publishThreshold));r.size>0?(e=r,this.fanout.set(t,r)):e=new Set}this.lastpub.set(t,this._now())}null===e||void 0===e||e.forEach((t=>{r.add(t)}))}));const n=Object(L.createGossipRpc)([Fe.a.utils.normalizeOutRpcMessage(t)]);Ye("Relay message to ".concat(r.size," peers")),r.forEach((e=>{e!==t.from&&(Ye("Relay message to",e),this._sendRpc(e,n))}))}))}_emitGossip(t,e){const r=this.messageCache.getGossipIDs(t);if(!r.length)return;Object(L.shuffle)(r),r.length>ze&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length);const n=[],i=this.topics.get(t);if(!i)return;i.forEach((t=>{const r=this.peers.get(t);r&&!e.has(t)&&!this.direct.has(t)&&Ve.includes(r.protocol)&&this.score.score(t)>=this._options.scoreThresholds.gossipThreshold&&n.push(t)}));let o=this._options.Dlazy;const s=.25*n.length;s>o&&(o=s),o>n.length?o=n.length:Object(L.shuffle)(n),n.slice(0,o).forEach((e=>{let n=r;r.length>ze&&(n=Object(L.shuffle)(n.slice()).slice(0,ze)),this._pushGossip(e,{topicID:t,messageIDs:n})}))}_makePrune(t,e,r){return Je(this,void 0,void 0,(function*(){if(!r)return{topicID:e,peers:[],backoff:60};const n=He(this,e,16,(e=>e!==t&&this.score.score(e)>=0)),i=yield Promise.all(Array.from(n).map((t=>Je(this,void 0,void 0,(function*(){const e=et.a.createFromB58String(t);return{peerID:e.toBytes(),signedPeerRecord:yield this._libp2p.peerStore.addressBook.getRawEnvelope(e)}})))));return{topicID:e,peers:i,backoff:60}}))}}var Xe,Qe=r(350),$e=r(107);!function(t){t.BACKWARD="backward",t.FORWARD="forward"}(Xe||(Xe={}));class tr{constructor(t,e){switch(this.proto=t,this.storeCodec=e,e){case nr.V2Beta3:this.protoCodec=Qe;break;case nr.V2Beta4:this.protoCodec=$e;break;default:throw"Internal Error: Unexpected store codec value received in constructor: ".concat(e)}}get query(){return this.proto.query}get response(){return this.proto.response}static createQuery(t){var e;const r=null!==(e=t.storeCodec)&&void 0!==e?e:nr.V2Beta4,n=t.contentTopics.map((t=>({contentTopic:t}))),i=function(t){switch(t){case Xe.BACKWARD:return $e.PagingInfo_Direction.DIRECTION_BACKWARD_UNSPECIFIED;case Xe.FORWARD:return $e.PagingInfo_Direction.DIRECTION_FORWARD;default:return $e.PagingInfo_Direction.DIRECTION_BACKWARD_UNSPECIFIED}}(t.pageDirection);switch(r){case nr.V2Beta3:return(()=>{const e={pageSize:re.a.fromNumber(t.pageSize),cursor:t.cursor,direction:i};let o,s;return t.startTime&&(o=t.startTime.valueOf()/1e3),t.endTime&&(s=t.endTime.valueOf()/1e3),new tr({requestId:be(),query:{pubSubTopic:t.pubSubTopic,contentFilters:n,pagingInfo:e,startTime:o,endTime:s},response:void 0},r)})();case nr.V2Beta4:return(()=>{const e={pageSize:re.a.fromNumber(t.pageSize),cursor:t.cursor,direction:i};let o,s;return t.startTime&&(o=re.a.fromNumber(t.startTime.valueOf()).mul(1e6)),t.endTime&&(s=re.a.fromNumber(t.endTime.valueOf()).mul(1e6)),new tr({requestId:be(),query:{pubSubTopic:t.pubSubTopic,contentFilters:n,pagingInfo:e,startTime:o,endTime:s},response:void 0},r)})();default:throw"Internal Error: Unexpected store codec value received in createQuery: ".concat(r)}}decode(t){const e=this.protoCodec.HistoryRPC.decode(ne.Reader.create(t));return new tr(e,this.storeCodec)}encode(){return this.protoCodec.HistoryRPC.encode(this.proto).finish()}}var er=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const rr=q()("waku:store");var nr;!function(t){t.V2Beta3="/vac/waku/store/2.0.0-beta3",t.V2Beta4="/vac/waku/store/2.0.0-beta4"}(nr||(nr={}));class ir{constructor(t,e){this.libp2p=t,(null===e||void 0===e?void 0:e.pubSubTopic)?this.pubSubTopic=e.pubSubTopic:this.pubSubTopic=cr,this.decryptionKeys=new Map}queryHistory(t,e){var r,n,i,o,s;return er(this,void 0,void 0,(function*(){let a,c;(null===e||void 0===e?void 0:e.timeFilter)&&(a=e.timeFilter.startTime,c=e.timeFilter.endTime);const u=Object.assign({pubSubTopic:this.pubSubTopic,pageDirection:Xe.BACKWARD,pageSize:10},e,{contentTopics:t,startTime:a,endTime:c});let h;if(rr("Querying history with the following options",Object.assign({peerId:null===(r=null===e||void 0===e?void 0:e.peerId)||void 0===r?void 0:r.toB58String()},e)),u.peerId){if(h=yield this.libp2p.peerStore.get(u.peerId),!h)throw"Failed to retrieve connection details for provided peer in peer store: ".concat(u.peerId.toB58String())}else if(h=yield this.randomPeer,!h)throw"Failed to find known peer that registers waku store protocol";let l="";for(const t of Object.values(nr))h.protocols.includes(t)&&(l=t);if(rr("Use store codec ".concat(l)),!l)throw"Peer does not register waku store protocol: ".concat(h.id.toB58String());Object.assign(u,{storeCodec:l});const f=this.libp2p.connectionManager.get(h.id);if(!f)throw"Failed to get a connection to the peer";const p=Array.from(this.decryptionKeys).map((t=>{let[e,{method:r,contentTopics:n}]=t;return{key:e,method:r,contentTopics:n}}));u.decryptionKeys&&u.decryptionKeys.forEach((e=>{p.push({key:d(e),contentTopics:t.length?t:void 0,method:void 0})}));const m=[];let y;for(;;){const{stream:t}=yield f.newStream(l),e=Object.assign(u,{cursor:y}),r=tr.createQuery(e);rr("Querying store peer",f.remoteAddr.toString());const a=yield Object(Jt.pipe)([r.encode()],Wt.a.encode(),t,Wt.a.decode(),ke.a),c=r.decode(a.slice()).response;if(!c)throw"History response misses response field";if(c.error)throw"History response contains an Error"+c.error;if(!c.messages||!c.messages.length)return console.log("No messages present in HistoryRPC response"),m;rr("".concat(c.messages.length," messages retrieved for pubsub topic ").concat(u.pubSubTopic));const h=[];yield Promise.all(c.messages.map((t=>er(this,void 0,void 0,(function*(){const e=yield he.decodeProto(t,p);e&&(m.push(e),h.push(e))})))));let d=!1;u.callback&&(d=Boolean(u.callback(h)));const g=null===(n=c.pagingInfo)||void 0===n?void 0:n.pageSize,b=null===(o=null===(i=r.query)||void 0===i?void 0:i.pagingInfo)||void 0===o?void 0:o.pageSize;if(d||g&&b&&g<b)return m;if(y=null===(s=c.pagingInfo)||void 0===s?void 0:s.cursor,void 0===y)return console.log("No cursor returned by peer."),m}}))}addDecryptionKey(t,e){this.decryptionKeys.set(d(t),null!==e&&void 0!==e?e:{})}deleteDecryptionKey(t){this.decryptionKeys.delete(d(t))}get peers(){const t=[];for(const e of Object.values(nr))t.push(e);return te(this.libp2p,t)}get randomPeer(){return $t(this.peers)}}var or=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},sr=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"===typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}};const ar=Ft.a.prototype[Symbol.toStringTag],cr="/waku/2/default-waku/proto",ur=q()("waku:waku");var hr;!function(t){t.Relay="relay",t.Store="store",t.LightPush="lightpush",t.Filter="filter"}(hr||(hr={}));class lr{constructor(t,e,r,n,i){var o;this.libp2p=e,this.relay=e.pubsub,this.store=r,this.filter=i,this.lightPush=n,this.pingKeepAliveTimers={},this.relayKeepAliveTimers={};const s=t.pingKeepAlive||0,a=t.relayKeepAlive||300;e.connectionManager.on("peer:connect",(t=>{this.startKeepAlive(t.remotePeer,s,a)})),e.connectionManager.on("peer:disconnect",(t=>{this.stopKeepAlive(t.remotePeer)})),null===(o=null===t||void 0===t?void 0:t.decryptionKeys)||void 0===o||o.forEach((t=>{this.addDecryptionKey(t)}))}static create(t){var e,r,n;return or(this,void 0,void 0,(function*(){const i=Object.assign({},null===t||void 0===t?void 0:t.libp2p);if(i.config=Object.assign({transport:{[ar]:{filter:Vt.a.all}}},null===(e=null===t||void 0===t?void 0:t.libp2p)||void 0===e?void 0:e.config),(null===t||void 0===t?void 0:t.pubSubTopic)&&(i.config.pubsub=Object.assign({pubSubTopic:t.pubSubTopic},i.config.pubsub)),i.modules=Object.assign({},null===(r=null===t||void 0===t?void 0:t.libp2p)||void 0===r?void 0:r.modules),i.modules=Object.assign({transport:[Ft.a]},null===(n=null===t||void 0===t?void 0:t.libp2p)||void 0===n?void 0:n.modules),i.modules=Object.assign(i.modules,{streamMuxer:[jt.a],connEncryption:[new Nt.Noise(null===t||void 0===t?void 0:t.staticNoiseKey)],pubsub:Ze}),null===t||void 0===t?void 0:t.bootstrap){const e=new kt(null===t||void 0===t?void 0:t.bootstrap);if(void 0!==e.getBootstrapPeers)try{const t=yield e.getBootstrapPeers();i.modules=Object.assign(i.modules,{peerDiscovery:[Lt.a]}),i.config.peerDiscovery={[Lt.a.tag]:{list:t,enabled:!0}}}catch(u){ur("Failed to retrieve bootstrap nodes",u)}}const o=yield Bt.a.create(i),s=new ir(o,{pubSubTopic:null===t||void 0===t?void 0:t.pubSubTopic}),a=new je(o),c=new Ce(o);return yield o.start(),new lr(t||{},o,s,a,c)}))}dial(t,e){return or(this,void 0,void 0,(function*(){const r=null!==e&&void 0!==e?e:[hr.Relay],n=[];if(r.includes(hr.Relay)&&Ve.forEach((t=>n.push(t))),r.includes(hr.Store))for(const t of Object.values(nr))n.push(t);return r.includes(hr.LightPush)&&n.push(Ue),r.includes(hr.Filter)&&n.push(Re),this.libp2p.dialProtocol(t,n)}))}addPeerToAddressBook(t,e){let r;r="string"===typeof t?et.a.createFromB58String(t):t;const n=e.map((t=>"string"===typeof t?Object(U.multiaddr)(t):t));this.libp2p.peerStore.addressBook.set(r,n)}stop(){return or(this,void 0,void 0,(function*(){return this.libp2p.stop()}))}addDecryptionKey(t,e){this.relay.addDecryptionKey(t,e),this.store.addDecryptionKey(t,e),this.filter.addDecryptionKey(t,e)}deleteDecryptionKey(t){this.relay.deleteDecryptionKey(t),this.store.deleteDecryptionKey(t),this.filter.deleteDecryptionKey(t)}getLocalMultiaddrWithID(){const t=this.libp2p.multiaddrs.find((t=>t.toString().match(/127\.0\.0\.1/)));if(!t||""===t.toString())throw"Not listening on localhost";return t+"/p2p/"+this.libp2p.peerId.toB58String()}waitForRemotePeer(t,e){return or(this,void 0,void 0,(function*(){const r=[];if((t=null!==t&&void 0!==t?t:[hr.Relay]).includes(hr.Relay)){if(0==this.relay.getPeers().size){const t=new Promise((t=>{this.libp2p.pubsub.once("pubsub:subscription-change",(()=>{this.libp2p.pubsub.once("gossipsub:heartbeat",t)}))}));r.push(t)}}if(t.includes(hr.Store)){const t=(()=>or(this,void 0,void 0,(function*(){var t,e;try{for(var r,n=sr(this.store.peers);!(r=yield n.next()).done;){const t=r.value;ur("Store peer found",t.id.toB58String());break}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&(yield e.call(n))}finally{if(t)throw t.error}}})))();r.push(t)}if(t.includes(hr.LightPush)){const t=(()=>or(this,void 0,void 0,(function*(){var t,e;try{for(var r,n=sr(this.lightPush.peers);!(r=yield n.next()).done;){const t=r.value;ur("Light Push peer found",t.id.toB58String());break}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&(yield e.call(n))}finally{if(t)throw t.error}}})))();r.push(t)}if(t.includes(hr.Filter)){const t=(()=>or(this,void 0,void 0,(function*(){var t,e;try{for(var r,n=sr(this.filter.peers);!(r=yield n.next()).done;){const t=r.value;ur("Filter peer found",t.id.toB58String());break}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&(yield e.call(n))}finally{if(t)throw t.error}}})))();r.push(t)}e?yield dr(Promise.all(r),e,"Timed out waiting for a remote peer."):yield Promise.all(r)}))}startKeepAlive(t,e,r){this.stopKeepAlive(t);const n=t.toB58String();if(0!==e){const r=new Ht.a(this.libp2p);this.pingKeepAliveTimers[n]=setInterval((()=>{r.ping(t).catch((t=>{ur("Ping failed (".concat(n,")"),t)}))}),1e3*e)}0!==r&&(this.relayKeepAliveTimers[n]=setInterval((()=>{he.fromBytes(new Uint8Array,"/relay-ping/1/ping/null").then((t=>this.relay.send(t)))}),1e3*r))}stopKeepAlive(t){const e=t.toB58String();this.pingKeepAliveTimers[e]&&(clearInterval(this.pingKeepAliveTimers[e]),delete this.pingKeepAliveTimers[e]),this.relayKeepAliveTimers[e]&&(clearInterval(this.relayKeepAliveTimers[e]),delete this.relayKeepAliveTimers[e])}}const fr=(t,e)=>new Promise(((r,n)=>setTimeout((()=>n(e)),t))),dr=(t,e,r)=>Promise.race([t,fr(e,r)])},function(t,e,r){"use strict";(function(t){r.d(e,"c",(function(){return c})),r.d(e,"e",(function(){return l})),r.d(e,"d",(function(){return f})),r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return m}));var n=r(6),i=r.n(n),o=r(2),s=r.n(o),a=r(7);const c={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.timestamp&&e.uint32(8).uint64(t.timestamp),void 0!==t.secp256k1&&h.encode(t.secp256k1,e.uint32(18).fork()).ldelim(),void 0!==t.publicKey&&a.g.encode(t.publicKey,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={timestamp:0,secp256k1:void 0,publicKey:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.timestamp=_(r.uint64());break;case 2:i.secp256k1=h.decode(r,r.uint32());break;case 3:i.publicKey=a.g.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({timestamp:S(t.timestamp)?Number(t.timestamp):0,secp256k1:S(t.secp256k1)?h.fromJSON(t.secp256k1):void 0,publicKey:S(t.publicKey)?a.g.fromJSON(t.publicKey):void 0}),toJSON(t){const e={};return void 0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),void 0!==t.secp256k1&&(e.secp256k1=t.secp256k1?h.toJSON(t.secp256k1):void 0),void 0!==t.publicKey&&(e.publicKey=t.publicKey?a.g.toJSON(t.publicKey):void 0),e},fromPartial(t){var e;const r={timestamp:0,secp256k1:void 0,publicKey:void 0};return r.timestamp=null!==(e=t.timestamp)&&void 0!==e?e:0,r.secp256k1=void 0!==t.secp256k1&&null!==t.secp256k1?h.fromPartial(t.secp256k1):void 0,r.publicKey=void 0!==t.publicKey&&null!==t.publicKey?a.g.fromPartial(t.publicKey):void 0,r}};function u(){return{bytes:new Uint8Array}}const h={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.bytes.length&&e.uint32(10).bytes(t.bytes),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=u();for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.bytes=r.bytes();else r.skipType(7&t)}return i},fromJSON:t=>({bytes:S(t.bytes)?b(t.bytes):new Uint8Array}),toJSON(t){const e={};return void 0!==t.bytes&&(e.bytes=w(void 0!==t.bytes?t.bytes:new Uint8Array)),e},fromPartial(t){var e;const r=u();return r.bytes=null!==(e=t.bytes)&&void 0!==e?e:new Uint8Array,r}};const l={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();void 0!==t.identityKey&&c.encode(t.identityKey,e.uint32(10).fork()).ldelim();for(const r of t.preKeys)c.encode(r,e.uint32(18).fork()).ldelim();return e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={identityKey:void 0,preKeys:[]};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.identityKey=c.decode(r,r.uint32());break;case 2:i.preKeys.push(c.decode(r,r.uint32()));break;default:r.skipType(7&t)}}return i},fromJSON:t=>({identityKey:S(t.identityKey)?c.fromJSON(t.identityKey):void 0,preKeys:Array.isArray(null===t||void 0===t?void 0:t.preKeys)?t.preKeys.map((t=>c.fromJSON(t))):[]}),toJSON(t){const e={};return void 0!==t.identityKey&&(e.identityKey=t.identityKey?c.toJSON(t.identityKey):void 0),t.preKeys?e.preKeys=t.preKeys.map((t=>t?c.toJSON(t):void 0)):e.preKeys=[],e},fromPartial(t){var e;const r={identityKey:void 0,preKeys:[]};return r.identityKey=void 0!==t.identityKey&&null!==t.identityKey?c.fromPartial(t.identityKey):void 0,r.preKeys=(null===(e=t.preKeys)||void 0===e?void 0:e.map((t=>c.fromPartial(t))))||[],r}};const f={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.v1&&l.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={v1:void 0};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.v1=l.decode(r,r.uint32());else r.skipType(7&t)}return i},fromJSON:t=>({v1:S(t.v1)?l.fromJSON(t.v1):void 0}),toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?l.toJSON(t.v1):void 0),e},fromPartial(t){const e={v1:void 0};return e.v1=void 0!==t.v1&&null!==t.v1?l.fromPartial(t.v1):void 0,e}};function d(){return{walletPreKey:new Uint8Array,ciphertext:void 0}}const p={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.walletPreKey.length&&e.uint32(10).bytes(t.walletPreKey),void 0!==t.ciphertext&&a.a.encode(t.ciphertext,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=d();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.walletPreKey=r.bytes();break;case 2:i.ciphertext=a.a.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({walletPreKey:S(t.walletPreKey)?b(t.walletPreKey):new Uint8Array,ciphertext:S(t.ciphertext)?a.a.fromJSON(t.ciphertext):void 0}),toJSON(t){const e={};return void 0!==t.walletPreKey&&(e.walletPreKey=w(void 0!==t.walletPreKey?t.walletPreKey:new Uint8Array)),void 0!==t.ciphertext&&(e.ciphertext=t.ciphertext?a.a.toJSON(t.ciphertext):void 0),e},fromPartial(t){var e;const r=d();return r.walletPreKey=null!==(e=t.walletPreKey)&&void 0!==e?e:new Uint8Array,r.ciphertext=void 0!==t.ciphertext&&null!==t.ciphertext?a.a.fromPartial(t.ciphertext):void 0,r}};const m={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return void 0!==t.v1&&p.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={v1:void 0};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.v1=p.decode(r,r.uint32());else r.skipType(7&t)}return i},fromJSON:t=>({v1:S(t.v1)?p.fromJSON(t.v1):void 0}),toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?p.toJSON(t.v1):void 0),e},fromPartial(t){const e={v1:void 0};return e.v1=void 0!==t.v1&&null!==t.v1?p.fromPartial(t.v1):void 0,e}};var y=(()=>{if("undefined"!==typeof y)return y;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw"Unable to locate global object"})();const g=y.atob||(t=>y.Buffer.from(t,"base64").toString("binary"));function b(t){const e=g(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const v=y.btoa||(t=>y.Buffer.from(t,"binary").toString("base64"));function w(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return v(e.join(""))}function _(t){if(t.gt(Number.MAX_SAFE_INTEGER))throw new y.Error("Value is larger than Number.MAX_SAFE_INTEGER");return t.toNumber()}function S(t){return null!==t&&void 0!==t}s.a.util.Long!==i.a&&(s.a.util.Long=i.a,s.a.configure())}).call(this,r(21))},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(251).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=l[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===e,u=new t(o),h=this.clone();if(c){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,_=v>>>13,S=0|s[4],E=8191&S,A=S>>>13,M=0|s[5],I=8191&M,R=M>>>13,T=0|s[6],C=8191&T,O=T>>>13,k=0|s[7],P=8191&k,N=k>>>13,D=0|s[8],B=8191&D,x=D>>>13,L=0|s[9],U=8191&L,j=L>>>13,K=0|a[0],F=8191&K,q=K>>>13,V=0|a[1],z=8191&V,H=V>>>13,G=0|a[2],W=8191&G,J=G>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],$=8191&Q,tt=Q>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(m,F)|0,o=Math.imul(m,q);var gt=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),i=(i=Math.imul(g,q))+Math.imul(b,F)|0,o=Math.imul(b,q),n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var bt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,F),i=(i=Math.imul(w,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(b,z)|0,o=o+Math.imul(b,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(A,F)|0,o=Math.imul(A,q),n=n+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(O,F)|0,o=Math.imul(O,q),n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var St=(u+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(x,F)|0,o=Math.imul(x,q),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ut)|0;var At=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(j,F)|0,o=Math.imul(j,q),n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(g,ct)|0,i=(i=i+Math.imul(g,ut)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(j,z)|0,o=Math.imul(j,H),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(j,W)|0,o=Math.imul(j,J),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(A,ct)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0;var Rt=(u+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Tt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0;var Ct=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ft)|0;var Ot=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var kt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,ct),i=(i=Math.imul(U,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var Pt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(j,lt)|0,o=Math.imul(j,ft);var Nt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Dt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=yt,c[1]=gt,c[2]=bt,c[3]=vt,c[4]=wt,c[5]=_t,c[6]=St,c[7]=Et,c[8]=At,c[9]=Mt,c[10]=It,c[11]=Rt,c[12]=Tt,c[13]=Ct,c[14]=Ot,c[15]=kt,c[16]=Pt,c[17]=Nt,c[18]=Dt,0!==u&&(c[19]=u,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var h=o-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<s;d++){var p=r[h+d],m=n[h+d],y=r[h+d+s],g=n[h+d+s],b=l*y-f*g;g=l*g+f*y,y=b,r[h+d]=p+y,n[h+d]=m+g,r[h+d+s]=p-y,n[h+d+s]=m-g,d!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(c)):(r.isub(e),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,b),i(_,b),i(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return g[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(l,new o(1).iushln(p-y-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=y}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(70)(t))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=function(t){for(var e=0;e<t.length;e++)t[e]=0;return t}},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return s}));var n=r(7);const i=32,o=12;class s{constructor(t){if(!t.aes256GcmHkdfSha256)throw new Error("invalid ciphertext");if(t.aes256GcmHkdfSha256.payload.length<16)throw new Error("invalid ciphertext ciphertext length: ".concat(t.aes256GcmHkdfSha256.payload.length));if(t.aes256GcmHkdfSha256.hkdfSalt.length!==i)throw new Error("invalid ciphertext salt length: ".concat(t.aes256GcmHkdfSha256.hkdfSalt.length));if(t.aes256GcmHkdfSha256.gcmNonce.length!==o)throw new Error("invalid ciphertext nonce length: ".concat(t.aes256GcmHkdfSha256.gcmNonce.length));this.aes256GcmHkdfSha256=t.aes256GcmHkdfSha256}toBytes(){return n.a.encode(this).finish()}static fromBytes(t){return new s(n.a.decode(t))}}},function(t,e,r){var n=r(15).Buffer,i=r(222).Transform,o=r(92).StringDecoder;function s(t){i.call(this),this.hashMode="string"===typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(10)(s,i),s.prototype.update=function(t,e,r){"string"===typeof t&&(t=n.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}},s.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)},s.prototype._finalOrDigest=function(t){var e=this.__final()||n.alloc(0);return t&&(e=this._toString(e,t,!0)),e},s.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n},t.exports=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=new Uint8Array(0);e.coerce=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},e.empty=n,e.equals=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},e.fromHex=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map((t=>parseInt(t,16)))):n},e.fromString=t=>(new TextEncoder).encode(t),e.isBinary=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),e.toHex=t=>t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),e.toString=t=>(new TextDecoder).decode(t)},function(t,e,r){const n=r(292),i=r(581),o=(t,e,r)=>s(t,Array.isArray(e)?e:[{signal:e,options:r}]),s=(t,e)=>(t=n(t),e=e.map((t=>{let{signal:e,options:r}=t;return{signal:e,options:r||{}}})),async function*(){let r;const n=()=>{r&&r()};for(const{signal:t}of e)t.addEventListener("abort",n);for(;;){let s;try{for(const{signal:t,options:r}of e)if(t.aborted){const{abortMessage:t,abortCode:e}=r;throw new i(t,e)}const n=new Promise(((t,n)=>{r=()=>{const{options:t}=e.find((t=>{let{signal:e}=t;return e.aborted})),{abortMessage:r,abortCode:o}=t;n(new i(r,o))}}));s=await Promise.race([n,t.next()]),r=null}catch(o){for(const{signal:t}of e)t.removeEventListener("abort",n);const r=e.find((t=>{let{signal:e}=t;return e.aborted})),i="aborted"===o.type&&r;if(i&&r.options.onAbort&&await r.options.onAbort(t),"function"===typeof t.return)try{const e=t.return();e instanceof Promise&&e.catch((t=>{null!=r.options.onReturnError&&r.options.onReturnError(t)}))}catch(o){null!=r.options.onReturnError&&r.options.onReturnError(o)}if(i&&r.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(const{signal:t}of e)t.removeEventListener("abort",n)}()),a=(t,e,r)=>c(t,Array.isArray(e)?e:[{signal:e,options:r}]),c=(t,e)=>r=>t(s(r,e)),u=(t,e)=>({sink:c(t.sink,e),source:s(t.source,e)});t.exports=o,t.exports.AbortError=i,t.exports.source=o,t.exports.sink=a,t.exports.transform=a,t.exports.duplex=(t,e,r)=>u(t,Array.isArray(e)?e:[{signal:e,options:r}])},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return s}));var n=r(20);function i(t){let e=null;try{e=JSON.parse(t)}catch(r){return!1}return e.encseed&&e.ethaddr}function o(t){let e=null;try{e=JSON.parse(t)}catch(r){return!1}return!(!e.version||parseInt(e.version)!==e.version||3!==parseInt(e.version))}function s(t){if(i(t))try{return Object(n.a)(JSON.parse(t).ethaddr)}catch(e){return null}if(o(t))try{return Object(n.a)(JSON.parse(t).address)}catch(e){return null}return null}},function(t,e,r){"use strict";(function(t){var n=e;function i(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function o(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}n.asPromise=r(365),n.base64=r(366),n.EventEmitter=r(367),n.float=r(368),n.inquire=r(369),n.utf8=r(370),n.pool=r(371),n.LongBits=r(372),n.isNode=Boolean("undefined"!==typeof t&&t&&t.process&&t.process.versions&&t.process.versions.node),n.global=n.isNode&&t||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"===typeof t||t instanceof String},n.isObject=function(t){return t&&"object"===typeof t},n.isset=n.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"===typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"===typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=i,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}).call(this,r(21))},function(t,e,r){"use strict";var n=r(111),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=l;var o=Object.create(r(93));o.inherits=r(10);var s=r(223),a=r(151);o.inherits(l,s);for(var c=i(a.prototype),u=0;u<c.length;u++){var h=c[u];l.prototype[h]||(l.prototype[h]=a.prototype[h])}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),l.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(57);const i=n.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o=n.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});e.base58btc=i,e.base58flickr=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(165);const i=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),o=n.from({name:"sha2-256",code:18,encode:i("SHA-256")}),s=n.from({name:"sha2-512",code:19,encode:i("SHA-512")});e.sha256=o,e.sha512=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(65),i=r(117);class o{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}e.Digest=o,e.create=(t,e)=>{const r=e.byteLength,n=i.encodingLength(t),s=n+i.encodingLength(r),a=new Uint8Array(s+r);return i.encodeTo(t,a,0),i.encodeTo(r,a,n),a.set(e,s),new o(t,r,e,a)},e.decode=t=>{const e=n.coerce(t),[r,s]=i.decode(e),[a,c]=i.decode(e.subarray(s)),u=e.subarray(s+c);if(u.byteLength!==a)throw new Error("Incorrect length");return new o(r,a,u,e)},e.equals=(t,e)=>t===e||t.code===e.code&&t.size===e.size&&n.equals(t.bytes,e.bytes)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ACCEPT_FROM_WHITELIST_DURATION_MS=e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=e.ERR_TOPIC_VALIDATOR_IGNORE=e.ERR_TOPIC_VALIDATOR_REJECT=e.TimeCacheDuration=e.GossipsubSeenTTL=e.GossipsubIWantFollowupTime=e.GossipsubMaxIHaveMessages=e.GossipsubMaxIHaveLength=e.GossipsubGraftFloodThreshold=e.GossipsubOpportunisticGraftPeers=e.GossipsubOpportunisticGraftTicks=e.GossipsubDirectConnectInitialDelay=e.GossipsubDirectConnectTicks=e.GossipsubConnectionTimeout=e.GossipsubMaxPendingConnections=e.GossipsubConnectors=e.GossipsubPruneBackoffTicks=e.GossipsubPruneBackoff=e.GossipsubPrunePeers=e.GossipsubFanoutTTL=e.GossipsubHeartbeatInterval=e.GossipsubHeartbeatInitialDelay=e.GossipsubGossipRetransmission=e.GossipsubGossipFactor=e.GossipsubDlazy=e.GossipsubHistoryGossip=e.GossipsubHistoryLength=e.GossipsubDout=e.GossipsubDscore=e.GossipsubDhi=e.GossipsubDlo=e.GossipsubD=e.GossipsubIDv11=e.GossipsubIDv10=e.FloodsubID=e.minute=e.second=void 0,e.second=1e3,e.minute=60*e.second,e.FloodsubID="/floodsub/1.0.0",e.GossipsubIDv10="/meshsub/1.0.0",e.GossipsubIDv11="/meshsub/1.1.0",e.GossipsubD=6,e.GossipsubDlo=4,e.GossipsubDhi=12,e.GossipsubDscore=4,e.GossipsubDout=2,e.GossipsubHistoryLength=5,e.GossipsubHistoryGossip=3,e.GossipsubDlazy=6,e.GossipsubGossipFactor=.25,e.GossipsubGossipRetransmission=3,e.GossipsubHeartbeatInitialDelay=100,e.GossipsubHeartbeatInterval=e.second,e.GossipsubFanoutTTL=e.minute,e.GossipsubPrunePeers=16,e.GossipsubPruneBackoff=e.minute,e.GossipsubPruneBackoffTicks=15,e.GossipsubConnectors=8,e.GossipsubMaxPendingConnections=128,e.GossipsubConnectionTimeout=30*e.second,e.GossipsubDirectConnectTicks=300,e.GossipsubDirectConnectInitialDelay=e.second,e.GossipsubOpportunisticGraftTicks=60,e.GossipsubOpportunisticGraftPeers=2,e.GossipsubGraftFloodThreshold=10*e.second,e.GossipsubMaxIHaveLength=5e3,e.GossipsubMaxIHaveMessages=10,e.GossipsubIWantFollowupTime=3*e.second,e.GossipsubSeenTTL=30*e.second,e.TimeCacheDuration=12e4,e.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT",e.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE",e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0,e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128,e.ACCEPT_FROM_WHITELIST_DURATION_MS=1e3},function(t,e,r){var n=r(16);r(28),r(98);var i=t.exports=n.asn1=n.asn1||{};function o(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(t,e,r,o,s){if(n.util.isArray(o)){for(var a=[],c=0;c<o.length;++c)void 0!==o[c]&&a.push(o[c]);o=a}var u={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(o),value:o};return s&&"bitStringContents"in s&&(u.bitStringContents=s.bitStringContents,u.original=i.copy(u)),u},i.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var o=0;o<t.length;++o)r.push(i.copy(t[o],e));return r}return"string"===typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:i.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},i.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var o=0;o<t.length;++o)if(!i.equals(t[o],e[o]))return!1;return!0}if(typeof t!==typeof e)return!1;if("string"===typeof t)return t===e;var s=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&i.equals(t.value,e.value);return r&&r.includeBitStringContents&&(s=s&&t.bitStringContents===e.bitStringContents),s},i.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e};function s(t,e,r,n){var a;o(t,e,2);var c=t.getByte();e--;var u=192&c,h=31&c;a=t.length();var l,f,d=function(t,e){var r=t.getByte();if(e--,128!==r){var n;if(128&r){var i=127&r;o(t,e,i),n=t.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(t,e);if(e-=a-t.length(),void 0!==d&&d>e){if(n.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=t.length(),p.remaining=e,p.requested=d,p}d=e}var m=32===(32&c);if(m)if(l=[],void 0===d)for(;;){if(o(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}a=t.length(),l.push(s(t,e,r+1,n)),e-=a-t.length()}else for(;d>0;)a=t.length(),l.push(s(t,d,r+1,n)),e-=a-t.length(),d-=a-t.length();if(void 0===l&&u===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&(f=t.bytes(d)),void 0===l&&n.decodeBitStrings&&u===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&d>1){var y=t.read,g=e,b=0;if(h===i.Type.BITSTRING&&(o(t,e,1),b=t.getByte(),e--),0===b)try{a=t.length();var v=s(t,e,r+1,{strict:!0,decodeBitStrings:!0}),w=a-t.length();e-=w,h==i.Type.BITSTRING&&w++;var _=v.tagClass;w!==d||_!==i.Class.UNIVERSAL&&_!==i.Class.CONTEXT_SPECIFIC||(l=[v])}catch(E){}void 0===l&&(t.read=y,e=g)}if(void 0===l){if(void 0===d){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");d=e}if(h===i.Type.BMPSTRING)for(l="";d>0;d-=2)o(t,e,2),l+=String.fromCharCode(t.getInt16()),e-=2;else l=t.getBytes(d),e-=d}var S=void 0===f?null:{bitStringContents:f};return i.create(u,h,m,l,S)}i.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.length(),i=s(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=r,o.remaining=t.length(),o}return i},i.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,o=n.util.createBuffer(),s=!1;if("bitStringContents"in t&&(s=!0,t.original&&(s=i.equals(t,t.original))),s)o.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:o.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&o.putBuffer(i.toDer(t.value[a]))}else if(t.type===i.Type.BMPSTRING)for(a=0;a<t.value.length;++a)o.putInt16(t.value.charCodeAt(a));else t.type===i.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0===(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128===(128&t.value.charCodeAt(1)))?o.putBytes(t.value.substr(1)):o.putBytes(t.value);if(e.putByte(r),o.length()<=127)e.putByte(127&o.length());else{var c=o.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);e.putByte(128|u.length);for(a=u.length-1;a>=0;--a)e.putByte(u.charCodeAt(a))}return e.putBuffer(o),e},i.oidToDer=function(t){var e,r,i,o,s=t.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var c=2;c<s.length;++c){e=!0,r=[],i=parseInt(s[c],10);do{o=127&i,i>>>=7,e||(o|=128),r.push(o),e=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(t){var e;"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)i<<=7,128&(r=t.getByte())?i+=127&r:(e+="."+(i+r),i=0);return e},i.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),u&&("+"===(c=t.charAt(u))||"-"===c)){var h=60*parseInt(t.substr(u+1,2),10)+parseInt(t.substr(u+4,2),10);h*=6e4,"+"===c?e.setTime(+e-h):e.setTime(+e+h)}return e},i.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,h=!1;"Z"===t.charAt(t.length-1)&&(h=!0);var l=t.length-5,f=t.charAt(l);"+"!==f&&"-"!==f||(u=60*parseInt(t.substr(l+1,2),10)+parseInt(t.substr(l+4,2),10),u*=6e4,"+"===f&&(u*=-1),h=!0);return"."===t.charAt(14)&&(c=1e3*parseFloat(t.substr(14),10)),h?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,s,a,c)),e},i.dateToUtcTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},i.dateToGeneralizedTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},i.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},i.derToInteger=function(t){"string"===typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},i.validate=function(t,e,r,o){var s=!1;if(t.tagClass!==e.tagClass&&"undefined"!==typeof e.tagClass||t.type!==e.type&&"undefined"!==typeof e.type)o&&(t.tagClass!==e.tagClass&&o.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&o.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||"undefined"===typeof e.constructed){if(s=!0,e.value&&n.util.isArray(e.value))for(var a=0,c=0;s&&c<e.value.length;++c)s=e.value[c].optional||!1,t.value[a]&&((s=i.validate(t.value[a],e.value[c],r,o))?++a:e.value[c].optional&&(s=!0)),!s&&o&&o.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(s&&r)if(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else o&&o.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return s};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(t,e,r){var o="";r=r||2,(e=e||0)>0&&(o+="\n");for(var s="",c=0;c<e*r;++c)s+=" ";switch(o+=s+"Tag: ",t.tagClass){case i.Class.UNIVERSAL:o+="Universal:";break;case i.Class.APPLICATION:o+="Application:";break;case i.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case i.Class.PRIVATE:o+="Private:"}if(t.tagClass===i.Class.UNIVERSAL)switch(o+=t.type,t.type){case i.Type.NONE:o+=" (None)";break;case i.Type.BOOLEAN:o+=" (Boolean)";break;case i.Type.INTEGER:o+=" (Integer)";break;case i.Type.BITSTRING:o+=" (Bit string)";break;case i.Type.OCTETSTRING:o+=" (Octet string)";break;case i.Type.NULL:o+=" (Null)";break;case i.Type.OID:o+=" (Object Identifier)";break;case i.Type.ODESC:o+=" (Object Descriptor)";break;case i.Type.EXTERNAL:o+=" (External or Instance of)";break;case i.Type.REAL:o+=" (Real)";break;case i.Type.ENUMERATED:o+=" (Enumerated)";break;case i.Type.EMBEDDED:o+=" (Embedded PDV)";break;case i.Type.UTF8:o+=" (UTF8)";break;case i.Type.ROID:o+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:o+=" (Sequence)";break;case i.Type.SET:o+=" (Set)";break;case i.Type.PRINTABLESTRING:o+=" (Printable String)";break;case i.Type.IA5String:o+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:o+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case i.Type.BMPSTRING:o+=" (BMP String)"}else o+=t.type;if(o+="\n",o+=s+"Constructed: "+t.constructed+"\n",t.composed){var u=0,h="";for(c=0;c<t.value.length;++c)void 0!==t.value[c]&&(u+=1,h+=i.prettyPrint(t.value[c],e+1,r),c+1<t.value.length&&(h+=","));o+=s+"Sub values: "+u+h}else{if(o+=s+"Value: ",t.type===i.Type.OID){var l=i.derToOid(t.value);o+=l,n.pki&&n.pki.oids&&l in n.pki.oids&&(o+=" ("+n.pki.oids[l]+") ")}if(t.type===i.Type.INTEGER)try{o+=i.derToInteger(t.value)}catch(d){o+="0x"+n.util.bytesToHex(t.value)}else if(t.type===i.Type.BITSTRING){if(t.value.length>1?o+="0x"+n.util.bytesToHex(t.value.slice(1)):o+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);1==f?o+=" (1 unused bit shown)":f>1&&(o+=" ("+f+" unused bits shown)")}}else if(t.type===i.Type.OCTETSTRING)a.test(t.value)||(o+="("+t.value+") "),o+="0x"+n.util.bytesToHex(t.value);else if(t.type===i.Type.UTF8)try{o+=n.util.decodeUtf8(t.value)}catch(p){if("URI malformed"!==p.message)throw p;o+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===i.Type.PRINTABLESTRING||t.type===i.Type.IA5String?o+=t.value:a.test(t.value)?o+="0x"+n.util.bytesToHex(t.value):0===t.value.length?o+="[null]":o+=t.value}return o}},function(t,e,r){var n=r(16);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidPublicKey=e.getHkdf=e.verifySignedPayload=e.getHandshakePayload=e.decodePayload=e.getPeerIdFromPayload=e.signPayload=e.createHandshakePayload=e.getPayload=e.generateKeypair=void 0;const a=r(528),c=r(294),u=o(r(173)),h=s(r(23)),l=r(531),f=r(45),d=r(24),p=r(25),m=l.pb.NoiseHandshakePayload;function y(t,e,r){const n=m.create({identityKey:t,identitySig:e,data:null!==r&&void 0!==r?r:null});return m.encode(n).finish()}async function g(t,e){return await t.privKey.sign(e)}function b(t){const e=(0,d.fromString)("noise-libp2p-static-key:");return(0,p.concat)([e,t],e.length+t.length)}e.generateKeypair=function(){const t=u.generateKeyPair();return{publicKey:t.publicKey,privateKey:t.secretKey}},e.getPayload=async function(t,e,r){const n=await g(t,b(e)),i=null!==r&&void 0!==r?r:new Uint8Array(0);return y(t.marshalPubKey(),n,i)},e.createHandshakePayload=y,e.signPayload=g,e.getPeerIdFromPayload=async function(t){return await h.default.createFromPubKey(t.identityKey)},e.decodePayload=function(t){return m.toObject(m.decode(t))},e.getHandshakePayload=b,e.verifySignedPayload=async function(t,e,r){const n=e.identityKey;if(!await async function(t,e){const r=await h.default.createFromPubKey(e);return(0,f.equals)(r.id,t)}(r.id,n))throw new Error("Peer ID doesn't match libp2p public key.");const i=b(t),o=await h.default.createFromPubKey(n);if(!e.identitySig||!await o.pubKey.verify(i,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return o},e.getHkdf=function(t,e){const r=new a.HKDF(c.SHA256,e,t).expand(96);return[r.slice(0,32),r.slice(32,64),r.slice(64,96)]},e.isValidPublicKey=function(t){return t instanceof Uint8Array&&32===t.length}},function(t,e,r){"use strict";r.d(e,"a",(function(){return E})),r.d(e,"b",(function(){return A})),r.d(e,"c",(function(){return M}));var n=r(20),i=r(30),o=r(1),s=r(4),a=r(3);var c=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const u=new a.a("abstract-provider/5.6.1");s.a;class h{constructor(){u.checkAbstract(new.target,h),Object(s.d)(this,"_isProvider",!0)}getFeeData(){return c(this,void 0,void 0,(function*(){const{block:t,gasPrice:e}=yield Object(s.f)({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let r=null,n=null;return t&&t.baseFeePerGas&&(n=i.a.from("1500000000"),r=t.baseFeePerGas.mul(2).add(n)),{maxFeePerGas:r,maxPriorityFeePerGas:n,gasPrice:e}}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!(!t||!t._isProvider)}}var l=r(105),f=r(715),d=r(716),p=r(34),m=r(13),y=r(141),g=r(46),b=r(90),v=r(138),w=r(38);var _=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const S=new a.a("wallet/5.6.2");class E extends l.a{constructor(t,e){if(super(),null!=(r=t)&&Object(o.l)(r.privateKey,32)&&null!=r.address){const e=new g.a(t.privateKey);if(Object(s.d)(this,"_signingKey",(()=>e)),Object(s.d)(this,"address",Object(w.c)(this.publicKey)),this.address!==Object(n.a)(t.address)&&S.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(t){const e=t.mnemonic;return e&&e.phrase}(t)){const e=t.mnemonic;Object(s.d)(this,"_mnemonic",(()=>({phrase:e.phrase,path:e.path||p.b,locale:e.locale||"en"})));const r=this.mnemonic,n=p.a.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path);Object(w.c)(n.privateKey)!==this.address&&S.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else Object(s.d)(this,"_mnemonic",(()=>null))}else{if(g.a.isSigningKey(t))"secp256k1"!==t.curve&&S.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),Object(s.d)(this,"_signingKey",(()=>t));else{"string"===typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t);const e=new g.a(t);Object(s.d)(this,"_signingKey",(()=>e))}Object(s.d)(this,"_mnemonic",(()=>null)),Object(s.d)(this,"address",Object(w.c)(this.publicKey))}var r;e&&!h.isProvider(e)&&S.throwArgumentError("invalid provider","provider",e),Object(s.d)(this,"provider",e||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new E(this,t)}signTransaction(t){return Object(s.f)(t).then((e=>{null!=e.from&&(Object(n.a)(e.from)!==this.address&&S.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete e.from);const r=this._signingKey().signDigest(Object(m.a)(Object(w.f)(e)));return Object(w.f)(e,r)}))}signMessage(t){return _(this,void 0,void 0,(function*(){return Object(o.m)(this._signingKey().signDigest(Object(f.a)(t)))}))}_signTypedData(t,e,r){return _(this,void 0,void 0,(function*(){const n=yield d.a.resolveNames(t,e,r,(t=>(null==this.provider&&S.throwError("cannot resolve ENS names without a provider",a.a.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:t}),this.provider.resolveName(t))));return Object(o.m)(this._signingKey().signDigest(d.a.hash(n.domain,e,n.value)))}))}encrypt(t,e,r){if("function"!==typeof e||r||(r=e,e={}),r&&"function"!==typeof r)throw new Error("invalid callback");return e||(e={}),Object(b.c)(this,t,e,r)}static createRandom(t){let e=Object(y.a)(16);t||(t={}),t.extraEntropy&&(e=Object(o.a)(Object(o.e)(Object(m.a)(Object(o.b)([e,t.extraEntropy])),0,16)));const r=Object(p.c)(e,t.locale);return E.fromMnemonic(r,t.path,t.locale)}static fromEncryptedJson(t,e,r){return Object(v.a)(t,e,r).then((t=>new E(t)))}static fromEncryptedJsonSync(t,e){return new E(Object(v.b)(t,e))}static fromMnemonic(t,e,r){return e||(e=p.b),new E(p.a.fromMnemonic(t,null,r).derivePath(e))}}function A(t,e){return Object(w.e)(Object(f.a)(t),e)}function M(t,e,r,n){return Object(w.e)(d.a.hash(t,e,r),n)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(7),i=r(17),o=r(49);class s{constructor(t){if(!t.ecdsaCompact)throw new Error("invalid signature");if(64!==t.ecdsaCompact.bytes.length)throw new Error("invalid signature length: ".concat(t.ecdsaCompact.bytes.length));if(this.ecdsaCompact=t.ecdsaCompact,0!==t.ecdsaCompact.recovery&&1!==t.ecdsaCompact.recovery)throw new Error("invalid recovery bit: ".concat(t.ecdsaCompact.recovery));this.ecdsaCompact.recovery=t.ecdsaCompact.recovery}getPublicKey(t){if(!this.ecdsaCompact)throw new Error("invalid signature");const e=i.recoverPublicKey(t,this.ecdsaCompact.bytes,this.ecdsaCompact.recovery);return e?new o.a({secp256k1Uncompressed:{bytes:e},timestamp:0}):void 0}toBytes(){return n.i.encode(this).finish()}static fromBytes(t){return new s(n.i.decode(t))}}},function(t,e,r){"use strict";(function(e,n){var i=65536,o=4294967295;var s=r(15).Buffer,a=e.crypto||e.msCrypto;a&&a.getRandomValues?t.exports=function(t,e){if(t>o)throw new RangeError("requested too many random bytes");var r=s.allocUnsafe(t);if(t>0)if(t>i)for(var c=0;c<t;c+=i)a.getRandomValues(r.slice(c,c+i));else a.getRandomValues(r);if("function"===typeof e)return n.nextTick((function(){e(null,r)}));return r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(21),r(22))},function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"===typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,s,a;if("string"===typeof e&&(i="not ",e.substr(!s||s<0?0:+s,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))a="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var c=function(t,e,r){return"number"!==typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(c," ").concat(n," ").concat(o(e,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=u;var i=r(211),o=r(217);r(10)(u,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var c=s[a];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r(22))},function(t,e,r){var n=r(15).Buffer;function i(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"===typeof t&&(e=e||"utf8",t=n.from(t,e));for(var r=this._block,i=this._blockSize,o=t.length,s=this._len,a=0;a<o;){for(var c=s%i,u=Math.min(o-a,i-c),h=0;h<u;h++)r[c+h]=t[a+h];a+=u,(s+=u)%i===0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(57);const i=n.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),o=n.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s=n.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=n.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=n.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=n.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),h=n.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),l=n.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f=n.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});e.base32=i,e.base32hex=c,e.base32hexpad=h,e.base32hexpadupper=l,e.base32hexupper=u,e.base32pad=s,e.base32padupper=a,e.base32upper=o,e.base32z=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(117),i=r(73),o=r(71),s=r(84),a=r(65);class c{constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:g,byteLength:g,code:y,version:y,multihash:y,bytes:y,_baseCache:g,asCID:g})}toV0(){if(0===this.version)return this;{const{code:t,multihash:e}=this;if(t!==f)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==d)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return c.createV0(e)}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,r=i.create(t,e);return c.createV1(this.code,r)}case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}equals(t){return t&&this.code===t.code&&this.version===t.version&&i.equals(this.multihash,t.multihash)}toString(t){const{bytes:e,version:r,_baseCache:n}=this;return 0===r?h(e,n,t||o.base58btc.encoder):l(e,n,t||s.base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return b(/^0\.0/,v),!(!t||!t[m]&&t.asCID!==t)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof c)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new c(e,r,n,i||p(e,r,n.bytes))}if(null!=t&&!0===t[m]){const{version:e,multihash:r,code:n}=t,o=i.decode(r);return c.create(e,n,o)}return null}static create(t,e,r){if("number"!==typeof e)throw new Error("String codecs are no longer supported");switch(t){case 0:if(e!==f)throw new Error("Version 0 CID must use dag-pb (code: ".concat(f,") block encoding"));return new c(t,e,r,r.bytes);case 1:{const n=p(t,e,r.bytes);return new c(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return c.create(0,f,t)}static createV1(t,e){return c.create(1,t,e)}static decode(t){const[e,r]=c.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=c.inspectBytes(t),r=e.size-e.multihashSize,n=a.coerce(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");const o=n.subarray(e.multihashSize-e.digestSize),s=new i.Digest(e.multihashCode,e.digestSize,o,n);return[0===e.version?c.createV0(s):c.createV1(e.codec,s),t.subarray(e.size)]}static inspectBytes(t){let e=0;const r=()=>{const[r,i]=n.decode(t.subarray(e));return e+=i,r};let i=r(),o=f;if(18===i?(i=0,e=0):1===i&&(o=r()),0!==i&&1!==i)throw new RangeError("Invalid CID version ".concat(i));const s=e,a=r(),c=r(),u=e+c;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u-s,size:u}}static parse(t,e){const[r,n]=u(t,e),i=c.decode(n);return i._baseCache.set(r,t),i}}const u=(t,e)=>{switch(t[0]){case"Q":{const r=e||o.base58btc;return[o.base58btc.prefix,r.decode("".concat(o.base58btc.prefix).concat(t))]}case o.base58btc.prefix:{const r=e||o.base58btc;return[o.base58btc.prefix,r.decode(t)]}case s.base32.prefix:{const r=e||s.base32;return[s.base32.prefix,r.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},h=(t,e,r)=>{const{prefix:n}=r;if(n!==o.base58btc.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));const i=e.get(n);if(null==i){const i=r.encode(t).slice(1);return e.set(n,i),i}return i},l=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(null==i){const i=r.encode(t);return e.set(n,i),i}return i},f=112,d=18,p=(t,e,r)=>{const i=n.encodingLength(t),o=i+n.encodingLength(e),s=new Uint8Array(o+r.byteLength);return n.encodeTo(t,s,0),n.encodeTo(e,s,i),s.set(r,o),s},m=Symbol.for("@ipld/js-cid/CID"),y={writable:!1,configurable:!1,enumerable:!0},g={writable:!1,enumerable:!1,configurable:!1},b=(t,e)=>{if(!t.test("0.0.0-dev"))throw new Error(e);console.warn(e)},v="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n";e.CID=c},function(t,e,r){var n=r(16);r(97),r(482),r(483),r(28),n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},i=new Array(4),o=n.util.createBuffer();function s(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var a=s(),c=null,u=n.util.globalScope,h=u.crypto||u.msCrypto;if(h&&h.getRandomValues&&(c=function(t){return h.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var l="";for(var f in navigator)try{"string"==typeof navigator[f]&&(l+=navigator[f])}catch(d){}a.collect(l),l=null}e&&(e().mousemove((function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)})),e().keypress((function(t){a.collectInt(t.charCode,8)})))}if(n.random)for(var f in a)n.random[f]=a[f];else n.random=a;n.random.createInstance=s,t.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)},function(t,e,r){"use strict";const n=r(288),i=r(99),o=r(174);t.exports=t=>{const e=i(),r=n(t.source),s=o();let a;const c=t.sink(async function*(){yield*e;const t=await s.promise;yield*t}());c.catch((t=>{a=t}));return{reader:r,writer:e,stream:{sink:t=>a?Promise.reject(a):(s.resolve(t),c),source:r},rest:()=>e.end(),write:e.push,read:async()=>(await r.next()).value}}},function(t,e,r){"use strict";t.exports=async t=>{const e=[];for await(const r of t)e.push(r);return e}},function(t,e,r){"use strict";t.exports=async function*(t,e){for await(const r of t)await e(r)&&(yield r)}},function(t,e,r){"use strict";r.d(e,"b",(function(){return I})),r.d(e,"a",(function(){return R})),r.d(e,"c",(function(){return T}));var n=r(53),i=r.n(n),o=r(139),s=r.n(o),a=r(20),c=r(1),u=r(34),h=r(13),l=r(712),f=r(141),d=r(4),p=r(38),m=r(14),y=r(3),g=r(133),b=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const v=new y.a(g.a);function w(t){return null!=t&&t.mnemonic&&t.mnemonic.phrase}class _ extends d.a{isKeystoreAccount(t){return!(!t||!t._isKeystoreAccount)}}function S(t,e){const r=Object(m.b)(Object(m.c)(t,"crypto/ciphertext"));if(Object(c.i)(Object(h.a)(Object(c.b)([e.slice(16,32),r]))).substring(2)!==Object(m.c)(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(t,e,r){if("aes-128-ctr"===Object(m.c)(t,"crypto/cipher")){const n=Object(m.b)(Object(m.c)(t,"crypto/cipherparams/iv")),o=new i.a.Counter(n),s=new i.a.ModeOfOperation.ctr(e,o);return Object(c.a)(s.decrypt(r))}return null}(t,e.slice(0,16),r);n||v.throwError("unsupported cipher",y.a.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const o=e.slice(32,64),s=Object(p.c)(n);if(t.address){let e=t.address.toLowerCase();if("0x"!==e.substring(0,2)&&(e="0x"+e),Object(a.a)(e)!==s)throw new Error("address mismatch")}const l={_isKeystoreAccount:!0,address:s,privateKey:Object(c.i)(n)};if("0.1"===Object(m.c)(t,"x-ethers/version")){const e=Object(m.b)(Object(m.c)(t,"x-ethers/mnemonicCiphertext")),r=Object(m.b)(Object(m.c)(t,"x-ethers/mnemonicCounter")),n=new i.a.Counter(r),s=new i.a.ModeOfOperation.ctr(o,n),a=Object(m.c)(t,"x-ethers/path")||u.b,h=Object(m.c)(t,"x-ethers/locale")||"en",d=Object(c.a)(s.decrypt(e));try{const t=Object(u.c)(d,h),e=u.a.fromMnemonic(t,null,h).derivePath(a);if(e.privateKey!=l.privateKey)throw new Error("mnemonic mismatch");l.mnemonic=e.mnemonic}catch(f){if(f.code!==y.a.errors.INVALID_ARGUMENT||"wordlist"!==f.argument)throw f}}return new _(l)}function E(t,e,r,n,i){return Object(c.a)(Object(l.a)(t,e,r,n,i))}function A(t,e,r,n,i){return Promise.resolve(E(t,e,r,n,i))}function M(t,e,r,n,i){const o=Object(m.a)(e),s=Object(m.c)(t,"crypto/kdf");if(s&&"string"===typeof s){const e=function(t,e){return v.throwArgumentError("invalid key-derivation function parameters",t,e)};if("scrypt"===s.toLowerCase()){const r=Object(m.b)(Object(m.c)(t,"crypto/kdfparams/salt")),a=parseInt(Object(m.c)(t,"crypto/kdfparams/n")),c=parseInt(Object(m.c)(t,"crypto/kdfparams/r")),u=parseInt(Object(m.c)(t,"crypto/kdfparams/p"));a&&c&&u||e("kdf",s),0!==(a&a-1)&&e("N",a);const h=parseInt(Object(m.c)(t,"crypto/kdfparams/dklen"));return 32!==h&&e("dklen",h),n(o,r,a,c,u,64,i)}if("pbkdf2"===s.toLowerCase()){const n=Object(m.b)(Object(m.c)(t,"crypto/kdfparams/salt"));let i=null;const s=Object(m.c)(t,"crypto/kdfparams/prf");"hmac-sha256"===s?i="sha256":"hmac-sha512"===s?i="sha512":e("prf",s);const a=parseInt(Object(m.c)(t,"crypto/kdfparams/c")),c=parseInt(Object(m.c)(t,"crypto/kdfparams/dklen"));return 32!==c&&e("dklen",c),r(o,n,a,c,i)}}return v.throwArgumentError("unsupported key-derivation function","kdf",s)}function I(t,e){const r=JSON.parse(t);return S(r,M(r,e,E,s.a.syncScrypt))}function R(t,e,r){return b(this,void 0,void 0,(function*(){const n=JSON.parse(t);return S(n,yield M(n,e,A,s.a.scrypt,r))}))}function T(t,e,r,n){try{if(Object(a.a)(t.address)!==Object(p.c)(t.privateKey))throw new Error("address/privateKey mismatch");if(w(t)){const e=t.mnemonic;if(u.a.fromMnemonic(e.phrase,null,e.locale).derivePath(e.path||u.b).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(I){return Promise.reject(I)}"function"!==typeof r||n||(n=r,r={}),r||(r={});const o=Object(c.a)(t.privateKey),l=Object(m.a)(e);let d=null,y=null,g=null;if(w(t)){const e=t.mnemonic;d=Object(c.a)(Object(u.f)(e.phrase,e.locale||"en")),y=e.path||u.b,g=e.locale||"en"}let b=r.client;b||(b="ethers.js");let v=null;v=r.salt?Object(c.a)(r.salt):Object(f.a)(32);let _=null;if(r.iv){if(_=Object(c.a)(r.iv),16!==_.length)throw new Error("invalid iv")}else _=Object(f.a)(16);let S=null;if(r.uuid){if(S=Object(c.a)(r.uuid),16!==S.length)throw new Error("invalid uuid")}else S=Object(f.a)(16);let E=1<<17,A=8,M=1;return r.scrypt&&(r.scrypt.N&&(E=r.scrypt.N),r.scrypt.r&&(A=r.scrypt.r),r.scrypt.p&&(M=r.scrypt.p)),s.a.scrypt(l,v,E,A,M,64,n).then((e=>{const r=(e=Object(c.a)(e)).slice(0,16),n=e.slice(16,32),s=e.slice(32,64),a=new i.a.Counter(_),u=new i.a.ModeOfOperation.ctr(r,a),l=Object(c.a)(u.encrypt(o)),p=Object(h.a)(Object(c.b)([n,l])),w={address:t.address.substring(2).toLowerCase(),id:Object(m.d)(S),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Object(c.i)(_).substring(2)},ciphertext:Object(c.i)(l).substring(2),kdf:"scrypt",kdfparams:{salt:Object(c.i)(v).substring(2),n:E,dklen:32,p:M,r:A},mac:p.substring(2)}};if(d){const t=Object(f.a)(16),e=new i.a.Counter(t),r=new i.a.ModeOfOperation.ctr(s,e),n=Object(c.a)(r.encrypt(d)),o=new Date,a=o.getUTCFullYear()+"-"+Object(m.e)(o.getUTCMonth()+1,2)+"-"+Object(m.e)(o.getUTCDate(),2)+"T"+Object(m.e)(o.getUTCHours(),2)+"-"+Object(m.e)(o.getUTCMinutes(),2)+"-"+Object(m.e)(o.getUTCSeconds(),2)+".0Z";w["x-ethers"]={client:b,gethFilename:"UTC--"+a+"--"+w.address,mnemonicCounter:Object(c.i)(t).substring(2),mnemonicCiphertext:Object(c.i)(n).substring(2),path:y,locale:g,version:"0.1"}}return JSON.stringify(w)}))}},function(t,e,r){"use strict";var n=r(10),i=r(146),o=r(148),s=r(149),a=r(64);function c(t){a.call(this,"digest"),this._hash=t}n(c,a),c.prototype._update=function(t){this._hash.update(t)},c.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new c(s(t))}},function(t,e,r){"use strict";var n=r(15).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=h,this.end=l,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function h(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"===typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"===typeof t},e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=t.isBuffer}).call(this,r(19).Buffer)},function(t,e,r){(function(e){t.exports=function(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=0;o<n;++o)i[o]=t[o]^r[o];return i}}).call(this,r(19).Buffer)},function(t,e,r){"use strict";var n=r(56),i=r(51);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(t,e,r){"use strict";const n=r(10),i=r(162).Reporter,o=r(160).Buffer;function s(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return a.isEncoderBuffer(t)||(t=new a(t,e)),this.length+=t.length,t}),this);else if("number"===typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"===typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(s,i),e.DecoderBuffer=s,s.isDecoderBuffer=function(t){if(t instanceof s)return!0;return"object"===typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"===typeof t.offset&&"number"===typeof t.length&&"function"===typeof t.save&&"function"===typeof t.restore&&"function"===typeof t.isEmpty&&"function"===typeof t.readUInt8&&"function"===typeof t.skip&&"function"===typeof t.raw},s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(t){const e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new s(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=a,a.isEncoderBuffer=function(t){if(t instanceof a)return!0;return"object"===typeof t&&"EncoderBuffer"===t.constructor.name&&"number"===typeof t.length&&"function"===typeof t.join},a.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length})):("number"===typeof this.value?t[e]=this.value:"string"===typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e,r){var n=r(16);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.aes.Algorithm(t,e)}))}r(278),r(279),r(28),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},n.aes.createEncryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},n.aes.createDecryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){h||l();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return d(r._w,t,e,!1)},decrypt:function(t,e){return d(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var i=0;i<e.length;++i)r.putByte(e[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var o=e.length();if(16===o||24===o||32===o){o>>>=2;for(i=0;i<o;++i)r.push(e.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=f(r,t.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(t,e){return h||l(),f(t,e)},n.aes._updateBlock=d,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var o,s,a,c,u,h=!1;function l(){h=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;o=new Array(256),s=new Array(256),c=new Array(4),u=new Array(4);for(e=0;e<4;++e)c[e]=new Array(256),u[e]=new Array(256);var r,n,i,l,f,d,p,m=0,y=0;for(e=0;e<256;++e){l=(l=y^y<<1^y<<2^y<<3^y<<4)>>8^255&l^99,o[m]=l,s[l]=m,d=(f=t[l])<<24^l<<16^l<<8^l^f,p=((r=t[m])^(n=t[r])^(i=t[n]))<<24^(m^i)<<16^(m^n^i)<<8^m^r^i;for(var g=0;g<4;++g)c[g][m]=d,u[g][l]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;0===m?m=y=1:(m=r^t[t[t[r^i]]],y^=t[t[y]])}}function f(t,e){for(var r,n=t.slice(0),i=1,s=n.length,c=4*(s+6+1),h=s;h<c;++h)r=n[h-1],h%s===0?(r=o[r>>>16&255]<<24^o[r>>>8&255]<<16^o[255&r]<<8^o[r>>>24]^a[i]<<24,i++):s>6&&h%s===4&&(r=o[r>>>24]<<24^o[r>>>16&255]<<16^o[r>>>8&255]<<8^o[255&r]),n[h]=n[h-s]^r;if(e){for(var l,f=u[0],d=u[1],p=u[2],m=u[3],y=n.slice(0),g=(h=0,(c=n.length)-4);h<c;h+=4,g-=4)if(0===h||h===c-4)y[h]=n[g],y[h+1]=n[g+3],y[h+2]=n[g+2],y[h+3]=n[g+1];else for(var b=0;b<4;++b)l=n[g+b],y[h+(3&-b)]=f[o[l>>>24]]^d[o[l>>>16&255]]^p[o[l>>>8&255]]^m[o[255&l]];n=y}return n}function d(t,e,r,n){var i,a,h,l,f,d,p,m,y,g,b,v,w=t.length/4-1;n?(i=u[0],a=u[1],h=u[2],l=u[3],f=s):(i=c[0],a=c[1],h=c[2],l=c[3],f=o),d=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],y=e[n?1:3]^t[3];for(var _=3,S=1;S<w;++S)g=i[d>>>24]^a[p>>>16&255]^h[m>>>8&255]^l[255&y]^t[++_],b=i[p>>>24]^a[m>>>16&255]^h[y>>>8&255]^l[255&d]^t[++_],v=i[m>>>24]^a[y>>>16&255]^h[d>>>8&255]^l[255&p]^t[++_],y=i[y>>>24]^a[d>>>16&255]^h[p>>>8&255]^l[255&m]^t[++_],d=g,p=b,m=v;r[0]=f[d>>>24]<<24^f[p>>>16&255]<<16^f[m>>>8&255]<<8^f[255&y]^t[++_],r[n?3:1]=f[p>>>24]<<24^f[m>>>16&255]<<16^f[y>>>8&255]<<8^f[255&d]^t[++_],r[2]=f[m>>>24]<<24^f[y>>>16&255]<<16^f[d>>>8&255]<<8^f[255&p]^t[++_],r[n?1:3]=f[y>>>24]<<24^f[d>>>16&255]<<16^f[p>>>8&255]<<8^f[255&m]^t[++_]}function p(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=t,i.call(e,r)},e}},function(t,e,r){var n=r(16);n.pki=n.pki||{};var i=t.exports=n.pki.oids=n.oids=n.oids||{};function o(t,e){i[t]=e,i[e]=t}function s(t,e){i[t]=e}o("1.2.840.113549.1.1.1","rsaEncryption"),o("1.2.840.113549.1.1.4","md5WithRSAEncryption"),o("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),o("1.2.840.113549.1.1.7","RSAES-OAEP"),o("1.2.840.113549.1.1.8","mgf1"),o("1.2.840.113549.1.1.9","pSpecified"),o("1.2.840.113549.1.1.10","RSASSA-PSS"),o("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),o("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),o("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),o("1.3.101.112","EdDSA25519"),o("1.2.840.10040.4.3","dsa-with-sha1"),o("1.3.14.3.2.7","desCBC"),o("1.3.14.3.2.26","sha1"),o("1.3.14.3.2.29","sha1WithRSASignature"),o("2.16.840.1.101.3.4.2.1","sha256"),o("2.16.840.1.101.3.4.2.2","sha384"),o("2.16.840.1.101.3.4.2.3","sha512"),o("2.16.840.1.101.3.4.2.4","sha224"),o("2.16.840.1.101.3.4.2.5","sha512-224"),o("2.16.840.1.101.3.4.2.6","sha512-256"),o("1.2.840.113549.2.2","md2"),o("1.2.840.113549.2.5","md5"),o("1.2.840.113549.1.7.1","data"),o("1.2.840.113549.1.7.2","signedData"),o("1.2.840.113549.1.7.3","envelopedData"),o("1.2.840.113549.1.7.4","signedAndEnvelopedData"),o("1.2.840.113549.1.7.5","digestedData"),o("1.2.840.113549.1.7.6","encryptedData"),o("1.2.840.113549.1.9.1","emailAddress"),o("1.2.840.113549.1.9.2","unstructuredName"),o("1.2.840.113549.1.9.3","contentType"),o("1.2.840.113549.1.9.4","messageDigest"),o("1.2.840.113549.1.9.5","signingTime"),o("1.2.840.113549.1.9.6","counterSignature"),o("1.2.840.113549.1.9.7","challengePassword"),o("1.2.840.113549.1.9.8","unstructuredAddress"),o("1.2.840.113549.1.9.14","extensionRequest"),o("1.2.840.113549.1.9.20","friendlyName"),o("1.2.840.113549.1.9.21","localKeyId"),o("1.2.840.113549.1.9.22.1","x509Certificate"),o("1.2.840.113549.1.12.10.1.1","keyBag"),o("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),o("1.2.840.113549.1.12.10.1.3","certBag"),o("1.2.840.113549.1.12.10.1.4","crlBag"),o("1.2.840.113549.1.12.10.1.5","secretBag"),o("1.2.840.113549.1.12.10.1.6","safeContentsBag"),o("1.2.840.113549.1.5.13","pkcs5PBES2"),o("1.2.840.113549.1.5.12","pkcs5PBKDF2"),o("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),o("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),o("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),o("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),o("1.2.840.113549.2.7","hmacWithSHA1"),o("1.2.840.113549.2.8","hmacWithSHA224"),o("1.2.840.113549.2.9","hmacWithSHA256"),o("1.2.840.113549.2.10","hmacWithSHA384"),o("1.2.840.113549.2.11","hmacWithSHA512"),o("1.2.840.113549.3.7","des-EDE3-CBC"),o("2.16.840.1.101.3.4.1.2","aes128-CBC"),o("2.16.840.1.101.3.4.1.22","aes192-CBC"),o("2.16.840.1.101.3.4.1.42","aes256-CBC"),o("2.5.4.3","commonName"),o("2.5.4.4","surname"),o("2.5.4.5","serialNumber"),o("2.5.4.6","countryName"),o("2.5.4.7","localityName"),o("2.5.4.8","stateOrProvinceName"),o("2.5.4.9","streetAddress"),o("2.5.4.10","organizationName"),o("2.5.4.11","organizationalUnitName"),o("2.5.4.12","title"),o("2.5.4.13","description"),o("2.5.4.15","businessCategory"),o("2.5.4.17","postalCode"),o("2.5.4.42","givenName"),o("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),o("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),o("2.16.840.1.113730.1.1","nsCertType"),o("2.16.840.1.113730.1.13","nsComment"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),o("2.5.29.14","subjectKeyIdentifier"),o("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),o("2.5.29.17","subjectAltName"),o("2.5.29.18","issuerAltName"),o("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),o("2.5.29.31","cRLDistributionPoints"),o("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),o("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),o("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),o("1.3.6.1.4.1.11129.2.4.2","timestampList"),o("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),o("1.3.6.1.5.5.7.3.1","serverAuth"),o("1.3.6.1.5.5.7.3.2","clientAuth"),o("1.3.6.1.5.5.7.3.3","codeSigning"),o("1.3.6.1.5.5.7.3.4","emailProtection"),o("1.3.6.1.5.5.7.3.8","timeStamping")},function(t,e,r){const n=r(289);t.exports=t=>{let e;"function"===typeof(t=t||{})?(e=t,t={}):e=t.onEnd;let r,i,o,s=new n;const a=t=>i?i(t):(s.push(t),r),c=t=>o?r:a({done:!1,value:t}),u=t=>o?r:(o=!0,t?(t=>(s=new n,i?i({error:t}):(s.push({error:t}),r)))(t):a({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:()=>{if(!s.isEmpty()){if(t.writev){let t;const e=[];for(;!s.isEmpty();){if(t=s.shift(),t.error)throw t.error;e.push(t.value)}return{done:t.done,value:e}}const e=s.shift();if(e.error)throw e.error;return e}return o?{done:!0}:new Promise(((e,n)=>{i=o=>(i=null,o.error?n(o.error):t.writev&&!o.done?e({done:o.done,value:[o.value]}):e(o),r)}))},return:()=>(s=new n,u(),{done:!0}),throw:t=>(u(t),{done:!0}),push:c,end:u},!e)return r;const h=r;return r={[Symbol.asyncIterator](){return this},next:()=>h.next(),throw:t=>(h.throw(t),e&&(e(t),e=null),{done:!0}),return:()=>(h.return(),e&&(e(),e=null),{done:!0}),push:c,end:t=>(h.end(t),e&&(e(t),e=null),r)},r}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logCipherState=e.logRemoteEphemeralKey=e.logRemoteStaticKey=e.logLocalEphemeralKeys=e.logLocalStaticKeys=e.logger=void 0;const i=n(r(5)),o=r(177),s=r(29);let a;e.logger=(0,i.default)("libp2p:noise"),a=o.DUMP_SESSION_KEYS?e.logger:()=>{},e.logLocalStaticKeys=function(t){a("LOCAL_STATIC_PUBLIC_KEY ".concat((0,s.toString)(t.publicKey,"hex"))),a("LOCAL_STATIC_PRIVATE_KEY ".concat((0,s.toString)(t.privateKey,"hex")))},e.logLocalEphemeralKeys=function(t){t?(a("LOCAL_PUBLIC_EPHEMERAL_KEY ".concat((0,s.toString)(t.publicKey,"hex"))),a("LOCAL_PRIVATE_EPHEMERAL_KEY ".concat((0,s.toString)(t.privateKey,"hex")))):a("Missing local ephemeral keys.")},e.logRemoteStaticKey=function(t){a("REMOTE_STATIC_PUBLIC_KEY ".concat((0,s.toString)(t,"hex")))},e.logRemoteEphemeralKey=function(t){a("REMOTE_EPHEMERAL_PUBLIC_KEY ".concat((0,s.toString)(t,"hex")))},e.logCipherState=function(t){t.cs1&&t.cs2?(a("CIPHER_STATE_1 ".concat(t.cs1.n," ").concat((0,s.toString)(t.cs1.k,"hex"))),a("CIPHER_STATE_2 ".concat(t.cs2.n," ").concat((0,s.toString)(t.cs2.k,"hex")))):a("Missing cipher state.")}},function(t,e,r){"use strict";const n=r(554),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:o}=Object,s=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=t=>{const e=[];for(const r in t)i.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)o.call(t,n)&&e.push(n)}return e};function h(t){return Array.isArray(t)?function(t){const e=t.slice(0,0);return u(t).forEach((r=>{s(e,r,h(t[r]))})),e}(t):n(t)?function(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return u(t).forEach((r=>{s(e,r,h(t[r]))})),e}(t):t}const l=(t,e,r,n)=>(r.forEach((r=>{"undefined"===typeof e[r]&&n.ignoreUndefined||(r in t&&t[r]!==Object.getPrototypeOf(t)?s(t,r,f(t[r],e[r],n)):s(t,r,h(e[r])))})),t);function f(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?((t,e,r)=>{let n=t.slice(0,0),o=0;return[t,e].forEach((e=>{const a=[];for(let r=0;r<e.length;r++)i.call(e,r)&&(a.push(String(r)),s(n,o++,e===t?e[r]:h(e[r])));n=l(n,e,u(e).filter((t=>!a.includes(t))),r)})),n})(t,e,r):n(e)&&n(t)?l(t,e,u(e),r):h(e)}t.exports=function(){const t=f(h(c),this!==a&&this||{},c);let e={_:{}};for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];for(const s of i)if(void 0!==s){if(!n(s))throw new TypeError("`"+s+"` is not an Option Object");e=f(e,{_:s},t)}return e._}},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-circuit"]||(n.roots["libp2p-circuit"]={});a.CircuitRelay=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type=1,t.prototype.srcPeer=null,t.prototype.dstPeer=null,t.prototype.code=100,t.encode=function(t,e){return e||(e=o.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.srcPeer&&Object.hasOwnProperty.call(t,"srcPeer")&&a.CircuitRelay.Peer.encode(t.srcPeer,e.uint32(18).fork()).ldelim(),null!=t.dstPeer&&Object.hasOwnProperty.call(t,"dstPeer")&&a.CircuitRelay.Peer.encode(t.dstPeer,e.uint32(26).fork()).ldelim(),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&e.uint32(32).int32(t.code),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.CircuitRelay;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.type=t.int32();break;case 2:n.srcPeer=a.CircuitRelay.Peer.decode(t,t.uint32());break;case 3:n.dstPeer=a.CircuitRelay.Peer.decode(t,t.uint32());break;case 4:n.code=t.int32();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.CircuitRelay)return t;var e=new a.CircuitRelay;switch(t.type){case"HOP":case 1:e.type=1;break;case"STOP":case 2:e.type=2;break;case"STATUS":case 3:e.type=3;break;case"CAN_HOP":case 4:e.type=4}if(null!=t.srcPeer){if("object"!==typeof t.srcPeer)throw TypeError(".CircuitRelay.srcPeer: object expected");e.srcPeer=a.CircuitRelay.Peer.fromObject(t.srcPeer)}if(null!=t.dstPeer){if("object"!==typeof t.dstPeer)throw TypeError(".CircuitRelay.dstPeer: object expected");e.dstPeer=a.CircuitRelay.Peer.fromObject(t.dstPeer)}switch(t.code){case"SUCCESS":case 100:e.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:e.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:e.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:e.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:e.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:e.code=260;break;case"HOP_CANT_DIAL_DST":case 261:e.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:e.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:e.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:e.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:e.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:e.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:e.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:e.code=351;break;case"STOP_RELAY_REFUSED":case 390:e.code=390;break;case"MALFORMED_MESSAGE":case 400:e.code=400}return e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.type=e.enums===String?"HOP":1,r.srcPeer=null,r.dstPeer=null,r.code=e.enums===String?"SUCCESS":100),null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?a.CircuitRelay.Type[t.type]:t.type),null!=t.srcPeer&&t.hasOwnProperty("srcPeer")&&(r.srcPeer=a.CircuitRelay.Peer.toObject(t.srcPeer,e)),null!=t.dstPeer&&t.hasOwnProperty("dstPeer")&&(r.dstPeer=a.CircuitRelay.Peer.toObject(t.dstPeer,e)),null!=t.code&&t.hasOwnProperty("code")&&(r.code=e.enums===String?a.CircuitRelay.Status[t.code]:t.code),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.Status=function(){var t={},e=Object.create(t);return e[t[100]="SUCCESS"]=100,e[t[220]="HOP_SRC_ADDR_TOO_LONG"]=220,e[t[221]="HOP_DST_ADDR_TOO_LONG"]=221,e[t[250]="HOP_SRC_MULTIADDR_INVALID"]=250,e[t[251]="HOP_DST_MULTIADDR_INVALID"]=251,e[t[260]="HOP_NO_CONN_TO_DST"]=260,e[t[261]="HOP_CANT_DIAL_DST"]=261,e[t[262]="HOP_CANT_OPEN_DST_STREAM"]=262,e[t[270]="HOP_CANT_SPEAK_RELAY"]=270,e[t[280]="HOP_CANT_RELAY_TO_SELF"]=280,e[t[320]="STOP_SRC_ADDR_TOO_LONG"]=320,e[t[321]="STOP_DST_ADDR_TOO_LONG"]=321,e[t[350]="STOP_SRC_MULTIADDR_INVALID"]=350,e[t[351]="STOP_DST_MULTIADDR_INVALID"]=351,e[t[390]="STOP_RELAY_REFUSED"]=390,e[t[400]="MALFORMED_MESSAGE"]=400,e}(),t.Type=function(){var t={},e=Object.create(t);return e[t[1]="HOP"]=1,e[t[2]="STOP"]=2,e[t[3]="STATUS"]=3,e[t[4]="CAN_HOP"]=4,e}(),t.Peer=function(){function t(t){if(this.addrs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.id=s.newBuffer([]),t.prototype.addrs=s.emptyArray,t.encode=function(t,e){if(e||(e=o.create()),e.uint32(10).bytes(t.id),null!=t.addrs&&t.addrs.length)for(var r=0;r<t.addrs.length;++r)e.uint32(18).bytes(t.addrs[r]);return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.CircuitRelay.Peer;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.id=t.bytes();break;case 2:n.addrs&&n.addrs.length||(n.addrs=[]),n.addrs.push(t.bytes());break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("id"))throw s.ProtocolError("missing required 'id'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.CircuitRelay.Peer)return t;var e=new a.CircuitRelay.Peer;if(null!=t.id&&("string"===typeof t.id?s.base64.decode(t.id,e.id=s.newBuffer(s.base64.length(t.id)),0):t.id.length&&(e.id=t.id)),t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");e.addrs=[];for(var r=0;r<t.addrs.length;++r)"string"===typeof t.addrs[r]?s.base64.decode(t.addrs[r],e.addrs[r]=s.newBuffer(s.base64.length(t.addrs[r])),0):t.addrs[r].length&&(e.addrs[r]=t.addrs[r])}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.addrs=[]),e.defaults&&(e.bytes===String?r.id="":(r.id=[],e.bytes!==Array&&(r.id=s.newBuffer(r.id)))),null!=t.id&&t.hasOwnProperty("id")&&(r.id=e.bytes===String?s.base64.encode(t.id,0,t.id.length):e.bytes===Array?Array.prototype.slice.call(t.id):t.id),t.addrs&&t.addrs.length){r.addrs=[];for(var n=0;n<t.addrs.length;++n)r.addrs[n]=e.bytes===String?s.base64.encode(t.addrs[n],0,t.addrs[n].length):e.bytes===Array?Array.prototype.slice.call(t.addrs[n]):t.addrs[n]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(65),i=r(73);const o=n.coerce,s={code:0,name:"identity",encode:o,digest:t=>i.create(0,o(t))};e.identity=s},function(t,e,r){"use strict";const n=r(277),i=r(477),o=r(166);e.aes=i,e.hmac=n,e.keys=o,e.randomBytes=r(122),e.pbkdf2=r(503)},function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r(4),i=r(3);var o=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const s=new i.a("abstract-signer/5.6.2"),a=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],c=[i.a.errors.INSUFFICIENT_FUNDS,i.a.errors.NONCE_EXPIRED,i.a.errors.REPLACEMENT_UNDERPRICED];class u{constructor(){s.checkAbstract(new.target,u),Object(n.d)(this,"_isSigner",!0)}getBalance(t){return o(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return o(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return o(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield Object(n.f)(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return o(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield Object(n.f)(this.checkTransaction(t));return yield this.provider.call(r,e)}))}sendTransaction(t){return o(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t),r=yield this.signTransaction(e);return yield this.provider.sendTransaction(r)}))}getChainId(){return o(this,void 0,void 0,(function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return o(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return o(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(t){return o(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)}))}checkTransaction(t){for(const r in t)-1===a.indexOf(r)&&s.throwArgumentError("invalid transaction key: "+r,"transaction",t);const e=Object(n.g)(t);return null==e.from?e.from=this.getAddress():e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>(e[0].toLowerCase()!==e[1].toLowerCase()&&s.throwArgumentError("from address mismatch","transaction",t),e[0]))),e}populateTransaction(t){return o(this,void 0,void 0,(function*(){const e=yield Object(n.f)(this.checkTransaction(t));null!=e.to&&(e.to=Promise.resolve(e.to).then((t=>o(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.resolveName(t);return null==e&&s.throwArgumentError("provided ENS name resolves to null","tx.to",t),e})))),e.to.catch((t=>{})));const r=null!=e.maxFeePerGas||null!=e.maxPriorityFeePerGas;if(null==e.gasPrice||2!==e.type&&!r?0!==e.type&&1!==e.type||!r||s.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):s.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==e.type&&null!=e.type||null==e.maxFeePerGas||null==e.maxPriorityFeePerGas)if(0===e.type||1===e.type)null==e.gasPrice&&(e.gasPrice=this.getGasPrice());else{const t=yield this.getFeeData();if(null==e.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(e.type=2,null!=e.gasPrice){const t=e.gasPrice;delete e.gasPrice,e.maxFeePerGas=t,e.maxPriorityFeePerGas=t}else null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(r&&s.throwError("network does not support EIP-1559",i.a.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==e.gasPrice&&(e.gasPrice=t.gasPrice),e.type=0):s.throwError("failed to get consistent fee data",i.a.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===e.type&&(null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else e.type=2;return null==e.nonce&&(e.nonce=this.getTransactionCount("pending")),null==e.gasLimit&&(e.gasLimit=this.estimateGas(e).catch((t=>{if(c.indexOf(t.code)>=0)throw t;return s.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.a.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))),null==e.chainId?e.chainId=this.getChainId():e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>(0!==e[1]&&e[0]!==e[1]&&s.throwArgumentError("chainId address mismatch","transaction",t),e[0]))),yield Object(n.f)(e)}))}_checkProvider(t){this.provider||s.throwError("missing provider",i.a.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!(!t||!t._isSigner)}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(1),i=r(4);class o{constructor(t){Object(i.d)(this,"alphabet",t),Object(i.d)(this,"base",t.length),Object(i.d)(this,"_alphabetMap",{}),Object(i.d)(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}encode(t){let e=Object(n.a)(t);if(0===e.length)return"";let r=[0];for(let n=0;n<e.length;++n){let t=e[n];for(let e=0;e<r.length;++e)t+=r[e]<<8,r[e]=t%this.base,t=t/this.base|0;for(;t>0;)r.push(t%this.base),t=t/this.base|0}let i="";for(let n=0;0===e[n]&&n<e.length-1;++n)i+=this._leader;for(let n=r.length-1;n>=0;--n)i+=this.alphabet[r[n]];return i}decode(t){if("string"!==typeof t)throw new TypeError("Expected String");let e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(let r=0;r<t.length;r++){let n=this._alphabetMap[t[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let t=0;t<e.length;++t)i+=e[t]*this.base,e[t]=255&i,i>>=8;for(;i>0;)e.push(255&i),i>>=8}for(let r=0;t[r]===this._leader&&r<t.length-1;++r)e.push(0);return Object(n.a)(new Uint8Array(e.reverse()))}}new o("abcdefghijklmnopqrstuvwxyz234567");const s=new o("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"protobufPackage",(function(){return c})),r.d(e,"PagingInfo_Direction",(function(){return u})),r.d(e,"pagingInfo_DirectionFromJSON",(function(){return l})),r.d(e,"pagingInfo_DirectionToJSON",(function(){return f})),r.d(e,"HistoryResponse_Error",(function(){return h})),r.d(e,"historyResponse_ErrorFromJSON",(function(){return d})),r.d(e,"historyResponse_ErrorToJSON",(function(){return p})),r.d(e,"Index",(function(){return y})),r.d(e,"PagingInfo",(function(){return b})),r.d(e,"ContentFilter",(function(){return v})),r.d(e,"HistoryQuery",(function(){return w})),r.d(e,"HistoryResponse",(function(){return _})),r.d(e,"HistoryRPC",(function(){return S}));var n=r(6),i=r.n(n),o=r(2),s=r.n(o),a=r(26);const c="waku.v2.store.v2beta4";var u,h;function l(t){switch(t){case 0:case"DIRECTION_BACKWARD_UNSPECIFIED":return u.DIRECTION_BACKWARD_UNSPECIFIED;case 1:case"DIRECTION_FORWARD":return u.DIRECTION_FORWARD;default:return u.UNRECOGNIZED}}function f(t){switch(t){case u.DIRECTION_BACKWARD_UNSPECIFIED:return"DIRECTION_BACKWARD_UNSPECIFIED";case u.DIRECTION_FORWARD:return"DIRECTION_FORWARD";default:return"UNKNOWN"}}function d(t){switch(t){case 0:case"ERROR_NONE_UNSPECIFIED":return h.ERROR_NONE_UNSPECIFIED;case 1:case"ERROR_INVALID_CURSOR":return h.ERROR_INVALID_CURSOR;default:return h.UNRECOGNIZED}}function p(t){switch(t){case h.ERROR_NONE_UNSPECIFIED:return"ERROR_NONE_UNSPECIFIED";case h.ERROR_INVALID_CURSOR:return"ERROR_INVALID_CURSOR";default:return"UNKNOWN"}}function m(){return{digest:new Uint8Array,receivedTime:i.a.ZERO,senderTime:i.a.ZERO,pubsubTopic:""}}!function(t){t[t.DIRECTION_BACKWARD_UNSPECIFIED=0]="DIRECTION_BACKWARD_UNSPECIFIED",t[t.DIRECTION_FORWARD=1]="DIRECTION_FORWARD",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED"}(u||(u={})),function(t){t[t.ERROR_NONE_UNSPECIFIED=0]="ERROR_NONE_UNSPECIFIED",t[t.ERROR_INVALID_CURSOR=1]="ERROR_INVALID_CURSOR",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED"}(h||(h={}));const y={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.digest.length&&e.uint32(10).bytes(t.digest),t.receivedTime.isZero()||e.uint32(16).sint64(t.receivedTime),t.senderTime.isZero()||e.uint32(24).sint64(t.senderTime),""!==t.pubsubTopic&&e.uint32(34).string(t.pubsubTopic),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=m();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.digest=r.bytes();break;case 2:i.receivedTime=r.sint64();break;case 3:i.senderTime=r.sint64();break;case 4:i.pubsubTopic=r.string();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({digest:R(t.digest)?M(t.digest):new Uint8Array,receivedTime:R(t.receivedTime)?i.a.fromString(t.receivedTime):i.a.ZERO,senderTime:R(t.senderTime)?i.a.fromString(t.senderTime):i.a.ZERO,pubsubTopic:R(t.pubsubTopic)?String(t.pubsubTopic):""}),toJSON(t){const e={};return void 0!==t.digest&&(e.digest=function(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return I(e.join(""))}(void 0!==t.digest?t.digest:new Uint8Array)),void 0!==t.receivedTime&&(e.receivedTime=(t.receivedTime||i.a.ZERO).toString()),void 0!==t.senderTime&&(e.senderTime=(t.senderTime||i.a.ZERO).toString()),void 0!==t.pubsubTopic&&(e.pubsubTopic=t.pubsubTopic),e},fromPartial(t){var e,r;const n=m();return n.digest=null!==(e=t.digest)&&void 0!==e?e:new Uint8Array,n.receivedTime=void 0!==t.receivedTime&&null!==t.receivedTime?i.a.fromValue(t.receivedTime):i.a.ZERO,n.senderTime=void 0!==t.senderTime&&null!==t.senderTime?i.a.fromValue(t.senderTime):i.a.ZERO,n.pubsubTopic=null!==(r=t.pubsubTopic)&&void 0!==r?r:"",n}};function g(){return{pageSize:i.a.UZERO,cursor:void 0,direction:0}}const b={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return t.pageSize.isZero()||e.uint32(8).uint64(t.pageSize),void 0!==t.cursor&&y.encode(t.cursor,e.uint32(18).fork()).ldelim(),0!==t.direction&&e.uint32(24).int32(t.direction),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=g();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.pageSize=r.uint64();break;case 2:i.cursor=y.decode(r,r.uint32());break;case 3:i.direction=r.int32();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({pageSize:R(t.pageSize)?i.a.fromString(t.pageSize):i.a.UZERO,cursor:R(t.cursor)?y.fromJSON(t.cursor):void 0,direction:R(t.direction)?l(t.direction):0}),toJSON(t){const e={};return void 0!==t.pageSize&&(e.pageSize=(t.pageSize||i.a.UZERO).toString()),void 0!==t.cursor&&(e.cursor=t.cursor?y.toJSON(t.cursor):void 0),void 0!==t.direction&&(e.direction=f(t.direction)),e},fromPartial(t){var e;const r=g();return r.pageSize=void 0!==t.pageSize&&null!==t.pageSize?i.a.fromValue(t.pageSize):i.a.UZERO,r.cursor=void 0!==t.cursor&&null!==t.cursor?y.fromPartial(t.cursor):void 0,r.direction=null!==(e=t.direction)&&void 0!==e?e:0,r}};const v={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return""!==t.contentTopic&&e.uint32(10).string(t.contentTopic),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={contentTopic:""};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.contentTopic=r.string();else r.skipType(7&t)}return i},fromJSON:t=>({contentTopic:R(t.contentTopic)?String(t.contentTopic):""}),toJSON(t){const e={};return void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),e},fromPartial(t){var e;const r={contentTopic:""};return r.contentTopic=null!==(e=t.contentTopic)&&void 0!==e?e:"",r}};const w={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();void 0!==t.pubSubTopic&&e.uint32(18).string(t.pubSubTopic);for(const r of t.contentFilters)v.encode(r,e.uint32(26).fork()).ldelim();return void 0!==t.pagingInfo&&b.encode(t.pagingInfo,e.uint32(34).fork()).ldelim(),void 0!==t.startTime&&e.uint32(40).sint64(t.startTime),void 0!==t.endTime&&e.uint32(48).sint64(t.endTime),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 2:i.pubSubTopic=r.string();break;case 3:i.contentFilters.push(v.decode(r,r.uint32()));break;case 4:i.pagingInfo=b.decode(r,r.uint32());break;case 5:i.startTime=r.sint64();break;case 6:i.endTime=r.sint64();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({pubSubTopic:R(t.pubSubTopic)?String(t.pubSubTopic):void 0,contentFilters:Array.isArray(null===t||void 0===t?void 0:t.contentFilters)?t.contentFilters.map((t=>v.fromJSON(t))):[],pagingInfo:R(t.pagingInfo)?b.fromJSON(t.pagingInfo):void 0,startTime:R(t.startTime)?i.a.fromString(t.startTime):void 0,endTime:R(t.endTime)?i.a.fromString(t.endTime):void 0}),toJSON(t){const e={};return void 0!==t.pubSubTopic&&(e.pubSubTopic=t.pubSubTopic),t.contentFilters?e.contentFilters=t.contentFilters.map((t=>t?v.toJSON(t):void 0)):e.contentFilters=[],void 0!==t.pagingInfo&&(e.pagingInfo=t.pagingInfo?b.toJSON(t.pagingInfo):void 0),void 0!==t.startTime&&(e.startTime=(t.startTime||void 0).toString()),void 0!==t.endTime&&(e.endTime=(t.endTime||void 0).toString()),e},fromPartial(t){var e,r;const n={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};return n.pubSubTopic=null!==(e=t.pubSubTopic)&&void 0!==e?e:void 0,n.contentFilters=(null===(r=t.contentFilters)||void 0===r?void 0:r.map((t=>v.fromPartial(t))))||[],n.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?b.fromPartial(t.pagingInfo):void 0,n.startTime=void 0!==t.startTime&&null!==t.startTime?i.a.fromValue(t.startTime):void 0,n.endTime=void 0!==t.endTime&&null!==t.endTime?i.a.fromValue(t.endTime):void 0,n}};const _={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();for(const r of t.messages)a.a.encode(r,e.uint32(18).fork()).ldelim();return void 0!==t.pagingInfo&&b.encode(t.pagingInfo,e.uint32(26).fork()).ldelim(),0!==t.error&&e.uint32(32).int32(t.error),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={messages:[],pagingInfo:void 0,error:0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 2:i.messages.push(a.a.decode(r,r.uint32()));break;case 3:i.pagingInfo=b.decode(r,r.uint32());break;case 4:i.error=r.int32();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({messages:Array.isArray(null===t||void 0===t?void 0:t.messages)?t.messages.map((t=>a.a.fromJSON(t))):[],pagingInfo:R(t.pagingInfo)?b.fromJSON(t.pagingInfo):void 0,error:R(t.error)?d(t.error):0}),toJSON(t){const e={};return t.messages?e.messages=t.messages.map((t=>t?a.a.toJSON(t):void 0)):e.messages=[],void 0!==t.pagingInfo&&(e.pagingInfo=t.pagingInfo?b.toJSON(t.pagingInfo):void 0),void 0!==t.error&&(e.error=p(t.error)),e},fromPartial(t){var e,r;const n={messages:[],pagingInfo:void 0,error:0};return n.messages=(null===(e=t.messages)||void 0===e?void 0:e.map((t=>a.a.fromPartial(t))))||[],n.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?b.fromPartial(t.pagingInfo):void 0,n.error=null!==(r=t.error)&&void 0!==r?r:0,n}};const S={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return""!==t.requestId&&e.uint32(10).string(t.requestId),void 0!==t.query&&w.encode(t.query,e.uint32(18).fork()).ldelim(),void 0!==t.response&&_.encode(t.response,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={requestId:"",query:void 0,response:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.requestId=r.string();break;case 2:i.query=w.decode(r,r.uint32());break;case 3:i.response=_.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({requestId:R(t.requestId)?String(t.requestId):"",query:R(t.query)?w.fromJSON(t.query):void 0,response:R(t.response)?_.fromJSON(t.response):void 0}),toJSON(t){const e={};return void 0!==t.requestId&&(e.requestId=t.requestId),void 0!==t.query&&(e.query=t.query?w.toJSON(t.query):void 0),void 0!==t.response&&(e.response=t.response?_.toJSON(t.response):void 0),e},fromPartial(t){var e;const r={requestId:"",query:void 0,response:void 0};return r.requestId=null!==(e=t.requestId)&&void 0!==e?e:"",r.query=void 0!==t.query&&null!==t.query?w.fromPartial(t.query):void 0,r.response=void 0!==t.response&&null!==t.response?_.fromPartial(t.response):void 0,r}};var E=(()=>{if("undefined"!==typeof E)return E;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw"Unable to locate global object"})();const A=E.atob||(t=>E.Buffer.from(t,"base64").toString("binary"));function M(t){const e=A(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const I=E.btoa||(t=>E.Buffer.from(t,"binary").toString("base64"));function R(t){return null!==t&&void 0!==t}s.a.util.Long!==i.a&&(s.a.util.Long=i.a,s.a.configure())}.call(this,r(21))},,,function(t,e,r){(function(t){var n="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(361),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(21))},function(t,e,r){"use strict";(function(e){"undefined"===typeof e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,r(22))},function(t,e,r){var n=r(15).Buffer;function i(t){n.isBuffer(t)||(t=n.from(t));for(var e=t.length/4|0,r=new Array(e),i=0;i<e;i++)r[i]=t.readUInt32BE(4*i);return r}function o(t){for(;0<t.length;t++)t[0]=0}function s(t,e,r,n,i){for(var o,s,a,c,u=r[0],h=r[1],l=r[2],f=r[3],d=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],y=t[3]^e[3],g=4,b=1;b<i;b++)o=u[d>>>24]^h[p>>>16&255]^l[m>>>8&255]^f[255&y]^e[g++],s=u[p>>>24]^h[m>>>16&255]^l[y>>>8&255]^f[255&d]^e[g++],a=u[m>>>24]^h[y>>>16&255]^l[d>>>8&255]^f[255&p]^e[g++],c=u[y>>>24]^h[d>>>16&255]^l[p>>>8&255]^f[255&m]^e[g++],d=o,p=s,m=a,y=c;return o=(n[d>>>24]<<24|n[p>>>16&255]<<16|n[m>>>8&255]<<8|n[255&y])^e[g++],s=(n[p>>>24]<<24|n[m>>>16&255]<<16|n[y>>>8&255]<<8|n[255&d])^e[g++],a=(n[m>>>24]<<24|n[y>>>16&255]<<16|n[d>>>8&255]<<8|n[255&p])^e[g++],c=(n[y>>>24]<<24|n[d>>>16&255]<<16|n[p>>>8&255]<<8|n[255&m])^e[g++],[o>>>=0,s>>>=0,a>>>=0,c>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,c=0;c<256;++c){var u=a^a<<1^a<<2^a<<3^a<<4;u=u>>>8^255&u^99,r[s]=u,n[u]=s;var h=t[s],l=t[h],f=t[l],d=257*t[u]^16843008*u;i[0][s]=d<<24|d>>>8,i[1][s]=d<<16|d>>>16,i[2][s]=d<<8|d>>>24,i[3][s]=d,d=16843009*f^65537*l^257*h^16843008*s,o[0][u]=d<<24|d>>>8,o[1][u]=d<<16|d>>>16,o[2][u]=d<<8|d>>>24,o[3][u]=d,0===s?s=a=1:(s=h^t[t[t[f^h]]],a^=t[t[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function u(t){this._key=i(t),this._reset()}u.blockSize=16,u.keySize=32,u.prototype.blockSize=u.blockSize,u.prototype.keySize=u.keySize,u.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var s=i[o-1];o%e===0?(s=s<<8|s>>>24,s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s],s^=a[o/e|0]<<24):e>6&&o%e===4&&(s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s]),i[o]=i[o-e]^s}for(var u=[],h=0;h<n;h++){var l=n-h,f=i[l-(h%4?0:4)];u[h]=h<4||l<=4?f:c.INV_SUB_MIX[0][c.SBOX[f>>>24]]^c.INV_SUB_MIX[1][c.SBOX[f>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[f>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=u},u.prototype.encryptBlockRaw=function(t){return s(t=i(t),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},u.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=n.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},u.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var r=s(t,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},u.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=u},function(t,e,r){var n=r(15).Buffer,i=r(146);t.exports=function(t,e,r,o){if(n.isBuffer(t)||(t=n.from(t,"binary")),e&&(n.isBuffer(e)||(e=n.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=r/8,a=n.alloc(s),c=n.alloc(o||0),u=n.alloc(0);s>0||o>0;){var h=new i;h.update(u),h.update(t),e&&h.update(e),u=h.digest();var l=0;if(s>0){var f=a.length-s;l=Math.min(s,u.length),u.copy(a,f,0,l),s-=l}if(l<u.length&&o>0){var d=c.length-o,p=Math.min(o,u.length-l);u.copy(c,d,l,l+p),o-=p}}return u.fill(0),{key:a,iv:c}}},function(t,e,r){"use strict";var n=r(61),i=r(52),o=i.getNAF,s=i.getJSF,a=i.assert;function c(t,e){this.type=t,this.p=new n(e.p,16),this.red=e.prime?n.red(e.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=e.n&&new n(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(t,e){a(t.precomputed);var r=t._getDoubles(),n=o(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s,c,u=[];for(s=0;s<n.length;s+=r.step){c=0;for(var h=s+r.step-1;h>=s;h--)c=(c<<1)+n[h];u.push(c)}for(var l=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=i;d>0;d--){for(s=0;s<u.length;s++)(c=u[s])===d?f=f.mixedAdd(r.points[s]):c===-d&&(f=f.mixedAdd(r.points[s].neg()));l=l.add(f)}return l.toP()},c.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=o(e,r,this._bitLength),c=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var h=0;u>=0&&0===s[u];u--)h++;if(u>=0&&h++,c=c.dblp(h),u<0)break;var l=s[u];a(0!==l),c="affine"===t.type?l>0?c.mixedAdd(i[l-1>>1]):c.mixedAdd(i[-l-1>>1].neg()):l>0?c.add(i[l-1>>1]):c.add(i[-l-1>>1].neg())}return"affine"===t.type?c.toP():c},c.prototype._wnafMulAdd=function(t,e,r,n,i){var a,c,u,h=this._wnafT1,l=this._wnafT2,f=this._wnafT3,d=0;for(a=0;a<n;a++){var p=(u=e[a])._getNAFPoints(t);h[a]=p.wnd,l[a]=p.points}for(a=n-1;a>=1;a-=2){var m=a-1,y=a;if(1===h[m]&&1===h[y]){var g=[e[m],null,null,e[y]];0===e[m].y.cmp(e[y].y)?(g[1]=e[m].add(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg())):0===e[m].y.cmp(e[y].y.redNeg())?(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].add(e[y].neg())):(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],v=s(r[m],r[y]);for(d=Math.max(v[0].length,d),f[m]=new Array(d),f[y]=new Array(d),c=0;c<d;c++){var w=0|v[0][c],_=0|v[1][c];f[m][c]=b[3*(w+1)+(_+1)],f[y][c]=0,l[m]=g}}else f[m]=o(r[m],h[m],this._bitLength),f[y]=o(r[y],h[y],this._bitLength),d=Math.max(f[m].length,d),d=Math.max(f[y].length,d)}var S=this.jpoint(null,null,null),E=this._wnafT4;for(a=d;a>=0;a--){for(var A=0;a>=0;){var M=!0;for(c=0;c<n;c++)E[c]=0|f[c][a],0!==E[c]&&(M=!1);if(!M)break;A++,a--}if(a>=0&&A++,S=S.dblp(A),a<0)break;for(c=0;c<n;c++){var I=E[c];0!==I&&(I>0?u=l[c][I-1>>1]:I<0&&(u=l[c][-I-1>>1].neg()),S="affine"===u.type?S.mixedAdd(u):S.add(u))}}for(a=0;a<n;a++)l[a]=null;return i?S:S.toP()},c.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1===2*r)return 6===t[0]?a(t[t.length-1]%2===0):7===t[0]&&a(t[t.length-1]%2===1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(t){return this.encode(t,!0)},u.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},u.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},u.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},u.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},u.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},u.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},function(t,e,r){var n=r(439),i=r(446),o=r(447),s=r(153),a=r(232),c=r(15).Buffer;function u(t){var e;"object"!==typeof t||c.isBuffer(t)||(e=t.passphrase,t=t.key),"string"===typeof t&&(t=c.from(t));var r,u,h=o(t,e),l=h.tag,f=h.data;switch(l){case"CERTIFICATE":u=n.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(u||(u=n.PublicKey.decode(f,"der")),r=u.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(u.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return u.subjectPrivateKey=u.subjectPublicKey,{type:"ec",data:u};case"1.2.840.10040.4.1":return u.algorithm.params.pub_key=n.DSAparam.decode(u.subjectPublicKey.data,"der"),{type:"dsa",data:u.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[t.algorithm.decrypt.cipher.algo.join(".")],u=t.algorithm.decrypt.cipher.iv,h=t.subjectPrivateKey,l=parseInt(o.split("-")[1],10)/8,f=a.pbkdf2Sync(e,r,n,l,"sha1"),d=s.createDecipheriv(o,f,u),p=[];return p.push(d.update(h)),p.push(d.final()),c.concat(p)}(f=n.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(r=(u=n.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(u.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:u.algorithm.curve,privateKey:n.ECPrivateKey.decode(u.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return u.algorithm.params.priv_key=n.DSAparam.decode(u.subjectPrivateKey,"der"),{type:"dsa",params:u.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=n.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+l)}}t.exports=u,u.signature=n.signature},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(57);const i=n.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),o=n.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),s=n.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=n.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});e.base64=i,e.base64pad=o,e.base64url=s,e.base64urlpad=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(462);e.decode=t=>[n.decode(t),n.decode.bytes],e.encodeTo=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n.encode(t,e,r),e},e.encodingLength=t=>n.encodingLength(t)},function(t,e,r){"use strict";function n(t){if("number"===typeof t){if(n.codes[t])return n.codes[t];throw new Error("no protocol with code: "+t)}if("string"===typeof t){if(n.names[t])return n.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}const i=-1;function o(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}n.lengthPrefixedVarSize=i,n.V=i,n.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,i,"ip6zone"],[53,i,"dns","resolvable"],[54,i,"dns4","resolvable"],[55,i,"dns6","resolvable"],[56,i,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,i,"unix",!1,"path"],[421,i,"ipfs"],[421,i,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,i,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,i,"memory"]],n.names={},n.codes={},n.table.map((t=>{const e=o.apply(null,t);return n.codes[e.code]=e,n.names[e.name]=e,null})),n.object=o,t.exports=n},function(t,e,r){"use strict";e.get=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis;const e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},,function(t,e,r){var n=r(16);if(r(75),r(170),r(98),r(485),r(487),r(86),r(28),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.util.isNodejs?r(120):null,s=n.asn1,a=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],h={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},l={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},d=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},m=function(t){var e;if(!(t.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=c.oids[t.algorithm];var n=s.oidToDer(e).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),s.toDer(i).getBytes()},y=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var o;e.dP||(e.dP=e.d.mod(e.p.subtract(i.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(i.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{o=new i(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(o.compareTo(e.n)>=0||!o.gcd(e.n).equals(i.ONE));for(var s=(t=t.multiply(o.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);s.compareTo(a)<0;)s=s.add(e.p);var c=s.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return c=c.multiply(o.modInverse(e.n)).mod(e.n)};function g(t,e,r){var i=n.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=o-11,s}i.putByte(0),i.putByte(r);var a,c=o-3-t.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<c;++u)i.putByte(a)}else for(;c>0;){var h=0,l=n.random.getBytes(c);for(u=0;u<c;++u)0===(a=l.charCodeAt(u))?++h:i.putByte(a);c=h}return i.putByte(0),i.putBytes(t),i}function b(t,e,r,i){var o=Math.ceil(e.n.bitLength()/8),s=n.util.createBuffer(t),a=s.getByte(),c=s.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&"undefined"===typeof i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=o-3-i;for(var h=0;h<u;++h)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(u=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++u}else if(2===c)for(u=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++u}if(0!==s.getByte()||u!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function v(t,e,r){"function"===typeof e&&(r=e,e={});var o={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function s(){a(t.pBits,(function(e,n){return e?r(e):(t.p=n,null!==t.q?u(e,t.q):void a(t.qBits,u))}))}function a(t,e){n.prime.generateProbablePrime(t,o,e)}function u(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var o=t.p;t.p=t.q,t.q=o}if(0!==t.p.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.p=null,void s();if(0!==t.q.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.q=null,void a(t.qBits,u);if(t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(i.ONE))return t.p=t.q=null,void s();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,u);var h=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,h,t.p,t.q,h.mod(t.p1),h.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(o.prng=e.prng),s()}function w(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function _(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function S(t){return n.util.isNodejs&&"function"===typeof o[t]}function E(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[t]}function A(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[t]}function M(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}c.rsa.encrypt=function(t,e,r){var o,s=r,a=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(s=2===r,o=g(t,e,r)):(o=n.util.createBuffer()).putBytes(t);for(var c=new i(o.toHex(),16),u=y(c,e,s).toString(16),h=n.util.createBuffer(),l=a-Math.ceil(u.length/2);l>0;)h.putByte(0),--l;return h.putBytes(n.util.hexToBytes(u)),h.getBytes()},c.rsa.decrypt=function(t,e,r,o){var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=s,a}var c=new i(n.util.createBuffer(t).toHex(),16);if(c.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=y(c,e,r).toString(16),h=n.util.createBuffer(),l=s-Math.ceil(u.length/2);l>0;)h.putByte(0),--l;return h.putBytes(n.util.hexToBytes(u)),!1!==o?b(h.getBytes(),e,r):h.getBytes()},c.rsa.createKeyPairGenerationState=function(t,e,r){"string"===typeof t&&(t=parseInt(t,10)),t=t||2048;var o,s=(r=r||{}).prng||n.random,a={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(o={algorithm:c,state:0,bits:t,rng:a,eInt:e||65537,e:new i(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(o.eInt),o},c.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,o=0,s=function(t,e){return t|e},a=+new Date,h=0;null===t.keys&&(e<=0||h<e);){if(0===t.state){var l=null===t.p?t.pBits:t.qBits,f=l-1;0===t.pqState?(t.num=new i(l,t.rng),t.num.testBit(f)||t.num.bitwiseTo(i.ONE.shiftLeft(f),s,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),o=0,++t.pqState):1===t.pqState?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(_(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(u[o++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(i.ONE).gcd(t.e).compareTo(i.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(i.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var d=t.e.modInverse(t.phi);t.keys={privateKey:c.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:c.rsa.setPublicKey(t.n,t.e)}}h+=(n=+new Date)-a,a=n}return null!==t.keys},c.rsa.generateKeyPair=function(t,e,r,i){if(1===arguments.length?"object"===typeof t?(r=t,t=void 0):"function"===typeof t&&(i=t,t=void 0):2===arguments.length?"number"===typeof t?"function"===typeof e?(i=e,e=void 0):"number"!==typeof e&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):3===arguments.length&&("number"===typeof e?"function"===typeof r&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(i){if(S("generateKeyPair"))return o.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(t,e,r){if(t)return i(t);i(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(e)})}));if(E("generateKey")&&E("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:M(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)})).then(void 0,(function(t){i(t)})).then((function(t){if(t){var e=c.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(t)));i(null,{privateKey:e,publicKey:c.setRsaPublicKey(e.n,e.e)})}}));if(A("generateKey")&&A("exportKey")){var u=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:M(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(t){var e=t.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=c.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(e)));i(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){i(t)}},void(u.onerror=function(t){i(t)})}}else if(S("generateKeyPairSync")){var h=o.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(h.privateKey),publicKey:c.publicKeyFromPem(h.publicKey)}}var l=c.rsa.createKeyPairGenerationState(t,e,r);if(!i)return c.rsa.stepKeyPairGenerationState(l,0),l.keys;v(l,r,i)},c.setRsaPublicKey=c.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,i){if("string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return g(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"===typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var o=e.encode(t,r,!0);return c.rsa.encrypt(o,r,!0)},verify:function(t,e,i,o){"string"===typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===o&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=b(e,r,!0);var i=s.fromDer(e,{parseAllBytes:o._parseAllDigestBytes}),a={},c=[];if(!s.validate(i,p,a,c))throw(u=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=c,u;var u,h=s.derToOid(a.algorithmIdentifier);if(h!==n.oids.md2&&h!==n.oids.md5&&h!==n.oids.sha1&&h!==n.oids.sha224&&h!==n.oids.sha256&&h!==n.oids.sha384&&h!==n.oids.sha512&&h!==n.oids["sha512-224"]&&h!==n.oids["sha512-256"])throw(u=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=h,u;if((h===n.oids.md2||h===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return t===(e=b(e,r,!0))}});var a=c.rsa.decrypt(e,r,!0,!1);return i.verify(t,a,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(t,e,r,i,o,s,a,u){var h={n:t,e:e,d:r,p:i,q:o,dP:s,dQ:a,qInv:u,decrypt:function(t,e,r){"string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(t,h,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:b};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(i,h,!1)},sign:function(t,e){var r=!1;"string"===typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:m},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,h.n.bitLength());return c.rsa.encrypt(n,h,r)}};return h},c.wrapRsaPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(t).getBytes())])},c.privateKeyFromAsn1=function(t){var e,r,o,a,u,f,d,p,m={},y=[];if(s.validate(t,h,m,y)&&(t=s.fromDer(n.util.createBuffer(m.privateKey))),m={},y=[],!s.validate(t,l,m,y)){var g=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw g.errors=y,g}return e=n.util.createBuffer(m.privateKeyModulus).toHex(),r=n.util.createBuffer(m.privateKeyPublicExponent).toHex(),o=n.util.createBuffer(m.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(m.privateKeyPrime1).toHex(),u=n.util.createBuffer(m.privateKeyPrime2).toHex(),f=n.util.createBuffer(m.privateKeyExponent1).toHex(),d=n.util.createBuffer(m.privateKeyExponent2).toHex(),p=n.util.createBuffer(m.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(e,16),new i(r,16),new i(o,16),new i(a,16),new i(u,16),new i(f,16),new i(d,16),new i(p,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.qInv))])},c.publicKeyFromAsn1=function(t){var e={},r=[];if(s.validate(t,d,e,r)){var o,a=s.derToOid(e.publicKeyOid);if(a!==c.oids.rsaEncryption)throw(o=new Error("Cannot read public key. Unknown OID.")).oid=a,o;t=e.rsaPublicKey}if(r=[],!s.validate(t,f,e,r))throw(o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,o;var u=n.util.createBuffer(e.publicKeyModulus).toHex(),h=n.util.createBuffer(e.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(u,16),new i(h,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(t)])])},c.publicKeyToRSAPublicKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(t.e))])}},function(t,e,r){"use strict";const n=r(491),i=r(9);t.exports=function(t){if(isNaN(t)||t<=0)throw i(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return n(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(518);function i(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}function o(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}function s(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function a(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function c(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function h(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}function l(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}function f(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),h(t/4294967296>>>0,e,r),h(t>>>0,e,r+4),e}function d(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),l(t>>>0,e,r),l(t/4294967296>>>0,e,r+4),e}e.readInt16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16},e.readUint16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0},e.readInt16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16},e.readUint16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0},e.writeUint16BE=i,e.writeInt16BE=i,e.writeUint16LE=o,e.writeInt16LE=o,e.readInt32BE=s,e.readUint32BE=a,e.readInt32LE=c,e.readUint32LE=u,e.writeUint32BE=h,e.writeInt32BE=h,e.writeUint32LE=l,e.writeInt32LE=l,e.readInt64BE=function(t,e){void 0===e&&(e=0);var r=s(t,e),n=s(t,e+4);return 4294967296*r+n-4294967296*(n>>31)},e.readUint64BE=function(t,e){return void 0===e&&(e=0),4294967296*a(t,e)+a(t,e+4)},e.readInt64LE=function(t,e){void 0===e&&(e=0);var r=c(t,e);return 4294967296*c(t,e+4)+r-4294967296*(r>>31)},e.readUint64LE=function(t,e){void 0===e&&(e=0);var r=u(t,e);return 4294967296*u(t,e+4)+r},e.writeUint64BE=f,e.writeInt64BE=f,e.writeUint64LE=d,e.writeInt64LE=d,e.readUintBE=function(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=t/8+r-1;o>=r;o--)n+=e[o]*i,i*=256;return n},e.readUintLE=function(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+t/8;o++)n+=e[o]*i,i*=256;return n},e.writeUintBE=function(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,s=t/8+i-1;s>=i;s--)r[s]=e/o&255,o*=256;return r},e.writeUintLE=function(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,s=i;s<i+t/8;s++)r[s]=e/o&255,o*=256;return r},e.readFloat32BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e)},e.readFloat32LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},e.readFloat64BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e)},e.readFloat64LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},e.writeFloat32BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t),e},e.writeFloat32LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t,!0),e},e.writeFloat64BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t),e},e.writeFloat64LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t,!0),e}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decode2=e.decode1=e.decode0=e.encode2=e.encode1=e.encode0=e.uint16BEDecode=e.uint16BEEncode=void 0;const i=n(r(54)),o=r(25);e.uint16BEEncode=(t,e,r)=>{var n;return e=e||(n=2,globalThis.Buffer?globalThis.Buffer.allocUnsafe(n):new Uint8Array(n)),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(r,t,!1),e},e.uint16BEEncode.bytes=2;e.uint16BEDecode=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof i.default?t.readUInt16BE(0):new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1)},e.uint16BEDecode.bytes=2,e.encode0=function(t){return(0,o.concat)([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)},e.encode1=function(t){return(0,o.concat)([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)},e.encode2=function(t){return(0,o.concat)([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)},e.decode0=function(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:new Uint8Array(0)}},e.decode1=function(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}},e.decode2=function(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}},function(t,e,r){"use strict";t.exports=async t=>{for await(const e of t);}},function(t,e,r){"use strict";const n=r(549);class i{constructor(t,e,r){const i=this;this._started=n(),this._rescheduled=0,this._scheduled=e,this._args=r,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,t.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,e)}reschedule(t){t||(t=this._scheduled);const e=n();e+t-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(t)):this._triggered?this._schedule(t):(this._started=e,this._rescheduled=t)}_schedule(t){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=t,this._timer=setTimeout(this._timerWrapper,t)}clear(){clearTimeout(this._timer)}}t.exports=function(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new i(arguments[0],arguments[1],t)}},function(t,e,r){"use strict";var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n)return n;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response},function(t,e,r){"use strict";const n=r(9),{concat:i}=r(25),{fromString:o}=r(24),s=r(166),a=r(23),c=r(58),{equals:u}=r(45),{codes:h}=r(27),{Envelope:l}=r(569);class f{constructor(t){let{peerId:e,payloadType:r,payload:n,signature:i}=t;this.peerId=e,this.payloadType=r,this.payload=n,this.signature=i,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;const t=s.marshalPublicKey(this.peerId.pubKey);return this._marshal=l.encode({publicKey:t,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(t){return u(this.peerId.pubKey.bytes,t.peerId.pubKey.bytes)&&u(this.payloadType,t.payloadType)&&u(this.payload,t.payload)&&u(this.signature,t.signature)}validate(t){const e=d(t,this.payloadType,this.payload);return this.peerId.pubKey.verify(e,this.signature)}}const d=(t,e,r)=>{const n=o(t),s=c.encode(n.byteLength),a=c.encode(e.length),u=c.encode(r.length);return i([new Uint8Array(s),n,new Uint8Array(a),e,new Uint8Array(u),r])};f.createFromProtobuf=async t=>{const e=l.decode(t),r=await a.createFromPubKey(e.publicKey);return new f({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})},f.seal=async(t,e)=>{const r=t.domain,n=t.codec,i=t.marshal(),o=d(r,n,i),s=await e.privKey.sign(o);return new f({peerId:e,payloadType:n,payload:i,signature:s})},f.openAndCertify=async(t,e)=>{const r=await f.createFromProtobuf(t);if(!await r.validate(e))throw n(new Error("envelope signature is not valid for the given domain"),h.ERR_SIGNATURE_NOT_VALID);return r},t.exports=f},function(t,e,r){"use strict";t.exports={relay:"/libp2p/circuit/relay/0.1.0"}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="bignumber/5.6.2"},function(t,e,r){(function(n,i){var o;!function(){"use strict";var s="input is invalid type",a="object"===typeof window,c=a?window:{};c.JS_SHA3_NO_WINDOW&&(a=!1);var u=!a&&"object"===typeof self;!c.JS_SHA3_NO_NODE_JS&&"object"===typeof n&&n.versions&&n.versions.node?c=i:u&&(c=self);var h=!c.JS_SHA3_NO_COMMON_JS&&"object"===typeof t&&t.exports,l=r(270),f=!c.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,d="0123456789abcdef".split(""),p=[4,1024,262144,67108864],m=[0,8,16,24],y=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],b=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],w={128:168,256:136};!c.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!f||!c.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"===typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var _=function(t,e,r){return function(n){return new x(t,e,t).update(n)[r]()}},S=function(t,e,r){return function(n,i){return new x(t,e,i).update(n)[r]()}},E=function(t,e,r){return function(e,n,i,o){return T["cshake"+t].update(e,n,i,o)[r]()}},A=function(t,e,r){return function(e,n,i,o){return T["kmac"+t].update(e,n,i,o)[r]()}},M=function(t,e,r,n){for(var i=0;i<v.length;++i){var o=v[i];t[o]=e(r,n,o)}return t},I=function(t,e){var r=_(t,e,"hex");return r.create=function(){return new x(t,e,t)},r.update=function(t){return r.create().update(t)},M(r,_,t,e)},R=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:I},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:I},{name:"shake",padding:[31,7936,2031616,520093696],bits:b,createMethod:function(t,e){var r=S(t,e,"hex");return r.create=function(r){return new x(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},M(r,S,t,e)}},{name:"cshake",padding:p,bits:b,createMethod:function(t,e){var r=w[t],n=E(t,0,"hex");return n.create=function(n,i,o){return i||o?new x(t,e,n).bytepad([i,o],r):T["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},M(n,E,t,e)}},{name:"kmac",padding:p,bits:b,createMethod:function(t,e){var r=w[t],n=A(t,0,"hex");return n.create=function(n,i,o){return new L(t,e,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},M(n,A,t,e)}}],T={},C=[],O=0;O<R.length;++O)for(var k=R[O],P=k.bits,N=0;N<P.length;++N){var D=k.name+"_"+P[N];if(C.push(D),T[D]=k.createMethod(P[N],k.padding),"sha3"!==k.name){var B=k.name+P[N];C.push(B),T[B]=T[D]}}function x(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function L(t,e,r){x.call(this,t,e,r)}x.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var e,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(s);if(null===t)throw new Error(s);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!f||!ArrayBuffer.isView(t)))throw new Error(s);e=!0}for(var n,i,o=this.blocks,a=this.byteCount,c=t.length,u=this.blockCount,h=0,l=this.s;h<c;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<u+1;++n)o[n]=0;if(e)for(n=this.start;h<c&&n<a;++h)o[n>>2]|=t[h]<<m[3&n++];else for(n=this.start;h<c&&n<a;++h)(i=t.charCodeAt(h))<128?o[n>>2]|=i<<m[3&n++]:i<2048?(o[n>>2]|=(192|i>>6)<<m[3&n++],o[n>>2]|=(128|63&i)<<m[3&n++]):i<55296||i>=57344?(o[n>>2]|=(224|i>>12)<<m[3&n++],o[n>>2]|=(128|i>>6&63)<<m[3&n++],o[n>>2]|=(128|63&i)<<m[3&n++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++h)),o[n>>2]|=(240|i>>18)<<m[3&n++],o[n>>2]|=(128|i>>12&63)<<m[3&n++],o[n>>2]|=(128|i>>6&63)<<m[3&n++],o[n>>2]|=(128|63&i)<<m[3&n++]);if(this.lastByteIndex=n,n>=a){for(this.start=n-a,this.block=o[u],n=0;n<u;++n)l[n]^=o[n];U(l),this.reset=!0}else this.start=n}return this},x.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];for(r=255&(t>>=8);r>0;)i.unshift(r),r=255&(t>>=8),++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},x.prototype.encodeString=function(t){var e,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(s);if(null===t)throw new Error(s);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!f||!ArrayBuffer.isView(t)))throw new Error(s);e=!0}var n=0,i=t.length;if(e)n=i;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++o)),n+=4)}return n+=this.encode(8*n),this.update(t),n},x.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=e-r%e,o=[];return o.length=i,this.update(o),this},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];U(n)}},x.prototype.toString=x.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";s<n;){for(o=0;o<e&&s<n;++o,++s)t=r[o],a+=d[t>>4&15]+d[15&t]+d[t>>12&15]+d[t>>8&15]+d[t>>20&15]+d[t>>16&15]+d[t>>28&15]+d[t>>24&15];s%e===0&&(U(r),o=0)}return i&&(t=r[o],a+=d[t>>4&15]+d[15&t],i>1&&(a+=d[t>>12&15]+d[t>>8&15]),i>2&&(a+=d[t>>20&15]+d[t>>16&15])),a},x.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(t);s<n;){for(o=0;o<e&&s<n;++o,++s)c[s]=r[o];s%e===0&&U(r)}return i&&(c[o]=r[o],t=t.slice(0,a)),t},x.prototype.buffer=x.prototype.arrayBuffer,x.prototype.digest=x.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)t=a<<2,e=n[s],c[t]=255&e,c[t+1]=e>>8&255,c[t+2]=e>>16&255,c[t+3]=e>>24&255;a%r===0&&U(n)}return o&&(t=a<<2,e=n[s],c[t]=255&e,o>1&&(c[t+1]=e>>8&255),o>2&&(c[t+2]=e>>16&255)),c},L.prototype=new x,L.prototype.finalize=function(){return this.encode(this.outputBits,!0),x.prototype.finalize.call(this)};var U=function(t){var e,r,n,i,o,s,a,c,u,h,l,f,d,p,m,g,b,v,w,_,S,E,A,M,I,R,T,C,O,k,P,N,D,B,x,L,U,j,K,F,q,V,z,H,G,W,J,Y,Z,X,Q,$,tt,et,rt,nt,it,ot,st,at,ct,ut,ht;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],e=(f=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|a>>>31),r=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|s>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=s^(h<<1|l>>>31),r=a^(l<<1|h>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=c^(f<<1|d>>>31),r=u^(d<<1|f>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=h^(i<<1|o>>>31),r=l^(o<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,p=t[0],m=t[1],W=t[11]<<4|t[10]>>>28,J=t[10]<<4|t[11]>>>28,C=t[20]<<3|t[21]>>>29,O=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ct=t[30]<<9|t[31]>>>23,V=t[40]<<18|t[41]>>>14,z=t[41]<<18|t[40]>>>14,B=t[2]<<1|t[3]>>>31,x=t[3]<<1|t[2]>>>31,g=t[13]<<12|t[12]>>>20,b=t[12]<<12|t[13]>>>20,Y=t[22]<<10|t[23]>>>22,Z=t[23]<<10|t[22]>>>22,k=t[33]<<13|t[32]>>>19,P=t[32]<<13|t[33]>>>19,ut=t[42]<<2|t[43]>>>30,ht=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,L=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,v=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,X=t[34]<<15|t[35]>>>17,Q=t[35]<<15|t[34]>>>17,N=t[45]<<29|t[44]>>>3,D=t[44]<<29|t[45]>>>3,M=t[6]<<28|t[7]>>>4,I=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,j=t[26]<<25|t[27]>>>7,K=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,S=t[37]<<21|t[36]>>>11,$=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,H=t[8]<<27|t[9]>>>5,G=t[9]<<27|t[8]>>>5,R=t[18]<<20|t[19]>>>12,T=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,F=t[38]<<8|t[39]>>>24,q=t[39]<<8|t[38]>>>24,E=t[48]<<14|t[49]>>>18,A=t[49]<<14|t[48]>>>18,t[0]=p^~g&v,t[1]=m^~b&w,t[10]=M^~R&C,t[11]=I^~T&O,t[20]=B^~L&j,t[21]=x^~U&K,t[30]=H^~W&Y,t[31]=G^~J&Z,t[40]=et^~nt&ot,t[41]=rt^~it&st,t[2]=g^~v&_,t[3]=b^~w&S,t[12]=R^~C&k,t[13]=T^~O&P,t[22]=L^~j&F,t[23]=U^~K&q,t[32]=W^~Y&X,t[33]=J^~Z&Q,t[42]=nt^~ot&at,t[43]=it^~st&ct,t[4]=v^~_&E,t[5]=w^~S&A,t[14]=C^~k&N,t[15]=O^~P&D,t[24]=j^~F&V,t[25]=K^~q&z,t[34]=Y^~X&$,t[35]=Z^~Q&tt,t[44]=ot^~at&ut,t[45]=st^~ct&ht,t[6]=_^~E&p,t[7]=S^~A&m,t[16]=k^~N&M,t[17]=P^~D&I,t[26]=F^~V&B,t[27]=q^~z&x,t[36]=X^~$&H,t[37]=Q^~tt&G,t[46]=at^~ut&et,t[47]=ct^~ht&rt,t[8]=E^~p&g,t[9]=A^~m&b,t[18]=N^~M&R,t[19]=D^~I&T,t[28]=V^~B&L,t[29]=z^~x&U,t[38]=$^~H&W,t[39]=tt^~G&J,t[48]=ut^~et&nt,t[49]=ht^~rt&it,t[0]^=y[n],t[1]^=y[n+1]};if(h)t.exports=T;else{for(O=0;O<C.length;++O)c[C[O]]=T[C[O]];l&&(void 0===(o=function(){return T}.call(e,r,e,t))||(t.exports=o))}}()}).call(this,r(22),r(21))},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="hash/5.6.1"},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="json-wallets/5.6.1"},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n extends Error{constructor(){super("no matching pre-key")}}},function(t,e,r){const n=r(54),i={string:()=>"",buffer:()=>n()};t.exports=async(t,e)=>{if((e=e||{}).type&&!i[e.type])throw new Error('invalid type "'.concat(e.type,'"'));let r,n;for await(const o of t)r||(n=e.type||("string"===typeof o?"string":"buffer"),r=i[n]()),"string"===n?r+=o:r.append(o);return r||i[e.type||"buffer"]()}},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(7),i=r(35),o=r(49);class s{constructor(t){if(!t)throw new Error("missing keyBundle");this.keyBundle=t}toBytes(){return this.keyBundle.toBytes()}static fromBytes(t){const e=this.decodeV1(t);if(!e)throw new Error("could not parse bundle");if(!e.identityKey)throw new Error("missing keyBundle");if(!e.preKey)throw new Error("missing pre-key");return new s(new i.d(new o.a(e.identityKey),new o.a(e.preKey)))}static decodeV1(t){var e;try{return null===(e=n.c.decode(t).v1)||void 0===e?void 0:e.keyBundle}catch(r){if(r instanceof RangeError||r instanceof Error&&r.message.startsWith("invalid wire type"))try{return n.h.decode(t)}catch(r){throw new Error("Couldn't decode contact bundle: "+r)}}}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return q})),r.d(e,"b",(function(){return o.a})),r.d(e,"c",(function(){return k}));var n=r(7),i=r(63),o=r(35),s=r(134),a=r(47),c=r(43),u=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const h=t=>{if(!t.v1)throw new Error("Message is not of type v1");return t.v1};class l{constructor(t,e,r,n){const o=h(r);if(this.id=t,this.bytes=e,this.headerBytes=o.headerBytes,this.header=n,!o.ciphertext)throw new Error("missing message ciphertext");this.ciphertext=new i.c(o.ciphertext)}toBytes(){return this.bytes}static create(t,e,r){return u(this,void 0,void 0,(function*(){const n=Object(a.a)(yield Object(c.d)(r));return new l(n,r,t,e)}))}static fromBytes(t){return u(this,void 0,void 0,(function*(){const e=n.e.decode(t),r=h(e),i=n.f.decode(r.headerBytes);return l.create(e,i,t)}))}get sent(){var t;return this.header?new Date(null===(t=this.header)||void 0===t?void 0:t.timestamp):void 0}get senderAddress(){var t,e;if(null===(e=null===(t=this.header)||void 0===t?void 0:t.sender)||void 0===e?void 0:e.identityKey)return new o.c(this.header.sender.identityKey).walletSignatureAddress()}get recipientAddress(){var t,e;if(null===(e=null===(t=this.header)||void 0===t?void 0:t.recipient)||void 0===e?void 0:e.identityKey)return new o.c(this.header.recipient.identityKey).walletSignatureAddress()}static encode(t,e,r,i){return u(this,void 0,void 0,(function*(){const s=yield t.sharedSecret(e,t.getCurrentPreKey().publicKey,!1),a={sender:t.getPublicKeyBundle(),recipient:e,timestamp:i.getTime()},c=n.f.encode(a).finish(),u={v1:{headerBytes:c,ciphertext:yield Object(o.f)(r,s,c)}},h=n.e.encode(u).finish(),f=yield l.create(u,a,h);return f.decrypted=r,f}))}static decode(t,e){var r;return u(this,void 0,void 0,(function*(){const a=n.e.decode(e),c=h(a),u=n.f.decode(c.headerBytes);if(!u)throw new Error("missing message header");if(!u.sender)throw new Error("missing message sender");if(!u.sender.identityKey)throw new Error("missing message sender identity key");if(!u.sender.preKey)throw new Error("missing message sender pre-key");if(!u.recipient)throw new Error("missing message recipient");if(!u.recipient.identityKey)throw new Error("missing message recipient identity-key");if(!u.recipient.preKey)throw new Error("missing message recipient pre-key");const f=new o.d(new o.c(u.recipient.identityKey),new o.c(u.recipient.preKey)),d=new o.d(new o.c(u.sender.identityKey),new o.c(u.sender.preKey));if(!(null===(r=c.ciphertext)||void 0===r?void 0:r.aes256GcmHkdfSha256))throw new Error("missing message ciphertext");const p=new i.c(c.ciphertext),m=yield l.create(a,u,e);let y;try{y=t.identityKey.matches(d.identityKey)?yield t.sharedSecret(f,d.preKey,!1):yield t.sharedSecret(d,f.preKey,!0)}catch(g){if(!(g instanceof s.a))throw g;return m.error=g,m}return m.decrypted=yield Object(o.e)(p,y,c.headerBytes),m}))}}var f=r(36),d=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class p{constructor(t,e,r,n){this.messages=[],this.resolvers=[],this.topic=e,this.client=t,this.callback=this.newMessageCallback(r,n)}newMessageCallback(t,e){return r=>d(this,void 0,void 0,(function*(){if(!r.payload)return;const n=yield this.client.decodeMessage(r.payload);if(e&&!e(n))return;const i=this.resolvers.pop();i?i({value:t(n)}):this.messages.unshift(t(n))}))}start(){return d(this,void 0,void 0,(function*(){if(!this.callback)throw new Error("Missing callback for stream");this.unsubscribeFn=yield this.client.waku.filter.subscribe(this.callback,[this.topic]),yield this.listenForDisconnect()}))}listenForDisconnect(){return d(this,void 0,void 0,(function*(){const t=yield this.client.waku.filter.randomPeer;this._disconnectCallback=e=>d(this,void 0,void 0,(function*(){var r;if(e.remotePeer.toB58String()===(null===(r=null===t||void 0===t?void 0:t.id)||void 0===r?void 0:r.toB58String()))for(console.log("Connection to peer ".concat(e.remoteAddr," lost"));;)try{if(!this.callback)return;return this.unsubscribeFn=yield this.client.waku.filter.subscribe(this.callback,[this.topic]),void console.log("Connection to peer ".concat(e.remoteAddr," restored"))}catch(n){console.warn("Error reconnecting to ".concat(e.remoteAddr)),yield Object(f.g)(1e3)}})),this.client.waku.libp2p.connectionManager.on("peer:disconnect",this._disconnectCallback)}))}static create(t,e,r,n){return d(this,void 0,void 0,(function*(){const i=new p(t,e,r,n);return yield i.start(),i}))}[Symbol.asyncIterator](){return this}return(){return d(this,void 0,void 0,(function*(){return this._disconnectCallback&&this.client.waku.libp2p.connectionManager.off("peer:disconnect",this._disconnectCallback),this.callback?(this.unsubscribeFn&&(yield this.unsubscribeFn()),this.callback=void 0,this.resolvers.forEach((t=>t({value:void 0,done:!0}))),{value:void 0,done:!0}):{value:void 0,done:!0}}))}next(){const t=this.messages.pop();return t?Promise.resolve({value:t}):this.callback?new Promise((t=>this.resolvers.unshift(t))):Promise.resolve({value:void 0,done:!0})}}var m=r(59),y=r(351),g=r.n(y);r(78),r(196);const b=t=>new Promise((e=>setTimeout(e,t)));var v=r(337),w=r(340),_=r(341),S=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class E{constructor(t,e){this.peerAddress=e,this.client=t}messages(t){return S(this,void 0,void 0,(function*(){return this.client.listConversationMessages(this.peerAddress,t)}))}streamMessages(){return this.client.streamConversationMessages(this.peerAddress)}send(t,e){return S(this,void 0,void 0,(function*(){yield this.client.sendMessage(this.peerAddress,t,e)}))}}var A=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const M=t=>Boolean(t.recipientAddress&&t.senderAddress);class I{constructor(t){this.client=t}list(){return A(this,void 0,void 0,(function*(){const t=yield this.client.listIntroductionMessages(),e=new Set;for(const r of t){if(!M(r))continue;const t=this.getPeerAddress(r);t&&e.add(t)}return Array.from(e).sort().map((t=>new E(this.client,t)))}))}stream(){const t=new Set;return p.create(this.client,Object(f.c)(this.client.address),(t=>{const e=this.getPeerAddress(t);return new E(this.client,e)}),(e=>{if(!M(e))return!1;const r=this.getPeerAddress(e);return!t.has(r)&&(t.add(r),!0)}))}newConversation(t){return A(this,void 0,void 0,(function*(){if(!(yield this.client.getUserContact(t)))throw new Error("Recipient ".concat(t," is not on the XMTP network"));return new E(this.client,t)}))}getPeerAddress(t){return t.recipientAddress===this.client.address?t.senderAddress:t.recipientAddress}}("object"!==typeof window||"object"!==typeof navigator||navigator.userAgent.includes("jsdom"))&&r(707);class R{constructor(t){this.authorityId=t.authorityId,this.typeId=t.typeId,this.versionMajor=t.versionMajor,this.versionMinor=t.versionMinor}toString(){return"".concat(this.authorityId,"/").concat(this.typeId,":").concat(this.versionMajor,".").concat(this.versionMinor)}sameAs(t){return this.authorityId===t.authorityId&&this.typeId===t.typeId}}const T=new R({authorityId:"xmtp.org",typeId:"fallback",versionMajor:1,versionMinor:0}),C=new R({authorityId:"xmtp.org",typeId:"text",versionMajor:1,versionMinor:0});var O;!function(t){t.utf8="UTF-8"}(O||(O={}));class k{get contentType(){return C}encode(t){return{type:C,parameters:{encoding:O.utf8},content:(new TextEncoder).encode(t)}}decode(t){const e=t.parameters.encoding;if(e&&e!==O.utf8)throw new Error("unrecognized encoding ".concat(e));return(new TextDecoder).decode(t.content)}}var P=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};function N(t){if(t===n.b.gzip)return"gzip";if(t===n.b.deflate)return"deflate";throw new Error("unrecognized compression algorithm")}function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=0;return new ReadableStream({pull(n){if(r>=t.length)return n.close();let i=r+e;i=i<=t.length?i:t.length,n.enqueue(t.subarray(r,i)),r=i}})}function B(t,e){let r=0;return new WritableStream({write(n){const i=r+n.length;if(i>e)throw new Error("maximum output size exceeded");for(;t.bytes.length<i;)t.bytes=x(t.bytes,e);t.bytes.set(n,r),r=i},close(){r<t.bytes.length&&(t.bytes=t.bytes.subarray(0,r))}})}function x(t,e){let r=2*t.length;r>e&&(r=e);const n=new Uint8Array(r);return n.set(t),n}var L=r(136),U=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const j="https://nodes.xmtp.com/",K=104857600;var F;!function(t){t[t.networkTopicStoreV1=0]="networkTopicStoreV1",t[t.localStorage=1]="localStorage"}(F||(F={}));class q{constructor(t,e){this.waku=t,this.contacts=new Set,this.knownPublicKeyBundles=new Map,this.keys=e,this.address=e.identityKey.publicKey.walletSignatureAddress(),this._conversations=new I(this),this._codecs=new Map,this._maxContentSize=K,this._disconnectWatcher=this.createDisconnectWatcher()}get conversations(){return this._conversations}static create(t,e){return U(this,void 0,void 0,(function*(){const r=function(t){const e={keyStoreType:F.networkTopicStoreV1,env:"dev",waitForPeersTimeoutMs:1e4,codecs:[new k],maxContentSize:K};return(null===t||void 0===t?void 0:t.codecs)&&(t.codecs=e.codecs.concat(t.codecs)),Object.assign(Object.assign({},e),t)}(e),n=yield function(t){let{bootstrapAddrs:e,env:r,waitForPeersTimeoutMs:n}=t;return U(this,void 0,void 0,(function*(){const t=(null===e||void 0===e?void 0:e.length)?{peers:e}:{getPeers:()=>function(t){return U(this,void 0,void 0,(function*(){const e=yield g()(j),r=yield e.json();return Object.values(r[t])}))}(r)},i=yield m.b.create({libp2p:{config:{pubsub:{enabled:!0,emitSelf:!0}}},bootstrap:t});try{yield Object(f.e)(n,(()=>i.waitForRemotePeer()),"timeout connecting to peers")}catch(o){throw yield i.stop(),o}return yield b(200),i}))}(r),i=function(t,e,r){switch(t.keyStoreType){case F.networkTopicStoreV1:return function(t,e){return new w.a(t,new _.a(e))}(e,r);case F.localStorage:return function(t){return new w.a(t,new v.a)}(e)}}(r,t,n),s=yield function(t,e){return U(this,void 0,void 0,(function*(){let r=yield e.loadPrivateKeyBundle();return r||(r=yield o.b.generate(t),yield e.storePrivateKeyBundle(r),r)}))}(t,i),a=new q(n,s);return r.codecs.forEach((t=>{a.registerCodec(t)})),a._maxContentSize=r.maxContentSize,yield a.publishUserContact(),a}))}close(){return U(this,void 0,void 0,(function*(){return clearInterval(this._disconnectWatcher),this.waku.stop()}))}publishUserContact(){return U(this,void 0,void 0,(function*(){const t=this.keys.getPublicKeyBundle();yield Object(f.f)(this.waku,t,this.address)}))}getUserContactFromNetwork(t){return U(this,void 0,void 0,(function*(){let e=null;return yield this.waku.store.queryHistory([Object(f.b)(t)],{pageSize:5,pageDirection:m.a.BACKWARD,callback:r=>{for(const n of r){if(!n.payload)continue;const r=L.a.fromBytes(n.payload).keyBundle;if((null===r||void 0===r?void 0:r.walletSignatureAddress())===t){e=r;break}}return null!==e}}),null===e?void 0:e}))}getUserContact(t){return U(this,void 0,void 0,(function*(){const e=this.knownPublicKeyBundles.get(t);if(e)return e;const r=yield this.getUserContactFromNetwork(t);return r&&this.knownPublicKeyBundles.set(t,r),r}))}canMessage(t){return U(this,void 0,void 0,(function*(){return void 0!==(yield this.getUserContact(t))}))}sendMessage(t,e,r){return U(this,void 0,void 0,(function*(){let n;const i=yield this.getUserContact(t);if(!i)throw new Error("recipient ".concat(t," is not registered"));this.contacts.has(t)?n=[Object(f.a)(this.address,t)]:(n=[Object(f.c)(t),Object(f.a)(this.address,t)],t!==this.address&&n.push(Object(f.c)(this.address)),this.contacts.add(t));const o=(null===r||void 0===r?void 0:r.timestamp)||new Date,s=yield this.encodeMessage(i,o,e,r);yield Promise.all(n.map((t=>U(this,void 0,void 0,(function*(){const e=yield m.c.fromBytes(s.toBytes(),t,{timestamp:o});return this.sendWakuMessage(e)})))))}))}sendWakuMessage(t){return U(this,void 0,void 0,(function*(){const e=yield this.waku.lightPush.push(t);if(!1===(null===e||void 0===e?void 0:e.isSuccess))throw new Error("Failed to send message with error: ".concat(null===e||void 0===e?void 0:e.info))}))}registerCodec(t){const e=t.contentType,r="".concat(e.authorityId,"/").concat(e.typeId);this._codecs.set(r,t)}codecFor(t){const e="".concat(t.authorityId,"/").concat(t.typeId),r=this._codecs.get(e);if(r&&!(t.versionMajor>r.contentType.versionMajor))return r}encodeMessage(t,e,r,i){return U(this,void 0,void 0,(function*(){const o=(null===i||void 0===i?void 0:i.contentType)||C,s=this.codecFor(o);if(!s)throw new Error("unknown content type "+o);const a=s.encode(r,this);(null===i||void 0===i?void 0:i.contentFallback)&&(a.fallback=i.contentFallback),(null===i||void 0===i?void 0:i.compression)&&(a.compression=i.compression),yield function(t){return P(this,void 0,void 0,(function*(){if(void 0===t.compression)return;const e={bytes:new Uint8Array(t.content.length/10)};yield D(t.content).pipeThrough(new CompressionStream(N(t.compression))).pipeTo(B(e,t.content.length+1e3)),t.content=e.bytes}))}(a);const c=n.d.encode(a).finish();return l.encode(this.keys,t,c,e)}))}decodeMessage(t){return U(this,void 0,void 0,(function*(){const e=yield l.decode(this.keys,t);if(e.error)return e;if(!e.decrypted)throw new Error("decrypted bytes missing");const r=n.d.decode(e.decrypted);if(yield function(t,e){return P(this,void 0,void 0,(function*(){if(void 0===t.compression)return;const r={bytes:new Uint8Array(t.content.length)};yield D(t.content).pipeThrough(new DecompressionStream(N(t.compression))).pipeTo(B(r,e)),t.content=r.bytes}))}(r,this._maxContentSize),!r.type)throw new Error("missing content type");const i=new R(r.type),o=this.codecFor(i);return o?(e.content=o.decode(r,this),e.contentType=i):(e.error=new Error("unknown content type "+i),r.fallback&&(e.content=r.fallback,e.contentType=T)),e}))}streamIntroductionMessages(){return p.create(this,Object(f.c)(this.address),V)}streamConversationMessages(t){const e=Object(f.a)(t,this.address);return p.create(this,e,V,z(e))}listIntroductionMessages(t){return this.listMessages(Object(f.c)(this.address),t)}listConversationMessages(t,e){return this.listMessages(Object(f.a)(t,this.address),Object.assign(Object.assign({},e),{checkAddresses:!0}))}listMessages(t,e){return U(this,void 0,void 0,(function*(){e||(e={}),e.startTime||(e.startTime=new Date(0)),e.endTime||(e.endTime=new Date((new Date).toUTCString())),e.pageSize||(e.pageSize=10);let r=yield this.waku.store.queryHistory([t],{pageSize:e.pageSize,pageDirection:m.a.FORWARD,timeFilter:{startTime:e.startTime,endTime:e.endTime}});r=r.filter((t=>null===t||void 0===t?void 0:t.payload));let n=yield Promise.all(r.map((t=>this.decodeMessage(t.payload))));return(null===e||void 0===e?void 0:e.checkAddresses)&&(n=n.filter(z(t))),n}))}createDisconnectWatcher(){return setInterval((()=>U(this,void 0,void 0,(function*(){const t=[];for(const e of this.waku.libp2p.connectionManager.connections.values())for(const r of e)r.streams.length||(console.log("Closing connection to ".concat(r.remoteAddr)),t.push(r.close()));yield Promise.allSettled(t)}))),1e4)}}function V(t){return t}function z(t){return e=>{const r=e.senderAddress,n=e.recipientAddress;return void 0!==r&&void 0!==n&&Object(f.a)(r,n)===t}}var H=r(6),G=r.n(H),W=r(2),J=r.n(W);J.a.util.Long!==G.a&&(J.a.util.Long=G.a,J.a.configure());new R({authorityId:"xmtp.org",typeId:"composite",versionMajor:1,versionMinor:0})},function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return w}));var n=r(53),i=r.n(n),o=r(20),s=r(1),a=r(13),c=r(712),u=r(44),h=r(4),l=r(3),f=r(133),d=r(14);const p=new l.a(f.a);class m extends h.a{isCrowdsaleAccount(t){return!(!t||!t._isCrowdsaleAccount)}}function y(t,e){const r=JSON.parse(t);e=Object(d.a)(e);const n=Object(o.a)(Object(d.c)(r,"ethaddr")),h=Object(d.b)(Object(d.c)(r,"encseed"));h&&h.length%16===0||p.throwArgumentError("invalid encseed","json",t);const l=Object(s.a)(Object(c.a)(e,e,2e3,32,"sha256")).slice(0,16),f=h.slice(0,16),y=h.slice(16),g=new i.a.ModeOfOperation.cbc(l,f),b=i.a.padding.pkcs7.strip(Object(s.a)(g.decrypt(y)));let v="";for(let i=0;i<b.length;i++)v+=String.fromCharCode(b[i]);const w=Object(u.f)(v),_=Object(a.a)(w);return new m({_isCrowdsaleAccount:!0,address:n,privateKey:_})}var g=r(67),b=r(90);function v(t,e,r){if(Object(g.b)(t)){r&&r(0);const n=y(t,e);return r&&r(1),Promise.resolve(n)}return Object(g.c)(t)?Object(b.a)(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function w(t,e){if(Object(g.b)(t))return y(t,e);if(Object(g.c)(t))return Object(b.b)(t,e);throw new Error("invalid JSON wallet")}},function(t,e,r){"use strict";(function(e){!function(r){const n=2147483647;function i(t){const e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,o=2773480762,s=1359893119,a=2600822924,c=528734635,u=1541459225;const h=new Uint32Array(64);function l(t){let l=0,f=t.length;for(;f>=64;){let d,p,m,y,g,b=r,v=n,w=i,_=o,S=s,E=a,A=c,M=u;for(p=0;p<16;p++)m=l+4*p,h[p]=(255&t[m])<<24|(255&t[m+1])<<16|(255&t[m+2])<<8|255&t[m+3];for(p=16;p<64;p++)d=h[p-2],y=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,d=h[p-15],g=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,h[p]=(y+h[p-7]|0)+(g+h[p-16]|0)|0;for(p=0;p<64;p++)y=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&E^~S&A)|0)+(M+(e[p]+h[p]|0)|0)|0,g=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&v^b&w^v&w)|0,M=A,A=E,E=S,S=_+y|0,_=w,w=v,v=b,b=y+g|0;r=r+b|0,n=n+v|0,i=i+w|0,o=o+_|0,s=s+S|0,a=a+E|0,c=c+A|0,u=u+M|0,l+=64,f-=64}}l(t);let f,d=t.length%64,p=t.length/536870912|0,m=t.length<<3,y=d<56?56:120,g=t.slice(t.length-d,t.length);for(g.push(128),f=d+1;f<y;f++)g.push(0);return g.push(p>>>24&255),g.push(p>>>16&255),g.push(p>>>8&255),g.push(p>>>0&255),g.push(m>>>24&255),g.push(m>>>16&255),g.push(m>>>8&255),g.push(m>>>0&255),l(g),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function o(t,e,r){t=t.length<=64?t:i(t);const n=64+e.length+4,o=new Array(n),s=new Array(64);let a,c=[];for(a=0;a<64;a++)o[a]=54;for(a=0;a<t.length;a++)o[a]^=t[a];for(a=0;a<e.length;a++)o[64+a]=e[a];for(a=n-4;a<n;a++)o[a]=0;for(a=0;a<64;a++)s[a]=92;for(a=0;a<t.length;a++)s[a]^=t[a];function u(){for(let t=n-1;t>=n-4;t--){if(o[t]++,o[t]<=255)return;o[t]=0}}for(;r>=32;)u(),c=c.concat(i(s.concat(i(o)))),r-=32;return r>0&&(u(),c=c.concat(i(s.concat(i(o))).slice(0,r))),c}function s(t,e,r,n,i){let o;for(h(t,16*(2*r-1),i,0,16),o=0;o<2*r;o++)u(t,16*o,i,16),c(i,n),h(i,0,t,e+16*o,16);for(o=0;o<r;o++)h(t,e+2*o*16,t,16*o,16);for(o=0;o<r;o++)h(t,e+16*(2*o+1),t,16*(o+r),16)}function a(t,e){return t<<e|t>>>32-e}function c(t,e){h(t,0,e,0,16);for(let r=8;r>0;r-=2)e[4]^=a(e[0]+e[12],7),e[8]^=a(e[4]+e[0],9),e[12]^=a(e[8]+e[4],13),e[0]^=a(e[12]+e[8],18),e[9]^=a(e[5]+e[1],7),e[13]^=a(e[9]+e[5],9),e[1]^=a(e[13]+e[9],13),e[5]^=a(e[1]+e[13],18),e[14]^=a(e[10]+e[6],7),e[2]^=a(e[14]+e[10],9),e[6]^=a(e[2]+e[14],13),e[10]^=a(e[6]+e[2],18),e[3]^=a(e[15]+e[11],7),e[7]^=a(e[3]+e[15],9),e[11]^=a(e[7]+e[3],13),e[15]^=a(e[11]+e[7],18),e[1]^=a(e[0]+e[3],7),e[2]^=a(e[1]+e[0],9),e[3]^=a(e[2]+e[1],13),e[0]^=a(e[3]+e[2],18),e[6]^=a(e[5]+e[4],7),e[7]^=a(e[6]+e[5],9),e[4]^=a(e[7]+e[6],13),e[5]^=a(e[4]+e[7],18),e[11]^=a(e[10]+e[9],7),e[8]^=a(e[11]+e[10],9),e[9]^=a(e[8]+e[11],13),e[10]^=a(e[9]+e[8],18),e[12]^=a(e[15]+e[14],7),e[13]^=a(e[12]+e[15],9),e[14]^=a(e[13]+e[12],13),e[15]^=a(e[14]+e[13],18);for(let r=0;r<16;++r)t[r]+=e[r]}function u(t,e,r,n){for(let i=0;i<n;i++)r[i]^=t[e+i]}function h(t,e,r,n,i){for(;i--;)r[n++]=t[e++]}function l(t){if(!t||"number"!==typeof t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!==typeof r||r%1||r<0||r>=256)return!1}return!0}function f(t,e){if("number"!==typeof t||t%1)throw new Error("invalid "+e);return t}function d(t,r,i,a,c,d,p){if(i=f(i,"N"),a=f(a,"r"),c=f(c,"p"),d=f(d,"dkLen"),0===i||0!==(i&i-1))throw new Error("N must be power of 2");if(i>n/128/a)throw new Error("N too large");if(a>n/128/c)throw new Error("r too large");if(!l(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!l(r))throw new Error("salt must be an array or buffer");r=Array.prototype.slice.call(r);let m=o(t,r,128*c*a);const y=new Uint32Array(32*c*a);for(let e=0;e<y.length;e++){const t=4*e;y[e]=(255&m[t+3])<<24|(255&m[t+2])<<16|(255&m[t+1])<<8|(255&m[t+0])<<0}const g=new Uint32Array(64*a),b=new Uint32Array(32*a*i),v=32*a,w=new Uint32Array(16),_=new Uint32Array(16),S=c*i*2;let E,A,M=0,I=null,R=!1,T=0,C=0;const O=p?parseInt(1e3/a):4294967295,k="undefined"!==typeof e?e:setTimeout,P=function(){if(R)return p(new Error("cancelled"),M/S);let e;switch(T){case 0:A=32*C*a,h(y,A,g,0,v),T=1,E=0;case 1:e=i-E,e>O&&(e=O);for(let t=0;t<e;t++)h(g,0,b,(E+t)*v,v),s(g,v,a,w,_);if(E+=e,M+=e,p){const t=parseInt(1e3*M/S);if(t!==I){if(R=p(null,M/S),R)break;I=t}}if(E<i)break;E=0,T=2;case 2:e=i-E,e>O&&(e=O);for(let t=0;t<e;t++){const t=g[16*(2*a-1)]&i-1;u(b,t*v,g,v),s(g,v,a,w,_)}if(E+=e,M+=e,p){const t=parseInt(1e3*M/S);if(t!==I){if(R=p(null,M/S),R)break;I=t}}if(E<i)break;if(h(g,0,y,A,v),C++,C<c){T=0;break}m=[];for(let t=0;t<y.length;t++)m.push(y[t]>>0&255),m.push(y[t]>>8&255),m.push(y[t]>>16&255),m.push(y[t]>>24&255);const r=o(t,m,d);return p&&p(null,1,r),r}p&&k(P)};if(!p)for(;;){const t=P();if(void 0!=t)return t}P()}const p={scrypt:function(t,e,r,n,i,o,s){return new Promise((function(a,c){let u=0;s&&s(0),d(t,e,r,n,i,o,(function(t,e,r){if(t)c(t);else if(r)s&&1!==u&&s(1),a(new Uint8Array(r));else if(s&&e!==u)return u=e,s(e)}))}))},syncScrypt:function(t,e,r,n,i,o){return new Uint8Array(d(t,e,r,n,i,o))}};t.exports=p}()}).call(this,r(110).setImmediate)},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(197),i=r(4),o=r(3);const s=new o.a("wordlists/5.6.1");class a{constructor(t){s.checkAbstract(new.target,a),Object(i.d)(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){const e=[];for(let r=0;r<2048;r++){const n=t.getWord(r);if(r!==t.getWordIndex(n))return"0x";e.push(n)}return Object(n.a)(e.join("\n")+"\n")}static register(t,e){e||(e=t.locale)}}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return u}));var n=r(1),i=r(3),o=r(345);const s=new i.a(o.a);const a=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("unable to locate global object")}();let c=a.crypto||a.msCrypto;function u(t){(t<=0||t>1024||t%1||t!=t)&&s.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return c.getRandomValues(e),Object(n.a)(e)}c&&c.getRandomValues||(s.warn("WARNING: Missing strong random number source"),c={getRandomValues:function(t){return s.throwError("no secure random source avaialble",i.a.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}})}).call(this,r(21))},,,,,function(t,e,r){"use strict";var n=r(10),i=r(209),o=r(15).Buffer,s=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(t,e){return t<<e|t>>>32-e}function u(t,e,r,n,i,o,s){return c(t+(e&r|~e&n)+i+o|0,s)+e|0}function h(t,e,r,n,i,o,s){return c(t+(e&n|r&~n)+i+o|0,s)+e|0}function l(t,e,r,n,i,o,s){return c(t+(e^r^n)+i+o|0,s)+e|0}function f(t,e,r,n,i,o,s){return c(t+(r^(e|~n))+i+o|0,s)+e|0}n(a,i),a.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=u(r,n,i,o,t[0],3614090360,7),o=u(o,r,n,i,t[1],3905402710,12),i=u(i,o,r,n,t[2],606105819,17),n=u(n,i,o,r,t[3],3250441966,22),r=u(r,n,i,o,t[4],4118548399,7),o=u(o,r,n,i,t[5],1200080426,12),i=u(i,o,r,n,t[6],2821735955,17),n=u(n,i,o,r,t[7],4249261313,22),r=u(r,n,i,o,t[8],1770035416,7),o=u(o,r,n,i,t[9],2336552879,12),i=u(i,o,r,n,t[10],4294925233,17),n=u(n,i,o,r,t[11],2304563134,22),r=u(r,n,i,o,t[12],1804603682,7),o=u(o,r,n,i,t[13],4254626195,12),i=u(i,o,r,n,t[14],2792965006,17),r=h(r,n=u(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=h(o,r,n,i,t[6],3225465664,9),i=h(i,o,r,n,t[11],643717713,14),n=h(n,i,o,r,t[0],3921069994,20),r=h(r,n,i,o,t[5],3593408605,5),o=h(o,r,n,i,t[10],38016083,9),i=h(i,o,r,n,t[15],3634488961,14),n=h(n,i,o,r,t[4],3889429448,20),r=h(r,n,i,o,t[9],568446438,5),o=h(o,r,n,i,t[14],3275163606,9),i=h(i,o,r,n,t[3],4107603335,14),n=h(n,i,o,r,t[8],1163531501,20),r=h(r,n,i,o,t[13],2850285829,5),o=h(o,r,n,i,t[2],4243563512,9),i=h(i,o,r,n,t[7],1735328473,14),r=l(r,n=h(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=l(o,r,n,i,t[8],2272392833,11),i=l(i,o,r,n,t[11],1839030562,16),n=l(n,i,o,r,t[14],4259657740,23),r=l(r,n,i,o,t[1],2763975236,4),o=l(o,r,n,i,t[4],1272893353,11),i=l(i,o,r,n,t[7],4139469664,16),n=l(n,i,o,r,t[10],3200236656,23),r=l(r,n,i,o,t[13],681279174,4),o=l(o,r,n,i,t[0],3936430074,11),i=l(i,o,r,n,t[3],3572445317,16),n=l(n,i,o,r,t[6],76029189,23),r=l(r,n,i,o,t[9],3654602809,4),o=l(o,r,n,i,t[12],3873151461,11),i=l(i,o,r,n,t[15],530742520,16),r=f(r,n=l(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=f(o,r,n,i,t[7],1126891415,10),i=f(i,o,r,n,t[14],2878612391,15),n=f(n,i,o,r,t[5],4237533241,21),r=f(r,n,i,o,t[12],1700485571,6),o=f(o,r,n,i,t[3],2399980690,10),i=f(i,o,r,n,t[10],4293915773,15),n=f(n,i,o,r,t[1],2240044497,21),r=f(r,n,i,o,t[8],1873313359,6),o=f(o,r,n,i,t[15],4264355552,10),i=f(i,o,r,n,t[6],2734768916,15),n=f(n,i,o,r,t[13],1309151649,21),r=f(r,n,i,o,t[4],4149444226,6),o=f(o,r,n,i,t[11],3174756917,10),i=f(i,o,r,n,t[2],718787259,15),n=f(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},function(t,e,r){"use strict";var n=r(81).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"===typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,c=function(){e.writable||h()},u=e._writableState&&e._writableState.finished,h=function(){a=!1,u=!0,s||o.call(e)},l=e._readableState&&e._readableState.endEmitted,f=function(){s=!1,l=!0,a||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return s&&!l?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},m=function(){e.req.on("finish",h)};return!function(t){return t.setHeader&&"function"===typeof t.abort}(e)?a&&!e._writableState&&(e.on("end",c),e.on("close",c)):(e.on("complete",h),e.on("abort",p),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",h),!1!==r.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",h),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",h),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",h),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},function(t,e,r){"use strict";var n=r(19).Buffer,i=r(10),o=r(209),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function m(t,e,r,n,i,o,s,a){return p(t+(e^r^n)+o+s|0,a)+i|0}function y(t,e,r,n,i,o,s,a){return p(t+(e&r|~e&n)+o+s|0,a)+i|0}function g(t,e,r,n,i,o,s,a){return p(t+((e|~r)^n)+o+s|0,a)+i|0}function b(t,e,r,n,i,o,s,a){return p(t+(e&n|r&~n)+o+s|0,a)+i|0}function v(t,e,r,n,i,o,s,a){return p(t+(e^(r|~n))+o+s|0,a)+i|0}i(d,o),d.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,w=0|this._a,_=0|this._b,S=0|this._c,E=0|this._d,A=0|this._e,M=0;M<80;M+=1){var I,R;M<16?(I=m(r,n,i,o,d,t[a[M]],l[0],u[M]),R=v(w,_,S,E,A,t[c[M]],f[0],h[M])):M<32?(I=y(r,n,i,o,d,t[a[M]],l[1],u[M]),R=b(w,_,S,E,A,t[c[M]],f[1],h[M])):M<48?(I=g(r,n,i,o,d,t[a[M]],l[2],u[M]),R=g(w,_,S,E,A,t[c[M]],f[2],h[M])):M<64?(I=b(r,n,i,o,d,t[a[M]],l[3],u[M]),R=y(w,_,S,E,A,t[c[M]],f[3],h[M])):(I=v(r,n,i,o,d,t[a[M]],l[4],u[M]),R=m(w,_,S,E,A,t[c[M]],f[4],h[M])),r=d,d=o,o=p(i,10),i=n,n=I,w=A,A=E,E=p(S,10),S=_,_=R}var T=this._b+i+E|0;this._b=this._c+o+A|0,this._c=this._d+d+w|0,this._d=this._e+r+_|0,this._e=this._a+n+S|0,this._a=T},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.alloc?n.alloc(20):new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=d},function(t,e,r){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=r(387),e.sha1=r(388),e.sha224=r(389),e.sha256=r(220),e.sha384=r(390),e.sha512=r(221)},function(t,e,r){(e=t.exports=r(223)).Stream=e,e.Readable=e,e.Writable=r(151),e.Duplex=r(69),e.Transform=r(228),e.PassThrough=r(392)},function(t,e,r){"use strict";(function(e,n,i){var o=r(111);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=b;var a,c=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;b.WritableState=g;var u=Object.create(r(93));u.inherits=r(10);var h={deprecate:r(218)},l=r(224),f=r(15).Buffer,d=i.Uint8Array||function(){};var p,m=r(227);function y(){}function g(t,e){a=a||r(69),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,u=t.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(u||0===u)?u:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(A,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),A(t,e))}(t,r,n,e,i);else{var s=S(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(t,r),n?c(w,t,r,s,i):w(t,r,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function b(t){if(a=a||r(69),!p.call(b,this)&&!(this instanceof a))return new b(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),l.call(this)}function v(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function w(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),A(t,e)}function _(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,l=r.callback;if(v(t,e,!1,e.objectMode?1:u.length,u,h,l),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function S(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),A(t,e)}))}function A(t,e){var r=S(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}u.inherits(b,l),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===b&&(t&&t._writableState instanceof g)}})):p=function(t){return t instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(t,e,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=t,f.isBuffer(n)||n instanceof d);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"===typeof e&&(r=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!==typeof r&&(r=y),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(a||function(t,e,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,t,r))&&(i.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=f.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;c||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,n,i,o);return c}(this,i,a,t,e,r)),s},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||_(this,t))},b.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(t,e,r){var n=this._writableState;"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,A(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(22),r(110).setImmediate,r(21))},function(t,e,r){"use strict";var n=r(51);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,r){var n=r(405),i=r(413),o=r(241);e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,r){var n={ECB:r(406),CBC:r(407),CFB:r(408),CFB8:r(409),CFB1:r(410),OFB:r(411),CTR:r(239),GCM:r(239)},i=r(241);for(var o in i)i[o].module=n[i[o].mode];t.exports=i},function(t,e,r){var n;function i(t){this.rand=t}if(t.exports=function(t){return n||(n=new i(null)),n.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"===typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"===typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(249);if("function"!==typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(s){}},function(t,e,r){var n=r(19),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){(function(e){var n=r(8),i=r(80);function o(t){var e,r=t.modulus.byteLength();do{e=new n(i(r))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function s(t,r){var i=function(t){var e=o(t);return{blinder:e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(r),s=r.modulus.byteLength(),a=new n(t).mul(i.blinder).umod(r.modulus),c=a.toRed(n.mont(r.prime1)),u=a.toRed(n.mont(r.prime2)),h=r.coefficient,l=r.prime1,f=r.prime2,d=c.redPow(r.exponent1).fromRed(),p=u.redPow(r.exponent2).fromRed(),m=d.isub(p).imul(h).umod(l).imul(f);return p.iadd(m).imul(i.unblinder).umod(r.modulus).toArrayLike(e,"be",s)}s.getr=o,t.exports=s}).call(this,r(19).Buffer)},function(t,e,r){"use strict";var n=e;n.version=r(421).version,n.utils=r(52),n.rand=r(155),n.curve=r(253),n.curves=r(159),n.ec=r(432),n.eddsa=r(436)},function(t,e,r){"use strict";var n,i=e,o=r(39),s=r(253),a=r(52).assert;function c(t){"short"===t.type?this.curve=new s.short(t):"edwards"===t.type?this.curve=new s.edwards(t):this.curve=new s.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var r=new c(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=c,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(431)}catch(h){n=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(t,e,r){"use strict";(function(e){var n,i=r(19),o=i.Buffer,s={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(s[n]=i[n]);var a=s.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=o[n]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(t,e,r){if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&"undefined"===typeof t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,r)}),a.alloc||(a.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=o(t);return e&&0!==e.length?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!s.kStringMaxLength)try{s.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(c){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),t.exports=s}).call(this,r(22))},function(t,e,r){"use strict";const n=r(162).Reporter,i=r(96).EncoderBuffer,o=r(96).DecoderBuffer,s=r(51),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function u(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=u;const h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){const t=this._baseState,e={};h.forEach((function(r){e[r]=t[r]}));const r=new this.constructor(e.parent);return r._baseState=e,r},u.prototype._wrap=function(){const t=this._baseState;c.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}}),this)},u.prototype._init=function(t){const e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),s.equal(e.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==r.length&&(s(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!==typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const n=t[r];e[n]=r})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){u.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),a.forEach((function(t){u.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(r),this}})),u.prototype.use=function(t){s(t);const e=this._baseState;return s(null===e.use),e.use=t,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(t){const e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},u.prototype.explicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},u.prototype.implicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},u.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},u.prototype.key=function(t){const e=this._baseState;return s(null===e.key),e.key=t,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(t){const e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},u.prototype.contains=function(t){const e=this._baseState;return s(null===e.use),e.contains=t,this},u.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r.default,s=!0,a=null;if(null!==r.key&&(a=t.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(s=this._peekTag(t,n,r.any),t.isError(s))return s}else{const n=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),s=!0}catch(c){s=!1}t.restore(n)}}if(r.obj&&s&&(n=t.enterObject()),s){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e}const n=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const n=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(n))return n;r.any?i=t.raw(e):t=n}if(e&&e.track&&null!==r.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new o(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(n,e)}}return r.obj&&s&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,r.key,i),i},u.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},u.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),s(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},u.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const s=t.save(),a=r.choice[o];try{const r=a._decode(t,e);if(t.isError(r))return!1;n={type:o,value:r},i=!0}catch(c){return t.restore(s),!1}return!0}),this),i?n:t.error("Choice not matched")},u.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},u.prototype._encode=function(t,e,r){const n=this._baseState;if(null!==n.default&&n.default===t)return;const i=this._encodeValue(t,e,r);return void 0===i||this._skipDefault(i,e,r)?void 0:i},u.prototype._encodeValue=function(t,e,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);let o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)s=this._getUse(i.contains,r)._encode(t,e),a=!0;else if(i.children)s=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const n=e.enterKey(r._baseState.key);if("object"!==typeof t)return e.error("Child expected, but input is not object");const i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(r){const n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)}),r))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(s=this._encodePrimitive(i.tag,t),a=!0);if(!i.any&&null===i.choice){const t=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===t?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(t,a,r,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},u.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},u.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},u.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},u.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,r){"use strict";const n=r(10);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},i.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof o;if(e=n?t:new o(r.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},i.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(t,e,r){"use strict";function n(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n(e.tag)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(268).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=l[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===e,u=new t(o),h=this.clone();if(c){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,_=v>>>13,S=0|s[4],E=8191&S,A=S>>>13,M=0|s[5],I=8191&M,R=M>>>13,T=0|s[6],C=8191&T,O=T>>>13,k=0|s[7],P=8191&k,N=k>>>13,D=0|s[8],B=8191&D,x=D>>>13,L=0|s[9],U=8191&L,j=L>>>13,K=0|a[0],F=8191&K,q=K>>>13,V=0|a[1],z=8191&V,H=V>>>13,G=0|a[2],W=8191&G,J=G>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],$=8191&Q,tt=Q>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(m,F)|0,o=Math.imul(m,q);var gt=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),i=(i=Math.imul(g,q))+Math.imul(b,F)|0,o=Math.imul(b,q),n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var bt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,F),i=(i=Math.imul(w,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(b,z)|0,o=o+Math.imul(b,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(A,F)|0,o=Math.imul(A,q),n=n+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(O,F)|0,o=Math.imul(O,q),n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var St=(u+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(x,F)|0,o=Math.imul(x,q),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ut)|0;var At=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(j,F)|0,o=Math.imul(j,q),n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(g,ct)|0,i=(i=i+Math.imul(g,ut)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(j,z)|0,o=Math.imul(j,H),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(j,W)|0,o=Math.imul(j,J),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(A,ct)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0;var Rt=(u+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Tt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0;var Ct=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ft)|0;var Ot=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var kt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,ct),i=(i=Math.imul(U,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var Pt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(j,lt)|0,o=Math.imul(j,ft);var Nt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Dt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=yt,c[1]=gt,c[2]=bt,c[3]=vt,c[4]=wt,c[5]=_t,c[6]=St,c[7]=Et,c[8]=At,c[9]=Mt,c[10]=It,c[11]=Rt,c[12]=Tt,c[13]=Ct,c[14]=Ot,c[15]=kt,c[16]=Pt,c[17]=Nt,c[18]=Dt,0!==u&&(c[19]=u,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var h=o-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<s;d++){var p=r[h+d],m=n[h+d],y=r[h+d+s],g=n[h+d+s],b=l*y-f*g;g=l*g+f*y,y=b,r[h+d]=p+y,n[h+d]=m+g,r[h+d+s]=p-y,n[h+d+s]=m-g,d!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(c)):(r.isub(e),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,b),i(_,b),i(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return g[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(l,new o(1).iushln(p-y-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=y}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(70)(t))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(73);class i{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?n.create(this.code,e):e.then((t=>n.create(this.code,t)))}throw Error("Unknown type, must be binary type")}}e.Hasher=i,e.from=t=>{let{name:e,code:r,encode:n}=t;return new i(e,r,n)}},function(t,e,r){"use strict";const n=r(167);r(75),r(280);const i=r(16),o=r(9),{fromString:s}=r(24),a=r(488),c={rsa:r(489),ed25519:r(494),secp256k1:r(497)(n,r(122))},u="secp256k1 support requires libp2p-crypto-secp256k1 package",h="ERR_MISSING_PACKAGE";function l(t){const e=c[t.toLowerCase()];if(!e){const e=Object.keys(c).join(" / ");throw o(new Error("invalid or unsupported key type ".concat(t,". Must be ").concat(e)),"ERR_UNSUPPORTED_KEY_TYPE")}return e}const f=async t=>{const e=n.PrivateKey.decode(t),r=e.Data;switch(e.Type){case n.KeyType.RSA:return c.rsa.unmarshalRsaPrivateKey(r);case n.KeyType.Ed25519:return c.ed25519.unmarshalEd25519PrivateKey(r);case n.KeyType.Secp256k1:if(c.secp256k1)return c.secp256k1.unmarshalSecp256k1PrivateKey(r);throw o(new Error(u),h);default:l(e.Type)}};t.exports={supportedKeys:c,keysPBM:n,keyStretcher:r(499),generateEphemeralKeyPair:r(500),generateKeyPair:async(t,e)=>l(t).generateKeyPair(e),generateKeyPairFromSeed:async(t,e,r)=>{const n=l(t);if("ed25519"!==t.toLowerCase())throw o(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(e,r)},unmarshalPublicKey:t=>{const e=n.PublicKey.decode(t),r=e.Data;switch(e.Type){case n.KeyType.RSA:return c.rsa.unmarshalRsaPublicKey(r);case n.KeyType.Ed25519:return c.ed25519.unmarshalEd25519PublicKey(r);case n.KeyType.Secp256k1:if(c.secp256k1)return c.secp256k1.unmarshalSecp256k1PublicKey(r);throw o(new Error(u),h);default:l(e.Type)}},marshalPublicKey:(t,e)=>(l(e=(e||"rsa").toLowerCase()),t.bytes),unmarshalPrivateKey:f,marshalPrivateKey:(t,e)=>(l(e=(e||"rsa").toLowerCase()),t.bytes),import:async(t,e)=>{try{const r=await a.import(t,e);return f(r)}catch(u){}const r=i.pki.decryptRsaPrivateKey(t,e);if(null===r)throw o(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=i.asn1.toDer(i.pki.privateKeyToAsn1(r));return n=s(n.getBytes(),"ascii"),c.rsa.unmarshalRsaPrivateKey(n)}}},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-crypto-keys"]||(n.roots["libp2p-crypto-keys"]={});a.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}(),a.PublicKey=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.Type=0,t.prototype.Data=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),e.uint32(8).int32(t.Type),e.uint32(18).bytes(t.Data),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.PublicKey;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.Type=t.int32();break;case 2:n.Data=t.bytes();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("Type"))throw s.ProtocolError("missing required 'Type'",{instance:n});if(!n.hasOwnProperty("Data"))throw s.ProtocolError("missing required 'Data'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.PublicKey)return t;var e=new a.PublicKey;switch(t.Type){case"RSA":case 0:e.Type=0;break;case"Ed25519":case 1:e.Type=1;break;case"Secp256k1":case 2:e.Type=2}return null!=t.Data&&("string"===typeof t.Data?s.base64.decode(t.Data,e.Data=s.newBuffer(s.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.Type=e.enums===String?"RSA":0,e.bytes===String?r.Data="":(r.Data=[],e.bytes!==Array&&(r.Data=s.newBuffer(r.Data)))),null!=t.Type&&t.hasOwnProperty("Type")&&(r.Type=e.enums===String?a.KeyType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(r.Data=e.bytes===String?s.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.PrivateKey=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.Type=0,t.prototype.Data=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),e.uint32(8).int32(t.Type),e.uint32(18).bytes(t.Data),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.PrivateKey;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.Type=t.int32();break;case 2:n.Data=t.bytes();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("Type"))throw s.ProtocolError("missing required 'Type'",{instance:n});if(!n.hasOwnProperty("Data"))throw s.ProtocolError("missing required 'Data'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.PrivateKey)return t;var e=new a.PrivateKey;switch(t.Type){case"RSA":case 0:e.Type=0;break;case"Ed25519":case 1:e.Type=1;break;case"Secp256k1":case 2:e.Type=2}return null!=t.Data&&("string"===typeof t.Data?s.base64.decode(t.Data,e.Data=s.newBuffer(s.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.Type=e.enums===String?"RSA":0,e.bytes===String?r.Data="":(r.Data=[],e.bytes!==Array&&(r.Data=s.newBuffer(r.Data)))),null!=t.Type&&t.hasOwnProperty("Type")&&(r.Type=e.enums===String?a.KeyType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(r.Data=e.bytes===String?s.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},function(t,e,r){var n=r(16);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.des.Algorithm(t,e)}))}r(278),r(279),r(28),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createEncryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createDecryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return d(r._keys,t,e,!1)},decrypt:function(t,e){return d(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,w=0;w<y;w++){var _=t.getInt32(),S=t.getInt32();_^=(e=252645135&(_>>>4^S))<<4,_^=e=65535&((S^=e)>>>-16^_),_^=(e=858993459&(_>>>2^(S^=e<<-16)))<<2,_^=e=65535&((S^=e)>>>-16^_),_^=(e=1431655765&(_>>>1^(S^=e<<-16)))<<1,_^=e=16711935&((S^=e)>>>8^_),e=(_^=(e=1431655765&(_>>>1^(S^=e<<8)))<<1)<<8|(S^=e)>>>20&240,_=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=e;for(var E=0;E<b.length;++E){b[E]?(_=_<<2|_>>>26,S=S<<2|S>>>26):(_=_<<1|_>>>27,S=S<<1|S>>>27),S&=-15;var A=r[(_&=-15)>>>28]|n[_>>>24&15]|i[_>>>20&15]|o[_>>>16&15]|s[_>>>12&15]|a[_>>>8&15]|c[_>>>4&15],M=u[S>>>28]|h[S>>>24&15]|l[S>>>20&15]|f[S>>>16&15]|d[S>>>12&15]|p[S>>>8&15]|m[S>>>4&15];e=65535&(M>>>16^A),g[v++]=A^e,g[v++]=M^e<<16}}return g}(e),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var o=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],h=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],l=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function d(t,e,r,n){var i,d,p=32===t.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var m=e[0],y=e[1];m^=(d=252645135&(m>>>4^y))<<4,m^=(d=65535&(m>>>16^(y^=d)))<<16,m^=d=858993459&((y^=d)>>>2^m),m^=d=16711935&((y^=d<<2)>>>8^m),m=(m^=(d=1431655765&(m>>>1^(y^=d<<8)))<<1)<<1|m>>>31,y=(y^=d)<<1|y>>>31;for(var g=0;g<p;g+=3){for(var b=i[g+1],v=i[g+2],w=i[g];w!=b;w+=v){var _=y^t[w],S=(y>>>4|y<<28)^t[w+1];d=m,m=y,y=d^(s[_>>>24&63]|c[_>>>16&63]|h[_>>>8&63]|f[63&_]|o[S>>>24&63]|a[S>>>16&63]|u[S>>>8&63]|l[63&S])}d=m,m=y,y=d}y=y>>>1|y<<31,y^=d=1431655765&((m=m>>>1|m<<31)>>>1^y),y^=(d=16711935&(y>>>8^(m^=d<<1)))<<8,y^=(d=858993459&(y>>>2^(m^=d)))<<2,y^=d=65535&((m^=d)>>>16^y),y^=d=252645135&((m^=d<<16)>>>4^y),m^=d<<4,r[0]=m,r[1]=y}function p(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=t,i.call(e,r)},e}},function(t,e,r){var n=r(16);r(28);var i=t.exports=n.pem=n.pem||{};function o(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var o=0,s=-1;for(i=0;i<e.length;++i,++o)if(o>65&&-1!==s){var a=e[s];","===a?(++s,e=e.substr(0,s)+"\r\n "+e.substr(s)):e=e.substr(0,s)+"\r\n"+a+e.substr(s+1),o=i-s-1,s=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(s=i);return e}function s(t){return t.replace(/^\s+/,"")}i.encode=function(t,e){e=e||{};var r,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(i+=o(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(i+=o(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),i+=o(r)),t.headers)for(var s=0;s<t.headers.length;++s)i+=o(t.headers[s]);return t.procType&&(i+="\r\n"),i+=n.util.encode64(t.body,e.maxline||64)+"\r\n",i+="-----END "+t.type+"-----\r\n"},i.decode=function(t){for(var e,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;e=i.exec(t);){var c=e[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var u={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(u),e[2]){for(var h=e[2].split(a),l=0;e&&l<h.length;){for(var f=h[l].replace(/\s+$/,""),d=l+1;d<h.length;++d){var p=h[d];if(!/\s/.test(p[0]))break;f+=p,l=d}if(e=f.match(o)){for(var m={name:e[1],values:[]},y=e[2].split(","),g=0;g<y.length;++g)m.values.push(s(y[g]));if(u.procType)if(u.contentDomain||"Content-Domain"!==m.name)if(u.dekInfo||"DEK-Info"!==m.name)u.headers.push(m);else{if(0===m.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:y[0],parameters:y[1]||null}}else u.contentDomain=y[0]||"";else{if("Proc-Type"!==m.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==m.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:y[0],type:y[1]}}}++l}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(t,e,r){var n,i=r(16);t.exports=i.jsbn=i.jsbn||{};function o(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function s(){return new o(null)}function a(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var c=16383&this.data[t],u=this.data[t++]>>14,h=a*c+u*s;i=((c=s*c+((16383&h)<<14)+r.data[n]+i)>>28)+(h>>14)+a*u,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=o,"undefined"===typeof navigator?(o.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=function(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var c=32767&this.data[t],u=this.data[t++]>>15,h=a*c+u*s;i=((c=s*c+((32767&h)<<15)+r.data[n]+(1073741823&i))>>>30)+(h>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i},n=30):"Netscape"!=navigator.appName?(o.prototype.am=function(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i},n=26):(o.prototype.am=a,n=28),o.prototype.DB=n,o.prototype.DM=(1<<n)-1,o.prototype.DV=1<<n;o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-n,o.prototype.F2=2*n-52;var c,u,h=new Array;for(c="0".charCodeAt(0),u=0;u<=9;++u)h[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)h[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)h[c++]=u;function l(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function f(t,e){var r=h[t.charCodeAt(e)];return null==r?-1:r}function d(t){var e=s();return e.fromInt(t),e}function p(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function m(t){this.m=t}function y(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function g(t,e){return t&e}function b(t,e){return t|e}function v(t,e){return t^e}function w(t,e){return t&~e}function _(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function S(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function E(){}function A(t){return t}function M(t){this.r2=s(),this.q3=s(),o.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}m.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},m.prototype.revert=function(t){return t},m.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},m.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},m.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},y.prototype.convert=function(t){var e=s();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(o.ZERO)>0&&this.m.subTo(e,e),e},y.prototype.revert=function(t){var e=s();return t.copyTo(e),this.reduce(e),e},y.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},y.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},o.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},o.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},o.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var a=8==r?255&t[n]:f(t,n);a<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==s?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},o.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},o.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},o.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+s+1]=this.data[r]>>i|a,a=(this.data[r]&o)<<n;for(r=s-1;r>=0;--r)e.data[r]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},o.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},o.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()},o.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&o.ZERO.subTo(e,e)},o.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},o.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var a=s(),c=this.s,u=t.s,h=this.DB-p(n.data[n.t-1]);h>0?(n.lShiftTo(h,a),i.lShiftTo(h,r)):(n.copyTo(a),i.copyTo(r));var l=a.t,f=a.data[l-1];if(0!=f){var d=f*(1<<this.F1)+(l>1?a.data[l-2]>>this.F2:0),m=this.FV/d,y=(1<<this.F1)/d,g=1<<this.F2,b=r.t,v=b-l,w=null==e?s():e;for(a.dlShiftTo(v,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),o.ONE.dlShiftTo(l,w),w.subTo(a,a);a.t<l;)a.data[a.t++]=0;for(;--v>=0;){var _=r.data[--b]==f?this.DM:Math.floor(r.data[b]*m+(r.data[b-1]+g)*y);if((r.data[b]+=a.am(0,_,r,v,0,l))<_)for(a.dlShiftTo(v,w),r.subTo(w,r);r.data[b]<--_;)r.subTo(w,r)}null!=e&&(r.drShiftTo(l,e),c!=u&&o.ZERO.subTo(e,e)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),c<0&&o.ZERO.subTo(r,r)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},o.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},o.prototype.exp=function(t,e){if(t>4294967295||t<1)return o.ONE;var r=s(),n=s(),i=e.convert(this),a=p(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var c=r;r=n,n=c}return e.revert(r)},o.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this.data[s]>>a)>0&&(i=!0,o=l(r));s>=0;)a<e?(r=(this.data[s]&(1<<a)-1)<<e-a,r|=this.data[--s]>>(a+=this.DB-e)):(r=this.data[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=l(r));return i?o:"0"},o.prototype.negate=function(){var t=s();return o.ZERO.subTo(this,t),t},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this.data[this.t-1]^this.s&this.DM)},o.prototype.mod=function(t){var e=s();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(o.ZERO)>0&&t.subTo(e,e),e},o.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new m(e):new y(e),this.exp(t,r)},o.ZERO=d(0),o.ONE=d(1),E.prototype.convert=A,E.prototype.revert=A,E.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},E.prototype.sqrTo=function(t,e){t.squareTo(e)},M.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=s();return t.copyTo(e),this.reduce(e),e},M.prototype.revert=function(t){return t},M.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},M.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},M.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],R=(1<<26)/I[I.length-1];o.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},o.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=d(r),i=s(),o=s(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a},o.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,a=0,c=0;c<t.length;++c){var u=f(t,c);u<0?"-"==t.charAt(c)&&0==this.signum()&&(i=!0):(a=e*a+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),i&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(o.ONE.shiftLeft(t-1),b,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(o.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},o.prototype.bitwiseTo=function(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},o.prototype.changeBit=function(t,e){var r=o.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},o.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()},o.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},o.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()},o.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},o.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r},o.prototype.millerRabin=function(t){var e=this.subtract(o.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,i=e.shiftRight(r),s={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},a=0;a<t;++a){do{n=new o(this.bitLength(),s)}while(n.compareTo(o.ONE)<=0||n.compareTo(e)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(o.ONE)&&0!=c.compareTo(e)){for(var u=1;u++<r&&0!=c.compareTo(e);)if(0==(c=c.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=c.compareTo(e))return!1}}return!0},o.prototype.clone=function(){var t=s();return this.copyTo(t),t},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},o.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},o.prototype.equals=function(t){return 0==this.compareTo(t)},o.prototype.min=function(t){return this.compareTo(t)<0?this:t},o.prototype.max=function(t){return this.compareTo(t)>0?this:t},o.prototype.and=function(t){var e=s();return this.bitwiseTo(t,g,e),e},o.prototype.or=function(t){var e=s();return this.bitwiseTo(t,b,e),e},o.prototype.xor=function(t){var e=s();return this.bitwiseTo(t,v,e),e},o.prototype.andNot=function(t){var e=s();return this.bitwiseTo(t,w,e),e},o.prototype.not=function(){for(var t=s(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},o.prototype.shiftLeft=function(t){var e=s();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},o.prototype.shiftRight=function(t){var e=s();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},o.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+_(this.data[t]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=S(this.data[r]^e);return t},o.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},o.prototype.setBit=function(t){return this.changeBit(t,b)},o.prototype.clearBit=function(t){return this.changeBit(t,w)},o.prototype.flipBit=function(t){return this.changeBit(t,v)},o.prototype.add=function(t){var e=s();return this.addTo(t,e),e},o.prototype.subtract=function(t){var e=s();return this.subTo(t,e),e},o.prototype.multiply=function(t){var e=s();return this.multiplyTo(t,e),e},o.prototype.divide=function(t){var e=s();return this.divRemTo(t,e,null),e},o.prototype.remainder=function(t){var e=s();return this.divRemTo(t,null,e),e},o.prototype.divideAndRemainder=function(t){var e=s(),r=s();return this.divRemTo(t,e,r),new Array(e,r)},o.prototype.modPow=function(t,e){var r,n,i=t.bitLength(),o=d(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new m(e):e.isEven()?new M(e):new y(e);var a=new Array,c=3,u=r-1,h=(1<<r)-1;if(a[1]=n.convert(this),r>1){var l=s();for(n.sqrTo(a[1],l);c<=h;)a[c]=s(),n.mulTo(l,a[c-2],a[c]),c+=2}var f,g,b=t.t-1,v=!0,w=s();for(i=p(t.data[b])-1;b>=0;){for(i>=u?f=t.data[b]>>i-u&h:(f=(t.data[b]&(1<<i+1)-1)<<u-i,b>0&&(f|=t.data[b-1]>>this.DB+i-u)),c=r;0==(1&f);)f>>=1,--c;if((i-=c)<0&&(i+=this.DB,--b),v)a[f].copyTo(o),v=!1;else{for(;c>1;)n.sqrTo(o,w),n.sqrTo(w,o),c-=2;c>0?n.sqrTo(o,w):(g=o,o=w,w=g),n.mulTo(w,a[f],o)}for(;b>=0&&0==(t.data[b]&1<<i);)n.sqrTo(o,w),g=o,o=w,w=g,--i<0&&(i=this.DB-1,--b)}return n.revert(o)},o.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return o.ZERO;for(var r=t.clone(),n=this.clone(),i=d(1),s=d(0),a=d(0),c=d(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),s.subTo(c,s)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(s,c))}return 0!=n.compareTo(o.ONE)?o.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},o.prototype.pow=function(t){return this.exp(t,new E)},o.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},o.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(e=0;e<I.length;++e)if(r.data[0]==I[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<I.length;){for(var n=I[e],i=e+1;i<I.length&&n<R;)n*=I[i++];for(n=r.modInt(n);e<i;)if(n%I[e++]==0)return!1}return r.millerRabin(t)}},function(t,e,r){"use strict";r(28),r(170);const n=r(16),{fromString:i}=r(24),{toString:o}=r(29),{concat:s}=r(25);e.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=s([new Uint8Array(e-r.length),r])}return o(r,"base64url")},e.base64urlToBigInteger=t=>{const r=e.base64urlToBuffer(t);return new n.jsbn.BigInteger(o(r,"base16"),16)},e.base64urlToBuffer=(t,e)=>{let r=i(t,"base64urlpad");if(null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=s([new Uint8Array(e-r.length),r])}return r}},function(t,e,r){"use strict";const{base64:n}=r(116),i=r(282);t.exports={export:async function(t,e){const r=i.create(),o=await r.encrypt(t,e);return n.encode(o)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(514),i=r(62);function o(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;var s=new Uint8Array(32);s[0]=9;var a=o([56129,1]);function c(t){for(var e=1,r=0;r<16;r++){var n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function u(t,e,r){for(var n=~(r-1),i=0;i<16;i++){var o=n&(t[i]^e[i]);t[i]^=o,e[i]^=o}}function h(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function l(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function f(t,e,r){var n,i,o=0,s=0,a=0,c=0,u=0,h=0,l=0,f=0,d=0,p=0,m=0,y=0,g=0,b=0,v=0,w=0,_=0,S=0,E=0,A=0,M=0,I=0,R=0,T=0,C=0,O=0,k=0,P=0,N=0,D=0,B=0,x=r[0],L=r[1],U=r[2],j=r[3],K=r[4],F=r[5],q=r[6],V=r[7],z=r[8],H=r[9],G=r[10],W=r[11],J=r[12],Y=r[13],Z=r[14],X=r[15];o+=(n=e[0])*x,s+=n*L,a+=n*U,c+=n*j,u+=n*K,h+=n*F,l+=n*q,f+=n*V,d+=n*z,p+=n*H,m+=n*G,y+=n*W,g+=n*J,b+=n*Y,v+=n*Z,w+=n*X,s+=(n=e[1])*x,a+=n*L,c+=n*U,u+=n*j,h+=n*K,l+=n*F,f+=n*q,d+=n*V,p+=n*z,m+=n*H,y+=n*G,g+=n*W,b+=n*J,v+=n*Y,w+=n*Z,_+=n*X,a+=(n=e[2])*x,c+=n*L,u+=n*U,h+=n*j,l+=n*K,f+=n*F,d+=n*q,p+=n*V,m+=n*z,y+=n*H,g+=n*G,b+=n*W,v+=n*J,w+=n*Y,_+=n*Z,S+=n*X,c+=(n=e[3])*x,u+=n*L,h+=n*U,l+=n*j,f+=n*K,d+=n*F,p+=n*q,m+=n*V,y+=n*z,g+=n*H,b+=n*G,v+=n*W,w+=n*J,_+=n*Y,S+=n*Z,E+=n*X,u+=(n=e[4])*x,h+=n*L,l+=n*U,f+=n*j,d+=n*K,p+=n*F,m+=n*q,y+=n*V,g+=n*z,b+=n*H,v+=n*G,w+=n*W,_+=n*J,S+=n*Y,E+=n*Z,A+=n*X,h+=(n=e[5])*x,l+=n*L,f+=n*U,d+=n*j,p+=n*K,m+=n*F,y+=n*q,g+=n*V,b+=n*z,v+=n*H,w+=n*G,_+=n*W,S+=n*J,E+=n*Y,A+=n*Z,M+=n*X,l+=(n=e[6])*x,f+=n*L,d+=n*U,p+=n*j,m+=n*K,y+=n*F,g+=n*q,b+=n*V,v+=n*z,w+=n*H,_+=n*G,S+=n*W,E+=n*J,A+=n*Y,M+=n*Z,I+=n*X,f+=(n=e[7])*x,d+=n*L,p+=n*U,m+=n*j,y+=n*K,g+=n*F,b+=n*q,v+=n*V,w+=n*z,_+=n*H,S+=n*G,E+=n*W,A+=n*J,M+=n*Y,I+=n*Z,R+=n*X,d+=(n=e[8])*x,p+=n*L,m+=n*U,y+=n*j,g+=n*K,b+=n*F,v+=n*q,w+=n*V,_+=n*z,S+=n*H,E+=n*G,A+=n*W,M+=n*J,I+=n*Y,R+=n*Z,T+=n*X,p+=(n=e[9])*x,m+=n*L,y+=n*U,g+=n*j,b+=n*K,v+=n*F,w+=n*q,_+=n*V,S+=n*z,E+=n*H,A+=n*G,M+=n*W,I+=n*J,R+=n*Y,T+=n*Z,C+=n*X,m+=(n=e[10])*x,y+=n*L,g+=n*U,b+=n*j,v+=n*K,w+=n*F,_+=n*q,S+=n*V,E+=n*z,A+=n*H,M+=n*G,I+=n*W,R+=n*J,T+=n*Y,C+=n*Z,O+=n*X,y+=(n=e[11])*x,g+=n*L,b+=n*U,v+=n*j,w+=n*K,_+=n*F,S+=n*q,E+=n*V,A+=n*z,M+=n*H,I+=n*G,R+=n*W,T+=n*J,C+=n*Y,O+=n*Z,k+=n*X,g+=(n=e[12])*x,b+=n*L,v+=n*U,w+=n*j,_+=n*K,S+=n*F,E+=n*q,A+=n*V,M+=n*z,I+=n*H,R+=n*G,T+=n*W,C+=n*J,O+=n*Y,k+=n*Z,P+=n*X,b+=(n=e[13])*x,v+=n*L,w+=n*U,_+=n*j,S+=n*K,E+=n*F,A+=n*q,M+=n*V,I+=n*z,R+=n*H,T+=n*G,C+=n*W,O+=n*J,k+=n*Y,P+=n*Z,N+=n*X,v+=(n=e[14])*x,w+=n*L,_+=n*U,S+=n*j,E+=n*K,A+=n*F,M+=n*q,I+=n*V,R+=n*z,T+=n*H,C+=n*G,O+=n*W,k+=n*J,P+=n*Y,N+=n*Z,D+=n*X,w+=(n=e[15])*x,s+=38*(S+=n*U),a+=38*(E+=n*j),c+=38*(A+=n*K),u+=38*(M+=n*F),h+=38*(I+=n*q),l+=38*(R+=n*V),f+=38*(T+=n*z),d+=38*(C+=n*H),p+=38*(O+=n*G),m+=38*(k+=n*W),y+=38*(P+=n*J),g+=38*(N+=n*Y),b+=38*(D+=n*Z),v+=38*(B+=n*X),o=(n=(o+=38*(_+=n*L))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=h,t[6]=l,t[7]=f,t[8]=d,t[9]=p,t[10]=m,t[11]=y,t[12]=g,t[13]=b,t[14]=v,t[15]=w}function d(t,e){f(t,e,e)}function p(t,e){for(var r=new Uint8Array(32),n=new Float64Array(80),i=o(),s=o(),p=o(),m=o(),y=o(),g=o(),b=0;b<31;b++)r[b]=t[b];r[31]=127&t[31]|64,r[0]&=248,function(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(n,e);for(b=0;b<16;b++)s[b]=n[b];i[0]=m[0]=1;for(b=254;b>=0;--b){var v=r[b>>>3]>>>(7&b)&1;u(i,s,v),u(p,m,v),h(y,i,p),l(i,i,p),h(p,s,m),l(s,s,m),d(m,y),d(g,i),f(i,p,i),f(p,s,y),h(y,i,p),l(i,i,p),d(s,i),l(p,m,g),f(i,p,a),h(i,i,m),f(p,p,i),f(i,m,g),f(m,s,n),d(s,y),u(i,s,v),u(p,m,v)}for(b=0;b<16;b++)n[b+16]=i[b],n[b+32]=p[b],n[b+48]=s[b],n[b+64]=m[b];var w=n.subarray(32),_=n.subarray(16);!function(t,e){for(var r=o(),n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)d(r,r),2!==n&&4!==n&&f(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}(w,w),f(_,_,w);var S=new Uint8Array(32);return function(t,e){for(var r=o(),n=o(),i=0;i<16;i++)n[i]=e[i];c(n),c(n),c(n);for(var s=0;s<2;s++){for(r[0]=n[0]-65517,i=1;i<15;i++)r[i]=n[i]-65535-(r[i-1]>>16&1),r[i-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var a=r[15]>>16&1;r[14]&=65535,u(n,r,1-a)}for(i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}(S,_),S}function m(t){return p(t,s)}function y(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+e.SECRET_KEY_LENGTH+" bytes");var r=new Uint8Array(t);return{publicKey:m(r),secretKey:r}}e.scalarMult=p,e.scalarMultBase=m,e.generateKeyPairFromSeed=y,e.generateKeyPair=function(t){var e=n.randomBytes(32,t),r=y(e);return i.wipe(e),r},e.sharedKey=function(t,r,n){if(void 0===n&&(n=!1),t.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(r.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=p(t,r);if(n){for(var o=0,s=0;s<i.length;s++)o|=i[s];if(0===o)throw new Error("X25519: invalid shared key")}return i}},function(t,e,r){"use strict";t.exports=()=>{const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t}},function(t,e,r){"use strict";const{Buffer:n}=r(19),i=r(54);t.exports=async function*(t){for await(const e of t)n.isBuffer(e)?yield e:i.isBufferList(e)?yield e.slice():yield n.from(e)},t.exports.toBuffer=t.exports,t.exports.toList=async function*(t){for await(const e of t)n.isBuffer(e)?yield(new i).append(e):i.isBufferList(e)?yield e:yield(new i).append(n.from(e))}},function(t,e,r){"use strict";function n(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Object.defineProperty(e,"__esModule",{value:!0}),e.select=function(t,e,r){return~(t-1)&e|t-1&r},e.lessOrEqual=function(t,e){return(0|t)-(0|e)-1>>>31&1},e.compare=n,e.equal=function(t,e){return 0!==t.length&&0!==e.length&&0!==n(t,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUMP_SESSION_KEYS=e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES=void 0,e.NOISE_MSG_MAX_LENGTH_BYTES=65535,e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES-16,e.DUMP_SESSION_KEYS=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DUMP_SESSION_KEYS},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(188),i=r(29),o=r(24);const s="/",a=(new TextEncoder).encode(s),c=a[0];class u{constructor(t,e){if("string"===typeof t)this._buf=o.fromString(t);else{if(!(t instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=t}if(null==e&&(e=!0),e&&this.clean(),0===this._buf.byteLength||this._buf[0]!==c)throw new Error("Invalid key")}toString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";return i.toString(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return"Key(".concat(this.toString(),")")}static withNamespaces(t){return new u(t.join(s))}static random(){return new u(n.nanoid().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||"string"===typeof t?new u(t):t.uint8Array?new u(t.uint8Array()):null}clean(){if(this._buf&&0!==this._buf.byteLength||(this._buf=a),this._buf[0]!==c){const t=new Uint8Array(this._buf.byteLength+1);t.fill(c,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===c;)this._buf=this._buf.subarray(0,-1)}less(t){const e=this.list(),r=t.list();for(let n=0;n<e.length;n++){if(r.length<n+1)return!1;const t=e[n],i=r[n];if(t<i)return!0;if(t>i)return!1}return e.length<r.length}reverse(){return u.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(s).slice(1)}type(){return function(t){const e=t.split(":");if(e.length<2)return"";return e.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(t){const e=t.split(":");return e[e.length-1]}(this.baseNamespace())}instance(t){return new u(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(s)||(t+=s),t+=this.type(),new u(t)}parent(){const t=this.list();return 1===t.length?new u(s):new u(t.slice(0,-1).join(s))}child(t){return this.toString()===s?t:t.toString()===s?this:new u(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()!==this.toString()&&t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()!==this.toString()&&this.toString().startsWith(t.toString())}isTopLevel(){return 1===this.list().length}concat(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.withNamespaces([...this.namespaces(),...(n=e.map((t=>t.namespaces())),[].concat(...n))]);var n}}e.Key=u},function(t,e,r){"use strict";t.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50}}},function(t,e,r){"use strict";t.exports={ADVERTISE_BOOT_DELAY:9e5,ADVERTISE_TTL:18e5,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}},function(t,e,r){"use strict";const{Multiaddr:n}=r(11),i=r(23),o=r(570),{PeerRecord:s}=r(571),{ENVELOPE_DOMAIN_PEER_RECORD:a,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:c}=r(572);class u{constructor(t){let{peerId:e,multiaddrs:r=[],seqNumber:n=Date.now()}=t;this.domain=a,this.codec=c,this.peerId=e,this.multiaddrs=r,this.seqNumber=n,this._marshal=void 0}marshal(){return this._marshal||(this._marshal=s.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map((t=>({multiaddr:t.bytes})))}).finish()),this._marshal}equals(t){return t instanceof u&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!o(this.multiaddrs,t.multiaddrs)))}}u.createFromProtobuf=t=>{const e=s.decode(t),r=i.createFromBytes(e.peerId),o=(e.addresses||[]).map((t=>new n(t.multiaddr))),a=Number(e.seq);return new u({peerId:r,multiaddrs:o,seqNumber:a})},u.DOMAIN=a,t.exports=u},function(t,e,r){"use strict";const{Multiaddr:n}=r(11),i=O("dns4"),o=O("dns6"),s=O("dnsaddr"),a=C(O("dns"),s,i,o),c=C(O("ip4"),O("ip6")),u=C(T(c,O("tcp")),T(a,O("tcp"))),h=T(c,O("udp")),l=T(h,O("utp")),f=T(h,O("quic")),d=C(T(u,O("ws")),T(a,O("ws"))),p=C(T(u,O("wss")),T(a,O("wss"))),m=C(T(u,O("http")),T(c,O("http")),T(a,O("http"))),y=C(T(u,O("https")),T(c,O("https")),T(a,O("https"))),g=C(T(d,O("p2p-webrtc-star"),O("p2p")),T(p,O("p2p-webrtc-star"),O("p2p")),T(d,O("p2p-webrtc-star")),T(p,O("p2p-webrtc-star"))),b=C(T(d,O("p2p-websocket-star"),O("p2p")),T(p,O("p2p-websocket-star"),O("p2p")),T(d,O("p2p-websocket-star")),T(p,O("p2p-websocket-star"))),v=C(T(m,O("p2p-webrtc-direct"),O("p2p")),T(y,O("p2p-webrtc-direct"),O("p2p")),T(m,O("p2p-webrtc-direct")),T(y,O("p2p-webrtc-direct"))),w=C(d,p,m,y,g,v,u,l,f,a),_=C(T(w,O("p2p-stardust"),O("p2p")),T(w,O("p2p-stardust"))),S=C(T(w,O("p2p")),g,v,O("p2p")),E=C(T(S,O("p2p-circuit"),S),T(S,O("p2p-circuit")),T(O("p2p-circuit"),S),T(w,O("p2p-circuit")),T(O("p2p-circuit"),w),O("p2p-circuit")),A=()=>C(T(E,A),E),M=A(),I=C(T(M,S,M),T(S,M),T(M,S),M,S);function R(t){return function(e){if(!n.isMultiaddr(e))try{e=new n(e)}catch(i){return!1}const r=t(e.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}}function T(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];function n(t){if(t.length<e.length)return null;let r=t;return e.some((e=>(r="function"===typeof e?e().partialMatch(t):e.partialMatch(t),Array.isArray(r)&&(t=r),null===r))),r}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:R(n),partialMatch:n}}function C(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];function n(t){let r=null;return e.some((e=>{const n="function"===typeof e?e().partialMatch(t):e.partialMatch(t);return!!n&&(r=n,!0)})),r}const i={toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:R(n),partialMatch:n};return i}function O(t){const e=t;return{toString:function(){return e},matches:function(t){let r;if("string"===typeof t||t instanceof Uint8Array)try{r=new n(t)}catch(o){return!1}else r=t;const i=r.protoNames();return 1===i.length&&i[0]===e},partialMatch:function(t){return 0===t.length?null:t[0]===e?t.slice(1):null}}}t.exports={DNS:a,DNS4:i,DNS6:o,DNSADDR:s,IP:c,TCP:u,UDP:h,QUIC:f,UTP:l,HTTP:m,HTTPS:y,WebSockets:d,WebSocketsSecure:p,WebSocketStar:b,WebRTCStar:g,WebRTCDirect:v,Reliable:w,Stardust:_,Circuit:M,P2P:I,IPFS:I}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:circuit:stream-handler"),{error:n("libp2p:circuit:stream-handler:err")}),o=r(40),s=r(87),{CircuitRelay:a}=r(102);t.exports=class{constructor(t){let{stream:e,maxLength:r=4096}=t;this.stream=e,this.shake=s(this.stream),this.decoder=o.decode.fromReader(this.shake.reader,{maxDataLength:r})}async read(){const t=await this.decoder.next();if(t.value){const e=a.decode(t.value.slice());return i("read message type",e.type),e}i("read received no value, closing stream"),this.close()}write(t){i("write message type %s",t.type),this.shake.write(o.encode.single(a.encode(t).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(t){this.write(t),this.close()}close(){i("closing the stream"),this.rest().sink([])}}},function(t,e,r){"use strict";function n(t,e){return void 0===e?e=>n(t,e):e[Symbol.asyncIterator]?async function*(t,e){let r=[];for await(const n of e)r.push(n),r.length===t&&(yield r,r=[]);r.length>0&&(yield r)}(t,e):function*(t,e){let r=[];for(const n of e)r.push(n),r.length===t&&(yield r,r=[]);r.length>0&&(yield r)}(t,e)}r.r(e),r.d(e,"batch",(function(){return n})),r.d(e,"batchWithTimeout",(function(){return s})),r.d(e,"buffer",(function(){return h})),r.d(e,"collect",(function(){return l})),r.d(e,"concat",(function(){return p})),r.d(e,"consume",(function(){return m})),r.d(e,"filter",(function(){return g})),r.d(e,"flatMap",(function(){return _})),r.d(e,"flatTransform",(function(){return E})),r.d(e,"flatten",(function(){return b})),r.d(e,"fromStream",(function(){return M})),r.d(e,"getIterator",(function(){return a})),r.d(e,"map",(function(){return w})),r.d(e,"merge",(function(){return I})),r.d(e,"parallelFlatMap",(function(){return C})),r.d(e,"parallelMap",(function(){return T})),r.d(e,"parallelMerge",(function(){return O})),r.d(e,"pipeline",(function(){return R})),r.d(e,"reduce",(function(){return P})),r.d(e,"take",(function(){return N})),r.d(e,"tap",(function(){return B})),r.d(e,"throttle",(function(){return U})),r.d(e,"time",(function(){return q})),r.d(e,"transform",(function(){return z})),r.d(e,"writeToStream",(function(){return G}));const i=Symbol("TIMEOUT");async function*o(t,e,r){const n=r[Symbol.asyncIterator]();let o,s,a,c=[];const u=()=>{h(),[s,a]=(t=>{let e;return[new Promise((r=>{e=setTimeout((()=>r(i)),t)})),()=>{clearTimeout(e)}]})(e)},h=()=>{a&&a(),s=void 0};for(o=n.next();;){const e=await(s?Promise.race([o,s]):o);if(e===i||e.done){if(c.length&&(yield c,c=[]),h(),e!==i)break}else o=n.next(),c.push(e.value),1===c.length&&u(),c.length!==t||(yield c,c=[],h())}}function s(t,e,r){return void 0===r?r=>s(t,e,r):r[Symbol.asyncIterator]&&e!==1/0?o(t,e,r):n(t,r)}function a(t){if("function"===typeof t.next)return t;if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function c(){let t,e;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}function u(t,e){const r=a(e),n=[],i=[];let o=!1,s=!1;async function u(){if(!s&&!o&&!(n.length>=t)){o=!0;try{const{done:t,value:e}=await r.next();t?s=!0:n.push({value:e})}catch(e){s=!0,n.push({error:e})}!function(){for(;i.length>0&&n.length>0;){const t=i.shift(),{error:e,value:r}=n.shift();e?t.reject(e):t.resolve({done:!1,value:r})}for(;i.length>0&&s;){const{resolve:t}=i.shift();t({done:!0,value:void 0})}}(),o=!1,u()}}const h={next:async function(){if(n.length>0){const{error:t,value:e}=n.shift();if(t)throw t;return u(),{done:!1,value:e}}if(s)return{done:!0,value:void 0};const t=c();return i.push(t),u(),t.promise},[Symbol.asyncIterator]:()=>h};return h}function h(t,e){return void 0===e?e=>h(t,e):0===t?e:e[Symbol.asyncIterator]?u(t,e):function*(t,e){const r=[];let n;try{for(const n of e)r.push(n),r.length<=t||(yield r.shift())}catch(i){n=i}for(const o of r)yield o;if(n)throw n}(t,e)}function l(t){return t[Symbol.asyncIterator]?async function(t){const e=[];for await(const r of t)e.push(r);return e}(t):Array.from(t)}async function*f(t){for await(const e of t)yield*e}function*d(t){for(const e of t)yield*e}function p(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=e.find((t=>void 0!==t[Symbol.asyncIterator]));return n?f(e):d(e)}function m(t){if(t[Symbol.asyncIterator])return async function(t){for await(const e of t);}(t);for(const e of t);}async function*y(t,e){for await(const r of e)await t(r)&&(yield r)}function g(t,e){return void 0===e?e=>y(t,e):y(t,e)}async function*b(t){for await(const e of t)e&&"string"!==typeof e&&(e[Symbol.iterator]||e[Symbol.asyncIterator])?yield*b(e):yield e}async function*v(t,e){for await(const r of e)yield await t(r)}function w(t,e){return void 0===e?e=>v(t,e):v(t,e)}function _(t,e){return void 0===e?e=>_(t,e):g((t=>void 0!==t&&null!==t),b(w(t,e)))}function S(t,e,r){const n=a(r),i=[],o=[];let s=!1,u=!1,h=0,l=null;function f(){for(;o.length>0&&i.length>0;){const{resolve:t}=o.shift();t({done:!1,value:i.shift()})}for(;o.length>0&&0===h&&s;){const{resolve:t,reject:e}=o.shift();l?(e(l),l=null):t({done:!0,value:void 0})}}async function d(){if(s)f();else if(!u&&!(h+i.length>=t)){u=!0,h++;try{const{done:t,value:r}=await n.next();t?(s=!0,h--,f()):async function(t){try{const r=await e(t);if(r&&r[Symbol.asyncIterator])for await(const t of r)i.push(t);else i.push(r)}catch(r){s=!0,l=r}h--,f(),d()}(r)}catch(r){s=!0,h--,l=r,f()}u=!1,d()}}const p={next:async function(){if(0===i.length){const t=c();return o.push(t),d(),t.promise}const t=i.shift();return d(),{done:!1,value:t}},[Symbol.asyncIterator]:()=>p};return p}function E(t,e,r){return void 0===e?(e,r)=>r?E(t,e,r):E(t,e):void 0===r?r=>E(t,e,r):g((t=>void 0!==t&&null!==t),b(S(t,e,r)))}async function A(t){return new Promise((e=>{t.once("readable",(()=>{e()}))}))}function M(t){return"function"===typeof t[Symbol.asyncIterator]?t:async function*(t){for(;;){const e=t.read();if(null===e){if(t._readableState.ended)break;await A(t)}else yield e}}(t)}async function*I(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=new Set(e.map(a));for(;n.size>0;)for(const t of n){const e=await t.next();e.done?n.delete(t):yield e.value}}function R(t){let e=t();for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(const o of n)e=o(e);return e}function T(t,e,r){return void 0===e?(e,r)=>T(t,e,r):void 0===r?r=>T(t,e,r):1===t?w(e,r):async function*(t,e,r){let n=null;const i=a(R((()=>r),h(1),(async function*(t){for await(const e of t){if(n)return;yield e}}),w((t=>({value:e(t)}))),h(t-1)));for(;;){const{value:t,done:e}=await i.next();if(e)break;try{const e=await t.value;n||(yield e)}catch(o){n=o}}if(n)throw n}(t,e,r)}function C(t,e,r){return void 0===e?(e,r)=>r?C(t,e,r):C(t,e):void 0===r?r=>C(t,e,r):g((t=>void 0!==t&&null!==t),b(T(t,e,r)))}async function*O(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=e.map(a),i=new Set,o=new Map;let s=null,c=null,u=null;const h=t=>{s=t,c&&c(t)},l=t=>{u&&u(t)},f=()=>new Promise(((t,e)=>{if(s&&e(s),o.size>0)return t();u=t,c=e})),d=t=>{const e=Promise.resolve(t.next()).then((async r=>{let{done:n,value:s}=r;n||o.set(t,s),i.delete(e)}));i.add(e),e.then(l,h)};for(const a of n)d(a);for(;;){if(0===i.size&&0===o.size)return;await f();for(const[t,e]of o)o.delete(t),yield e,d(t)}}async function k(t,e,r){let n=e;for await(const i of r)n=await t(n,i);return n}function P(t,e,r){return void 0===e?(e,r)=>r?k(t,e,r):P(t,e):void 0===r?r=>P(t,e,r):k(t,e,r)}function N(t,e){return void 0===e?e=>N(t,e):e[Symbol.asyncIterator]?async function*(t,e){let r=0;for await(const n of e)if(yield await n,r++,r>=t)break}(t,e):function*(t,e){let r=0;for(const n of e)if(yield n,r++,r>=t)break}(t,e)}async function*D(t,e){for await(const r of e)await t(r),yield r}function B(t,e){return void 0===e?e=>D(t,e):D(t,e)}const x=t=>new Promise((e=>setTimeout(e,t)));function L(t,e,r){if(!Number.isFinite(t))throw new TypeError("Expected `limit` to be a finite number");if(t<=0)throw new TypeError("Expected `limit` to be greater than 0");if(!Number.isFinite(e))throw new TypeError("Expected `interval` to be a finite number");return async function*(){let n,i=0;for await(const o of r){if(i<t){"undefined"===typeof n&&(n=Date.now()),i++,yield o;continue}const r=Date.now()-n,s=e-r;s>0&&await x(s),n=Date.now(),i=1,yield o}}()}function U(t,e,r){return void 0===r?r=>L(t,e,r):L(t,e,r)}function j(t,e){let r=t[0]+e[0],n=t[1]+e[1];if(n>=1e9){const t=n%1e9;r+=(n-t)/1e9,n=t}return[r,n]}async function*K(t,e){const r=e[Symbol.asyncIterator]();let n=[0,0];for(;;){const e=process.hrtime(),{value:i,done:o}=await r.next(),s=process.hrtime(e);if(n=j(n,s),t.progress&&t.progress(s,n),o)return t.total&&t.total(n),i;yield i}}function*F(t,e){const r=e[Symbol.iterator]();let n=[0,0];for(;;){const e=process.hrtime(),{value:i,done:o}=r.next(),s=process.hrtime(e);if(n=j(n,s),t.progress&&t.progress(s,n),o)return t.total&&t.total(n),i;yield i}}function q(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return void 0===e?e=>q(t,e):void 0!==e[Symbol.asyncIterator]?K(t,e):F(t,e)}function V(t,e,r){const n=a(r),i=[],o=[];let s=!1,u=!1,h=0,l=null;function f(){for(;o.length>0&&i.length>0;){const{resolve:t}=o.shift();t({done:!1,value:i.shift()})}for(;o.length>0&&0===h&&s;){const{resolve:t,reject:e}=o.shift();l?(e(l),l=null):t({done:!0,value:void 0})}}async function d(){if(s)f();else if(!u&&!(h+i.length>=t)){u=!0,h++;try{const{done:t,value:r}=await n.next();t?(s=!0,h--,f()):async function(t){try{const r=await e(t);i.push(r)}catch(r){s=!0,l=r}h--,f(),d()}(r)}catch(r){s=!0,h--,l=r,f()}u=!1,d()}}const p={next:async function(){if(0===i.length){const t=c();return o.push(t),d(),t.promise}const t=i.shift();return d(),{done:!1,value:t}},[Symbol.asyncIterator]:()=>p};return p}function z(t,e,r){return void 0===e?(e,r)=>r?z(t,e,r):z(t,e):void 0===r?r=>z(t,e,r):V(t,e,r)}async function H(t,e){let r=null,n=null,i=null;const o=t=>{r=t,n&&n(t)},s=()=>{i&&i()};t.once("error",o);for await(const a of e)if(!1===t.write(a)&&await new Promise(((e,o)=>{if(r)return o(r);t.once("drain",s),i=e,n=o})),r)break;if(t.removeListener("error",o),t.removeListener("drain",s),r)throw r}function G(t,e){return void 0===e?e=>H(t,e):H(t,e)}},function(t,e,r){"use strict";const n=r(54),i=r(40),{pipe:o}=r(31),s=r(9),{fromString:a}=r(24),c=r(301),{source:u}=r(66),h=a("\n");function l(t){return i.encode.single(new n([t,h]))}t.exports={encode:l,write:function(t,e){t.push(l(e))},writeAll:async function(t,e){t.push(e.reduce(((t,e)=>t.append(l(e))),new n))},read:async function(t,e){let r=1;const n={[Symbol.asyncIterator](){return this},next:()=>t.next(r)};let a=n;e&&e.signal&&(a=u(n,e.signal));const l=await o(a,i.decode({onLength:t=>{r=t}}),c);if(l.get(l.length-1)!==h[0])throw s(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return l.shallowSlice(0,-1)}}},function(t,e,r){"use strict";e.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}},function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},i=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}})),c=n[r];r<o;c=n[++r])m(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},e.deprecate=function(r,n){if("undefined"!==typeof t&&!0===t.noDeprecation)return r;if("undefined"===typeof t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,s={};function a(t,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&e._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),h(n,t,n.depth)}function c(t,e){var r=a.styles[e];return r?"\x1b["+a.colors[r][0]+"m"+t+"\x1b["+a.colors[r][1]+"m":t}function u(t,e){return t}function h(t,r,n){if(t.customInspect&&r&&E(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return g(i)||(i=h(t,i,n)),i}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(g(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,r);if(o)return o;var s=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),S(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(E(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(v(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return t.stylize(Date.prototype.toString.call(r),"date");if(S(r))return l(r)}var u,w="",A=!1,M=["{","}"];(d(r)&&(A=!0,M=["[","]"]),E(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return v(r)&&(w=" "+RegExp.prototype.toString.call(r)),_(r)&&(w=" "+Date.prototype.toUTCString.call(r)),S(r)&&(w=" "+l(r)),0!==s.length||A&&0!=r.length?n<0?v(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=A?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)T(e,String(s))?o.push(f(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,r,n,i,!0))})),o}(t,r,n,a,s):s.map((function(e){return f(t,r,n,a,e,A)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(u,w,M)):M[0]+w+M[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),T(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(r)?h(t,c.value,null):h(t,c.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function p(t){return"boolean"===typeof t}function m(t){return null===t}function y(t){return"number"===typeof t}function g(t){return"string"===typeof t}function b(t){return void 0===t}function v(t){return w(t)&&"[object RegExp]"===A(t)}function w(t){return"object"===typeof t&&null!==t}function _(t){return w(t)&&"[object Date]"===A(t)}function S(t){return w(t)&&("[object Error]"===A(t)||t instanceof Error)}function E(t){return"function"===typeof t}function A(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(b(o)&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=t.pid;s[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else s[r]=function(){};return s[r]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=g,e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=b,e.isRegExp=v,e.isObject=w,e.isDate=_,e.isError=S,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=r(692);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=r(693),e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var C="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(C&&t[C]){var e;if("function"!==typeof(e=t[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(s){r(s)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),C&&Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=C,e.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(O,e,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(22))},function(t,e,r){"use strict";r.r(e),r.d(e,"nanoid",(function(){return a})),r.d(e,"customAlphabet",(function(){return s})),r.d(e,"customRandom",(function(){return o})),r.d(e,"urlAlphabet",(function(){return n})),r.d(e,"random",(function(){return i}));let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=t=>crypto.getRandomValues(new Uint8Array(t)),o=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*e/t.length);return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,s="";for(;;){let e=r(i),a=i;for(;a--;)if(s+=t[e[a]&n]||"",s.length===o)return s}}},s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return o(t,e,i)},a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"")}},,,,function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:ping"),{error:n("libp2p:ping:err")}),o=r(9),{codes:s}=r(27),a=r(104),{pipe:c}=r(31),{toBuffer:u}=r(175),{collect:h,take:l}=r(184),{equals:f}=r(45),{PROTOCOL_NAME:d,PING_LENGTH:p,PROTOCOL_VERSION:m}=r(644);t.exports=class{static getProtocolStr(t){return"/".concat(t._config.protocolPrefix,"/").concat(d,"/").concat(m)}constructor(t){this._libp2p=t}handleMessage(t){let{stream:e}=t;return c(e,e)}async ping(t){const e="/".concat(this._libp2p._config.protocolPrefix,"/").concat(d,"/").concat(m);i("dialing %s to %s",e,t.toB58String?t.toB58String():t);const r=await this._libp2p.dial(t),{stream:n}=await r.newStream(e),y=Date.now(),g=a.randomBytes(p),[b]=await c([g],n,(t=>l(1,t)),u,h),v=Date.now();if(!f(g,b))throw o(new Error("Received wrong ping ack"),s.ERR_WRONG_PING_ACK);return v-y}}},function(t,e,r){"use strict";const n=r(182),{CODE_CIRCUIT:i,CODE_P2P:o,CODE_TCP:s,CODE_WS:a,CODE_WSS:c}=r(331);t.exports={all:t=>t.filter((t=>{if(t.protoCodes().includes(i))return!1;const e=t.decapsulateCode(o);return n.WebSockets.matches(e)||n.WebSocketsSecure.matches(e)})),dnsWss:t=>t.filter((t=>{if(t.protoCodes().includes(i))return!1;const e=t.decapsulateCode(o);return n.WebSocketsSecure.matches(e)&&n.DNS.matches(e.decapsulateCode(s).decapsulateCode(c))})),dnsWsOrWss:t=>t.filter((t=>{if(t.protoCodes().includes(i))return!1;const e=t.decapsulateCode(o);return n.WebSockets.matches(e)?n.DNS.matches(e.decapsulateCode(s).decapsulateCode(a)):n.WebSocketsSecure.matches(e)&&n.DNS.matches(e.decapsulateCode(s).decapsulateCode(c))}))}},function(t,e,r){"use strict";e.SignaturePolicy={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"}},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Heartbeat=void 0;const s=o(r(74)),a=r(334),c=r(42);e.Heartbeat=class{constructor(t){this.gossipsub=t}start(){if(this._heartbeatTimer)return;const t=this._heartbeat.bind(this),e=setTimeout((()=>{t(),this._heartbeatTimer.runPeriodically(t,this.gossipsub._options.heartbeatInterval)}),s.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(t,e)=>{this._heartbeatTimer._intervalId=setInterval(t,e)},cancel:()=>{clearTimeout(e),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){this._heartbeatTimer&&(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){const{D:t,Dlo:e,Dhi:r,Dscore:n,Dout:i,fanoutTTL:o}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;const u=new Map,h=t=>{let e=u.get(t);return void 0===e&&(e=this.gossipsub.score.score(t),u.set(t,e)),e},l=new Map,f=new Map,d=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach(((o,u)=>{const p=t=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",t,u),this.gossipsub.score.prune(t,u),this.gossipsub._addBackoff(t,u),o.delete(t);const e=f.get(t);e?e.push(u):f.set(t,[u])},m=t=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",t,u),this.gossipsub.score.graft(t,u),o.add(t);const e=l.get(t);e?e.push(u):l.set(t,[u])};if(o.forEach((t=>{const e=h(t);e<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",t,e,u),p(t),d.set(t,!0))})),o.size<e){const e=this.gossipsub.backoff.get(u),r=t-o.size;a.getGossipPeers(this.gossipsub,u,r,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!e||!e.has(t))&&h(t)>=0)).forEach(m)}if(o.size>r){let e=Array.from(o);e.sort(((t,e)=>h(e)-h(t))),e=e.slice(0,n).concat(c.shuffle(e.slice(n)));let r=0;if(e.slice(0,t).forEach((t=>{this.gossipsub.outbound.get(t)&&r++})),r<i){const n=t=>{const r=e[t];for(let n=t;n>0;n--)e[n]=e[n-1];e[0]=r};if(r>0){let i=r;for(let r=1;r<t&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}let i=t-r;for(let r=t;r<e.length&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}e.slice(t).forEach(p)}if(o.size>=e){let t=0;if(o.forEach((e=>{this.gossipsub.outbound.get(e)&&t++})),t<i){const e=i-t,r=this.gossipsub.backoff.get(u);a.getGossipPeers(this.gossipsub,u,e,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!r||!r.has(t))&&h(t)>=0)).forEach(m)}}if(this.gossipsub.heartbeatTicks%s.GossipsubOpportunisticGraftTicks===0&&o.size>1){const t=Array.from(o).sort(((t,e)=>h(t)-h(e))),e=Math.floor(o.size/2),r=h(t[e]);if(r<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){const t=this.gossipsub.backoff.get(u);a.getGossipPeers(this.gossipsub,u,s.GossipsubOpportunisticGraftPeers,(e=>o.has(e)&&!this.gossipsub.direct.has(e)&&(!t||!t.has(e))&&h(e)>r)).forEach((t=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,u),m(t)}))}}this.gossipsub._emitGossip(u,o)}));const p=this.gossipsub._now();this.gossipsub.lastpub.forEach(((t,e)=>{t+o<p&&(this.gossipsub.fanout.delete(e),this.gossipsub.lastpub.delete(e))})),this.gossipsub.fanout.forEach(((e,r)=>{const n=this.gossipsub.topics.get(r);if(e.forEach((t=>{(!n.has(t)||h(t)<this.gossipsub._options.scoreThresholds.publishThreshold)&&e.delete(t)})),e.size<t){const n=t-e.size;a.getGossipPeers(this.gossipsub,r,n,(t=>!e.has(t)&&!this.gossipsub.direct.has(t)&&h(t)>=this.gossipsub._options.scoreThresholds.publishThreshold)).forEach((t=>{e.add(t)}))}this.gossipsub._emitGossip(r,e)})),this.gossipsub._sendGraftPrune(l,f,d),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}},function(t,e,r){"use strict";(function(e){var n=r(691);function i(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function o(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var s=r(187),a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function h(t){return Object.prototype.toString.call(t)}function l(t){return!o(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var f=t.exports=b,d=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(s.isFunction(t)){if(u)return t.name;var e=t.toString().match(d);return e&&e[1]}}function m(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function y(t){if(u||!s.isFunction(t))return s.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,r,n,i){throw new f.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function b(t,e){t||g(t,!0,e,"==",f.ok)}function v(t,e,r,n){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(s.isDate(t)&&s.isDate(e))return t.getTime()===e.getTime();if(s.isRegExp(t)&&s.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(l(t)&&l(e)&&h(t)===h(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(s.isPrimitive(t)||s.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=w(t),o=w(e);if(i&&!o||!i&&o)return!1;if(i)return v(t=c.call(t),e=c.call(e),r);var a,u,h=E(t),l=E(e);if(h.length!==l.length)return!1;for(h.sort(),l.sort(),u=h.length-1;u>=0;u--)if(h[u]!==l[u])return!1;for(u=h.length-1;u>=0;u--)if(!v(t[a=h[u]],e[a],r,n))return!1;return!0}(t,e,r,n))}return r?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t,e,r,n){var i;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(r){e=r}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&g(i,r,"Missing expected exception"+n);var o="string"===typeof n,a=!t&&i&&!r;if((!t&&s.isError(i)&&o&&_(i,r)||a)&&g(i,r,"Got unwanted exception"+n),t&&i&&r&&!_(i,r)||!t&&i)throw i}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return m(y(t.actual),128)+" "+t.operator+" "+m(y(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}},s.inherits(f.AssertionError,Error),f.fail=g,f.ok=b,f.equal=function(t,e,r){t!=e&&g(t,e,r,"==",f.equal)},f.notEqual=function(t,e,r){t==e&&g(t,e,r,"!=",f.notEqual)},f.deepEqual=function(t,e,r){v(t,e,!1)||g(t,e,r,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,r){v(t,e,!0)||g(t,e,r,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,r){v(t,e,!1)&&g(t,e,r,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,r,n){v(e,r,!0)&&g(e,r,n,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,r){t!==e&&g(t,e,r,"===",f.strictEqual)},f.notStrictEqual=function(t,e,r){t===e&&g(t,e,r,"!==",f.notStrictEqual)},f.throws=function(t,e,r){S(!0,t,e,r)},f.doesNotThrow=function(t,e,r){S(!1,t,e,r)},f.ifError=function(t){if(t)throw t},f.strict=n((function t(e,r){e||g(e,!0,r,"==",t)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var E=Object.keys||function(t){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e}}).call(this,r(21))},function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(13),i=r(44);function o(t){return Object(n.a)(Object(i.f)(t))}},function(t,e,r){"use strict";const n=r(505),i=r(512),o=r(285),s=o.AbortError,a=o.ResponseError,c=o.Endpoint,u=o.endpoints,h=/^((\d{1,3}\.){3,3}\d{1,3})(:(\d{2,5}))?$/,l=/^((::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?)(:(\d{2,5}))?$/i;function f(t,e,r,o){return o&&o.aborted?Promise.reject(new s):"udp4:"===t.protocol||"udp6:"===t.protocol?i.queryDns(t,e,r,o):function(t,e,r,o){const s=t.protocol||"https:";return new Promise((function(c,u){i.request(s,t.host,t.port?parseInt(t.port,10):"https:"===s?443:80,t.path||"/dns-query",/^post$/i.test(t.method)?"POST":"GET",n.encode(Object.assign({flags:n.RECURSION_DESIRED,type:"query"},e)),r,o,(function(e,r,i){let o;if(null===e)if(0===r.length)e=new a("Empty.");else try{o=n.decode(r)}catch(s){e=new a("Invalid packet (cause="+s.message+")",s)}null!==e?u(Object.assign(e,{response:i,endpoint:t})):(o.endpoint=t,o.response=i,c(o))}))}))}(t,e,r,o)}function d(t,e){let r;e=Object.assign({retries:5,timeout:3e4},e);try{if(r="doh"===e.endpoints?i.endpoints({doh:!0,dns:!1}):"dns"===e.endpoints?i.endpoints({doh:!1,dns:!0}):p(e.endpoints)||i.endpoints({doh:!0,dns:!0}),!r||0===r.length)throw new Error("No endpoints defined.")}catch(n){return Promise.reject(n)}return function(t,e,r){const n=1===t.length?t[0]:t[Math.floor(Math.random()*t.length)%t.length];return f(n,e,r.timeout,r.signal).then((t=>(t.endpoint=n,t)),(t=>{if("AbortError"===t.name||0===r.retries)throw t;return r.retries>0&&(r.retries-=1),d(e,r)}))}(r,t,e)}function p(t){if(!t)return;if("function"!==typeof t[Symbol.iterator]||"string"===typeof t)throw new Error("Endpoints needs to be iterable.");const e=[];for(let r of t)"object"===typeof r?(r instanceof c||(r=new c(r)),e.push(r)):"string"===typeof r&&e.push(u[r]||m(r));return e}function m(t){const e=/^(([^:]+?:)\/\/)?([^/]*?)(\/.*?)?(\s\[(post|get)\])?$/i.exec(t);let r,n,i=e[2]||"https:",o=1;const s=l.exec(e[3]);if(s){const t=h.exec(e[3]);t?(r=t[1],t[4]&&(n=parseInt(t[4]))):(o=2,r=s[1],s[9]&&(n=parseInt(s[10])))}else{const t=/^([^:]*)(:(.*))?$/.exec(e[3]);r=t[1],t[3]&&(n=parseInt(t[3]))}return"udp:"===i&&(i=2===o?"udp6:":"udp4:"),new c({protocol:i,host:r,port:n,path:e[4],method:e[6]})}t.exports={query:d,endpoints:u,parseEndpoints:p,AbortError:s,ResponseError:a,TimeoutError:o.TimeoutError,HTTPStatusError:o.HTTPStatusError,Endpoint:c}},function(t,e,r){"use strict";const n=r(23),{Multiaddr:i}=r(11),o=r(182),{EventEmitter:s}=r(33),a=r(5),c=Object.assign(a("libp2p:bootstrap"),{error:a("libp2p:bootstrap:error")});e=t.exports=class extends s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]};if(!t.list||!t.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this._list=t.list,this._interval=t.interval||1e4,this._timer=null}start(){this._timer||(this._timer=setInterval((()=>this._discoverBootstrapPeers()),this._interval),c("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){this._timer&&this._list.forEach((t=>{if(!o.P2P.matches(t))return c.error("Invalid multiaddr");const e=new i(t),r=e.getPeerId();if(!r)return void c.error("Invalid bootstrap multiaddr without peer id");const s=n.createFromB58String(r);try{this.emit("peer",{id:s,multiaddrs:[e]})}catch(a){c.error("Invalid bootstrap peer id",a)}}))}stop(){this._timer&&clearInterval(this._timer),this._timer=null}},e.tag="bootstrap"},function(t,e,r){"use strict";const n=r(659),i=r(284),o=r(670),{AbortError:s}=r(66),a=r(174),c=r(5),u=c("libp2p:websockets");u.error=c("libp2p:websockets:error");const h=r(671),l=r(672),f=r(673),d=r(193);t.exports=i(class{constructor(t){let{upgrader:e,filter:r}=t;if(!e)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e,this._filter=r}async dial(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u("dialing %s",t);const r=await this._connect(t,e),n=f(r,{remoteAddr:t,signal:e.signal});u("new outbound connection %s",n.remoteAddr);const i=await this._upgrader.upgradeOutbound(n);return u("outbound connection %s upgraded",n.remoteAddr),i}async _connect(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.signal&&e.signal.aborted)throw new s;const r=t.toOptions();u("dialing %s:%s",r.host,r.port);const i=a(),c=t=>{const e="connection error: ".concat(t.message);u.error(e),i.reject(t)},h=n(o(t),Object.assign({binary:!0},e));if(h.socket.on?h.socket.on("error",c):h.socket.onerror=c,!e.signal)return await Promise.race([h.connected(),i.promise]),u("connected %s",t),h;let l;const f=new Promise(((t,r)=>{if(l=()=>{r(new s),setTimeout((()=>{h.close()}))},e.signal.aborted)return l();e.signal.addEventListener("abort",l)}));try{await Promise.race([f,i.promise,h.connected()])}finally{e.signal.removeEventListener("abort",l)}return u("connected %s",t),h}createListener(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return"function"===typeof t&&(e=t,t={}),l({handler:e,upgrader:this._upgrader},t)}filter(t){return t=Array.isArray(t)?t:[t],this._filter?this._filter(t):h.isBrowser||h.isWebWorker?d.dnsWss(t):d.all(t)}},{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const a=o(r(676)),c=r(680),u=r(681),h=o(r(74)),l=r(195),f=r(334),d=r(42),p=r(682),m=r(689),y=r(690),g=r(23),b=r(128),v=r(74);class w extends a.default{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;const n=[h.GossipsubIDv11,h.GossipsubIDv10],i=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:h.GossipsubD,Dlo:h.GossipsubDlo,Dhi:h.GossipsubDhi,Dscore:h.GossipsubDscore,Dout:h.GossipsubDout,Dlazy:h.GossipsubDlazy,heartbeatInterval:h.GossipsubHeartbeatInterval,fanoutTTL:h.GossipsubFanoutTTL,mcacheLength:h.GossipsubHistoryLength,mcacheGossip:h.GossipsubHistoryGossip,seenTTL:h.GossipsubSeenTTL},e),{scoreParams:p.createPeerScoreParams(e.scoreParams),scoreThresholds:p.createPeerScoreThresholds(e.scoreThresholds)});i.fallbackToFloodsub&&n.push(h.FloodsubID),super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:n,libp2p:t},i)),this._options=i,this.direct=new Set(i.directPeers.map((t=>t.id.toB58String()))),this.acceptFromWhitelist=new Map,i.directPeers.forEach((e=>{t.peerStore.addressBook.add(e.id,e.addrs)})),this.seenCache=new y.SimpleTimeCache({validityMs:i.seenTTL}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=e.messageCache||new c.MessageCache(i.mcacheGossip,i.mcacheLength),this.getFastMsgIdStr=null!==(r=e.fastMsgIdFn)&&void 0!==r?r:void 0,this.fastMsgIdCache=e.fastMsgIdFn?new y.SimpleTimeCache({validityMs:i.seenTTL}):void 0,this.heartbeat=new l.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new m.IWantTracer,this._libp2p=t,this.score=new p.PeerScore(this._options.scoreParams,t.connectionManager)}_decodeRpc(t){return u.RPC.decode(t)}_encodeRpc(t){return u.RPC.encode(t).finish()}_addPeer(t,e){const r=super._addPeer(t,e);this.score.addPeer(t.toB58String());let n=!1;for(const i of this._libp2p.connectionManager.getAll(t))if("outbound"===i.stat.direction&&Array.from(i.registry.values()).some((t=>e===t.protocol))){n=!0;break}return this.outbound.set(r.id.toB58String(),n),r}_removePeer(t){const e=super._removePeer(t),r=t.toB58String();for(const n of this.mesh.values())n.delete(r);for(const n of this.fanout.values())n.delete(r);return this.gossip.delete(r),this.control.delete(r),this.outbound.delete(r),this.score.removePeer(r),this.acceptFromWhitelist.delete(r),e}_processRpc(t,e,r){const n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return s(this,void 0,void 0,(function*(){return!!(yield n._processRpc.call(this,t,e,r))&&(r.control&&(yield this._processRpcControlMessage(t,r.control)),!0)}))}_processRpcControlMessage(t,e){return s(this,void 0,void 0,(function*(){if(!e)return;const r=e.ihave?this._handleIHave(t,e.ihave):[],n=e.iwant?this._handleIWant(t,e.iwant):[],i=e.graft?yield this._handleGraft(t,e.graft):[];if(e.prune&&this._handlePrune(t,e.prune),!r.length&&!n.length&&!i.length)return;const o=d.createGossipRpc(n,{iwant:r,prune:i});this._sendRpc(t,o)}))}_processRpcMessage(t){const e=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return s(this,void 0,void 0,(function*(){let r;if(this.getFastMsgIdStr&&this.fastMsgIdCache){const e=yield this.getFastMsgIdStr(t);if(r=this.fastMsgIdCache.get(e),void 0!==r)return void this.score.duplicateMessage(t,r);r=d.messageIdToString(yield this.getMsgId(t)),this.fastMsgIdCache.put(e,r)}else if(r=d.messageIdToString(yield this.getMsgId(t)),this.seenCache.has(r))return void this.score.duplicateMessage(t,r);this.seenCache.put(r),yield this.score.validateMessage(r),yield e._processRpcMessage.call(this,t)}))}_acceptFrom(t){if(this.direct.has(t))return!0;const e=Date.now(),r=this.acceptFromWhitelist.get(t);if(r&&r.messagesAccepted<v.ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&r.acceptUntil>=e)return r.messagesAccepted+=1,!0;const n=this.score.score(t);return n>=v.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(t,{messagesAccepted:0,acceptUntil:e+v.ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(t),n>=this._options.scoreThresholds.graylistThreshold}validate(t){const e=Object.create(null,{validate:{get:()=>super.validate}});return s(this,void 0,void 0,(function*(){try{yield e.validate.call(this,t)}catch(r){const e=yield this.getCanonicalMsgIdStr(t);throw this.score.rejectMessage(t,e,r.code),this.gossipTracer.rejectMessage(e,r.code),r}}))}_handleIHave(t,e){if(!e.length)return[];const r=this.score.score(t);if(r<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",t,r),[];const n=(this.peerhave.get(t)||0)+1;if(this.peerhave.set(t,n),n>h.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",t,n),[];const i=this.iasked.get(t)||0;if(i>=h.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",t,i),[];const o=new Map;if(e.forEach((t=>{let{topicID:e,messageIDs:r}=t;e&&r&&this.mesh.has(e)&&r.forEach((t=>{const e=d.messageIdToString(t);this.seenCache.has(e)||o.set(e,t)}))})),!o.size)return[];let s=o.size;s+i>h.GossipsubMaxIHaveLength&&(s=h.GossipsubMaxIHaveLength-i),this.log("IHAVE: Asking for %d out of %d messages from %s",s,o.size,t);let a=Array.from(o.values());return d.shuffle(a),a=a.slice(0,s),this.iasked.set(t,i+s),this.gossipTracer.addPromise(t,a),[{messageIDs:a}]}_handleIWant(t,e){if(!e.length)return[];const r=this.score.score(t);if(r<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",t,r),[];const n=new Map;return e.forEach((e=>{let{messageIDs:r}=e;r&&r.forEach((e=>{const r=d.messageIdToString(e),[i,o]=this.messageCache.getForPeer(r,t);i&&(o>h.GossipsubGossipRetransmission?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",t,e):n.set(r,i))}))})),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,t),Array.from(n.values()).map(a.utils.normalizeOutRpcMessage)):[]}_handleGraft(t,e){return s(this,void 0,void 0,(function*(){const r=[],n=this.score.score(t),i=this._now();let o=this._options.doPX;return e.forEach((e=>{let{topicID:s}=e;var a;if(!s)return;const c=this.mesh.get(s);if(!c)return void(o=!1);if(c.has(t))return;if(this.direct.has(t))return this.log("GRAFT: ignoring request from direct peer %s",t),r.push(s),void(o=!1);const u=null===(a=this.backoff.get(s))||void 0===a?void 0:a.get(t);if("number"===typeof u&&i<u){this.log("GRAFT: ignoring backed off peer %s",t),this.score.addPenalty(t,1),o=!1;const e=u+h.GossipsubGraftFloodThreshold-h.GossipsubPruneBackoff;return i<e&&this.score.addPenalty(t,1),this._addBackoff(t,s),void r.push(s)}return n<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",t,n,s),r.push(s),o=!1,void this._addBackoff(t,s)):c.size>=this._options.Dhi&&!this.outbound.get(t)?(r.push(s),void this._addBackoff(t,s)):(this.log("GRAFT: Add mesh link from %s in %s",t,s),this.score.graft(t,s),void c.add(t))})),r.length?Promise.all(r.map((e=>this._makePrune(t,e,o)))):[]}))}_handlePrune(t,e){const r=this.score.score(t);e.forEach((e=>{let{topicID:n,backoff:i,peers:o}=e;if(!n)return;const s=this.mesh.get(n);if(s&&(this.log("PRUNE: Remove mesh link to %s in %s",t,n),this.score.prune(t,n),s.delete(t),"number"===typeof i&&i>0?this._doAddBackoff(t,n,1e3*i):this._addBackoff(t,n),o&&o.length)){if(r<this._options.scoreThresholds.acceptPXThreshold)return void this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",t,r,n);this._pxConnect(o)}}))}_addBackoff(t,e){this._doAddBackoff(t,e,h.GossipsubPruneBackoff)}_doAddBackoff(t,e,r){let n=this.backoff.get(e);n||(n=new Map,this.backoff.set(e,n));const i=this._now()+r;(n.get(t)||0)<i&&n.set(t,i)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((t,e)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",e,t),this.score.addPenalty(e,t)}))}_clearBackoff(){if(this.heartbeatTicks%h.GossipsubPruneBackoffTicks!==0)return;const t=this._now();this.backoff.forEach(((e,r)=>{e.forEach(((r,n)=>{r<t&&e.delete(n)})),0===e.size&&this.backoff.delete(r)}))}_directConnect(){if(this.heartbeatTicks%h.GossipsubDirectConnectTicks!==0)return;const t=[];this.direct.forEach((e=>{const r=this.peers.get(e);r&&r.isWritable||t.push(e)})),t.length&&t.forEach((t=>{this._connect(t)}))}_pxConnect(t){return s(this,void 0,void 0,(function*(){t.length>h.GossipsubPrunePeers&&(d.shuffle(t),t=t.slice(0,h.GossipsubPrunePeers));const e=[];yield Promise.all(t.map((t=>s(this,void 0,void 0,(function*(){if(!t.peerID)return;const r=g.createFromBytes(t.peerID).toB58String();if(!this.peers.has(r))if(t.signedPeerRecord)try{const n=yield b.openAndCertify(t.signedPeerRecord,"libp2p-peer-record"),i=n.peerId.toB58String();if(r!==i)return void this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",i,r);if(!this._libp2p.peerStore.addressBook.consumePeerRecord(n))return void this.log("bogus peer record obtained through px: could not add peer record to address book");e.push(r)}catch(n){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else e.push(r)}))))),e.length&&e.forEach((t=>this._connect(t)))}))}start(){const t=Object.create(null,{start:{get:()=>super.start}});return s(this,void 0,void 0,(function*(){yield t.start.call(this),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout((()=>{this.direct.forEach((t=>{this._connect(t)}))}),h.GossipsubDirectConnectInitialDelay)}))}stop(){const t=Object.create(null,{stop:{get:()=>super.stop}});return s(this,void 0,void 0,(function*(){yield t.stop.call(this),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),clearTimeout(this._directPeerInitial)}))}_connect(t){this.log("Initiating connection with %s",t),this._libp2p.dialProtocol(g.createFromB58String(t),this.multicodecs)}subscribe(t){super.subscribe(t),this.join(t)}unsubscribe(t){super.unsubscribe(t),this.leave(t)}join(t){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",t);const e=this.fanout.get(t);if(e)e.forEach((t=>{this.score.score(t)<0&&e.delete(t)})),e.size<this._options.D&&f.getGossipPeers(this,t,this._options.D-e.size,(t=>!e.has(t)&&!this.direct.has(t)&&this.score.score(t)>=0)).forEach((t=>e.add(t))),this.mesh.set(t,e),this.fanout.delete(t),this.lastpub.delete(t);else{const e=f.getGossipPeers(this,t,this._options.D,(t=>!this.direct.has(t)&&this.score.score(t)>=0));this.mesh.set(t,e)}this.mesh.get(t).forEach((e=>{this.log("JOIN: Add mesh link to %s in %s",e,t),this._sendGraft(e,t)}))}leave(t){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",t);const e=this.mesh.get(t);e&&(e.forEach((e=>{this.log("LEAVE: Remove mesh link to %s in %s",e,t),this._sendPrune(e,t)})),this.mesh.delete(t))}getCanonicalMsgIdStr(t){var e,r;return s(this,void 0,void 0,(function*(){return this.fastMsgIdCache&&this.getFastMsgIdStr&&null!==(r=null!==(e=this.getCachedMsgIdStr(t))&&void 0!==e?e:this.fastMsgIdCache.get(this.getFastMsgIdStr(t)))&&void 0!==r?r:d.messageIdToString(yield this.getMsgId(t))}))}getCachedMsgIdStr(t){}_publish(t){return s(this,void 0,void 0,(function*(){const e=yield this.getCanonicalMsgIdStr(t);t.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(t,e),this.gossipTracer.deliverMessage(e)),this.seenCache.put(e),this.messageCache.put(t,e);const r=new Set;t.topicIDs.forEach((e=>{const n=this.topics.get(e);if(n)if(this._options.floodPublish&&t.from===this.peerId.toB58String())n.forEach((t=>{(this.direct.has(t)||this.score.score(t)>=this._options.scoreThresholds.publishThreshold)&&r.add(t)}));else{this.direct.forEach((t=>{r.add(t)})),n.forEach((t=>{const e=this.score.score(t),n=this.peers.get(t);n&&n.protocol===h.FloodsubID&&e>=this._options.scoreThresholds.publishThreshold&&r.add(t)}));let t=this.mesh.get(e);if(!t||!t.size){if(t=this.fanout.get(e),!t){const r=f.getGossipPeers(this,e,this._options.D,(t=>this.score.score(t)>=this._options.scoreThresholds.publishThreshold));r.size>0?(t=r,this.fanout.set(e,r)):t=new Set}this.lastpub.set(e,this._now())}t.forEach((t=>{r.add(t)}))}}));const n=d.createGossipRpc([a.utils.normalizeOutRpcMessage(t)]);r.forEach((e=>{e!==t.from&&this._sendRpc(e,n)}))}))}_sendGraft(t,e){const r=[{topicID:e}],n=d.createGossipRpc([],{graft:r});this._sendRpc(t,n)}_sendPrune(t,e){return s(this,void 0,void 0,(function*(){const r=[yield this._makePrune(t,e,this._options.doPX)],n=d.createGossipRpc([],{prune:r});this._sendRpc(t,n)}))}_sendRpc(t,e){const r=this.peers.get(t);if(!r||!r.isWritable)return;const n=this.control.get(t);n&&(this._piggybackControl(t,e,n),this.control.delete(t));const i=this.gossip.get(t);i&&(this._piggybackGossip(t,e,i),this.gossip.delete(t)),r.write(u.RPC.encode(e).finish())}_piggybackControl(t,e,r){const n=(r.graft||[]).filter((e=>{let{topicID:r}=e;return(r&&this.mesh.get(r)||new Set).has(t)})),i=(r.prune||[]).filter((e=>{let{topicID:r}=e;return!(r&&this.mesh.get(r)||new Set).has(t)}));(n.length||i.length)&&(e.control?(e.control.graft=e.control.graft&&e.control.graft.concat(n),e.control.prune=e.control.prune&&e.control.prune.concat(i)):e.control={ihave:[],iwant:[],graft:n,prune:i})}_piggybackGossip(t,e,r){e.control||(e.control={ihave:[],iwant:[],graft:[],prune:[]}),e.control.ihave=r}_sendGraftPrune(t,e,r){return s(this,void 0,void 0,(function*(){const n=this._options.doPX;for(const[i,o]of t){const t=o.map((t=>({topicID:t})));let s=[];const a=e.get(i);a&&(s=yield Promise.all(a.map((t=>this._makePrune(i,t,n&&!r.get(i))))),e.delete(i));const c=d.createGossipRpc([],{graft:t,prune:s});this._sendRpc(i,c)}for(const[t,i]of e){const e=yield Promise.all(i.map((e=>this._makePrune(t,e,n&&!r.get(t))))),o=d.createGossipRpc([],{prune:e});this._sendRpc(t,o)}}))}_emitGossip(t,e){const r=this.messageCache.getGossipIDs(t);if(!r.length)return;d.shuffle(r),r.length>h.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length);const n=[],i=this.topics.get(t);if(!i)return;i.forEach((t=>{const r=this.peers.get(t);r&&!e.has(t)&&!this.direct.has(t)&&d.hasGossipProtocol(r.protocol)&&this.score.score(t)>=this._options.scoreThresholds.gossipThreshold&&n.push(t)}));let o=this._options.Dlazy;const s=h.GossipsubGossipFactor*n.length;s>o&&(o=s),o>n.length?o=n.length:d.shuffle(n),n.slice(0,o).forEach((e=>{let n=r;r.length>h.GossipsubMaxIHaveLength&&(n=d.shuffle(n.slice()).slice(0,h.GossipsubMaxIHaveLength)),this._pushGossip(e,{topicID:t,messageIDs:n})}))}_flush(){for(const[t,e]of this.gossip.entries()){this.gossip.delete(t);const r=d.createGossipRpc([],{ihave:e});this._sendRpc(t,r)}for(const[t,e]of this.control.entries()){this.control.delete(t);const r=d.createGossipRpc([],{graft:e.graft,prune:e.prune});this._sendRpc(t,r)}}_pushGossip(t,e){this.log("Add gossip to %s",t);const r=this.gossip.get(t)||[];this.gossip.set(t,r.concat(e))}_now(){return Date.now()}_makePrune(t,e,r){return s(this,void 0,void 0,(function*(){if(this.peers.get(t).protocol===h.GossipsubIDv10)return{topicID:e,peers:[]};const n=h.GossipsubPruneBackoff/1e3;if(!r)return{topicID:e,peers:[],backoff:n};const i=f.getGossipPeers(this,e,h.GossipsubPrunePeers,(e=>e!==t&&this.score.score(e)>=0)),o=yield Promise.all(Array.from(i).map((t=>s(this,void 0,void 0,(function*(){const e=g.createFromB58String(t);return{peerID:e.toBytes(),signedPeerRecord:yield this._libp2p.peerStore.addressBook.getRawEnvelope(e)}})))));return{topicID:e,peers:o,backoff:n}}))}}w.multicodec=h.GossipsubIDv11,t.exports=w},,,,,function(t,e,r){"use strict";t.exports=l;var n,i=r(68),o=i.LongBits,s=i.base64,a=i.utf8;function c(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function u(){}function h(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var f=function(){return i.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}};function d(t,e,r){e[r]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function y(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}l.create=f(),l.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(l.alloc=i.pool(l.alloc,i.Array.prototype.subarray)),l.prototype._push=function(t,e,r){return this.tail=this.tail.next=new c(t,e,r),this.len+=e,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this._push(m,10,o.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var e=o.from(t);return this._push(m,e.length(),e)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(m,e.length(),e)},l.prototype.bool=function(t){return this._push(d,1,t?1:0)},l.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var e=o.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var g=i.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};l.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(d,1,0);if(i.isString(t)){var r=l.alloc(e=s.length(t));s.decode(t,r,0),t=r}return this.uint32(e)._push(g,e,t)},l.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(d,1,0)},l.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new c(u,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},l.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},l._configure=function(t){n=t,l.create=f(),n._configure()}},function(t,e,r){"use strict";t.exports=c;var n,i=r(68),o=i.LongBits,s=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u="undefined"!==typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},h=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new n(t):u(t)})(t)}:u};function l(){var t=new o(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return t}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,r):e===r?new this.buf.constructor(0):this._slice.call(this.buf,e,r)},c.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},c.prototype.skip=function(t){if("number"===typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){n=t,c.create=h(),n._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return l.call(this)[e](!1)},uint64:function(){return l.call(this)[e](!0)},sint64:function(){return l.call(this).zzDecode()[e](!1)},fixed64:function(){return d.call(this)[e](!0)},sfixed64:function(){return d.call(this)[e](!1)}})}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=r(381).Buffer,i=r(210).Transform;function o(t){i.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(10)(o,i),o.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!n.isBuffer(t)&&"string"!==typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));for(var r=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)r[this._blockOffset++]=t[i++];for(var s=0,a=8*t.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,r){(e=t.exports=r(211)).Stream=e,e.Readable=e,e.Writable=r(217),e.Duplex=r(82),e.Transform=r(219),e.PassThrough=r(385),e.finished=r(147),e.pipeline=r(386)},function(t,e,r){"use strict";(function(e,n){var i;t.exports=M,M.ReadableState=A;r(33).EventEmitter;var o=function(t,e){return t.listeners(e).length},s=r(212),a=r(19).Buffer,c=e.Uint8Array||function(){};var u,h=r(213);u=h&&h.debuglog?h.debuglog("stream"):function(){};var l,f,d,p=r(382),m=r(215),y=r(216).getHighWaterMark,g=r(81).codes,b=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(10)(M,s);var S=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function A(t,e,n){i=i||r(82),t=t||{},"boolean"!==typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=r(92).StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function M(t){if(i=i||r(82),!(this instanceof M))return new M(t);var e=this instanceof i;this._readableState=new A(t,this,e),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function I(t,e,r,n,i){u("readableAddChunk",e);var o,s=t._readableState;if(null===e)s.reading=!1,function(t,e){if(u("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?O(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,k(t)))}(t,s);else if(i||(o=function(t,e){var r;n=e,a.isBuffer(n)||n instanceof c||"string"===typeof e||void 0===e||t.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(s,e)),o)S(t,o);else if(s.objectMode||e&&e.length>0)if("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),n)s.endEmitted?S(t,new _):R(t,s,e,!0);else if(s.ended)S(t,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?R(t,s,e,!1):P(t,s)):R(t,s,e,!1)}else n||(s.reading=!1,P(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function R(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&O(t)),P(t,e)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),M.prototype.destroy=m.destroy,M.prototype._undestroy=m.undestroy,M.prototype._destroy=function(t,e){e(t)},M.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=a.from(t,e),e=""),r=!0),I(this,t,e,!1,r)},M.prototype.unshift=function(t){return I(this,t,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(t){l||(l=r(92).StringDecoder);var e=new l(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function C(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t){var e=t._readableState;u("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(u("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(k,t))}function k(t){var e=t._readableState;u("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L(t)}function P(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(N,t,e))}function N(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(u("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function D(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function B(t){u("readable nexttick read 0"),t.read(0)}function x(t,e){u("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(u("flow",e.flowing);e.flowing&&null!==t.read(););}function U(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function j(t){var e=t._readableState;u("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(K,e,t))}function K(t,e){if(u("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function F(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}M.prototype.read=function(t){u("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):O(this),null;if(0===(t=C(t,e))&&e.ended)return 0===e.length&&j(this),null;var n,i=e.needReadable;return u("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",i=!0),e.ended||e.reading?u("reading or ended",i=!1):i&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C(r,e))),null===(n=t>0?U(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&j(this)),null!==n&&this.emit("data",n),n},M.prototype._read=function(t){S(this,new w("_read()"))},M.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,e);var s=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?c:y;function a(e,n){u("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),t.removeListener("drain",h),t.removeListener("error",d),t.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",y),r.removeListener("data",f),l=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){u("onend"),t.end()}i.endEmitted?n.nextTick(s):r.once("end",s),t.on("unpipe",a);var h=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,L(t))}}(r);t.on("drain",h);var l=!1;function f(e){u("ondata");var n=t.write(e);u("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==F(i.pipes,t))&&!l&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(e){u("onerror",e),y(),t.removeListener("error",d),0===o(t,"error")&&S(t,e)}function p(){t.removeListener("finish",m),y()}function m(){u("onfinish"),t.removeListener("close",p),y()}function y(){u("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",d),t.once("close",p),t.once("finish",m),t.emit("pipe",r),i.flowing||(u("pipe resume"),r.resume()),t},M.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=F(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},M.prototype.on=function(t,e){var r=s.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||n.nextTick(B,this))),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(t,e){var r=s.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(D,this),r},M.prototype.removeAllListeners=function(t){var e=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(D,this),e},M.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(x,t,e))}(this,t)),t.paused=!1,this},M.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause())))})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){u("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"===typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(383)),f(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),M._fromList=U,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(M.from=function(t,e){return void 0===d&&(d=r(384)),d(M,t,e)})}).call(this,r(21),r(22))},function(t,e,r){t.exports=r(33).EventEmitter},,,function(t,e,r){"use strict";(function(e){function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):o?(e.nextTick(n,s),o(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r(22))},function(t,e,r){"use strict";var n=r(81).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,r){"use strict";(function(e,n){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=M,M.WritableState=A;var s={deprecate:r(218)},a=r(212),c=r(19).Buffer,u=e.Uint8Array||function(){};var h,l=r(215),f=r(216).getHighWaterMark,d=r(81).codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,b=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,S=l.errorOrDestroy;function E(){}function A(t,e,s){o=o||r(82),t=t||{},"boolean"!==typeof s&&(s=e instanceof o),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!==typeof o)throw new y;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(k,t,e),t._writableState.errorEmitted=!0,S(t,i)):(o(i),t._writableState.errorEmitted=!0,S(t,i),k(t,e))}(t,r,i,e,o);else{var s=C(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||T(t,r),i?n.nextTick(R,t,r,s,o):R(t,r,s,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function M(t){var e=this instanceof(o=o||r(82));if(!e&&!h.call(M,this))return new M(t);this._writableState=new A(t,this,e),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),a.call(this)}function I(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new b("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function R(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),k(t,e)}function T(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)o[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;o.allBuffers=c,I(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,l=r.callback;if(I(t,e,!1,e.objectMode?1:u.length,u,h,l),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function C(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(r){e.pendingcb--,r&&S(t,r),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function k(t,e){var r=C(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!==typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(O,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(10)(M,a),A.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(A.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===M&&(t&&t._writableState instanceof A)}})):h=function(t){return t instanceof this},M.prototype.pipe=function(){S(this,new g)},M.prototype.write=function(t,e,r){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=t,c.isBuffer(i)||i instanceof u);return a&&!c.isBuffer(t)&&(t=function(t){return c.from(t)}(t)),"function"===typeof e&&(r=e,e=null),a?e="buffer":e||(e=o.defaultEncoding),"function"!==typeof r&&(r=E),o.ending?function(t,e){var r=new w;S(t,r),n.nextTick(e,r)}(this,r):(a||function(t,e,r,i){var o;return null===r?o=new v:"string"===typeof r||e.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(S(t,o),n.nextTick(i,o),!1)}(this,o,t,r))&&(o.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=c.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else I(t,e,!1,a,n,i,o);return u}(this,o,a,t,e,r)),s},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||T(this,t))},M.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(t,e,r){r(new m("_write()"))},M.prototype._writev=null,M.prototype.end=function(t,e,r){var i=this._writableState;return"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,k(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),M.prototype.destroy=l.destroy,M.prototype._undestroy=l.undestroy,M.prototype._destroy=function(t,e){e(t)}}).call(this,r(21),r(22))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(21))},function(t,e,r){"use strict";t.exports=h;var n=r(81).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(82);function u(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function h(t){if(!(this instanceof h))return new h(t);c.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",l)}function l(){var t=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}r(10)(h,c),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,c.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,r){r(new i("_transform()"))},h.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){c.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,r){var n=r(10),i=r(83),o=r(15).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(t,e,r){return r^t&(e^r)}function h(t,e,r){return t&e|r&(t|e)}function l(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(c,i),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,p=0|this._f,m=0|this._g,y=0|this._h,g=0;g<16;++g)r[g]=t.readInt32BE(4*g);for(;g<64;++g)r[g]=0|(((e=r[g-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[g-7]+d(r[g-15])+r[g-16];for(var b=0;b<64;++b){var v=y+f(c)+u(c,p,m)+s[b]+r[b]|0,w=l(n)+h(n,i,o)|0;y=m,m=p,p=c,c=a+v|0,a=o,o=i,i=n,n=v+w|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=y+this._h|0},c.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=c},function(t,e,r){var n=r(10),i=r(83),o=r(15).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function c(){this.init(),this._w=a,i.call(this,128,112)}function u(t,e,r){return r^t&(e^r)}function h(t,e,r){return t&e|r&(t|e)}function l(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function y(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function g(t,e){return t>>>0<e>>>0?1:0}n(c,i),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,c=0|this._fh,b=0|this._gh,v=0|this._hh,w=0|this._al,_=0|this._bl,S=0|this._cl,E=0|this._dl,A=0|this._el,M=0|this._fl,I=0|this._gl,R=0|this._hl,T=0;T<32;T+=2)e[T]=t.readInt32BE(4*T),e[T+1]=t.readInt32BE(4*T+4);for(;T<160;T+=2){var C=e[T-30],O=e[T-30+1],k=d(C,O),P=p(O,C),N=m(C=e[T-4],O=e[T-4+1]),D=y(O,C),B=e[T-14],x=e[T-14+1],L=e[T-32],U=e[T-32+1],j=P+x|0,K=k+B+g(j,P)|0;K=(K=K+N+g(j=j+D|0,D)|0)+L+g(j=j+U|0,U)|0,e[T]=K,e[T+1]=j}for(var F=0;F<160;F+=2){K=e[F],j=e[F+1];var q=h(r,n,i),V=h(w,_,S),z=l(r,w),H=l(w,r),G=f(a,A),W=f(A,a),J=s[F],Y=s[F+1],Z=u(a,c,b),X=u(A,M,I),Q=R+W|0,$=v+G+g(Q,R)|0;$=($=($=$+Z+g(Q=Q+X|0,X)|0)+J+g(Q=Q+Y|0,Y)|0)+K+g(Q=Q+j|0,j)|0;var tt=H+V|0,et=z+q+g(tt,H)|0;v=b,R=I,b=c,I=M,c=a,M=A,a=o+$+g(A=E+Q|0,E)|0,o=i,E=S,i=n,S=_,n=r,_=w,r=$+et+g(w=Q+tt|0,Q)|0}this._al=this._al+w|0,this._bl=this._bl+_|0,this._cl=this._cl+S|0,this._dl=this._dl+E|0,this._el=this._el+A|0,this._fl=this._fl+M|0,this._gl=this._gl+I|0,this._hl=this._hl+R|0,this._ah=this._ah+r+g(this._al,w)|0,this._bh=this._bh+n+g(this._bl,_)|0,this._ch=this._ch+i+g(this._cl,S)|0,this._dh=this._dh+o+g(this._dl,E)|0,this._eh=this._eh+a+g(this._el,A)|0,this._fh=this._fh+c+g(this._fl,M)|0,this._gh=this._gh+b+g(this._gl,I)|0,this._hh=this._hh+v+g(this._hl,R)|0},c.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=c},function(t,e,r){t.exports=i;var n=r(33).EventEmitter;function i(){n.call(this)}r(10)(i,n),i.Readable=r(150),i.Writable=r(393),i.Duplex=r(394),i.Transform=r(395),i.PassThrough=r(396),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",c));var s=!1;function a(){s||(s=!0,t.end())}function c(){s||(s=!0,"function"===typeof t.destroy&&t.destroy())}function u(t){if(h(),0===n.listenerCount(this,"error"))throw t}function h(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",c),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),t.removeListener("close",h)}return r.on("error",u),t.on("error",u),r.on("end",h),r.on("close",h),t.on("close",h),t.emit("pipe",r),t}},function(t,e,r){"use strict";(function(e,n){var i=r(111);t.exports=v;var o,s=r(208);v.ReadableState=b;r(33).EventEmitter;var a=function(t,e){return t.listeners(e).length},c=r(224),u=r(15).Buffer,h=e.Uint8Array||function(){};var l=Object.create(r(93));l.inherits=r(10);var f=r(225),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=r(391),y=r(227);l.inherits(v,c);var g=["error","close","destroy","pause","resume"];function b(t,e){t=t||{};var n=e instanceof(o=o||r(69));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=r(92).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function v(t){if(o=o||r(69),!(this instanceof v))return new v(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),c.call(this)}function w(t,e,r,n,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,A(t)}(t,s)):(i||(o=function(t,e){var r;n=e,u.isBuffer(n)||n instanceof h||"string"===typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):_(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?_(t,s,e,!1):I(t,s)):_(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function _(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&A(t)),I(t,e)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=u.from(t,e),e=""),r=!0),w(this,t,e,!1,r)},v.prototype.unshift=function(t){return w(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return p||(p=r(92).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var S=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=S?t=S:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function A(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(M,t):M(t))}function M(t){d("emit readable"),t.emit("readable"),O(t)}function I(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(R,t,e))}function R(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function T(t){d("readable nexttick read 0"),t.read(0)}function C(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),O(t),e.flowing&&!e.reading&&t.read(0)}function O(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=u.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(N,e,t))}function N(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}v.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):A(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&P(this),null;var n,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(r,e))),null===(n=t>0?k(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&P(this)),null!==n&&this.emit("data",n),n},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var c=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?h:v;function u(e,n){d("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),t.removeListener("close",g),t.removeListener("finish",b),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",u),r.removeListener("end",h),r.removeListener("end",v),r.removeListener("data",m),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function h(){d("onend"),t.end()}o.endEmitted?i.nextTick(c):r.once("end",c),t.on("unpipe",u);var l=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,O(t))}}(r);t.on("drain",l);var f=!1;var p=!1;function m(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==D(o.pipes,t))&&!f&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function y(e){d("onerror",e),v(),t.removeListener("error",y),0===a(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",b),v()}function b(){d("onfinish"),t.removeListener("close",g),v()}function v(){d("unpipe"),r.unpipe(t)}return r.on("data",m),function(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",y),t.once("close",g),t.once("finish",b),t.emit("pipe",r),o.flowing||(d("pipe resume"),r.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=D(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},v.prototype.on=function(t,e){var r=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&A(this):i.nextTick(T,this))}return r},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(C,t,e))}(this,t)),this},v.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(d("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause())))})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){d("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=k}).call(this,r(21),r(22))},function(t,e,r){t.exports=r(33).EventEmitter},,,function(t,e,r){"use strict";var n=r(111);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";t.exports=s;var n=r(69),i=Object.create(r(93));function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"===typeof this._flush?this._flush((function(e,r){c(t,e,r)})):c(this,null,null)}function c(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(10),i.inherits(s,n),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},function(t,e,r){"use strict";var n=r(10),i=r(397),o=r(64),s=r(15).Buffer,a=r(230),c=r(148),u=r(149),h=s.alloc(128);function l(t,e){o.call(this,"digest"),"string"===typeof e&&(e=s.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new c:u(t)).update(e).digest():e.length<r&&(e=s.concat([e,h],r));for(var n=this._ipad=s.allocUnsafe(r),i=this._opad=s.allocUnsafe(r),a=0;a<r;a++)n[a]=54^e[a],i[a]=92^e[a];this._hash="rmd160"===t?new c:u(t),this._hash.update(n)}n(l,o),l.prototype._update=function(t){this._hash.update(t)},l.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new c:u(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new l("rmd160",e):"md5"===t?new i(a,e):new l(t,e)}},function(t,e,r){var n=r(146);t.exports=function(t){return(new n).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,r){e.pbkdf2=r(399),e.pbkdf2Sync=r(235)},function(t,e){var r=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!==typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!==typeof e)throw new TypeError("Key length not a number");if(e<0||e>r||e!==e)throw new TypeError("Bad key length")}},function(t,e,r){(function(e,r){var n;if(e.process&&e.process.browser)n="utf-8";else if(e.process&&e.process.version){n=parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";t.exports=n}).call(this,r(21),r(22))},function(t,e,r){var n=r(230),i=r(148),o=r(149),s=r(15).Buffer,a=r(233),c=r(234),u=r(236),h=s.alloc(128),l={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,r){var a=function(t){function e(e){return o(t).update(e).digest()}function r(t){return(new i).update(t).digest()}return"rmd160"===t||"ripemd160"===t?r:"md5"===t?n:e}(t),c="sha512"===t||"sha384"===t?128:64;e.length>c?e=a(e):e.length<c&&(e=s.concat([e,h],c));for(var u=s.allocUnsafe(c+l[t]),f=s.allocUnsafe(c+l[t]),d=0;d<c;d++)u[d]=54^e[d],f[d]=92^e[d];var p=s.allocUnsafe(c+r+4);u.copy(p,0,0,c),this.ipad1=p,this.ipad2=u,this.opad=f,this.alg=t,this.blocksize=c,this.hash=a,this.size=l[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,r,n,i){a(r,n);var o=new f(i=i||"sha1",t=u(t,c,"Password"),(e=u(e,c,"Salt")).length),h=s.allocUnsafe(n),d=s.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var p=0,m=l[i],y=Math.ceil(n/m),g=1;g<=y;g++){d.writeUInt32BE(g,e.length);for(var b=o.run(d,o.ipad1),v=b,w=1;w<r;w++){v=o.run(v,o.ipad2);for(var _=0;_<m;_++)b[_]^=v[_]}b.copy(h,p),p+=m}return h}},function(t,e,r){var n=r(15).Buffer;t.exports=function(t,e,r){if(n.isBuffer(t))return t;if("string"===typeof t)return n.from(t,e);if(ArrayBuffer.isView(t))return n.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},function(t,e,r){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},e.ip=function(t,e,r,n){for(var i=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1}r[n+0]=i>>>0,r[n+1]=o>>>0},e.rip=function(t,e,r,n){for(var i=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)i<<=1,i|=e>>>a+s&1,i<<=1,i|=t>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=e>>>a+s&1,o<<=1,o|=t>>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.pc1=function(t,e,r,n){for(var i=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,i){for(var o=0,s=0,a=n.length>>>1,c=0;c<a;c++)o<<=1,o|=t>>>n[c]&1;for(c=a;c<n.length;c++)s<<=1,s|=e>>>n[c]&1;r[i+0]=o>>>0,r[i+1]=s>>>0},e.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var r=0,n=0;n<4;n++){r<<=4,r|=i[64*n+(t>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=i[256+64*n+(e>>>18-6*n&63)]}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,r=0;r<o.length;r++)e<<=1,e|=t>>>o[r]&1;return e>>>0},e.padSplit=function(t,e,r){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},function(t,e,r){"use strict";var n=r(51),i=r(10),o=r(237),s=r(152);function a(){this.tmp=new Array(2),this.keys=null}function c(t){s.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}i(c,s),t.exports=c,c.create=function(t){return new c(t)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(t,e){t.keys=new Array(32),n.equal(e.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(r,i,t.tmp,0),r=t.tmp[0],i=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var a=u[s>>>1];r=o.r28shl(r,a),i=o.r28shl(i,a),o.pc2(r,i,t.keys,s)}},c.prototype._update=function(t,e,r,n){var i=this._desState,s=o.readUInt32BE(t,e),a=o.readUInt32BE(t,e+4);o.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],o.writeUInt32BE(r,s,n),o.writeUInt32BE(r,a,n+4)},c.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},c.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)n.equal(t[r],e);return t.slice(0,t.length-e)},c.prototype._encrypt=function(t,e,r,n,i){for(var s=e,a=r,c=0;c<t.keys.length;c+=2){var u=t.keys[c],h=t.keys[c+1];o.expand(a,t.tmp,0),u^=t.tmp[0],h^=t.tmp[1];var l=o.substitute(u,h),f=a;a=(s^o.permute(l))>>>0,s=f}o.rip(a,s,n,i)},c.prototype._decrypt=function(t,e,r,n,i){for(var s=r,a=e,c=t.keys.length-2;c>=0;c-=2){var u=t.keys[c],h=t.keys[c+1];o.expand(s,t.tmp,0),u^=t.tmp[0],h^=t.tmp[1];var l=o.substitute(u,h),f=s;s=(a^o.permute(l))>>>0,a=f}o.rip(s,a,n,i)}},function(t,e,r){var n=r(94),i=r(15).Buffer,o=r(240);function s(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var r=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*r)]);for(var a=0;a<r;a++){var c=s(t),u=o+16*a;t._cache.writeUInt32BE(c[0],u+0),t._cache.writeUInt32BE(c[1],u+4),t._cache.writeUInt32BE(c[2],u+8),t._cache.writeUInt32BE(c[3],u+12)}var h=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,h)}},function(t,e){t.exports=function(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,r){var n=r(112),i=r(15).Buffer,o=r(64),s=r(10),a=r(412),c=r(94),u=r(240);function h(t,e,r,s){o.call(this);var c=i.alloc(4,0);this._cipher=new n.AES(e);var h=this._cipher.encryptBlock(c);this._ghash=new a(h),r=function(t,e,r){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var n=new a(r),o=e.length,s=o%16;n.update(e),s&&(s=16-s,n.update(i.alloc(s,0))),n.update(i.alloc(8,0));var c=8*o,h=i.alloc(8);h.writeUIntBE(c,0,8),n.update(h),t._finID=n.state;var l=i.from(t._finID);return u(l),l}(this,r,h),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}s(h,o),h.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},h.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=h},function(t,e,r){var n=r(112),i=r(15).Buffer,o=r(64);function s(t,e,r,s){o.call(this),this._cipher=new n.AES(e),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=t}r(10)(s,o),s.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},t.exports=s},function(t,e,r){var n=r(80);t.exports=b,b.simpleSieve=y,b.fermatTest=g;var i=r(245),o=new i(24),s=new(r(247)),a=new i(1),c=new i(2),u=new i(5),h=(new i(16),new i(8),new i(10)),l=new i(3),f=(new i(7),new i(11)),d=new i(4),p=(new i(12),null);function m(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<e&&t[i]<=n&&r%t[i]!==0;i++);e!==i&&t[i]<=n||(t[e++]=r)}return p=t,t}function y(t){for(var e=m(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return!0}function g(t){var e=i.mont(t);return 0===c.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function b(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var r,p;for(e=new i(e);;){for(r=new i(n(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(a),r.testn(1)||r.iadd(c),e.cmp(c)){if(!e.cmp(u))for(;r.mod(h).cmp(l);)r.iadd(d)}else for(;r.mod(o).cmp(f);)r.iadd(d);if(y(p=r.shrn(1))&&y(r)&&g(p)&&g(r)&&s.test(p)&&s.test(r))return r}}},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(246).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=l[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===e,u=new t(o),h=this.clone();if(c){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,_=v>>>13,S=0|s[4],E=8191&S,A=S>>>13,M=0|s[5],I=8191&M,R=M>>>13,T=0|s[6],C=8191&T,O=T>>>13,k=0|s[7],P=8191&k,N=k>>>13,D=0|s[8],B=8191&D,x=D>>>13,L=0|s[9],U=8191&L,j=L>>>13,K=0|a[0],F=8191&K,q=K>>>13,V=0|a[1],z=8191&V,H=V>>>13,G=0|a[2],W=8191&G,J=G>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],$=8191&Q,tt=Q>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(m,F)|0,o=Math.imul(m,q);var gt=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),i=(i=Math.imul(g,q))+Math.imul(b,F)|0,o=Math.imul(b,q),n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var bt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,F),i=(i=Math.imul(w,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(b,z)|0,o=o+Math.imul(b,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(A,F)|0,o=Math.imul(A,q),n=n+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(O,F)|0,o=Math.imul(O,q),n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var St=(u+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(x,F)|0,o=Math.imul(x,q),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ut)|0;var At=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(j,F)|0,o=Math.imul(j,q),n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(g,ct)|0,i=(i=i+Math.imul(g,ut)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(j,z)|0,o=Math.imul(j,H),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(j,W)|0,o=Math.imul(j,J),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(A,ct)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0;var Rt=(u+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Tt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0;var Ct=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ft)|0;var Ot=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var kt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,ct),i=(i=Math.imul(U,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var Pt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(j,lt)|0,o=Math.imul(j,ft);var Nt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Dt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=yt,c[1]=gt,c[2]=bt,c[3]=vt,c[4]=wt,c[5]=_t,c[6]=St,c[7]=Et,c[8]=At,c[9]=Mt,c[10]=It,c[11]=Rt,c[12]=Tt,c[13]=Ct,c[14]=Ot,c[15]=kt,c[16]=Pt,c[17]=Nt,c[18]=Dt,0!==u&&(c[19]=u,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var h=o-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<s;d++){var p=r[h+d],m=n[h+d],y=r[h+d+s],g=n[h+d+s],b=l*y-f*g;g=l*g+f*y,y=b,r[h+d]=p+y,n[h+d]=m+g,r[h+d+s]=p-y,n[h+d+s]=m-g,d!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(c)):(r.isub(e),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,b),i(_,b),i(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return g[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(l,new o(1).iushln(p-y-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=y}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(70)(t))},,function(t,e,r){var n=r(416),i=r(155);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},o.prototype.test=function(t,e,r){var i=t.bitLength(),o=n.mont(t),s=new n(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var a=t.subn(1),c=0;!a.testn(c);c++);for(var u=t.shrn(c),h=a.toRed(o);e>0;e--){var l=this._randrange(new n(2),a);r&&r(l);var f=l.toRed(o).redPow(u);if(0!==f.cmp(s)&&0!==f.cmp(h)){for(var d=1;d<c;d++){if(0===(f=f.redSqr()).cmp(s))return!1;if(0===f.cmp(h))break}if(d===c)return!1}}return!0},o.prototype.getDivisor=function(t,e){var r=t.bitLength(),i=n.mont(t),o=new n(1).toRed(i);e||(e=Math.max(1,r/48|0));for(var s=t.subn(1),a=0;!s.testn(a);a++);for(var c=t.shrn(a),u=s.toRed(i);e>0;e--){var h=this._randrange(new n(2),s),l=t.gcd(h);if(0!==l.cmpn(1))return l;var f=h.toRed(i).redPow(c);if(0!==f.cmp(o)&&0!==f.cmp(u)){for(var d=1;d<a;d++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(u))break}if(d===a)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},,,,,function(t,e,r){"use strict";var n=e;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!==typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},n.zero2=i,n.toHex=o,n.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,r){"use strict";var n=e;n.base=r(114),n.short=r(422),n.mont=r(423),n.edwards=r(424)},function(t,e,r){"use strict";var n=r(56).rotr32;function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function s(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?s(e,r,n):2===t?o(e,r,n):void 0},e.ch32=i,e.maj32=o,e.p32=s,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,r){"use strict";var n=r(56),i=r(95),o=r(254),s=r(51),a=n.sum32,c=n.sum32_4,u=n.sum32_5,h=o.ch32,l=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,m=o.g1_256,y=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}n.inherits(b,y),t.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=c(m(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],y=this.h[2],g=this.h[3],b=this.h[4],v=this.h[5],w=this.h[6],_=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var S=u(_,d(b),h(b,v,w),this.k[n],r[n]),E=a(f(i),l(i,o,y));_=w,w=v,v=b,b=a(g,S),g=y,y=o,o=i,i=a(S,E)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],y),this.h[3]=a(this.h[3],g),this.h[4]=a(this.h[4],b),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],_)},b.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(56),i=r(95),o=r(51),s=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,u=n.shr64_lo,h=n.sum64,l=n.sum64_hi,f=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,y=n.sum64_5_lo,g=i.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function w(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function _(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function S(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function E(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function A(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function M(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function I(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function R(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function T(t,e){var r=s(t,e,1)^s(t,e,8)^c(t,e,7);return r<0&&(r+=4294967296),r}function C(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function O(t,e){var r=s(t,e,19)^s(e,t,29)^c(t,e,6);return r<0&&(r+=4294967296),r}function k(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(v,g),t.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=O(r[n-4],r[n-3]),o=k(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],c=T(r[n-30],r[n-29]),u=C(r[n-30],r[n-29]),h=r[n-32],l=r[n-31];r[n]=d(i,o,s,a,c,u,h,l),r[n+1]=p(i,o,s,a,c,u,h,l)}},v.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],d=this.h[6],p=this.h[7],g=this.h[8],b=this.h[9],v=this.h[10],T=this.h[11],C=this.h[12],O=this.h[13],k=this.h[14],P=this.h[15];o(this.k.length===r.length);for(var N=0;N<r.length;N+=2){var D=k,B=P,x=I(g,b),L=R(g,b),U=w(g,b,v,T,C),j=_(g,b,v,T,C,O),K=this.k[N],F=this.k[N+1],q=r[N],V=r[N+1],z=m(D,B,x,L,U,j,K,F,q,V),H=y(D,B,x,L,U,j,K,F,q,V);D=A(n,i),B=M(n,i),x=S(n,i,s,a,c),L=E(n,i,s,a,c,u);var G=l(D,B,x,L),W=f(D,B,x,L);k=C,P=O,C=v,O=T,v=g,T=b,g=l(d,p,z,H),b=f(p,p,z,H),d=c,p=u,c=s,u=a,s=n,a=i,n=l(z,H,G,W),i=f(z,H,G,W)}h(this.h,0,n,i),h(this.h,2,s,a),h(this.h,4,c,u),h(this.h,6,d,p),h(this.h,8,g,b),h(this.h,10,v,T),h(this.h,12,C,O),h(this.h,14,k,P)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";const n=e;n.bignum=r(258),n.define=r(440).define,n.base=r(443),n.constants=r(444),n.decoders=r(262),n.encoders=r(260)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(259).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=l[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===e,u=new t(o),h=this.clone();if(c){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,_=v>>>13,S=0|s[4],E=8191&S,A=S>>>13,M=0|s[5],I=8191&M,R=M>>>13,T=0|s[6],C=8191&T,O=T>>>13,k=0|s[7],P=8191&k,N=k>>>13,D=0|s[8],B=8191&D,x=D>>>13,L=0|s[9],U=8191&L,j=L>>>13,K=0|a[0],F=8191&K,q=K>>>13,V=0|a[1],z=8191&V,H=V>>>13,G=0|a[2],W=8191&G,J=G>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],$=8191&Q,tt=Q>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(m,F)|0,o=Math.imul(m,q);var gt=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),i=(i=Math.imul(g,q))+Math.imul(b,F)|0,o=Math.imul(b,q),n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var bt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,F),i=(i=Math.imul(w,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(b,z)|0,o=o+Math.imul(b,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(A,F)|0,o=Math.imul(A,q),n=n+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(O,F)|0,o=Math.imul(O,q),n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var St=(u+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(x,F)|0,o=Math.imul(x,q),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ut)|0;var At=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(j,F)|0,o=Math.imul(j,q),n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(g,ct)|0,i=(i=i+Math.imul(g,ut)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(j,z)|0,o=Math.imul(j,H),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(j,W)|0,o=Math.imul(j,J),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(A,ct)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0;var Rt=(u+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Tt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0;var Ct=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ft)|0;var Ot=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var kt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,ct),i=(i=Math.imul(U,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var Pt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(j,lt)|0,o=Math.imul(j,ft);var Nt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Dt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=yt,c[1]=gt,c[2]=bt,c[3]=vt,c[4]=wt,c[5]=_t,c[6]=St,c[7]=Et,c[8]=At,c[9]=Mt,c[10]=It,c[11]=Rt,c[12]=Tt,c[13]=Ct,c[14]=Ot,c[15]=kt,c[16]=Pt,c[17]=Nt,c[18]=Dt,0!==u&&(c[19]=u,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var h=o-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<s;d++){var p=r[h+d],m=n[h+d],y=r[h+d+s],g=n[h+d+s],b=l*y-f*g;g=l*g+f*y,y=b,r[h+d]=p+y,n[h+d]=m+g,r[h+d+s]=p-y,n[h+d+s]=m-g,d!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(c)):(r.isub(e),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,b),i(_,b),i(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return g[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(l,new o(1).iushln(p-y-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=y}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(70)(t))},,function(t,e,r){"use strict";const n=e;n.der=r(261),n.pem=r(441)},function(t,e,r){"use strict";const n=r(10),i=r(160).Buffer,o=r(161),s=r(163);function a(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){o.call(this,"der",t)}function u(t){return t<10?"0"+t:t}t.exports=a,a.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(c,o),c.prototype._encodeComposite=function(t,e,r,n){const o=function(t,e,r,n){let i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(s.tagByName.hasOwnProperty(t))i=s.tagByName[t];else{if("number"!==typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}if(i>=31)return n.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=s.tagClassByName[r||"universal"]<<6,i}(t,e,r,this.reporter);if(n.length<128){const t=i.alloc(2);return t[0]=o,t[1]=n.length,this._createEncoderBuffer([t,n])}let a=1;for(let i=n.length;i>=256;i>>=8)a++;const c=i.alloc(2+a);c[0]=o,c[1]=128|a;for(let i=1+a,s=n.length;s>0;i--,s>>=8)c[i]=255&s;return this._createEncoderBuffer([c,n])},c.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=i.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},c.prototype._encodeObjid=function(t,e,r){if("string"===typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let i=0;i<t.length;i++){let e=t[i];for(n++;e>=128;e>>=7)n++}const o=i.alloc(n);let s=o.length-1;for(let i=t.length-1;i>=0;i--){let e=t[i];for(o[s--]=127&e;(e>>=7)>0;)o[s--]=128|127&e}return this._createEncoderBuffer(o)},c.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return"gentime"===e?r=[u(n.getUTCFullYear()),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[u(n.getUTCFullYear()%100),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(t,e){if("string"===typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!==typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=i.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let i=t;i>=256;i>>=8)r++;const n=new Array(r);for(let i=n.length-1;i>=0;i--)n[i]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(i.from(n))},c.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},c.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getEncoder("der").tree},c.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(null===n.default)return!1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0}},function(t,e,r){"use strict";const n=e;n.der=r(263),n.pem=r(442)},function(t,e,r){"use strict";const n=r(10),i=r(258),o=r(96).DecoderBuffer,s=r(161),a=r(163);function c(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){s.call(this,"der",t)}function h(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=a.tagClass[r>>6],i=0===(32&r);if(31===(31&r)){let n=r;for(r=0;128===(128&n);){if(n=t.readUInt8(e),t.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:a.tag[r]}}function l(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0===(128&n))return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;n|=e}return n}t.exports=c,c.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},n(u,s),u.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const n=t.save(),i=h(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},u.prototype._decodeTag=function(t,e,r){const n=h(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=l(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},u.prototype._skipUntilEnd=function(t,e){for(;;){const r=h(t,e);if(t.isError(r))return r;const n=l(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},u.prototype._decodeList=function(t,e,r,n){const i=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",n);if(t.isError(o)&&e)break;i.push(o)}return i},u.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2===1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},u.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,s=0;for(;!t.isEmpty();)s=t.readUInt8(),o<<=7,o|=127&s,0===(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,c=i[0]%40;if(n=r?i:[a,c].concat(i.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t)}return n},u.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,s,a,c;if("gentime"===e)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),c=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),c=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,c,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},u.prototype._decodeInt=function(t,e){const r=t.raw();let n=new i(r);return e&&(n=e[n.toString(10)]||n),n},u.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},,function(t,e,r){var n=r(91),i=r(15).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var r,s=i.alloc(0),a=0;s.length<e;)r=o(a++),s=i.concat([s,n("sha1").update(t).update(r).digest()]);return s.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t}},,function(t,e,r){var n=r(164),i=r(15).Buffer;t.exports=function(t,e){return i.from(t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed().toArray())}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,r){"use strict";var n=r(455);function i(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const o=i("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),s=i("ascii","a",(t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),a={utf8:o,"utf-8":o,hex:n.bases.base16,latin1:s,ascii:s,binary:s,...n.bases};t.exports=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(57);const i=n.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),o=n.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});e.base16=i,e.base16upper=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(57);const i=n.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),o=n.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});e.base36=i,e.base36upper=o},function(t,e,r){"use strict";const n=r(275),i=t=>n({exact:!0}).test(t);i.v4=t=>n.v4({exact:!0}).test(t),i.v6=t=>n.v6({exact:!0}).test(t),i.version=t=>i(t)?i.v4(t)?4:6:void 0,t.exports=i},function(t,e,r){"use strict";const n="[a-fA-F\\d:]",i=t=>t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):"",o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",a="\n(?:\n(?:".concat(s,":){7}(?:").concat(s,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(s,":){6}(?:").concat(o,"|:").concat(s,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(s,":){5}(?::").concat(o,"|(?::").concat(s,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(s,":){4}(?:(?::").concat(s,"){0,1}:").concat(o,"|(?::").concat(s,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(s,":){3}(?:(?::").concat(s,"){0,2}:").concat(o,"|(?::").concat(s,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(s,":){2}(?:(?::").concat(s,"){0,3}:").concat(o,"|(?::").concat(s,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(s,":){1}(?:(?::").concat(s,"){0,4}:").concat(o,"|(?::").concat(s,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(s,"){0,5}:").concat(o,"|(?::").concat(s,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),c=new RegExp("(?:^".concat(o,"$)|(?:^").concat(a,"$)")),u=new RegExp("^".concat(o,"$")),h=new RegExp("^".concat(a,"$")),l=t=>t&&t.exact?c:new RegExp("(?:".concat(i(t)).concat(o).concat(i(t),")|(?:").concat(i(t)).concat(a).concat(i(t),")"),"g");l.v4=t=>t&&t.exact?u:new RegExp("".concat(i(t)).concat(o).concat(i(t)),"g"),l.v6=t=>t&&t.exact?h:new RegExp("".concat(i(t)).concat(a).concat(i(t)),"g"),t.exports=l},function(t,e){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function c(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var c=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(t);if("number"===u&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return c(t,e,o,"day");if(e>=i)return c(t,e,i,"hour");if(e>=n)return c(t,e,n,"minute");if(e>=r)return c(t,e,r,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){"use strict";const n=r(119),i=r(476),o={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"};e.create=async function(t,e){const r=o[t],s=await n.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{digest:async t=>(async(t,e)=>{const r=await n.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)})(s,t),length:i[t]}}},function(t,e,r){var n=r(16);r(28),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[t]:null};var i=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},function(t,e,r){var n=r(16);r(28),n.cipher=n.cipher||{};var i=t.exports=n.cipher.modes=n.cipher.modes||{};function o(t,e){if("string"===typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var o=[],s=e/4;for(i=0;i<s;++i)o.push(t.getInt32());t=o}return t}function s(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=a(8*e.length());var o=e.length()%this.blockSize;for(o&&e.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){t[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=t[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];e[0]^=i[0],e[1]^=i[1],e[2]^=i[2],e[3]^=i[3]}return e},i.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=(n-1-s%n)*e;a[s/n|0]=1<<e-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o},i.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i}},function(t,e,r){var n=r(16);if(r(97),r(75),r(168),r(76),r(98),r(281),r(169),r(86),r(484),r(121),r(28),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.asn1,s=n.pki=n.pki||{};t.exports=s.pbe=n.pbe=n.pbe||{};var a=s.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},h={name:"pkcs-12PbeParams",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"iterations"}]};function l(t,e){return t.start().update(e).digest().getBytes()}function f(t){var e;if(t){if(!(e=s.oids[o.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return d(e)}function d(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,u,h=n.random.getBytesSync(r.saltSize),l=r.count,f=o.integerToDer(l);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var p,m,y;switch(r.algorithm){case"aes128":i=16,p=16,m=a["aes128-CBC"],y=n.aes.createEncryptionCipher;break;case"aes192":i=24,p=16,m=a["aes192-CBC"],y=n.aes.createEncryptionCipher;break;case"aes256":i=32,p=16,m=a["aes256-CBC"],y=n.aes.createEncryptionCipher;break;case"des":i=8,p=8,m=a.desCBC,y=n.des.createEncryptionCipher;break;default:throw(S=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,S}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),b=d(g),v=n.pkcs5.pbkdf2(e,h,l,i,b),w=n.random.getBytesSync(p);(E=y(v)).start(w),E.update(o.toDer(t)),E.finish(),u=E.output.getBytes();var _=function(t,e,r,i){var a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,e.getBytes())]);"hmacWithSHA1"!==i&&a.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids[i]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return a}(h,f,i,g);c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBES2).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBKDF2).getBytes()),_]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(m).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,w)])])])}else{var S;if("3des"!==r.algorithm)throw(S=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,S;i=24;var E,A=new n.util.ByteBuffer(h);v=s.pbe.generatePkcs12Key(e,A,1,l,i),w=s.pbe.generatePkcs12Key(e,A,2,l,i);(E=n.des.createEncryptionCipher(v)).start(w),E.update(o.toDer(t)),E.finish(),u=E.output.getBytes(),c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,h),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f.getBytes())])])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[c,o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,u)])},s.decryptPrivateKeyInfo=function(t,e){var r=null,i={},a=[];if(!o.validate(t,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var h=o.derToOid(i.encryptionOid),l=s.pbe.getCipher(h,i.encryptionParams,e),f=n.util.createBuffer(i.encryptedData);return l.update(f),l.finish()&&(r=o.fromDer(l.output)),r},s.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:o.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},s.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return o.fromDer(e.body)},s.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var i=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));return i=s.encryptPrivateKeyInfo(i,e,r),s.encryptedPrivateKeyToPem(i)}var a,c,u,h;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,c=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var f=h(n.pbe.opensslDeriveBytes(e,c.substr(0,8),u));f.start(c),f.update(o.toDer(s.privateKeyToAsn1(t))),f.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:f.output.getBytes()};return n.pem.encode(d)},s.decryptRsaPrivateKey=function(t,e){var r=null,i=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=u,u;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,c;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,c=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":a=8,c=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":a=16,c=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:var u;throw(u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,u}var h=n.util.hexToBytes(i.dekInfo.parameters),l=c(n.pbe.opensslDeriveBytes(e,h.substr(0,8),a));if(l.start(h),l.update(n.util.createBuffer(i.body)),!l.finish())return r;r=l.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?s.decryptPrivateKeyInfo(o.fromDer(r),e):o.fromDer(r))&&(r=s.privateKeyFromAsn1(r)),r},s.pbe.generatePkcs12Key=function(t,e,r,i,o,s){var a,c;if("undefined"===typeof s||null===s){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');s=n.md.sha1.create()}var u=s.digestLength,h=s.blockLength,l=new n.util.ByteBuffer,f=new n.util.ByteBuffer;if(null!==t&&void 0!==t){for(c=0;c<t.length;c++)f.putInt16(t.charCodeAt(c));f.putInt16(0)}var d=f.length(),p=e.length(),m=new n.util.ByteBuffer;m.fillWithByte(r,h);var y=h*Math.ceil(p/h),g=new n.util.ByteBuffer;for(c=0;c<y;c++)g.putByte(e.at(c%p));var b=h*Math.ceil(d/h),v=new n.util.ByteBuffer;for(c=0;c<b;c++)v.putByte(f.at(c%d));var w=g;w.putBuffer(v);for(var _=Math.ceil(o/u),S=1;S<=_;S++){var E=new n.util.ByteBuffer;E.putBytes(m.bytes()),E.putBytes(w.bytes());for(var A=0;A<i;A++)s.start(),s.update(E.getBytes()),E=s.digest();var M=new n.util.ByteBuffer;for(c=0;c<h;c++)M.putByte(E.at(c%u));var I=Math.ceil(p/h)+Math.ceil(d/h),R=new n.util.ByteBuffer;for(a=0;a<I;a++){var T=new n.util.ByteBuffer(w.getBytes(h)),C=511;for(c=M.length()-1;c>=0;c--)C>>=8,C+=M.at(c)+T.at(c),T.setAt(c,255&C);R.putBuffer(T)}w=R,l.putBuffer(E)}return l.truncate(l.length()-o),l},s.pbe.getCipher=function(t,e,r){switch(t){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(t,e,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},s.pbe.getCipherForPBES2=function(t,e,r){var i,a={},c=[];if(!o.validate(e,u,a,c))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,i;if((t=o.derToOid(a.kdfOid))!==s.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,i.supportedOids=["pkcs5PBKDF2"],i;if((t=o.derToOid(a.encOid))!==s.oids["aes128-CBC"]&&t!==s.oids["aes192-CBC"]&&t!==s.oids["aes256-CBC"]&&t!==s.oids["des-EDE3-CBC"]&&t!==s.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var h,l,d=a.kdfSalt,p=n.util.createBuffer(a.kdfIterationCount);switch(p=p.getInt(p.length()<<3),s.oids[t]){case"aes128-CBC":h=16,l=n.aes.createDecryptionCipher;break;case"aes192-CBC":h=24,l=n.aes.createDecryptionCipher;break;case"aes256-CBC":h=32,l=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":h=24,l=n.des.createDecryptionCipher;break;case"desCBC":h=8,l=n.des.createDecryptionCipher}var m=f(a.prfOid),y=n.pkcs5.pbkdf2(r,d,p,h,m),g=a.encIv,b=l(y);return b.start(g),b},s.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},a=[];if(!o.validate(e,h,i,a))throw(m=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,m;var c,u,l,d=n.util.createBuffer(i.salt),p=n.util.createBuffer(i.iterations);switch(p=p.getInt(p.length()<<3),t){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=n.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var m;throw(m=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,m}var y=f(i.prfOid),g=s.pbe.generatePkcs12Key(r,d,1,p,c,y);return y.start(),l(g,s.pbe.generatePkcs12Key(r,d,2,p,u,y))},s.pbe.opensslDeriveBytes=function(t,e,r,i){if("undefined"===typeof i||null===i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===e&&(e="");for(var o=[l(i,t+e)],s=16,a=1;s<r;++a,s+=16)o.push(l(i,o[a-1]+t+e));return o.join("").substr(0,r)}},function(t,e,r){(function(e){var n=r(16);r(481),r(76),r(28);var i,o=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(120)),t.exports=n.pbkdf2=o.pbkdf2=function(t,r,o,s,a,c){if("function"===typeof a&&(c=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===a||"object"!==typeof a)&&(i.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!==typeof a&&(a="sha1"),t=e.from(t,"binary"),r=e.from(r,"binary"),c?4===i.pbkdf2Sync.length?i.pbkdf2(t,r,o,s,(function(t,e){if(t)return c(t);c(null,e.toString("binary"))})):i.pbkdf2(t,r,o,s,a,(function(t,e){if(t)return c(t);c(null,e.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(t,r,o,s).toString("binary"):i.pbkdf2Sync(t,r,o,s,a).toString("binary");if("undefined"!==typeof a&&null!==a||(a="sha1"),"string"===typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var u=a.digestLength;if(s>4294967295*u){var h=new Error("Derived key is too long.");if(c)return c(h);throw h}var l=Math.ceil(s/u),f=s-(l-1)*u,d=n.hmac.create();d.start(a,t);var p,m,y,g="";if(!c){for(var b=1;b<=l;++b){d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(b)),p=y=d.digest().getBytes();for(var v=2;v<=o;++v)d.start(null,null),d.update(y),m=d.digest().getBytes(),p=n.util.xorBytes(p,m,u),y=m;g+=b<l?p:p.substr(0,f)}return g}b=1;function w(){if(b>l)return c(null,g);d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(b)),p=y=d.digest().getBytes(),v=2,_()}function _(){if(v<=o)return d.start(null,null),d.update(y),m=d.digest().getBytes(),p=n.util.xorBytes(p,m,u),y=m,++v,n.util.setImmediate(_);g+=b<l?p:p.substr(0,f),++b,w()}w()}}).call(this,r(19).Buffer)},function(t,e,r){"use strict";const{concat:n}=r(25),{fromString:i}=r(24),o=r(119);t.exports={create:function(){let{algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:s="SHA-256",saltLength:a=16,iterations:c=32767}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=o.get();async function h(o,h){const l=u.getRandomValues(new Uint8Array(a)),f=u.getRandomValues(new Uint8Array(e)),d={name:t,iv:f},p={name:"PBKDF2",salt:l,iterations:c,hash:{name:s}},m=await u.subtle.importKey("raw",i(h),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await u.subtle.deriveKey(p,m,{name:t,length:r},!0,["encrypt"]),g=await u.subtle.encrypt(d,y,o);return n([l,d.iv,new Uint8Array(g)])}async function l(n,o){const h=n.slice(0,a),l=n.slice(a,a+e),f=n.slice(a+e),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:c,hash:{name:s}},m=await u.subtle.importKey("raw",i(o),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await u.subtle.deriveKey(p,m,{name:t,length:r},!0,["decrypt"]),g=await u.subtle.decrypt(d,y,f);return new Uint8Array(g)}return r*=8,{encrypt:h,decrypt:l}}}},function(t,e,r){var n=r(16);r(76),r(28);var i=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var o=n.sha384=n.sha512.sha384=n.sha512.sha384||{};o.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=o,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(t){if(a||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(u={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),"undefined"===typeof t&&(t="SHA-512"),!(t in u))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=u[t],r=null,i=n.util.createBuffer(),o=new Array(80),l=0;l<80;++l)o[l]=new Array(2);var f=64;switch(t){case"SHA-384":f=48;break;case"SHA-512/256":f=32;break;case"SHA-512/224":f=28}var d={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:f,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var t=d.messageLengthSize/4,o=0;o<t;++o)d.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(e.length);for(o=0;o<e.length;++o)r[o]=e[o].slice(0);return d}};return d.start(),d.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var s=t.length;d.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=d.fullMessageLength.length-1;a>=0;--a)d.fullMessageLength[a]+=s[1],s[1]=s[0]+(d.fullMessageLength[a]/4294967296>>>0),d.fullMessageLength[a]=d.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return i.putBytes(t),h(r,o,i),(i.read>2048||0===i.length())&&i.compact(),d},d.digest=function(){var e=n.util.createBuffer();e.putBytes(i.bytes());var a,c=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize&d.blockLength-1;e.putBytes(s.substr(0,d.blockLength-c));for(var u=8*d.fullMessageLength[0],l=0;l<d.fullMessageLength.length-1;++l)u+=(a=8*d.fullMessageLength[l+1])/4294967296>>>0,e.putInt32(u>>>0),u=a>>>0;e.putInt32(u);var f=new Array(r.length);for(l=0;l<r.length;++l)f[l]=r[l].slice(0);h(f,o,e);var p,m=n.util.createBuffer();p="SHA-512"===t?f.length:"SHA-384"===t?f.length-2:f.length-4;for(l=0;l<p;++l)m.putInt32(f[l][0]),l===p-1&&"SHA-512/224"===t||m.putInt32(f[l][1]);return m},d};var s=null,a=!1,c=null,u=null;function h(t,e,r){for(var n,i,o,s,a,u,h,l,f,d,p,m,y,g,b,v,w,_,S,E,A,M,I,R,T,C,O,k,P,N,D,B,x,L=r.length();L>=128;){for(O=0;O<16;++O)e[O][0]=r.getInt32()>>>0,e[O][1]=r.getInt32()>>>0;for(;O<80;++O)n=(((k=(N=e[O-2])[0])>>>19|(P=N[1])<<13)^(P>>>29|k<<3)^k>>>6)>>>0,i=((k<<13|P>>>19)^(P<<3|k>>>29)^(k<<26|P>>>6))>>>0,o=(((k=(B=e[O-15])[0])>>>1|(P=B[1])<<31)^(k>>>8|P<<24)^k>>>7)>>>0,s=((k<<31|P>>>1)^(k<<24|P>>>8)^(k<<25|P>>>7))>>>0,D=e[O-7],x=e[O-16],P=i+D[1]+s+x[1],e[O][0]=n+D[0]+o+x[0]+(P/4294967296>>>0)>>>0,e[O][1]=P>>>0;for(p=t[0][0],m=t[0][1],y=t[1][0],g=t[1][1],b=t[2][0],v=t[2][1],w=t[3][0],_=t[3][1],S=t[4][0],E=t[4][1],A=t[5][0],M=t[5][1],I=t[6][0],R=t[6][1],T=t[7][0],C=t[7][1],O=0;O<80;++O)h=((S>>>14|E<<18)^(S>>>18|E<<14)^(E>>>9|S<<23))>>>0,l=(I^S&(A^I))>>>0,a=((p>>>28|m<<4)^(m>>>2|p<<30)^(m>>>7|p<<25))>>>0,u=((p<<4|m>>>28)^(m<<30|p>>>2)^(m<<25|p>>>7))>>>0,f=(p&y|b&(p^y))>>>0,d=(m&g|v&(m^g))>>>0,P=C+(((S<<18|E>>>14)^(S<<14|E>>>18)^(E<<23|S>>>9))>>>0)+((R^E&(M^R))>>>0)+c[O][1]+e[O][1],n=T+h+l+c[O][0]+e[O][0]+(P/4294967296>>>0)>>>0,i=P>>>0,o=a+f+((P=u+d)/4294967296>>>0)>>>0,s=P>>>0,T=I,C=R,I=A,R=M,A=S,M=E,S=w+n+((P=_+i)/4294967296>>>0)>>>0,E=P>>>0,w=b,_=v,b=y,v=g,y=p,g=m,p=n+o+((P=i+s)/4294967296>>>0)>>>0,m=P>>>0;P=t[0][1]+m,t[0][0]=t[0][0]+p+(P/4294967296>>>0)>>>0,t[0][1]=P>>>0,P=t[1][1]+g,t[1][0]=t[1][0]+y+(P/4294967296>>>0)>>>0,t[1][1]=P>>>0,P=t[2][1]+v,t[2][0]=t[2][0]+b+(P/4294967296>>>0)>>>0,t[2][1]=P>>>0,P=t[3][1]+_,t[3][0]=t[3][0]+w+(P/4294967296>>>0)>>>0,t[3][1]=P>>>0,P=t[4][1]+E,t[4][0]=t[4][0]+S+(P/4294967296>>>0)>>>0,t[4][1]=P>>>0,P=t[5][1]+M,t[5][0]=t[5][0]+A+(P/4294967296>>>0)>>>0,t[5][1]=P>>>0,P=t[6][1]+R,t[6][0]=t[6][0]+I+(P/4294967296>>>0)>>>0,t[6][1]=P>>>0,P=t[7][1]+C,t[7][0]=t[7][0]+T+(P/4294967296>>>0)>>>0,t[7][1]=P>>>0,L-=128}}},function(t,e,r){"use strict";t.exports=function(t,e){let{className:r,symbolName:n}=e;const i=Symbol.for(n),o={[r]:class extends t{constructor(){super(...arguments),Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return r}}}[r];return o["is".concat(r)]=t=>!(!t||!t[i]),o},t.exports.proto=function(t,e){let{className:r,symbolName:n,withoutNew:i}=e;const o=Symbol.for(n),s={[r]:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(i&&!(this instanceof s))return new s(...r);const a=t.call(this,...r)||this;return a&&!a[o]&&Object.defineProperty(a,o,{value:!0}),a}}[r];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get:()=>r}),s["is".concat(r)]=t=>!(!t||!t[o]),s}},function(t,e,r){"use strict";(function(e){function n(t,e){Object.defineProperty(t,"super_",{value:e,writable:!0,configurable:!0}),Object.setPrototypeOf(t.prototype,e.prototype)}let i="undefined"!==typeof e?e.AbortError:"undefined"!==typeof window?window.AbortError:null;function o(t,e,r){Error.captureStackTrace(this,o),this.message="status="+e+" while requesting "+t+" ["+r+"]",this.uri=t,this.status=e,this.method=r}function s(t,e){Error.captureStackTrace(this,s),this.message=t,this.cause=e}function a(t){Error.captureStackTrace(this,a),this.message="Timeout (t="+t+").",this.timeout=t}function c(t){if(t.protocol){if(!["http:","https:","udp4:","udp6:"].includes(t.protocol))throw new Error('Invalid Endpoint: unsupported protocol "'.concat(t.protocol,'" for endpoint: ').concat(JSON.stringify(t)))}else t.protocol="https:";if("string"!==typeof t.host)throw new Error('Invalid Endpoint: host "'.concat(t.host,'" needs to be a string: ').concat(JSON.stringify(t)));if("number"!==typeof t.port&&!isNaN(t.port))throw new Error('Invalid Endpoint: port "'.concat(t.port,'" needs to be a number: ').concat(JSON.stringify(t)));for(const e in t)void 0!==t[e]&&(this[e]=t[e])}i||(i=function(){Error.captureStackTrace(this,i),this.message="Request aborted."},n(i,Error),i.prototype.code="ABORT_ERR",i.prototype.name="AbortError"),n(o,Error),o.prototype.code="HTTP_STATUS",o.prototype.name="StatusError",n(s,Error),s.prototype.code="RESPONSE_ERR",s.prototype.name="ResponseError",n(a,Error),a.prototype.code="ETIMEOUT",a.prototype.name="TimeoutError";const u=r(513),h={};for(const t in u)h[t]=new c(u[t]);t.exports={endpoints:h,AbortError:i,HTTPStatusError:o,ResponseError:s,TimeoutError:a,Endpoint:c}}).call(this,r(21))},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;const a=o(r(173)),c=s(r(519)),u=s(r(525)),h=s(r(175)),l=s(r(31)),f=r(40),d=r(293),p=r(538),m=r(541),y=r(77),g=r(124),b=r(542),v=r(543),w=r(100),_=r(177);e.Noise=class{constructor(t,e){if(this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=null!==e&&void 0!==e?e:new Uint8Array(0),this.useNoisePipes=!1,t){const e=a.generateKeyPairFromSeed(t);this.staticKeys={privateKey:e.secretKey,publicKey:e.publicKey}}else this.staticKeys=(0,y.generateKeypair)()}async secureOutbound(t,e,r){const n=(0,c.default)(e,{lengthEncoder:g.uint16BEEncode,lengthDecoder:g.uint16BEDecode,maxDataLength:_.NOISE_MSG_MAX_LENGTH_BYTES}),i=await this.performHandshake({connection:n,isInitiator:!0,localPeer:t,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async secureInbound(t,e,r){const n=(0,c.default)(e,{lengthEncoder:g.uint16BEEncode,lengthDecoder:g.uint16BEDecode,maxDataLength:_.NOISE_MSG_MAX_LENGTH_BYTES}),i=await this.performHandshake({connection:n,isInitiator:!1,localPeer:t,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async performHandshake(t){var e;const r=await(0,y.getPayload)(t.localPeer,this.staticKeys.publicKey,this.earlyData);let n=this.useNoisePipes;if(t.isInitiator&&null===v.KeyCache.load(t.remotePeer)&&(n=!1),!n)return await this.performXXHandshake(t,r);{const{remotePeer:n,connection:o,isInitiator:s}=t,a=new p.IKHandshake(s,r,this.prologue,this.staticKeys,o,null!==(e=v.KeyCache.load(t.remotePeer))&&void 0!==e?e:new Uint8Array(32),n);try{return await this.performIKHandshake(a)}catch(i){let e;return t.isInitiator&&(e=a.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(t,r,i.initialMsg,e)}}}async performXXFallbackHandshake(t,e,r,n){const{isInitiator:i,remotePeer:o,connection:s}=t,a=new m.XXFallbackHandshake(i,e,this.prologue,this.staticKeys,s,r,o,n);try{await a.propose(),await a.exchange(),await a.finish()}catch(c){(0,w.logger)(c);throw new Error("Error occurred during XX Fallback handshake: ".concat(c.message))}return a}async performXXHandshake(t,e){const{isInitiator:r,remotePeer:n,connection:i}=t,o=new d.XXHandshake(r,e,this.prologue,this.staticKeys,i,n);try{await o.propose(),await o.exchange(),await o.finish(),this.useNoisePipes&&o.remotePeer&&v.KeyCache.store(o.remotePeer,o.getRemoteStaticKey())}catch(s){throw new Error("Error occurred during XX handshake: ".concat(s.message))}return o}async performIKHandshake(t){return await t.stage0(),await t.stage1(),t}async createSecureConnection(t,e){const[r,n]=(0,u.default)(),i=t.unwrap();return await(0,l.default)(r,h.default,(0,b.encryptStream)(e),(0,f.encode)({lengthEncoder:g.uint16BEEncode}),i,(0,f.decode)({lengthDecoder:g.uint16BEDecode}),h.default,(0,b.decryptStream)(e),r),n}}},,function(t,e,r){const n=r(54);t.exports=t=>{const e=async function*(){let e=yield,r=new n;for await(const i of t)if(e)for(r.append(i);r.length>=e;){const t=r.shallowSlice(0,e);if(r.consume(e),e=yield t,!e){r.length&&(e=yield r,r=new n);break}}else e=yield r.append(i),r=new n;if(e)throw Object.assign(new Error("stream ended before ".concat(e," bytes became available")),{code:"ERR_UNDER_READ",buffer:r})}();return e.next(),e}},function(t,e,r){const n=r(520);t.exports=class{constructor(t){this.hwm=t||16,this.head=new n(this.hwm),this.tail=this.head}push(t){if(!this.head.push(t)){const e=this.head;this.head=e.next=new n(2*this.head.buffer.length),this.head.push(t)}}shift(){const t=this.tail.shift();if(void 0===t&&this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},function(t,e,r){"use strict";const n=r(58),{Buffer:i}=r(19),o=(t,e,r)=>{const s=n.encode(t,e,r);return o.bytes=n.encode.bytes,e||i.from(s)};t.exports=o},function(t,e,r){"use strict";const n=r(58),{Buffer:i}=r(19),o=t=>{const e=n.decode(i.isBuffer(t)?t:(r=t,new Proxy({},{get:(t,e)=>"l"===e[0]?r[e]:r.get(parseInt(e))})));var r;return o.bytes=n.decode.bytes,e};t.exports=o},function(t,e){t.exports=function(t){if(t){if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"===typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XXHandshake=void 0;const n=r(527),i=r(77),o=r(100),s=r(124);e.XXHandshake=class{constructor(t,e,r,i,o,s,a){this.isInitiator=t,this.payload=e,this.prologue=r,this.staticKeypair=i,this.connection=o,s&&(this.remotePeer=s),this.xx=null!==a&&void 0!==a?a:new n.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if((0,o.logLocalStaticKeys)(this.session.hs.s),this.isInitiator){(0,o.logger)("Stage 0 - Initiator starting to send first message.");const t=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP((0,s.encode0)(t)),(0,o.logger)("Stage 0 - Initiator finished sending first message."),(0,o.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,o.logger)("Stage 0 - Responder waiting to receive first message...");const t=(0,s.decode0)((await this.connection.readLP()).slice()),{valid:e}=this.xx.recvMessage(this.session,t);if(!e)throw new Error("xx handshake stage 0 validation fail");(0,o.logger)("Stage 0 - Responder received first message."),(0,o.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){(0,o.logger)("Stage 1 - Initiator waiting to receive first message from responder...");const e=(0,s.decode1)((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx handshake stage 1 validation fail");(0,o.logger)("Stage 1 - Initiator received the message."),(0,o.logRemoteEphemeralKey)(this.session.hs.re),(0,o.logRemoteStaticKey)(this.session.hs.rs),(0,o.logger)("Initiator going to check remote's signature...");try{const t=await(0,i.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,i.getPeerIdFromPayload)(t),this.remotePeer=await(0,i.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){throw new Error("Error occurred while verifying signed payload: ".concat(t.message))}(0,o.logger)("All good with the signature!")}else{(0,o.logger)("Stage 1 - Responder sending out first message with signed payload and static key.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,s.encode1)(t)),(0,o.logger)("Stage 1 - Responder sent the second handshake message with signed payload."),(0,o.logLocalEphemeralKeys)(this.session.hs.e)}}async finish(){if(this.isInitiator){(0,o.logger)("Stage 2 - Initiator sending third handshake message.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,s.encode2)(t)),(0,o.logger)("Stage 2 - Initiator sent message with signed payload.")}else{(0,o.logger)("Stage 2 - Responder waiting for third handshake message...");const e=(0,s.decode2)((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx handshake stage 2 validation fail");(0,o.logger)("Stage 2 - Responder received the message, finished handshake.");try{const t=await(0,i.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,i.getPeerIdFromPayload)(t),await(0,i.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){throw new Error("Error occurred while verifying signed payload: ".concat(t.message))}}(0,o.logCipherState)(this.session)}encrypt(t,e){const r=this.getCS(e);return this.xx.encryptWithAd(r,new Uint8Array(0),t)}decrypt(t,e){const r=this.getCS(e,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),t)}getRemoteStaticKey(){return this.session.hs.rs}getCS(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.cs1||!t.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(123),i=r(62);e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var o=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},t.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=e,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&e>0;)this._buffer[this._bufferLength++]=t[r++],e--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(e>=this.blockSize&&(r=a(this._temp,this._state,t,r,e),e%=this.blockSize);e>0;)this._buffer[this._bufferLength++]=t[r++],e--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,o=e<<3,s=e%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<s-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,s-8),n.writeUint32BE(o,this._buffer,s-4),a(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],t,4*c);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.state),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA256=o;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(t,e,r,i,o){for(;o>=64;){for(var a=e[0],c=e[1],u=e[2],h=e[3],l=e[4],f=e[5],d=e[6],p=e[7],m=0;m<16;m++){var y=i+4*m;t[m]=n.readUint32BE(r,y)}for(m=16;m<64;m++){var g=t[m-2],b=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,v=((g=t[m-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;t[m]=(b+t[m-7]|0)+(v+t[m-16]|0)}for(m=0;m<64;m++){b=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&f^~l&d)|0)+(p+(s[m]+t[m]|0)|0)|0,v=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;p=d,d=f,f=l,l=h+b|0,h=u,u=c,c=a,a=b+v|0}e[0]+=a,e[1]+=c,e[2]+=u,e[3]+=h,e[4]+=l,e[5]+=f,e[6]+=d,e[7]+=p,i+=64,o-=64}return i}e.hash=function(t){var e=new o;e.update(t);var r=e.digest();return e.clean(),r}},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractHandshake=e.MAX_NONCE=e.MIN_NONCE=void 0;const s=o(r(173)),a=o(r(294)),c=r(532),u=r(45),h=r(25),l=r(535),f=r(77),d=r(100);e.MIN_NONCE=0,e.MAX_NONCE=Number.MAX_SAFE_INTEGER;const p="Cipherstate has reached maximum n, a new handshake must be performed";e.AbstractHandshake=class{encryptWithAd(t,e,r){const n=this.encrypt(t.k,t.n,e,r);return this.setNonce(t,this.incrementNonce(t.n)),n}decryptWithAd(t,e,r){const{plaintext:n,valid:i}=this.decrypt(t.k,t.n,e,r);return this.setNonce(t,this.incrementNonce(t.n)),{plaintext:n,valid:i}}hasKey(t){return!this.isEmptyKey(t.k)}setNonce(t,e){t.n=e}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(t){const e=this.createEmptyKey();return(0,u.equals)(e,t)}incrementNonce(t){return t+1}nonceToBytes(t){const e=new Uint8Array(12);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(4,t,!0),e}encrypt(t,r,n,i){if(r>e.MAX_NONCE)throw new Error(p);const o=this.nonceToBytes(r);return new c.ChaCha20Poly1305(t).seal(o,i,n)}encryptAndHash(t,e){let r;return r=this.hasKey(t.cs)?this.encryptWithAd(t.cs,t.h,e):e,this.mixHash(t,r),r}decrypt(t,r,n,i){if(r>e.MAX_NONCE)throw new Error(p);const o=this.nonceToBytes(r),s=new c.ChaCha20Poly1305(t).open(o,i,n);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(t,e){let r,n=!0;return this.hasKey(t.cs)?({plaintext:r,valid:n}=this.decryptWithAd(t.cs,t.h,e)):r=e,this.mixHash(t,e),{plaintext:r,valid:n}}dh(t,e){try{const r=s.sharedKey(t,e);return 32===r.length?r:r.slice(0,32)}catch(r){return(0,d.logger)(r.message),new Uint8Array(32)}}mixHash(t,e){t.h=this.getHash(t.h,e)}getHash(t,e){return a.hash((0,h.concat)([t,e],t.length+e.length))}mixKey(t,e){const[r,n]=(0,f.getHkdf)(t.ck,e);t.cs=this.initializeKey(n),t.ck=r}initializeKey(t){return{k:t,n:e.MIN_NONCE}}initializeSymmetric(t){const e=(0,l.fromString)(t,"utf-8"),r=this.hashProtocolName(e),n=r,i=this.createEmptyKey();return{cs:this.initializeKey(i),ck:n,h:r}}hashProtocolName(t){if(t.length<=32){const e=new Uint8Array(32);return e.set(t),e}return this.getHash(t,new Uint8Array(0))}split(t){const[e,r]=(0,f.getHkdf)(t.ck,new Uint8Array(0));return{cs1:this.initializeKey(e),cs2:this.initializeKey(r)}}writeMessageRegular(t,e){const r=this.encryptWithAd(t,new Uint8Array(0),e);return{ne:this.createEmptyKey(),ns:new Uint8Array(0),ciphertext:r}}readMessageRegular(t,e){return this.decryptWithAd(t,new Uint8Array(0),e.ciphertext)}}},function(t,e,r){"use strict";t.exports=async function*(t,e){let r=0;if(!(e<1))for await(const n of t)if(yield n,r++,r===e)return}},function(t,e,r){"use strict";const n=r(9),i=r(89),o=r(298),s=r(296);t.exports={storeAddresses:async function*(t,e){yield*o(t,(async t=>(await e.addressBook.add(t.id,t.multiaddrs),t)))},uniquePeers:function(t){const e=new Set;return i(t,(t=>!e.has(t.id.toString())&&(e.add(t.id.toString()),!0)))},requirePeers:async function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=0;for await(const n of t)r++,yield n;if(r<e)throw n(new Error("not found"),"NOT_FOUND")},maybeLimitSource:function(t,e){return e?s(t,e):t}}},function(t,e,r){"use strict";t.exports=async function*(t,e){for await(const r of t)yield e(r)}},function(t,e,r){"use strict";const{AbortController:n}=globalThis,i=r(126);class o extends n{constructor(t){super(),this._ms=t,this._timer=i((()=>this.abort()),t),Object.setPrototypeOf(this,o.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=i((()=>this.abort()),this._ms)}}t.exports={TimeoutController:o}},function(t,e,r){"use strict";const n=r(99);t.exports=async function*(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const i=n();setTimeout((async()=>{try{await Promise.all(e.map((async t=>{for await(const e of t)i.push(e)}))),i.end()}catch(t){i.end(t)}}),0),yield*i}},function(t,e,r){"use strict";t.exports=async t=>{for await(const e of t)return e}},function(t,e,r){"use strict";const n=new Map;t.exports={setDelayedInterval:function(t,e,r){r=r||e;const i="".concat(Date.now(),":").concat(Math.floor(1e6*Math.random())),o=setTimeout((()=>{!async function(t,e,r){for(;n.get(r);){try{await t()}catch(i){setTimeout((()=>{throw i}),1);break}if(!n.get(r))break;await new Promise((t=>{const i=setTimeout(t,e);n.set(r,i)}))}}(t,e,i)}),r);return n.set(i,o),i},clearDelayedInterval:function(t){const e=n.get(t);e&&(clearTimeout(e),n.delete(t))}}},function(t,e,r){"use strict";const n=r(23),{Multiaddr:i}=r(11),o=r(9),{codes:s}=r(27);t.exports=function(t){let e;if("string"===typeof t&&(t=new i(t)),i.isMultiaddr(t)){e=t;const i=t.getPeerId();if(!i)throw o(new Error("".concat(t," does not have a valid peer type")),s.ERR_INVALID_MULTIADDR);try{t=n.createFromB58String(i)}catch(r){throw o(new Error("".concat(t," is not a valid peer type")),s.ERR_INVALID_MULTIADDR)}}return{id:t,multiaddrs:e?[e]:void 0}}},function(t,e,r){"use strict";const n=r(305).version;t.exports.PROTOCOL_VERSION="ipfs/0.1.0",t.exports.AGENT_VERSION="js-libp2p/".concat(n),t.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0",t.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0",t.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0",t.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id",t.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push",t.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0",t.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"},function(t){t.exports=JSON.parse('{"name":"libp2p","version":"0.36.2","description":"JavaScript implementation of libp2p, a modular peer to peer network stack","leadMaintainer":"Jacob Heun <jacobheun@gmail.com>","main":"src/index.js","types":"dist/src/index.d.ts","typesVersions":{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},"files":["dist","src"],"scripts":{"lint":"aegir lint","build":"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:fetch && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:fetch":"pbjs -t static-module -w commonjs -r libp2p-fetch --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/fetch/proto.js ./src/fetch/proto.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:peer":"pbjs -t static-module -w commonjs -r libp2p-peer --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/pb/peer.js ./src/peer-store/pb/peer.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:fetch && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:fetch":"pbts -o src/fetch/proto.d.ts src/fetch/proto.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:peer":"pbts -o src/peer-store/pb/peer.d.ts src/peer-store/pb/peer.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js","test":"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":"aegir test -t node -f \\"./test/**/*.{node,spec}.js\\"","test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all","test:interop":"LIBP2P_JS=$PWD npx aegir test -t node -f ./node_modules/libp2p-interop/test/*","prepare":"npm run build","coverage":"nyc --reporter=text --reporter=lcov npm run test:node"},"repository":{"type":"git","url":"https://github.com/libp2p/js-libp2p.git"},"keywords":["libp2p","network","p2p","peer","peer-to-peer","IPFS"],"bugs":{"url":"https://github.com/libp2p/js-libp2p/issues"},"homepage":"https://libp2p.io","license":"MIT","engines":{"node":">=15.0.0"},"browser":{"nat-api":false},"eslintConfig":{"extends":"ipfs","ignorePatterns":["!.aegir.js","test/ts-use","*.d.ts"]},"dependencies":{"@vascosantos/moving-average":"^1.1.0","abortable-iterator":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^3.0.0","bignumber.js":"^9.0.1","class-is":"^1.1.0","datastore-core":"^7.0.0","debug":"^4.3.1","err-code":"^3.0.0","es6-promisify":"^7.0.0","events":"^3.3.0","hashlru":"^2.3.0","interface-datastore":"^6.0.2","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-foreach":"^0.1.1","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-sort":"^1.0.1","it-take":"^1.0.0","libp2p-crypto":"^0.21.2","libp2p-interfaces":"^4.0.0","libp2p-utils":"^0.4.0","mafmt":"^10.0.0","merge-options":"^3.0.4","mortice":"^2.0.1","multiaddr":"^10.0.0","multiformats":"^9.0.0","multistream-select":"^3.0.0","mutable-proxy":"^1.0.0","nat-api":"^0.3.1","node-forge":"^1.2.1","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.16.0","private-ip":"^2.1.0","protobufjs":"^6.10.2","retimer":"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^3.0.0","uint8arrays":"^3.0.0","varint":"^6.0.0","wherearewe":"^1.0.0","xsalsa20":"^1.1.0"},"devDependencies":{"@chainsafe/libp2p-noise":"^5.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^1.0.0","@types/varint":"^6.0.0","aegir":"^36.0.0","buffer":"^6.0.3","delay":"^5.0.0","into-stream":"^6.0.0","ipfs-http-client":"^54.0.2","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0","libp2p":".","libp2p-bootstrap":"^0.14.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.11.1","libp2p-interfaces-compliance-tests":"^4.0.8","libp2p-interop":"^0.7.1","libp2p-kad-dht":"^0.28.6","libp2p-mdns":"^0.18.0","libp2p-mplex":"^0.10.4","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.25.0","libp2p-websockets":"^0.16.0","nock":"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0","rimraf":"^3.0.2","sinon":"^12.0.1","util":"^0.12.3"},"contributors":["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej Kr\xfcger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","dirkmc <dirkmdev@gmail.com>","Volker Mische <volker.mische@gmail.com>","Chris Dostert <chrisdostert@users.noreply.github.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","Robert Kiel <robert.kiel@hoprnet.org>","Richard Littauer <richard.littauer@gmail.com>","a1300 <matthias-knopp@gmx.net>","Ryan Bell <ryan@piing.net>","\u1d20\u026a\u1d04\u1d1b\u1d0f\u0280 \u0299\u1d0a\u1d07\u029f\u1d0b\u029c\u1d0f\u029f\u1d0d <victorbjelkholm@gmail.com>","Andrew Nesbitt <andrewnez@gmail.com>","Franck Royer <franck@royer.one>","Thomas Eizinger <thomas@eizinger.io>","V\xedt Habada <vithabada93@gmail.com>","Giovanni T. Parra <fiatjaf@gmail.com>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Alan Smithee <ggnore.alan.smithee@gmail.com>","Elven <mon.samuel@qq.com>","Samlior <samlior@foxmail.com>","Didrik Nordstr\xf6m <didrik.nordstrom@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","TJKoury <TJKoury@gmail.com>","TheStarBoys <41286328+TheStarBoys@users.noreply.github.com>","Tiago Alves <alvesjtiago@gmail.com>","Tim Daubensch\xfctz <tim@daubenschuetz.de>","XiaoZhang <zxinmyth@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","ebinks <elizabethjbinks@gmail.com>","greenSnot <greenSnot@users.noreply.github.com>","isan_rivkin <isanrivkin@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","mcclure <andi.m.mcclure@gmail.com>","patrickwoodhead <91056047+patrickwoodhead@users.noreply.github.com>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","swedneck <40505480+swedneck@users.noreply.github.com>","tuyennhv <vutuyen2636@gmail.com>","S\xf6nke Hahn <soenkehahn@gmail.com>","Aleksei <vozhdb@gmail.com>","Bernd Strehl <bernd.strehl@gmail.com>","Chris Bratlien <chrisbratlien@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Ethan Lam <elmemphis2000@gmail.com>","Fei Liu <liu.feiwood@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","Francis Gulotta <wizard@roborooter.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","Jo\xe3o Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Leask Wong <i@leaskh.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Marston Connell <34043723+TheMarstonConnell@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Philipp Muens <raute1337@gmx.de>","RasmusErik Voel Jensen <github@solsort.com>","Smite Chow <xiaopengyou@live.com>","Soeren <nikorpoulsen@gmail.com>"]}')},function(t,e,r){"use strict";const n=r(561);function i(t,e){const r=n(t.multiaddr),i=n(e.multiaddr);return r&&!i?1:!r&&i||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}t.exports.publicAddressesFirst=function(t){return[...t].sort(i)}},function(t,e,r){"use strict";t.exports=r(562).default},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:transports"),{error:n("libp2p:transports:err")}),o=r(565),{codes:s}=r(27),a=r(9),{updateSelfPeerRecord:c}=r(309);class u{constructor(t){let{libp2p:e,upgrader:r,faultTolerance:n=h.FATAL_ALL}=t;this.libp2p=e,this.upgrader=r,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=n}add(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i("adding %s",t),!t)throw a(new Error("Transport must have a valid key, was given '".concat(t,"'")),s.ERR_INVALID_KEY);if(this._transports.has(t))throw a(new Error("There is already a transport with this key"),s.ERR_DUPLICATE_TRANSPORT);const n=new e({...r,libp2p:this.libp2p,upgrader:this.upgrader});this._transports.set(t,n),this._listenerOptions.set(t,r.listenerOptions||{}),this._listeners.has(t)||this._listeners.set(t,[])}async close(){const t=[];for(const[e,r]of this._listeners)for(i("closing listeners for %s",e);r.length;){const e=r.pop();e.removeAllListeners("listening"),e.removeAllListeners("close"),t.push(e.close())}await Promise.all(t),i("all listeners closed");for(const e of this._listeners.keys())this._listeners.set(e,[])}async dial(t,e){const r=this.transportForMultiaddr(t);if(!r)throw a(new Error("No transport available for address ".concat(String(t))),s.ERR_TRANSPORT_UNAVAILABLE);try{return await r.dial(t,e)}catch(n){throw n.code||(n.code=s.ERR_TRANSPORT_DIAL_FAILED),n}}getAddrs(){let t=[];for(const e of this._listeners.values())for(const r of e)t=[...t,...r.getAddrs()];return t}getTransports(){return this._transports.values()}transportForMultiaddr(t){for(const e of this._transports.values()){if(e.filter([t]).length)return e}return null}async listen(t){if(!t||0===t.length)return void i("no addresses were provided for listening, this node is dial only");const e=[];for(const[r,n]of this._transports.entries()){const u=n.filter(t),l=[];for(const t of u){i("creating listener for %s on %s",r,t);const e=n.createListener(this._listenerOptions.get(r));this._listeners.get(r).push(e),e.on("listening",(()=>c(this.libp2p))),e.on("close",(()=>c(this.libp2p))),l.push(e.listen(t))}if(0===l.length){e.push(r);continue}if(!(await o(l)).find((t=>!0===t.isFulfilled))&&this.faultTolerance!==h.NO_FATAL)throw a(new Error("Transport (".concat(r,") could not listen on any available address")),s.ERR_NO_VALID_ADDRESSES)}if(e.length===this._transports.size){const t="no valid addresses were provided for transports [".concat(e,"]");if(this.faultTolerance===h.FATAL_ALL)throw a(new Error(t),s.ERR_NO_VALID_ADDRESSES);i("libp2p in dial mode only: ".concat(t))}}async remove(t){if(i("removing %s",t),this._listeners.has(t))for(const e of this._listeners.get(t))e.removeAllListeners("listening"),e.removeAllListeners("close"),await e.close();this._transports.delete(t),this._listeners.delete(t)}async removeAll(){const t=[];for(const e of this._transports.keys())t.push(this.remove(e));await Promise.all(t)}}const h={FATAL_ALL:0,NO_FATAL:1};u.FaultTolerance=h,t.exports=u},function(t,e,r){"use strict";const n=r(128),i=r(181);t.exports.updateSelfPeerRecord=async function(t){const e=new i({peerId:t.peerId,multiaddrs:t.multiaddrs}),r=await n.seal(e,t.peerId);await t.peerStore.addressBook.consumePeerRecord(r)}},function(t,e,r){"use strict";class n extends Map{constructor(t){super();const{system:e,component:r,metric:n,metrics:i}=t;this._system=e,this._component=r,this._metric=n,this._metrics=i,this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}set(t,e){return super.set(t,e),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),this}delete(t){const e=super.delete(t);return this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),e}clear(){super.clear(),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}}t.exports=t=>{let e,{system:r="libp2p",component:i,metric:o,metrics:s}=t;return e=s?new n({system:r,component:i,metric:o,metrics:s}):new Map,e}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:circuit:hop"),{error:n("libp2p:circuit:hop:err")}),o=r(9),s=r(23),{validateAddrs:a}=r(312),c=r(183),{CircuitRelay:u}=r(102),{pipe:h}=r(31),{codes:l}=r(27),{stop:f}=r(313),d=r(129);t.exports={handleHop:async function(t){let{connection:e,request:r,streamHandler:n,circuit:o}=t;if(!o._options.hop.enabled)return i("HOP request received but we are not acting as a relay"),n.end({type:u.Type.STATUS,code:u.Status.HOP_CANT_SPEAK_RELAY});try{a(r,n)}catch(y){return i.error("invalid hop request via peer %s",e.remotePeer.toB58String(),y)}if(!r.dstPeer)return void i("HOP request received but we do not receive a dstPeer");const c=new s(r.dstPeer.id),l=o._connectionManager.get(c);if(!l&&!o._options.hop.active)return i("HOP request received but we are not connected to the destination peer"),n.end({type:u.Type.STATUS,code:u.Status.HOP_NO_CONN_TO_DST});if(!l)return;const d={type:u.Type.STOP,dstPeer:r.dstPeer,srcPeer:r.srcPeer};let p;try{p=await f({connection:l,request:d})}catch(y){return i.error(y)}i("hop request from %s is valid",e.remotePeer.toB58String()),n.write({type:u.Type.STATUS,code:u.Status.SUCCESS});const m=n.rest();return h(m,p,m)},hop:async function(t){let{connection:e,request:r}=t;const{stream:n}=await e.newStream([d.relay]),s=new c({stream:n});s.write(r);const a=await s.read();if(!a)throw o(new Error("HOP request had no response"),l.ERR_HOP_REQUEST_FAILED);if(a.code===u.Status.SUCCESS)return i("hop request was successful"),s.rest();throw i("hop request failed with code %d, closing stream",a.code),s.close(),o(new Error("HOP request failed with code ".concat(a.code)),l.ERR_HOP_REQUEST_FAILED)},canHop:async function(t){let{connection:e}=t;const{stream:r}=await e.newStream([d.relay]),n=new c({stream:r});n.write({type:u.Type.CAN_HOP});const i=await n.read();return await n.close(),!(!i||i.code!==u.Status.SUCCESS)},handleCanHop:function(t){let{connection:e,streamHandler:r,circuit:n}=t;const o=n._options.hop.enabled;i("can hop (%s) request from %s",o,e.remotePeer.toB58String()),r.end({type:u.Type.STATUS,code:o?u.Status.SUCCESS:u.Status.HOP_CANT_SPEAK_RELAY})}}},function(t,e,r){"use strict";const{Multiaddr:n}=r(11),{CircuitRelay:i}=r(102);function o(t,e){t.write({type:i.Type.STATUS,code:e})}t.exports={validateAddrs:function(t,e){try{t.dstPeer&&t.dstPeer.addrs&&t.dstPeer.addrs.forEach((t=>new n(t)))}catch(r){throw o(e,t.type===i.Type.HOP?i.Status.HOP_DST_MULTIADDR_INVALID:i.Status.STOP_DST_MULTIADDR_INVALID),r}try{t.srcPeer&&t.srcPeer.addrs&&t.srcPeer.addrs.forEach((t=>new n(t)))}catch(r){throw o(e,t.type===i.Type.HOP?i.Status.HOP_SRC_MULTIADDR_INVALID:i.Status.STOP_SRC_MULTIADDR_INVALID),r}}}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:circuit:stop"),{error:n("libp2p:circuit:stop:err")}),{CircuitRelay:o}=r(102),s=r(129),a=r(183),{validateAddrs:c}=r(312);t.exports.handleStop=function(t){let{connection:e,request:r,streamHandler:n}=t;try{c(r,n)}catch(s){return i.error("invalid stop request via peer %s",e.remotePeer.toB58String(),s)}return i("stop request is valid"),n.write({type:o.Type.STATUS,code:o.Status.SUCCESS}),n.rest()},t.exports.stop=async function(t){let{connection:e,request:r}=t;const{stream:n}=await e.newStream([s.relay]);i("starting stop request to %s",e.remotePeer.toB58String());const c=new a({stream:n});c.write(r);const u=await c.read();return u?u.code===o.Status.SUCCESS?(i("stop request to %s was successful",e.remotePeer.toB58String()),c.rest()):(i("stop request failed with code %d",u.code),void c.close()):c.close()}},function(t,e,r){"use strict";const{CID:n}=r(85),{sha256:i}=r(72);t.exports.namespaceToCid=async t=>{const e=(new TextEncoder).encode(t),r=await i.digest(e);return n.createV0(r)}},function(t,e){function r(t){const e=new globalThis.AbortController;function r(){e.abort();for(const e of t)e&&e.removeEventListener&&e.removeEventListener("abort",r)}for(const n of t)if(n&&n.addEventListener){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}t.exports=r,t.exports.anySignal=r},,function(t,e,r){"use strict";class n extends Error{constructor(t){super(t||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class i{static fn(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return new i(((e,n,i)=>{r.push(i),t(...r).then(e,n)}))}}constructor(t){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((e,r)=>{this._reject=r;const n=t=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(t)};return Object.defineProperties(n,{shouldReject:{get:()=>this._rejectOnCancel,set:t=>{this._rejectOnCancel=t}}}),t((t=>{this._isCanceled&&n.shouldReject||(this._isPending=!1,e(t))}),(t=>{this._isPending=!1,r(t)}),n)}))}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(t){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const t of this._cancelHandlers)t()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new n(t))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(i.prototype,Promise.prototype),t.exports=i,t.exports.CancelError=n},function(t,e,r){var n=r(16);r(97),r(75),r(168),r(76),r(601),r(98),r(169),r(603),r(121),r(28);var i=n.asn1,o=t.exports=n.pki=n.pki||{},s=o.oids,a={};a.CN=s.commonName,a.commonName="CN",a.C=s.countryName,a.countryName="C",a.L=s.localityName,a.localityName="L",a.ST=s.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=s.organizationName,a.organizationName="O",a.OU=s.organizationalUnitName,a.organizationalUnitName="OU",a.E=s.emailAddress,a.emailAddress="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},h={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},l={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[l,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function d(t,e){"string"===typeof e&&(e={shortName:e});for(var r,n=null,i=0;null===n&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}o.RDNAttributesAsArray=function(t,e){for(var r,n,o,c=[],u=0;u<t.value.length;++u){r=t.value[u];for(var h=0;h<r.value.length;++h)o={},n=r.value[h],o.type=i.derToOid(n.value[0].value),o.value=n.value[1].value,o.valueTagClass=n.value[1].type,o.type in s&&(o.name=s[o.type],o.name in a&&(o.shortName=a[o.name])),e&&(e.update(o.type),e.update(o.value)),c.push(o)}return c},o.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],c=i.derToOid(n.value[0].value),u=n.value[1].value,h=0;h<u.length;++h){var l={};if(l.type=c,l.value=u[h].value,l.valueTagClass=u[h].type,l.type in s&&(l.name=s[l.type],l.name in a&&(l.shortName=a[l.name])),l.type===s.extensionRequest){l.extensions=[];for(var f=0;f<l.value.length;++f)l.extensions.push(o.certificateExtensionFromAsn1(l.value[f]))}e.push(l)}return e};var p=function(t,e,r){var n={};if(t!==s["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:s.sha1},mgf:{algorithmOid:s.mgf1,hash:{algorithmOid:s.sha1}},saltLength:20});var o={},a=[];if(!i.validate(e,h,o,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return void 0!==o.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(o.hashOid)),void 0!==o.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(o.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(o.maskGenHashOid)),void 0!==o.saltLength&&(n.saltLength=o.saltLength.charCodeAt(0)),n},m=function(t){switch(s[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},y=function(t){var e,r=t.certificate;switch(r.signatureOid){case s.sha1WithRSAEncryption:case s.sha1WithRSASignature:break;case s["RSASSA-PSS"]:var i,o,a;if(void 0===(i=s[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a;if(void 0===(o=s[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[o])throw(a=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,a.name=o,a;if(o=n.mgf[o].create(n.md[i].create()),void 0===(i=s[r.signatureParameters.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,a.name=i,a;e=n.pss.create(n.md[i].create(),o,r.signatureParameters.saltLength)}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function g(t){for(var e,r,o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),s=t.attributes,a=0;a<s.length;++a){var c=(e=s[a]).value,u=i.Type.PRINTABLESTRING;"valueTagClass"in e&&(u=e.valueTagClass)===i.Type.UTF8&&(c=n.util.encodeUtf8(c)),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,c)])]),o.value.push(r)}return o}function b(t){for(var e,r=0;r<t.length;++r){if("undefined"===typeof(e=t[r]).name&&(e.type&&e.type in o.oids?e.name=o.oids[e.type]:e.shortName&&e.shortName in a&&(e.name=o.oids[a[e.shortName]])),"undefined"===typeof e.type){if(!e.name||!(e.name in o.oids))throw(c=new Error("Attribute type not specified.")).attribute=e,c;e.type=o.oids[e.name]}if("undefined"===typeof e.shortName&&e.name&&e.name in a&&(e.shortName=a[e.name]),e.type===s.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=i.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(o.certificateExtensionToAsn1(v(e.extensions[n])))}var c;if("undefined"===typeof e.value)throw(c=new Error("Attribute value not specified.")).attribute=e,c}}function v(t,e){if(e=e||{},"undefined"===typeof t.name&&t.id&&t.id in o.oids&&(t.name=o.oids[t.id]),"undefined"===typeof t.id){if(!t.name||!(t.name in o.oids))throw(_=new Error("Extension ID not specified.")).extension=t,_;t.id=o.oids[t.name]}if("undefined"!==typeof t.value)return t;if("keyUsage"===t.name){var r=0,a=0,c=0;t.digitalSignature&&(a|=128,r=7),t.nonRepudiation&&(a|=64,r=6),t.keyEncipherment&&(a|=32,r=5),t.dataEncipherment&&(a|=16,r=4),t.keyAgreement&&(a|=8,r=3),t.keyCertSign&&(a|=4,r=2),t.cRLSign&&(a|=2,r=1),t.encipherOnly&&(a|=1,r=0),t.decipherOnly&&(c|=128,r=7);var u=String.fromCharCode(r);0!==c?u+=String.fromCharCode(a)+String.fromCharCode(c):0!==a&&(u+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("basicConstraints"===t.name)t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var h=t.value.value;for(var l in t)!0===t[l]&&(l in s?h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s[l]).getBytes())):-1!==l.indexOf(".")&&h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l).getBytes())))}else if("nsCertType"===t.name){r=0,a=0;t.client&&(a|=128,r=7),t.server&&(a|=64,r=6),t.email&&(a|=32,r=5),t.objsign&&(a|=16,r=4),t.reserved&&(a|=8,r=3),t.sslCA&&(a|=4,r=2),t.emailCA&&(a|=2,r=1),t.objCA&&(a|=1,r=0);u=String.fromCharCode(r);0!==a&&(u+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var f=0;f<t.altNames.length;++f){u=(b=t.altNames[f]).value;if(7===b.type&&b.ip){if(null===(u=n.util.bytesFromIP(b.ip)))throw(_=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,_}else 8===b.type&&(u=b.oid?i.oidToDer(i.oidToDer(b.oid)):i.oidToDer(u));t.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,b.type,!1,u))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,d.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=t.value.value;if(t.keyIdentifier){var p=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;h.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var m=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[g(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];h.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var y=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);h.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=t.value.value;var b,v=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),w=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<t.altNames.length;++f){u=(b=t.altNames[f]).value;if(7===b.type&&b.ip){if(null===(u=n.util.bytesFromIP(b.ip)))throw(_=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,_}else 8===b.type&&(u=b.oid?i.oidToDer(i.oidToDer(b.oid)):i.oidToDer(u));w.value.push(i.create(i.Class.CONTEXT_SPECIFIC,b.type,!1,u))}v.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[w])),h.push(v)}var _;if("undefined"===typeof t.value)throw(_=new Error("Extension value not specified.")).extension=t,_;return t}function w(t,e){if(t===s["RSASSA-PSS"]){var r=[];return void 0!==e.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r)}return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}function _(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,o=0;o<r.length;++o){var s=r[o],a=s.value,c=i.Type.UTF8;"valueTagClass"in s&&(c=s.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in s&&(u=s.valueConstructed);var h=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,u,a)])]);e.value.push(h)}return e}o.certificateFromPem=function(t,e,r){var s=n.pem.decode(t)[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=s.type,a}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(s.body,r);return o.certificateFromAsn1(c,e)},o.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:i.toDer(o.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var s=i.fromDer(e.body);return o.publicKeyFromAsn1(s)},o.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:i.toDer(o.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:i.toDer(o.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.getPublicKeyFingerprint=function(t,e){var r,s=(e=e||{}).md||n.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":r=i.toDer(o.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(o.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}s.start(),s.update(r);var a=s.digest();if("hex"===e.encoding){var c=a.toHex();return e.delimiter?c.match(/.{2}/g).join(e.delimiter):c}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a},o.certificationRequestFromPem=function(t,e,r){var s=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==s.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=s.type,a}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=i.fromDer(s.body,r);return o.certificationRequestFromAsn1(c,e)},o.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:i.toDer(o.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return d(t.issuer,e)},t.issuer.addField=function(e){b([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){b([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){b(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){b(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)v(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"===typeof e&&(e={name:e});for(var r,n=null,i=0;null===n&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=s[t.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=t.md.algorithm,c}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=o.getTBSCertificate(t);var u=i.toDer(t.tbsCertificate);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,s=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=s.attributes,a.actualIssuer=n.attributes,a}var c=e.md;if(null===c){c=m({signatureOid:e.signatureOid,type:"certificate"});var u=e.tbsCertificate||o.getTBSCertificate(e),h=i.toDer(u);c.update(h.getBytes())}return null!==c&&(r=y({certificate:t,md:c,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var o,s;r=!0;for(var a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],o.type===s.type&&o.value===s.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return o.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=s.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var o=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===o}}return!1},t},o.certificateFromAsn1=function(t,e){var r={},s=[];if(!i.validate(t,u,r,s)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=s,a}if(i.derToOid(r.publicKeyOid)!==o.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=o.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var h=n.util.createBuffer(r.certSerialNumber);c.serialNumber=h.toHex(),c.signatureOid=n.asn1.derToOid(r.certSignatureOid),c.signatureParameters=p(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var l=[];if(void 0!==r.certValidity1UTCTime&&l.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&l.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&l.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&l.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=l[0],c.validity.notAfter=l[1],c.tbsCertificate=r.tbsCertificate,e){c.md=m({signatureOid:c.signatureOid,type:"certificate"});var f=i.toDer(c.tbsCertificate);c.md.update(f.getBytes())}var y=n.md.sha1.create(),g=i.toDer(r.certIssuer);y.update(g.getBytes()),c.issuer.getField=function(t){return d(c.issuer,t)},c.issuer.addField=function(t){b([t]),c.issuer.attributes.push(t)},c.issuer.attributes=o.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=y.digest().toHex();var v=n.md.sha1.create(),w=i.toDer(r.certSubject);return v.update(w.getBytes()),c.subject.getField=function(t){return d(c.subject,t)},c.subject.addField=function(t){b([t]),c.subject.attributes.push(t)},c.subject.attributes=o.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=v.digest().toHex(),r.certExtensions?c.extensions=o.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=o.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},o.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(o.certificateExtensionFromAsn1(n.value[i]));return e},o.certificateExtensionFromAsn1=function(t){var e={};if(e.id=i.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===i.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in s)if(e.name=s[e.id],"keyUsage"===e.name){var r=0,o=0;(c=i.fromDer(e.value)).value.length>1&&(r=c.value.charCodeAt(1),o=c.value.length>2?c.value.charCodeAt(2):0),e.digitalSignature=128===(128&r),e.nonRepudiation=64===(64&r),e.keyEncipherment=32===(32&r),e.dataEncipherment=16===(16&r),e.keyAgreement=8===(8&r),e.keyCertSign=4===(4&r),e.cRLSign=2===(2&r),e.encipherOnly=1===(1&r),e.decipherOnly=128===(128&o)}else if("basicConstraints"===e.name){(c=i.fromDer(e.value)).value.length>0&&c.value[0].type===i.Type.BOOLEAN?e.cA=0!==c.value[0].value.charCodeAt(0):e.cA=!1;var a=null;c.value.length>0&&c.value[0].type===i.Type.INTEGER?a=c.value[0].value:c.value.length>1&&(a=c.value[1].value),null!==a&&(e.pathLenConstraint=i.derToInteger(a))}else if("extKeyUsage"===e.name)for(var c=i.fromDer(e.value),u=0;u<c.value.length;++u){var h=i.derToOid(c.value[u].value);h in s?e[s[h]]=!0:e[h]=!0}else if("nsCertType"===e.name){r=0;(c=i.fromDer(e.value)).value.length>1&&(r=c.value.charCodeAt(1)),e.client=128===(128&r),e.server=64===(64&r),e.email=32===(32&r),e.objsign=16===(16&r),e.reserved=8===(8&r),e.sslCA=4===(4&r),e.emailCA=2===(2&r),e.objCA=1===(1&r)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){var l;e.altNames=[];c=i.fromDer(e.value);for(var f=0;f<c.value.length;++f){var d={type:(l=c.value[f]).type,value:l.value};switch(e.altNames.push(d),l.type){case 1:case 2:case 6:break;case 7:d.ip=n.util.bytesToIP(l.value);break;case 8:d.oid=i.derToOid(l.value)}}}else if("subjectKeyIdentifier"===e.name){c=i.fromDer(e.value);e.subjectKeyIdentifier=n.util.bytesToHex(c.value)}return e},o.certificationRequestFromAsn1=function(t,e){var r={},s=[];if(!i.validate(t,f,r,s)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=s,a}if(i.derToOid(r.publicKeyOid)!==o.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=o.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=p(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,e){c.md=m({signatureOid:c.signatureOid,type:"certification request"});var u=i.toDer(c.certificationRequestInfo);c.md.update(u.getBytes())}var h=n.md.sha1.create();return c.subject.getField=function(t){return d(c.subject,t)},c.subject.addField=function(t){b([t]),c.subject.attributes.push(t)},c.subject.attributes=o.RDNAttributesAsArray(r.certificationRequestInfoSubject,h),c.subject.hash=h.digest().toHex(),c.publicKey=o.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(t){return d(c,t)},c.addAttribute=function(t){b([t]),c.attributes.push(t)},c.attributes=o.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},o.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){b([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return d(t,e)},t.addAttribute=function(e){b([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){b(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){b(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=s[t.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=t.md.algorithm,c}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=o.getCertificationRequestInfo(t);var u=i.toDer(t.certificationRequestInfo);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=m({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||o.getCertificationRequestInfo(t),s=i.toDer(n);r.update(s.getBytes())}return null!==r&&(e=y({certificate:t,md:r,signature:t.signature})),e},t};var S=new Date("1950-01-01T00:00:00Z"),E=new Date("2050-01-01T00:00:00Z");function A(t){return t>=S&&t<E?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(t)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(t))}o.getTBSCertificate=function(t){var e=A(t.validity.notBefore),r=A(t.validity.notAfter),s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.siginfo.algorithmOid).getBytes()),w(t.siginfo.algorithmOid,t.siginfo.parameters)]),g(t.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,r]),g(t.subject),o.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&s.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&s.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&s.value.push(o.certificateExtensionsToAsn1(t.extensions)),s},o.getCertificationRequestInfo=function(t){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),g(t.subject),o.publicKeyToAsn1(t.publicKey),_(t)])},o.distinguishedNameToAsn1=function(t){return g(t)},o.certificateToAsn1=function(t){var e=t.tbsCertificate||o.getTBSCertificate(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},o.certificateExtensionsToAsn1=function(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(o.certificateExtensionToAsn1(t[n]));return e},o.certificateExtensionToAsn1=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.id).getBytes())),t.critical&&e.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!==typeof t.value&&(r=i.toDer(r).getBytes()),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),e},o.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||o.getCertificationRequestInfo(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},o.createCaStore=function(t){var e={certs:{}};function r(t){return s(t),e.certs[t.hash]||null}function s(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=o.RDNAttributesAsArray(g(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return r(t.issuer)},e.addCertificate=function(t){if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var s=i.toDer(o.certificateToAsn1(t)).getBytes(),a=0;a<e.length;++a){if(s===i.toDer(o.certificateToAsn1(e[a])).getBytes())return!0}return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var i=e.certs[r];if(n.util.isArray(i))for(var o=0;o<i.length;++o)t.push(i[o]);else t.push(i)}return t},e.removeCertificate=function(t){var a;if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))return null;var c=r(t.subject);if(!n.util.isArray(c))return a=e.certs[t.subject.hash],delete e.certs[t.subject.hash],a;for(var u=i.toDer(o.certificateToAsn1(t)).getBytes(),h=0;h<c.length;++h){u===i.toDer(o.certificateToAsn1(c[h])).getBytes()&&(a=c[h],c.splice(h,1))}return 0===c.length&&delete e.certs[t.subject.hash],a},t)for(var a=0;a<t.length;++a){var c=t[a];e.addCertificate(c)}return e},o.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},o.verifyCertificateChain=function(t,e,r){"function"===typeof r&&(r={verify:r}),r=r||{};var i=(e=e.slice(0)).slice(0),s=r.validityCheckDate;"undefined"===typeof s&&(s=new Date);var a=!0,c=null,u=0;do{var h=e.shift(),l=null,f=!1;if(s&&(s<h.validity.notBefore||s>h.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:o.certificateError.certificate_expired,notBefore:h.validity.notBefore,notAfter:h.validity.notAfter,now:s}),null===c){if(null===(l=e[0]||t.getIssuer(h))&&h.isIssuer(h)&&(f=!0,l=h),l){var d=l;n.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){l=d.shift();try{p=l.verify(h)}catch(S){}}p||(c={message:"Certificate signature is invalid.",error:o.certificateError.bad_certificate})}null!==c||l&&!f||t.hasCertificate(h)||(c={message:"Certificate is not trusted.",error:o.certificateError.unknown_ca})}if(null===c&&l&&!h.isIssuer(l)&&(c={message:"Certificate issuer is invalid.",error:o.certificateError.bad_certificate}),null===c)for(var m={keyUsage:!0,basicConstraints:!0},y=0;null===c&&y<h.extensions.length;++y){var g=h.extensions[y];g.critical&&!(g.name in m)&&(c={message:"Certificate has an unsupported critical extension.",error:o.certificateError.unsupported_certificate})}if(null===c&&(!a||0===e.length&&(!l||f))){var b=h.getExtension("basicConstraints"),v=h.getExtension("keyUsage");if(null!==v&&(v.keyCertSign&&null!==b||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:o.certificateError.bad_certificate})),null!==c||null===b||b.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:o.certificateError.bad_certificate}),null===c&&null!==v&&"pathLenConstraint"in b)u-1>b.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:o.certificateError.bad_certificate})}var w=null===c||c.error,_=r.verify?r.verify(w,u,i):w;if(!0!==_)throw!0===w&&(c={message:"The application rejected the certificate.",error:o.certificateError.bad_certificate}),(_||0===_)&&("object"!==typeof _||n.util.isArray(_)?"string"===typeof _&&(c.error=_):(_.message&&(c.message=_.message),_.error&&(c.error=_.error))),c;c=null,a=!1,++u}while(e.length>0);return!0}},function(t,e,r){"use strict";e.PROTOCOL_ID="/multistream/1.0.0"},function(t,e){t.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}},,function(t,e){const r={},n=t=>{t.addEventListener("message",(e=>{n.dispatchEvent("message",t,e)})),t.port&&t.port.addEventListener("message",(e=>{n.dispatchEvent("message",t,e)}))};n.addEventListener=(t,e)=>{r[t]||(r[t]=[]),r[t].push(e)},n.removeEventListener=(t,e)=>{r[t]&&(r[t]=r[t].filter((t=>t===e)))},n.dispatchEvent=function(){const t=Array.prototype.slice.call(arguments),e=t.shift();r[e]&&r[e].forEach((e=>e.apply(null,t)))},t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(631),i=r(632),o=r(634),s=()=>{},a=new i.TimeoutError;e.default=class extends n{constructor(t){var e,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"===typeof(t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:o.default},t)).intervalCap&&t.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(r=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==r?r:"","` (").concat(typeof t.intervalCap,")"));if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(i=null===(n=t.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:"","` (").concat(typeof t.interval,")"));this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||0===t.interval,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=!0===t.throwOnTimeout,this._isPaused=!1===t.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(void 0===this._intervalId){const e=this._intervalEnd-t;if(!(e<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),e)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const e=this._queue.dequeue();return!!e&&(this.emit("active"),e(),t&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!("number"===typeof t&&t>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(t,"` (").concat(typeof t,")"));this._concurrency=t,this._processQueue()}async add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((r,n)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===e.timeout?t():i.default(Promise.resolve(t()),void 0===e.timeout?this._timeout:e.timeout,(()=>{(void 0===e.throwOnTimeout?this._throwOnTimeout:e.throwOnTimeout)&&n(a)}));r(await o)}catch(o){n(o)}this._next()}),e),this._tryToStartAnother(),this.emit("add")}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((t=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((t=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}}))}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}}},function(t,e,r){"use strict";const n=()=>{},i=Symbol.for("@libp2p/js-interfaces/topology");class o{constructor(t){let{min:e=0,max:r=1/0,handlers:i={}}=t;this.min=e,this.max=r,this._onConnect=i.onConnect||n,this._onDisconnect=i.onDisconnect||n,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[i](){return!0}static isTopology(t){return Boolean(t&&t[i])}async setRegistrar(t){this._registrar=t}disconnect(t){this._onDisconnect(t)}}t.exports=o},,function(t,e,r){(function(e){t.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof e||"object"!==typeof e.versions||!e.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}}).call(this,r(22))},function(t,e,r){"use strict";const n=1<<20;t.exports=t=>{t=t||n;const e=e=>{if(e.data&&e.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return t=>async function*(){for await(const r of t)Array.isArray(r)?r.forEach(e):e(r),yield r}()},t.exports.MAX_MSG_SIZE=n},function(t,e,r){"use strict";const n=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});e.MessageTypes=n,e.InitiatorMessageTypes=Object.freeze({NEW_STREAM:n.NEW_STREAM,MESSAGE:n.MESSAGE_INITIATOR,CLOSE:n.CLOSE_INITIATOR,RESET:n.RESET_INITIATOR}),e.ReceiverMessageTypes=Object.freeze({MESSAGE:n.MESSAGE_RECEIVER,CLOSE:n.CLOSE_RECEIVER,RESET:n.RESET_RECEIVER}),e.MessageTypeNames=Object.freeze(Object.entries(n).reduce(((t,e)=>(t[e[1]]=e[0],t)),{}))},,function(t,e,r){"use strict";const n="undefined"!==typeof navigator&&"ReactNative"===navigator.product;const i=self.URL,o=n?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"";t.exports={URLWithLegacySupport:class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;this.super=new i(t,e),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return i.createObjectURL(t)}static revokeObjectURL(t){i.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:o,format:function(t){if("string"===typeof t){return new i(t).toString()}if(!(t instanceof i)){const e=t.username&&t.password?"".concat(t.username,":").concat(t.password,"@"):"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",o=t.host||"",s=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"",h=t.path||u+a;return"".concat(i).concat(e||r).concat(o||s+n).concat(h).concat(c)}}}},function(t,e,r){"use strict";e.CODE_P2P=421,e.CODE_CIRCUIT=290,e.CODE_TCP=6,e.CODE_WS=477,e.CODE_WSS=478,e.CLOSE_TIMEOUT=2e3},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-pubsub-rpc"]||(n.roots["libp2p-pubsub-rpc"]={});a.RPC=function(){function t(t){if(this.subscriptions=[],this.msgs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.subscriptions=s.emptyArray,t.prototype.msgs=s.emptyArray,t.encode=function(t,e){if(e||(e=o.create()),null!=t.subscriptions&&t.subscriptions.length)for(var r=0;r<t.subscriptions.length;++r)a.RPC.SubOpts.encode(t.subscriptions[r],e.uint32(10).fork()).ldelim();if(null!=t.msgs&&t.msgs.length)for(r=0;r<t.msgs.length;++r)a.RPC.Message.encode(t.msgs[r],e.uint32(18).fork()).ldelim();return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.RPC;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.subscriptions&&n.subscriptions.length||(n.subscriptions=[]),n.subscriptions.push(a.RPC.SubOpts.decode(t,t.uint32()));break;case 2:n.msgs&&n.msgs.length||(n.msgs=[]),n.msgs.push(a.RPC.Message.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.RPC)return t;var e=new a.RPC;if(t.subscriptions){if(!Array.isArray(t.subscriptions))throw TypeError(".RPC.subscriptions: array expected");e.subscriptions=[];for(var r=0;r<t.subscriptions.length;++r){if("object"!==typeof t.subscriptions[r])throw TypeError(".RPC.subscriptions: object expected");e.subscriptions[r]=a.RPC.SubOpts.fromObject(t.subscriptions[r])}}if(t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".RPC.msgs: array expected");e.msgs=[];for(r=0;r<t.msgs.length;++r){if("object"!==typeof t.msgs[r])throw TypeError(".RPC.msgs: object expected");e.msgs[r]=a.RPC.Message.fromObject(t.msgs[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.subscriptions=[],r.msgs=[]),t.subscriptions&&t.subscriptions.length){r.subscriptions=[];for(var n=0;n<t.subscriptions.length;++n)r.subscriptions[n]=a.RPC.SubOpts.toObject(t.subscriptions[n],e)}if(t.msgs&&t.msgs.length){r.msgs=[];for(n=0;n<t.msgs.length;++n)r.msgs[n]=a.RPC.Message.toObject(t.msgs[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.SubOpts=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.subscribe=null,t.prototype.topicID=null,Object.defineProperty(t.prototype,"_subscribe",{get:s.oneOfGetter(e=["subscribe"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_topicID",{get:s.oneOfGetter(e=["topicID"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=o.create()),null!=t.subscribe&&Object.hasOwnProperty.call(t,"subscribe")&&e.uint32(8).bool(t.subscribe),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(18).string(t.topicID),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.RPC.SubOpts;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.subscribe=t.bool();break;case 2:n.topicID=t.string();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.RPC.SubOpts)return t;var e=new a.RPC.SubOpts;return null!=t.subscribe&&(e.subscribe=Boolean(t.subscribe)),null!=t.topicID&&(e.topicID=String(t.topicID)),e},t.toObject=function(t,e){e||(e={});var r={};return null!=t.subscribe&&t.hasOwnProperty("subscribe")&&(r.subscribe=t.subscribe,e.oneofs&&(r._subscribe="subscribe")),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.Message=function(){function t(t){if(this.topicIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.from=null,t.prototype.data=null,t.prototype.seqno=null,t.prototype.topicIDs=s.emptyArray,t.prototype.signature=null,t.prototype.key=null,Object.defineProperty(t.prototype,"_from",{get:s.oneOfGetter(e=["from"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_data",{get:s.oneOfGetter(e=["data"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_seqno",{get:s.oneOfGetter(e=["seqno"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:s.oneOfGetter(e=["signature"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:s.oneOfGetter(e=["key"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=o.create()),null!=t.from&&Object.hasOwnProperty.call(t,"from")&&e.uint32(10).bytes(t.from),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),null!=t.seqno&&Object.hasOwnProperty.call(t,"seqno")&&e.uint32(26).bytes(t.seqno),null!=t.topicIDs&&t.topicIDs.length)for(var r=0;r<t.topicIDs.length;++r)e.uint32(34).string(t.topicIDs[r]);return null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(50).bytes(t.key),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.RPC.Message;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.from=t.bytes();break;case 2:n.data=t.bytes();break;case 3:n.seqno=t.bytes();break;case 4:n.topicIDs&&n.topicIDs.length||(n.topicIDs=[]),n.topicIDs.push(t.string());break;case 5:n.signature=t.bytes();break;case 6:n.key=t.bytes();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.RPC.Message)return t;var e=new a.RPC.Message;if(null!=t.from&&("string"===typeof t.from?s.base64.decode(t.from,e.from=s.newBuffer(s.base64.length(t.from)),0):t.from.length&&(e.from=t.from)),null!=t.data&&("string"===typeof t.data?s.base64.decode(t.data,e.data=s.newBuffer(s.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),null!=t.seqno&&("string"===typeof t.seqno?s.base64.decode(t.seqno,e.seqno=s.newBuffer(s.base64.length(t.seqno)),0):t.seqno.length&&(e.seqno=t.seqno)),t.topicIDs){if(!Array.isArray(t.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");e.topicIDs=[];for(var r=0;r<t.topicIDs.length;++r)e.topicIDs[r]=String(t.topicIDs[r])}return null!=t.signature&&("string"===typeof t.signature?s.base64.decode(t.signature,e.signature=s.newBuffer(s.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),null!=t.key&&("string"===typeof t.key?s.base64.decode(t.key,e.key=s.newBuffer(s.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.topicIDs=[]),null!=t.from&&t.hasOwnProperty("from")&&(r.from=e.bytes===String?s.base64.encode(t.from,0,t.from.length):e.bytes===Array?Array.prototype.slice.call(t.from):t.from,e.oneofs&&(r._from="from")),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?s.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data,e.oneofs&&(r._data="data")),null!=t.seqno&&t.hasOwnProperty("seqno")&&(r.seqno=e.bytes===String?s.base64.encode(t.seqno,0,t.seqno.length):e.bytes===Array?Array.prototype.slice.call(t.seqno):t.seqno,e.oneofs&&(r._seqno="seqno")),t.topicIDs&&t.topicIDs.length){r.topicIDs=[];for(var n=0;n<t.topicIDs.length;++n)r.topicIDs[n]=t.topicIDs[n]}return null!=t.signature&&t.hasOwnProperty("signature")&&(r.signature=e.bytes===String?s.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature,e.oneofs&&(r._signature="signature")),null!=t.key&&t.hasOwnProperty("key")&&(r.key=e.bytes===String?s.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(r._key="key")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a},function(t,e,r){"use strict";const n=r(122),{toString:i}=r(29),{fromString:o}=r(24),s=r(23),{sha256:a}=r(72);t.exports={randomSeqno:()=>n(8),msgId:(t,e)=>{let r;r=t instanceof Uint8Array?s.createFromBytes(t).id:s.parse(t).id;const n=new Uint8Array(r.length+e.length);return n.set(r,0),n.set(e,r.length),n},noSignMsgId:t=>a.encode(t),anyMatch:(t,e)=>{let r;r=Array.isArray(e)?t=>e.indexOf(t)>-1:t=>e.has(t);for(const n of t)if(r(n))return!0;return!1},ensureArray:t=>Array.isArray(t)?t:[t],normalizeInRpcMessage:(t,e)=>{const r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=i(t.from,"base58btc")),e&&(r.receivedFrom=e),r},normalizeOutRpcMessage:t=>{const e=Object.assign({},t);return"string"===typeof t.from&&(e.from=o(t.from,"base58btc")),"string"===typeof t.data&&(e.data=o(t.data)),e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGossipPeers=void 0;const n=r(42);e.getGossipPeers=function(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;const o=t.topics.get(e);if(!o)return new Set;let s=[];return o.forEach((e=>{const r=t.peers.get(e);r&&n.hasGossipProtocol(r.protocol)&&i(e)&&s.push(e)})),s=n.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopicScoreParams=e.validatePeerScoreParams=e.createTopicScoreParams=e.createPeerScoreParams=e.defaultTopicScoreParams=e.defaultPeerScoreParams=void 0;const n=r(336),i=r(9);function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},e.defaultTopicScoreParams),t)}function s(t){if(t.topicWeight<0)throw i(new Error("invalid topic weight; must be >= 0"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0===t.timeInMeshQuantum)throw i(new Error("invalid TimeInMeshQuantum; must be non zero"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw i(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.timeInMeshWeight&&t.timeInMeshQuantum<=0)throw i(new Error("invalid TimeInMeshQuantum; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.timeInMeshWeight&&t.timeInMeshCap<=0)throw i(new Error("invalid TimeInMeshCap; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw i(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.firstMessageDeliveriesWeight&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw i(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.firstMessageDeliveriesWeight&&t.firstMessageDeliveriesCap<=0)throw i(new Error("invalid FirstMessageDeliveriesCap; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw i(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw i(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesCap<=0)throw i(new Error("invalid MeshMessageDeliveriesCap; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesThreshold<=0)throw i(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw i(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesActivation<1e3)throw i(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw i(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshFailurePenaltyWeight&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw i(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw i(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw i(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS)}e.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},e.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3},e.createPeerScoreParams=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign(Object.assign({},e.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce(((t,e)=>{let[r,n]=e;return t[r]=o(n),t}),{}):{}})},e.createTopicScoreParams=o,e.validatePeerScoreParams=function(t){for(const[r,o]of Object.entries(t.topics))try{s(o)}catch(e){throw i(new Error("invalid score parameters for topic ".concat(r,": ").concat(e.message)),n.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw i(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(null===t.appSpecificScore||void 0===t.appSpecificScore)throw i(new Error("missing application specific score function"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw i(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.IPColocationFactorWeight&&t.IPColocationFactorThreshold<1)throw i(new Error("invalid IPColocationFactorThreshold; must be at least 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw i(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.behaviourPenaltyWeight&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw i(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw i(new Error("invalid DecayInterval; must be at least 1s"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw i(new Error("invalid DecayToZero; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS)},e.validateTopicScoreParams=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERR_INVALID_PEER_SCORE_THRESHOLDS=e.ERR_INVALID_PEER_SCORE_PARAMS=void 0,e.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS",e.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o}));r(694);var n=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const i="binary";class o{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/xmtp/";this.keyPrefix=t}get(e){return n(this,void 0,void 0,(function*(){const r=localStorage.getItem(this.keyPrefix+e);return null===r?null:t.from(r,i)}))}set(t,e){return n(this,void 0,void 0,(function*(){return localStorage.setItem(this.keyPrefix+t,e.toString(i))}))}}}).call(this,r(19).Buffer)},function(t,e){},function(t,e){t.exports=function(){var t,e=Array.prototype.slice.call(arguments),r=null;"object"===typeof e[0]?(r=e.shift(),"string"===typeof(t=e.shift())&&(t=r[t])):t=e.shift();return function(n){t.apply(r,e.concat(n))}}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s}));var n=r(35),i=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const o="key_bundle";class s{constructor(t,e){this.signer=t,this.store=e}getStorageAddress(t){return i(this,void 0,void 0,(function*(){const e=yield this.signer.getAddress();return"".concat(e,"/").concat(t)}))}loadPrivateKeyBundle(){return i(this,void 0,void 0,(function*(){const t=yield this.store.get(yield this.getStorageAddress(o));return t?n.b.decode(this.signer,Uint8Array.from(t)):null}))}storePrivateKeyBundle(e){return i(this,void 0,void 0,(function*(){const r=yield this.getStorageAddress(o),n=yield e.encode(this.signer);yield this.store.set(r,t.from(n))}))}}}).call(this,r(19).Buffer)},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s}));var n=r(59),i=r(36),o=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class s{constructor(t){this.waku=t}get(e){return o(this,void 0,void 0,(function*(){const r=(yield this.waku.store.queryHistory([Object(i.d)(e)],{pageSize:1,pageDirection:n.a.FORWARD,callback:function(t){return Boolean(t[0].payload)}})).filter((t=>t.payload)).map((t=>t.payload));return r.length>0?t.from(r[0]):null}))}set(t,e){return o(this,void 0,void 0,(function*(){const r=Uint8Array.from(e);yield this.waku.lightPush.push(yield n.c.fromBytes(r,this.buildTopic(t)))}))}buildTopic(t){return Object(i.d)(t)}}}).call(this,r(19).Buffer)},,function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t.sha256="sha256",t.sha512="sha512"}(n||(n={}))},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return q}));var n=r(8),i=r.n(n),o=r(39),s=r.n(o);"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function a(t,e,r){return r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===e||null===e)&&r.path)}},t(r,r.exports),r.exports}var c=u;function u(t,e){if(!t)throw new Error(e||"Assertion failed")}u.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var h=a((function(t,e){var r=e;function n(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",r=0;r<t.length;r++)e+=n(t[r].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!==typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(t,e){return"hex"===e?i(t):t}})),l=a((function(t,e){var r=e;r.assert=c,r.toArray=h.toArray,r.zero2=h.zero2,r.toHex=h.toHex,r.encode=h.encode,r.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},r.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var s,a,c=t.andln(3)+i&3,u=e.andln(3)+o&3;3===c&&(c=-1),3===u&&(u=-1),s=0===(1&c)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==u?c:-c,r[0].push(s),a=0===(1&u)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==c?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},r.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(t){return"string"===typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new i.a(t,"hex","le")}})),f=l.getNAF,d=l.getJSF,p=l.assert;function m(t,e){this.type=t,this.p=new i.a(e.p,16),this.red=e.prime?i.a.red(e.prime):i.a.mont(this.p),this.zero=new i.a(0).toRed(this.red),this.one=new i.a(1).toRed(this.red),this.two=new i.a(2).toRed(this.red),this.n=e.n&&new i.a(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var y=m;function g(t,e){this.curve=t,this.type=e,this.precomputed=null}m.prototype.point=function(){throw new Error("Not implemented")},m.prototype.validate=function(){throw new Error("Not implemented")},m.prototype._fixedNafMul=function(t,e){p(t.precomputed);var r=t._getDoubles(),n=f(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var c=o+r.step-1;c>=o;c--)s=(s<<1)+n[c];a.push(s)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<a.length;o++)(s=a[o])===l?h=h.mixedAdd(r.points[o]):s===-l&&(h=h.mixedAdd(r.points[o].neg()));u=u.add(h)}return u.toP()},m.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=f(e,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var c=0;a>=0&&0===o[a];a--)c++;if(a>=0&&c++,s=s.dblp(c),a<0)break;var u=o[a];p(0!==u),s="affine"===t.type?u>0?s.mixedAdd(i[u-1>>1]):s.mixedAdd(i[-u-1>>1].neg()):u>0?s.add(i[u-1>>1]):s.add(i[-u-1>>1].neg())}return"affine"===t.type?s.toP():s},m.prototype._wnafMulAdd=function(t,e,r,n,i){var o,s,a,c=this._wnafT1,u=this._wnafT2,h=this._wnafT3,l=0;for(o=0;o<n;o++){var p=(a=e[o])._getNAFPoints(t);c[o]=p.wnd,u[o]=p.points}for(o=n-1;o>=1;o-=2){var m=o-1,y=o;if(1===c[m]&&1===c[y]){var g=[e[m],null,null,e[y]];0===e[m].y.cmp(e[y].y)?(g[1]=e[m].add(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg())):0===e[m].y.cmp(e[y].y.redNeg())?(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].add(e[y].neg())):(g[1]=e[m].toJ().mixedAdd(e[y]),g[2]=e[m].toJ().mixedAdd(e[y].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],v=d(r[m],r[y]);for(l=Math.max(v[0].length,l),h[m]=new Array(l),h[y]=new Array(l),s=0;s<l;s++){var w=0|v[0][s],_=0|v[1][s];h[m][s]=b[3*(w+1)+(_+1)],h[y][s]=0,u[m]=g}}else h[m]=f(r[m],c[m],this._bitLength),h[y]=f(r[y],c[y],this._bitLength),l=Math.max(h[m].length,l),l=Math.max(h[y].length,l)}var S=this.jpoint(null,null,null),E=this._wnafT4;for(o=l;o>=0;o--){for(var A=0;o>=0;){var M=!0;for(s=0;s<n;s++)E[s]=0|h[s][o],0!==E[s]&&(M=!1);if(!M)break;A++,o--}if(o>=0&&A++,S=S.dblp(A),o<0)break;for(s=0;s<n;s++){var I=E[s];0!==I&&(I>0?a=u[s][I-1>>1]:I<0&&(a=u[s][-I-1>>1].neg()),S="affine"===a.type?S.mixedAdd(a):S.add(a))}}for(o=0;o<n;o++)u[o]=null;return i?S:S.toP()},m.BasePoint=g,g.prototype.eq=function(){throw new Error("Not implemented")},g.prototype.validate=function(){return this.curve.validate(this)},m.prototype.decodePoint=function(t,e){t=l.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1===2*r)return 6===t[0]?p(t[t.length-1]%2===0):7===t[0]&&p(t[t.length-1]%2===1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},g.prototype.encodeCompressed=function(t){return this.encode(t,!0)},g.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},g.prototype.encode=function(t,e){return l.encode(this._encode(e),t)},g.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},g.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},g.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},g.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},g.prototype._getBeta=function(){return null},g.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var b=a((function(t){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),v=l.assert;function w(t){y.call(this,"short",t),this.a=new i.a(t.a,16).toRed(this.red),this.b=new i.a(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}b(w,y);var _=w;function S(t,e,r,n){y.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i.a(e,16),this.y=new i.a(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function E(t,e,r,n){y.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i.a(0)):(this.x=new i.a(e,16),this.y=new i.a(r,16),this.z=new i.a(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}w.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new i.a(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new i.a(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?r=o[0]:(r=o[1],v(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new i.a(t.a,16),b:new i.a(t.b,16)}})):this._getEndoBasis(r)}}},w.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.a.mont(t),r=new i.a(2).toRed(e).redInvm(),n=r.redNeg(),o=new i.a(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},w.prototype._getEndoBasis=function(t){for(var e,r,n,o,s,a,c,u,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i.a(1),m=new i.a(0),y=new i.a(0),g=new i.a(1),b=0;0!==f.cmpn(0);){var v=d.div(f);u=d.sub(v.mul(f)),h=y.sub(v.mul(p));var w=g.sub(v.mul(m));if(!n&&u.cmp(l)<0)e=c.neg(),r=p,n=u.neg(),o=h;else if(n&&2===++b)break;c=u,d=f,f=u,y=p,p=h,g=m,m=w}s=u.neg(),a=h;var _=n.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(_)>=0&&(s=e,a=r),n.negative&&(n=n.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:o},{a:s,b:a}]},w.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:t.sub(s).sub(a),k2:c.add(u).neg()}},w.prototype.pointFromX=function(t,e){(t=new i.a(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},w.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},w.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),h=0;h<2*o;h++)n[h]=null,i[h]=null;return u},b(S,y.BasePoint),w.prototype.point=function(t,e,r){return new S(this,t,e,r)},w.prototype.pointFromJSON=function(t,e){return S.fromJSON(this,t,e)},S.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},S.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},S.fromJSON=function(t,e,r){"string"===typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},S.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},S.prototype.isInfinity=function(){return this.inf},S.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},S.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},S.prototype.getX=function(){return this.x.fromRed()},S.prototype.getY=function(){return this.y.fromRed()},S.prototype.mul=function(t){return t=new i.a(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},S.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},S.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},S.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},S.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},S.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},b(E,y.BasePoint),w.prototype.jpoint=function(t,e,r){return new E(this,t,e,r)},E.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},E.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},E.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),f=c.redSqr().redIAdd(h).redISub(l).redISub(l),d=c.redMul(l.redISub(f)).redISub(o.redMul(h)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},E.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),h=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(h).redISub(h),f=a.redMul(h.redISub(l)).redISub(i.redMul(u)),d=this.z.redMul(s);return this.curve.jpoint(l,f,d)},E.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(e=0;e<t;e++){var h=o.redSqr(),l=u.redSqr(),f=l.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),p=o.redMul(l),m=d.redSqr().redISub(p.redAdd(p)),y=p.redISub(m),g=d.redMul(y);g=g.redIAdd(g).redISub(f);var b=u.redMul(a);e+1<t&&(c=c.redMul(f)),o=m,a=b,u=g}return this.curve.jpoint(o,u.redMul(i),a)},E.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},E.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=c,e=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(h).redISub(f);d=d.redIAdd(d);var p=h.redAdd(h).redIAdd(h),m=p.redSqr(),y=f.redIAdd(f);y=(y=y.redIAdd(y)).redIAdd(y),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},E.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);t=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var y=l.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),e=d.redMul(p.redISub(t)).redISub(y)}return this.curve.jpoint(t,e,r)},E.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),c=e.redAdd(e),u=(c=c.redIAdd(c)).redMul(s),h=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(h),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(h,d,p)},E.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),h=e.redMul(u);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(a).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,d)},E.prototype.mul=function(t,e){return t=new i.a(t,e),this.curve._wnafMul(this,t)},E.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},E.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},E.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},E.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var A=a((function(t,e){var r=e;r.base=y,r.short=_,r.mont=null,r.edwards=null})),M=a((function(t,e){var r,n=e,i=l.assert;function o(t){"short"===t.type?this.curve=new A.short(t):"edwards"===t.type?this.curve=new A.edwards(t):this.curve=new A.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new o(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.a.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(c){r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function I(t){if(!(this instanceof I))return new I(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=h.toArray(t.entropy,t.entropyEnc||"hex"),r=h.toArray(t.nonce,t.nonceEnc||"hex"),n=h.toArray(t.pers,t.persEnc||"hex");c(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var R=I;I.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},I.prototype._hmac=function(){return new s.a.hmac(this.hash,this.K)},I.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},I.prototype.reseed=function(t,e,r,n){"string"!==typeof e&&(n=r,r=e,e=null),t=h.toArray(t,e),r=h.toArray(r,n),c(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},I.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof e&&(n=r,r=e,e=null),r&&(r=h.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(r),this._reseed++,h.encode(o,e)};var T=l.assert;function C(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var O=C;C.fromPublic=function(t,e,r){return e instanceof C?e:new C(t,{pub:e,pubEnc:r})},C.fromPrivate=function(t,e,r){return e instanceof C?e:new C(t,{priv:e,privEnc:r})},C.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},C.prototype.getPublic=function(t,e){return"string"===typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},C.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},C.prototype._importPrivate=function(t,e){this.priv=new i.a(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},C.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?T(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||T(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},C.prototype.derive=function(t){return t.validate()||T(t.validate(),"public point not validated"),t.mul(this.priv).getX()},C.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},C.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},C.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var k=l.assert;function P(t,e){if(t instanceof P)return t;this._importDER(t,e)||(k(t.r&&t.s,"Signature without r or s"),this.r=new i.a(t.r,16),this.s=new i.a(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var N=P;function D(){this.place=0}function B(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function x(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function L(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}P.prototype._importDER=function(t,e){t=l.toArray(t,e);var r=new D;if(48!==t[r.place++])return!1;var n=B(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var o=B(t,r);if(!1===o)return!1;var s=t.slice(r.place,o+r.place);if(r.place+=o,2!==t[r.place++])return!1;var a=B(t,r);if(!1===a)return!1;if(t.length!==a+r.place)return!1;var c=t.slice(r.place,a+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}return this.r=new i.a(s),this.s=new i.a(c),this.recoveryParam=null,!0},P.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=x(e),r=x(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];L(n,e.length),(n=n.concat(e)).push(2),L(n,r.length);var i=n.concat(r),o=[48];return L(o,i.length),o=o.concat(i),l.encode(o,t)};var U=function(){throw new Error("unsupported")},j=l.assert;function K(t){if(!(this instanceof K))return new K(t);"string"===typeof t&&(j(Object.prototype.hasOwnProperty.call(M,t),"Unknown curve "+t),t=M[t]),t instanceof M.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var F=K;K.prototype.keyPair=function(t){return new O(this,t)},K.prototype.keyFromPrivate=function(t,e){return O.fromPrivate(this,t,e)},K.prototype.keyFromPublic=function(t,e){return O.fromPublic(this,t,e)},K.prototype.genKeyPair=function(t){t||(t={});for(var e=new R({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||U(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new i.a(2));;){var o=new i.a(e.generate(r));if(!(o.cmp(n)>0))return o.iaddn(1),this.keyFromPrivate(o)}},K.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},K.prototype.sign=function(t,e,r,n){"object"===typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new i.a(t,16));for(var o=this.n.byteLength(),s=e.getPrivate().toArray("be",o),a=t.toArray("be",o),c=new R({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new i.a(1)),h=0;;h++){var l=n.k?n.k(h):new i.a(c.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var f=this.g.mul(l);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var m=l.invm(this.n).mul(p.mul(e.getPrivate()).iadd(t));if(0!==(m=m.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),y^=1),new N({r:p,s:m,recoveryParam:y})}}}}}},K.prototype.verify=function(t,e,r,n){t=this._truncateToN(new i.a(t,16)),r=this.keyFromPublic(r,n);var o=(e=new N(e,"hex")).r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,c=s.invm(this.n),u=c.mul(t).umod(this.n),h=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),h)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(u,r.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},K.prototype.recoverPubKey=function(t,e,r,n){j((3&r)===r,"The recovery param is more than two bits"),e=new N(e,n);var o=this.n,s=new i.a(t),a=e.r,c=e.s,u=1&r,h=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");a=h?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var l=e.r.invm(o),f=o.sub(s).mul(l).umod(o),d=c.mul(l).umod(o);return this.g.mulAdd(f,a,d)},K.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new N(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var q=a((function(t,e){var r=e;r.version="6.5.4",r.utils=l,r.rand=function(){throw new Error("unsupported")},r.curve=A,r.curves=M,r.ec=F,r.eddsa=null})).ec}).call(this,r(21))},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="random/5.6.1"},function(t,e,r){(function(e,n){var i;!function(){"use strict";var o="object"===typeof window?window:{};!o.HI_BASE32_NO_NODE_JS&&"object"===typeof e&&e.versions&&e.versions.node&&(o=n);var s=!o.HI_BASE32_NO_COMMON_JS&&"object"===typeof t&&t.exports,a=r(270),c="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),u={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},h=[0,0,0,0,0,0,0,0],l=function(t,e){e.length>10&&(e="..."+e.substr(-10));var r=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+t+" bytes: "+e+" <-");throw r.position=t,r},f=function(t){if(""===t)return[];if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");for(var e,r,n,i,o,s,a,c,h=[],l=0,f=(t=t.replace(/=/g,"")).length,d=0,p=f>>3<<3;d<p;)e=u[t.charAt(d++)],r=u[t.charAt(d++)],n=u[t.charAt(d++)],i=u[t.charAt(d++)],o=u[t.charAt(d++)],s=u[t.charAt(d++)],a=u[t.charAt(d++)],c=u[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|o>>>1),h[l++]=255&(o<<7|s<<2|a>>>3),h[l++]=255&(a<<5|c);var m=f-p;return 2===m?(e=u[t.charAt(d++)],r=u[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2)):4===m?(e=u[t.charAt(d++)],r=u[t.charAt(d++)],n=u[t.charAt(d++)],i=u[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4)):5===m?(e=u[t.charAt(d++)],r=u[t.charAt(d++)],n=u[t.charAt(d++)],i=u[t.charAt(d++)],o=u[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|o>>>1)):7===m&&(e=u[t.charAt(d++)],r=u[t.charAt(d++)],n=u[t.charAt(d++)],i=u[t.charAt(d++)],o=u[t.charAt(d++)],s=u[t.charAt(d++)],a=u[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|o>>>1),h[l++]=255&(o<<7|s<<2|a>>>3)),h},d=function(t,e){if(!e)return function(t){for(var e,r,n="",i=t.length,o=0,s=0;o<i;)if((e=t[o++])<=127)n+=String.fromCharCode(e);else{e>191&&e<=223?(r=31&e,s=1):e<=239?(r=15&e,s=2):e<=247?(r=7&e,s=3):l(o,n);for(var a=0;a<s;++a)((e=t[o++])<128||e>191)&&l(o,n),r<<=6,r+=63&e;r>=55296&&r<=57343&&l(o,n),r>1114111&&l(o,n),r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+(1023&r)))}return n}(f(t));if(""===t)return"";if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");var r,n,i,o,s,a,c,h,d="",p=t.indexOf("=");-1===p&&(p=t.length);for(var m=0,y=p>>3<<3;m<y;)r=u[t.charAt(m++)],n=u[t.charAt(m++)],i=u[t.charAt(m++)],o=u[t.charAt(m++)],s=u[t.charAt(m++)],a=u[t.charAt(m++)],c=u[t.charAt(m++)],h=u[t.charAt(m++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))+String.fromCharCode(255&(s<<7|a<<2|c>>>3))+String.fromCharCode(255&(c<<5|h));var g=p-y;return 2===g?(r=u[t.charAt(m++)],n=u[t.charAt(m++)],d+=String.fromCharCode(255&(r<<3|n>>>2))):4===g?(r=u[t.charAt(m++)],n=u[t.charAt(m++)],i=u[t.charAt(m++)],o=u[t.charAt(m++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))):5===g?(r=u[t.charAt(m++)],n=u[t.charAt(m++)],i=u[t.charAt(m++)],o=u[t.charAt(m++)],s=u[t.charAt(m++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))):7===g&&(r=u[t.charAt(m++)],n=u[t.charAt(m++)],i=u[t.charAt(m++)],o=u[t.charAt(m++)],s=u[t.charAt(m++)],a=u[t.charAt(m++)],c=u[t.charAt(m++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))+String.fromCharCode(255&(s<<7|a<<2|c>>>3))),d},p={encode:function(t,e){var r="string"!==typeof t;return r&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),r?function(t){for(var e,r,n,i,o,s="",a=t.length,u=0,h=5*parseInt(a/5);u<h;)e=t[u++],r=t[u++],n=t[u++],i=t[u++],o=t[u++],s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[31&(i<<3|o>>>5)]+c[31&o];var l=a-h;return 1===l?(e=t[u],s+=c[e>>>3]+c[e<<2&31]+"======"):2===l?(e=t[u++],r=t[u],s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[r<<4&31]+"===="):3===l?(e=t[u++],r=t[u++],n=t[u],s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[n<<1&31]+"==="):4===l&&(e=t[u++],r=t[u++],n=t[u++],i=t[u],s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[i<<3&31]+"="),s}(t):e?function(t){for(var e,r,n,i,o,s="",a=t.length,u=0,h=5*parseInt(a/5);u<h;)e=t.charCodeAt(u++),r=t.charCodeAt(u++),n=t.charCodeAt(u++),i=t.charCodeAt(u++),o=t.charCodeAt(u++),s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[31&(i<<3|o>>>5)]+c[31&o];var l=a-h;return 1===l?(e=t.charCodeAt(u),s+=c[e>>>3]+c[e<<2&31]+"======"):2===l?(e=t.charCodeAt(u++),r=t.charCodeAt(u),s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[r<<4&31]+"===="):3===l?(e=t.charCodeAt(u++),r=t.charCodeAt(u++),n=t.charCodeAt(u),s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[n<<1&31]+"==="):4===l&&(e=t.charCodeAt(u++),r=t.charCodeAt(u++),n=t.charCodeAt(u++),i=t.charCodeAt(u),s+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[i<<3&31]+"="),s}(t):function(t){var e,r,n,i,o,s,a,u=!1,l="",f=0,d=0,p=t.length;if(""===t)return l;do{for(h[0]=h[5],h[1]=h[6],h[2]=h[7],a=d;f<p&&a<5;++f)(s=t.charCodeAt(f))<128?h[a++]=s:s<2048?(h[a++]=192|s>>6,h[a++]=128|63&s):s<55296||s>=57344?(h[a++]=224|s>>12,h[a++]=128|s>>6&63,h[a++]=128|63&s):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++f)),h[a++]=240|s>>18,h[a++]=128|s>>12&63,h[a++]=128|s>>6&63,h[a++]=128|63&s);d=a-5,f===p&&++f,f>p&&a<6&&(u=!0),e=h[0],a>4?(r=h[1],n=h[2],i=h[3],o=h[4],l+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[31&(i<<3|o>>>5)]+c[31&o]):1===a?l+=c[e>>>3]+c[e<<2&31]+"======":2===a?(r=h[1],l+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[r<<4&31]+"===="):3===a?(r=h[1],n=h[2],l+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[n<<1&31]+"==="):(r=h[1],n=h[2],i=h[3],l+=c[e>>>3]+c[31&(e<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[i<<3&31]+"=")}while(!u);return l}(t)},decode:d};d.asBytes=f,s?t.exports=p:(o.base32=p,a&&(void 0===(i=function(){return p}.call(p,r,p,t))||(t.exports=i)))}()}).call(this,r(22),r(21))},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.NOISE=void 0;const o=r(286);i(r(286),e),e.NOISE=new o.Noise},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p"),{error:n("libp2p:err")}),{EventEmitter:o}=r(33),s=r(9),a=r(23),{Multiaddr:c}=r(11),{MemoryDatastore:u}=r(544),h=r(548),l=r(551),f=r(303),{validate:d}=r(553),{codes:p,messages:m}=r(27),y=r(573),g=r(574),b=r(577),v=r(579),w=r(583),_=r(585),S=r(593),E=r(605),A=r(308),M=r(611),I=r(620),R=r(637),T=r(638),C=r(639),O=r(641),k=r(192),P=r(645),{updateSelfPeerRecord:N}=r(309);class D extends o{static async create(t){if(t.peerId)return new D(t);const e=await a.create();return t.peerId=e,new D(t)}constructor(t){if(super(),this._options=d(t),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this._options.metrics.enabled){const t=new E({...this._options.metrics});this.metrics=t}if(this.connectionGater={denyDialPeer:async()=>Promise.resolve(!1),denyDialMultiaddr:async()=>Promise.resolve(!1),denyInboundConnection:async()=>Promise.resolve(!1),denyOutboundConnection:async()=>Promise.resolve(!1),denyInboundEncryptedConnection:async()=>Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>Promise.resolve(!1),denyInboundUpgradedConnection:async()=>Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>Promise.resolve(!1),filterMultiaddrForPeer:async()=>Promise.resolve(!0),...this._options.connectionGater},this.peerStore=new I({peerId:this.peerId,datastore:this.datastore&&this._options.peerStore.persistence?this.datastore:new u,addressFilter:this.connectionGater.filterMultiaddrForPeer}),this.addresses=this._options.addresses,this.addressManager=new y(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",(()=>{N(this).catch((t=>{i.error("Error updating self peer record",t)}))})),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new g(this,{...this._options.connectionManager}),this._autodialler=new b(this,{enabled:this._config.peerDiscovery.autoDial,minConnections:this._options.connectionManager.minConnections,autoDialInterval:this._options.connectionManager.autoDialInterval}),this._options.keychain&&this._options.keychain.datastore){i("creating keychain");const t=S.generateOptions();this.keychain=new S(this._options.keychain.datastore,{...t,...this._options.keychain}),i("keychain constructed")}if(this.upgrader=new M({connectionGater:this.connectionGater,localPeer:this.peerId,metrics:this.metrics,onConnection:t=>this.connectionManager.onConnect(t),onConnectionEnd:t=>this.connectionManager.onDisconnect(t)}),this.transportManager=new A({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new P({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager,...this._options.config.nat}),this.registrar=new T({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw s(new Error(m.CONN_ENCRYPTION_REQUIRED),p.CONN_ENCRYPTION_REQUIRED);if(this._modules.connEncryption.forEach((t=>{this.upgrader.cryptos.set(t.protocol,t)})),this.dialer=new _({transportManager:this.transportManager,connectionGater:this.connectionGater,peerStore:this.peerStore,metrics:this.metrics,...this._options.dialer}),this._modules.transport.forEach((t=>{const e=t.prototype[Symbol.toStringTag],r=this._config.transport[e];this.transportManager.add(e,t,r)})),this._config.relay.enabled&&(this.transportManager.add(v.prototype[Symbol.toStringTag],v),this.relay=new w(this)),this._modules.streamMuxer){this._modules.streamMuxer.forEach((t=>{this.upgrader.muxers.set(t.multicodec,t)})),this.identifyService=new C({libp2p:this})}if(this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(void 0!==globalThis.process&&globalThis.process.env&&globalThis.process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){const t=this._modules.dht;this._dht=t.create({libp2p:this,...this._config.dht})}if(this._modules.pubsub){const t=this._modules.pubsub;this.pubsub=R(t,this,this._config.pubsub)}this.peerRouting=new h(this),this.contentRouting=new l(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this),this.fetchService=new O(this),this.pingService=new k(this)}emit(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return"error"!==t||this._events.error?super.emit(t,...r):(i.error(r),!1)}async start(){i("libp2p is starting"),this.identifyService&&await this.handle(Object.values(C.getProtocolStr(this)),this.identifyService.handleMessage),this.fetchService&&await this.handle(O.PROTOCOL,this.fetchService.handleMessage),this.pingService&&await this.handle(k.getProtocolStr(this),this.pingService.handleMessage);try{await this._onStarting(),await this._onDidStart(),i("libp2p has started")}catch(t){throw this.emit("error",t),i.error("An error occurred starting libp2p",t),await this.stop(),t}}async stop(){i("libp2p is stopping");try{this._isStarted=!1,this.identifyService&&await this.identifyService.stop(),this.relay&&this.relay.stop(),this.peerRouting.stop(),await this._autodialler.stop(),await(this._dht&&this._dht.stop());for(const t of this._discovery.values())t.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),(t=>t.stop()))),this._discovery=new Map,await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),await this.unhandle(O.PROTOCOL),await this.unhandle(k.getProtocolStr(this)),this.dialer.destroy()}catch(t){t&&(i.error(t),this.emit("error",t))}i("libp2p has stopped")}async loadKeychain(){if(this.keychain)try{await this.keychain.findKeyByName("self")}catch(t){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(t,e){return this._dial(t,e)}async dialProtocol(t,e,r){if(!e||!e.length)throw s(new Error("no protocols were provided to open a stream"),p.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this._dial(t,r)).newStream(e)}async _dial(t,e){const{id:r,multiaddrs:n}=f(t);if(r.equals(this.peerId))throw s(new Error("Cannot dial self"),p.ERR_DIALED_SELF);let i=this.connectionManager.get(r);return i?n&&await this.peerStore.addressBook.add(r,n):i=await this.dialer.connectToPeer(t,e),i}get multiaddrs(){let t=this.addressManager.getAnnounceAddrs().map((t=>t.toString()));t.length||(t=this.transportManager.getAddrs().map((t=>t.toString()))),t=t.concat(this.addressManager.getObservedAddrs().map((t=>t.toString())));const e=this._options.addresses.announceFilter,r=new Set(t);return e(Array.from(r).map((t=>new c(t))))}async hangUp(t){const{id:e}=f(t),r=this.connectionManager.connections.get(e.toB58String());r&&await Promise.all(r.map((t=>t.close())))}fetch(t,e){return this.fetchService.fetch(t,e)}ping(t){const{id:e,multiaddrs:r}=f(t);return r?this.pingService.ping(r[0]):this.pingService.ping(e)}async handle(t,e){(t=Array.isArray(t)?t:[t]).forEach((t=>{this.upgrader.protocols.set(t,e)})),await this.peerStore.protoBook.add(this.peerId,t)}async unhandle(t){(t=Array.isArray(t)?t:[t]).forEach((t=>{this.upgrader.protocols.delete(t)})),await this.peerStore.protoBook.remove(this.peerId,t)}async _onStarting(){const t=this.addressManager.getListenAddrs();await this.transportManager.listen(t),this.natManager.start(),this._config.pubsub.enabled&&this.pubsub&&await this.pubsub.start(),this._config.dht.enabled&&(this._dht&&await this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start(),this.identifyService&&await this.identifyService.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",(t=>{this.emit("peer:discovery",t),this._maybeConnect(t).catch((t=>{i.error(t)}))}));for await(const t of this.peerStore.getPeers())this.emit("peer:discovery",t.id);this.connectionManager.start(),await this._autodialler.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(t){t.id.toB58String()!==this.peerId.toB58String()?(t.multiaddrs&&this.peerStore.addressBook.add(t.id,t.multiaddrs).catch((t=>i.error(t))),t.protocols&&this.peerStore.protoBook.set(t.id,t.protocols).catch((t=>i.error(t)))):i.error(new Error(p.ERR_DISCOVERED_SELF))}async _maybeConnect(t){if(!0===this._config.peerDiscovery.autoDial&&!this.connectionManager.get(t)){if((this._options.connectionManager.minConnections||0)>this.connectionManager.size){i("connecting to discovered peer %s",t.toB58String());try{await this.dialer.connectToPeer(t)}catch(e){i.error("could not connect to discovered peer ".concat(t.toB58String()," with ").concat(e))}}}}async _setupPeerDiscovery(){const t=t=>{let e={enabled:!0};if(t.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[t.tag]&&(e={...e,...this._config.peerDiscovery[t.tag]}),e.enabled&&!this._discovery.has(t.tag)){let r;r="function"===typeof t?new t(Object.assign({},e,{peerId:this.peerId,libp2p:this})):t,r.on("peer",this._onDiscoveryPeer),this._discovery.set(t.tag,r)}};for(const e of this._modules.peerDiscovery||[])t(e);for(const e of this.transportManager.getTransports())e.discovery&&t(e.discovery);await Promise.all(Array.from(this._discovery.values(),(t=>t.start())))}}t.exports=D},function(t,e,r){"use strict";t.exports=r(654)},function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"protobufPackage",(function(){return c})),r.d(e,"PagingInfo_Direction",(function(){return u})),r.d(e,"pagingInfo_DirectionFromJSON",(function(){return l})),r.d(e,"pagingInfo_DirectionToJSON",(function(){return f})),r.d(e,"HistoryResponse_Error",(function(){return h})),r.d(e,"historyResponse_ErrorFromJSON",(function(){return d})),r.d(e,"historyResponse_ErrorToJSON",(function(){return p})),r.d(e,"Index",(function(){return y})),r.d(e,"PagingInfo",(function(){return b})),r.d(e,"ContentFilter",(function(){return v})),r.d(e,"HistoryQuery",(function(){return w})),r.d(e,"HistoryResponse",(function(){return _})),r.d(e,"HistoryRPC",(function(){return S}));var n=r(6),i=r.n(n),o=r(2),s=r.n(o),a=r(26);const c="waku.v2.store.v2beta3";var u,h;function l(t){switch(t){case 0:case"DIRECTION_BACKWARD_UNSPECIFIED":return u.DIRECTION_BACKWARD_UNSPECIFIED;case 1:case"DIRECTION_FORWARD":return u.DIRECTION_FORWARD;default:return u.UNRECOGNIZED}}function f(t){switch(t){case u.DIRECTION_BACKWARD_UNSPECIFIED:return"DIRECTION_BACKWARD_UNSPECIFIED";case u.DIRECTION_FORWARD:return"DIRECTION_FORWARD";default:return"UNKNOWN"}}function d(t){switch(t){case 0:case"ERROR_NONE_UNSPECIFIED":return h.ERROR_NONE_UNSPECIFIED;case 1:case"ERROR_INVALID_CURSOR":return h.ERROR_INVALID_CURSOR;default:return h.UNRECOGNIZED}}function p(t){switch(t){case h.ERROR_NONE_UNSPECIFIED:return"ERROR_NONE_UNSPECIFIED";case h.ERROR_INVALID_CURSOR:return"ERROR_INVALID_CURSOR";default:return"UNKNOWN"}}function m(){return{digest:new Uint8Array,receivedTime:0,senderTime:0}}!function(t){t[t.DIRECTION_BACKWARD_UNSPECIFIED=0]="DIRECTION_BACKWARD_UNSPECIFIED",t[t.DIRECTION_FORWARD=1]="DIRECTION_FORWARD",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED"}(u||(u={})),function(t){t[t.ERROR_NONE_UNSPECIFIED=0]="ERROR_NONE_UNSPECIFIED",t[t.ERROR_INVALID_CURSOR=1]="ERROR_INVALID_CURSOR",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED"}(h||(h={}));const y={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return 0!==t.digest.length&&e.uint32(10).bytes(t.digest),0!==t.receivedTime&&e.uint32(17).double(t.receivedTime),0!==t.senderTime&&e.uint32(25).double(t.senderTime),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=m();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.digest=r.bytes();break;case 2:i.receivedTime=r.double();break;case 3:i.senderTime=r.double();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({digest:R(t.digest)?M(t.digest):new Uint8Array,receivedTime:R(t.receivedTime)?Number(t.receivedTime):0,senderTime:R(t.senderTime)?Number(t.senderTime):0}),toJSON(t){const e={};return void 0!==t.digest&&(e.digest=function(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return I(e.join(""))}(void 0!==t.digest?t.digest:new Uint8Array)),void 0!==t.receivedTime&&(e.receivedTime=t.receivedTime),void 0!==t.senderTime&&(e.senderTime=t.senderTime),e},fromPartial(t){var e,r,n;const i=m();return i.digest=null!==(e=t.digest)&&void 0!==e?e:new Uint8Array,i.receivedTime=null!==(r=t.receivedTime)&&void 0!==r?r:0,i.senderTime=null!==(n=t.senderTime)&&void 0!==n?n:0,i}};function g(){return{pageSize:i.a.UZERO,cursor:void 0,direction:0}}const b={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return t.pageSize.isZero()||e.uint32(8).uint64(t.pageSize),void 0!==t.cursor&&y.encode(t.cursor,e.uint32(18).fork()).ldelim(),0!==t.direction&&e.uint32(24).int32(t.direction),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=g();for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.pageSize=r.uint64();break;case 2:i.cursor=y.decode(r,r.uint32());break;case 3:i.direction=r.int32();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({pageSize:R(t.pageSize)?i.a.fromString(t.pageSize):i.a.UZERO,cursor:R(t.cursor)?y.fromJSON(t.cursor):void 0,direction:R(t.direction)?l(t.direction):0}),toJSON(t){const e={};return void 0!==t.pageSize&&(e.pageSize=(t.pageSize||i.a.UZERO).toString()),void 0!==t.cursor&&(e.cursor=t.cursor?y.toJSON(t.cursor):void 0),void 0!==t.direction&&(e.direction=f(t.direction)),e},fromPartial(t){var e;const r=g();return r.pageSize=void 0!==t.pageSize&&null!==t.pageSize?i.a.fromValue(t.pageSize):i.a.UZERO,r.cursor=void 0!==t.cursor&&null!==t.cursor?y.fromPartial(t.cursor):void 0,r.direction=null!==(e=t.direction)&&void 0!==e?e:0,r}};const v={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return""!==t.contentTopic&&e.uint32(10).string(t.contentTopic),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={contentTopic:""};for(;r.pos<n;){const t=r.uint32();if(t>>>3===1)i.contentTopic=r.string();else r.skipType(7&t)}return i},fromJSON:t=>({contentTopic:R(t.contentTopic)?String(t.contentTopic):""}),toJSON(t){const e={};return void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),e},fromPartial(t){var e;const r={contentTopic:""};return r.contentTopic=null!==(e=t.contentTopic)&&void 0!==e?e:"",r}};const w={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();void 0!==t.pubSubTopic&&e.uint32(18).string(t.pubSubTopic);for(const r of t.contentFilters)v.encode(r,e.uint32(26).fork()).ldelim();return void 0!==t.pagingInfo&&b.encode(t.pagingInfo,e.uint32(34).fork()).ldelim(),void 0!==t.startTime&&e.uint32(41).double(t.startTime),void 0!==t.endTime&&e.uint32(49).double(t.endTime),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 2:i.pubSubTopic=r.string();break;case 3:i.contentFilters.push(v.decode(r,r.uint32()));break;case 4:i.pagingInfo=b.decode(r,r.uint32());break;case 5:i.startTime=r.double();break;case 6:i.endTime=r.double();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({pubSubTopic:R(t.pubSubTopic)?String(t.pubSubTopic):void 0,contentFilters:Array.isArray(null===t||void 0===t?void 0:t.contentFilters)?t.contentFilters.map((t=>v.fromJSON(t))):[],pagingInfo:R(t.pagingInfo)?b.fromJSON(t.pagingInfo):void 0,startTime:R(t.startTime)?Number(t.startTime):void 0,endTime:R(t.endTime)?Number(t.endTime):void 0}),toJSON(t){const e={};return void 0!==t.pubSubTopic&&(e.pubSubTopic=t.pubSubTopic),t.contentFilters?e.contentFilters=t.contentFilters.map((t=>t?v.toJSON(t):void 0)):e.contentFilters=[],void 0!==t.pagingInfo&&(e.pagingInfo=t.pagingInfo?b.toJSON(t.pagingInfo):void 0),void 0!==t.startTime&&(e.startTime=t.startTime),void 0!==t.endTime&&(e.endTime=t.endTime),e},fromPartial(t){var e,r,n,i;const o={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};return o.pubSubTopic=null!==(e=t.pubSubTopic)&&void 0!==e?e:void 0,o.contentFilters=(null===(r=t.contentFilters)||void 0===r?void 0:r.map((t=>v.fromPartial(t))))||[],o.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?b.fromPartial(t.pagingInfo):void 0,o.startTime=null!==(n=t.startTime)&&void 0!==n?n:void 0,o.endTime=null!==(i=t.endTime)&&void 0!==i?i:void 0,o}};const _={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();for(const r of t.messages)a.a.encode(r,e.uint32(18).fork()).ldelim();return void 0!==t.pagingInfo&&b.encode(t.pagingInfo,e.uint32(26).fork()).ldelim(),0!==t.error&&e.uint32(32).int32(t.error),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={messages:[],pagingInfo:void 0,error:0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 2:i.messages.push(a.a.decode(r,r.uint32()));break;case 3:i.pagingInfo=b.decode(r,r.uint32());break;case 4:i.error=r.int32();break;default:r.skipType(7&t)}}return i},fromJSON:t=>({messages:Array.isArray(null===t||void 0===t?void 0:t.messages)?t.messages.map((t=>a.a.fromJSON(t))):[],pagingInfo:R(t.pagingInfo)?b.fromJSON(t.pagingInfo):void 0,error:R(t.error)?d(t.error):0}),toJSON(t){const e={};return t.messages?e.messages=t.messages.map((t=>t?a.a.toJSON(t):void 0)):e.messages=[],void 0!==t.pagingInfo&&(e.pagingInfo=t.pagingInfo?b.toJSON(t.pagingInfo):void 0),void 0!==t.error&&(e.error=p(t.error)),e},fromPartial(t){var e,r;const n={messages:[],pagingInfo:void 0,error:0};return n.messages=(null===(e=t.messages)||void 0===e?void 0:e.map((t=>a.a.fromPartial(t))))||[],n.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?b.fromPartial(t.pagingInfo):void 0,n.error=null!==(r=t.error)&&void 0!==r?r:0,n}};const S={encode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.Writer.create();return""!==t.requestId&&e.uint32(10).string(t.requestId),void 0!==t.query&&w.encode(t.query,e.uint32(18).fork()).ldelim(),void 0!==t.response&&_.encode(t.response,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof s.a.Reader?t:new s.a.Reader(t);let n=void 0===e?r.len:r.pos+e;const i={requestId:"",query:void 0,response:void 0};for(;r.pos<n;){const t=r.uint32();switch(t>>>3){case 1:i.requestId=r.string();break;case 2:i.query=w.decode(r,r.uint32());break;case 3:i.response=_.decode(r,r.uint32());break;default:r.skipType(7&t)}}return i},fromJSON:t=>({requestId:R(t.requestId)?String(t.requestId):"",query:R(t.query)?w.fromJSON(t.query):void 0,response:R(t.response)?_.fromJSON(t.response):void 0}),toJSON(t){const e={};return void 0!==t.requestId&&(e.requestId=t.requestId),void 0!==t.query&&(e.query=t.query?w.toJSON(t.query):void 0),void 0!==t.response&&(e.response=t.response?_.toJSON(t.response):void 0),e},fromPartial(t){var e;const r={requestId:"",query:void 0,response:void 0};return r.requestId=null!==(e=t.requestId)&&void 0!==e?e:"",r.query=void 0!==t.query&&null!==t.query?w.fromPartial(t.query):void 0,r.response=void 0!==t.response&&null!==t.response?_.fromPartial(t.response):void 0,r}};var E=(()=>{if("undefined"!==typeof E)return E;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw"Unable to locate global object"})();const A=E.atob||(t=>E.Buffer.from(t,"base64").toString("binary"));function M(t){const e=A(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const I=E.btoa||(t=>E.Buffer.from(t,"binary").toString("base64"));function R(t){return null!==t&&void 0!==t}s.a.util.Long!==i.a&&(s.a.util.Long=i.a,s.a.configure())}.call(this,r(21))},function(t,e){var r="undefined"!==typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!==typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function m(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=p(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=u(t),e=h(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},f.prototype.delete=function(t){delete this.map[u(t)]},f.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},f.prototype.set=function(t,e){this.map[u(t)]=h(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),l(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),l(t)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var r=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=function(t){var e=t.toUpperCase();return b.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function _(t){var e=new f;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function S(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];S.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new S(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(M){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,r){return new Promise((function(n,o){var s=new v(t,r);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:_(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;n(new S(e,t))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=f,t.Request=v,t.Response=S),e.Headers=f,e.Request=v,e.Response=S,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},,function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return h})),r.d(e,"d",(function(){return l})),r.d(e,"a",(function(){return f}));var n=r(39),i=r.n(n),o=r(1),s=r(343),a=r(3);const c=new a.a("sha2/5.6.1");function u(t){return"0x"+i.a.ripemd160().update(Object(o.a)(t)).digest("hex")}function h(t){return"0x"+i.a.sha256().update(Object(o.a)(t)).digest("hex")}function l(t){return"0x"+i.a.sha512().update(Object(o.a)(t)).digest("hex")}function f(t,e,r){return s.a[t]||c.throwError("unsupported algorithm "+t,a.a.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+i.a.hmac(i.a[t],Object(o.a)(e)).update(Object(o.a)(r)).digest("hex")}},,,,,,,,function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i=1,o={},s=!1,a=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){h(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"===typeof r.data&&0===r.data.indexOf(e)&&h(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),n=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){h(t.data)},n=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;n=function(e){var r=a.createElement("script");r.onreadystatechange=function(){h(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():n=function(t){setTimeout(h,0,t)},c.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var s={callback:t,args:e};return o[i]=s,n(i),i++},c.clearImmediate=u}function u(t){delete o[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{u(t),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,r(21),r(22))},,,function(t,e,r){"use strict";var n=e;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(206),n.BufferWriter=r(373),n.Reader=r(207),n.BufferReader=r(374),n.util=r(68),n.rpc=r(375),n.roots=r(377),n.configure=i,i()},function(t,e,r){"use strict";t.exports=function(t,e){var r=new Array(arguments.length-1),n=0,i=2,o=!0;for(;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,s){r[n]=function(t){if(o)if(o=!1,t)s(t);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(a){o&&(o=!1,s(a))}}))}},function(t,e,r){"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(t,e,r){for(var n,o=null,s=[],a=0,c=0;e<r;){var u=t[e++];switch(c){case 0:s[a++]=i[u>>2],n=(3&u)<<4,c=1;break;case 1:s[a++]=i[n|u>>4],n=(15&u)<<2,c=2;break;case 2:s[a++]=i[n|u>>6],s[a++]=i[63&u],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[n],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";n.decode=function(t,e,r){for(var n,i=r,s=0,c=0;c<t.length;){var u=t.charCodeAt(c++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error(a);switch(s){case 0:n=u,s=1;break;case 1:e[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:e[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:e[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error(a);return r-i},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,e,r){"use strict";function n(){this._listeners={}}t.exports=n,n.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},n.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},n.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}},function(t,e,r){"use strict";function n(t){return"undefined"!==typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(t,n,i){e[0]=t,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function a(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i,t.readFloatLE=n?s:a,t.readFloatBE=n?a:s}():function(){function e(t,e,r,n){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,r,n);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(e)/Math.LN2);t((i<<31|o+127<<23|8388607&Math.round(e*Math.pow(2,-o)*8388608))>>>0,r,n)}}function r(t,e,r){var n=t(e,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,o),t.readFloatLE=r.bind(null,s),t.readFloatBE=r.bind(null,a)}(),"undefined"!==typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(t,n,i){e[0]=t,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function a(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i,t.readDoubleLE=n?s:a,t.readDoubleBE=n?a:s}():function(){function e(t,e,r,n,i,o){var s=n<0?1:0;if(s&&(n=-n),0===n)t(0,i,o+e),t(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))t(0,i,o+e),t(2146959360,i,o+r);else if(n>17976931348623157e292)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+r);else{var a;if(n<22250738585072014e-324)t((a=n/5e-324)>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(a=n*Math.pow(2,-c))>>>0,i,o+e),t((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+r)}}}function r(t,e,r,n,i){var o=t(n,i+e),s=t(n,i+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,o,4,0),t.readDoubleLE=r.bind(null,s,0,4),t.readDoubleBE=r.bind(null,a,4,0)}(),t}function i(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function o(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function s(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=n(n)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(t,e,r){"use strict";var n=e;n.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?e+=1:r<2048?e+=2:55296===(64512&r)&&56320===(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},n.read=function(t,e,r){if(r-e<1)return"";for(var n,i=null,o=[],s=0;e<r;)(n=t[e++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(t,e,r){for(var n,i,o=r,s=0;s<t.length;++s)(n=t.charCodeAt(s))<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(i=t.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-o}},function(t,e,r){"use strict";t.exports=function(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return t(r);s+r>n&&(o=t(n),s=0);var a=e.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},function(t,e,r){"use strict";t.exports=i;var n=r(68);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(t){if("number"===typeof t)return i.fromNumber(t);if(n.isString(t)){if(!n.Long)return i.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===s?o:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},function(t,e,r){"use strict";t.exports=o;var n=r(206);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(68);function o(){n.call(this)}function s(t,e,r){t.length<40?i.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},o._configure()},function(t,e,r){"use strict";t.exports=o;var n=r(207);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(68);function o(t){n.call(this,t)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()},function(t,e,r){"use strict";e.Service=r(376)},function(t,e,r){"use strict";t.exports=i;var n=r(68);function i(t,e,r){if("function"!==typeof t)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,r,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(t,a,e,r,i,o);if(a.rpcImpl)try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(t,r){if(t)return a.emit("error",t,e),s(t);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",r,e),s(null,r)}a.end(!0)}))}catch(c){return a.emit("error",c,e),void setTimeout((function(){s(c)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,e,r){"use strict";t.exports={}},function(t,e,r){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=r(80),e.createHash=e.Hash=r(91),e.createHmac=e.Hmac=r(229);var n=r(398),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var s=r(232);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync;var a=r(400);e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var c=r(415);e.DiffieHellmanGroup=c.DiffieHellmanGroup,e.createDiffieHellmanGroup=c.createDiffieHellmanGroup,e.getDiffieHellman=c.getDiffieHellman,e.createDiffieHellman=c.createDiffieHellman,e.DiffieHellman=c.DiffieHellman;var u=r(419);e.createSign=u.createSign,e.Sign=u.Sign,e.createVerify=u.createVerify,e.Verify=u.Verify,e.createECDH=r(449);var h=r(451);e.publicEncrypt=h.publicEncrypt,e.privateEncrypt=h.privateEncrypt,e.publicDecrypt=h.publicDecrypt,e.privateDecrypt=h.privateDecrypt;var l=r(454);e.randomFill=l.randomFill,e.randomFillSync=l.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e,r){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=u(t),s=n[0],a=n[1],c=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),h=0,l=a>0?s-4:s;for(r=0;r<l;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],c[h++]=e>>16&255,c[h++]=e>>8&255,c[h++]=255&e;2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,c[h++]=255&e);1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,c[h++]=e>>8&255,c[h++]=255&e);return c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,c=r-i;a<c;a+=s)o.push(h(t,a,a+s>c?c:a+s));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function h(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?i-1:0,f=r?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*c-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+d]=255&s,d+=p,s/=256,u-=8);t[r+d-p]|=128*m}},function(t,e,r){var n=r(19),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=r(19).Buffer,a=r(214).inspect,c=a&&a.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,u;return e=t,r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e,r,n,i=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,r=i,n=a,s.prototype.copy.call(e,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0===(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0===(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:c,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}],r&&o(e.prototype,r),u&&o(e,u),t}()},function(t,e,r){"use strict";(function(e){var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(147),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),h=Symbol("lastPromise"),l=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[s];if(null!==e){var r=t[f].read();null!==r&&(t[h]=null,t[s]=null,t[a]=null,e(d(r,!1)))}}function m(t){e.nextTick(p,t)}var y=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var t=this,r=this[c];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(r,n){e.nextTick((function(){t[c]?n(t[c]):r(d(void 0,!0))}))}));var n,i=this[h];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[u]?r(d(void 0,!0)):e[l](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[l])}return this[h]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(d(void 0,!0))}))}))})),n),y);t.exports=function(t){var e,r=Object.create(g,(i(e={},f,{value:t,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,c,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,l,{value:function(t,e){var n=r[f].read();n?(r[h]=null,r[s]=null,r[a]=null,t(d(n,!1))):(r[s]=t,r[a]=e)},writable:!0}),e));return r[h]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[a];return null!==e&&(r[h]=null,r[s]=null,r[a]=null,e(t)),void(r[c]=t)}var n=r[s];null!==n&&(r[h]=null,r[s]=null,r[a]=null,n(d(void 0,!0))),r[u]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r(22))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,r){"use strict";t.exports=i;var n=r(219);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(10)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){"use strict";var n;var i=r(81).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function c(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),void 0===n&&(n=r(147)),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);a=!0,o()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(t){return t.setHeader&&"function"===typeof t.abort}(t)?t.abort():"function"===typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function u(t){t()}function h(t,e){return t.pipe(e)}function l(t){return t.length?"function"!==typeof t[t.length-1]?a:t.pop():a}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=l(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var s=e.map((function(t,r){var o=r<e.length-1;return c(t,o,r>0,(function(t){n||(n=t),t&&s.forEach(u),o||(s.forEach(u),i(n))}))}));return e.reduce(h)}},function(t,e,r){var n=r(10),i=r(83),o=r(15).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(t){return t<<30|t>>>2}function h(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,l=0;l<16;++l)r[l]=t.readInt32BE(4*l);for(;l<80;++l)r[l]=r[l-3]^r[l-8]^r[l-14]^r[l-16];for(var f=0;f<80;++f){var d=~~(f/20),p=0|((e=n)<<5|e>>>27)+h(d,i,o,a)+c+r[f]+s[d];c=a,a=o,o=u(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=c},function(t,e,r){var n=r(10),i=r(83),o=r(15).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(t){return t<<5|t>>>27}function h(t){return t<<30|t>>>2}function l(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=(e=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|e>>>31;for(var d=0;d<80;++d){var p=~~(d/20),m=u(n)+l(p,i,o,a)+c+r[d]+s[p]|0;c=a,a=o,o=h(i),i=n,n=m}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=c},function(t,e,r){var n=r(10),i=r(220),o=r(83),s=r(15).Buffer,a=new Array(64);function c(){this.init(),this._w=a,o.call(this,64,56)}n(c,i),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var t=s.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=c},function(t,e,r){var n=r(10),i=r(221),o=r(83),s=r(15).Buffer,a=new Array(160);function c(){this.init(),this._w=a,o.call(this,128,112)}n(c,i),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var t=s.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=c},function(t,e,r){"use strict";var n=r(15).Buffer,i=r(226);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,o=n.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,r=o,i=a,e.copy(r,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e,r){"use strict";t.exports=o;var n=r(228),i=Object.create(r(93));function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=r(10),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(151)},function(t,e,r){t.exports=r(69)},function(t,e,r){t.exports=r(150).Transform},function(t,e,r){t.exports=r(150).PassThrough},function(t,e,r){"use strict";var n=r(10),i=r(15).Buffer,o=r(64),s=i.alloc(128),a=64;function c(t,e){o.call(this,"digest"),"string"===typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=i.concat([e,s],a));for(var r=this._ipad=i.allocUnsafe(a),n=this._opad=i.allocUnsafe(a),c=0;c<a;c++)r[c]=54^e[c],n[c]=92^e[c];this._hash=[r]}n(c,o),c.prototype._update=function(t){this._hash.push(t)},c.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=c},function(t,e,r){t.exports=r(231)},function(t,e,r){(function(e){var n,i,o=r(15).Buffer,s=r(233),a=r(234),c=r(235),u=r(236),h=e.crypto&&e.crypto.subtle,l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function d(){return i||(i=e.process&&e.process.nextTick?e.process.nextTick:e.queueMicrotask?e.queueMicrotask:e.setImmediate?e.setImmediate:e.setTimeout)}function p(t,e,r,n,i){return h.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return h.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},t,n<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,r,i,m,y,g){"function"===typeof y&&(g=y,y=void 0);var b=l[(y=y||"sha1").toLowerCase()];if(b&&"function"===typeof e.Promise){if(s(i,m),t=u(t,a,"Password"),r=u(r,a,"Salt"),"function"!==typeof g)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){d()((function(){e(null,t)}))}),(function(t){d()((function(){e(t)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var r=p(n=n||o.alloc(8),n,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=r,r}(b).then((function(e){return e?p(t,r,i,m,b):c(t,r,i,m,y)})),g)}else d()((function(){var e;try{e=c(t,r,i,m,y)}catch(n){return g(n)}g(null,e)}))}}).call(this,r(21))},function(t,e,r){var n=r(401),i=r(153),o=r(154),s=r(414),a=r(113);function c(t,e,r){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,r);if(s[t])return new n({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function u(t,e,r){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,r);if(s[t])return new n({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");r=8*s[t].key,n=s[t].iv}var i=a(e,!1,r,n);return c(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=c,e.createDecipher=e.Decipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");r=8*s[t].key,n=s[t].iv}var i=a(e,!1,r,n);return u(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=u,e.listCiphers=e.getCiphers=function(){return Object.keys(s).concat(i.getCiphers())}},function(t,e,r){var n=r(64),i=r(402),o=r(10),s=r(15).Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function c(t){n.call(this);var e,r=t.mode.toLowerCase(),i=a[r];e=t.decrypt?"decrypt":"encrypt";var o=t.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=s.concat([o,o.slice(0,8)]));var c=t.iv;s.isBuffer(c)||(c=s.from(c)),this._des=i.create({key:o,iv:c,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=c,o(c,n),c.prototype._update=function(t){return s.from(this._des.update(t))},c.prototype._final=function(){return s.from(this._des.final())}},function(t,e,r){"use strict";e.utils=r(237),e.Cipher=r(152),e.DES=r(238),e.CBC=r(403),e.EDE=r(404)},function(t,e,r){"use strict";var n=r(51),i=r(10),o={};function s(t){n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var r=Object.keys(o),n=0;n<r.length;n++){var s=r[n];e.prototype[s]=o[s]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new s(this.options.iv);this._cbcState=t},o._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=t[e+a];o._update.call(this,s,0,r,n);for(a=0;a<this.blockSize;a++)s[a]=r[n+a]}else{o._update.call(this,t,e,r,n);for(a=0;a<this.blockSize;a++)r[n+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=t[e+a]}}},function(t,e,r){"use strict";var n=r(51),i=r(10),o=r(152),s=r(238);function a(t,e){n.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[s.create({type:"encrypt",key:r}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:r})]}function c(t){o.call(this,t);var e=new a(this.type,this.options.key);this._edeState=e}i(c,o),t.exports=c,c.create=function(t){return new c(t)},c.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},c.prototype._pad=s.prototype._pad,c.prototype._unpad=s.prototype._unpad},function(t,e,r){var n=r(154),i=r(242),o=r(15).Buffer,s=r(243),a=r(64),c=r(112),u=r(113);function h(t,e,r){a.call(this),this._cache=new f,this._cipher=new c.AES(e),this._prev=o.from(r),this._mode=t,this._autopadding=!0}r(10)(h,a),h.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return o.concat(n)};var l=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function d(t,e,r){var a=n[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"===typeof e&&(e=o.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"===typeof r&&(r=o.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===a.type?new s(a.module,e,r):"auth"===a.type?new i(a.module,e,r):new h(a.module,e,r)}h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return o.concat([this.cache,e])},e.createCipheriv=d,e.createCipher=function(t,e){var r=n[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=u(e,!1,r.key,r.iv);return d(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,r){var n=r(94);e.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},function(t,e,r){var n=r(15).Buffer,i=r(94);function o(t,e,r){var o=e.length,s=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=n.concat([t._prev,r?e:s]),s}e.encrypt=function(t,e,r){for(var i,s=n.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=n.allocUnsafe(0)),!(t._cache.length<=e.length)){s=n.concat([s,o(t,e,r)]);break}i=t._cache.length,s=n.concat([s,o(t,e.slice(0,i),r)]),e=e.slice(i)}return s}},function(t,e,r){var n=r(15).Buffer;function i(t,e,r){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=n.concat([t._prev.slice(1),n.from([r?e:i])]),i}e.encrypt=function(t,e,r){for(var o=e.length,s=n.allocUnsafe(o),a=-1;++a<o;)s[a]=i(t,e[a],r);return s}},function(t,e,r){var n=r(15).Buffer;function i(t,e,r){for(var n,i,s=-1,a=0;++s<8;)n=e&1<<7-s?128:0,a+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^n))>>s%8,t._prev=o(t._prev,r?n:i);return a}function o(t,e){var r=t.length,i=-1,o=n.allocUnsafe(t.length);for(t=n.concat([t,n.from([e])]);++i<r;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,r){for(var o=e.length,s=n.allocUnsafe(o),a=-1;++a<o;)s[a]=i(t,e[a],r);return s}},function(t,e,r){(function(t){var n=r(94);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,o)}}).call(this,r(19).Buffer)},function(t,e,r){var n=r(15).Buffer,i=n.alloc(16,0);function o(t){var e=n.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function s(t){this.h=t,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}s.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},s.prototype._multiply=function(){for(var t,e,r,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],s=-1;++s<128;){for(0!==(this.state[~~(s/8)]&1<<7-s%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!==(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=o(i)},s.prototype.update=function(t){var e;for(this.cache=n.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},s.prototype.final=function(t,e){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=s},function(t,e,r){var n=r(242),i=r(15).Buffer,o=r(154),s=r(243),a=r(64),c=r(112),u=r(113);function h(t,e,r){a.call(this),this._cache=new l,this._last=void 0,this._cipher=new c.AES(e),this._prev=i.from(r),this._mode=t,this._autopadding=!0}function l(){this.cache=i.allocUnsafe(0)}function f(t,e,r){var a=o[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"===typeof r&&(r=i.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);if("string"===typeof e&&(e=i.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new s(a.module,e,r,!0):"auth"===a.type?new n(a.module,e,r,!0):new h(a.module,e,r)}r(10)(h,a),h.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return i.concat(n)},h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},l.prototype.add=function(t){this.cache=i.concat([this.cache,t])},l.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var r=o[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=u(e,!1,r.key,r.iv);return f(t,n.key,n.iv)},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,r){(function(t){var n=r(244),i=r(417),o=r(418);var s={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var r=new t(i[e].prime,"hex"),n=new t(i[e].gen,"hex");return new o(r,n)},e.createDiffieHellman=e.DiffieHellman=function e(r,i,a,c){return t.isBuffer(i)||void 0===s[i]?e(r,"binary",i,a):(i=i||"binary",c=c||"binary",a=a||new t([2]),t.isBuffer(a)||(a=new t(a,c)),"number"===typeof r?new o(n(r,a),a,!0):(t.isBuffer(r)||(r=new t(r,i)),new o(r,a,!0)))}}).call(this,r(19).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(248).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=l[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===e,u=new t(o),h=this.clone();if(c){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,_=v>>>13,S=0|s[4],E=8191&S,A=S>>>13,M=0|s[5],I=8191&M,R=M>>>13,T=0|s[6],C=8191&T,O=T>>>13,k=0|s[7],P=8191&k,N=k>>>13,D=0|s[8],B=8191&D,x=D>>>13,L=0|s[9],U=8191&L,j=L>>>13,K=0|a[0],F=8191&K,q=K>>>13,V=0|a[1],z=8191&V,H=V>>>13,G=0|a[2],W=8191&G,J=G>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],$=8191&Q,tt=Q>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(m,F)|0,o=Math.imul(m,q);var gt=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),i=(i=Math.imul(g,q))+Math.imul(b,F)|0,o=Math.imul(b,q),n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var bt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,F),i=(i=Math.imul(w,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(b,z)|0,o=o+Math.imul(b,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(A,F)|0,o=Math.imul(A,q),n=n+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(O,F)|0,o=Math.imul(O,q),n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var St=(u+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(x,F)|0,o=Math.imul(x,q),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ut)|0;var At=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(j,F)|0,o=Math.imul(j,q),n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(g,ct)|0,i=(i=i+Math.imul(g,ut)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(j,z)|0,o=Math.imul(j,H),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(j,W)|0,o=Math.imul(j,J),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(A,ct)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0;var Rt=(u+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Tt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0;var Ct=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ft)|0;var Ot=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var kt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,ct),i=(i=Math.imul(U,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var Pt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(j,lt)|0,o=Math.imul(j,ft);var Nt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Dt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=yt,c[1]=gt,c[2]=bt,c[3]=vt,c[4]=wt,c[5]=_t,c[6]=St,c[7]=Et,c[8]=At,c[9]=Mt,c[10]=It,c[11]=Rt,c[12]=Tt,c[13]=Ct,c[14]=Ot,c[15]=kt,c[16]=Pt,c[17]=Nt,c[18]=Dt,0!==u&&(c[19]=u,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var h=o-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<s;d++){var p=r[h+d],m=n[h+d],y=r[h+d+s],g=n[h+d+s],b=l*y-f*g;g=l*g+f*y,y=b,r[h+d]=p+y,n[h+d]=m+g,r[h+d+s]=p-y,n[h+d+s]=m-g,d!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(c)):(r.isub(e),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,b),i(_,b),i(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return g[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(l,new o(1).iushln(p-y-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=y}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(70)(t))},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,r){(function(e){var n=r(245),i=new(r(247)),o=new n(24),s=new n(11),a=new n(10),c=new n(3),u=new n(7),h=r(244),l=r(80);function f(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._pub=new n(t),this}function d(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._priv=new n(t),this}t.exports=m;var p={};function m(t,e,r){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=f,this.setPrivateKey=d):this._primeCode=8}function y(t,r){var n=new e(t.toArray());return r?n.toString(r):n}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!==typeof this._primeCode&&(this._primeCode=function(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in p)return p[n];var l,f=0;if(t.isEven()||!h.simpleSieve||!h.fermatTest(t)||!i.test(t))return f+=1,f+="02"===r||"05"===r?8:4,p[n]=f,f;switch(i.test(t.shrn(1))||(f+=2),r){case"02":t.mod(o).cmp(s)&&(f+=8);break;case"05":(l=t.mod(a)).cmp(c)&&l.cmp(u)&&(f+=8);break;default:f+=4}return p[n]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new n(l(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var r=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(r.toArray()),o=this.getPrime();if(i.length<o.length){var s=new e(o.length-i.length);s.fill(0),i=e.concat([s,i])}return i},m.prototype.getPublicKey=function(t){return y(this._pub,t)},m.prototype.getPrivateKey=function(t){return y(this._priv,t)},m.prototype.getPrime=function(t){return y(this.__prime,t)},m.prototype.getGenerator=function(t){return y(this._gen,t)},m.prototype.setGenerator=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.__gen=t,this._gen=new n(t),this}}).call(this,r(19).Buffer)},function(t,e,r){var n=r(156).Buffer,i=r(91),o=r(210),s=r(10),a=r(420),c=r(448),u=r(231);function h(t){o.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function l(t){o.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new h(t)}function d(t){return new l(t)}Object.keys(u).forEach((function(t){u[t].id=n.from(u[t].id,"hex"),u[t.toLowerCase()]=u[t]})),s(h,o.Writable),h.prototype._write=function(t,e,r){this._hash.update(t),r()},h.prototype.update=function(t,e){return"string"===typeof t&&(t=n.from(t,e)),this._hash.update(t),this},h.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=a(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},s(l,o.Writable),l.prototype._write=function(t,e,r){this._hash.update(t),r()},l.prototype.update=function(t,e){return"string"===typeof t&&(t=n.from(t,e)),this._hash.update(t),this},l.prototype.verify=function(t,e,r){"string"===typeof e&&(e=n.from(e,r)),this.end();var i=this._hash.digest();return c(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:d,createSign:f,createVerify:d}},function(t,e,r){var n=r(156).Buffer,i=r(229),o=r(157),s=r(158).ec,a=r(8),c=r(115),u=r(264);function h(t,e,r,o){if((t=n.from(t.toArray())).length<e.byteLength()){var s=n.alloc(e.byteLength()-t.length);t=n.concat([s,t])}var a=r.length,c=function(t,e){t=(t=l(t,e)).mod(e);var r=n.from(t.toArray());if(r.length<e.byteLength()){var i=n.alloc(e.byteLength()-r.length);r=n.concat([i,r])}return r}(r,e),u=n.alloc(a);u.fill(1);var h=n.alloc(a);return h=i(o,h).update(u).update(n.from([0])).update(t).update(c).digest(),u=i(o,h).update(u).digest(),{k:h=i(o,h).update(u).update(n.from([1])).update(t).update(c).digest(),v:u=i(o,h).update(u).digest()}}function l(t,e){var r=new a(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function f(t,e,r){var o,s;do{for(o=n.alloc(0);8*o.length<t.bitLength();)e.v=i(r,e.k).update(e.v).digest(),o=n.concat([o,e.v]);s=l(o,t),e.k=i(r,e.k).update(e.v).update(n.from([0])).digest(),e.v=i(r,e.k).update(e.v).digest()}while(-1!==s.cmp(t));return s}function d(t,e,r,n){return t.toRed(a.mont(r)).redPow(e).fromRed().mod(n)}t.exports=function(t,e,r,i,p){var m=c(e);if(m.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(t,e){var r=u[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var i=new s(r).keyFromPrivate(e.privateKey).sign(t);return n.from(i.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==i)throw new Error("wrong private key type");return function(t,e,r){var i,o=e.params.priv_key,s=e.params.p,c=e.params.q,u=e.params.g,p=new a(0),m=l(t,c).mod(c),y=!1,g=h(o,c,t,r);for(;!1===y;)p=d(u,i=f(c,g,r),s,c),0===(y=i.invm(c).imul(m.add(o.mul(p))).mod(c)).cmpn(0)&&(y=!1,p=new a(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t));128&e[0]&&(e=[0].concat(e));var r=[48,t.length+e.length+4,2,t.length];return r=r.concat(t,[2,e.length],e),n.from(r)}(p,y)}(t,m,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");t=n.concat([p,t]);for(var y=m.modulus.byteLength(),g=[0,1];t.length+g.length+1<y;)g.push(255);g.push(0);for(var b=-1;++b<t.length;)g.push(t[b]);return o(g,m)},t.exports.getKey=h,t.exports.makeKey=f},function(t){t.exports=JSON.parse('{"name":"elliptic","version":"6.5.4","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}')},function(t,e,r){"use strict";var n=r(52),i=r(61),o=r(10),s=r(114),a=n.assert;function c(t){s.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(t,e,r,n){s.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(t,e,r,n){s.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(c,s),t.exports=c,c.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?r=o[0]:(r=o[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),r=new i(2).toRed(e).redInvm(),n=r.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},c.prototype._getEndoBasis=function(t){for(var e,r,n,o,s,a,c,u,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i(1),m=new i(0),y=new i(0),g=new i(1),b=0;0!==f.cmpn(0);){var v=d.div(f);u=d.sub(v.mul(f)),h=y.sub(v.mul(p));var w=g.sub(v.mul(m));if(!n&&u.cmp(l)<0)e=c.neg(),r=p,n=u.neg(),o=h;else if(n&&2===++b)break;c=u,d=f,f=u,y=p,p=h,g=m,m=w}s=u.neg(),a=h;var _=n.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(_)>=0&&(s=e,a=r),n.negative&&(n=n.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:o},{a:s,b:a}]},c.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:t.sub(s).sub(a),k2:c.add(u).neg()}},c.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},c.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},c.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),h=0;h<2*o;h++)n[h]=null,i[h]=null;return u},o(u,s.BasePoint),c.prototype.point=function(t,e,r){return new u(this,t,e,r)},c.prototype.pointFromJSON=function(t,e){return u.fromJSON(this,t,e)},u.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(t,e,r){"string"===typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},u.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},u.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},u.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},u.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},u.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(h,s.BasePoint),c.prototype.jpoint=function(t,e,r){return new h(this,t,e,r)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),f=c.redSqr().redIAdd(h).redISub(l).redISub(l),d=c.redMul(l.redISub(f)).redISub(o.redMul(h)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},h.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),h=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(h).redISub(h),f=a.redMul(h.redISub(l)).redISub(i.redMul(u)),d=this.z.redMul(s);return this.curve.jpoint(l,f,d)},h.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(e=0;e<t;e++){var h=o.redSqr(),l=u.redSqr(),f=l.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),p=o.redMul(l),m=d.redSqr().redISub(p.redAdd(p)),y=p.redISub(m),g=d.redMul(y);g=g.redIAdd(g).redISub(f);var b=u.redMul(a);e+1<t&&(c=c.redMul(f)),o=m,a=b,u=g}return this.curve.jpoint(o,u.redMul(i),a)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=c,e=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(h).redISub(f);d=d.redIAdd(d);var p=h.redAdd(h).redIAdd(h),m=p.redSqr(),y=f.redIAdd(f);y=(y=y.redIAdd(y)).redIAdd(y),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},h.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);t=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var y=l.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),e=d.redMul(p.redISub(t)).redISub(y)}return this.curve.jpoint(t,e,r)},h.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),c=e.redAdd(e),u=(c=c.redIAdd(c)).redMul(s),h=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(h),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(h,d,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),h=e.redMul(u);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(a).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,d)},h.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},h.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},h.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,r){"use strict";var n=r(61),i=r(10),o=r(114),s=r(52);function a(t){o.call(this,"mont",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(t,e,r){o.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(e,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},i(c,o.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},a.prototype.point=function(t,e){return new c(this,t,e)},a.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(t,e){return new c(t,e[0],e[1]||t.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),s=i.redMul(n),a=e.z.redMul(o.redAdd(s).redSqr()),c=e.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,r){"use strict";var n=r(52),i=r(61),o=r(10),s=r(114),a=n.assert;function c(t){this.twisted=1!==(0|t.a),this.mOneA=this.twisted&&-1===(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|t.c)}function u(t,e,r,n,o){s.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,s),t.exports=c,c.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},c.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},c.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},c.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(e&&!c||!e&&c)&&(a=a.redNeg()),this.point(t,a)},c.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},c.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},o(u,s.BasePoint),c.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},c.prototype.point=function(t,e,r,n){return new u(this,t,e,r,n)},u.fromJSON=function(t,e){return new u(t,e[0],e[1],e[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),s=o.redSub(r),a=n.redSub(e),c=i.redMul(s),u=o.redMul(a),h=i.redMul(a),l=s.redMul(o);return this.curve.point(c,u,l,h)},u.prototype._projDbl=function(){var t,e,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var u=(n=this.curve._mulA(a)).redAdd(c);this.zOne?(t=s.redSub(a).redSub(c).redMul(u.redSub(this.curve.two)),e=u.redMul(n.redSub(c)),r=u.redSqr().redSub(u).redSub(u)):(i=this.z.redSqr(),o=u.redSub(i).redISub(i),t=s.redSub(a).redISub(c).redMul(o),e=u.redMul(n.redSub(c)),r=u.redMul(o))}else n=a.redAdd(c),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(s.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(a.redISub(c)),r=n.redMul(o);return this.curve.point(t,e,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),s=i.redSub(n),a=i.redAdd(n),c=r.redAdd(e),u=o.redMul(s),h=a.redMul(c),l=o.redMul(c),f=s.redMul(a);return this.curve.point(u,h,f,l)},u.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),c=i.redSub(a),u=i.redAdd(a),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),l=n.redMul(c).redMul(h);return this.curve.twisted?(e=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=c.redMul(u)):(e=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(c).redMul(u)),this.curve.point(l,e,r)},u.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},u.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},u.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},u.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},u.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},function(t,e,r){"use strict";e.sha1=r(426),e.sha224=r(427),e.sha256=r(255),e.sha384=r(428),e.sha512=r(256)},function(t,e,r){"use strict";var n=r(56),i=r(95),o=r(254),s=n.rotl32,a=n.sum32,c=n.sum32_5,u=o.ft_1,h=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,h),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],h=this.h[2],f=this.h[3],d=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),m=c(s(i,5),u(p,o,h,f),d,r[n],l[p]);d=f,f=h,h=s(o,30),o=i,i=m}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],h),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(56),i=r(255);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,r){"use strict";var n=r(56),i=r(256);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,r){"use strict";var n=r(56),i=r(95),o=n.rotl32,s=n.sum32,a=n.sum32_3,c=n.sum32_4,u=i.BlockHash;function h(){if(!(this instanceof h))return new h;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(h,u),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],h=this.h[4],b=r,v=n,w=i,_=u,S=h,E=0;E<80;E++){var A=s(o(c(r,l(E,n,i,u),t[p[E]+e],f(E)),y[E]),h);r=h,h=u,u=o(i,10),i=n,n=A,A=s(o(c(b,l(79-E,v,w,_),t[m[E]+e],d(E)),g[E]),S),b=S,S=_,_=o(w,10),w=v,v=A}A=a(this.h[1],i,_),this.h[1]=a(this.h[2],u,S),this.h[2]=a(this.h[3],h,b),this.h[3]=a(this.h[4],r,v),this.h[4]=a(this.h[0],n,w),this.h[0]=A},h.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,r){"use strict";var n=r(56),i=r(51);function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,r){"use strict";var n=r(61),i=r(433),o=r(52),s=r(159),a=r(155),c=o.assert,u=r(434),h=r(435);function l(t){if(!(this instanceof l))return new l(t);"string"===typeof t&&(c(Object.prototype.hasOwnProperty.call(s,t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=l,l.prototype.keyPair=function(t){return new u(this,t)},l.prototype.keyFromPrivate=function(t,e){return u.fromPrivate(this,t,e)},l.prototype.keyFromPublic=function(t,e){return u.fromPublic(this,t,e)},l.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var s=new n(e.generate(r));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},l.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},l.prototype.sign=function(t,e,r,o){"object"===typeof r&&(o=r,r=null),o||(o={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new n(t,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),c=t.toArray("be",s),u=new i({hash:this.hash,entropy:a,nonce:c,pers:o.pers,persEnc:o.persEnc||"utf8"}),l=this.n.sub(new n(1)),f=0;;f++){var d=o.k?o.k(f):new n(u.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(l)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var m=p.getX(),y=m.umod(this.n);if(0!==y.cmpn(0)){var g=d.invm(this.n).mul(y.mul(e.getPrivate()).iadd(t));if(0!==(g=g.umod(this.n)).cmpn(0)){var b=(p.getY().isOdd()?1:0)|(0!==m.cmp(y)?2:0);return o.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),b^=1),new h({r:y,s:g,recoveryParam:b})}}}}}},l.prototype.verify=function(t,e,r,i){t=this._truncateToN(new n(t,16)),r=this.keyFromPublic(r,i);var o=(e=new h(e,"hex")).r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,c=s.invm(this.n),u=c.mul(t).umod(this.n),l=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),l)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(u,r.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},l.prototype.recoverPubKey=function(t,e,r,i){c((3&r)===r,"The recovery param is more than two bits"),e=new h(e,i);var o=this.n,s=new n(t),a=e.r,u=e.s,l=1&r,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),l):this.curve.pointFromX(a,l);var d=e.r.invm(o),p=o.sub(s).mul(d).umod(o),m=u.mul(d).umod(o);return this.g.mulAdd(p,a,m)},l.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new h(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,r){"use strict";var n=r(39),i=r(252),o=r(51);function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),r=i.toArray(t.nonce,t.nonceEnc||"hex"),n=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}t.exports=s,s.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,e,r,n){"string"!==typeof e&&(n=r,r=e,e=null),t=i.toArray(t,e),r=i.toArray(r,n),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},s.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof e&&(n=r,r=e,e=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(r),this._reseed++,i.encode(s,e)}},function(t,e,r){"use strict";var n=r(61),i=r(52).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,r){return e instanceof o?e:new o(t,{pub:e,pubEnc:r})},o.fromPrivate=function(t,e,r){return e instanceof o?e:new o(t,{priv:e,privEnc:r})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"===typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new n(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.validate()||i(t.validate(),"public point not validated"),t.mul(this.priv).getX()},o.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,r){"use strict";var n=r(61),i=r(52),o=i.assert;function s(t,e){if(t instanceof s)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new n(t.r,16),this.s=new n(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function c(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function u(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function h(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=s,s.prototype._importDER=function(t,e){t=i.toArray(t,e);var r=new a;if(48!==t[r.place++])return!1;var o=c(t,r);if(!1===o)return!1;if(o+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var s=c(t,r);if(!1===s)return!1;var u=t.slice(r.place,s+r.place);if(r.place+=s,2!==t[r.place++])return!1;var h=c(t,r);if(!1===h)return!1;if(t.length!==h+r.place)return!1;var l=t.slice(r.place,h+r.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new n(u),this.s=new n(l),this.recoveryParam=null,!0},s.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=u(e),r=u(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];h(n,e.length),(n=n.concat(e)).push(2),h(n,r.length);var o=n.concat(r),s=[48];return h(s,o.length),s=s.concat(o),i.encode(s,t)}},function(t,e,r){"use strict";var n=r(39),i=r(159),o=r(52),s=o.assert,a=o.parseBytes,c=r(437),u=r(438);function h(t){if(s("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof h))return new h(t);t=i[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=n.sha512}t.exports=h,h.prototype.sign=function(t,e){t=a(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),c=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:o})},h.prototype.verify=function(t,e,r){t=a(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},h.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(t){return c.fromPublic(this,t)},h.prototype.keyFromSecret=function(t){return c.fromSecret(this,t)},h.prototype.makeSignature=function(t){return t instanceof u?t:new u(this,t)},h.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},h.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!==(128&t[e]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},h.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(t){return o.intFromLE(t)},h.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,r){"use strict";var n=r(52),i=n.assert,o=n.parseBytes,s=n.cachedProperty;function a(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),t)},a.prototype.getPublic=function(t){return n.encode(this.pubBytes(),t)},t.exports=a},function(t,e,r){"use strict";var n=r(61),i=r(52),o=i.assert,s=i.cachedProperty,a=i.parseBytes;function c(t,e){this.eddsa=t,"object"!==typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof n&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=c},function(t,e,r){"use strict";var n=r(257);e.certificate=r(445);var i=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=i;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}));e.PublicKey=s;var a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),c=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=c;var u=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=u;var h=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=h,e.DSAparam=n.define("DSAparam",(function(){this.int()}));var l=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=l;var f=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(t,e,r){"use strict";const n=r(260),i=r(262),o=r(10);function s(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new s(t,e)},s.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e)}return o(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r)},new r(this)},s.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},s.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},s.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n[t])),this.encoders[t]},s.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},function(t,e,r){"use strict";const n=r(10),i=r(261);function o(t){i.call(this,t),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(t,e){const r=i.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let i=0;i<r.length;i+=64)n.push(r.slice(i,i+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},function(t,e,r){"use strict";const n=r(10),i=r(160).Buffer,o=r(263);function s(t){o.call(this,t),this.enc="pem"}n(s,o),t.exports=s,s.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,c=-1;for(let i=0;i<r.length;i++){const t=r[i].match(s);if(null!==t&&t[2]===n){if(-1!==a){if("END"!==t[1])break;c=i;break}if("BEGIN"!==t[1])break;a=i}}if(-1===a||-1===c)throw new Error("PEM section not found for: "+n);const u=r.slice(a+1,c).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const h=i.from(u,"base64");return o.prototype.decode.call(this,h,e)}},function(t,e,r){"use strict";const n=e;n.Reporter=r(162).Reporter,n.DecoderBuffer=r(96).DecoderBuffer,n.EncoderBuffer=r(96).EncoderBuffer,n.Node=r(161)},function(t,e,r){"use strict";const n=e;n._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e},n.der=r(163)},function(t,e,r){"use strict";var n=r(257),i=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),c=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),u=n.define("RDNSequence",(function(){this.seqof(c)})),h=n.define("Name",(function(){this.choice({rdnSequence:this.use(u)})})),l=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),f=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),d=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(h),this.key("validity").use(l),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),p=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));t.exports=p},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=r(113),a=r(153),c=r(15).Buffer;t.exports=function(t,e){var r,u=t.toString(),h=u.match(n);if(h){var l="aes"+h[1],f=c.from(h[2],"hex"),d=c.from(h[3].replace(/[\r\n]/g,""),"base64"),p=s(e,f.slice(0,8),parseInt(h[1],10)).key,m=[],y=a.createDecipheriv(l,p,f);m.push(y.update(d)),m.push(y.final()),r=c.concat(m)}else{var g=u.match(o);r=c.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:u.match(i)[1],data:r}}},function(t,e,r){var n=r(156).Buffer,i=r(8),o=r(158).ec,s=r(115),a=r(264);function c(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,r,u,h){var l=s(r);if("ec"===l.type){if("ecdsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");return function(t,e,r){var n=a[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new o(n),s=r.data.subjectPrivateKey.data;return i.verify(e,t,s)}(t,e,l)}if("dsa"===l.type){if("dsa"!==u)throw new Error("wrong public key type");return function(t,e,r){var n=r.data.p,o=r.data.q,a=r.data.g,u=r.data.pub_key,h=s.signature.decode(t,"der"),l=h.s,f=h.r;c(l,o),c(f,o);var d=i.mont(n),p=l.invm(o);return 0===a.toRed(d).redPow(new i(e).mul(p).mod(o)).fromRed().mul(u.toRed(d).redPow(f.mul(p).mod(o)).fromRed()).mod(n).mod(o).cmp(f)}(t,e,l)}if("rsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");e=n.concat([h,e]);for(var f=l.modulus.byteLength(),d=[1],p=0;e.length+d.length+2<f;)d.push(255),p++;d.push(0);for(var m=-1;++m<e.length;)d.push(e[m]);d=n.from(d);var y=i.mont(l.modulus);t=(t=new i(t).toRed(y)).redPow(new i(l.publicExponent)),t=n.from(t.fromRed().toArray());var g=p<8?1:0;for(f=Math.min(t.length,d.length),t.length!==d.length&&(g=1),m=-1;++m<f;)g|=t[m]^d[m];return 0===g}},function(t,e,r){(function(e){var n=r(158),i=r(450);t.exports=function(t){return new s(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function a(t,r,n){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(n&&i.length<n){var o=new e(n-i.length);o.fill(0),i=e.concat([o,i])}return r?i.toString(r):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},s.prototype.computeSecret=function(t,r,n){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),a(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},s.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),a(r,t)},s.prototype.getPrivateKey=function(t){return a(this.keys.getPrivate(),t)},s.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},s.prototype.setPrivateKey=function(t,r){r=r||"utf8",e.isBuffer(t)||(t=new e(t,r));var n=new i(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,r(19).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(265).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=l[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===e,u=new t(o),h=this.clone();if(c){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,m=d>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,_=v>>>13,S=0|s[4],E=8191&S,A=S>>>13,M=0|s[5],I=8191&M,R=M>>>13,T=0|s[6],C=8191&T,O=T>>>13,k=0|s[7],P=8191&k,N=k>>>13,D=0|s[8],B=8191&D,x=D>>>13,L=0|s[9],U=8191&L,j=L>>>13,K=0|a[0],F=8191&K,q=K>>>13,V=0|a[1],z=8191&V,H=V>>>13,G=0|a[2],W=8191&G,J=G>>>13,Y=0|a[3],Z=8191&Y,X=Y>>>13,Q=0|a[4],$=8191&Q,tt=Q>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,F))|0)+((8191&(i=(i=Math.imul(l,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(m,F)|0,o=Math.imul(m,q);var gt=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(i=(i=i+Math.imul(l,H)|0)+Math.imul(f,z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),i=(i=Math.imul(g,q))+Math.imul(b,F)|0,o=Math.imul(b,q),n=n+Math.imul(p,z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,H)|0;var bt=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,F),i=(i=Math.imul(w,q))+Math.imul(_,F)|0,o=Math.imul(_,q),n=n+Math.imul(g,z)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(b,z)|0,o=o+Math.imul(b,H)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,q))+Math.imul(A,F)|0,o=Math.imul(A,q),n=n+Math.imul(w,z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(g,W)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,W)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(R,F)|0,o=Math.imul(R,q),n=n+Math.imul(E,z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(A,z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,F),i=(i=Math.imul(C,q))+Math.imul(O,F)|0,o=Math.imul(O,q),n=n+Math.imul(I,z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,H)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var St=(u+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(P,F),i=(i=Math.imul(P,q))+Math.imul(N,F)|0,o=Math.imul(N,q),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,H)|0)+Math.imul(O,z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(x,F)|0,o=Math.imul(x,q),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,J)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ut)|0;var At=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(j,F)|0,o=Math.imul(j,q),n=n+Math.imul(B,z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,H)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(g,ct)|0,i=(i=i+Math.imul(g,ut)|0)+Math.imul(b,ct)|0,o=o+Math.imul(b,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,H))+Math.imul(j,z)|0,o=Math.imul(j,H),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,ut)|0)+Math.imul(_,ct)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(g,lt)|0,i=(i=i+Math.imul(g,ft)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(j,W)|0,o=Math.imul(j,J),n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(A,ct)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0;var Rt=(u+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,X))+Math.imul(j,Z)|0,o=Math.imul(j,X),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ct)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Tt=(u+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,tt))+Math.imul(j,$)|0,o=Math.imul(j,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(O,ct)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0;var Ct=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ft)|0;var Ot=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ft)|0;var kt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,ct),i=(i=Math.imul(U,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var Pt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=(i=Math.imul(U,ft))+Math.imul(j,lt)|0,o=Math.imul(j,ft);var Nt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Dt=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=yt,c[1]=gt,c[2]=bt,c[3]=vt,c[4]=wt,c[5]=_t,c[6]=St,c[7]=Et,c[8]=At,c[9]=Mt,c[10]=It,c[11]=Rt,c[12]=Tt,c[13]=Ct,c[14]=Ot,c[15]=kt,c[16]=Pt,c[17]=Nt,c[18]=Dt,0!==u&&(c[19]=u,r.length++),r};function m(t,e,r){return(new y).mulp(t,e,r)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var h=o-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},y.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},y.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},y.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},y.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<s;d++){var p=r[h+d],m=n[h+d],y=r[h+d+s],g=n[h+d+s],b=l*y-f*g;g=l*g+f*y,y=b,r[h+d]=p+y,n[h+d]=m+g,r[h+d+s]=p-y,n[h+d+s]=m-g,d!==a&&(b=c*l-u*f,f=c*f+u*l,l=b)}},y.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},y.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},y.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(c)):(r.isub(e),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,b),i(_,b),i(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return g[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,y=0;0!==m.cmp(a);y++)m=m.redSqr();n(y<p);var g=this.pow(l,new o(1).iushln(p-y-1));f=f.redMul(g),l=g.redSqr(),d=d.redMul(l),p=y}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(70)(t))},function(t,e,r){e.publicEncrypt=r(452),e.privateDecrypt=r(453),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},function(t,e,r){var n=r(115),i=r(80),o=r(91),s=r(266),a=r(267),c=r(164),u=r(269),h=r(157),l=r(15).Buffer;t.exports=function(t,e,r){var f;f=t.padding?t.padding:r?1:4;var d,p=n(t);if(4===f)d=function(t,e){var r=t.modulus.byteLength(),n=e.length,u=o("sha1").update(l.alloc(0)).digest(),h=u.length,f=2*h;if(n>r-f-2)throw new Error("message too long");var d=l.alloc(r-n-f-2),p=r-h-1,m=i(h),y=a(l.concat([u,d,l.alloc(1,1),e],p),s(m,p)),g=a(m,s(y,h));return new c(l.concat([l.alloc(1),g,y],r))}(p,e);else if(1===f)d=function(t,e,r){var n,o=e.length,s=t.modulus.byteLength();if(o>s-11)throw new Error("message too long");n=r?l.alloc(s-o-3,255):function(t){var e,r=l.allocUnsafe(t),n=0,o=i(2*t),s=0;for(;n<t;)s===o.length&&(o=i(2*t),s=0),(e=o[s++])&&(r[n++]=e);return r}(s-o-3);return new c(l.concat([l.from([0,r?1:2]),n,l.alloc(1),e],s))}(p,e,r);else{if(3!==f)throw new Error("unknown padding");if((d=new c(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return r?h(d,p):u(d,p)}},function(t,e,r){var n=r(115),i=r(266),o=r(267),s=r(164),a=r(157),c=r(91),u=r(269),h=r(15).Buffer;t.exports=function(t,e,r){var l;l=t.padding?t.padding:r?1:4;var f,d=n(t),p=d.modulus.byteLength();if(e.length>p||new s(e).cmp(d.modulus)>=0)throw new Error("decryption error");f=r?u(new s(e),d):a(e,d);var m=h.alloc(p-f.length);if(f=h.concat([m,f],p),4===l)return function(t,e){var r=t.modulus.byteLength(),n=c("sha1").update(h.alloc(0)).digest(),s=n.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,s+1),u=e.slice(s+1),l=o(a,i(u,s)),f=o(u,i(l,r-s-1));if(function(t,e){t=h.from(t),e=h.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));var i=-1;for(;++i<n;)r+=t[i]^e[i];return r}(n,f.slice(0,s)))throw new Error("decryption error");var d=s;for(;0===f[d];)d++;if(1!==f[d++])throw new Error("decryption error");return f.slice(d)}(d,f);if(1===l)return function(t,e,r){var n=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var s=e.slice(2,i-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++;s.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,f,r);if(3===l)return f;throw new Error("unknown padding")}},function(t,e,r){"use strict";(function(t,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r(15),s=r(80),a=o.Buffer,c=o.kMaxLength,u=t.crypto||t.msCrypto,h=Math.pow(2,32)-1;function l(t,e){if("number"!==typeof t||t!==t)throw new TypeError("offset must be a number");if(t>h||t<0)throw new TypeError("offset must be a uint32");if(t>c||t>e)throw new RangeError("offset out of range")}function f(t,e,r){if("number"!==typeof t||t!==t)throw new TypeError("size must be a number");if(t>h||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>c)throw new RangeError("buffer too small")}function d(t,e,r,i){if(n.browser){var o=t.buffer,a=new Uint8Array(o,e,r);return u.getRandomValues(a),i?void n.nextTick((function(){i(null,t)})):t}if(!i)return s(r).copy(t,e),t;s(r,(function(r,n){if(r)return i(r);n.copy(t,e),i(null,t)}))}u&&u.getRandomValues||!n.browser?(e.randomFill=function(e,r,n,i){if(!a.isBuffer(e)&&!(e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"===typeof r)i=r,r=0,n=e.length;else if("function"===typeof n)i=n,n=e.length-r;else if("function"!==typeof i)throw new TypeError('"cb" argument must be a function');return l(r,e.length),f(n,r,e.length),d(e,r,n,i)},e.randomFillSync=function(e,r,n){"undefined"===typeof r&&(r=0);if(!a.isBuffer(e)&&!(e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');l(r,e.length),void 0===n&&(n=e.length-r);return f(n,r,e.length),d(e,r,n)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,r(21),r(22))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(456),i=r(458),o=r(459),s=r(460),a=r(272),c=r(84),u=r(273),h=r(71),l=r(116),f=r(461),d=r(72),p=r(103),m=r(463),y=r(464);r(465);var g=r(85),b=r(165),v=r(73),w=r(117),_=r(65);const S={...n,...i,...o,...s,...a,...c,...u,...h,...l,...f},E={...d,...p},A={raw:m,json:y};e.CID=g.CID,e.hasher=b,e.digest=v,e.varint=w,e.bytes=_,e.bases=S,e.codecs=A,e.hashes=E},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(57),i=r(65);const o=n.from({prefix:"\0",name:"identity",encode:t=>i.toString(t),decode:t=>i.fromString(t)});e.identity=o},function(t,e,r){"use strict";var n=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){for(var n=0,i=0;t[e]===c;)n++,e++;for(var o=(t.length-e)*u+1>>>0,s=new Uint8Array(o);t[e];){var h=r[t.charCodeAt(e)];if(255===h)return;for(var l=0,f=o-1;(0!==h||l<i)&&-1!==f;f--,l++)h+=a*s[f]>>>0,s[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,e++}if(" "!==t[e]){for(var d=o-i;d!==o&&0===s[d];)d++;for(var p=new Uint8Array(n+(o-d)),m=n;d!==o;)p[m++]=s[d++];return p}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var s=(o-i)*h+1>>>0,u=new Uint8Array(s);i!==o;){for(var l=e[i],f=0,d=s-1;(0!==l||f<n)&&-1!==d;d--,f++)l+=256*u[d]>>>0,u[d]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=f,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var m=c.repeat(r);p<s;++p)m+=t.charAt(u[p]);return m},decodeUnsafe:l,decode:function(t){var r=l(t);if(r)return r;throw new Error("Non-".concat(e," character"))}}};t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(57).rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});e.base2=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(57).rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});e.base8=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(57).baseX({prefix:"9",name:"base10",alphabet:"0123456789"});e.base10=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(57);const i=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),o=i.reduce(((t,e,r)=>(t[r]=e,t)),[]),s=i.reduce(((t,e,r)=>(t[e.codePointAt(0)]=r,t)),[]);const a=n.from({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(t){return t.reduce(((t,e)=>t+=o[e]),"")},decode:function(t){const e=[];for(const r of t){const t=s[r.codePointAt(0)];if(void 0===t)throw new Error("Non-base256emoji character: ".concat(r));e.push(t)}return new Uint8Array(e)}});e.base256emoji=a},function(t,e,r){"use strict";var n=function t(e,r,n){r=r||[];var o=n=n||0;for(;e>=i;)r[n++]=255&e|128,e/=128;for(;-128&e;)r[n++]=255&e|128,e>>>=7;return r[n]=0|e,t.bytes=n-o+1,r},i=Math.pow(2,31);var o=function t(e,r){var n,i=0,o=0,s=r=r||0,a=e.length;do{if(s>=a)throw t.bytes=0,new RangeError("Could not decode varint");n=e[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return t.bytes=s-r,i};var s=Math.pow(2,7),a=Math.pow(2,14),c=Math.pow(2,21),u=Math.pow(2,28),h=Math.pow(2,35),l=Math.pow(2,42),f=Math.pow(2,49),d=Math.pow(2,56),p=Math.pow(2,63),m={encode:n,decode:o,encodingLength:function(t){return t<s?1:t<a?2:t<c?3:t<u?4:t<h?5:t<l?6:t<f?7:t<d?8:t<p?9:10}};t.exports=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(65);e.code=85,e.decode=t=>n.coerce(t),e.encode=t=>n.coerce(t),e.name="raw"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=new TextEncoder,i=new TextDecoder;e.code=512,e.decode=t=>JSON.parse(i.decode(t)),e.encode=t=>n.encode(JSON.stringify(t)),e.name="json"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(85),i=r(117),o=r(65),s=r(165),a=r(73);e.CID=n.CID,e.varint=i,e.bytes=o,e.hasher=s,e.digest=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createGossipRpc=void 0,e.createGossipRpc=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shuffle=void 0,e.shuffle=function(t){if(t.length<=1)return t;for(let e=0;e<t.length;e++){const r=Math.floor(Math.random()*Math.floor(t.length)),n=t[e];t[e]=t[r],t[r]=n}return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasGossipProtocol=void 0;const n=r(74);e.hasGossipProtocol=function(t){return t===n.GossipsubIDv10||t===n.GossipsubIDv11}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.messageIdFromString=e.messageIdToString=void 0;const n=r(24),i=r(29);e.messageIdToString=function(t){return i.toString(t,"base64")},e.messageIdFromString=function(t){return n.fromString(t,"base64")}},function(t,e,r){"use strict";const n=r(48),i=r(118),o=r(58),{concat:s}=r(25),{toString:a}=r(29);function c(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const o=r[n],s=i(o);if(0!==s.size){if(n++,n>=r.length)throw v("invalid address: "+t);if(s.path){e.push([o,b(r.slice(n).join("/"))]);break}e.push([o,r[n]])}else e.push([o])}return e}function u(t){const e=[];return t.map((t=>{const r=w(t);return e.push(r.name),t.length>1&&e.push(t[1]),null})),b(e.join("/"))}function h(t){return t.map((t=>{Array.isArray(t)||(t=[t]);const e=w(t);return t.length>1?[e.code,n.toBytes(e.code,t[1])]:[e.code]}))}function l(t){return t.map((t=>{const e=w(t);return t[1]?[e.code,n.toString(e.code,t[1])]:[e.code]}))}function f(t){return y(s(t.map((t=>{const e=w(t);let r=Uint8Array.from(o.encode(e.code));return t.length>1&&(r=s([r,t[1]])),r}))))}function d(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;return o.decode(e)+o.decode.bytes}function p(t){const e=[];let r=0;for(;r<t.length;){const n=o.decode(t,r),s=o.decode.bytes,c=d(i(n),t.slice(r+s));if(0===c){e.push([n]),r+=s;continue}const u=t.slice(r+s,r+s+c);if(r+=c+s,r>t.length)throw v("Invalid address Uint8Array: "+a(t,"base16"));e.push([n,u])}return e}function m(t){return f(h(c(t=b(t))))}function y(t){const e=g(t);if(e)throw e;return Uint8Array.from(t)}function g(t){try{p(t)}catch(e){return e}}function b(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function v(t){return new Error("Error parsing address: "+t)}function w(t){return i(t[0])}t.exports={stringToStringTuples:c,stringTuplesToString:u,tuplesToStringTuples:l,stringTuplesToTuples:h,bytesToTuples:p,tuplesToBytes:f,bytesToString:function(t){const e=p(t);return u(l(e))},stringToBytes:m,fromString:function(t){return m(t)},fromBytes:y,validateBytes:g,isValidBytes:function(t){return void 0===g(t)},cleanPath:b,ParseError:v,protoFromTuple:w,sizeForAddr:d}},function(t,e,r){"use strict";const n=r(274),{toString:i}=r(29),o=n,s=n.v4,a=n.v6,c=function(t,e,r){let n;if(r=~~r,s(t))n=e||new Uint8Array(r+4),t.split(/\./g).map((function(t){n[r++]=255&parseInt(t,10)}));else if(a(t)){const o=t.split(":",8);let a;for(a=0;a<o.length;a++){let t;s(o[a])&&(t=c(o[a]),o[a]=i(t.slice(0,2),"base16")),t&&++a<8&&o.splice(a,0,i(t.slice(2,4),"base16"))}if(""===o[0])for(;o.length<8;)o.unshift("0");else if(""===o[o.length-1])for(;o.length<8;)o.push("0");else if(o.length<8){for(a=0;a<o.length&&""!==o[a];a++);const t=[a,"1"];for(a=9-o.length;a>0;a--)t.push("0");o.splice.apply(o,t)}for(n=e||new Uint8Array(r+16),a=0;a<o.length;a++){const t=parseInt(o[a],16);n[r++]=t>>8&255,n[r++]=255&t}}if(!n)throw Error("Invalid ip address: "+t);return n};t.exports={isIP:o,isV4:s,isV6:a,toBytes:c,toString:function(t,e,r){e=~~e,r=r||t.length-e;const n=[];let i;const o=new DataView(t.buffer);if(4===r){for(let i=0;i<r;i++)n.push(t[e+i]);i=n.join(".")}else if(16===r){for(let t=0;t<r;t+=2)n.push(o.getUint16(e+t).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i}}},function(t,e){t.exports=function t(e,n,i){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw t.bytes=0,new RangeError("Could not encode varint");n=n||[];var o=i=i||0;for(;e>=r;)n[i++]=255&e|128,e/=128;for(;-128&e;)n[i++]=255&e|128,e>>>=7;return n[i]=0|e,t.bytes=i-o+1,n};var r=Math.pow(2,31)},function(t,e){t.exports=function t(e,r){var n,i=0,o=0,s=r=r||0,a=e.length;do{if(s>=a||o>49)throw t.bytes=0,new RangeError("Could not decode varint");n=e[s++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return t.bytes=s-r,i}},function(t,e){var r=Math.pow(2,7),n=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),s=Math.pow(2,35),a=Math.pow(2,42),c=Math.pow(2,49),u=Math.pow(2,56),h=Math.pow(2,63);t.exports=function(t){return t<r?1:t<n?2:t<i?3:t<o?4:t<s?5:t<a?6:t<c?7:t<u?8:t<h?9:10}},function(t,e,r){t.exports=function(t){function e(t){let r,i,o,s=null;function a(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!a.enabled)return;const o=a,s=Number(new Date),c=s-(r||s);o.diff=c,o.prev=r,o.curr=s,r=s,n[0]=e.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");let u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((t,r)=>{if("%%"===t)return"%";u++;const i=e.formatters[r];if("function"===typeof i){const e=n[u];t=i.call(o,e),n.splice(u,1),u--}return t})),e.formatArgs.call(o,n);const h=o.log||e.log;h.apply(o,n)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=n,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"===typeof e.init&&e.init(a),a}function n(t,r){const n=e(this.namespace+("undefined"===typeof r?":":r)+t);return n.log=this.log,n}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let r;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"===typeof t?t:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(276),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((r=>{e[r]=t[r]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return e.colors[Math.abs(r)%e.colors.length]},e.enable(e.load()),e}},function(t,e,r){"use strict";t.exports={SHA1:20,SHA256:32,SHA512:64}},function(t,e,r){"use strict";const n=r(478),i=r(480);e.create=async function(t,e){const r=i(t),o=n.createCipheriv(r,t,e),s=n.createDecipheriv(r,t,e);return{encrypt:async t=>o.update(t),decrypt:async t=>s.update(t)}}},function(t,e,r){"use strict";r(97);const n=r(16),{toString:i}=r(29),{fromString:o}=r(24);t.exports={createCipheriv:(t,e,r)=>{const s=n.cipher.createCipher("AES-CTR",i(e,"ascii"));return s.start({iv:i(r,"ascii")}),{update:t=>(s.update(n.util.createBuffer(i(t,"ascii"))),o(s.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,r)=>{const s=n.cipher.createDecipher("AES-CTR",i(e,"ascii"));return s.start({iv:i(r,"ascii")}),{update:t=>(s.update(n.util.createBuffer(i(t,"ascii"))),o(s.output.getBytes(),"ascii"))}}}},function(t,e,r){(function(e){var r={};t.exports=r;var n={};r.encode=function(t,e,r){if("string"!==typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}else n=function(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}(t,e);if(r){var h=new RegExp(".{1,"+r+"}","g");n=n.match(h).join("\r\n")}return n},r.decode=function(t,r){if("string"!==typeof t)throw new TypeError('"input" must be a string.');if("string"!==typeof r)throw new TypeError('"alphabet" must be a string.');var i=n[r];if(!i){i=n[r]=[];for(var o=0;o<r.length;++o)i[r.charCodeAt(o)]=o}t=t.replace(/\s/g,"");var s=r.length,a=r.charAt(0),c=[0];for(o=0;o<t.length;o++){var u=i[t.charCodeAt(o)];if(void 0===u)return;for(var h=0,l=u;h<c.length;++h)l+=c[h]*s,c[h]=255&l,l>>=8;for(;l>0;)c.push(255&l),l>>=8}for(var f=0;t[f]===a&&f<t.length-1;++f)c.push(0);return"undefined"!==typeof e?e.from(c.reverse()):new Uint8Array(c.reverse())}}).call(this,r(19).Buffer)},function(t,e,r){"use strict";const n=r(9),i={16:"aes-128-ctr",32:"aes-256-ctr"};t.exports=function(t){const e=i[t.length];if(!e){const e=Object.entries(i).map((t=>{let[e,r]=t;return"".concat(e," (").concat(r,")")})).join(" / ");throw n(new Error("Invalid key length ".concat(t.length," bytes. Must be ").concat(e)),"ERR_INVALID_KEY_LENGTH")}return e}},function(t,e,r){var n=r(16);r(76),r(28),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,i=null,o={start:function(o,s){if(null!==o)if("string"===typeof o){if(!((o=o.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');e=n.md.algorithms[o].create()}else e=o;if(null===s)s=t;else{if("string"===typeof s)s=n.util.createBuffer(s);else if(n.util.isArray(s)){var a=s;s=n.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=s.length();for(c=0;c<u;++c){a=s.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<e.blockLength)for(a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);t=s,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()}};return o.digest=o.getMac,o}},function(t,e,r){var n=r(16);r(76),r(28);var i=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(o),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var a,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-u));for(var h=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)h+=(a=8*i.fullMessageLength[l+1])/4294967296>>>0,s.putInt32(h>>>0),h=a>>>0;s.putInt32(h);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};c(f,r,s);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},i};var o=null,s=!1,a=null;function c(t,e,r){for(var n,i,o,s,c,u,h,l,f,d,p,m,y,g=r.length();g>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=((n=e[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=e[c-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(u=t.h0,h=t.h1,l=t.h2,f=t.h3,d=t.h4,p=t.h5,m=t.h6,y=t.h7,c=0;c<64;++c)o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),s=u&h|l&(u^h),n=y+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(m^d&(p^m))+a[c]+e[c],y=m,m=p,p=d,d=f+n>>>0,f=l,l=h,h=u,u=n+(i=o+s)>>>0;t.h0=t.h0+u|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+f|0,t.h4=t.h4+d|0,t.h5=t.h5+p|0,t.h6=t.h6+m|0,t.h7=t.h7+y|0,g-=64}}},function(t,e,r){(function(e){var n=r(16);r(28);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||e.versions["node-webkit"]||(i=r(120)),(t.exports=n.prng=n.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,o=new Array(32),s=0;s<32;++s)o[s]=r.create();function a(){if(e.pools[0].messageLength>=32)return c();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),c()}function c(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r===0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var i=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(i),e.generated=0}function u(t){var e=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(e=function(t){return i.getRandomValues(t)});var o=n.util.createBuffer();if(e)for(;o.length()<t;){var s=Math.max(1,Math.min(t-o.length(),65536)/4),a=new Uint32Array(Math.floor(s));try{e(a);for(var c=0;c<a.length;++c)o.putInt32(a[c])}catch(d){if(!("undefined"!==typeof QuotaExceededError&&d instanceof QuotaExceededError))throw d}}if(o.length()<t)for(var u,h,l,f=Math.floor(65536*Math.random());o.length()<t;){h=16807*(65535&f),h+=(32767&(u=16807*(f>>16)))<<16,f=4294967295&(h=(2147483647&(h+=u>>15))+(h>>31));for(c=0;c<3;++c)l=f>>>(c<<3),l^=Math.floor(256*Math.random()),o.putByte(255&l)}return o.getBytes(t)}return e.pools=o,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var i=e.plugin.cipher,o=e.plugin.increment,s=e.plugin.formatKey,a=e.plugin.formatSeed,u=n.util.createBuffer();e.key=null,function h(l){if(l)return r(l);if(u.length()>=t)return r(null,u.getBytes(t));e.generated>1048575&&(e.key=null);if(null===e.key)return n.util.nextTick((function(){!function(t){if(e.pools[0].messageLength>=32)return c(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,(function(r,n){if(r)return t(r);e.collect(n),c(),t()}))}(h)}));var f=i(e.key,e.seed);e.generated+=f.length,u.putBytes(f),e.key=s(i(e.key,o(e.seed))),e.seed=a(i(e.key,e.seed)),n.util.setImmediate(h)}()},e.generateSync=function(t){var r=e.plugin.cipher,i=e.plugin.increment,o=e.plugin.formatKey,s=e.plugin.formatSeed;e.key=null;for(var c=n.util.createBuffer();c.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&a();var u=r(e.key,e.seed);e.generated+=u.length,c.putBytes(u),e.key=o(r(e.key,i(e.seed))),e.seed=s(r(e.key,e.seed))}return c.getBytes(t)},i?(e.seedFile=function(t,e){i.randomBytes(t,(function(t,r){if(t)return e(t);e(null,r.toString())}))},e.seedFileSync=function(t){return i.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,u(t))}catch(r){e(r)}},e.seedFileSync=u),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(t>>i&255);e.collect(n)},e.registerWorker=function(t){if(t===self)e.seedFile=function(t,e){self.addEventListener("message",(function t(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",t),e(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:t}}})};else{t.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,(function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})}))}))}},e}}).call(this,r(22))},function(t,e,r){var n=r(16);r(28);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],o=[1,2,3,5],s=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"===typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,o=t,s=t.length(),a=e,c=Math.ceil(a/8),u=255>>(7&a);for(r=s;r<128;r++)o.putByte(i[o.at(r-1)+o.at(r-s)&255]);for(o.setAt(128-c,i[o.at(128-c)&u]),r=127-c;r>=0;r--)o.setAt(r,i[o.at(r+1)^o.at(r+c)]);return o};var c=function(t,e,r){var i,c,u,h,l=!1,f=null,d=null,p=null,m=[];for(t=n.rc2.expandKey(t,e),u=0;u<64;u++)m.push(t.getInt16Le());r?(i=function(t){for(u=0;u<4;u++)t[u]+=m[h]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),t[u]=s(t[u],o[u]),h++},c=function(t){for(u=0;u<4;u++)t[u]+=m[63&t[(u+3)%4]]}):(i=function(t){for(u=3;u>=0;u--)t[u]=a(t[u],o[u]),t[u]-=m[h]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),h--},c=function(t){for(u=3;u>=0;u--)t[u]-=m[63&t[(u+3)%4]]});var y=function(t){var e=[];for(u=0;u<4;u++){var n=f.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),e.push(65535&n)}h=r?0:63;for(var i=0;i<t.length;i++)for(var o=0;o<t[i][0];o++)t[i][1](e);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(e[u]):e[u]^=p.getInt16Le()),d.putInt16Le(e[u])},g=null;return g={start:function(t,e){t&&"string"===typeof t&&(t=n.util.createBuffer(t)),l=!1,f=n.util.createBuffer(),d=e||new n.util.createBuffer,p=t,g.output=d},update:function(t){for(l||f.putBuffer(t);f.length()>=8;)y([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,f,!r);else{var n=8===f.length()?8:8-f.length();f.fillWithByte(n,n)}if(e&&(l=!0,g.update()),!r&&(e=0===f.length()))if(t)e=t(8,d,!r);else{var i=d.length(),o=d.at(i-1);o>i?e=!1:d.truncate(o)}return e}}};n.rc2.startEncrypting=function(t,e,r){var i=n.rc2.createEncryptionCipher(t,128);return i.start(e,r),i},n.rc2.createEncryptionCipher=function(t,e){return c(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var i=n.rc2.createDecryptionCipher(t,128);return i.start(e,r),i},n.rc2.createDecryptionCipher=function(t,e){return c(t,e,!1)}},function(t,e,r){var n=r(16);r(28),r(86),r(486);var i=t.exports=n.pkcs1=n.pkcs1||{};function o(t,e,r){r||(r=n.md.sha1.create());for(var i="",o=Math.ceil(e/r.digestLength),s=0;s<o;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}i.encode_rsa_oaep=function(t,e,r){var i,s,a,c;"string"===typeof r?(i=r,s=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,s=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var u=Math.ceil(t.n.bitLength()/8),h=u-2*a.digestLength-2;if(e.length>h)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=e.length,y.maxLength=h,y;i||(i=""),a.update(i,"raw");for(var l=a.digest(),f="",d=h-e.length,p=0;p<d;p++)f+="\0";var m=l.getBytes()+f+"\x01"+e;if(s){if(s.length!==a.digestLength){var y;throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=s.length,y.digestLength=a.digestLength,y}}else s=n.random.getBytes(a.digestLength);var g=o(s,u-a.digestLength-1,c),b=n.util.xorBytes(m,g,m.length),v=o(b,a.digestLength,c),w=n.util.xorBytes(s,v,s.length);return"\0"+w+b},i.decode_rsa_oaep=function(t,e,r){var i,s,a;"string"===typeof r?(i=r,s=arguments[3]||void 0):r&&(i=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(t.n.bitLength()/8);if(e.length!==c)throw(b=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,b.expectedLength=c,b;if(void 0===s?s=n.md.sha1.create():s.start(),a||(a=s),c<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),s.update(i,"raw");for(var u=s.digest().getBytes(),h=e.charAt(0),l=e.substring(1,s.digestLength+1),f=e.substring(1+s.digestLength),d=o(f,s.digestLength,a),p=n.util.xorBytes(l,d,l.length),m=o(p,c-s.digestLength-1,a),y=n.util.xorBytes(f,m,f.length),g=y.substring(0,s.digestLength),b="\0"!==h,v=0;v<s.digestLength;++v)b|=u.charAt(v)!==g.charAt(v);for(var w=1,_=s.digestLength,S=s.digestLength;S<y.length;S++){var E=y.charCodeAt(S),A=1&E^1,M=w?65534:0;b|=E&M,_+=w&=A}if(b||1!==y.charCodeAt(_))throw new Error("Invalid RSAES-OAEP padding.");return y.substring(_+1)}},function(t,e,r){var n=r(16);r(76),r(28);var i=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),s=!0);var t=null,e=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var c=o.length;i.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=c[1],c[1]=c[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(o),a(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var c,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-u));for(var h=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)h+=(c=8*i.fullMessageLength[l+1])/4294967296>>>0,s.putInt32(h>>>0),h=c>>>0;s.putInt32(h);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};a(f,r,s);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},i};var o=null,s=!1;function a(t,e,r){for(var n,i,o,s,a,c,u,h=r.length();h>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,c=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=(n=e[u-3]^e[u-8]^e[u-14]^e[u-16])<<1|n>>>31,e[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=(n=e[u-3]^e[u-8]^e[u-14]^e[u-16])<<1|n>>>31,e[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(o&s|a&(o^s))+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,h-=64}}},function(t,e,r){var n=r(16);r(28),r(170),r(86),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],o=new r(null);o.fromInt(30);var s=function(t,e){return t|e};e.generateProbablePrime=function(t,e,i){"function"===typeof e&&(i=e,e={});var o=(e=e||{}).algorithm||"PRIMEINC";"string"===typeof o&&(o={name:o}),o.options=o.options||{};var s=e.prng||n.random,c={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===o.name)return function(t,e,i,o){if("workers"in i)return function(t,e,i,o){if("undefined"===typeof Worker)return a(t,e,i,o);var s=u(t,e),c=i.workers,h=i.workLoad||100,l=30*h/8,f=i.workerScript||"forge/prime.worker.js";if(-1===c)return n.util.estimateCores((function(t,e){t&&(e=2),c=e-1,d()}));function d(){c=Math.max(1,c);for(var n=[],i=0;i<c;++i)n[i]=new Worker(f);for(i=0;i<c;++i)n[i].addEventListener("message",d);var a=!1;function d(i){if(!a){0;var c=i.data;if(c.found){for(var f=0;f<n.length;++f)n[f].terminate();return a=!0,o(null,new r(c.prime,16))}s.bitLength()>t&&(s=u(t,e));var d=s.toString(16);i.target.postMessage({hex:d,workLoad:h}),s.dAddOffset(l,0)}}}d()}(t,e,i,o);return a(t,e,i,o)}(t,c,o.options,i);throw new Error("Invalid prime generation algorithm: "+o.name)}}function a(t,e,r,n){var i=u(t,e),o=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(i.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var s=10;"maxBlockTime"in r&&(s=r.maxBlockTime),c(i,t,e,0,o,s,n)}function c(t,e,r,o,s,a,h){var l=+new Date;do{if(t.bitLength()>e&&(t=u(e,r)),t.isProbablePrime(s))return h(null,t);t.dAddOffset(i[o++%8],0)}while(a<0||+new Date-l<a);n.util.setImmediate((function(){c(t,e,r,o,s,a,h)}))}function u(t,e){var n=new r(t,e),i=t-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),s,n),n.dAddOffset(31-n.mod(o).byteValue(),0),n}}()},function(t,e,r){"use strict";const{base64:n}=r(116),i=r(282);t.exports={import:async function(t,e){const r=n.decode(t),o=i.create();return await o.decrypt(r,e)}}},function(t,e,r){"use strict";const{sha256:n}=r(72),i=r(9),{equals:o}=r(45),{toString:s}=r(29);r(283);const a=r(16),c=r(490),u=r(167),h=r(172);class l{constructor(t){this._key=t}async verify(t,e){return c.hashAndVerify(this._key,e,t)}marshal(){return c.utils.jwkToPkix(this._key)}get bytes(){return u.PublicKey.encode({Type:u.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(t){return c.encrypt(this._key,t)}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}}class f{constructor(t,e){this._key=t,this._publicKey=e}genSecret(){return c.getRandomValues(16)}async sign(t){return c.hashAndSign(this._key,t)}get public(){if(!this._publicKey)throw i(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new l(this._publicKey)}decrypt(t){return c.decrypt(this._key,t)}marshal(){return c.utils.jwkToPkcs1(this._key)}get bytes(){return u.PrivateKey.encode({Type:u.KeyType.RSA,Data:this.marshal()}).finish()}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}async id(){const t=await this.public.hash();return s(t,"base58btc")}async export(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pkcs-8";if("pkcs-8"===e){const e=new a.util.ByteBuffer(this.marshal()),r=a.asn1.fromDer(e),n=a.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return a.pki.encryptRsaPrivateKey(n,t,i)}if("libp2p-key"===e)return h.export(this.bytes,t);throw i(new Error("export format '".concat(e,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT")}}t.exports={RsaPublicKey:l,RsaPrivateKey:f,unmarshalRsaPublicKey:function(t){const e=c.utils.pkixToJwk(t);return new l(e)},unmarshalRsaPrivateKey:async function(t){const e=c.utils.pkcs1ToJwk(t),r=await c.unmarshalPrivateKey(e);return new f(r.privateKey,r.publicKey)},generateKeyPair:async function(t){const e=await c.generateKey(t);return new f(e.privateKey,e.publicKey)},fromJwk:async function(t){const e=await c.unmarshalPrivateKey(t);return new f(e.privateKey,e.publicKey)}}},function(t,e,r){"use strict";const n=r(119),i=r(122),{toString:o}=r(29),{fromString:s}=r(24);function a(t){return Promise.all([n.get().subtle.exportKey("jwk",t.privateKey),n.get().subtle.exportKey("jwk",t.publicKey)])}e.utils=r(492),e.generateKey=async function(t){const e=await n.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await a(e);return{privateKey:r[0],publicKey:r[1]}},e.unmarshalPrivateKey=async function(t){const e=[await n.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await(r=t,n.get().subtle.importKey("jwk",{kty:r.kty,n:r.n,e:r.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"]))];var r;const i=await a({privateKey:e[0],publicKey:e[1]});return{privateKey:i[0],publicKey:i[1]}},e.getRandomValues=i,e.hashAndSign=async function(t,e){const r=await n.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await n.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)},e.hashAndVerify=async function(t,e,r){const i=await n.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return n.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};const{jwk2pub:c,jwk2priv:u}=r(493);function h(t,e,r,n){const i=e?c(t):u(t),a=n(o(Uint8Array.from(r),"ascii"),i);return s(a,"ascii")}e.encrypt=function(t,e){return h(t,!0,e,((t,e)=>e.encrypt(t)))},e.decrypt=function(t,e){return h(t,!1,e,((t,e)=>e.decrypt(t)))}},function(t,e,r){"use strict";const n=65536;t.exports=function(t){const e=new Uint8Array(t);let r=0;if(t>0)if(t>n)for(;r<t;)r+n>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+n)),r+=n);else crypto.getRandomValues(e);return e}},function(t,e,r){"use strict";r(75),r(121);const n=r(16),{bigIntegerToUintBase64url:i,base64urlToBigInteger:o}=r(171),{fromString:s}=r(24),{toString:a}=r(29);e.pkcs1ToJwk=function(t){const e=n.asn1.fromDer(a(t,"ascii")),r=n.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:i(r.n),e:i(r.e),d:i(r.d),p:i(r.p),q:i(r.q),dp:i(r.dP),dq:i(r.dQ),qi:i(r.qInv),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkcs1=function(t){const e=n.pki.privateKeyToAsn1({n:o(t.n),e:o(t.e),d:o(t.d),p:o(t.p),q:o(t.q),dP:o(t.dp),dQ:o(t.dq),qInv:o(t.qi)});return s(n.asn1.toDer(e).getBytes(),"ascii")},e.pkixToJwk=function(t){const e=n.asn1.fromDer(a(t,"ascii")),r=n.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:i(r.n),e:i(r.e),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkix=function(t){const e=n.pki.publicKeyToAsn1({n:o(t.n),e:o(t.e)});return s(n.asn1.toDer(e).getBytes(),"ascii")}},function(t,e,r){"use strict";r(121);const n=r(16),{base64urlToBigInteger:i}=r(171);function o(t,e){return e.map((e=>i(t[e])))}t.exports={jwk2pub:function(t){return n.pki.setRsaPublicKey(...o(t,["n","e"]))},jwk2priv:function(t){return n.pki.setRsaPrivateKey(...o(t,["n","e","d","p","q","dp","dq","qi"]))}}},function(t,e,r){"use strict";const n=r(9),{equals:i}=r(45),{sha256:o}=r(72),{base58btc:s}=r(71),{identity:a}=r(103),c=r(495),u=r(167),h=r(172);class l{constructor(t){this._key=d(t,c.publicKeyLength)}async verify(t,e){return c.hashAndVerify(this._key,e,t)}marshal(){return this._key}get bytes(){return u.PublicKey.encode({Type:u.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return i(this.bytes,t.bytes)}async hash(){const{bytes:t}=await o.digest(this.bytes);return t}}class f{constructor(t,e){this._key=d(t,c.privateKeyLength),this._publicKey=d(e,c.publicKeyLength)}async sign(t){return c.hashAndSign(this._key,t)}get public(){return new l(this._publicKey)}marshal(){return this._key}get bytes(){return u.PrivateKey.encode({Type:u.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return i(this.bytes,t.bytes)}async hash(){const{bytes:t}=await o.digest(this.bytes);return t}async id(){const t=await a.digest(this.public.bytes);return s.encode(t.bytes).substring(1)}async export(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===e)return h.export(this.bytes,t);throw n(new Error("export format '".concat(e,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT")}}function d(t,e){if((t=Uint8Array.from(t||[])).length!==e)throw n(new Error("Key must be a Uint8Array of length ".concat(e,", got ").concat(t.length)),"ERR_INVALID_KEY_TYPE");return t}t.exports={Ed25519PublicKey:l,Ed25519PrivateKey:f,unmarshalEd25519PrivateKey:function(t){if(t.length>c.privateKeyLength){const e=(t=d(t,c.privateKeyLength+c.publicKeyLength)).slice(0,c.privateKeyLength),r=t.slice(c.privateKeyLength,t.length);return new f(e,r)}const e=(t=d(t,c.privateKeyLength)).slice(0,c.privateKeyLength),r=t.slice(c.publicKeyLength);return new f(e,r)},unmarshalEd25519PublicKey:function(t){return t=d(t,c.publicKeyLength),new l(t)},generateKeyPair:async function(){const{privateKey:t,publicKey:e}=await c.generateKey();return new f(t,e)},generateKeyPairFromSeed:async function(t){const{privateKey:e,publicKey:r}=await c.generateKeyFromSeed(t);return new f(e,r)}}},function(t,e,r){"use strict";const n=r(496);function i(t,r){const n=new Uint8Array(e.privateKeyLength);for(let e=0;e<32;e++)n[e]=t[e],n[32+e]=r[e];return n}e.publicKeyLength=32,e.privateKeyLength=64,e.generateKey=async function(){const t=n.utils.randomPrivateKey(),e=await n.getPublicKey(t);return{privateKey:i(t,e),publicKey:e}},e.generateKeyFromSeed=async function(t){if(32!==t.length)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=await n.getPublicKey(e);return{privateKey:i(e,r),publicKey:r}},e.hashAndSign=function(t,e){const r=t.slice(0,32);return n.sign(e,r)},e.hashAndVerify=function(t,e,r){return n.verify(e,r,t)}},function(t,e,r){"use strict";r.r(e),r.d(e,"CURVE",(function(){return h})),r.d(e,"ExtendedPoint",(function(){return g})),r.d(e,"RistrettoPoint",(function(){return _})),r.d(e,"Point",(function(){return E})),r.d(e,"Signature",(function(){return A})),r.d(e,"getPublicKey",(function(){return H})),r.d(e,"sign",(function(){return G})),r.d(e,"verify",(function(){return W})),r.d(e,"getSharedSecret",(function(){return J})),r.d(e,"curve25519",(function(){return Z})),r.d(e,"utils",(function(){return Q}));var n=r(191),i=r.n(n);const o=BigInt(0),s=BigInt(1),a=BigInt(2),c=BigInt(255),u=a**BigInt(252)+BigInt("27742317777372353535851937790883648493"),h={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:a**c-BigInt(19),l:u,n:u,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},l=a**BigInt(256),f=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),d=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),p=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),m=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),y=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class g{constructor(t,e,r,n){this.x=t,this.y=e,this.z=r,this.t=n}static fromAffine(t){if(!(t instanceof E))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(E.ZERO)?g.ZERO:new g(t.x,t.y,s,D(t.x*t.y))}static toAffineBatch(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;const r=new Array(t.length),n=B(t.reduce(((t,n,i)=>n===o?t:(r[i]=t,D(t*n,e))),s),e);return t.reduceRight(((t,n,i)=>n===o?t:(r[i]=D(t*r[i],e),D(t*n,e))),n),r}(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){b(t);const{x:e,y:r,z:n}=this,{x:i,y:o,z:s}=t,a=D(e*s),c=D(i*n),u=D(r*s),h=D(o*n);return a===c&&u===h}negate(){return new g(D(-this.x),this.y,this.z,D(-this.t))}double(){const{x:t,y:e,z:r}=this,{a:n}=h,i=D(t**a),o=D(e**a),s=D(a*D(r**a)),c=D(n*i),u=D(D((t+e)**a)-i-o),l=c+o,f=l-s,d=c-o,p=D(u*f),m=D(l*d),y=D(u*d),b=D(f*l);return new g(p,m,b,y)}add(t){b(t);const{x:e,y:r,z:n,t:i}=this,{x:s,y:c,z:u,t:h}=t,l=D((r-e)*(c+s)),f=D((r+e)*(c-s)),d=D(f-l);if(d===o)return this.double();const p=D(n*a*h),m=D(i*a*u),y=m+p,v=f+l,w=m-p,_=D(y*d),S=D(v*w),E=D(y*w),A=D(d*v);return new g(_,S,A,E)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,r=[];let n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(g.BASE)&&(e=E.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&S.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=g.normalizeZ(n),S.set(e,n)));let i=g.ZERO,o=g.ZERO;const a=1+256/r,c=2**(r-1),u=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let f=0;f<a;f++){const e=f*c;let r=Number(t&u);if(t>>=l,r>c&&(r-=h,t+=s),0===r){let t=n[e];f%2&&(t=t.negate()),o=o.add(t)}else{let t=n[e+Math.abs(r)-1];r<0&&(t=t.negate()),i=i.add(t)}}return g.normalizeZ([i,o])[0]}multiply(t,e){return this.wNAF(q(t,h.l),e)}multiplyUnsafe(t){let e=q(t,h.l,!1);const r=g.BASE,n=g.ZERO;if(e===o)return n;if(this.equals(n)||e===s)return this;if(this.equals(r))return this.wNAF(e);let i=n,a=this;for(;e>o;)e&s&&(i=i.add(a)),a=a.double(),e>>=s;return i}isSmallOrder(){return this.multiplyUnsafe(h.h).equals(g.ZERO)}isTorsionFree(){return this.multiplyUnsafe(h.l).equals(g.ZERO)}toAffine(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(this.z);const{x:e,y:r,z:n}=this,i=D(e*t),o=D(r*t);if(D(n*t)!==s)throw new Error("invZ was invalid");return new E(i,o)}fromRistrettoBytes(){w()}toRistrettoBytes(){w()}fromRistrettoHash(){w()}}function b(t){if(!(t instanceof g))throw new TypeError("ExtendedPoint expected")}function v(t){if(!(t instanceof _))throw new TypeError("RistrettoPoint expected")}function w(){throw new Error("Legacy method: switch to RistrettoPoint")}g.BASE=new g(h.Gx,h.Gy,s,D(h.Gx*h.Gy)),g.ZERO=new g(o,s,s,o);class _{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=h,r=D(f*t*t),n=D((r+s)*m);let i=BigInt(-1);const o=D((i-e*r)*D(r+e));let{isValid:a,value:c}=U(n,o),u=D(c*t);k(u)||(u=D(-u)),a||(c=u),a||(i=r);const l=D(i*(r-s)*y-o),p=c*c,b=D((c+c)*o),v=D(l*d),w=D(s-p),_=D(s+p);return new g(D(b*_),D(w*v),D(v*_),D(b*w))}static hashToCurve(t){const e=N((t=F(t,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(e),n=N(t.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new _(r.add(i))}static fromHex(t){t=F(t,32);const{a:e,d:r}=h,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=N(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(O(i),t)||k(i))throw new Error(n);const a=D(i*i),c=D(s+e*a),u=D(s-e*a),l=D(c*c),f=D(u*u),d=D(e*r*l-f),{isValid:p,value:m}=j(D(d*f)),y=D(m*u),b=D(m*y*d);let v=D((i+i)*y);k(v)&&(v=D(-v));const w=D(c*b),S=D(v*w);if(!p||k(S)||w===o)throw new Error(n);return new _(new g(v,w,s,S))}toRawBytes(){let{x:t,y:e,z:r,t:n}=this.ep;const i=D(D(r+e)*D(r-e)),o=D(t*e),{value:s}=j(D(i*o**a)),c=D(s*i),u=D(s*o),h=D(c*u*n);let l;if(k(n*h)){let r=D(e*f),n=D(t*f);t=r,e=n,l=D(c*p)}else l=u;k(t*h)&&(e=D(-e));let d=D((r-e)*l);return k(d)&&(d=D(-d)),O(d)}toHex(){return R(this.toRawBytes())}toString(){return this.toHex()}equals(t){v(t);const e=this.ep,r=t.ep,n=D(e.x*r.y)===D(e.y*r.x),i=D(e.y*r.y)===D(e.x*r.x);return n||i}add(t){return v(t),new _(this.ep.add(t.ep))}subtract(t){return v(t),new _(this.ep.subtract(t.ep))}multiply(t){return new _(this.ep.multiply(t))}multiplyUnsafe(t){return new _(this.ep.multiplyUnsafe(t))}}_.BASE=new _(g.BASE),_.ZERO=new _(g.ZERO);const S=new WeakMap;class E{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,S.delete(this)}static fromHex(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{d:r,P:n}=h,i=(t=F(t,32)).slice();i[31]=-129&t[31];const o=P(i);if(e&&o>=n)throw new Error("Expected 0 < hex < P");if(!e&&o>=l)throw new Error("Expected 0 < hex < 2**256");const a=D(o*o),c=D(a-s),u=D(r*a+s);let{isValid:f,value:d}=U(c,u);if(!f)throw new Error("Point.fromHex: invalid y coordinate");const p=(d&s)===s;return 0!==(128&t[31])!==p&&(d=D(-d)),new E(d,o)}static async fromPrivateKey(t){return(await z(t)).point}toRawBytes(){const t=O(this.y);return t[31]|=this.x&s?128:0,t}toHex(){return R(this.toRawBytes())}toX25519(){const{y:t}=this;return O(D((s+t)*B(s-t)))}isTorsionFree(){return g.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new E(D(-this.x),this.y)}add(t){return g.fromAffine(this).add(g.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return g.fromAffine(this).multiply(t,this).toAffine()}}E.BASE=new E(h.Gx,h.Gy),E.ZERO=new E(o,s);class A{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=F(t,64),r=E.fromHex(e.slice(0,32),!1),n=P(e.slice(32,64));return new A(r,n)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof E))throw new Error("Expected Point instance");return q(e,h.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(O(this.s),32),t}toHex(){return R(this.toRawBytes())}}function M(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(!e.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const n=e.reduce(((t,e)=>t+e.length),0),i=new Uint8Array(n);for(let o=0,s=0;o<e.length;o++){const t=e[o];i.set(t,s),s+=t.length}return i}const I=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function R(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=I[t[r]];return e}function T(t){if("string"!==typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function C(t){return T(t.toString(16).padStart(64,"0"))}function O(t){return C(t).reverse()}function k(t){return(D(t)&s)===s}function P(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+R(Uint8Array.from(t).reverse()))}function N(t){return D(P(t)&a**c-s)}function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;const r=t%e;return r>=o?r:e+r}function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;if(t===o||e<=o)throw new Error("invert: expected positive integers, got n=".concat(t," mod=").concat(e));let r=D(t,e),n=e,i=o,a=s,c=s,u=o;for(;r!==o;){const t=n/r,e=n%r,o=i-c*t,s=a-u*t;n=r,r=e,i=c,a=u,c=o,u=s}const l=n;if(l!==s)throw new Error("invert: does not exist");return D(i,e)}function x(t,e){const{P:r}=h;let n=t;for(;e-- >o;)n*=n,n%=r;return n}function L(t){const{P:e}=h,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),c=BigInt(80),u=t*t%e*t%e,l=x(u,a)*u%e,f=x(l,s)*t%e,d=x(f,r)*f%e,p=x(d,n)*d%e,m=x(p,i)*p%e,y=x(m,o)*m%e,g=x(y,c)*y%e,b=x(g,c)*y%e,v=x(b,n)*d%e;return{pow_p_5_8:x(v,a)*t%e,b2:u}}function U(t,e){const r=D(e*e*e),n=D(r*r*e);let i=D(t*r*L(t*n).pow_p_5_8);const o=D(e*i*i),s=i,a=D(i*f),c=o===t,u=o===D(-t),h=o===D(-t*f);return c&&(i=s),(u||h)&&(i=a),k(i)&&(i=D(-i)),{isValid:c||u,value:i}}function j(t){return U(s,t)}async function K(){const t=await Q.sha512(M(...arguments)),e=P(t);return D(e,h.l)}function F(t,e){const r=t instanceof Uint8Array?Uint8Array.from(t):T(t);if("number"===typeof e&&r.length!==e)throw new Error("Expected ".concat(e," bytes"));return r}function q(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)throw new TypeError("Specify max value");if("number"===typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"===typeof t&&t<e)if(r){if(o<t)return t}else if(o<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function V(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}async function z(t){if(32!==(t="bigint"===typeof t||"number"===typeof t?C(q(t,l)):F(t)).length)throw new Error("Expected 32 bytes");const e=await Q.sha512(t),r=V(e.slice(0,32)),n=e.slice(32,64),i=D(P(r),h.l),o=E.BASE.multiply(i),s=o.toRawBytes();return{head:r,prefix:n,scalar:i,point:o,pointBytes:s}}async function H(t){return(await z(t)).pointBytes}async function G(t,e){t=F(t);const{prefix:r,scalar:n,pointBytes:i}=await z(e),o=await K(r,t),s=E.BASE.multiply(o),a=D(o+await K(s.toRawBytes(),i,t)*n,h.l);return new A(s,a).toRawBytes()}async function W(t,e,r){e=F(e),r instanceof E||(r=E.fromHex(r,!1));const{r:n,s:i}=t instanceof A?t.assertValidity():A.fromHex(t),o=g.BASE.multiplyUnsafe(i),s=await K(n.toRawBytes(),r.toRawBytes(),e),a=g.fromAffine(r).multiplyUnsafe(s);return g.fromAffine(n).add(a).subtract(o).multiplyUnsafe(h.h).equals(g.ZERO)}async function J(t,e){const{head:r}=await z(t),n=E.fromHex(e).toX25519();return Z.scalarMult(r,n)}function Y(t,e,r){const n=D(t*(e-r));return[e=D(e-n),r=D(r+n)]}E.BASE._setWindowSize(8);const Z={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const r=function(t,e){const{P:r}=h,n=q(t,r),i=q(e,r),c=BigInt(121665),u=n;let l,f=s,d=o,p=n,m=s,y=o;for(let h=BigInt(254);h>=o;h--){const t=i>>h&s;y^=t,l=Y(y,f,p),f=l[0],p=l[1],l=Y(y,d,m),d=l[0],m=l[1],y=t;const e=f+d,r=D(e*e),n=f-d,o=D(n*n),g=r-o,b=p+m,v=D((p-m)*e),w=D(b*n);p=D((v+w)**a),m=D(u*(v-w)**a),f=D(r*o),d=D(g*(r+D(c*g)))}l=Y(y,f,p),f=l[0],p=l[1],l=Y(y,d,m),d=l[0],m=l[1];const{pow_p_5_8:g,b2:b}=L(d),v=D(x(g,BigInt(3))*b);return D(f*v)}(function(t){const e=F(t,32);return e[31]&=127,P(e)}(e),P(V(F(t,32))));if(r===o)throw new Error("Invalid private or public key received");return function(t){return O(D(t,h.P))}(r)},scalarMultBase:t=>Z.scalarMult(t,Z.BASE_POINT_U)},X={node:i.a,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Q={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:R,getExtendedPublicKey:z,mod:D,invert:B,hashToPrivateScalar:t=>{if((t=F(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=D(P(t),h.l);if(e===o||e===s)throw new Error("Invalid private key");return e},randomBytes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(X.web)return X.web.getRandomValues(new Uint8Array(t));if(X.node){const{randomBytes:e}=X.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Q.randomBytes(32),sha512:async t=>{if(X.web){const e=await X.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(X.node)return Uint8Array.from(X.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.BASE;const r=e.equals(E.BASE)?e:new E(e.x,e.y);return r._setWindowSize(t),r.multiply(a),r}}},function(t,e,r){"use strict";const{sha256:n}=r(72),i=r(9),{equals:o}=r(45),{toString:s}=r(29),a=r(172);t.exports=(t,e,c)=>{c=c||r(498)();class u{constructor(t){c.validatePublicKey(t),this._key=t}verify(t,e){return c.hashAndVerify(this._key,e,t)}marshal(){return c.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}}class h{constructor(t,e){this._key=t,this._publicKey=e||c.computePublicKey(t),c.validatePrivateKey(this._key),c.validatePublicKey(this._publicKey)}sign(t){return c.hashAndSign(this._key,t)}get public(){return new u(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}async id(){const t=await this.public.hash();return s(t,"base58btc")}async export(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===e)return a.export(this.bytes,t);throw i(new Error("export format '".concat(e,"' is not supported")),"ERR_INVALID_EXPORT_FORMAT")}}return{Secp256k1PublicKey:u,Secp256k1PrivateKey:h,unmarshalSecp256k1PrivateKey:function(t){return new h(t)},unmarshalSecp256k1PublicKey:function(t){return new u(t)},generateKeyPair:async function(){const t=await c.generateKey();return new h(t)}}}},function(t,e,r){"use strict";const n=r(9),i=r(17),{sha256:o}=r(72);t.exports=()=>({generateKey:function(){return i.utils.randomPrivateKey()},privateKeyLength:32,hashAndSign:async function(t,e){const{digest:r}=await o.digest(e);try{return await i.sign(r,t)}catch(s){throw n(s,"ERR_INVALID_INPUT")}},hashAndVerify:async function(t,e,r){try{const{digest:n}=await o.digest(r);return i.verify(e,n,t)}catch(s){throw n(s,"ERR_INVALID_INPUT")}},compressPublicKey:function(t){return i.Point.fromHex(t).toRawBytes(!0)},decompressPublicKey:function(t){return i.Point.fromHex(t).toRawBytes(!1)},validatePrivateKey:function(t){try{i.getPublicKey(t,!0)}catch(e){throw n(e,"ERR_INVALID_PRIVATE_KEY")}},validatePublicKey:function(t){try{i.Point.fromHex(t)}catch(e){throw n(e,"ERR_INVALID_PUBLIC_KEY")}},computePublicKey:function(t){try{return i.getPublicKey(t,!0)}catch(e){throw n(e,"ERR_INVALID_PRIVATE_KEY")}}})},function(t,e,r){"use strict";const n=r(9),{concat:i}=r(25),{fromString:o}=r(24),s=r(277),a={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};t.exports=async(t,e,r)=>{const c=a[t];if(!c){const e=Object.keys(a).join(" / ");throw n(new Error("unknown cipher type '".concat(t,"'. Must be ").concat(e)),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw n(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");const u=c.keySize,h=c.ivSize,l=o("key expansion"),f=2*(h+u+20),d=await s.create(e,r);let p=await d.digest(l);const m=[];let y=0;for(;y<f;){const t=await d.digest(i([p,l]));let e=t.length;y+e>f&&(e=f-y),m.push(t),y+=e,p=await d.digest(p)}const g=f/2,b=i(m),v=b.slice(0,g),w=b.slice(g,f),_=t=>({iv:t.slice(0,h),cipherKey:t.slice(h,h+u),macKey:t.slice(h+u)});return{k1:_(v),k2:_(w)}}},function(t,e,r){"use strict";const n=r(501);t.exports=async t=>n.generateEphmeralKeyPair(t)},function(t,e,r){"use strict";const n=r(9),i=r(119),{base64urlToBuffer:o}=r(171),s=r(502),{toString:a}=r(29),{concat:c}=r(25),{equals:u}=r(45),h={"P-256":256,"P-384":384,"P-521":521};e.generateEphmeralKeyPair=async function(t){s(Object.keys(h),t);const e=await i.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]);return{key:f(await i.get().subtle.exportKey("jwk",e.publicKey)),genSharedKey:async(r,n)=>{let o;o=n?await i.get().subtle.importKey("jwk",p(t,n),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):e.privateKey;const s=[await i.get().subtle.importKey("jwk",d(t,r),{name:"ECDH",namedCurve:t},!1,[]),o],a=await i.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:s[0]},s[1],h[t]);return new Uint8Array(a,a.byteOffset,a.byteLength)}}};const l={"P-256":32,"P-384":48,"P-521":66};function f(t){const e=l[t.crv];return c([Uint8Array.from([4]),o(t.x,e),o(t.y,e)],1+2*e)}function d(t,e){const r=l[t];if(u(!e.slice(0,1),Uint8Array.from([4])))throw n(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:a(e.slice(1,r+1),"base64url"),y:a(e.slice(1+r),"base64url"),ext:!0}}const p=(t,e)=>({...d(t,e.public),d:a(e.private,"base64url")})},function(t,e,r){"use strict";const n=r(9);t.exports=function(t,e){if(!t.includes(e)){const r=t.join(" / ");throw n(new Error("Unknown curve: ".concat(e,". Must be ").concat(r)),"ERR_INVALID_CURVE")}}},function(t,e,r){"use strict";const n=r(281),i=r(28),o=r(9),s={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};t.exports=function(t,e,r,a,c){const u=s[c];if(!u){const t=Object.keys(s).join(" / ");throw o(new Error("Hash '".concat(c,"' is unknown or not supported. Must be ").concat(t)),"ERR_UNSUPPORTED_HASH_TYPE")}const h=n(t,e,r,a,u);return i.encode64(h)}},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-peer-id"]||(n.roots["libp2p-peer-id"]={});a.PeerIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.id=s.newBuffer([]),t.prototype.pubKey=s.newBuffer([]),t.prototype.privKey=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),e.uint32(10).bytes(t.id),null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(18).bytes(t.pubKey),null!=t.privKey&&Object.hasOwnProperty.call(t,"privKey")&&e.uint32(26).bytes(t.privKey),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.PeerIdProto;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.id=t.bytes();break;case 2:n.pubKey=t.bytes();break;case 3:n.privKey=t.bytes();break;default:t.skipType(7&o)}}if(!n.hasOwnProperty("id"))throw s.ProtocolError("missing required 'id'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.PeerIdProto)return t;var e=new a.PeerIdProto;return null!=t.id&&("string"===typeof t.id?s.base64.decode(t.id,e.id=s.newBuffer(s.base64.length(t.id)),0):t.id.length&&(e.id=t.id)),null!=t.pubKey&&("string"===typeof t.pubKey?s.base64.decode(t.pubKey,e.pubKey=s.newBuffer(s.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.privKey&&("string"===typeof t.privKey?s.base64.decode(t.privKey,e.privKey=s.newBuffer(s.base64.length(t.privKey)),0):t.privKey.length&&(e.privKey=t.privKey)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.id="":(r.id=[],e.bytes!==Array&&(r.id=s.newBuffer(r.id))),e.bytes===String?r.pubKey="":(r.pubKey=[],e.bytes!==Array&&(r.pubKey=s.newBuffer(r.pubKey))),e.bytes===String?r.privKey="":(r.privKey=[],e.bytes!==Array&&(r.privKey=s.newBuffer(r.privKey)))),null!=t.id&&t.hasOwnProperty("id")&&(r.id=e.bytes===String?s.base64.encode(t.id,0,t.id.length):e.bytes===Array?Array.prototype.slice.call(t.id):t.id),null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(r.pubKey=e.bytes===String?s.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey),null!=t.privKey&&t.hasOwnProperty("privKey")&&(r.privKey=e.bytes===String?s.base64.encode(t.privKey,0,t.privKey.length):e.bytes===Array?Array.prototype.slice.call(t.privKey):t.privKey),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},function(t,e,r){"use strict";const n=r(19).Buffer,i=r(506),o=r(507),s=r(508),a=r(509),c=r(510),u=r(511),h=32768,l=e.name={};l.encode=function(t,e,r){e||(e=n.alloc(l.encodingLength(t))),r||(r=0);const i=r,o=t.replace(/^\.|\.$/gm,"");if(o.length){const t=o.split(".");for(let n=0;n<t.length;n++){const i=e.write(t[n],r+1);e[r]=i,r+=i+1}}return e[r++]=0,l.encode.bytes=r-i,e},l.encode.bytes=0,l.decode=function(t,e){e||(e=0);const r=[];let n=e,i=0,o=0,s=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");const a=t[e++];if(o+=s?0:1,0===a)break;if(0===(192&a)){if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(i+=a+1,i>254)throw new Error("Cannot decode name (name too long)");r.push(t.toString("utf-8",e,e+a)),e+=a,o+=s?0:a}else{if(192!==(192&a))throw new Error("Cannot decode name (bad label)");{if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");const r=t.readUInt16BE(e-1)-49152;if(r>=n)throw new Error("Cannot decode name (bad pointer)");e=r,n=r,o+=s?0:1,s=!0}}}return l.decode.bytes=o,0===r.length?".":r.join(".")},l.decode.bytes=0,l.encodingLength=function(t){return"."===t||".."===t?1:n.byteLength(t.replace(/^\.|\.$/gm,""))+2};const f={encode:function(t,e,r){e||(e=n.alloc(f.encodingLength(t))),r||(r=0);const i=e.write(t,r+1);return e[r]=i,f.encode.bytes=i+1,e}};f.encode.bytes=0,f.decode=function(t,e){e||(e=0);const r=t[e],n=t.toString("utf-8",e+1,e+1+r);return f.decode.bytes=r+1,n},f.decode.bytes=0,f.encodingLength=function(t){return n.byteLength(t)+1};const d={encode:function(t,e,r){e||(e=d.encodingLength(t)),r||(r=0);const n=32767&(t.flags||0),i="response"===t.type?32768:0;return e.writeUInt16BE(t.id||0,r),e.writeUInt16BE(n|i,r+2),e.writeUInt16BE(t.questions.length,r+4),e.writeUInt16BE(t.answers.length,r+6),e.writeUInt16BE(t.authorities.length,r+8),e.writeUInt16BE(t.additionals.length,r+10),e}};d.encode.bytes=12,d.decode=function(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");const r=t.readUInt16BE(e+2);return{id:t.readUInt16BE(e),type:32768&r?"response":"query",flags:32767&r,flag_qr:1===(r>>15&1),opcode:s.toString(r>>11&15),flag_aa:1===(r>>10&1),flag_tc:1===(r>>9&1),flag_rd:1===(r>>8&1),flag_ra:1===(r>>7&1),flag_z:1===(r>>6&1),flag_ad:1===(r>>5&1),flag_cd:1===(r>>4&1),rcode:o.toString(15&r),questions:new Array(t.readUInt16BE(e+4)),answers:new Array(t.readUInt16BE(e+6)),authorities:new Array(t.readUInt16BE(e+8)),additionals:new Array(t.readUInt16BE(e+10))}},d.decode.bytes=12,d.encodingLength=function(){return 12};const p=e.unknown={};p.encode=function(t,e,r){return e||(e=n.alloc(p.encodingLength(t))),r||(r=0),e.writeUInt16BE(t.length,r),t.copy(e,r+2),p.encode.bytes=t.length+2,e},p.encode.bytes=0,p.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e),n=t.slice(e+2,e+2+r);return p.decode.bytes=r+2,n},p.decode.bytes=0,p.encodingLength=function(t){return t.length+2};const m=e.ns={};m.encode=function(t,e,r){return e||(e=n.alloc(m.encodingLength(t))),r||(r=0),l.encode(t,e,r+2),e.writeUInt16BE(l.encode.bytes,r),m.encode.bytes=l.encode.bytes+2,e},m.encode.bytes=0,m.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e),n=l.decode(t,e+2);return m.decode.bytes=r+2,n},m.decode.bytes=0,m.encodingLength=function(t){return l.encodingLength(t)+2};const y=e.soa={};y.encode=function(t,e,r){e||(e=n.alloc(y.encodingLength(t))),r||(r=0);const i=r;return r+=2,l.encode(t.mname,e,r),r+=l.encode.bytes,l.encode(t.rname,e,r),r+=l.encode.bytes,e.writeUInt32BE(t.serial||0,r),r+=4,e.writeUInt32BE(t.refresh||0,r),r+=4,e.writeUInt32BE(t.retry||0,r),r+=4,e.writeUInt32BE(t.expire||0,r),r+=4,e.writeUInt32BE(t.minimum||0,r),r+=4,e.writeUInt16BE(r-i-2,i),y.encode.bytes=r-i,e},y.encode.bytes=0,y.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.mname=l.decode(t,e),e+=l.decode.bytes,n.rname=l.decode(t,e),e+=l.decode.bytes,n.serial=t.readUInt32BE(e),e+=4,n.refresh=t.readUInt32BE(e),e+=4,n.retry=t.readUInt32BE(e),e+=4,n.expire=t.readUInt32BE(e),e+=4,n.minimum=t.readUInt32BE(e),e+=4,y.decode.bytes=e-r,n},y.decode.bytes=0,y.encodingLength=function(t){return 22+l.encodingLength(t.mname)+l.encodingLength(t.rname)};const g=e.txt={};g.encode=function(t,e,r){Array.isArray(t)||(t=[t]);for(let o=0;o<t.length;o++)if("string"===typeof t[o]&&(t[o]=n.from(t[o])),!n.isBuffer(t[o]))throw new Error("Must be a Buffer");e||(e=n.alloc(g.encodingLength(t))),r||(r=0);const i=r;return r+=2,t.forEach((function(t){e[r++]=t.length,t.copy(e,r,0,t.length),r+=t.length})),e.writeUInt16BE(r-i-2,i),g.encode.bytes=r-i,e},g.encode.bytes=0,g.decode=function(t,e){e||(e=0);const r=e;let n=t.readUInt16BE(e);e+=2;let i=[];for(;n>0;){const r=t[e++];if(--n,n<r)throw new Error("Buffer overflow");i.push(t.slice(e,e+r)),e+=r,n-=r}return g.decode.bytes=e-r,i},g.decode.bytes=0,g.encodingLength=function(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach((function(t){e+="string"===typeof t?n.byteLength(t)+1:t.length+1})),e};const b=e.null={};b.encode=function(t,e,r){e||(e=n.alloc(b.encodingLength(t))),r||(r=0),"string"===typeof t&&(t=n.from(t)),t||(t=n.alloc(0));const i=r;r+=2;const o=t.length;return t.copy(e,r,0,o),r+=o,e.writeUInt16BE(r-i-2,i),b.encode.bytes=r-i,e},b.encode.bytes=0,b.decode=function(t,e){e||(e=0);const r=e,n=t.readUInt16BE(e);e+=2;const i=t.slice(e,e+n);return e+=n,b.decode.bytes=e-r,i},b.decode.bytes=0,b.encodingLength=function(t){return t?(n.isBuffer(t)?t.length:n.byteLength(t))+2:2};const v=e.hinfo={};v.encode=function(t,e,r){e||(e=n.alloc(v.encodingLength(t))),r||(r=0);const i=r;return r+=2,f.encode(t.cpu,e,r),r+=f.encode.bytes,f.encode(t.os,e,r),r+=f.encode.bytes,e.writeUInt16BE(r-i-2,i),v.encode.bytes=r-i,e},v.encode.bytes=0,v.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.cpu=f.decode(t,e),e+=f.decode.bytes,n.os=f.decode(t,e),e+=f.decode.bytes,v.decode.bytes=e-r,n},v.decode.bytes=0,v.encodingLength=function(t){return f.encodingLength(t.cpu)+f.encodingLength(t.os)+2};const w=e.ptr={},_=e.cname=w,S=e.dname=w;w.encode=function(t,e,r){return e||(e=n.alloc(w.encodingLength(t))),r||(r=0),l.encode(t,e,r+2),e.writeUInt16BE(l.encode.bytes,r),w.encode.bytes=l.encode.bytes+2,e},w.encode.bytes=0,w.decode=function(t,e){e||(e=0);const r=l.decode(t,e+2);return w.decode.bytes=l.decode.bytes+2,r},w.decode.bytes=0,w.encodingLength=function(t){return l.encodingLength(t)+2};const E=e.srv={};E.encode=function(t,e,r){e||(e=n.alloc(E.encodingLength(t))),r||(r=0),e.writeUInt16BE(t.priority||0,r+2),e.writeUInt16BE(t.weight||0,r+4),e.writeUInt16BE(t.port||0,r+6),l.encode(t.target,e,r+8);const i=l.encode.bytes+6;return e.writeUInt16BE(i,r),E.encode.bytes=i+2,e},E.encode.bytes=0,E.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e),n={};return n.priority=t.readUInt16BE(e+2),n.weight=t.readUInt16BE(e+4),n.port=t.readUInt16BE(e+6),n.target=l.decode(t,e+8),E.decode.bytes=r+2,n},E.decode.bytes=0,E.encodingLength=function(t){return 8+l.encodingLength(t.target)};const A=e.caa={};A.ISSUER_CRITICAL=128,A.encode=function(t,e,r){const i=A.encodingLength(t);return e||(e=n.alloc(A.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=A.ISSUER_CRITICAL),e.writeUInt16BE(i-2,r),r+=2,e.writeUInt8(t.flags||0,r),r+=1,f.encode(t.tag,e,r),r+=f.encode.bytes,e.write(t.value,r),r+=n.byteLength(t.value),A.encode.bytes=i,e},A.encode.bytes=0,A.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e),n=e+=2,i={};return i.flags=t.readUInt8(e),e+=1,i.tag=f.decode(t,e),e+=f.decode.bytes,i.value=t.toString("utf-8",e,n+r),i.issuerCritical=!!(i.flags&A.ISSUER_CRITICAL),A.decode.bytes=r+2,i},A.decode.bytes=0,A.encodingLength=function(t){return f.encodingLength(t.tag)+f.encodingLength(t.value)+2};const M=e.mx={};M.encode=function(t,e,r){e||(e=n.alloc(M.encodingLength(t))),r||(r=0);const i=r;return r+=2,e.writeUInt16BE(t.preference||0,r),r+=2,l.encode(t.exchange,e,r),r+=l.encode.bytes,e.writeUInt16BE(r-i-2,i),M.encode.bytes=r-i,e},M.encode.bytes=0,M.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.preference=t.readUInt16BE(e),e+=2,n.exchange=l.decode(t,e),e+=l.decode.bytes,M.decode.bytes=e-r,n},M.encodingLength=function(t){return 4+l.encodingLength(t.exchange)};const I=e.a={};I.encode=function(t,e,r){return e||(e=n.alloc(I.encodingLength(t))),r||(r=0),e.writeUInt16BE(4,r),r+=2,u.v4.encode(t,e,r),I.encode.bytes=6,e},I.encode.bytes=0,I.decode=function(t,e){e||(e=0),e+=2;const r=u.v4.decode(t,e);return I.decode.bytes=6,r},I.decode.bytes=0,I.encodingLength=function(){return 6};const R=e.aaaa={};R.encode=function(t,e,r){return e||(e=n.alloc(R.encodingLength(t))),r||(r=0),e.writeUInt16BE(16,r),r+=2,u.v6.encode(t,e,r),R.encode.bytes=18,e},R.encode.bytes=0,R.decode=function(t,e){e||(e=0),e+=2;const r=u.v6.decode(t,e);return R.decode.bytes=18,r},R.decode.bytes=0,R.encodingLength=function(){return 18};const T=e.option={};T.encode=function(t,e,r){e||(e=n.alloc(T.encodingLength(t))),r||(r=0);const i=r,o=c.toCode(t.code);if(e.writeUInt16BE(o,r),r+=2,t.data)e.writeUInt16BE(t.data.length,r),r+=2,t.data.copy(e,r),r+=t.data.length;else switch(o){case 8:const i=t.sourcePrefixLength||0,o=t.family||u.familyOf(t.ip),s=u.encode(t.ip,n.alloc),a=Math.ceil(i/8);e.writeUInt16BE(a+4,r),r+=2,e.writeUInt16BE(o,r),r+=2,e.writeUInt8(i,r++),e.writeUInt8(t.scopePrefixLength||0,r++),s.copy(e,r,0,a),r+=a;break;case 11:t.timeout?(e.writeUInt16BE(2,r),r+=2,e.writeUInt16BE(t.timeout,r),r+=2):(e.writeUInt16BE(0,r),r+=2);break;case 12:const c=t.length||0;e.writeUInt16BE(c,r),r+=2,e.fill(0,r,r+c),r+=c;break;case 14:const h=2*t.tags.length;e.writeUInt16BE(h,r),r+=2;for(const n of t.tags)e.writeUInt16BE(n,r),r+=2;break;default:throw new Error("Unknown roption code: ".concat(t.code))}return T.encode.bytes=r-i,e},T.encode.bytes=0,T.decode=function(t,e){e||(e=0);const r={};r.code=t.readUInt16BE(e),r.type=c.toString(r.code),e+=2;const i=t.readUInt16BE(e);switch(e+=2,r.data=t.slice(e,e+i),r.code){case 8:r.family=t.readUInt16BE(e),e+=2,r.sourcePrefixLength=t.readUInt8(e++),r.scopePrefixLength=t.readUInt8(e++);const o=n.alloc(1===r.family?4:16);t.copy(o,0,e,e+i-4),r.ip=u.decode(o);break;case 11:i>0&&(r.timeout=t.readUInt16BE(e),e+=2);break;case 14:r.tags=[];for(let n=0;n<i;n+=2)r.tags.push(t.readUInt16BE(e)),e+=2}return T.decode.bytes=i+4,r},T.decode.bytes=0,T.encodingLength=function(t){if(t.data)return t.data.length+4;switch(c.toCode(t.code)){case 8:const e=t.sourcePrefixLength||0;return Math.ceil(e/8)+8;case 11:return"number"===typeof t.timeout?6:4;case 12:return t.length+4;case 14:return 4+2*t.tags.length}throw new Error("Unknown roption code: ".concat(t.code))};const C=e.opt={};C.encode=function(t,e,r){e||(e=n.alloc(C.encodingLength(t))),r||(r=0);const i=r,o=F(t,T);return e.writeUInt16BE(o,r),r=q(t,T,e,r+2),C.encode.bytes=r-i,e},C.encode.bytes=0,C.decode=function(t,e){e||(e=0);const r=e,n=[];let i=t.readUInt16BE(e);e+=2;let o=0;for(;i>0;)n[o++]=T.decode(t,e),e+=T.decode.bytes,i-=T.decode.bytes;return C.decode.bytes=e-r,n},C.decode.bytes=0,C.encodingLength=function(t){return 2+F(t||[],T)};const O=e.dnskey={};O.PROTOCOL_DNSSEC=3,O.ZONE_KEY=128,O.SECURE_ENTRYPOINT=32768,O.encode=function(t,e,r){e||(e=n.alloc(O.encodingLength(t))),r||(r=0);const i=r,o=t.key;if(!n.isBuffer(o))throw new Error("Key must be a Buffer");return r+=2,e.writeUInt16BE(t.flags,r),r+=2,e.writeUInt8(O.PROTOCOL_DNSSEC,r),r+=1,e.writeUInt8(t.algorithm,r),r+=1,o.copy(e,r,0,o.length),r+=o.length,O.encode.bytes=r-i,e.writeUInt16BE(O.encode.bytes-2,i),e},O.encode.bytes=0,O.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);if(e+=2,n.flags=t.readUInt16BE(e),e+=2,t.readUInt8(e)!==O.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t.readUInt8(e),e+=1,n.key=t.slice(e,r+i+2),e+=n.key.length,O.decode.bytes=e-r,n},O.decode.bytes=0,O.encodingLength=function(t){return 6+n.byteLength(t.key)};const k=e.rrsig={};k.encode=function(t,e,r){e||(e=n.alloc(k.encodingLength(t))),r||(r=0);const o=r,s=t.signature;if(!n.isBuffer(s))throw new Error("Signature must be a Buffer");return r+=2,e.writeUInt16BE(i.toType(t.typeCovered),r),r+=2,e.writeUInt8(t.algorithm,r),r+=1,e.writeUInt8(t.labels,r),r+=1,e.writeUInt32BE(t.originalTTL,r),r+=4,e.writeUInt32BE(t.expiration,r),r+=4,e.writeUInt32BE(t.inception,r),r+=4,e.writeUInt16BE(t.keyTag,r),r+=2,l.encode(t.signersName,e,r),r+=l.encode.bytes,s.copy(e,r,0,s.length),r+=s.length,k.encode.bytes=r-o,e.writeUInt16BE(k.encode.bytes-2,o),e},k.encode.bytes=0,k.decode=function(t,e){e||(e=0);const r=e;var n={},o=t.readUInt16BE(e);return e+=2,n.typeCovered=i.toString(t.readUInt16BE(e)),e+=2,n.algorithm=t.readUInt8(e),e+=1,n.labels=t.readUInt8(e),e+=1,n.originalTTL=t.readUInt32BE(e),e+=4,n.expiration=t.readUInt32BE(e),e+=4,n.inception=t.readUInt32BE(e),e+=4,n.keyTag=t.readUInt16BE(e),e+=2,n.signersName=l.decode(t,e),e+=l.decode.bytes,n.signature=t.slice(e,r+o+2),e+=n.signature.length,k.decode.bytes=e-r,n},k.decode.bytes=0,k.encodingLength=function(t){return 20+l.encodingLength(t.signersName)+n.byteLength(t.signature)};const P=e.rp={};P.encode=function(t,e,r){e||(e=n.alloc(P.encodingLength(t))),r||(r=0);const i=r;return r+=2,l.encode(t.mbox||".",e,r),r+=l.encode.bytes,l.encode(t.txt||".",e,r),r+=l.encode.bytes,P.encode.bytes=r-i,e.writeUInt16BE(P.encode.bytes-2,i),e},P.encode.bytes=0,P.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.mbox=l.decode(t,e)||".",e+=l.decode.bytes,n.txt=l.decode(t,e)||".",e+=l.decode.bytes,P.decode.bytes=e-r,n},P.decode.bytes=0,P.encodingLength=function(t){return 2+l.encodingLength(t.mbox||".")+l.encodingLength(t.txt||".")};const N={encode:function(t,e,r){e||(e=n.alloc(N.encodingLength(t))),r||(r=0);const o=r;for(var s=[],a=0;a<t.length;a++){var c=i.toType(t[a]);void 0===s[c>>8]&&(s[c>>8]=[]),s[c>>8][c>>3&31]|=1<<7-(7&c)}for(a=0;a<s.length;a++)if(void 0!==s[a]){var u=n.from(s[a]);e.writeUInt8(a,r),r+=1,e.writeUInt8(u.length,r),r+=1,u.copy(e,r),r+=u.length}return N.encode.bytes=r-o,e}};N.encode.bytes=0,N.decode=function(t,e,r){e||(e=0);const n=e;for(var o=[];e-n<r;){var s=t.readUInt8(e);e+=1;var a=t.readUInt8(e);e+=1;for(var c=0;c<a;c++)for(var u=t.readUInt8(e+c),h=0;h<8;h++)if(u&1<<7-h){var l=i.toString(s<<8|c<<3|h);o.push(l)}e+=a}return N.decode.bytes=e-n,o},N.decode.bytes=0,N.encodingLength=function(t){for(var e=[],r=0;r<t.length;r++){var n=i.toType(t[r]);e[n>>8]=Math.max(e[n>>8]||0,255&n)}var o=0;for(r=0;r<e.length;r++)void 0!==e[r]&&(o+=2+Math.ceil((e[r]+1)/8));return o};const D=e.nsec={};D.encode=function(t,e,r){e||(e=n.alloc(D.encodingLength(t))),r||(r=0);const i=r;return r+=2,l.encode(t.nextDomain,e,r),r+=l.encode.bytes,N.encode(t.rrtypes,e,r),r+=N.encode.bytes,D.encode.bytes=r-i,e.writeUInt16BE(D.encode.bytes-2,i),e},D.encode.bytes=0,D.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);return e+=2,n.nextDomain=l.decode(t,e),e+=l.decode.bytes,n.rrtypes=N.decode(t,e,i-(e-r)),e+=N.decode.bytes,D.decode.bytes=e-r,n},D.decode.bytes=0,D.encodingLength=function(t){return 2+l.encodingLength(t.nextDomain)+N.encodingLength(t.rrtypes)};const B=e.nsec3={};B.encode=function(t,e,r){e||(e=n.alloc(B.encodingLength(t))),r||(r=0);const i=r,o=t.salt;if(!n.isBuffer(o))throw new Error("salt must be a Buffer");const s=t.nextDomain;if(!n.isBuffer(s))throw new Error("nextDomain must be a Buffer");return r+=2,e.writeUInt8(t.algorithm,r),r+=1,e.writeUInt8(t.flags,r),r+=1,e.writeUInt16BE(t.iterations,r),r+=2,e.writeUInt8(o.length,r),r+=1,o.copy(e,r,0,o.length),r+=o.length,e.writeUInt8(s.length,r),r+=1,s.copy(e,r,0,s.length),r+=s.length,N.encode(t.rrtypes,e,r),r+=N.encode.bytes,B.encode.bytes=r-i,e.writeUInt16BE(B.encode.bytes-2,i),e},B.encode.bytes=0,B.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);e+=2,n.algorithm=t.readUInt8(e),e+=1,n.flags=t.readUInt8(e),e+=1,n.iterations=t.readUInt16BE(e),e+=2;const o=t.readUInt8(e);e+=1,n.salt=t.slice(e,e+o),e+=o;const s=t.readUInt8(e);return e+=1,n.nextDomain=t.slice(e,e+s),e+=s,n.rrtypes=N.decode(t,e,i-(e-r)),e+=N.decode.bytes,B.decode.bytes=e-r,n},B.decode.bytes=0,B.encodingLength=function(t){return 8+t.salt.length+t.nextDomain.length+N.encodingLength(t.rrtypes)};const x=e.ds={};x.encode=function(t,e,r){e||(e=n.alloc(x.encodingLength(t))),r||(r=0);const i=r,o=t.digest;if(!n.isBuffer(o))throw new Error("Digest must be a Buffer");return r+=2,e.writeUInt16BE(t.keyTag,r),r+=2,e.writeUInt8(t.algorithm,r),r+=1,e.writeUInt8(t.digestType,r),r+=1,o.copy(e,r,0,o.length),r+=o.length,x.encode.bytes=r-i,e.writeUInt16BE(x.encode.bytes-2,i),e},x.encode.bytes=0,x.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);return e+=2,n.keyTag=t.readUInt16BE(e),e+=2,n.algorithm=t.readUInt8(e),e+=1,n.digestType=t.readUInt8(e),e+=1,n.digest=t.slice(e,r+i+2),e+=n.digest.length,x.decode.bytes=e-r,n},x.decode.bytes=0,x.encodingLength=function(t){return 6+n.byteLength(t.digest)};const L=e.sshfp={};L.getFingerprintLengthForHashType=function(t){switch(t){case 1:return 20;case 2:return 32}},L.encode=function(t,e,r){e||(e=n.alloc(L.encodingLength(t))),r||(r=0);const i=r;e[r+=2]=t.algorithm,e[r+=1]=t.hash,r+=1;const o=n.from(t.fingerprint.toUpperCase(),"hex");if(o.length!==L.getFingerprintLengthForHashType(t.hash))throw new Error("Invalid fingerprint length");return o.copy(e,r),r+=o.byteLength,L.encode.bytes=r-i,e.writeUInt16BE(L.encode.bytes-2,i),e},L.encode.bytes=0,L.decode=function(t,e){e||(e=0);const r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;const i=L.getFingerprintLengthForHashType(n.hash);return n.fingerprint=t.slice(e,e+i).toString("hex").toUpperCase(),e+=i,L.decode.bytes=e-r,n},L.decode.bytes=0,L.encodingLength=function(t){return 4+n.from(t.fingerprint,"hex").byteLength};const U=e.record=function(t){switch(t.toUpperCase()){case"A":return I;case"PTR":return w;case"CNAME":return _;case"DNAME":return S;case"TXT":return g;case"NULL":return b;case"AAAA":return R;case"SRV":return E;case"HINFO":return v;case"CAA":return A;case"NS":return m;case"SOA":return y;case"MX":return M;case"OPT":return C;case"DNSKEY":return O;case"RRSIG":return k;case"RP":return P;case"NSEC":return D;case"NSEC3":return B;case"SSHFP":return L;case"DS":return x}return p},j=e.answer={};j.encode=function(t,e,r){e||(e=n.alloc(j.encodingLength(t))),r||(r=0);const o=r;if(l.encode(t.name,e,r),r+=l.encode.bytes,e.writeUInt16BE(i.toType(t.type),r),"OPT"===t.type.toUpperCase()){if("."!==t.name)throw new Error("OPT name must be root.");e.writeUInt16BE(t.udpPayloadSize||4096,r+2),e.writeUInt8(t.extendedRcode||0,r+4),e.writeUInt8(t.ednsVersion||0,r+5),e.writeUInt16BE(t.flags||0,r+6),r+=8,C.encode(t.options||[],e,r),r+=C.encode.bytes}else{let n=a.toClass(void 0===t.class?"IN":t.class);t.flush&&(n|=h),e.writeUInt16BE(n,r+2),e.writeUInt32BE(t.ttl||0,r+4),r+=8;const i=U(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return j.encode.bytes=r-o,e},j.encode.bytes=0,j.decode=function(t,e){e||(e=0);const r={},n=e;if(r.name=l.decode(t,e),e+=l.decode.bytes,r.type=i.toString(t.readUInt16BE(e)),"OPT"===r.type)r.udpPayloadSize=t.readUInt16BE(e+2),r.extendedRcode=t.readUInt8(e+4),r.ednsVersion=t.readUInt8(e+5),r.flags=t.readUInt16BE(e+6),r.flag_do=1===(r.flags>>15&1),r.options=C.decode(t,e+8),e+=8+C.decode.bytes;else{const n=t.readUInt16BE(e+2);r.ttl=t.readUInt32BE(e+4),r.class=a.toString(-32769&n),r.flush=!!(n&h);const i=U(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return j.decode.bytes=e-n,r},j.decode.bytes=0,j.encodingLength=function(t){const e=null!==t.data&&void 0!==t.data?t.data:t.options;return l.encodingLength(t.name)+8+U(t.type).encodingLength(e)};const K=e.question={};function F(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function q(t,e,r,n){for(let i=0;i<t.length;i++)e.encode(t[i],r,n),n+=e.encode.bytes;return n}function V(t,e,r,n){for(let i=0;i<t.length;i++)t[i]=e.decode(r,n),n+=e.decode.bytes;return n}K.encode=function(t,e,r){e||(e=n.alloc(K.encodingLength(t))),r||(r=0);const o=r;return l.encode(t.name,e,r),r+=l.encode.bytes,e.writeUInt16BE(i.toType(t.type),r),r+=2,e.writeUInt16BE(a.toClass(void 0===t.class?"IN":t.class),r),r+=2,K.encode.bytes=r-o,t},K.encode.bytes=0,K.decode=function(t,e){e||(e=0);const r=e,n={};n.name=l.decode(t,e),e+=l.decode.bytes,n.type=i.toString(t.readUInt16BE(e)),e+=2,n.class=a.toString(t.readUInt16BE(e)),e+=2;return!!(32768&n.class)&&(n.class&=-32769),K.decode.bytes=e-r,n},K.decode.bytes=0,K.encodingLength=function(t){return l.encodingLength(t.name)+4},e.AUTHORITATIVE_ANSWER=1024,e.TRUNCATED_RESPONSE=512,e.RECURSION_DESIRED=256,e.RECURSION_AVAILABLE=128,e.AUTHENTIC_DATA=32,e.CHECKING_DISABLED=16,e.DNSSEC_OK=32768,e.encode=function(t,r,i){const o=!r;o&&(r=n.alloc(e.encodingLength(t))),i||(i=0);const s=i;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),d.encode(t,r,i),i+=d.encode.bytes,i=q(t.questions,K,r,i),i=q(t.answers,j,r,i),i=q(t.authorities,j,r,i),i=q(t.additionals,j,r,i),e.encode.bytes=i-s,o&&e.encode.bytes!==r.length?r.slice(0,e.encode.bytes):r},e.encode.bytes=0,e.decode=function(t,r){r||(r=0);const n=r,i=d.decode(t,r);return r+=d.decode.bytes,r=V(i.questions,K,t,r),r=V(i.answers,j,t,r),r=V(i.authorities,j,t,r),r=V(i.additionals,j,t,r),e.decode.bytes=r-n,i},e.decode.bytes=0,e.encodingLength=function(t){return d.encodingLength(t)+F(t.questions||[],K)+F(t.answers||[],j)+F(t.authorities||[],j)+F(t.additionals||[],j)},e.streamEncode=function(t){const r=e.encode(t),i=n.alloc(2);i.writeUInt16BE(r.byteLength);const o=n.concat([i,r]);return e.streamEncode.bytes=o.byteLength,o},e.streamEncode.bytes=0,e.streamDecode=function(t){const r=t.readUInt16BE(0);if(t.byteLength<r+2)return null;const n=e.decode(t.slice(2));return e.streamDecode.bytes=e.decode.bytes,n},e.streamDecode.bytes=0},function(t,e,r){"use strict";e.toString=function(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t},e.toType=function(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}},function(t,e,r){"use strict";e.toString=function(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t},e.toRcode=function(t){switch(t.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}},function(t,e,r){"use strict";e.toString=function(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t},e.toOpcode=function(t){switch(t.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}},function(t,e,r){"use strict";e.toString=function(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t},e.toClass=function(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}},function(t,e,r){"use strict";e.toString=function(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:"OPTION_".concat(t)},e.toCode=function(t){if("number"===typeof t)return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}},function(t,e,r){"use strict";r.r(e),e.default=r.p+"static/media/index.3c0ed312.cjs"},function(t,e,r){"use strict";const n=r(19).Buffer,i=r(285),o=i.AbortError,s=i.HTTPStatusError,a=i.TimeoutError,c="application/dns-message",u=Object.values(i.endpoints).filter((function(t){return!t.filter&&!t.logging&&t.cors}));function h(){}t.exports={request:function(t,e,r,i,u,l,f,d,p){const m=t+"//"+e+":"+r+i+("GET"===u?"?dns="+l.toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"):""),y=new XMLHttpRequest;y.open(u,m,!0),y.setRequestHeader("Accept",c),"POST"===u&&y.setRequestHeader("Content-Type",c),y.responseType="arraybuffer",y.timeout=f,y.ontimeout=function(){g(new a(f));try{y.abort()}catch(t){}},y.onreadystatechange=function(){if(y.readyState>1&&200!==y.status&&0!==y.status){g(new s(m,y.status,u));try{y.abort()}catch(t){}}},y.onerror=function(){g(200===y.status?new Error("Inexplicable XHR Error"):new s(m,y.status,u))},y.onload=function(){200!==y.status?g(new s(m,y.status,u)):g(null,n.from(y.response))},"GET"===u?y.send():y.send(l),d&&d.addEventListener("abort",b);let g=function(t,e){g=h,d&&d.removeEventListener("abort",b),p(t,e,y)};function b(){g(new o);try{y.abort()}catch(t){}}},queryDns:function(){throw new Error('Only "doh" endpoints are supported in the browser')},endpoints:t=>{if(t.doh)return u;if(t.dns)throw new Error('Only "doh" is supported in the browser')}}},function(t){t.exports=JSON.parse('{"cloudflare":{"host":"cloudflare-dns.com","docs":"https://developers.cloudflare.com/1.1.1.1/dns-over-https","cors":true},"cloudflareFamily":{"host":"family.cloudflare-dns.com","docs":"https://developers.cloudflare.com/1.1.1.1/1.1.1.1-for-families/setup-instructions/dns-over-https","cors":true,"filter":true},"cloudflareSecurity":{"host":"security.cloudflare-dns.com","docs":"https://developers.cloudflare.com/1.1.1.1/1.1.1.1-for-families/setup-instructions/dns-over-https","cors":true,"filter":true},"cloudflareEth":{"host":"eth.resolver.cloudflare-eth.com","docs":"https://www.cloudflare.com/distributed-web-gateway/#ethereum-gateway","cors":true,"filter":true},"aAndA":{"host":"dns.aa.net.uk","docs":"https://www.aa.net.uk/legal/dohdot-disclaimer/","filter":true},"usablePrivacy":{"host":"adfree.usableprivacy.net","docs":"https://docs.usableprivacy.com","filter":true},"adguard":{"host":"dns.adguard.com","docs":"https://adguard.com/en/adguard-dns/overview.html","filter":true},"adguardFamily":{"host":"dns-family.adguard.com","docs":"https://adguard.com/en/adguard-dns/overview.html","filter":true},"adguardUnfiltered":{"host":"dns-unfiltered.adguard.com","docs":"https://adguard.com/en/adguard-dns/overview.html"},"ahadnsIn":{"host":"doh.in.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"India"},"ahadnsIt":{"host":"doh.it.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Italy"},"ahadnsEs":{"host":"doh.es.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Spain"},"ahadnsNo":{"host":"doh.no.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Norway"},"ahadnsNl":{"host":"doh.nl.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Netherlands"},"ahadnsPl":{"host":"doh.pl.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Poland"},"ahadnsNy":{"host":"doh.ny.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"New York"},"ahadnsChi":{"host":"doh.chi.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Chicago"},"ahadnsAu":{"host":"doh.au.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Australia"},"ahadnsLa":{"host":"doh.la.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Los Angeles"},"alidns":{"host":"dns.alidns.com","docs":"https://alidns.com/knowledge?type=SETTING_DOCS#umpt6","cors":true,"filter":true,"location":"China"},"amsNl":{"host":"dnsnl.alekberg.net","docs":"https://alekberg.net/doh","location":"Amsterdam"},"amsSe":{"host":"dnsse.alekberg.net","docs":"https://alekberg.net/doh","location":"Sweden"},"amsEs":{"host":"dnses.alekberg.net","docs":"https://alekberg.net/doh","location":"Spain"},"arapurayil":{"host":"dns.arapurayil.com","docs":"https://www.dns.arapurayil.com/","filter":true},"digitaleGesellschaft":{"host":"dns.digitale-gesellschaft.ch","docs":"https://www.digitale-gesellschaft.ch/dns","cors":true,"location":"Switzerland"},"dnsForFamily":{"host":"dns-doh.dnsforfamily.com","docs":"https://dnsforfamily.com/","filter":true},"dnsHome":{"host":"dns.dnshome.de","docs":"https://www.dnshome.de/doh-dot-public-resolver.php","location":"Germany"},"blahDnsCh":{"host":"doh-ch.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Switzerland"},"blahDnsJp":{"host":"doh-jp.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Japan"},"blahDnsDe":{"host":"doh-de.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Germany"},"blahDnsFi":{"host":"doh-fi.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Finland"},"cleanBrowsingSecurity":{"host":"doh.cleanbrowsing.org","docs":"https://cleanbrowsing.org/guides/dnsoverhttps","path":"/doh/security-filter/","cors":true,"filter":true},"cleanBrowsingFamily":{"host":"doh.cleanbrowsing.org","docs":"https://cleanbrowsing.org/guides/dnsoverhttps","path":"/doh/family-filter/","cors":true,"filter":true},"cleanBrowsingAdult":{"host":"doh.cleanbrowsing.org","docs":"https://cleanbrowsing.org/guides/dnsoverhttps","path":"/doh/adult-filter/","cors":true,"filter":true},"appliedPrivacy":{"host":"doh.applied-privacy.net","docs":"https://applied-privacy.net/services/dns/","path":"/query","location":"Austria"},"ffmuc":{"host":"doh.ffmuc.net","docs":"https://ffmuc.net/wiki/doku.php?id=knb:dohdot","location":"Germany"},"tiarap":{"host":"doh.tiar.app","docs":"https://tiarap.org/","filter":true},"tiarapJp":{"host":"jp.tiar.app","docs":"https://jp.tiar.app/","filter":true,"location":"Japan"},"google":{"host":"dns.google","docs":"https://developers.google.com/speed/public-dns/docs/doh/","cors":true},"he":{"host":"ordns.he.net","docs":"https://dns.he.net/","log":true},"iij":{"host":"public.dns.iij.jp","docs":"https://public.dns.iij.jp/","filter":true,"log":true,"location":"Japan"},"libredns":{"host":"doh.libredns.gr","docs":"https://libredns.gr/","location":"Germany"},"librednsAds":{"host":"doh.libredns.gr","docs":"https://libredns.gr/","path":"/ads","filter":true,"location":"Germany"},"njalla":{"host":"dns.njal.la","docs":"https://dns.njal.la/","location":"Sweden"},"opendns":{"host":"doh.opendns.com","docs":"https://support.opendns.com/hc/en-us/articles/360038086532-Using-DNS-over-HTTPS-DoH-with-OpenDNS"},"opendnsFamily":{"host":"doh.familyshield.opendns.com","docs":"https://support.opendns.com/hc/en-us/articles/360038086532-Using-DNS-over-HTTPS-DoH-with-OpenDNS","filter":true},"sebyVultr":{"host":"doh.seby.io","docs":"https://dns.seby.io/","port":8443,"cors":true,"filter":true,"location":"Sydney"},"sebyOVH":{"host":"doh-2.seby.io","docs":"https://dns.seby.io/","cors":true,"filter":true,"location":"Sydney"},"quad9":{"host":"dns10.quad9.net","docs":"https://quad9.net/service/service-addresses-and-features"},"quad9Ads":{"host":"dns.quad9.net","docs":"https://quad9.net/service/service-addresses-and-features","filter":true},"switchCh":{"host":"dns.switch.ch","docs":"https://www.switch.ch/security/info/public-dns/","filter":true,"location":"Switzerland"},"yepdns":{"host":"sg.yepdns.com","docs":"https://get.yepdns.com/","filter":true,"location":"Singapore"},"lavaDnsEU1":{"host":"eu1.dns.lavate.ch","docs":"https://dns.lavate.ch/","location":"Helsinki"},"controlId":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p0"},"controlIdMw":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p1","filter":true},"controlIdAds":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p2","filter":true},"controlIdSoc":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p3","filter":true},"uncensoredAny":{"host":"anycast.censurfridns.dk","docs":"https://blog.uncensoreddns.org/"},"uncensoredUni":{"host":"unicast.censurfridns.dk","docs":"https://blog.uncensoreddns.org/","location":"Copenhagen"},"dnssbGlobal":{"host":"doh.dns.sb","docs":"https://dns.sb/doh/","cors":true},"dbssbDeDus":{"host":"de-dus.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"D\xfcsseldorf"},"dnssbDeFra":{"host":"de-fra.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Frankfurt"},"dnssbNlAms":{"host":"nl-ams.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Amsterdam"},"dnssbNlAms2":{"host":"nl-ams2.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Amsterdam"},"dnssbEeTll":{"host":"ee-tll.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Tallinn"},"dnssbJpKix":{"host":"jp-kix.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Osaka"},"dnssbHkHkg":{"host":"hk-hkg.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Hong Kong"},"dnssbAuSyd":{"host":"au-syd.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Sydney"},"dnssbUsChi":{"host":"us-chi.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Chicago"},"dnssbInBlr":{"host":"in-blr.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Bengaluru"},"dnssbSgSin":{"host":"sg-sin.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Singapore"},"dnssbKrSel":{"host":"kr-sel.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Seoul"},"dnssbRuMow":{"host":"ru-mow.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Moscow"},"ethlink":{"host":"eth.link","docs":"https://eth.link/","cors":true},"handshake":{"host":"query.hdns.io","docs":"https://docs.namebase.io/guides-1/resolving-handshake-1/hdns.io#dns-over-https-doh","cors":true}}')},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(515),i=r(123),o=r(62);function s(t,r){return void 0===r&&(r=e.defaultRandomSource),r.randomBytes(t)}e.defaultRandomSource=new n.SystemRandomSource,e.randomBytes=s,e.randomUint32=function(t){void 0===t&&(t=e.defaultRandomSource);var r=s(4,t),n=i.readUint32LE(r);return o.wipe(r),n};var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(t,r,n){if(void 0===r&&(r=a),void 0===n&&(n=e.defaultRandomSource),r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");for(var i="",c=r.length,u=256-256%c;t>0;){for(var h=s(Math.ceil(256*t/u),n),l=0;l<h.length&&t>0;l++){var f=h[l];f<u&&(i+=r.charAt(f%c),t--)}o.wipe(h)}return i}e.randomString=c,e.randomStringForEntropy=function(t,r,n){return void 0===r&&(r=a),void 0===n&&(n=e.defaultRandomSource),c(Math.ceil(t/(Math.log(r.length)/Math.LN2)),r,n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(516),i=r(517),o=function(){function t(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)},t}();e.SystemRandomSource=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t="undefined"!==typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var e=new Uint8Array(t),r=0;r<e.length;r+=65536)this._crypto.getRandomValues(e.subarray(r,r+Math.min(e.length-r,65536)));return e},t}();e.BrowserRandomSource=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(62),i=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t=r(287);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(t),i=0;i<r.length;i++)r[i]=e[i];return n.wipe(e),r},t}();e.NodeRandomSource=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(t,e){var r=65535&t,n=65535&e;return r*n+((t>>>16&65535)*n+r*(e>>>16&65535)<<16>>>0)|0},e.add=function(t,e){return t+e|0},e.sub=function(t,e){return t-e|0},e.rotl=function(t,e){return t<<e|t>>>32-e},e.rotr=function(t,e){return t<<32-e|t>>>e},e.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},function(t,e,r){"use strict";const n=r(87),i=r(40);t.exports=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n(t),o=i.decode.fromReader(r.reader,e);let s=!1;const a={read:async t=>{const{value:e,done:n}=await r.reader.next(t);if(n&&e.length<t)throw new Error("Couldn't read enough bytes");if(s=n,!e)throw new Error("Value is null");return e},readLP:async()=>{const{value:t,done:e}=await o.next();if(s=e,!t)throw new Error("Value is null");return t},readPB:async t=>{const e=await a.readLP();if(!e)throw new Error("Value is null");const r=e instanceof Uint8Array?e:e.slice();return t.decode(r)},write:t=>{r.writer.push(t)},writeLP:t=>{a.write(i.encode.single(t,e))},writePB:(t,e)=>{a.writeLP(e.encode(t))},pb:t=>({read:()=>a.readPB(t),write:e=>a.writePB(e,t)}),unwrap:()=>(r.rest(),r.stream)};return a}},function(t,e){t.exports=class{constructor(t){if(!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},function(t,e,r){"use strict";const{Buffer:n}=r(19),i=r(54),o=r(290);function s(t){t=t||{};const e=Math.max(t.poolSize||10240,t.minPoolSize||8),r=t.lengthEncoder||o;return async function*(t){let o=n.alloc(e),s=0;for await(const a of t){r(a.length,o,s);const t=o.slice(s,s+r.bytes);s+=r.bytes,o.length-s<8&&(o=n.alloc(e),s=0),yield(new i).append(t).append(a)}}}s.single=(t,e)=>{const r=(e=e||{}).lengthEncoder||o;return new i([r(t.length),t.slice()])},t.exports=s,t.exports.MIN_POOL_SIZE=8,t.exports.DEFAULT_POOL_SIZE=10240},function(t,e,r){"use strict";const{Buffer:n}=r(19),i=r(54),o=r(291),s=4194304,a=n.alloc(0),c="readLength",u="readData",h={[c]:(t,e,r,n)=>{let o;e=e.append(t);try{o=n.lengthDecoder(e)}catch(s){if(e.length>n.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:c,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(o>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(n.lengthDecoder.bytes),e=new i,n.onLength&&n.onLength(o),o<=0?(n.onData&&n.onData(a),{mode:c,chunk:t,buffer:e,data:a}):{mode:u,chunk:t,buffer:e,state:{dataLength:o},data:void 0}},[u]:(t,e,r,n)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:u,buffer:e,state:r,chunk:void 0,data:void 0};const{dataLength:o}=r,s=e.shallowSlice(0,o),a=e.length>o?e.shallowSlice(o):void 0;return e=new i,n.onData&&n.onData(s),{mode:c,chunk:a,buffer:e,state:void 0,data:s}}};function l(t){const e={lengthDecoder:(t=t||{}).lengthDecoder||o,maxLengthLength:t.maxLengthLength||8,maxDataLength:t.maxDataLength||s,onLength:t.onLength,onData:t.onData};return async function*(t){let r,n=new i,o=c;for await(const i of t){let t=i;for(;t;){const i=h[o](t,n,r,e);o=i.mode,t=i.chunk,n=i.buffer,r=i.state,i.data&&(yield i.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}l.fromReader=(t,e)=>{let r=1;const n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{r=1}}};return l({...e||{},onLength:t=>{r=t}})(n)},t.exports=l,t.exports.MAX_LENGTH_LENGTH=8,t.exports.MAX_DATA_LENGTH=s},function(t,e,r){"use strict";const{Buffer:n}=r(19),i=(t,e,r)=>((e=e||n.allocUnsafe(4)).writeInt32BE(t,r),e);i.bytes=4,t.exports=i},function(t,e,r){"use strict";const n=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};n.bytes=4,t.exports=n},function(t,e,r){var n=r(526);t.exports=function(){var t=n(),e=n();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}},function(t,e,r){"use strict";const n=r(292);t.exports=function(){let t,e;return{sink:async r=>{if(t)throw new Error("already piped");t=n(r),e&&e(t)},source:{[Symbol.asyncIterator](){return this},next:()=>t?t.next():new Promise((t=>{e=r=>{e=null,t(r.next())}}))}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XX=void 0;const n=r(77),i=r(295);class o extends i.AbstractHandshake{initializeInitiator(t,e,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,t);return{ss:i,s:e,rs:r,psk:n,re:new Uint8Array(32)}}initializeResponder(t,e,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,t);return{ss:i,s:e,rs:r,psk:n,re:new Uint8Array(32)}}writeMessageA(t,e,r){const i=new Uint8Array(0);t.e=void 0!==r?r:(0,n.generateKeypair)();const o=t.e.publicKey;this.mixHash(t.ss,o);return{ne:o,ns:i,ciphertext:this.encryptAndHash(t.ss,e)}}writeMessageB(t,e){t.e=(0,n.generateKeypair)();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const i=t.s.publicKey,o=this.encryptAndHash(t.ss,i);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));return{ne:r,ns:o,ciphertext:this.encryptAndHash(t.ss,e)}}writeMessageC(t,e){const r=t.s.publicKey,n=this.encryptAndHash(t.ss,r);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const i=this.encryptAndHash(t.ss,e),o={ne:this.createEmptyKey(),ns:n,ciphertext:i},{cs1:s,cs2:a}=this.split(t.ss);return{h:t.ss.h,messageBuffer:o,cs1:s,cs2:a}}readMessageA(t,e){return(0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.decryptAndHash(t.ss,e.ciphertext)}readMessageB(t,e){if((0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ns);i&&32===r.length&&(0,n.isValidPublicKey)(r)&&(t.rs=r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:o,valid:s}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:o,valid:i&&s}}readMessageC(t,e){const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ns);if(i&&32===r.length&&(0,n.isValidPublicKey)(r)&&(t.rs=r),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:o,valid:s}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:a,cs2:c}=this.split(t.ss);return{h:t.ss.h,plaintext:o,valid:i&&s,cs1:a,cs2:c}}initSession(t,e,r){const n=this.createEmptyKey(),i=new Uint8Array(32);let o;return o=t?this.initializeInitiator(e,r,i,n):this.initializeResponder(e,r,i,n),{hs:o,i:t,mc:0}}sendMessage(t,e,r){let n;if(0===t.mc)n=this.writeMessageA(t.hs,e,r);else if(1===t.mc)n=this.writeMessageB(t.hs,e);else if(2===t.mc){const{h:r,messageBuffer:i,cs1:o,cs2:s}=this.writeMessageC(t.hs,e);n=i,t.h=r,t.cs1=o,t.cs2=s}else{if(!(t.mc>2))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(t.cs2,e)}}return t.mc++,n}recvMessage(t,e){let r=new Uint8Array(0),n=!1;if(0===t.mc)({plaintext:r,valid:n}=this.readMessageA(t.hs,e));else if(1===t.mc)({plaintext:r,valid:n}=this.readMessageB(t.hs,e));else if(2===t.mc){const{h:i,plaintext:o,valid:s,cs1:a,cs2:c}=this.readMessageC(t.hs,e);r=o,n=s,t.h=i,t.cs1=a,t.cs2=c}return t.mc++,{plaintext:r,valid:n}}}e.XX=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(529),i=r(62),o=function(){function t(t,e,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var o=n.hmac(this._hash,r,e);this._hmac=new n.HMAC(t,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),r=0;r<e.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[r]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},t}();e.HKDF=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(530),i=r(176),o=r(62),s=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(r).clean():r.set(e);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),o.wipe(r)}return t.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(t){return this._inner.update(t),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();e.HMAC=s,e.hmac=function(t,e,r){var n=new s(t,e);n.update(r);var i=n.digest();return n.clean(),i},e.equal=i.equal},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=function(t){return"undefined"!==typeof t.saveState&&"undefined"!==typeof t.restoreState&&"undefined"!==typeof t.cleanSavedState}},function(t,e,r){"use strict";var n,i,o;i=[r(2)],void 0===(o="function"===typeof(n=function(t){var e=t.Reader,r=t.Writer,n=t.util,i=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return i.pb=function(){var o={};return o.NoiseHandshakePayload=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return o.prototype.identityKey=n.newBuffer([]),o.prototype.identitySig=n.newBuffer([]),o.prototype.data=n.newBuffer([]),o.create=function(t){return new o(t)},o.encode=function(t,e){return e||(e=r.create()),null!=t.identityKey&&Object.hasOwnProperty.call(t,"identityKey")&&e.uint32(10).bytes(t.identityKey),null!=t.identitySig&&Object.hasOwnProperty.call(t,"identitySig")&&e.uint32(18).bytes(t.identitySig),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(26).bytes(t.data),e},o.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.pb.NoiseHandshakePayload;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.identityKey=t.bytes();break;case 2:o.identitySig=t.bytes();break;case 3:o.data=t.bytes();break;default:t.skipType(7&s)}}return o},o.decodeDelimited=function(t){return t instanceof e||(t=new e(t)),this.decode(t,t.uint32())},o.verify=function(t){return"object"!==typeof t||null===t?"object expected":null!=t.identityKey&&t.hasOwnProperty("identityKey")&&!(t.identityKey&&"number"===typeof t.identityKey.length||n.isString(t.identityKey))?"identityKey: buffer expected":null!=t.identitySig&&t.hasOwnProperty("identitySig")&&!(t.identitySig&&"number"===typeof t.identitySig.length||n.isString(t.identitySig))?"identitySig: buffer expected":null!=t.data&&t.hasOwnProperty("data")&&!(t.data&&"number"===typeof t.data.length||n.isString(t.data))?"data: buffer expected":null},o.fromObject=function(t){if(t instanceof i.pb.NoiseHandshakePayload)return t;var e=new i.pb.NoiseHandshakePayload;return null!=t.identityKey&&("string"===typeof t.identityKey?n.base64.decode(t.identityKey,e.identityKey=n.newBuffer(n.base64.length(t.identityKey)),0):t.identityKey.length&&(e.identityKey=t.identityKey)),null!=t.identitySig&&("string"===typeof t.identitySig?n.base64.decode(t.identitySig,e.identitySig=n.newBuffer(n.base64.length(t.identitySig)),0):t.identitySig.length&&(e.identitySig=t.identitySig)),null!=t.data&&("string"===typeof t.data?n.base64.decode(t.data,e.data=n.newBuffer(n.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},o.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.identityKey="":(r.identityKey=[],e.bytes!==Array&&(r.identityKey=n.newBuffer(r.identityKey))),e.bytes===String?r.identitySig="":(r.identitySig=[],e.bytes!==Array&&(r.identitySig=n.newBuffer(r.identitySig))),e.bytes===String?r.data="":(r.data=[],e.bytes!==Array&&(r.data=n.newBuffer(r.data)))),null!=t.identityKey&&t.hasOwnProperty("identityKey")&&(r.identityKey=e.bytes===String?n.base64.encode(t.identityKey,0,t.identityKey.length):e.bytes===Array?Array.prototype.slice.call(t.identityKey):t.identityKey),null!=t.identitySig&&t.hasOwnProperty("identitySig")&&(r.identitySig=e.bytes===String?n.base64.encode(t.identitySig,0,t.identitySig.length):e.bytes===Array?Array.prototype.slice.call(t.identitySig):t.identitySig),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?n.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o}(),i})?n.apply(e,i):n)||(t.exports=o)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(533),i=r(534),o=r(62),s=r(123),a=r(176);e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var c=new Uint8Array(16),u=function(){function t(t){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,t.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(t,s.length-t.length);var a=new Uint8Array(32);n.stream(this._key,s,a,4);var c,u=e.length+this.tagLength;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(u);return n.streamXOR(this._key,s,e,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),o.wipe(s),c},t.prototype.open=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(t,s.length-t.length);var c=new Uint8Array(32);n.stream(this._key,s,c,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,c,e.subarray(0,e.length-this.tagLength),r),!a.equal(u,e.subarray(e.length-this.tagLength,e.length)))return null;var h,l=e.length-this.tagLength;if(i){if(i.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");h=i}else h=new Uint8Array(l);return n.streamXOR(this._key,s,e.subarray(0,e.length-this.tagLength),h,4),o.wipe(s),h},t.prototype.clean=function(){return o.wipe(this._key),this},t.prototype._authenticate=function(t,e,r,n){var a=new i.Poly1305(e);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var u=new Uint8Array(8);n&&s.writeUint64LE(n.length,u),a.update(u),s.writeUint64LE(r.length,u),a.update(u);for(var h=a.digest(),l=0;l<h.length;l++)t[l]=h[l];a.clean(),o.wipe(h),o.wipe(u)},t}();e.ChaCha20Poly1305=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(123),i=r(62);function o(t,e,r){for(var i=1634760805,o=857760878,s=2036477234,a=1797285236,c=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],l=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],d=r[23]<<24|r[22]<<16|r[21]<<8|r[20],p=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=e[3]<<24|e[2]<<16|e[1]<<8|e[0],g=e[7]<<24|e[6]<<16|e[5]<<8|e[4],b=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],w=i,_=o,S=s,E=a,A=c,M=u,I=h,R=l,T=f,C=d,O=p,k=m,P=y,N=g,D=b,B=v,x=0;x<20;x+=2)A=(A^=T=T+(P=(P^=w=w+A|0)>>>16|P<<16)|0)>>>20|A<<12,M=(M^=C=C+(N=(N^=_=_+M|0)>>>16|N<<16)|0)>>>20|M<<12,I=(I^=O=O+(D=(D^=S=S+I|0)>>>16|D<<16)|0)>>>20|I<<12,R=(R^=k=k+(B=(B^=E=E+R|0)>>>16|B<<16)|0)>>>20|R<<12,I=(I^=O=O+(D=(D^=S=S+I|0)>>>24|D<<8)|0)>>>25|I<<7,R=(R^=k=k+(B=(B^=E=E+R|0)>>>24|B<<8)|0)>>>25|R<<7,M=(M^=C=C+(N=(N^=_=_+M|0)>>>24|N<<8)|0)>>>25|M<<7,A=(A^=T=T+(P=(P^=w=w+A|0)>>>24|P<<8)|0)>>>25|A<<7,M=(M^=O=O+(B=(B^=w=w+M|0)>>>16|B<<16)|0)>>>20|M<<12,I=(I^=k=k+(P=(P^=_=_+I|0)>>>16|P<<16)|0)>>>20|I<<12,R=(R^=T=T+(N=(N^=S=S+R|0)>>>16|N<<16)|0)>>>20|R<<12,A=(A^=C=C+(D=(D^=E=E+A|0)>>>16|D<<16)|0)>>>20|A<<12,R=(R^=T=T+(N=(N^=S=S+R|0)>>>24|N<<8)|0)>>>25|R<<7,A=(A^=C=C+(D=(D^=E=E+A|0)>>>24|D<<8)|0)>>>25|A<<7,I=(I^=k=k+(P=(P^=_=_+I|0)>>>24|P<<8)|0)>>>25|I<<7,M=(M^=O=O+(B=(B^=w=w+M|0)>>>24|B<<8)|0)>>>25|M<<7;n.writeUint32LE(w+i|0,t,0),n.writeUint32LE(_+o|0,t,4),n.writeUint32LE(S+s|0,t,8),n.writeUint32LE(E+a|0,t,12),n.writeUint32LE(A+c|0,t,16),n.writeUint32LE(M+u|0,t,20),n.writeUint32LE(I+h|0,t,24),n.writeUint32LE(R+l|0,t,28),n.writeUint32LE(T+f|0,t,32),n.writeUint32LE(C+d|0,t,36),n.writeUint32LE(O+p|0,t,40),n.writeUint32LE(k+m|0,t,44),n.writeUint32LE(P+y|0,t,48),n.writeUint32LE(N+g|0,t,52),n.writeUint32LE(D+b|0,t,56),n.writeUint32LE(B+v|0,t,60)}function s(t,e,r,n,s){if(void 0===s&&(s=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var c,u;if(0===s){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=(c=new Uint8Array(16)).length-e.length,c.set(e,u)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,u=s}for(var h=new Uint8Array(64),l=0;l<r.length;l+=64){o(h,c,t);for(var f=l;f<l+64&&f<r.length;f++)n[f]=r[f]^h[f-l];a(c,0,u)}return i.wipe(h),0===s&&i.wipe(c),n}function a(t,e,r){for(var n=1;r--;)n=n+(255&t[e])|0,t[e]=255&n,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=s,e.stream=function(t,e,r,n){return void 0===n&&(n=0),i.wipe(r),s(t,e,r,r,n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(176),i=r(62);e.DIGEST_LENGTH=16;var o=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=8191&r;var n=t[2]|t[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=t[4]|t[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var o=t[6]|t[7]<<8;this._r[3]=8191&(i>>>7|o<<9);var s=t[8]|t[9]<<8;this._r[4]=255&(o>>>4|s<<12),this._r[5]=s>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=8191&(s>>>14|a<<2);var c=t[12]|t[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var u=t[14]|t[15]<<8;this._r[8]=8191&(c>>>8|u<<8),this._r[9]=u>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,r){for(var n=this._fin?0:2048,i=this._h[0],o=this._h[1],s=this._h[2],a=this._h[3],c=this._h[4],u=this._h[5],h=this._h[6],l=this._h[7],f=this._h[8],d=this._h[9],p=this._r[0],m=this._r[1],y=this._r[2],g=this._r[3],b=this._r[4],v=this._r[5],w=this._r[6],_=this._r[7],S=this._r[8],E=this._r[9];r>=16;){var A=t[e+0]|t[e+1]<<8;i+=8191&A;var M=t[e+2]|t[e+3]<<8;o+=8191&(A>>>13|M<<3);var I=t[e+4]|t[e+5]<<8;s+=8191&(M>>>10|I<<6);var R=t[e+6]|t[e+7]<<8;a+=8191&(I>>>7|R<<9);var T=t[e+8]|t[e+9]<<8;c+=8191&(R>>>4|T<<12),u+=T>>>1&8191;var C=t[e+10]|t[e+11]<<8;h+=8191&(T>>>14|C<<2);var O=t[e+12]|t[e+13]<<8;l+=8191&(C>>>11|O<<5);var k=t[e+14]|t[e+15]<<8,P=0,N=P;N+=i*p,N+=o*(5*E),N+=s*(5*S),N+=a*(5*_),P=(N+=c*(5*w))>>>13,N&=8191,N+=u*(5*v),N+=h*(5*b),N+=l*(5*g),N+=(f+=8191&(O>>>8|k<<8))*(5*y);var D=P+=(N+=(d+=k>>>5|n)*(5*m))>>>13;D+=i*m,D+=o*p,D+=s*(5*E),D+=a*(5*S),P=(D+=c*(5*_))>>>13,D&=8191,D+=u*(5*w),D+=h*(5*v),D+=l*(5*b),D+=f*(5*g),P+=(D+=d*(5*y))>>>13,D&=8191;var B=P;B+=i*y,B+=o*m,B+=s*p,B+=a*(5*E),P=(B+=c*(5*S))>>>13,B&=8191,B+=u*(5*_),B+=h*(5*w),B+=l*(5*v),B+=f*(5*b);var x=P+=(B+=d*(5*g))>>>13;x+=i*g,x+=o*y,x+=s*m,x+=a*p,P=(x+=c*(5*E))>>>13,x&=8191,x+=u*(5*S),x+=h*(5*_),x+=l*(5*w),x+=f*(5*v);var L=P+=(x+=d*(5*b))>>>13;L+=i*b,L+=o*g,L+=s*y,L+=a*m,P=(L+=c*p)>>>13,L&=8191,L+=u*(5*E),L+=h*(5*S),L+=l*(5*_),L+=f*(5*w);var U=P+=(L+=d*(5*v))>>>13;U+=i*v,U+=o*b,U+=s*g,U+=a*y,P=(U+=c*m)>>>13,U&=8191,U+=u*p,U+=h*(5*E),U+=l*(5*S),U+=f*(5*_);var j=P+=(U+=d*(5*w))>>>13;j+=i*w,j+=o*v,j+=s*b,j+=a*g,P=(j+=c*y)>>>13,j&=8191,j+=u*m,j+=h*p,j+=l*(5*E),j+=f*(5*S);var K=P+=(j+=d*(5*_))>>>13;K+=i*_,K+=o*w,K+=s*v,K+=a*b,P=(K+=c*g)>>>13,K&=8191,K+=u*y,K+=h*m,K+=l*p,K+=f*(5*E);var F=P+=(K+=d*(5*S))>>>13;F+=i*S,F+=o*_,F+=s*w,F+=a*v,P=(F+=c*b)>>>13,F&=8191,F+=u*g,F+=h*y,F+=l*m,F+=f*p;var q=P+=(F+=d*(5*E))>>>13;q+=i*E,q+=o*S,q+=s*_,q+=a*w,P=(q+=c*v)>>>13,q&=8191,q+=u*b,q+=h*g,q+=l*y,q+=f*m,i=N=8191&(P=(P=((P+=(q+=d*p)>>>13)<<2)+P|0)+(N&=8191)|0),o=D+=P>>>=13,s=B&=8191,a=x&=8191,c=L&=8191,u=U&=8191,h=j&=8191,l=K&=8191,f=F&=8191,d=q&=8191,e+=16,r-=16}this._h[0]=i,this._h[1]=o,this._h[2]=s,this._h[3]=a,this._h[4]=c,this._h[5]=u,this._h[6]=h,this._h[7]=l,this._h[8]=f,this._h[9]=d},t.prototype.finish=function(t,e){void 0===e&&(e=0);var r,n,i,o,s=new Uint16Array(10);if(this._leftover){for(o=this._leftover,this._buffer[o++]=1;o<16;o++)this._buffer[o]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,o=2;o<10;o++)this._h[o]+=r,r=this._h[o]>>>13,this._h[o]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,s[0]=this._h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this._h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this._h[o]=this._h[o]&n|s[o];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,o=1;o<8;o++)i=(this._h[o]+this._pad[o]|0)+(i>>>16)|0,this._h[o]=65535&i;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,r=0,n=t.length;if(this._leftover){(e=16-this._leftover)>n&&(e=n);for(var i=0;i<e;i++)this._buffer[this._leftover+i]=t[r+i];if(n-=e,r+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(e=n-n%16,this._blocks(t,r,e),r+=e,n-=e),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=t[r+i];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();e.Poly1305=o,e.oneTimeAuth=function(t,e){var r=new o(t);r.update(e);var n=r.digest();return r.clean(),n},e.equal=function(t,r){return t.length===e.DIGEST_LENGTH&&r.length===e.DIGEST_LENGTH&&n.equal(t,r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(536),i=r(25),o=r(45),s=r(24),a=r(29),c=r(537);e.compare=n.compare,e.concat=i.concat,e.equals=o.equals,e.fromString=s.fromString,e.toString=a.toString,e.xor=c.xor},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compare=function(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xor=function(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IKHandshake=void 0;const n=r(539),i=r(124),o=r(77),s=r(540),a=r(100);e.IKHandshake=class{constructor(t,e,r,i,o,s,a,c){this.isInitiator=t,this.payload=e,this.prologue=r,this.staticKeypair=i,this.connection=o,a&&(this.remotePeer=a),this.ik=null!==c&&void 0!==c?c:new n.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,s),this.remoteEarlyData=new Uint8Array}async stage0(){if((0,a.logLocalStaticKeys)(this.session.hs.s),(0,a.logRemoteStaticKey)(this.session.hs.rs),this.isInitiator){(0,a.logger)("IK Stage 0 - Initiator sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,i.encode1)(t)),(0,a.logger)("IK Stage 0 - Initiator sent message."),(0,a.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,a.logger)("IK Stage 0 - Responder receiving message...");const e=await this.connection.readLP();try{const t=(0,i.decode1)(e.slice()),{plaintext:r,valid:n}=this.ik.recvMessage(this.session,t);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");(0,a.logger)("IK Stage 0 - Responder got message, going to verify payload.");const s=await(0,o.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,o.getPeerIdFromPayload)(s),await(0,o.verifySignedPayload)(this.session.hs.rs,s,this.remotePeer),this.setRemoteEarlyData(s.data),(0,a.logger)("IK Stage 0 - Responder successfully verified payload!"),(0,a.logRemoteEphemeralKey)(this.session.hs.re)}catch(t){const r=t;throw(0,a.logger)("Responder breaking up with IK handshake in stage 0."),new s.FailedIKError(e,"Error occurred while verifying initiator's signed payload: ".concat(r.message))}}}async stage1(){if(this.isInitiator){(0,a.logger)("IK Stage 1 - Initiator receiving message...");const e=(await this.connection.readLP()).slice(),r=(0,i.decode0)(e),{plaintext:n,valid:c}=this.ik.recvMessage(this.session,r);(0,a.logger)("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!c)throw new Error("ik stage 1 decryption validation fail");const t=await(0,o.decodePayload)(n);this.remotePeer=this.remotePeer||await(0,o.getPeerIdFromPayload)(t),await(0,o.verifySignedPayload)(r.ns.slice(0,32),t,this.remotePeer),this.setRemoteEarlyData(t.data),(0,a.logger)("IK Stage 1 - Initiator successfully verified payload!"),(0,a.logRemoteEphemeralKey)(this.session.hs.re)}catch(t){const r=t;throw(0,a.logger)("Initiator breaking up with IK handshake in stage 1."),new s.FailedIKError(e,"Error occurred while verifying responder's signed payload: ".concat(r.message))}}else{(0,a.logger)("IK Stage 1 - Responder sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,i.encode0)(t)),(0,a.logger)("IK Stage 1 - Responder sent message..."),(0,a.logLocalEphemeralKeys)(this.session.hs.e)}(0,a.logCipherState)(this.session)}decrypt(t,e){const r=this.getCS(e,!1);return this.ik.decryptWithAd(r,new Uint8Array(0),t)}encrypt(t,e){const r=this.getCS(e);return this.ik.encryptWithAd(r,new Uint8Array(0),t)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.cs1||!t.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IK=void 0;const n=r(77),i=r(295);class o extends i.AbstractHandshake{initSession(t,e,r,n){const i=this.createEmptyKey();let o;return o=t?this.initializeInitiator(e,r,n,i):this.initializeResponder(e,r,n,i),{hs:o,i:t,mc:0}}sendMessage(t,e){let r;if(0===t.mc)r=this.writeMessageA(t.hs,e);else if(1===t.mc){const{messageBuffer:n,h:i,cs1:o,cs2:s}=this.writeMessageB(t.hs,e);r=n,t.h=i,t.cs1=o,t.cs2=s}else{if(!(t.mc>1))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");r=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");r=this.writeMessageRegular(t.cs2,e)}}return t.mc++,r}recvMessage(t,e){let r=new Uint8Array(0),n=!1;if(0===t.mc&&({plaintext:r,valid:n}=this.readMessageA(t.hs,e)),1===t.mc){const{plaintext:i,valid:o,h:s,cs1:a,cs2:c}=this.readMessageB(t.hs,e);r=i,n=o,t.h=s,t.cs1=a,t.cs2=c}return t.mc++,{plaintext:r,valid:n}}writeMessageA(t,e){t.e=(0,n.generateKeypair)();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const i=t.s.publicKey,o=this.encryptAndHash(t.ss,i);this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs));return{ne:r,ns:o,ciphertext:this.encryptAndHash(t.ss,e)}}writeMessageB(t,e){t.e=(0,n.generateKeypair)();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const i=this.encryptAndHash(t.ss,e),o={ne:r,ns:this.createEmptyKey(),ciphertext:i},{cs1:s,cs2:a}=this.split(t.ss);return{messageBuffer:o,cs1:s,cs2:a,h:t.ss.h}}readMessageA(t,e){(0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ns);i&&32===r.length&&(0,n.isValidPublicKey)(r)&&(t.rs=r),this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs));const{plaintext:o,valid:s}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:o,valid:i&&s}}readMessageB(t,e){if((0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:o,cs2:s}=this.split(t.ss);return{h:t.ss.h,valid:i,plaintext:r,cs1:o,cs2:s}}initializeInitiator(t,e,r,n){const i=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");this.mixHash(i,t),this.mixHash(i,r);return{ss:i,s:e,rs:r,re:new Uint8Array(32),psk:n}}initializeResponder(t,e,r,n){const i=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");this.mixHash(i,t),this.mixHash(i,e.publicKey);return{ss:i,s:e,rs:r,re:new Uint8Array(32),psk:n}}}e.IK=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FailedIKError=void 0;class n extends Error{constructor(t,e){super(e),this.initialMsg=t,this.name="FailedIKhandshake"}}e.FailedIKError=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XXFallbackHandshake=void 0;const n=r(293),i=r(77),o=r(100),s=r(124);class a extends n.XXHandshake{constructor(t,e,r,n,i,o,s,a,c){super(t,e,r,n,i,s,c),a&&(this.ephemeralKeys=a),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),(0,o.logger)("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),(0,o.logLocalEphemeralKeys)(this.session.hs.e);else{(0,o.logger)("XX Fallback Stage 0 - Responder decoding initial msg from IK.");const t=(0,s.decode0)(this.initialMsg),{valid:e}=this.xx.recvMessage(this.session,{ne:t.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!e)throw new Error("xx fallback stage 0 decryption validation fail");(0,o.logger)("XX Fallback Stage 0 - Responder used received message from IK."),(0,o.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){const e=(0,s.decode1)(this.initialMsg),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx fallback stage 1 decryption validation fail");(0,o.logger)("XX Fallback Stage 1 - Initiator used received message from IK."),(0,o.logRemoteEphemeralKey)(this.session.hs.re),(0,o.logRemoteStaticKey)(this.session.hs.rs),(0,o.logger)("Initiator going to check remote's signature...");try{const t=await(0,i.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,i.getPeerIdFromPayload)(t),await(0,i.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){throw new Error("Error occurred while verifying signed payload from responder: ".concat(t.message))}(0,o.logger)("All good with the signature!")}else(0,o.logger)("XX Fallback Stage 1 - Responder start"),await super.exchange(),(0,o.logger)("XX Fallback Stage 1 - Responder end")}}e.XXFallbackHandshake=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decryptStream=e.encryptStream=void 0;const n=r(177);e.encryptStream=function(t){return async function*(e){for await(const r of e)for(let e=0;e<r.length;e+=n.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let i=e+n.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;i>r.length&&(i=r.length);const o=t.encrypt(r.slice(e,i),t.session);yield o}}},e.decryptStream=function(t){return async function*(e){for await(const r of e)for(let e=0;e<r.length;e+=n.NOISE_MSG_MAX_LENGTH_BYTES){let i=e+n.NOISE_MSG_MAX_LENGTH_BYTES;i>r.length&&(i=r.length);const{plaintext:o,valid:s}=await t.decrypt(r.slice(e,i),t.session);if(!s)throw new Error("Failed to validate decrypted chunk");yield o}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCache=void 0;const n=new class{constructor(){this.storage=new Map}store(t,e){this.storage.set(t.id,e)}load(t){var e;return t&&null!==(e=this.storage.get(t.id))&&void 0!==e?e:null}resetStorage(){this.storage.clear()}};e.KeyCache=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(545),i=r(178),o=r(547);class s extends n.BaseDatastore{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(t,e){this.data[t.toString()]=e}async get(t){if(!await this.has(t))throw o.notFoundError();return this.data[t.toString()]}async has(t){return void 0!==this.data[t.toString()]}async delete(t){delete this.data[t.toString()]}async*_all(){yield*Object.entries(this.data).map((t=>{let[e,r]=t;return{key:new i.Key(e),value:r}}))}async*_allKeys(){yield*Object.entries(this.data).map((t=>{let[e]=t;return new i.Key(e)}))}}e.MemoryDatastore=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(546),i=r(125),o=r(89),s=r(296);function a(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var c=a(i),u=a(o),h=a(s);e.BaseDatastore=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(t,e,r){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const{key:r,value:n}of t)await this.put(r,n,e),yield{key:r,value:n}}async*getMany(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of t)yield this.get(r,e)}async*deleteMany(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of t)await this.delete(r,e),yield r}batch(){let t=[],e=[];return{put(e,r){t.push({key:e,value:r})},delete(t){e.push(t)},commit:async r=>{await c.default(this.putMany(t,r)),t=[],await c.default(this.deleteMany(e,r)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let r=this._all(t,e);if(null!=t.prefix&&(r=u.default(r,(e=>e.key.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(r=t.filters.reduce(((t,e)=>u.default(t,e)),r)),Array.isArray(t.orders)&&(r=t.orders.reduce(((t,e)=>n.sortAll(t,e)),r)),null!=t.offset){let e=0;r=u.default(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=h.default(r,t.limit)),r}queryKeys(t,e){let r=this._allKeys(t,e);if(null!=t.prefix&&(r=u.default(r,(e=>e.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(r=t.filters.reduce(((t,e)=>u.default(t,e)),r)),Array.isArray(t.orders)&&(r=t.orders.reduce(((t,e)=>n.sortAll(t,e)),r)),null!=t.offset){let e=0;r=u.default(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=h.default(r,t.limit)),r}}},function(t,e,r){"use strict";function n(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(88));e.replaceStartWith=(t,e)=>{const r=new RegExp("^"+e);return t.replace(r,"")},e.sortAll=(t,e)=>async function*(){const r=await i.default(t);yield*r.sort(e)}()},function(t,e,r){"use strict";function n(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(9));e.abortedError=function(t){return t=t||new Error("Aborted"),i.default(t,"ERR_ABORTED")},e.dbDeleteFailedError=function(t){return t=t||new Error("Delete failed"),i.default(t,"ERR_DB_DELETE_FAILED")},e.dbOpenFailedError=function(t){return t=t||new Error("Cannot open database"),i.default(t,"ERR_DB_OPEN_FAILED")},e.dbWriteFailedError=function(t){return t=t||new Error("Write failed"),i.default(t,"ERR_DB_WRITE_FAILED")},e.notFoundError=function(t){return t=t||new Error("Not Found"),i.default(t,"ERR_NOT_FOUND")}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:peer-routing"),{error:n("libp2p:peer-routing:err")}),o=r(9),s=r(27),{storeAddresses:a,uniquePeers:c,requirePeers:u}=r(297),{TimeoutController:h}=r(299),l=r(300),{pipe:f}=r(31),d=r(301),p=r(125),m=r(89),{setDelayedInterval:y,clearDelayedInterval:g}=r(302),{DHTPeerRouting:b}=r(550),{setMaxListeners:v}=r(33);t.exports=class{constructor(t){this._peerId=t.peerId,this._peerStore=t.peerStore,this._routers=t._modules.peerRouting||[],t._dht&&t._config.dht.enabled&&this._routers.push(new b(t._dht)),this._refreshManagerOptions=t._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){this._routers.length&&!this._timeoutId&&this._refreshManagerOptions.enabled&&(this._timeoutId=y(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await p(this.getClosestPeers(this._peerId.id,{timeout:this._refreshManagerOptions.timeout||1e4}))}catch(t){i.error(t)}}stop(){g(this._timeoutId)}async findPeer(t,e){if(!this._routers.length)throw o(new Error("No peer routers available"),s.codes.ERR_NO_ROUTERS_AVAILABLE);if(t.toB58String()===this._peerId.toB58String())throw o(new Error("Should not try to find self"),s.codes.ERR_FIND_SELF);const r=await f(l(...this._routers.map((r=>async function*(){try{yield await r.findPeer(t,e)}catch(n){i.error(n)}}()))),(t=>m(t,Boolean)),(t=>a(t,this._peerStore)),(t=>d(t)));if(r)return r;throw o(new Error(s.messages.NOT_FOUND),s.codes.ERR_NOT_FOUND)}async*getClosestPeers(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:3e4};if(!this._routers.length)throw o(new Error("No peer routers available"),s.codes.ERR_NO_ROUTERS_AVAILABLE);if(e.timeout){const t=new h(e.timeout);try{v&&v(1/0,t.signal)}catch{}e.signal=t.signal}yield*f(l(...this._routers.map((r=>r.getClosestPeers(t,e)))),(t=>a(t,this._peerStore)),(t=>c(t)),(t=>u(t)))}}},function(t,e,r){"use strict";t.exports=function(){return Date.now()}},function(t,e,r){"use strict";const n=r(9),{messages:i,codes:o}=r(27);t.exports={DHTPeerRouting:class{constructor(t){this._dht=t}async findPeer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of this._dht.findPeer(t,e))if("FINAL_PEER"===r.name)return r.peer;throw n(new Error(i.NOT_FOUND),o.ERR_NOT_FOUND)}async*getClosestPeers(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of this._dht.getClosestPeers(t,e))"PEER_RESPONSE"===r.name&&(yield*r.closer)}}}},function(t,e,r){"use strict";const n=r(9),{messages:i,codes:o}=r(27),{storeAddresses:s,uniquePeers:a,requirePeers:c,maybeLimitSource:u}=r(297),h=r(125),l=r(300),{pipe:f}=r(31),{DHTContentRouting:d}=r(552);t.exports=class{constructor(t){this.libp2p=t,this.routers=t._modules.contentRouting||[],this.dht=t._dht,this.dht&&t._config.dht.enabled&&this.routers.push(new d(this.dht))}async*findProviders(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.routers.length)throw n(new Error("No content this.routers available"),o.ERR_NO_ROUTERS_AVAILABLE);yield*f(l(...this.routers.map((r=>r.findProviders(t,e)))),(t=>s(t,this.libp2p.peerStore)),(t=>a(t)),(t=>u(t,e.maxNumProviders)),(t=>c(t)))}async provide(t){if(!this.routers.length)throw n(new Error("No content routers available"),o.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((e=>e.provide(t))))}async put(t,e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw n(new Error(i.NOT_STARTED_YET),o.DHT_NOT_STARTED);await h(this.dht.put(t,e,r))}async get(t,e){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw n(new Error(i.NOT_STARTED_YET),o.DHT_NOT_STARTED);for await(const r of this.dht.get(t,e))if("VALUE"===r.name)return{from:r.peerId,val:r.value};throw n(new Error(i.NOT_FOUND),o.ERR_NOT_FOUND)}async*getMany(t,e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw n(new Error(i.NOT_STARTED_YET),o.DHT_NOT_STARTED);if(!e)return;let s=0;for await(const n of this.dht.get(t,r))if("VALUE"===n.name&&(yield{from:n.peerId,val:n.value},s++,s===e))break;if(0===s)throw n(new Error(i.NOT_FOUND),o.ERR_NOT_FOUND)}}},function(t,e,r){"use strict";const n=r(125);t.exports={DHTContentRouting:class{constructor(t){this._dht=t}async provide(t){await n(this._dht.provide(t))}async*findProviders(t,e){for await(const r of this._dht.findProviders(t,e))"PROVIDER"===r.name&&(yield*r.providers)}}}},function(t,e,r){"use strict";const n=r(101),{dnsaddrResolver:i}=r(555),o=r(179),{AGENT_VERSION:s}=r(304),a=r(180),{publicAddressesFirst:c}=r(306),{FaultTolerance:u}=r(308),h={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{minConnections:25},connectionGater:{},transportManager:{faultTolerance:u.FATAL_ALL},dialer:{maxParallelDials:o.MAX_PARALLEL_DIALS,maxDialsPerPeer:o.MAX_PER_PEER_DIALS,dialTimeout:o.DIAL_TIMEOUT,resolvers:{dnsaddr:i},addressSorter:c},host:{agentVersion:s},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:a.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:a.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};t.exports.validate=t=>{const e=n(h,t);if(e.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return e}},function(t,e,r){"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},function(t,e,r){"use strict";const n=r(118),{code:i}=n("dnsaddr");t.exports={dnsaddrResolver:async function(t){const e=new(r(556)),n=t.getPeerId(),[,o]=t.stringTuples().find((t=>{let[e]=t;return e===i}))||[];let s=(await e.resolveTxt("_dnsaddr.".concat(o))).flat().map((t=>t.split("=")[1]));return n&&(s=s.filter((t=>t.includes(n)))),s}}},function(t,e,r){"use strict";const n=r(557);t.exports=n},function(t,e,r){"use strict";const n=r(5),i=n("dns-over-http-resolver");i.error=n("dns-over-http-resolver:error");const o=r(558),s=r(559);class a{constructor(){let{maxCache:t=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._cache=new o({max:t}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){const t=[].concat(this._servers);for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*e),n=t[e];t[e]=t[r],t[r]=n}return t}setServers(t){this._servers=t}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A";switch(e){case"A":return this.resolve4(t);case"AAAA":return this.resolve6(t);case"TXT":return this.resolveTxt(t);default:throw new Error("".concat(e," is not supported"))}}async resolve4(t){const e="A",r=this._cache.get(s.getCacheKey(t,e));if(r)return r;for(const o of this._getShuffledServers())try{const r=await s.fetch(s.buildResource({serverResolver:o,hostname:t,recordType:e})),n=await r.json(),i=n.Answer.map((t=>t.data)),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(s.getCacheKey(t,e),i,{ttl:a}),i}catch(n){i.error("".concat(o," could not resolve ").concat(t," record ").concat(e))}throw new Error("Could not resolve ".concat(t," record ").concat(e))}async resolve6(t){const e="AAAA",r=this._cache.get(s.getCacheKey(t,e));if(r)return r;for(const o of this._getShuffledServers())try{const r=await s.fetch(s.buildResource({serverResolver:o,hostname:t,recordType:e})),n=await r.json(),i=n.Answer.map((t=>t.data)),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(s.getCacheKey(t,e),i,{ttl:a}),i}catch(n){i.error("".concat(o," could not resolve ").concat(t," record ").concat(e))}throw new Error("Could not resolve ".concat(t," record ").concat(e))}async resolveTxt(t){const e="TXT",r=this._cache.get(s.getCacheKey(t,e));if(r)return r;for(const o of this._getShuffledServers())try{const r=await s.fetch(s.buildResource({serverResolver:o,hostname:t,recordType:e})),n=await r.json(),i=n.Answer.map((t=>[t.data.replace(/['"]+/g,"")])),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(s.getCacheKey(t,e),i,{ttl:a}),i}catch(n){i.error("".concat(o," could not resolve ").concat(t," record ").concat(e))}throw new Error("Could not resolve ".concat(t," record ").concat(e))}}a.Resolver=a,t.exports=a},function(t,e,r){"use strict";t.exports=s;var n=r(276),i=s.prototype,o=new Date%1e9;function s(t){t=t||{},this.id=t.id||(1e9*Math.random()>>>0)+o++,this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,n=this.items.length;n--;)e=this.items[n],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}i.has=function(t){return t in this._lookup},i.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value},i.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null},i.set=function(t,e,r){var n=this._lookup[t],i=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(t){var e=this._lookup[t];return!!e&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this)},i.expire=function(t,e){var r=e||0,i=this._lookup[t];if(!i)return this;if("string"===typeof r&&(r=n(e)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this},i.toJSON=function(){for(var t,e=new Array(this.items.length),r=e.length;r--;)t=this.items[r],e[r]={key:t.key,meta:t.meta,value:t.value,expires:t.expires,refresh:t.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:e}}},function(t,e,r){"use strict";const{default:n,Headers:i}=r(560);t.exports={buildResource:function(t){let{serverResolver:e,hostname:r,recordType:n}=t;return"".concat(e,"?name=").concat(r,"&type=").concat(n)},fetch:function(t){return n(t,{headers:new i({accept:"application/dns-json"})})},getCacheKey:function(t,e){return"".concat(e,"_").concat(t)}}},function(t,e,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?t.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:t.exports={default:r(127).default,Headers:r(127).Headers,Request:r(127).Request,Response:r(127).Response}},function(t,e,r){"use strict";const n=r(307);t.exports=function(t){const{address:e}=t.nodeAddress();return n(e)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(563),o=n(r(275)),s=n(r(274)),a=r(564),c=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((t=>new i.Netmask(t)));function u(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}e.default=t=>{if(a.isValid(t)){const e=a.parse(t);if("ipv4"===e.kind())return function(t){for(let e of c)if(e.contains(t))return!0;return!1}(e.toNormalizedString());if("ipv6"===e.kind())return u(t)}else if(s.default(t)&&o.default.v6().test(t))return u(t)}},function(t,e){(function(){var t,r,n,i,o,s,a,c;c=function(t){return[(t&255<<24)>>>24,(t&255<<16)>>>16,(65280&t)>>>8,255&t].join(".")},a=function(t){var e,n,i,o,s,a;for(e=[],i=o=0;o<=3&&0!==t.length;i=++o){if(i>0){if("."!==t[0])throw new Error("Invalid IP");t=t.substring(1)}s=(a=r(t))[0],n=a[1],t=t.substring(n),e.push(s)}if(0!==t.length)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},i=(n=function(t){return t.charCodeAt(0)})("0"),s=n("a"),o=n("A"),r=function(t){var e,r,a,c,u;for(c=0,e=10,r="9",a=0,t.length>1&&"0"===t[a]&&("x"===t[a+1]||"X"===t[a+1]?(a+=2,e=16):"0"<=t[a+1]&&t[a+1]<="9"&&(a++,e=8,r="7")),u=a;a<t.length;){if("0"<=t[a]&&t[a]<=r)c=c*e+(n(t[a])-i)>>>0;else{if(16!==e)break;if("a"<=t[a]&&t[a]<="f")c=c*e+(10+n(t[a])-s)>>>0;else{if(!("A"<=t[a]&&t[a]<="F"))break;c=c*e+(10+n(t[a])-o)>>>0}}if(c>4294967295)throw new Error("too large");a++}if(a===u)throw new Error("empty octet");return[c,a]},t=function(){function t(t,e){var r,n,i;if("string"!==typeof t)throw new Error("Missing `net' parameter");if(e||(i=t.split("/",2),t=i[0],e=i[1]),e||(e=32),"string"===typeof e&&e.indexOf(".")>-1){try{this.maskLong=a(e)}catch(o){throw o,new Error("Invalid mask: "+e)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!e&&0!==e)throw new Error("Invalid mask: empty");this.bitmask=parseInt(e,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(t)&this.maskLong)>>>0}catch(o){throw o,new Error("Invalid net address: "+t)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+e);this.size=Math.pow(2,32-this.bitmask),this.base=c(this.netLong),this.mask=c(this.maskLong),this.hostmask=c(~this.maskLong),this.first=this.bitmask<=30?c(this.netLong+1):this.base,this.last=this.bitmask<=30?c(this.netLong+this.size-2):c(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?c(this.netLong+this.size-1):void 0}return t.prototype.contains=function(e){return"string"===typeof e&&(e.indexOf("/")>0||4!==e.split(".").length)&&(e=new t(e)),e instanceof t?this.contains(e.base)&&this.contains(e.broadcast||e.last):(a(e)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},t.prototype.next=function(e){return null==e&&(e=1),new t(c(this.netLong+this.size*e),this.mask)},t.prototype.forEach=function(t){var e,r,n;for(n=a(this.first),r=a(this.last),e=0;n<=r;)t(c(n),n,e),e++,n++},t.prototype.toString=function(){return this.base+"/"+this.bitmask},t}(),e.ip2long=a,e.long2ip=c,e.Netmask=t}).call(this)},function(t,e,r){!function(e){"use strict";const r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),threeOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),twoOctet:new RegExp("^".concat(r,"\\.").concat(r,"$"),"i"),longValue:new RegExp("^".concat(r,"$"),"i")},i=new RegExp("^0[0-7]+$","i"),o=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(s,"i"),native:new RegExp("^(::)?(".concat(a,")?([0-9a-f]+)?(::)?(").concat(s,")?$"),"i"),deprecatedTransitional:new RegExp("^(?:::)(".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(s,")?)$"),"i"),transitional:new RegExp("^((?:".concat(a,")|(?:::)(?:").concat(a,")?)").concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(s,")?$"),"i")};function u(t,e){if(t.indexOf("::")!==t.lastIndexOf("::"))return null;let r,n,i=0,o=-1,s=(t.match(c.zoneIndex)||[])[0];for(s&&(s=s.substring(1),t=t.replace(/%.+$/,""));(o=t.indexOf(":",o+1))>=0;)i++;if("::"===t.substr(0,2)&&i--,"::"===t.substr(-2,2)&&i--,i>e)return null;for(n=e-i,r=":";n--;)r+="0:";return":"===(t=t.replace("::",r))[0]&&(t=t.slice(1)),":"===t[t.length-1]&&(t=t.slice(0,-1)),{parts:e=function(){const e=t.split(":"),r=[];for(let t=0;t<e.length;t++)r.push(parseInt(e[t],16));return r}(),zoneId:s}}function h(t,e,r,n){if(t.length!==e.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let i,o=0;for(;n>0;){if(i=r-n,i<0&&(i=0),t[o]>>i!==e[o]>>i)return!1;n-=r,o+=1}return!0}function l(t){if(o.test(t))return parseInt(t,16);if("0"===t[0]&&!isNaN(parseInt(t[1],10))){if(i.test(t))return parseInt(t,8);throw new Error("ipaddr: cannot parse ".concat(t," as octal"))}return parseInt(t,10)}function f(t,e){for(;t.length<e;)t="0".concat(t);return t}const d={};d.IPv4=function(){function t(t){if(4!==t.length)throw new Error("ipaddr: ipv4 octet count should be 4");let e,r;for(e=0;e<t.length;e++)if(r=t[e],!(0<=r&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=t}return t.prototype.SpecialRanges={unspecified:[[new t([0,0,0,0]),8]],broadcast:[[new t([255,255,255,255]),32]],multicast:[[new t([224,0,0,0]),4]],linkLocal:[[new t([169,254,0,0]),16]],loopback:[[new t([127,0,0,0]),8]],carrierGradeNat:[[new t([100,64,0,0]),10]],private:[[new t([10,0,0,0]),8],[new t([172,16,0,0]),12],[new t([192,168,0,0]),16]],reserved:[[new t([192,0,0,0]),24],[new t([192,0,2,0]),24],[new t([192,88,99,0]),24],[new t([198,51,100,0]),24],[new t([203,0,113,0]),24],[new t([240,0,0,0]),4]]},t.prototype.kind=function(){return"ipv4"},t.prototype.match=function(t,e){let r;if(void 0===e&&(r=t,t=r[0],e=r[1]),"ipv4"!==t.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return h(this.octets,t.octets,8,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,o;for(n=3;n>=0;n-=1){if(i=this.octets[n],!(i in r))return null;if(o=r[i],e&&0!==o)return null;8!==o&&(e=!0),t+=o}return 32-t},t.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){return this.octets.slice(0)},t.prototype.toIPv4MappedAddress=function(){return d.IPv6.parse("::ffff:".concat(this.toString()))},t.prototype.toNormalizedString=function(){return this.toString()},t.prototype.toString=function(){return this.octets.join(".")},t}(),d.IPv4.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),r=e[0].toByteArray(),n=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[];let o=0;for(;o<4;)i.push(parseInt(r[o],10)|255^parseInt(n[o],10)),o++;return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.isIPv4=function(t){return null!==this.parser(t)},d.IPv4.isValid=function(t){try{return new this(this.parser(t)),!0}catch(e){return!1}},d.IPv4.isValidFourPartDecimal=function(t){return!(!d.IPv4.isValid(t)||!t.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},d.IPv4.networkAddressFromCIDR=function(t){let e,r,n,i,o;try{for(e=this.parseCIDR(t),n=e[0].toByteArray(),o=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[],r=0;r<4;)i.push(parseInt(n[r],10)&parseInt(o[r],10)),r++;return new this(i)}catch(s){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.parse=function(t){const e=this.parser(t);if(null===e)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(e)},d.IPv4.parseCIDR=function(t){let e;if(e=t.match(/^(.+)\/(\d+)$/)){const t=parseInt(e[2]);if(t>=0&&t<=32){const r=[this.parse(e[1]),t];return Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},d.IPv4.parser=function(t){let e,r,i;if(e=t.match(n.fourOctet))return function(){const t=e.slice(1,6),n=[];for(let e=0;e<t.length;e++)r=t[e],n.push(l(r));return n}();if(e=t.match(n.longValue)){if(i=l(e[1]),i>4294967295||i<0)throw new Error("ipaddr: address outside defined range");return function(){const t=[];let e;for(e=0;e<=24;e+=8)t.push(i>>e&255);return t}().reverse()}return(e=t.match(n.twoOctet))?function(){const t=e.slice(1,4),r=[];if(i=l(t[1]),i>16777215||i<0)throw new Error("ipaddr: address outside defined range");return r.push(l(t[0])),r.push(i>>16&255),r.push(i>>8&255),r.push(255&i),r}():(e=t.match(n.threeOctet))?function(){const t=e.slice(1,5),r=[];if(i=l(t[2]),i>65535||i<0)throw new Error("ipaddr: address outside defined range");return r.push(l(t[0])),r.push(l(t[1])),r.push(i>>8&255),r.push(255&i),r}():null},d.IPv4.subnetMaskFromPrefixLength=function(t){if((t=parseInt(t))<0||t>32)throw new Error("ipaddr: invalid IPv4 prefix length");const e=[0,0,0,0];let r=0;const n=Math.floor(t/8);for(;r<n;)e[r]=255,r++;return n<4&&(e[n]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},d.IPv6=function(){function t(t,e){let r,n;if(16===t.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(t[r]<<8|t[r+1]);else{if(8!==t.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=t}for(r=0;r<this.parts.length;r++)if(n=this.parts[r],!(0<=n&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");e&&(this.zoneId=e)}return t.prototype.SpecialRanges={unspecified:[new t([0,0,0,0,0,0,0,0]),128],linkLocal:[new t([65152,0,0,0,0,0,0,0]),10],multicast:[new t([65280,0,0,0,0,0,0,0]),8],loopback:[new t([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new t([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new t([0,0,0,0,0,65535,0,0]),96],rfc6145:[new t([0,0,0,0,65535,0,0,0]),96],rfc6052:[new t([100,65435,0,0,0,0,0,0]),96],"6to4":[new t([8194,0,0,0,0,0,0,0]),16],teredo:[new t([8193,0,0,0,0,0,0,0]),32],reserved:[[new t([8193,3512,0,0,0,0,0,0]),32]]},t.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},t.prototype.kind=function(){return"ipv6"},t.prototype.match=function(t,e){let r;if(void 0===e&&(r=t,t=r[0],e=r[1]),"ipv6"!==t.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return h(this.parts,t.parts,16,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let o=7;o>=0;o-=1){if(n=this.parts[o],!(n in r))return null;if(i=r[n],e&&0!==i)return null;16!==i&&(e=!0),t+=i}return 128-t},t.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){let t;const e=[],r=this.parts;for(let n=0;n<r.length;n++)t=r[n],e.push(t>>8),e.push(255&t);return e},t.prototype.toFixedLengthString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(f(this.parts[e].toString(16),4));return t}.call(this).join(":");let e="";return this.zoneId&&(e="%".concat(this.zoneId)),t+e},t.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const t=this.parts.slice(-2),e=t[0],r=t[1];return new d.IPv4([e>>8,255&e,r>>8,255&r])},t.prototype.toNormalizedString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(this.parts[e].toString(16));return t}.call(this).join(":");let e="";return this.zoneId&&(e="%".concat(this.zoneId)),t+e},t.prototype.toRFC5952String=function(){const t=/((^|:)(0(:|$)){2,})/g,e=this.toNormalizedString();let r,n=0,i=-1;for(;r=t.exec(e);)r[0].length>i&&(n=r.index,i=r[0].length);return i<0?e:"".concat(e.substring(0,n),"::").concat(e.substring(n+i))},t.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},t}(),d.IPv6.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),r=e[0].toByteArray(),n=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[];let o=0;for(;o<16;)i.push(parseInt(r[o],10)|255^parseInt(n[o],10)),o++;return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(e,")"))}},d.IPv6.isIPv6=function(t){return null!==this.parser(t)},d.IPv6.isValid=function(t){if("string"===typeof t&&-1===t.indexOf(":"))return!1;try{const e=this.parser(t);return new this(e.parts,e.zoneId),!0}catch(e){return!1}},d.IPv6.networkAddressFromCIDR=function(t){let e,r,n,i,o;try{for(e=this.parseCIDR(t),n=e[0].toByteArray(),o=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[],r=0;r<16;)i.push(parseInt(n[r],10)&parseInt(o[r],10)),r++;return new this(i)}catch(s){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(s,")"))}},d.IPv6.parse=function(t){const e=this.parser(t);if(null===e.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(e.parts,e.zoneId)},d.IPv6.parseCIDR=function(t){let e,r,n;if((r=t.match(/^(.+)\/(\d+)$/))&&(e=parseInt(r[2]),e>=0&&e<=128))return n=[this.parse(r[1]),e],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},d.IPv6.parser=function(t){let e,r,n,i,o,s;if(n=t.match(c.deprecatedTransitional))return this.parser("::ffff:".concat(n[1]));if(c.native.test(t))return u(t,8);if((n=t.match(c.transitional))&&(s=n[6]||"",e=u(n[1].slice(0,-1)+s,6),e.parts)){for(o=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<o.length;r++)if(i=o[r],!(0<=i&&i<=255))return null;return e.parts.push(o[0]<<8|o[1]),e.parts.push(o[2]<<8|o[3]),{parts:e.parts,zoneId:e.zoneId}}return null},d.IPv6.subnetMaskFromPrefixLength=function(t){if((t=parseInt(t))<0||t>128)throw new Error("ipaddr: invalid IPv6 prefix length");const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(t/8);for(;r<n;)e[r]=255,r++;return n<16&&(e[n]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},d.fromByteArray=function(t){const e=t.length;if(4===e)return new d.IPv4(t);if(16===e)return new d.IPv6(t);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},d.isValid=function(t){return d.IPv6.isValid(t)||d.IPv4.isValid(t)},d.parse=function(t){if(d.IPv6.isValid(t))return d.IPv6.parse(t);if(d.IPv4.isValid(t))return d.IPv4.parse(t);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},d.parseCIDR=function(t){try{return d.IPv6.parseCIDR(t)}catch(e){try{return d.IPv4.parseCIDR(t)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},d.process=function(t){const e=this.parse(t);return"ipv6"===e.kind()&&e.isIPv4MappedAddress()?e.toIPv4Address():e},d.subnetMatch=function(t,e,r){let n,i,o,s;for(i in void 0!==r&&null!==r||(r="unicast"),e)if(Object.prototype.hasOwnProperty.call(e,i))for(o=e[i],!o[0]||o[0]instanceof Array||(o=[o]),n=0;n<o.length;n++)if(s=o[n],t.kind()===s[0].kind()&&t.match.apply(t,s))return i;return r},t.exports?t.exports=d:e.ipaddr=d}(this)},function(t,e,r){"use strict";const n=r(566),i=r(567);t.exports=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{concurrency:r=1/0}=e,o=i(r);return Promise.all(t.map((t=>t&&"function"===typeof t.then?n(t):n("function"===typeof t?o((()=>t())):Promise.resolve(t)))))}},function(t,e,r){"use strict";const n=async t=>{try{return{isFulfilled:!0,isRejected:!1,value:await t}}catch(e){return{isFulfilled:!1,isRejected:!0,reason:e}}};t.exports=n,t.exports.default=n},function(t,e,r){"use strict";const n=r(568),i=t=>{if(!Number.isInteger(t)&&t!==1/0||!(t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const e=[];let r=0;const i=()=>{r--,e.length>0&&e.shift()()},o=function(t,e){r++;for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];const c=n(t,...s);e(c),c.then(i,i)},s=function(n,i){for(var s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];r<t?o(n,i,...a):e.push(o.bind(null,n,i,...a))},a=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return new Promise((e=>s(t,e,...r)))};return Object.defineProperties(a,{activeCount:{get:()=>r},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),a};t.exports=i,t.exports.default=i},function(t,e,r){"use strict";const n=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return new Promise((e=>{e(t(...r))}))};t.exports=n,t.exports.default=n},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-envelope"]||(n.roots["libp2p-envelope"]={});a.Envelope=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.publicKey=s.newBuffer([]),t.prototype.payloadType=s.newBuffer([]),t.prototype.payload=s.newBuffer([]),t.prototype.signature=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.publicKey&&Object.hasOwnProperty.call(t,"publicKey")&&e.uint32(10).bytes(t.publicKey),null!=t.payloadType&&Object.hasOwnProperty.call(t,"payloadType")&&e.uint32(18).bytes(t.payloadType),null!=t.payload&&Object.hasOwnProperty.call(t,"payload")&&e.uint32(26).bytes(t.payload),null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.Envelope;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.publicKey=t.bytes();break;case 2:n.payloadType=t.bytes();break;case 3:n.payload=t.bytes();break;case 5:n.signature=t.bytes();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.Envelope)return t;var e=new a.Envelope;return null!=t.publicKey&&("string"===typeof t.publicKey?s.base64.decode(t.publicKey,e.publicKey=s.newBuffer(s.base64.length(t.publicKey)),0):t.publicKey.length&&(e.publicKey=t.publicKey)),null!=t.payloadType&&("string"===typeof t.payloadType?s.base64.decode(t.payloadType,e.payloadType=s.newBuffer(s.base64.length(t.payloadType)),0):t.payloadType.length&&(e.payloadType=t.payloadType)),null!=t.payload&&("string"===typeof t.payload?s.base64.decode(t.payload,e.payload=s.newBuffer(s.base64.length(t.payload)),0):t.payload.length&&(e.payload=t.payload)),null!=t.signature&&("string"===typeof t.signature?s.base64.decode(t.signature,e.signature=s.newBuffer(s.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.publicKey="":(r.publicKey=[],e.bytes!==Array&&(r.publicKey=s.newBuffer(r.publicKey))),e.bytes===String?r.payloadType="":(r.payloadType=[],e.bytes!==Array&&(r.payloadType=s.newBuffer(r.payloadType))),e.bytes===String?r.payload="":(r.payload=[],e.bytes!==Array&&(r.payload=s.newBuffer(r.payload))),e.bytes===String?r.signature="":(r.signature=[],e.bytes!==Array&&(r.signature=s.newBuffer(r.signature)))),null!=t.publicKey&&t.hasOwnProperty("publicKey")&&(r.publicKey=e.bytes===String?s.base64.encode(t.publicKey,0,t.publicKey.length):e.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),null!=t.payloadType&&t.hasOwnProperty("payloadType")&&(r.payloadType=e.bytes===String?s.base64.encode(t.payloadType,0,t.payloadType.length):e.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),null!=t.payload&&t.hasOwnProperty("payload")&&(r.payload=e.bytes===String?s.base64.encode(t.payload,0,t.payload.length):e.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),null!=t.signature&&t.hasOwnProperty("signature")&&(r.signature=e.bytes===String?s.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},function(t,e,r){"use strict";t.exports=function(t,e){return t.length===e.length&&e.sort()&&t.sort().every(((t,r)=>e[r].equals(t)))}},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-peer-record"]||(n.roots["libp2p-peer-record"]={});a.PeerRecord=function(){function t(t){if(this.addresses=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.peerId=s.newBuffer([]),t.prototype.seq=s.Long?s.Long.fromBits(0,0,!0):0,t.prototype.addresses=s.emptyArray,t.encode=function(t,e){if(e||(e=o.create()),null!=t.peerId&&Object.hasOwnProperty.call(t,"peerId")&&e.uint32(10).bytes(t.peerId),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&e.uint32(16).uint64(t.seq),null!=t.addresses&&t.addresses.length)for(var r=0;r<t.addresses.length;++r)a.PeerRecord.AddressInfo.encode(t.addresses[r],e.uint32(26).fork()).ldelim();return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.PeerRecord;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.peerId=t.bytes();break;case 2:n.seq=t.uint64();break;case 3:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(a.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.PeerRecord)return t;var e=new a.PeerRecord;if(null!=t.peerId&&("string"===typeof t.peerId?s.base64.decode(t.peerId,e.peerId=s.newBuffer(s.base64.length(t.peerId)),0):t.peerId.length&&(e.peerId=t.peerId)),null!=t.seq&&(s.Long?(e.seq=s.Long.fromValue(t.seq)).unsigned=!0:"string"===typeof t.seq?e.seq=parseInt(t.seq,10):"number"===typeof t.seq?e.seq=t.seq:"object"===typeof t.seq&&(e.seq=new s.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");e.addresses=[];for(var r=0;r<t.addresses.length;++r){if("object"!==typeof t.addresses[r])throw TypeError(".PeerRecord.addresses: object expected");e.addresses[r]=a.PeerRecord.AddressInfo.fromObject(t.addresses[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.addresses=[]),e.defaults)if(e.bytes===String?r.peerId="":(r.peerId=[],e.bytes!==Array&&(r.peerId=s.newBuffer(r.peerId))),s.Long){var n=new s.Long(0,0,!0);r.seq=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.seq=e.longs===String?"0":0;if(null!=t.peerId&&t.hasOwnProperty("peerId")&&(r.peerId=e.bytes===String?s.base64.encode(t.peerId,0,t.peerId.length):e.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),null!=t.seq&&t.hasOwnProperty("seq")&&("number"===typeof t.seq?r.seq=e.longs===String?String(t.seq):t.seq:r.seq=e.longs===String?s.Long.prototype.toString.call(t.seq):e.longs===Number?new s.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){r.addresses=[];for(var i=0;i<t.addresses.length;++i)r.addresses[i]=a.PeerRecord.AddressInfo.toObject(t.addresses[i],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.AddressInfo=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.multiaddr=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.PeerRecord.AddressInfo;t.pos<r;){var o=t.uint32();if(o>>>3===1)n.multiaddr=t.bytes();else t.skipType(7&o)}return n},t.fromObject=function(t){if(t instanceof a.PeerRecord.AddressInfo)return t;var e=new a.PeerRecord.AddressInfo;return null!=t.multiaddr&&("string"===typeof t.multiaddr?s.base64.decode(t.multiaddr,e.multiaddr=s.newBuffer(s.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.multiaddr="":(r.multiaddr=[],e.bytes!==Array&&(r.multiaddr=s.newBuffer(r.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(r.multiaddr=e.bytes===String?s.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a},function(t,e,r){"use strict";const n=Uint8Array.from([3,1]);t.exports={ENVELOPE_DOMAIN_PEER_RECORD:"libp2p-peer-record",ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:n}},function(t,e,r){"use strict";const{EventEmitter:n}=r(33),{Multiaddr:i}=r(11),o=r(23);t.exports=class extends n{constructor(t){let{listen:e=[],announce:r=[]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.peerId=t,this.listen=new Set(e.map((t=>t.toString()))),this.announce=new Set(r.map((t=>t.toString()))),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map((t=>new i(t)))}getAnnounceAddrs(){return Array.from(this.announce).map((t=>new i(t)))}getObservedAddrs(){return Array.from(this.observed).map((t=>new i(t)))}addObservedAddr(t){let e=new i(t);const r=e.getPeerId();if(r){o.createFromB58String(r).equals(this.peerId)&&(e=e.decapsulate(new i("/p2p/".concat(this.peerId))))}const n=e.toString();this.observed.has(n)||(this.observed.add(n),this.emit("change:addresses"))}}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:connection-manager"),{error:n("libp2p:connection-manager:err")}),o=r(9),s=r(101),a=r(575),c=r(126),{EventEmitter:u}=r(33),h=r(310),l=r(23),{codes:{ERR_INVALID_PARAMETERS:f}}=r(27),d={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},p="connection-manager";t.exports=class extends u{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),this._libp2p=t,this._peerId=t.peerId.toB58String(),this._options=s.call({ignoreUndefined:!0},d,e),this._options.maxConnections<this._options.minConnections)throw o(new Error("Connection Manager maxConnections must be greater than minConnections"),f);i("options: %j",this._options),this._peerValues=h({component:p,metric:"peer-values",metrics:this._libp2p.metrics}),this.connections=h({component:p,metric:"peer-connections",metrics:this._libp2p.metrics}),this._started=!1,this._timer=null,this._checkMetrics=this._checkMetrics.bind(this),this._latencyMonitor=new a({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval}),this.setMaxListeners(1/0)}get size(){return Array.from(this.connections.values()).reduce(((t,e)=>t+e.length),0)}start(){this._libp2p.metrics&&(this._timer=this._timer||c(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,i("started")}async stop(){this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),i("stopped")}async _close(){const t=[];for(const e of this.connections.values())for(const r of e)t.push(r.close());await Promise.all(t),this.connections.clear()}setPeerValue(t,e){if(e<0||e>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(t.toB58String(),e)}async _checkMetrics(){if(this._libp2p.metrics)try{const t=this._libp2p.metrics.global.movingAverages,e=t.dataReceived[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxReceivedData",e);const r=t.dataSent[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxSentData",r);const n=e+r;await this._checkMaxLimit("maxData",n),i("metrics update",n)}finally{this._timer=c(this._checkMetrics,this._options.pollInterval)}}async onConnect(t){if(!this._started)return void await t.close();const e=t.remotePeer,r=e.toB58String(),n=this.connections.get(r);this.emit("peer:connect",t),n?n.push(t):this.connections.set(r,[t]),await this._libp2p.peerStore.keyBook.set(e,e.pubKey),this._peerValues.has(r)||this._peerValues.set(r,this._options.defaultPeerValue),await this._checkMaxLimit("maxConnections",this.size)}onDisconnect(t){if(!this._started)return;const e=t.remotePeer.toB58String();let r=this.connections.get(e);r&&r.length>1?(r=r.filter((e=>e.id!==t.id)),this.connections.set(e,r)):r&&(this.connections.delete(e),this._peerValues.delete(t.remotePeer.toB58String()),this.emit("peer:disconnect",t),this._libp2p.metrics&&this._libp2p.metrics.onPeerDisconnected(t.remotePeer))}get(t){const e=this.getAll(t);return e.length?e[0]:null}getAll(t){if(!l.isPeerId(t))throw o(new Error("peerId must be an instance of peer-id"),f);const e=t.toB58String(),r=this.connections.get(e);return r?r.filter((t=>"open"===t.stat.status)):[]}_onLatencyMeasure(t){this._checkMaxLimit("maxEventLoopDelay",t.avgMs).catch((t=>{i.error(t)}))}async _checkMaxLimit(t,e){const r=this._options[t];i("checking limit of %s. current value: %d of %d",t,e,r),e>r&&(i("%s: limit exceeded: %s, %d",this._peerId,t,e),await this._maybeDisconnectOne())}async _maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){const t=Array.from(new Map([...this._peerValues.entries()].sort(((t,e)=>t[1]-e[1]))));i("%s: sorted peer values: %j",this._peerId,t);const e=t[0];if(e){const t=e[0];i("%s: lowest value peer is %s",this._peerId,t),i("%s: closing a connection to %j",this._peerId,t);for(const e of this.connections.values())if(e[0].remotePeer.toB58String()===t){e[0].close().catch((t=>{i.error(t)})),this.onDisconnect(e[0]);break}}}}}},function(t,e,r){"use strict";const{EventEmitter:n}=r(33),i=r(576),o=r(5)("latency-monitor:LatencyMonitor");t.exports=class extends n{constructor(){let{latencyCheckIntervalMs:t,dataEmitIntervalMs:e,asyncTestFn:r,latencyRandomPercentage:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();const i=this;i.latencyCheckIntervalMs=t||500,i.latencyRandomPercentage=n||10,i._latecyCheckMultiply=i.latencyRandomPercentage/100*2*i.latencyCheckIntervalMs,i._latecyCheckSubtract=i._latecyCheckMultiply/2,i.dataEmitIntervalMs=null===e||0===e?void 0:e||5e3,o("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",i.latencyCheckIntervalMs,i.dataEmitIntervalMs),i.dataEmitIntervalMs?o("Expecting ~%s events per summary",i.latencyCheckIntervalMs/i.dataEmitIntervalMs):o("Not emitting summaries"),i.asyncTestFn=r}start(){globalThis.process&&globalThis.process.hrtime?(o("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=t=>{const e=this.now(t);return 1e3*e[0]+e[1]/1e6}):"undefined"!==typeof window&&window.performance&&window.performance.now?(o("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=t=>Math.round(this.now()-t)):(o("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=t=>this.now()-t),this._latencyData=this._initLatencyData(),"undefined"!==typeof window&&(this._visibilityChangeEmitter=new i,this._visibilityChangeEmitter.on("visibilityChange",(t=>{t?this._startTimers():(this._emitSummary(),this._stopTimers())}))),this._visibilityChangeEmitter&&!this._visibilityChangeEmitter.isVisible()||this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"===typeof this._emitIntervalID.unref&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){const t=this.getSummary();t.events>0&&this.emit("data",t)}getSummary(){const t={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),o("Summary: %O",t),t}_checkLatency(){const t=this,e=Math.random()*t._latecyCheckMultiply-t._latecyCheckSubtract,r={deltaOffset:Math.ceil(t.latencyCheckIntervalMs+e),startTime:t.now()},n=()=>{if(!this._checkLatencyID)return;const e=t.getDeltaMS(r.startTime)-r.deltaOffset;t._checkLatency(),t._latencyData.events++,t._latencyData.minMs=Math.min(t._latencyData.minMs,e),t._latencyData.maxMs=Math.max(t._latencyData.maxMs,e),t._latencyData.totalMs+=e,o("MS: %s Data: %O",e,t._latencyData)};o("localData: %O",r),this._checkLatencyID=setTimeout((()=>{t.asyncTestFn?(r.deltaOffset=0,r.startTime=t.now(),t.asyncTestFn(n)):(r.deltaOffset-=1,n())}),r.deltaOffset),"function"===typeof this._checkLatencyID.unref&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}},function(t,e,r){"use strict";const{EventEmitter:n}=r(33),i=r(5)("latency-monitor:VisibilityChangeEmitter");t.exports=class extends n{constructor(){super(),"undefined"!==typeof document?(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()):i('This is not a browser, no "document" found. Stopping.')}_initializeVisibilityVarNames(){let t,e;"undefined"!==typeof document.hidden?(t="hidden",e="visibilitychange"):"undefined"!==typeof document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(t="msHidden",e="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),this._hidden=t,this._visibilityChange=e}_addVisibilityChangeListener(){"undefined"===typeof document.addEventListener||"undefined"===typeof document[this._hidden]?i("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this._hidden&&void 0!==document[this._hidden])return!document[this._hidden]}_handleVisibilityChange(){const t=!document[this._hidden];i(t?"Page Visible":"Page Hidden"),this.emit("visibilityChange",t)}}},function(t,e,r){"use strict";const n=r(5),i=r(101),o=r(126),s=r(88),{pipe:a}=r(31),c=r(89),u=r(578),h=Object.assign(n("libp2p:connection-manager:auto-dialler"),{error:n("libp2p:connection-manager:auto-dialler:err")}),l={enabled:!0,minConnections:0,autoDialInterval:1e4};t.exports=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._options=i.call({ignoreUndefined:!0},l,e),this._libp2p=t,this._running=!1,this._autoDialTimeout=null,this._autoDial=this._autoDial.bind(this),h("options: %j",this._options)}async start(){this._options.enabled?(this._running=!0,this._autoDial().catch((t=>{h.error("could start autodial",t)})),h("started")):h("not enabled")}async stop(){this._options.enabled?(this._running=!1,this._autoDialTimeout&&this._autoDialTimeout.clear(),h("stopped")):h("not enabled")}async _autoDial(){const t=this._options.minConnections;if(this._libp2p.connections.size>=t)return void(this._autoDialTimeout=o(this._autoDial,this._options.autoDialInterval));const e=await a(this._libp2p.peerStore.getPeers(),(t=>c(t,(t=>!t.id.equals(this._libp2p.peerId)))),(t=>u(t,((t,e)=>!e.protocols||!e.protocols.length||t.protocols&&t.protocols.length?e.id.pubKey&&!t.id.pubKey?1:-1:1))),(t=>s(t)));for(let n=0;this._running&&n<e.length&&this._libp2p.connections.size<t;n++){const t=e[n];if(!this._libp2p.connectionManager.get(t.id)){h("connecting to a peerStore stored peer %s",t.id.toB58String());try{await this._libp2p.dialer.connectToPeer(t.id)}catch(r){h.error("could not connect to peerStore stored peer",r)}}}this._running&&(this._autoDialTimeout=o(this._autoDial,this._options.autoDialInterval))}}},function(t,e,r){"use strict";const n=r(88);t.exports=async function*(t,e){const r=await n(t);yield*r.sort(e)}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:circuit"),{error:n("libp2p:circuit:err")}),o=r(9),s=r(182),{Multiaddr:a}=r(11),c=r(23),{CircuitRelay:u}=r(102),{codes:h}=r(27),l=r(580),{relay:f}=r(129),d=r(582),{handleCanHop:p,handleHop:m,hop:y}=r(311),{handleStop:g}=r(313),b=r(183),v=Symbol.for("@libp2p/js-libp2p-circuit/circuit");class w{constructor(t){let{libp2p:e,upgrader:r}=t;this._dialer=e.dialer,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._upgrader=r,this._options=e._config.relay,this._libp2p=e,this.peerId=e.peerId,this._registrar.handle(f,this._onProtocol.bind(this))}async _onProtocol(t){let{connection:e,stream:r}=t;const n=new b({stream:r}),o=await n.read();if(!o)return;const s=this;let c;switch(o.type){case u.Type.CAN_HOP:i("received CAN_HOP request from %s",e.remotePeer.toB58String()),await p({circuit:s,connection:e,streamHandler:n});break;case u.Type.HOP:i("received HOP request from %s",e.remotePeer.toB58String()),c=await m({connection:e,request:o,streamHandler:n,circuit:s});break;case u.Type.STOP:i("received STOP request from %s",e.remotePeer.toB58String()),c=await g({connection:e,request:o,streamHandler:n});break;default:i("Request of type %s not supported",o.type)}if(c){const t=new a(o.dstPeer.addrs[0]),e=new a(o.srcPeer.addrs[0]),r=l({stream:c,remoteAddr:t,localAddr:e}),n=o.type===u.Type.HOP?"relay":"inbound";i("new %s connection %s",n,r.remoteAddr);const s=await this._upgrader.upgradeInbound(r);i("%s connection %s upgraded",n,r.remoteAddr),this.handler&&this.handler(s)}}async dial(t,e){const r=t.toString().split("/p2p-circuit"),n=new a(r[0]),s=new a(r[r.length-1]),f=n.getPeerId(),d=s.getPeerId();if(!f||!d){const t="Circuit relay dial failed as addresses did not have peer id";throw i.error(t),o(new Error(t),h.ERR_RELAYED_DIAL)}const p=c.createFromB58String(f),m=c.createFromB58String(d);let g=!1,b=this._connectionManager.get(p);b||(b=await this._dialer.connectToPeer(n,e),g=!0);try{const e=await y({connection:b,request:{type:u.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map((t=>t.bytes))},dstPeer:{id:m.toBytes(),addrs:[new a(s).bytes]}}}),r=n.encapsulate("/p2p-circuit/p2p/".concat(this.peerId.toB58String())),o=l({stream:e,remoteAddr:t,localAddr:r});return i("new outbound connection %s",o.remoteAddr),this._upgrader.upgradeOutbound(o)}catch(v){throw i.error("Circuit relay dial failed",v),g&&await b.close(),v}}createListener(t,e){return"function"===typeof t&&(e=t,t={}),this.handler=e,d(this._libp2p)}filter(t){return(t=Array.isArray(t)?t:[t]).filter((t=>s.Circuit.matches(t)))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(t){return Boolean(t&&t[v])}}t.exports=w},function(t,e,r){"use strict";const{source:n}=r(66),i=r(5)("libp2p:stream:converter");t.exports=function(t){let{stream:e,remoteAddr:r,localAddr:o}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sink:a,source:c}=e,u={async sink(t){s.signal&&(t=n(t,s.signal));try{await a(t)}catch(e){"aborted"!==e.type&&i(e)}h()},source:s.signal?n(c,s.signal):c,conn:e,localAddr:o,remoteAddr:r,timeline:{open:Date.now(),close:void 0},close:()=>(a(new Uint8Array(0)),h())};function h(){return u.timeline.close||(u.timeline.close=Date.now()),Promise.resolve()}return u}},function(t,e){t.exports=class extends Error{constructor(t,e){super(t||"The operation was aborted"),this.type="aborted",this.code=e||"ABORT_ERR"}}},function(t,e,r){"use strict";const{EventEmitter:n}=r(33),{Multiaddr:i}=r(11);t.exports=t=>{const e=new Map;const r=Object.assign(new n,{close:()=>Promise.resolve(),listen:async function(n){const o=String(n).split("/p2p-circuit").find((t=>""!==t)),s=await t.dial(new i(o)),a=s.remoteAddr.encapsulate("/p2p-circuit");e.set(s.remotePeer.toB58String(),a),r.emit("listening")},getAddrs:function(){const t=[];for(const r of e.values())t.push(r);return t}});return t.connectionManager.on("peer:disconnect",(t=>{e.delete(t.remotePeer.toB58String())&&r.emit("close")})),r}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:relay"),{error:n("libp2p:relay:err")}),{codes:o}=r(27),{setDelayedInterval:s,clearDelayedInterval:a}=r(302),c=r(584),{namespaceToCid:u}=r(314),{RELAY_RENDEZVOUS_NS:h}=r(180);t.exports=class{constructor(t){this._libp2p=t,this._options={...t._config.relay},this._autoRelay=this._options.autoRelay.enabled&&new c({libp2p:t,...this._options.autoRelay}),this._advertiseService=this._advertiseService.bind(this)}start(){this._options.hop.enabled&&this._options.advertise.enabled&&(this._timeout=s(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){a(this._timeout)}async _advertiseService(){try{const t=await u(h);await this._libp2p.contentRouting.provide(t)}catch(t){t.code===o.ERR_NO_ROUTERS_AVAILABLE?(i.error("a content router, such as a DHT, must be provided in order to advertise the relay service",t),this.stop()):i.error(t)}}}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:auto-relay"),{error:n("libp2p:auto-relay:err")}),{fromString:o}=r(24),{toString:s}=r(29),{Multiaddr:a}=r(11),c=r(88),{relay:u}=r(129),{canHop:h}=r(311),{namespaceToCid:l}=r(314),{CIRCUIT_PROTO_CODE:f,HOP_METADATA_KEY:d,HOP_METADATA_VALUE:p,RELAY_RENDEZVOUS_NS:m}=r(180);t.exports=class{constructor(t){let{libp2p:e,maxListeners:r=1,onError:n}=t;this._libp2p=e,this._peerId=e.peerId,this._peerStore=e.peerStore,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._addressSorter=e.dialer.addressSorter,this.maxListeners=r,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(t,e)=>{i.error(e||t),n&&n(t,e)}}async _onProtocolChange(t){let{peerId:e,protocols:r}=t;const n=e.toB58String(),s=r.find((t=>t===u));if(s||!this._listenRelays.has(n)){if(s&&!this._listenRelays.has(n))try{const t=this._connectionManager.get(e);if(!t)return;if(t.remoteAddr.protoCodes().includes(f))return void i("relayed connection to ".concat(n," will not be used to hop on"));await h({connection:t})&&(await this._peerStore.metadataBook.setValue(e,d,o(p)),await this._addListenRelay(t,n))}catch(a){this._onError(a)}}else await this._removeListenRelay(n)}_onPeerDisconnected(t){const e=t.remotePeer.toB58String();this._listenRelays.has(e)&&this._removeListenRelay(e).catch((t=>{i.error(t)}))}async _addListenRelay(t,e){try{if(this._listenRelays.size>=this.maxListeners)return;const r=await this._peerStore.addressBook.getMultiaddrsForPeer(t.remotePeer,this._addressSorter);(await Promise.all(r.map((async t=>{try{return await this._transportManager.listen([new a("".concat(t.toString(),"/p2p-circuit"))]),!0}catch(e){this._onError(e)}return!1})))).includes(!0)&&this._listenRelays.add(e)}catch(r){this._onError(r),this._listenRelays.delete(e)}}async _removeListenRelay(t){this._listenRelays.delete(t)&&await this._listenOnAvailableHopRelays([t])}async _listenOnAvailableHopRelays(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this._listenRelays.size>=this.maxListeners)return;const e=[],r=await c(this._peerStore.getPeers());for await(const{id:i,metadata:o}of r){const r=i.toB58String();if(this._listenRelays.has(r))continue;if(t.includes(r))continue;const n=o.get(d);if(!n||s(n)!==p)continue;const a=this._connectionManager.get(i);if(a){if(await this._addListenRelay(a,r),this._listenRelays.size>=this.maxListeners)return}else e.push(i)}for(const i of e)if(await this._tryToListenOnRelay(i),this._listenRelays.size>=this.maxListeners)return;try{const t=await l(m);for await(const e of this._libp2p.contentRouting.findProviders(t)){if(!e.multiaddrs.length)continue;const t=e.id;if(await this._peerStore.addressBook.add(t,e.multiaddrs),await this._tryToListenOnRelay(t),this._listenRelays.size>=this.maxListeners)return}}catch(n){this._onError(n)}}async _tryToListenOnRelay(t){try{const e=await this._libp2p.dial(t);await this._addListenRelay(e,t.toB58String())}catch(e){this._onError(e,"could not connect and listen on known hop relay ".concat(t.toB58String()))}}}},function(t,e,r){"use strict";const n=r(5),i=r(88),o=r(89),{pipe:s}=r(31),a=Object.assign(n("libp2p:dialer"),{error:n("libp2p:dialer:err")}),c=r(9),{Multiaddr:u}=r(11),{TimeoutController:h}=r(299),{AbortError:l}=r(66),{anySignal:f}=r(315),{setMaxListeners:d}=r(33),p=r(586),{publicAddressesFirst:m}=r(306),y=r(303),g=r(310),{codes:b}=r(27),{DIAL_TIMEOUT:v,MAX_PARALLEL_DIALS:w,MAX_PER_PEER_DIALS:_,MAX_ADDRS_TO_DIAL:S}=r(179),E="dialler";t.exports=class{constructor(t){let{transportManager:e,peerStore:r,connectionGater:n,addressSorter:i=m,maxParallelDials:o=w,maxAddrsToDial:s=S,dialTimeout:a=v,maxDialsPerPeer:c=_,resolvers:h={},metrics:l}=t;this.connectionGater=n,this.transportManager=e,this.peerStore=r,this.addressSorter=i,this.maxParallelDials=o,this.maxAddrsToDial=s,this.timeout=a,this.maxDialsPerPeer=c,this.tokens=[...new Array(o)].map(((t,e)=>e)),this._pendingDials=g({component:E,metric:"pending-dials",metrics:l}),this._pendingDialTargets=g({component:E,metric:"pending-dial-targets",metrics:l});for(const[f,d]of Object.entries(h))u.resolvers.set(f,d)}destroy(){for(const e of this._pendingDials.values())try{e.controller.abort()}catch(t){a.error(t)}this._pendingDials.clear();for(const e of this._pendingDialTargets.values())e.reject(new l("Dialer was destroyed"));this._pendingDialTargets.clear()}async connectToPeer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:r}=y(t);if(await this.connectionGater.denyDialPeer(r))throw c(new Error("The dial request is blocked by gater.allowDialPeer"),b.ERR_PEER_DIAL_INTERCEPTED);const n=await this._createCancellableDialTarget(t);if(!n.addrs.length)throw c(new Error("The dial request has no valid addresses"),b.ERR_NO_VALID_ADDRESSES);const i=this._pendingDials.get(n.id)||this._createPendingDial(n,e);try{const t=await i.promise;return a("dial succeeded to %s",n.id),t}catch(o){throw i.controller.signal.aborted&&(o.code=b.ERR_TIMEOUT),a.error(o),o}finally{i.destroy()}}async _createCancellableDialTarget(t){const e="".concat(parseInt(String(1e9*Math.random()),10).toString()+Date.now()),r=new Promise(((t,r)=>{this._pendingDialTargets.set(e,{resolve:t,reject:r})}));try{return await Promise.race([this._createDialTarget(t),r])}finally{this._pendingDialTargets.delete(e)}}async _createDialTarget(t){const{id:e,multiaddrs:r}=y(t);r&&await this.peerStore.addressBook.add(e,r);let n=await s(await this.peerStore.addressBook.getMultiaddrsForPeer(e,this.addressSorter),(t=>o(t,(async t=>!await this.connectionGater.denyDialMultiaddr(e,t)))),(t=>i(t)));u.isMultiaddr(t)&&(n=n.filter((e=>!t.equals(e))),n.unshift(t));const a=[];for(const i of n){(await this._resolve(i)).forEach((t=>a.push(t)))}const h=a.filter((t=>this.transportManager.transportForMultiaddr(t)));if(h.length>this.maxAddrsToDial)throw await this.peerStore.delete(e),c(new Error("dial with more addresses than allowed"),b.ERR_TOO_MANY_ADDRESSES);return{id:e.toB58String(),addrs:h}}_createPendingDial(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new p({addrs:t.addrs,dialAction:(t,e)=>{if(e.signal.aborted)throw c(new Error("already aborted"),b.ERR_ALREADY_ABORTED);return this.transportManager.dial(t,e)},dialer:this}),n=new h(this.timeout),i=[n.signal];e.signal&&i.push(e.signal);const o=f(i);try{d&&d(1/0,o)}catch{}const s={dialRequest:r,controller:n,promise:r.run({...e,signal:o}),destroy:()=>{n.clear(),this._pendingDials.delete(t.id)}};return this._pendingDials.set(t.id,s),s}getTokens(t){const e=Math.min(t,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,e);return a("%d tokens request, returning %d, %d remaining",t,e,this.tokens.length),r}releaseToken(t){this.tokens.indexOf(t)>-1||(a("token %d released",t),this.tokens.push(t))}async _resolve(t){if(!t.protoNames().includes("dnsaddr"))return[t];const e=await this._resolveRecord(t);return(await Promise.all(e.map((t=>this._resolve(t))))).flat().reduce(((t,e)=>(t.find((t=>t.equals(e)))||t.push(e),t)),[])}async _resolveRecord(t){try{t=new u(t.toString());return await t.resolve()}catch(e){return a.error("multiaddr ".concat(t," could not be resolved")),[]}}}},function(t,e,r){"use strict";const n=r(9),{anySignal:i}=r(315),o=r(587),s=r(588),{setMaxListeners:a}=r(33),{codes:c}=r(27);t.exports=class{constructor(t){let{addrs:e,dialAction:r,dialer:n}=t;this.addrs=e,this.dialer=n,this.dialAction=r}async run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.dialer.getTokens(this.addrs.length);if(e.length<1)throw n(new Error("No dial tokens available"),c.ERR_NO_DIAL_TOKENS);const r=new o;e.forEach((t=>r.push(t)));const u=this.addrs.map((()=>{const t=new AbortController;try{a&&a(1/0,t.signal)}catch{}return t}));let h=0;try{return await s(this.addrs.map((async(n,o)=>{const s=await r.shift();let a;try{const c=u[o].signal;a=await this.dialAction(n,{...t,signal:t.signal?i([c,t.signal]):c}),u.splice(o,1)}finally{h++,this.addrs.length-h>=e.length?r.push(s):this.dialer.releaseToken(e.splice(e.indexOf(s),1)[0])}return a})))}finally{u.map((t=>t.abort())),e.forEach((t=>this.dialer.releaseToken(t)))}}}},function(t,e,r){const n=r(289),i=r(174);t.exports=class{constructor(){this._buffer=new n,this._waitingConsumers=new n}push(t){const{promise:e,resolve:r}=i();return this._buffer.push({chunk:t,resolve:r}),this._consume(),e}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){const t=this._waitingConsumers.shift(),e=this._buffer.shift();t.resolve(e.chunk),e.resolve()}}shift(){const{promise:t,resolve:e}=i();return this._waitingConsumers.push({resolve:e}),this._consume(),t}isEmpty(){return this._buffer.isEmpty()}}},function(t,e,r){"use strict";const n=r(589),i=r(317);t.exports=(t,e)=>{const r=n(t,{...e,count:1});return i.fn((async t=>{t((()=>{r.cancel()}));const[e]=await r;return e}))()},t.exports.AggregateError=n.AggregateError},function(t,e,r){"use strict";const n=r(590),i=r(317);class o extends Error{}t.exports=(t,e)=>new i(((r,i,s)=>{const{count:a,filter:c=(()=>!0)}=e;if(!Number.isFinite(a))return void i(new TypeError("Expected a finite number, got ".concat(typeof e.count)));const u=[],h=[];let l=0,f=!1;const d=new Set,p=()=>{for(const e of t)d.has(e)||"function"!==typeof e.cancel||e.cancel()};s(p);for(const e of t)l++,(async()=>{try{const t=await e;if(f)return;if(!c(t))throw new o("Value does not satisfy filter");u.push(t)}catch(t){h.push(t)}finally{d.add(e),!f&&(u.length===a&&(r(u),f=!0),l-h.length<a&&(i(new n(h)),f=!0),f)&&p()}})();a>l&&(i(new RangeError("Expected input to contain at least ".concat(e.count," items, but contains ").concat(l," items"))),p())})),t.exports.AggregateError=n,t.exports.FilterError=o},function(t,e,r){"use strict";const n=r(591),i=r(592);class o extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got ".concat(typeof t));let e=(t=[...t].map((t=>t instanceof Error?t:null!==t&&"object"===typeof t?Object.assign(new Error(t.message),t):new Error(t)))).map((t=>"string"===typeof t.stack?i(t.stack).replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""):String(t))).join("\n");e="\n"+n(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(const t of this._errors)yield t}}t.exports=o},function(t,e,r){"use strict";t.exports=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;if(r={indent:" ",includeEmptyLines:!1,...r},"string"!==typeof t)throw new TypeError("Expected `input` to be a `string`, got `".concat(typeof t,"`"));if("number"!==typeof e)throw new TypeError("Expected `count` to be a `number`, got `".concat(typeof e,"`"));if("string"!==typeof r.indent)throw new TypeError("Expected `options.indent` to be a `string`, got `".concat(typeof r.indent,"`"));if(0===e)return t;const n=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(n,r.indent.repeat(e))}},function(t,e,r){"use strict";const n=r(316),i=/\s+at.*(?:\(|\s)(.*)\)?/,o=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,s="undefined"===typeof n.homedir?"":n.homedir();t.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split("\n").filter((t=>{const e=t.match(i);if(null===e||!e[1])return!0;const r=e[1];return!r.includes(".app/Contents/Resources/electron.asar")&&!r.includes(".app/Contents/Resources/default_app.asar")&&!o.test(r)})).filter((t=>""!==t.trim())).map((t=>e.pretty?t.replace(i,((t,e)=>t.replace(e,e.replace(s,"~")))):t)).join("\n"))},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:keychain"),{error:n("libp2p:keychain:err")}),o=r(594),s=r(101),a=r(104),{Key:c}=r(178),u=r(598),h=r(9),{codes:l}=r(27),{toString:f}=r(29),{fromString:d}=r(24);r(283);const p="/info/",m=new WeakMap,y=14,g=16,b=1e3,v={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function w(t){return!!t&&("string"===typeof t&&t===o(t.trim()))}async function _(t){const e=800*Math.random()+200;throw await new Promise((t=>setTimeout(t,e))),t}function S(t){return new c("/pkcs8/"+t)}function E(t){return new c(p+t)}t.exports=class{constructor(t,e){if(!t)throw new Error("store is required");if(this.store=t,this.opts=s(v,e),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<y)throw new Error("dek.keyLength must be least ".concat(y," bytes"));if(this.opts.dek.salt.length<g)throw new Error("dek.saltLength must be least ".concat(g," bytes"));if(this.opts.dek.iterationCount<b)throw new Error("dek.iterationCount must be least ".concat(b));const r=this.opts.pass?a.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";m.set(this,{dek:r})}get cms(){return new u(this,m.get(this).dek)}static generateOptions(){const t=Object.assign({},v),e=3*Math.ceil(g/3);return t.dek.salt=f(a.randomBytes(e),"base64"),t}static get options(){return v}async createKey(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2048;const n=this;if(!w(t)||"self"===t)return _(h(new Error("Invalid key name '".concat(t,"'")),l.ERR_INVALID_KEY_NAME));if("string"!==typeof e)return _(h(new Error("Invalid key type '".concat(e,"'")),l.ERR_INVALID_KEY_TYPE));const i=S(t);if(await n.store.has(i))return _(h(new Error("Key '".concat(t,"' already exists")),l.ERR_KEY_ALREADY_EXISTS));if("rsa"===e.toLowerCase())if(!Number.isSafeInteger(r)||r<2048)return _(h(new Error("Invalid RSA key size ".concat(r)),l.ERR_INVALID_KEY_SIZE));let o;try{const s=await a.keys.generateKeyPair(e,r),c=await s.id(),u=m.get(this).dek,h=await s.export(u);o={name:t,id:c};const l=n.store.batch();l.put(i,d(h)),l.put(E(t),d(JSON.stringify(o))),await l.commit()}catch(s){return _(s)}return o}async listKeys(){const t=this,e={prefix:p},r=[];for await(const n of t.store.query(e))r.push(JSON.parse(f(n.value)));return r}async findKeyById(t){try{return(await this.listKeys()).find((e=>e.id===t))}catch(e){return _(e)}}async findKeyByName(t){if(!w(t))return _(h(new Error("Invalid key name '".concat(t,"'")),l.ERR_INVALID_KEY_NAME));const e=E(t);try{const t=await this.store.get(e);return JSON.parse(f(t))}catch(r){return _(h(new Error("Key '".concat(t,"' does not exist. ").concat(r.message)),l.ERR_KEY_NOT_FOUND))}}async removeKey(t){if(!w(t)||"self"===t)return _(h(new Error("Invalid key name '".concat(t,"'")),l.ERR_INVALID_KEY_NAME));const e=S(t),r=await this.findKeyByName(t),n=this.store.batch();return n.delete(e),n.delete(E(t)),await n.commit(),r}async renameKey(t,e){const r=this;if(!w(t)||"self"===t)return _(h(new Error("Invalid old key name '".concat(t,"'")),l.ERR_OLD_KEY_NAME_INVALID));if(!w(e)||"self"===e)return _(h(new Error("Invalid new key name '".concat(e,"'")),l.ERR_NEW_KEY_NAME_INVALID));const n=S(t),i=S(e),o=E(t),s=E(e);if(await r.store.has(i))return _(h(new Error("Key '".concat(e,"' already exists")),l.ERR_KEY_ALREADY_EXISTS));try{const t=await r.store.get(n),a=await r.store.get(o),c=JSON.parse(f(a));c.name=e;const u=r.store.batch();return u.put(i,t),u.put(s,d(JSON.stringify(c))),u.delete(n),u.delete(o),await u.commit(),c}catch(a){return _(a)}}async exportKey(t,e){if(!w(t))return _(h(new Error("Invalid key name '".concat(t,"'")),l.ERR_INVALID_KEY_NAME));if(!e)return _(h(new Error("Password is required"),l.ERR_PASSWORD_REQUIRED));const r=S(t);try{const t=await this.store.get(r),n=f(t),i=m.get(this).dek;return(await a.keys.import(n,i)).export(e)}catch(n){return _(n)}}async importKey(t,e,r){if(!w(t)||"self"===t)return _(h(new Error("Invalid key name '".concat(t,"'")),l.ERR_INVALID_KEY_NAME));if(!e)return _(h(new Error("PEM encoded key is required"),l.ERR_PEM_REQUIRED));const n=S(t);if(await this.store.has(n))return _(h(new Error("Key '".concat(t,"' already exists")),l.ERR_KEY_ALREADY_EXISTS));let i,o;try{i=await a.keys.import(e,r)}catch(u){return _(h(new Error("Cannot read the key, most likely the password is wrong"),l.ERR_CANNOT_READ_KEY))}try{o=await i.id();const t=m.get(this).dek;e=await i.export(t)}catch(u){return _(u)}const s={name:t,id:o},c=this.store.batch();return c.put(n,d(e)),c.put(E(t),d(JSON.stringify(s))),await c.commit(),s}async importPeer(t,e){const r=this;if(!w(t))return _(h(new Error("Invalid key name '".concat(t,"'")),l.ERR_INVALID_KEY_NAME));if(!e||!e.privKey)return _(h(new Error("Peer.privKey is required"),l.ERR_MISSING_PRIVATE_KEY));const n=e.privKey,i=S(t);if(await r.store.has(i))return _(h(new Error("Key '".concat(t,"' already exists")),l.ERR_KEY_ALREADY_EXISTS));try{const e=await n.id(),o=m.get(this).dek,s=await n.export(o),a={name:t,id:e},c=r.store.batch();return c.put(i,d(s)),c.put(E(t),d(JSON.stringify(a))),await c.commit(),a}catch(o){return _(o)}}async _getPrivateKey(t){if(!w(t))return _(h(new Error("Invalid key name '".concat(t,"'")),l.ERR_INVALID_KEY_NAME));try{const e=S(t),r=await this.store.get(e);return f(r)}catch(e){return _(h(new Error("Key '".concat(t,"' does not exist. ").concat(e.message)),l.ERR_KEY_NOT_FOUND))}}async rotateKeychainPass(t,e){if("string"!==typeof t)return _(h(new Error("Invalid old pass type '".concat(typeof t,"'")),l.ERR_INVALID_OLD_PASS_TYPE));if("string"!==typeof e)return _(h(new Error("Invalid new pass type '".concat(typeof e,"'")),l.ERR_INVALID_NEW_PASS_TYPE));if(e.length<20)return _(h(new Error("Invalid pass length ".concat(e.length)),l.ERR_INVALID_PASS_LENGTH));i("recreating keychain");const r=m.get(this).dek;this.opts.pass=e;const n=e?a.pbkdf2(e,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";m.set(this,{dek:n});const o=await this.listKeys();for(const i of o){const t=await this.store.get(S(i.name)),e=f(t),o=await a.keys.import(e,r),s=n.toString(),c=await o.export(s),u=this.store.batch(),h={name:i.name,id:i.id};u.put(S(i.name),d(c)),u.put(E(i.name),d(JSON.stringify(h))),await u.commit()}i("keychain reconstructed")}}},function(t,e,r){"use strict";var n=r(595),i=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,s=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function u(t,e){if("string"!==typeof t)throw new Error("Input must be string");var r=t.replace(i,e).replace(o,e).replace(s,e).replace(a,e).replace(c,e);return n(r,255)}t.exports=function(t,e){var r=e&&e.replacement||"",n=u(t,r);return""===r?n:u(n,"")}},function(t,e,r){"use strict";var n=r(596),i=r(597);t.exports=n.bind(null,i)},function(t,e,r){"use strict";function n(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}t.exports=function(t,e,r){if("string"!==typeof e)throw new Error("Input must be string");for(var o,s,a=e.length,c=0,u=0;u<a;u+=1){if(o=e.charCodeAt(u),s=e[u],n(o)&&i(e.charCodeAt(u+1))&&(s+=e[u+=1]),(c+=t(s))===r)return e.slice(0,u+1);if(c>r)return e.slice(0,u-s.length+1)}return e}},function(t,e,r){"use strict";function n(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}t.exports=function(t){if("string"!==typeof t)throw new Error("Input must be string");for(var e=t.length,r=0,o=null,s=null,a=0;a<e;a++)i(o=t.charCodeAt(a))?null!=s&&n(s)?r+=1:r+=3:o<=127?r+=1:o>=128&&o<=2047?r+=2:o>=2048&&o<=65535&&(r+=3),s=o;return r}},function(t,e,r){"use strict";r(599),r(280);const n=r(16),{certificateForKey:i,findAsync:o}=r(604),s=r(9),{fromString:a}=r(24),{toString:c}=r(29),{codes:u}=r(27),h=new WeakMap;t.exports=class{constructor(t,e){if(!t)throw s(new Error("keychain is required"),u.ERR_KEYCHAIN_REQUIRED);this.keychain=t,h.set(this,{dek:e})}async encrypt(t,e){if(!(e instanceof Uint8Array))throw s(new Error("Plain data must be a Uint8Array"),u.ERR_INVALID_PARAMETERS);const r=await this.keychain.findKeyByName(t),o=await this.keychain._getPrivateKey(t),c=h.get(this).dek,l=n.pki.decryptRsaPrivateKey(o,c),f=await i(r,l),d=n.pkcs7.createEnvelopedData();d.addRecipient(f),d.content=n.util.createBuffer(e),d.encrypt();const p=n.asn1.toDer(d.toAsn1()).getBytes();return a(p,"ascii")}async decrypt(t){if(!(t instanceof Uint8Array))throw s(new Error("CMS data is required"),u.ERR_INVALID_PARAMETERS);let e;try{const r=n.util.createBuffer(c(t,"ascii")),i=n.asn1.fromDer(r);e=n.pkcs7.messageFromAsn1(i)}catch(m){throw s(new Error("Invalid CMS: "+m.message),u.ERR_INVALID_CMS)}const r=e.recipients.filter((t=>t.issuer.find((t=>"O"===t.shortName&&"ipfs"===t.value)))).filter((t=>t.issuer.find((t=>"CN"===t.shortName)))).map((t=>({recipient:t,keyId:t.issuer.find((t=>"CN"===t.shortName)).value}))),i=await o(r,(async t=>{try{if(await this.keychain.findKeyById(t.keyId))return!0}catch(m){return!1}return!1}));if(!i){const t=r.map((t=>t.keyId));throw s(new Error("Decryption needs one of the key(s): "+t.join(", ")),u.ERR_MISSING_KEYS,{missingKeys:t})}const l=await this.keychain.findKeyById(i.keyId);if(!l)throw s(new Error("No key available to decrypto"),u.ERR_NO_KEY);const f=await this.keychain._getPrivateKey(l.name),d=h.get(this).dek,p=n.pki.decryptRsaPrivateKey(f,d);return e.decrypt(i.recipient,p),a(e.content.getBytes(),"ascii")}}},function(t,e,r){var n=r(16);r(97),r(75),r(168),r(98),r(169),r(600),r(86),r(28),r(318);var i=n.asn1,o=t.exports=n.pkcs7=n.pkcs7||{};function s(t){var e={},r=[];if(!i.validate(t,o.asn1.recipientInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw s.errors=r,s}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:i.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function a(t){for(var e,r=[],o=0;o<t.length;++o)r.push((e=t[o],i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.encryptedContent.content)])));return r}function c(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),o=0;o<t.unauthenticatedAttributes.length;++o){var s=t.unauthenticatedAttributes[o];r.values.push(u(s))}e.value.push(r)}return e}function u(t){var e;if(t.type===n.pki.oids.contentType)e=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),o=new Date("2050-01-01T00:00:00Z"),s=t.value;if("string"===typeof s){var a=Date.parse(s);s=isNaN(a)?13===s.length?i.utcTimeToDate(s):i.generalizedTimeToDate(s):new Date(a)}e=s>=r&&s<o?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(s)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(s))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[e])])}function h(t,e,r){var o={};if(!i.validate(e,r,o,[])){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}if(i.derToOid(o.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(o.encryptedContent){var a="";if(n.util.isArray(o.encryptedContent))for(var c=0;c<o.encryptedContent.length;++c){if(o.encryptedContent[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=o.encryptedContent[c].value}else a=o.encryptedContent;t.encryptedContent={algorithm:i.derToOid(o.encAlgorithm),parameter:n.util.createBuffer(o.encParameter.value),content:n.util.createBuffer(a)}}if(o.content){a="";if(n.util.isArray(o.content))for(c=0;c<o.content.length;++c){if(o.content[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=o.content[c].value}else a=o.content;t.content=n.util.createBuffer(a)}return t.version=o.version.charCodeAt(0),t.rawCapture=o,o}function l(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}o.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var s=i.fromDer(e.body);return o.messageFromAsn1(s)},o.messageToPem=function(t,e){var r={type:"PKCS7",body:i.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},o.messageFromAsn1=function(t){var e={},r=[];if(!i.validate(t,o.asn1.contentInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw s.errors=r,s}var a,c=i.derToOid(e.contentType);switch(c){case n.pki.oids.envelopedData:a=o.createEnvelopedData();break;case n.pki.oids.encryptedData:a=o.createEncryptedData();break;case n.pki.oids.signedData:a=o.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a},o.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(h(t,e,o.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,i=0;i<r.length;++i)t.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var o=[],s=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&s.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,e)),o.length>0&&s.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),s])},addSigner:function(e){var r=e.issuer,i=e.serialNumber;if(e.certificate){var o=e.certificate;"string"===typeof o&&(o=n.pki.certificateFromPem(o)),r=o.issuer.attributes,i=o.serialNumber}var s=e.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof s&&(s=n.pki.privateKeyFromPem(s));var a=e.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var c=e.authenticatedAttributes||[];if(c.length>0){for(var u=!1,h=!1,l=0;l<c.length;++l){var f=c[l];if(u||f.type!==n.pki.oids.contentType){if(h||f.type!==n.pki.oids.messageDigest);else if(h=!0,u)break}else if(u=!0,h)break}if(!u||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:s,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(e){var r;(e=e||{},"object"!==typeof t.content||null===t.contentInfo)&&(t.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?r=t.content.bytes():"string"===typeof t.content&&(r=n.util.encodeUtf8(t.content)),e.detached?t.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r):t.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)]))));0!==t.signers.length&&function(e){var r;r=t.detachedContent?t.detachedContent:(r=t.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=i.derToOid(t.contentInfo.value[0].value),s=i.toDer(r);for(var a in s.getByte(),i.getBerValueLength(s),s=s.getBytes(),e)e[a].start().update(s);for(var h=new Date,l=0;l<t.signers.length;++l){var f=t.signers[l];if(0===f.authenticatedAttributes.length){if(o!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<f.authenticatedAttributes.length;++p){var m=f.authenticatedAttributes[p];m.type===n.pki.oids.messageDigest?m.value=e[f.digestAlgorithm].digest():m.type===n.pki.oids.signingTime&&(m.value||(m.value=h)),d.value.push(u(m)),f.authenticatedAttributesAsn1.value.push(u(m))}s=i.toDer(d).getBytes(),f.md.start().update(s)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],r=0;r<t.length;++r)e.push(c(t[r]));return e}(t.signers)}(function(){for(var e={},r=0;r<t.signers.length;++r){var o=t.signers[r];(s=o.digestAlgorithm)in e||(e[s]=n.md[n.pki.oids[s]].create()),0===o.authenticatedAttributes.length?o.md=e[s]:o.md=n.md[n.pki.oids[s]].create()}for(var s in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},o.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){h(t,e,o.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),l(t)}}},o.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=h(t,e,o.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],r=0;r<t.length;++r)e.push(s(t[r]));return e}(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,a(t.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,(e=t.encryptedContent,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.algorithm).getBytes()),e.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}l(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var i,o,s;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,o=8,s=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(o));var a=s(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var u=t.recipients[c];if(void 0===u.encryptedContent.content){if(u.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm);u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data)}}}}}},function(t,e,r){var n=r(16);r(75),r(28);var i=n.asn1,o=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=o;var s={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};o.contentInfoValidator=s;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};o.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},o.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};o.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},s,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},o.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(t,e,r){var n=r(16);r(602),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(t,e,r){var n=r(16);r(28),n.mgf=n.mgf||{},(t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(t){return{generate:function(e,r){for(var i=new n.util.ByteBuffer,o=Math.ceil(r/t.digestLength),s=0;s<o;s++){var a=new n.util.ByteBuffer;a.putInt32(s),t.start(),t.update(e+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},function(t,e,r){var n=r(16);r(86),r(28),(t.exports=n.pss=n.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,i=t.mgf,o=r.digestLength,s=t.salt||null;if("string"===typeof s&&(s=n.util.createBuffer(s)),"saltLength"in t)e=t.saltLength;else{if(null===s)throw new Error("Salt length not specified or specific salt not given.");e=s.length()}if(null!==s&&s.length()!==e)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||n.random,c={encode:function(t,c){var u,h,l=c-1,f=Math.ceil(l/8),d=t.digest().getBytes();if(f<o+e+2)throw new Error("Message is too long to encrypt.");h=null===s?a.getBytesSync(e):s.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(d),p.putBytes(h),r.start(),r.update(p.getBytes());var m=r.digest().getBytes(),y=new n.util.ByteBuffer;y.fillWithByte(0,f-e-o-2),y.putByte(1),y.putBytes(h);var g=y.getBytes(),b=f-o-1,v=i.generate(m,b),w="";for(u=0;u<b;u++)w+=String.fromCharCode(g.charCodeAt(u)^v.charCodeAt(u));var _=65280>>8*f-l&255;return(w=String.fromCharCode(w.charCodeAt(0)&~_)+w.substr(1))+m+String.fromCharCode(188)},verify:function(t,s,a){var c,u=a-1,h=Math.ceil(u/8);if(s=s.substr(-h),h<o+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==s.charCodeAt(h-1))throw new Error("Encoded message does not end in 0xBC.");var l=h-o-1,f=s.substr(0,l),d=s.substr(l,o),p=65280>>8*h-u&255;if(0!==(f.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var m=i.generate(d,l),y="";for(c=0;c<l;c++)y+=String.fromCharCode(f.charCodeAt(c)^m.charCodeAt(c));y=String.fromCharCode(y.charCodeAt(0)&~p)+y.substr(1);var g=h-o-e-2;for(c=0;c<g;c++)if(0!==y.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(g))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var b=y.substr(-e),v=new n.util.ByteBuffer;return v.fillWithByte(0,8),v.putBytes(t),v.putBytes(b),r.start(),r.update(v.getBytes()),d===r.digest().getBytes()}};return c}},function(t,e,r){"use strict";r(318);const n=r(16).pki;t.exports={certificateForKey:(t,e)=>{const r=n.setRsaPublicKey(e.n,e.e),i=n.createCertificate();i.publicKey=r,i.serialNumber="01",i.validity.notBefore=new Date,i.validity.notAfter=new Date,i.validity.notAfter.setFullYear(i.validity.notBefore.getFullYear()+10);const o=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return i.setSubject(o),i.setIssuer(o),i.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),i.sign(e),i},findAsync:async function(t,e){const r=t.map(e);return t[(await Promise.all(r)).findIndex((t=>t))]}}},function(t,e,r){"use strict";const n=r(101),{pipe:i}=r(31),{tap:o}=r(184),s=r(606),{METRICS:a}=r(179),c=r(608),u=["dataReceived","dataSent"],h={in:"dataReceived",out:"dataSent"};class l{constructor(t){this._options=n(a,t),this._globalStats=new c(u,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=s(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._systems=new Map}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(const t of this._peerStats.values())t.stop();for(const t of this._protocolStats.values())t.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}getComponentMetrics(){return this._systems}updateComponentMetric(t){let{system:e="libp2p",component:r,metric:n,value:i}=t;this._systems.has(e)||this._systems.set(e,new Map);const o=this._systems.get(e);o.has(r)||o.set(r,new Map);o.get(r).set(n,i)}forPeer(t){const e=t.toB58String();return this._peerStats.get(e)||this._oldPeers.get(e)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(t){return this._protocolStats.get(t)}onPeerDisconnected(t){const e=t.toB58String(),r=this._peerStats.get(e);r&&(r.stop(),this._peerStats.delete(e),this._oldPeers.set(e,r))}_onMessage(t){let{remotePeer:e,protocol:r,direction:n,dataLength:i}=t;if(!this._running)return;const o=h[n];let s=this.forPeer(e);if(s||(s=new c(u,this._options),this._peerStats.set(e.toB58String(),s)),s.push(o,i),this._globalStats.push(o,i),r){let t=this.forProtocol(r);t||(t=new c(u,this._options),this._protocolStats.set(r,t)),t.push(o,i)}}updatePlaceholder(t,e){if(!this._running)return;const r=this.forPeer(t),n=e.toB58String(),i=this.forPeer(e);let o=r;i&&(o=l.mergeStats(i,o),this._oldPeers.delete(n)),this._peerStats.delete(t.toB58String()),this._peerStats.set(n,o),o.start()}trackStream(t){let{stream:e,remotePeer:r,protocol:n}=t;const s=this,a=e.source;e.source=o((t=>s._onMessage({remotePeer:r,protocol:n,direction:"in",dataLength:t.length})))(a);const c=e.sink;return e.sink=t=>i(t,o((t=>s._onMessage({remotePeer:r,protocol:n,direction:"out",dataLength:t.length}))),c),e}static mergeStats(t,e){return t.stop(),e.stop(),t._queue=[...t._queue,...e._queue],t}}t.exports=l},function(t,e,r){"use strict";const n=r(607);t.exports=t=>{const e=n(t);return e.delete=e.remove,e}},function(t,e){t.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),n=Object.create(null);function i(i,o){r[i]=o,++e>=t&&(e=0,n=r,r=Object.create(null))}return{has:function(t){return void 0!==r[t]||void 0!==n[t]},remove:function(t){void 0!==r[t]&&(r[t]=void 0),void 0!==n[t]&&(n[t]=void 0)},get:function(t){var e=r[t];return void 0!==e?e:void 0!==(e=n[t])?(i(t,e),e):void 0},set:function(t,e){void 0!==r[t]?r[t]=e:i(t,e)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},function(t,e,r){"use strict";const{EventEmitter:n}=r(33),{BigNumber:i}=r(609),o=r(610),s=r(126);t.exports=class extends n{constructor(t,e){super(),this._options=e,this._queue=[],this._stats={dataReceived:i(0),dataSent:i(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);const r=this._options.movingAverageIntervals;for(let n=0;n<t.length;n++){const e=t[n];this._stats[e]=i(0),this._movingAverages[e]={};for(let t=0;t<r.length;t++){const n=r[t];(this._movingAverages[e][n]=o(n)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){const t=this.snapshot,e=this.movingAverages,r={dataReceived:t.dataReceived.toString(),dataSent:t.dataSent.toString(),movingAverages:{}},n=Object.keys(e);for(const i of n){r.movingAverages[i]={};for(const t of Object.keys(e[i]))r.movingAverages[i][t]=e[i][t].movingAverage()}return r}push(t,e){this._queue.push([t,e,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=s(this._update,this._nextTimeout())}_nextTimeout(){const t=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-t),0)}_update(){if(this._timeout=null,this._queue.length){let t;for(t of this._queue)this._applyOp(t);this._queue=[],this._updateFrequency(t[2]),this.emit("update",this._stats)}}_updateFrequency(t){const e=t-this._frequencyLastTime;Object.keys(this._stats).forEach((r=>{this._updateFrequencyFor(r,e,t)})),this._frequencyLastTime=t}_updateFrequencyFor(t,e,r){const n=this._frequencyAccumulators[t]||0;this._frequencyAccumulators[t]=0;const i=n/(e||1)*1e3;let s=this._movingAverages[t];s||(s=this._movingAverages[t]={});const a=this._options.movingAverageIntervals;for(let c=0;c<a.length;c++){const t=a[c];let e=s[t];e||(e=s[t]=o(t)),e.push(r,i)}}_applyOp(t){const e=t[0],r=t[1];if("number"!==typeof r)throw new Error("invalid increment number: ".concat(r));let n;n=Object.prototype.hasOwnProperty.call(this._stats,e)?this._stats[e]:this._stats[e]=i(0),this._stats[e]=n.plus(r),this._frequencyAccumulators[e]||(this._frequencyAccumulators[e]=0),this._frequencyAccumulators[e]+=r}}},function(t,e,r){var n;!function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,c=Math.floor,u="[BigNumber Error] ",h=u+"Number primitive has more than 15 significant digits: ",l=1e14,f=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,y=1e9;function g(t){var e=0|t;return t>0||t===e?e:e-1}function b(t){for(var e,r,n=1,i=t.length,o=t[0]+"";n<i;){for(e=t[n++]+"",r=f-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(t,e){var r,n,i=t.c,o=e.c,s=t.s,a=e.s,c=t.e,u=e.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=o.length)?c:u,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function w(t,e,r,n){if(t<e||t>r||t!==c(t))throw Error(u+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function _(t){var e=t.c.length-1;return g(t.e/f)==e&&t.c[e]%2!=0}function S(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function E(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(++e>(n=t.length)){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}o=function t(e){var r,n,i,o=L.prototype={constructor:L,toString:null,valueOf:null},A=new L(1),M=20,I=4,R=-7,T=21,C=-1e7,O=1e7,k=!1,P=1,N=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",x=!0;function L(t,e){var r,o,a,u,l,p,m,y,g=this;if(!(g instanceof L))return new L(t,e);if(null==e){if(t&&!0===t._isBigNumber)return g.s=t.s,void(!t.c||t.e>O?g.c=g.e=null:t.e<C?g.c=[g.e=0]:(g.e=t.e,g.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(g.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,l=t;l>=10;l/=10,u++);return void(u>O?g.c=g.e=null:(g.e=u,g.c=[t]))}y=String(t)}else{if(!s.test(y=String(t)))return i(g,y,p);g.s=45==y.charCodeAt(0)?(y=y.slice(1),-1):1}(u=y.indexOf("."))>-1&&(y=y.replace(".","")),(l=y.search(/e/i))>0?(u<0&&(u=l),u+=+y.slice(l+1),y=y.substring(0,l)):u<0&&(u=y.length)}else{if(w(e,2,B.length,"Base"),10==e&&x)return F(g=new L(t),M+g.e+1,I);if(y=String(t),p="number"==typeof t){if(0*t!=0)return i(g,y,p,e);if(g.s=1/t<0?(y=y.slice(1),-1):1,L.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(h+t)}else g.s=45===y.charCodeAt(0)?(y=y.slice(1),-1):1;for(r=B.slice(0,e),u=l=0,m=y.length;l<m;l++)if(r.indexOf(o=y.charAt(l))<0){if("."==o){if(l>u){u=m;continue}}else if(!a&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){a=!0,l=-1,u=0;continue}return i(g,String(t),p,e)}p=!1,(u=(y=n(y,e,10,g.s)).indexOf("."))>-1?y=y.replace(".",""):u=y.length}for(l=0;48===y.charCodeAt(l);l++);for(m=y.length;48===y.charCodeAt(--m););if(y=y.slice(l,++m)){if(m-=l,p&&L.DEBUG&&m>15&&(t>d||t!==c(t)))throw Error(h+g.s*t);if((u=u-l-1)>O)g.c=g.e=null;else if(u<C)g.c=[g.e=0];else{if(g.e=u,g.c=[],l=(u+1)%f,u<0&&(l+=f),l<m){for(l&&g.c.push(+y.slice(0,l)),m-=f;l<m;)g.c.push(+y.slice(l,l+=f));l=f-(y=y.slice(l)).length}else l-=m;for(;l--;y+="0");g.c.push(+y)}}else g.c=[g.e=0]}function U(t,e,r,n){var i,o,s,a,c;if(null==r?r=I:w(r,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)c=b(t.c),c=1==n||2==n&&(s<=R||s>=T)?S(c,s):E(c,s,"0");else if(o=(t=F(new L(t),e,r)).e,a=(c=b(t.c)).length,1==n||2==n&&(e<=o||o<=R)){for(;a<e;c+="0",a++);c=S(c,o)}else if(e-=s,c=E(c,o,"0"),o+1>a){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=o-a)>0)for(o+1==a&&(c+=".");e--;c+="0");return t.s<0&&i?"-"+c:c}function j(t,e){for(var r,n=1,i=new L(t[0]);n<t.length;n++){if(!(r=new L(t[n])).s){i=r;break}e.call(i,r)&&(i=r)}return i}function K(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*f-1)>O?t.c=t.e=null:r<C?t.c=[t.e=0]:(t.e=r,t.c=e),t}function F(t,e,r,n){var i,o,s,u,h,d,m,y=t.c,g=p;if(y){t:{for(i=1,u=y[0];u>=10;u/=10,i++);if((o=e-i)<0)o+=f,s=e,m=(h=y[d=0])/g[i-s-1]%10|0;else if((d=a((o+1)/f))>=y.length){if(!n)break t;for(;y.length<=d;y.push(0));h=m=0,i=1,s=(o%=f)-f+1}else{for(h=u=y[d],i=1;u>=10;u/=10,i++);m=(s=(o%=f)-f+i)<0?0:h/g[i-s-1]%10|0}if(n=n||e<0||null!=y[d+1]||(s<0?h:h%g[i-s-1]),n=r<4?(m||n)&&(0==r||r==(t.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(o>0?s>0?h/g[i-s]:0:y[d-1])%10&1||r==(t.s<0?8:7)),e<1||!y[0])return y.length=0,n?(e-=t.e+1,y[0]=g[(f-e%f)%f],t.e=-e||0):y[0]=t.e=0,t;if(0==o?(y.length=d,u=1,d--):(y.length=d+1,u=g[f-o],y[d]=s>0?c(h/g[i-s]%g[s])*u:0),n)for(;;){if(0==d){for(o=1,s=y[0];s>=10;s/=10,o++);for(s=y[0]+=u,u=1;s>=10;s/=10,u++);o!=u&&(t.e++,y[0]==l&&(y[0]=1));break}if(y[d]+=u,y[d]!=l)break;y[d--]=0,u=1}for(o=y.length;0===y[--o];y.pop());}t.e>O?t.c=t.e=null:t.e<C&&(t.c=[t.e=0])}return t}function q(t){var e,r=t.e;return null===r?t.toString():(e=b(t.c),e=r<=R||r>=T?S(e,r):E(e,r,"0"),t.s<0?"-"+e:e)}return L.clone=t,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(u+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(w(r=t[e],0,y,e),M=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(w(r=t[e],0,8,e),I=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(w(r[0],-y,0,e),w(r[1],0,y,e),R=r[0],T=r[1]):(w(r,-y,y,e),R=-(T=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)w(r[0],-y,-1,e),w(r[1],1,y,e),C=r[0],O=r[1];else{if(w(r,-y,y,e),!r)throw Error(u+e+" cannot be zero: "+r);C=-(O=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(u+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw k=!r,Error(u+"crypto unavailable");k=r}else k=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(w(r=t[e],0,9,e),P=r),t.hasOwnProperty(e="POW_PRECISION")&&(w(r=t[e],0,y,e),N=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(u+e+" not an object: "+r);D=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(u+e+" invalid: "+r);x="0123456789"==r.slice(0,10),B=r}}return{DECIMAL_PLACES:M,ROUNDING_MODE:I,EXPONENTIAL_AT:[R,T],RANGE:[C,O],CRYPTO:k,MODULO_MODE:P,POW_PRECISION:N,FORMAT:D,ALPHABET:B}},L.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!L.DEBUG)return!0;var e,r,n=t.c,i=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-y&&i<=y&&i===c(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if((e=(i+1)%f)<1&&(e+=f),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=l||r!==c(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(u+"Invalid BigNumber: "+t)},L.maximum=L.max=function(){return j(arguments,o.lt)},L.minimum=L.min=function(){return j(arguments,o.gt)},L.random=function(){var t=9007199254740992,e=Math.random()*t&2097151?function(){return c(Math.random()*t)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(t){var r,n,i,o,s,h=0,l=[],d=new L(A);if(null==t?t=M:w(t,0,y),o=a(t/f),k)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(o*=2));h<o;)(s=131072*r[h]+(r[h+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),r[h]=n[0],r[h+1]=n[1]):(l.push(s%1e14),h+=2);h=o/2}else{if(!crypto.randomBytes)throw k=!1,Error(u+"crypto unavailable");for(r=crypto.randomBytes(o*=7);h<o;)(s=281474976710656*(31&r[h])+1099511627776*r[h+1]+4294967296*r[h+2]+16777216*r[h+3]+(r[h+4]<<16)+(r[h+5]<<8)+r[h+6])>=9e15?crypto.randomBytes(7).copy(r,h):(l.push(s%1e14),h+=7);h=o/7}if(!k)for(;h<o;)(s=e())<9e15&&(l[h++]=s%1e14);for(o=l[--h],t%=f,o&&t&&(s=p[f-t],l[h]=c(o/s)*s);0===l[h];l.pop(),h--);if(h<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=f);for(h=1,s=l[0];s>=10;s/=10,h++);h<f&&(i-=f-h)}return d.e=i,d.c=l,d}}(),L.sum=function(){for(var t=1,e=arguments,r=new L(e[0]);t<e.length;)r=r.plus(e[t++]);return r},n=function(){var t="0123456789";function e(t,e,r,n){for(var i,o,s=[0],a=0,c=t.length;a<c;){for(o=s.length;o--;s[o]*=e);for(s[0]+=n.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,a){var c,u,h,l,f,d,p,m,y=n.indexOf("."),g=M,v=I;for(y>=0&&(l=N,N=0,n=n.replace(".",""),d=(m=new L(i)).pow(n.length-y),N=l,m.c=e(E(b(d.c),d.e,"0"),10,o,t),m.e=m.c.length),h=l=(p=e(n,i,o,a?(c=B,t):(c=t,B))).length;0==p[--l];p.pop());if(!p[0])return c.charAt(0);if(y<0?--h:(d.c=p,d.e=h,d.s=s,p=(d=r(d,m,g,v,o)).c,f=d.r,h=d.e),y=p[u=h+g+1],l=o/2,f=f||u<0||null!=p[u+1],f=v<4?(null!=y||f)&&(0==v||v==(d.s<0?3:2)):y>l||y==l&&(4==v||f||6==v&&1&p[u-1]||v==(d.s<0?8:7)),u<1||!p[0])n=f?E(c.charAt(1),-g,c.charAt(0)):c.charAt(0);else{if(p.length=u,f)for(--o;++p[--u]>o;)p[u]=0,u||(++h,p=[1].concat(p));for(l=p.length;!p[--l];);for(y=0,n="";y<=l;n+=c.charAt(p[y++]));n=E(n,h,c.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,i,o,s,a=0,c=t.length,u=e%m,h=e/m|0;for(t=t.slice();c--;)a=((i=u*(o=t[c]%m)+(n=h*o+(s=t[c]/m|0)*u)%m*m+a)/r|0)+(n/m|0)+h*s,t[c]=i%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,o,s,a){var u,h,d,p,m,y,b,v,w,_,S,E,A,M,I,R,T,C=n.s==i.s?1:-1,O=n.c,k=i.c;if(!O||!O[0]||!k||!k[0])return new L(n.s&&i.s&&(O?!k||O[0]!=k[0]:k)?O&&0==O[0]||!k?0*C:C/0:NaN);for(w=(v=new L(C)).c=[],C=o+(h=n.e-i.e)+1,a||(a=l,h=g(n.e/f)-g(i.e/f),C=C/f|0),d=0;k[d]==(O[d]||0);d++);if(k[d]>(O[d]||0)&&h--,C<0)w.push(1),p=!0;else{for(M=O.length,R=k.length,d=0,C+=2,(m=c(a/(k[0]+1)))>1&&(k=t(k,m,a),O=t(O,m,a),R=k.length,M=O.length),A=R,S=(_=O.slice(0,R)).length;S<R;_[S++]=0);T=k.slice(),T=[0].concat(T),I=k[0],k[1]>=a/2&&I++;do{if(m=0,(u=e(k,_,R,S))<0){if(E=_[0],R!=S&&(E=E*a+(_[1]||0)),(m=c(E/I))>1)for(m>=a&&(m=a-1),b=(y=t(k,m,a)).length,S=_.length;1==e(y,_,b,S);)m--,r(y,R<b?T:k,b,a),b=y.length,u=1;else 0==m&&(u=m=1),b=(y=k.slice()).length;if(b<S&&(y=[0].concat(y)),r(_,y,S,a),S=_.length,-1==u)for(;e(k,_,R,S)<1;)m++,r(_,R<S?T:k,S,a),S=_.length}else 0===u&&(m++,_=[0]);w[d++]=m,_[0]?_[S++]=O[A]||0:(_=[O[A]],S=1)}while((A++<M||null!=_[0])&&C--);p=null!=_[0],w[0]||w.splice(0,1)}if(a==l){for(d=1,C=w[0];C>=10;C/=10,d++);F(v,o+(v.e=d+h*f-1)+1,s,p)}else v.e=h,v.r=+p;return v}}(),i=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,s,a,c){var h,l=a?s:s.replace(i,"");if(n.test(l))o.s=isNaN(l)?null:l<0?-1:1;else{if(!a&&(l=l.replace(t,(function(t,e,r){return h="x"==(r=r.toLowerCase())?16:"b"==r?2:8,c&&c!=h?t:e})),c&&(h=c,l=l.replace(e,"$1").replace(r,"0.$1")),s!=l))return new L(l,h);if(L.DEBUG)throw Error(u+"Not a"+(c?" base "+c:"")+" number: "+s);o.s=null}o.c=o.e=null}}(),o.absoluteValue=o.abs=function(){var t=new L(this);return t.s<0&&(t.s=1),t},o.comparedTo=function(t,e){return v(this,new L(t,e))},o.decimalPlaces=o.dp=function(t,e){var r,n,i,o=this;if(null!=t)return w(t,0,y),null==e?e=I:w(e,0,8),F(new L(o),t+o.e+1,e);if(!(r=o.c))return null;if(n=((i=r.length-1)-g(this.e/f))*f,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},o.dividedBy=o.div=function(t,e){return r(this,new L(t,e),M,I)},o.dividedToIntegerBy=o.idiv=function(t,e){return r(this,new L(t,e),0,1)},o.exponentiatedBy=o.pow=function(t,e){var r,n,i,o,s,h,l,d,p=this;if((t=new L(t)).c&&!t.isInteger())throw Error(u+"Exponent not an integer: "+q(t));if(null!=e&&(e=new L(e)),s=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new L(Math.pow(+q(p),s?2-_(t):+q(t))),e?d.mod(e):d;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new L(NaN);(n=!h&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||s&&p.c[1]>=24e7:p.c[0]<8e13||s&&p.c[0]<=9999975e7)))return o=p.s<0&&_(t)?-0:0,p.e>-1&&(o=1/o),new L(h?1/o:o);N&&(o=a(N/f+2))}for(s?(r=new L(.5),h&&(t.s=1),l=_(t)):l=(i=Math.abs(+q(t)))%2,d=new L(A);;){if(l){if(!(d=d.times(p)).c)break;o?d.c.length>o&&(d.c.length=o):n&&(d=d.mod(e))}if(i){if(0===(i=c(i/2)))break;l=i%2}else if(F(t=t.times(r),t.e+1,1),t.e>14)l=_(t);else{if(0===(i=+q(t)))break;l=i%2}p=p.times(p),o?p.c&&p.c.length>o&&(p.c.length=o):n&&(p=p.mod(e))}return n?d:(h&&(d=A.div(d)),e?d.mod(e):o?F(d,N,I,undefined):d)},o.integerValue=function(t){var e=new L(this);return null==t?t=I:w(t,0,8),F(e,e.e+1,t)},o.isEqualTo=o.eq=function(t,e){return 0===v(this,new L(t,e))},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(t,e){return v(this,new L(t,e))>0},o.isGreaterThanOrEqualTo=o.gte=function(t,e){return 1===(e=v(this,new L(t,e)))||0===e},o.isInteger=function(){return!!this.c&&g(this.e/f)>this.c.length-2},o.isLessThan=o.lt=function(t,e){return v(this,new L(t,e))<0},o.isLessThanOrEqualTo=o.lte=function(t,e){return-1===(e=v(this,new L(t,e)))||0===e},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&0==this.c[0]},o.minus=function(t,e){var r,n,i,o,s=this,a=s.s;if(e=(t=new L(t,e)).s,!a||!e)return new L(NaN);if(a!=e)return t.s=-e,s.plus(t);var c=s.e/f,u=t.e/f,h=s.c,d=t.c;if(!c||!u){if(!h||!d)return h?(t.s=-e,t):new L(d?s:NaN);if(!h[0]||!d[0])return d[0]?(t.s=-e,t):new L(h[0]?s:3==I?-0:0)}if(c=g(c),u=g(u),h=h.slice(),a=c-u){for((o=a<0)?(a=-a,i=h):(u=c,i=d),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(n=(o=(a=h.length)<(e=d.length))?a:e,a=e=0;e<n;e++)if(h[e]!=d[e]){o=h[e]<d[e];break}if(o&&(i=h,h=d,d=i,t.s=-t.s),(e=(n=d.length)-(r=h.length))>0)for(;e--;h[r++]=0);for(e=l-1;n>a;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=e);--h[r],h[n]+=l}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--u);return h[0]?K(t,h,u):(t.s=3==I?-1:1,t.c=[t.e=0],t)},o.modulo=o.mod=function(t,e){var n,i,o=this;return t=new L(t,e),!o.c||!t.s||t.c&&!t.c[0]?new L(NaN):!t.c||o.c&&!o.c[0]?new L(o):(9==P?(i=t.s,t.s=1,n=r(o,t,0,3),t.s=i,n.s*=i):n=r(o,t,0,P),(t=o.minus(n.times(t))).c[0]||1!=P||(t.s=o.s),t)},o.multipliedBy=o.times=function(t,e){var r,n,i,o,s,a,c,u,h,d,p,y,b,v,w,_=this,S=_.c,E=(t=new L(t,e)).c;if(!S||!E||!S[0]||!E[0])return!_.s||!t.s||S&&!S[0]&&!E||E&&!E[0]&&!S?t.c=t.e=t.s=null:(t.s*=_.s,S&&E?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=g(_.e/f)+g(t.e/f),t.s*=_.s,(c=S.length)<(d=E.length)&&(b=S,S=E,E=b,i=c,c=d,d=i),i=c+d,b=[];i--;b.push(0));for(v=l,w=m,i=d;--i>=0;){for(r=0,p=E[i]%w,y=E[i]/w|0,o=i+(s=c);o>i;)r=((u=p*(u=S[--s]%w)+(a=y*u+(h=S[s]/w|0)*p)%w*w+b[o]+r)/v|0)+(a/w|0)+y*h,b[o--]=u%v;b[o]=r}return r?++n:b.splice(0,1),K(t,b,n)},o.negated=function(){var t=new L(this);return t.s=-t.s||null,t},o.plus=function(t,e){var r,n=this,i=n.s;if(e=(t=new L(t,e)).s,!i||!e)return new L(NaN);if(i!=e)return t.s=-e,n.minus(t);var o=n.e/f,s=t.e/f,a=n.c,c=t.c;if(!o||!s){if(!a||!c)return new L(i/0);if(!a[0]||!c[0])return c[0]?t:new L(a[0]?n:0*i)}if(o=g(o),s=g(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(e=c.length)<0&&(r=c,c=a,a=r,e=i),i=0;e;)i=(a[--e]=a[e]+c[e]+i)/l|0,a[e]=l===a[e]?0:a[e]%l;return i&&(a=[i].concat(a),++s),K(t,a,s)},o.precision=o.sd=function(t,e){var r,n,i,o=this;if(null!=t&&t!==!!t)return w(t,1,y),null==e?e=I:w(e,0,8),F(new L(o),t,e);if(!(r=o.c))return null;if(n=(i=r.length-1)*f+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&o.e+1>n&&(n=o.e+1),n},o.shiftedBy=function(t){return w(t,-9007199254740991,d),this.times("1e"+t)},o.squareRoot=o.sqrt=function(){var t,e,n,i,o,s=this,a=s.c,c=s.s,u=s.e,h=M+4,l=new L("0.5");if(1!==c||!a||!a[0])return new L(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+q(s)))||c==1/0?(((e=b(a)).length+u)%2==0&&(e+="0"),c=Math.sqrt(+e),u=g((u+1)/2)-(u<0||u%2),n=new L(e=c==1/0?"5e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):n=new L(c+""),n.c[0])for((c=(u=n.e)+h)<3&&(c=0);;)if(o=n,n=l.times(o.plus(r(s,o,h,1))),b(o.c).slice(0,c)===(e=b(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(F(n,n.e+M+2,1),t=!n.times(n).eq(s));break}if(!i&&(F(o,o.e+M+2,0),o.times(o).eq(s))){n=o;break}h+=4,c+=4,i=1}return F(n,n.e+M+1,I,t)},o.toExponential=function(t,e){return null!=t&&(w(t,0,y),t++),U(this,t,e,1)},o.toFixed=function(t,e){return null!=t&&(w(t,0,y),t=t+this.e+1),U(this,t,e)},o.toFormat=function(t,e,r){var n,i=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=D;else if("object"!=typeof r)throw Error(u+"Argument not an object: "+r);if(n=i.toFixed(t,e),i.c){var o,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,h=r.groupSeparator||"",l=s[0],f=s[1],d=i.s<0,p=d?l.slice(1):l,m=p.length;if(c&&(o=a,a=c,c=o,m-=o),a>0&&m>0){for(o=m%a||a,l=p.substr(0,o);o<m;o+=a)l+=h+p.substr(o,a);c>0&&(l+=h+p.slice(o)),d&&(l="-"+l)}n=f?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):l}return(r.prefix||"")+n+(r.suffix||"")},o.toFraction=function(t){var e,n,i,o,s,a,c,h,l,d,m,y,g=this,v=g.c;if(null!=t&&(!(c=new L(t)).isInteger()&&(c.c||1!==c.s)||c.lt(A)))throw Error(u+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+q(c));if(!v)return new L(g);for(e=new L(A),l=n=new L(A),i=h=new L(A),y=b(v),s=e.e=y.length-g.e-1,e.c[0]=p[(a=s%f)<0?f+a:a],t=!t||c.comparedTo(e)>0?s>0?e:l:c,a=O,O=1/0,c=new L(y),h.c[0]=0;d=r(c,e,0,1),1!=(o=n.plus(d.times(i))).comparedTo(t);)n=i,i=o,l=h.plus(d.times(o=l)),h=o,e=c.minus(d.times(o=e)),c=o;return o=r(t.minus(n),i,0,1),h=h.plus(o.times(l)),n=n.plus(o.times(i)),h.s=l.s=g.s,m=r(l,i,s*=2,I).minus(g).abs().comparedTo(r(h,n,s,I).minus(g).abs())<1?[l,i]:[h,n],O=a,m},o.toNumber=function(){return+q(this)},o.toPrecision=function(t,e){return null!=t&&w(t,1,y),U(this,t,e,2)},o.toString=function(t){var e,r=this,i=r.s,o=r.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=o<=R||o>=T?S(b(r.c),o):E(b(r.c),o,"0"):10===t&&x?e=E(b((r=F(new L(r),M+o+1,I)).c),r.e,"0"):(w(t,2,B.length,"Base"),e=n(E(b(r.c),o,"0"),10,t,i,!0)),i<0&&r.c[0]&&(e="-"+e)),e},o.valueOf=o.toJSON=function(){return q(this)},o._isBigNumber=!0,null!=e&&L.set(e),L}(),o.default=o.BigNumber=o,void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()},function(t,e,r){"use strict";const n=Math.exp;t.exports=function(t){if("number"!==typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let e,r,i=0,o=0,s=0,a={};return a.push=function(a,c){if(r){const u=1-n(-(a-r)/t),h=c-e;e=u*c+(1-u)*e,i=(1-u)*(i+h*(u*h)),o=Math.sqrt(i),s=e+u*h}else e=c;r=a},a.movingAverage=function(){return e},a.variance=function(){return i},a.deviation=function(){return o},a.forecast=function(){return s},a}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:upgrader"),{error:n("libp2p:upgrader:err")}),o=r(9),s=r(612),{Connection:a}=r(616),c=r(23),{pipe:u}=r(31),h=r(619),{codes:l}=r(27);t.exports=class{constructor(t){let{localPeer:e,metrics:r,connectionGater:n,cryptos:i=new Map,muxers:o=new Map,onConnectionEnd:s=(()=>{}),onConnection:a=(()=>{})}=t;this.connectionGater=n,this.localPeer=e,this.metrics=r,this.cryptos=i,this.muxers=o,this.protector=null,this.protocols=new Map,this.onConnection=a,this.onConnectionEnd=s}async upgradeInbound(t){let e,r,n,s,a,c,u;if(await this.connectionGater.denyInboundConnection(t))throw o(new Error("The multiaddr connection is blocked by gater.acceptConnection"),l.ERR_CONNECTION_INTERCEPTED);if(this.metrics){({setTarget:c,proxy:u}=h());const e=(1e9*Math.random()).toString(36)+Date.now();c({toB58String:()=>e}),t=this.metrics.trackStream({stream:t,remotePeer:u})}i("Starting the inbound connection upgrade");let f=t;this.protector&&(f=await this.protector.protect(t));try{if(({conn:e,remotePeer:r,protocol:a}=await this._encryptInbound(this.localPeer,f,this.cryptos)),await this.connectionGater.denyInboundEncryptedConnection(r,e))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);this.muxers.size?({stream:n,Muxer:s}=await this._multiplexInbound(e,this.muxers)):n=e}catch(d){throw i.error("Failed to upgrade inbound connection",d),await t.close(d),d}if(await this.connectionGater.denyInboundUpgradedConnection(r,e))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(u,r),c(r)),i("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:a,direction:"inbound",maConn:t,upgradedConn:n,Muxer:s,remotePeer:r})}async upgradeOutbound(t){const e=t.remoteAddr.getPeerId();if(!e)throw o(new Error("outbound connection must have a peer id"),l.ERR_INVALID_MULTIADDR);const r=c.createFromB58String(e);if(await this.connectionGater.denyOutboundConnection(r,t))throw o(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),l.ERR_CONNECTION_INTERCEPTED);let n,s,a,u,f,d,p;if(this.metrics){({setTarget:d,proxy:p}=h());const e=(1e9*Math.random()).toString(36)+Date.now();d({toB58String:()=>e}),t=this.metrics.trackStream({stream:t,remotePeer:p})}i("Starting the outbound connection upgrade");let m=t;this.protector&&(m=await this.protector.protect(t));try{if(({conn:n,remotePeer:s,protocol:u}=await this._encryptOutbound(this.localPeer,m,r,this.cryptos)),await this.connectionGater.denyOutboundEncryptedConnection(s,n))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);this.muxers.size?({stream:a,Muxer:f}=await this._multiplexOutbound(n,this.muxers)):a=n}catch(y){throw i.error("Failed to upgrade outbound connection",y),await t.close(y),y}if(await this.connectionGater.denyOutboundUpgradedConnection(s,n))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(p,s),d(s)),i("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:u,direction:"outbound",maConn:t,upgradedConn:a,Muxer:f,remotePeer:s})}_createConnection(t){var e=this;let r,n,c,{cryptoProtocol:h,direction:f,maConn:d,upgradedConn:p,Muxer:m,remotePeer:y}=t;m&&(r=new m({onStream:async t=>{if(!c)return;const e=new s.Listener(t);try{const{stream:r,protocol:n}=await e.handle(Array.from(this.protocols.keys()));i("%s: incoming stream opened on %s",f,n),this.metrics&&this.metrics.trackStream({stream:r,remotePeer:y,protocol:n}),c.addStream(t,{protocol:n}),this._onStream({connection:c,stream:{...t,...r},protocol:n})}catch(r){i.error(r)}},onStreamEnd:t=>{c.removeStream(t.id)}}),n=async t=>{i("%s: starting new stream on %s",f,t);const e=r.newStream(),n=new s.Dialer(e);try{const{stream:r,protocol:i}=await n.select(t);return this.metrics&&this.metrics.trackStream({stream:r,remotePeer:y,protocol:i}),{stream:{...e,...r},protocol:i}}catch(a){throw i.error("could not create new stream",a),o(a,l.ERR_UNSUPPORTED_PROTOCOL)}},u(p,r,p).catch(i.error));const g=d.timeline;d.timeline=new Proxy(g,{set:function(){return c&&"close"===(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=2?void 0:arguments[2])&&!g.close&&(async()=>{try{"open"===c.stat.status&&await c.close()}catch(t){i.error(t)}finally{e.onConnectionEnd(c)}})().catch((t=>{i.error(t)})),Reflect.set(...arguments)}}),d.timeline.upgraded=Date.now();const b=()=>{throw o(new Error("connection is not multiplexed"),l.ERR_CONNECTION_NOT_MULTIPLEXED)};return c=new a({localAddr:d.localAddr,remoteAddr:d.remoteAddr,localPeer:this.localPeer,remotePeer:y,stat:{direction:f,timeline:d.timeline,multiplexer:m&&m.multicodec,encryption:h},newStream:n||b,getStreams:()=>r?r.streams:b(),close:async()=>{await d.close(),r&&r.streams.map((t=>t.abort()))}}),this.onConnection(c),c}_onStream(t){let{connection:e,stream:r,protocol:n}=t;this.protocols.get(n)({connection:e,stream:r,protocol:n})}async _encryptInbound(t,e,r){const n=new s.Listener(e),a=Array.from(r.keys());i("handling inbound crypto protocol selection",a);try{const{stream:e,protocol:o}=await n.handle(a),s=r.get(o);if(i("encrypting inbound connection..."),!s)throw new Error("no crypto module found for ".concat(o));return{...await s.secureInbound(t,e),protocol:o}}catch(c){throw o(c,l.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(t,e,r,n){const a=new s.Dialer(e),c=Array.from(n.keys());i("selecting outbound crypto protocol",c);try{const{stream:e,protocol:o}=await a.select(c),s=n.get(o);if(i("encrypting outbound connection to %j",r),!s)throw new Error("no crypto module found for ".concat(o));return{...await s.secureOutbound(t,e,r),protocol:o}}catch(u){throw o(u,l.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(t,e){const r=new s.Dialer(t),n=Array.from(e.keys());i("outbound selecting muxer %s",n);try{const{stream:t,protocol:o}=await r.select(n);i("%s selected as muxer protocol",o);return{stream:t,Muxer:e.get(o)}}catch(a){throw o(a,l.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(t,e){const r=new s.Listener(t),n=Array.from(e.keys());i("inbound handling muxers %s",n);try{const{stream:t,protocol:i}=await r.handle(n);return{stream:t,Muxer:e.get(i)}}catch(a){throw o(a,l.ERR_MUXER_UNAVAILABLE)}}}},function(t,e,r){"use strict";const n=r(613),i=r(614),o=r(615),{PROTOCOL_ID:s}=r(319);e.PROTOCOL_ID=s;class a{constructor(t){this._stream=t,this._shaken=!1}async _handshake(t){if(this._shaken)return;const{stream:e}=await n(this._stream,s,void 0,t);this._stream=e,this._shaken=!0}}e.Dialer=class extends a{select(t,e){return n(this._stream,t,this._shaken?void 0:s,e)}async ls(t){await this._handshake(t);const e=await o(this._stream,t),{stream:r,protocols:n}=e;return this._stream=r,n}};e.Listener=class extends a{handle(t,e){return i(this._stream,t,e)}}},function(t,e,r){"use strict";const n=r(5),i=r(9),o=r(185),s=r(87),a=Object.assign(n("mss:select"),{error:n("mss:select:error")});t.exports=async function(t,e,r,n){e=Array.isArray(e)?[...e]:[e];const{reader:c,writer:u,rest:h,stream:l}=s(t),f=e.shift();if(!f)throw new Error("At least one protocol must be specified");r?(a('select: write ["%s", "%s"]',r,f),o.writeAll(u,[r,f])):(a('select: write "%s"',f),o.write(u,f));let d=(await o.read(c,n)).toString();if(a('select: read "%s"',d),d===r&&(d=(await o.read(c,n)).toString(),a('select: read "%s"',d)),d===f)return h(),{stream:l,protocol:f};for(const i of e){a('select: write "%s"',i),o.write(u,i);const t=(await o.read(c,n)).toString();if(a('select: read "%s" for "%s"',t,i),t===i)return h(),{stream:l,protocol:i}}throw h(),i(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}},function(t,e,r){"use strict";const n=r(5),i=r(54),o=r(185),s=r(87),{PROTOCOL_ID:a}=r(319),c=Object.assign(n("mss:handle"),{error:n("mss:handle:error")});t.exports=async function(t,e,r){e=Array.isArray(e)?e:[e];const{writer:n,reader:u,rest:h,stream:l}=s(t);for(;;){const t=(await o.read(u,r)).toString();if(c('read "%s"',t),t!==a){if(e.includes(t))return o.write(n,t),c('respond with "%s" for "%s"',t,t),h(),{stream:l,protocol:t};"ls"!==t?(o.write(n,"na"),c('respond with "na" for "%s"',t)):(o.write(n,new i(e.map((t=>o.encode(t))))),c('respond with "%s" for %s',e,t))}else c('respond with "%s" for "%s"',a,t),o.write(n,a)}}},function(t,e,r){"use strict";const n=r(288),i=r(5),o=r(185),s=r(87),a=r(40),{pipe:c}=r(31),u=Object.assign(i("mss:ls"),{error:i("mss:ls:error")});t.exports=async function(t,e){const{reader:r,writer:i,rest:h,stream:l}=s(t);u('write "ls"'),o.write(i,"ls"),h();const f=await o.read(r,e),d=n([f]),p=[];await c(d,a.decode(),(async t=>{for await(const e of t)p.push(e.shallowSlice(0,-1).toString())}));return{stream:l,protocols:p}}},function(t,e,r){"use strict";e.Connection=r(617)},function(t,e,r){"use strict";const n=r(23),{Multiaddr:i}=r(11),o=r(9),{OPEN:s,CLOSING:a,CLOSED:c}=r(618),u=Symbol.for("@libp2p/interface-connection/connection");class h{constructor(t){let{localAddr:e,remoteAddr:r,localPeer:a,remotePeer:c,newStream:u,close:h,getStreams:l,stat:f}=t;!function(t,e,r,s,a,c,u){if(t&&!i.isMultiaddr(t))throw o(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!n.isPeerId(e))throw o(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!n.isPeerId(r))throw o(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if("function"!==typeof s)throw o(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof a)throw o(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof c)throw o(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!u)throw o(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if("inbound"!==u.direction&&"outbound"!==u.direction)throw o(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!u.timeline)throw o(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!u.timeline.open)throw o(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!u.timeline.upgraded)throw o(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}(e,a,c,u,h,l,f),this.id=parseInt(String(1e9*Math.random())).toString(36)+Date.now(),this.localAddr=e,this.remoteAddr=r,this.localPeer=a,this.remotePeer=c,this._stat={...f,status:s},this._newStream=u,this._close=h,this._getStreams=l,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[u](){return!0}static isConnection(t){return Boolean(t&&t[u])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(t){if(this.stat.status===a)throw o(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===c)throw o(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(t)||(t=[t]);const{stream:e,protocol:r}=await this._newStream(t);return this.addStream(e,{protocol:r}),{stream:e,protocol:r}}addStream(t,e){let{protocol:r,metadata:n={}}=e;this.registry.set(t.id,{protocol:r,...n})}removeStream(t){this.registry.delete(t)}async close(){if(this.stat.status!==c){if(this._closing)return this._closing;this.stat.status=a,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=c}}}t.exports=h},function(t,e,r){"use strict";t.exports={OPEN:"open",CLOSING:"closing",CLOSED:"closed"}},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}t.exports=function(t){var e=void 0,r=void 0;function i(t){if(!(t instanceof Object))throw new Error('Target "'+t+'" is not an object');r=t}function o(t){Object.keys(t).forEach((function(e){var r=t[e];if("function"!==typeof r)throw new Error('Trap "'+e+": "+r+'" is not a function');if(!Reflect[e])throw new Error('Trap "'+e+": "+r+'" is not a valid trap')})),e=t}i((function(){})),t&&i(t),o(Reflect);var s=new Proxy({},{get:function(t,i){return function(){for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return e[i].apply(null,[r].concat(n(o.slice(1))))}}});return{setTarget:i,setHandler:o,getTarget:function(){return r},getHandler:function(){return e},proxy:new Proxy(r,s)}}},function(t,e,r){"use strict";const n=r(5),{EventEmitter:i}=r(33),o=r(621),s=r(623),a=r(624),c=r(625),u=r(626),h=Object.assign(n("libp2p:peer-store"),{error:n("libp2p:peer-store:err")});t.exports=class extends i{constructor(t){let{peerId:e,datastore:r,addressFilter:n}=t;super(),this._peerId=e,this._store=new u(r),this.addressBook=new o(this.emit.bind(this),this._store,n),this.keyBook=new s(this.emit.bind(this),this._store),this.metadataBook=new a(this.emit.bind(this),this._store),this.protoBook=new c(this.emit.bind(this),this._store)}async*getPeers(){h("getPeers await read lock");const t=await this._store.lock.readLock();h("getPeers got read lock");try{for await(const t of this._store.all())t.id.toB58String()!==this._peerId.toB58String()&&(yield t)}finally{h("getPeers release read lock"),t()}}async delete(t){h("delete await write lock");const e=await this._store.lock.writeLock();h("delete got write lock");try{await this._store.delete(t)}finally{h("delete release write lock"),e()}}async get(t){h("get await read lock");const e=await this._store.lock.readLock();h("get got read lock");try{return this._store.load(t)}finally{h("get release read lock"),e()}}async has(t){h("has await read lock");const e=await this._store.lock.readLock();h("has got read lock");try{return this._store.has(t)}finally{h("has release read lock"),e()}}}},function(t,e,r){"use strict";const n=r(5),i=r(9),{Multiaddr:o}=r(11),s=r(23),{codes:a}=r(27),c=r(181),u=r(128),{pipe:h}=r(31),l=r(88),f=r(89),d=r(298),p=r(622),m=Object.assign(n("libp2p:peer-store:address-book"),{error:n("libp2p:peer-store:address-book:err")}),y="change:multiaddrs";function g(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return h(e,(t=>p(t,(t=>{if(!o.isMultiaddr(t))throw m.error("multiaddr must be an instance of Multiaddr"),i(new Error("multiaddr must be an instance of Multiaddr"),a.ERR_INVALID_PARAMETERS)}))),(e=>f(e,(e=>r(t,e)))),(t=>d(t,(t=>({multiaddr:new o(t.toString()),isCertified:n})))),(t=>l(t)))}t.exports=class{constructor(t,e,r){this._emit=t,this._store=e,this._addressFilter=r}async consumePeerRecord(t){m("consumePeerRecord await write lock");const e=await this._store.lock.writeLock();let r,n;m("consumePeerRecord got write lock");try{let o;try{o=c.createFromProtobuf(t.payload)}catch(i){return m.error("invalid peer record received"),!1}r=o.peerId;const s=o.multiaddrs;if(!r.equals(t.peerId))return m("signing key does not match PeerId in the PeerRecord"),!1;if(!s||!s.length)return!1;if(await this._store.has(r)){const t=await this._store.load(r);if(t.peerRecordEnvelope){const e=await u.createFromProtobuf(t.peerRecordEnvelope);if(c.createFromProtobuf(e.payload).seqNumber>=o.seqNumber)return!1}}n=await this._store.patchOrCreate(r,{addresses:await g(r,s,this._addressFilter,!0),peerRecordEnvelope:t.marshal()}),m("stored provided peer record for ".concat(o.peerId.toB58String()))}finally{m("consumePeerRecord release write lock"),e()}return this._emit(y,{peerId:r,multiaddrs:n.addresses.map((t=>{let{multiaddr:e}=t;return e}))}),!0}async getRawEnvelope(t){m("getRawEnvelope await read lock");const e=await this._store.lock.readLock();m("getRawEnvelope got read lock");try{return(await this._store.load(t)).peerRecordEnvelope}catch(r){if(r.code!==a.ERR_NOT_FOUND)throw r}finally{m("getRawEnvelope release read lock"),e()}}async getPeerRecord(t){const e=await this.getRawEnvelope(t);if(e)return u.createFromProtobuf(e)}async get(t){if(!s.isPeerId(t))throw m.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);m("get wait for read lock");const e=await this._store.lock.readLock();m("get got read lock");try{return(await this._store.load(t)).addresses}catch(r){if(r.code!==a.ERR_NOT_FOUND)throw r}finally{m("get release read lock"),e()}return[]}async set(t,e){if(!s.isPeerId(t))throw m.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw m.error("multiaddrs must be an array of Multiaddrs"),i(new Error("multiaddrs must be an array of Multiaddrs"),a.ERR_INVALID_PARAMETERS);m("set await write lock");const r=await this._store.lock.writeLock();m("set got write lock");let n,o=!1;try{const i=await g(t,e,this._addressFilter);if(!i.length)return;try{const e=await this._store.load(t);if(o=!0,new Set([...i.map((t=>{let{multiaddr:e}=t;return e.toString()})),...e.addresses.map((t=>{let{multiaddr:e}=t;return e.toString()}))]).size===e.addresses.length&&i.length===e.addresses.length)return}catch(c){if(c.code!==a.ERR_NOT_FOUND)throw c}n=await this._store.patchOrCreate(t,{addresses:i}),m("set multiaddrs for ".concat(t.toB58String()))}finally{m("set release write lock"),r()}this._emit(y,{peerId:t,multiaddrs:n.addresses.map((t=>t.multiaddr))}),o||this._emit("peer",t)}async add(t,e){if(!s.isPeerId(t))throw m.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw m.error("multiaddrs must be an array of Multiaddrs"),i(new Error("multiaddrs must be an array of Multiaddrs"),a.ERR_INVALID_PARAMETERS);m("add await write lock");const r=await this._store.lock.writeLock();let n,o;m("add got write lock");try{const i=await g(t,e,this._addressFilter);if(!i.length)return;try{const e=await this._store.load(t);if(n=!0,new Set([...i.map((t=>{let{multiaddr:e}=t;return e.toString()})),...e.addresses.map((t=>{let{multiaddr:e}=t;return e.toString()}))]).size===e.addresses.length)return}catch(c){if(c.code!==a.ERR_NOT_FOUND)throw c}o=await this._store.mergeOrCreate(t,{addresses:i}),m("added multiaddrs for ".concat(t.toB58String()))}finally{m("set release write lock"),r()}this._emit(y,{peerId:t,multiaddrs:o.addresses.map((t=>t.multiaddr))}),n||this._emit("peer",t)}async delete(t){if(!s.isPeerId(t))throw m.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);m("delete await write lock");const e=await this._store.lock.writeLock();let r;m("delete got write lock");try{r=await this._store.has(t),await this._store.patchOrCreate(t,{addresses:[]})}finally{m("delete release write lock"),e()}r&&this._emit(y,{peerId:t,multiaddrs:[]})}async getMultiaddrsForPeer(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t)(await this.get(t)).map((e=>{const r=e.multiaddr,n=r.getPeerId();return n&&n===t.toB58String()?r:r.encapsulate("/p2p/".concat(t.toB58String()))}))}}},function(t,e,r){"use strict";t.exports=async function*(t,e){for await(const r of t)await e(r),yield r}},function(t,e,r){"use strict";const n=r(5),i=r(9),{codes:o}=r(27),s=r(23),{equals:a}=r(45),c=Object.assign(n("libp2p:peer-store:key-book"),{error:n("libp2p:peer-store:key-book:err")}),u="change:pubkey";t.exports=class{constructor(t,e){this._emit=t,this._store=e}async set(t,e){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!e)throw c.error("publicKey must be an instance of PublicKey to store data"),i(new Error("publicKey must be an instance of PublicKey"),o.ERR_INVALID_PARAMETERS);c("set await write lock");const r=await this._store.lock.writeLock();c("set got write lock");let n=!1;try{try{const r=await this._store.load(t);if(r.pubKey&&a(r.pubKey.bytes,e.bytes))return}catch(h){if(h.code!==o.ERR_NOT_FOUND)throw h}await this._store.patchOrCreate(t,{pubKey:e}),n=!0}finally{c("set release write lock"),r()}n&&this._emit(u,{peerId:t,pubKey:e})}async get(t){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);c("get await write lock");const e=await this._store.lock.readLock();c("get got write lock");try{return(await this._store.load(t)).pubKey}catch(r){if(r.code!==o.ERR_NOT_FOUND)throw r}finally{c("get release write lock"),e()}}async delete(t){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);c("delete await write lock");const e=await this._store.lock.writeLock();c("delete got write lock");try{await this._store.patchOrCreate(t,{pubKey:void 0})}finally{c("delete release write lock"),e()}this._emit(u,{peerId:t,pubKey:void 0})}}},function(t,e,r){"use strict";const n=r(5),i=r(9),{codes:o}=r(27),s=r(23),{equals:a}=r(45),c=Object.assign(n("libp2p:peer-store:metadata-book"),{error:n("libp2p:peer-store:metadata-book:err")}),u="change:metadata";t.exports=class{constructor(t,e){this._emit=t,this._store=e}async get(t){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);c("get await read lock");const e=await this._store.lock.readLock();c("get got read lock");try{return(await this._store.load(t)).metadata}catch(r){if(r.code!==o.ERR_NOT_FOUND)throw r}finally{c("get release read lock"),e()}return new Map}async getValue(t,e){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);c("getValue await read lock");const r=await this._store.lock.readLock();c("getValue got read lock");try{return(await this._store.load(t)).metadata.get(e)}catch(n){if(n.code!==o.ERR_NOT_FOUND)throw n}finally{c("getValue release write lock"),r()}}async set(t,e){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!e||!(e instanceof Map))throw c.error("valid metadata must be provided to store data"),i(new Error("valid metadata must be provided"),o.ERR_INVALID_PARAMETERS);c("set await write lock");const r=await this._store.lock.writeLock();c("set got write lock");try{await this._store.mergeOrCreate(t,{metadata:e})}finally{c("set release write lock"),r()}this._emit(u,{peerId:t,metadata:e})}async setValue(t,e,r){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if("string"!==typeof e||!(r instanceof Uint8Array))throw c.error("valid key and value must be provided to store data"),i(new Error("valid key and value must be provided"),o.ERR_INVALID_PARAMETERS);c("setValue await write lock");const n=await this._store.lock.writeLock();let h;c("setValue got write lock");try{try{const n=(await this._store.load(t)).metadata.get(e);if(null!=n&&a(r,n))return}catch(l){if(l.code!==o.ERR_NOT_FOUND)throw l}h=await this._store.mergeOrCreate(t,{metadata:new Map([[e,r]])})}finally{c("setValue release write lock"),n()}this._emit(u,{peerId:t,metadata:h.metadata})}async delete(t){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);c("delete await write lock");const e=await this._store.lock.writeLock();let r;c("delete got write lock");try{r=await this._store.has(t),r&&await this._store.patch(t,{metadata:new Map})}finally{c("delete release write lock"),e()}r&&this._emit(u,{peerId:t,metadata:new Map})}async deleteValue(t,e){if(!s.isPeerId(t))throw c.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);c("deleteValue await write lock");const r=await this._store.lock.writeLock();let n;c("deleteValue got write lock");try{n=(await this._store.load(t)).metadata,n.delete(e),await this._store.patch(t,{metadata:n})}catch(a){if(a.code!==o.ERR_NOT_FOUND)throw a}finally{c("deleteValue release write lock"),r()}n&&this._emit(u,{peerId:t,metadata:n})}}},function(t,e,r){"use strict";const n=r(5),i=r(9),{codes:o}=r(27),s=r(23),a=Object.assign(n("libp2p:peer-store:proto-book"),{error:n("libp2p:peer-store:proto-book:err")}),c="change:protocols";t.exports=class{constructor(t,e){this._emit=t,this._store=e}async get(t){a("get wait for read lock");const e=await this._store.lock.readLock();a("get got read lock");try{return(await this._store.load(t)).protocols}catch(r){if(r.code!==o.ERR_NOT_FOUND)throw r}finally{a("get release read lock"),e()}return[]}async set(t,e){if(!s.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),i(new Error("protocols must be provided"),o.ERR_INVALID_PARAMETERS);a("set await write lock");const r=await this._store.lock.writeLock();let n;a("set got write lock");try{try{const r=await this._store.load(t);if(new Set([...e]).size===r.protocols.length)return}catch(u){if(u.code!==o.ERR_NOT_FOUND)throw u}n=await this._store.patchOrCreate(t,{protocols:e}),a("stored provided protocols for ".concat(t.toB58String()))}finally{a("set release write lock"),r()}this._emit(c,{peerId:t,protocols:n.protocols})}async add(t,e){if(!s.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),i(new Error("protocols must be provided"),o.ERR_INVALID_PARAMETERS);a("add await write lock");const r=await this._store.lock.writeLock();let n;a("add got write lock");try{try{const r=await this._store.load(t);if(new Set([...r.protocols,...e]).size===r.protocols.length)return}catch(u){if(u.code!==o.ERR_NOT_FOUND)throw u}n=await this._store.mergeOrCreate(t,{protocols:e}),a("added provided protocols for ".concat(t.toB58String()))}finally{a("add release write lock"),r()}this._emit(c,{peerId:t,protocols:n.protocols})}async remove(t,e){if(!s.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),i(new Error("protocols must be provided"),o.ERR_INVALID_PARAMETERS);a("remove await write lock");const r=await this._store.lock.writeLock();let n;a("remove got write lock");try{try{const r=await this._store.load(t),n=new Set(r.protocols);for(const t of e)n.delete(t);if(r.protocols.length===n.size)return;e=Array.from(n)}catch(u){if(u.code!==o.ERR_NOT_FOUND)throw u}n=await this._store.patchOrCreate(t,{protocols:e})}finally{a("remove release write lock"),r()}this._emit(c,{peerId:t,protocols:n.protocols})}async delete(t){a("delete await write lock");const e=await this._store.lock.writeLock();let r;a("delete got write lock");try{r=await this._store.has(t),await this._store.patchOrCreate(t,{protocols:[]})}catch(n){if(n.code!==o.ERR_NOT_FOUND)throw n}finally{a("delete release write lock"),e()}r&&this._emit(c,{peerId:t,protocols:[]})}}},function(t,e,r){"use strict";const n=r(5),i=r(23),o=r(9),{codes:s}=r(27),{Key:a}=r(178),{base32:c}=r(84),{keys:{unmarshalPublicKey:u,marshalPublicKey:h}}=r(104),{Multiaddr:l}=r(11),{Peer:f}=r(627),d=r(628),{equals:p}=r(45),m=Object.assign(n("libp2p:peer-store:store"),{error:n("libp2p:peer-store:store:err")}),y="/peers/";t.exports=class{constructor(t){this._datastore=t,this.lock=d("peer-store",{singleProcess:!0})}_peerIdToDatastoreKey(t){if(!i.isPeerId(t))throw m.error("peerId must be an instance of peer-id to store data"),o(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);const e=t.toString();return new a("".concat(y).concat(e))}async has(t){return this._datastore.has(this._peerIdToDatastoreKey(t))}async delete(t){await this._datastore.delete(this._peerIdToDatastoreKey(t))}async load(t){const e=await this._datastore.get(this._peerIdToDatastoreKey(t)),r=f.decode(e),n=r.pubKey?u(r.pubKey):t.pubKey,i=new Map;for(const o of r.metadata)i.set(o.key,o.value);return{...r,id:t,pubKey:n,addresses:r.addresses.map((t=>{let{multiaddr:e,isCertified:r}=t;return{multiaddr:new l(e),isCertified:r||!1}})),metadata:i,peerRecordEnvelope:r.peerRecordEnvelope||void 0}}async save(t){if(null!=t.pubKey&&null!=t.id.pubKey&&!p(t.pubKey.bytes,t.id.pubKey.bytes))throw m.error("peer publicKey bytes do not match peer id publicKey bytes"),o(new Error("publicKey bytes do not match peer id publicKey bytes"),s.ERR_INVALID_PARAMETERS);const e=new Set,r=f.encode({addresses:t.addresses.filter((t=>!e.has(t.multiaddr.toString())&&(e.add(t.multiaddr.toString()),!0))).sort(((t,e)=>t.multiaddr.toString().localeCompare(e.multiaddr.toString()))).map((t=>{let{multiaddr:e,isCertified:r}=t;return{multiaddr:e.bytes,isCertified:r}})),protocols:t.protocols.sort(),pubKey:t.pubKey?h(t.pubKey):void 0,metadata:[...t.metadata.keys()].sort().map((e=>({key:e,value:t.metadata.get(e)}))),peerRecordEnvelope:t.peerRecordEnvelope}).finish();return await this._datastore.put(this._peerIdToDatastoreKey(t.id),r),this.load(t.id)}async patch(t,e){const r=await this.load(t);return await this._patch(t,e,r)}async patchOrCreate(t,e){let r;try{r=await this.load(t)}catch(n){if(n.code!==s.ERR_NOT_FOUND)throw n;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._patch(t,e,r)}async _patch(t,e,r){return await this.save({...r,...e,id:t})}async merge(t,e){const r=await this.load(t);return this._merge(t,e,r)}async mergeOrCreate(t,e){let r;try{r=await this.load(t)}catch(n){if(n.code!==s.ERR_NOT_FOUND)throw n;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._merge(t,e,r)}async _merge(t,e,r){const n=new Map;return(e.addresses||[]).forEach((t=>{n.set(t.multiaddr.toString(),t.isCertified)})),r.addresses.forEach((t=>{let{multiaddr:e,isCertified:r}=t;const i=e.toString();n.set(i,Boolean(n.get(i)||r))})),await this.save({id:t,addresses:Array.from(n.entries()).map((t=>{let[e,r]=t;return{multiaddr:new l(e),isCertified:r}})),protocols:Array.from(new Set([...r.protocols||[],...e.protocols||[]])),metadata:new Map([...r.metadata?r.metadata.entries():[],...e.metadata?e.metadata.entries():[]]),pubKey:e.pubKey||(null!=r?r.pubKey:void 0),peerRecordEnvelope:e.peerRecordEnvelope||(null!=r?r.peerRecordEnvelope:void 0)})}async*all(){for await(const t of this._datastore.queryKeys({prefix:y})){const e=t.toString().split("/")[2],r=c.decode(e);yield this.load(i.createFromBytes(r))}}}},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-peer"]||(n.roots["libp2p-peer"]={});a.Peer=function(){function t(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.addresses=s.emptyArray,t.prototype.protocols=s.emptyArray,t.prototype.metadata=s.emptyArray,t.prototype.pubKey=null,t.prototype.peerRecordEnvelope=null,Object.defineProperty(t.prototype,"_pubKey",{get:s.oneOfGetter(e=["pubKey"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_peerRecordEnvelope",{get:s.oneOfGetter(e=["peerRecordEnvelope"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=o.create()),null!=t.addresses&&t.addresses.length)for(var r=0;r<t.addresses.length;++r)a.Address.encode(t.addresses[r],e.uint32(10).fork()).ldelim();if(null!=t.protocols&&t.protocols.length)for(r=0;r<t.protocols.length;++r)e.uint32(18).string(t.protocols[r]);if(null!=t.metadata&&t.metadata.length)for(r=0;r<t.metadata.length;++r)a.Metadata.encode(t.metadata[r],e.uint32(26).fork()).ldelim();return null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(34).bytes(t.pubKey),null!=t.peerRecordEnvelope&&Object.hasOwnProperty.call(t,"peerRecordEnvelope")&&e.uint32(42).bytes(t.peerRecordEnvelope),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.Peer;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(a.Address.decode(t,t.uint32()));break;case 2:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(t.string());break;case 3:n.metadata&&n.metadata.length||(n.metadata=[]),n.metadata.push(a.Metadata.decode(t,t.uint32()));break;case 4:n.pubKey=t.bytes();break;case 5:n.peerRecordEnvelope=t.bytes();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.Peer)return t;var e=new a.Peer;if(t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".Peer.addresses: array expected");e.addresses=[];for(var r=0;r<t.addresses.length;++r){if("object"!==typeof t.addresses[r])throw TypeError(".Peer.addresses: object expected");e.addresses[r]=a.Address.fromObject(t.addresses[r])}}if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Peer.protocols: array expected");e.protocols=[];for(r=0;r<t.protocols.length;++r)e.protocols[r]=String(t.protocols[r])}if(t.metadata){if(!Array.isArray(t.metadata))throw TypeError(".Peer.metadata: array expected");e.metadata=[];for(r=0;r<t.metadata.length;++r){if("object"!==typeof t.metadata[r])throw TypeError(".Peer.metadata: object expected");e.metadata[r]=a.Metadata.fromObject(t.metadata[r])}}return null!=t.pubKey&&("string"===typeof t.pubKey?s.base64.decode(t.pubKey,e.pubKey=s.newBuffer(s.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.peerRecordEnvelope&&("string"===typeof t.peerRecordEnvelope?s.base64.decode(t.peerRecordEnvelope,e.peerRecordEnvelope=s.newBuffer(s.base64.length(t.peerRecordEnvelope)),0):t.peerRecordEnvelope.length&&(e.peerRecordEnvelope=t.peerRecordEnvelope)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.addresses=[],r.protocols=[],r.metadata=[]),t.addresses&&t.addresses.length){r.addresses=[];for(var n=0;n<t.addresses.length;++n)r.addresses[n]=a.Address.toObject(t.addresses[n],e)}if(t.protocols&&t.protocols.length){r.protocols=[];for(n=0;n<t.protocols.length;++n)r.protocols[n]=t.protocols[n]}if(t.metadata&&t.metadata.length){r.metadata=[];for(n=0;n<t.metadata.length;++n)r.metadata[n]=a.Metadata.toObject(t.metadata[n],e)}return null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(r.pubKey=e.bytes===String?s.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey,e.oneofs&&(r._pubKey="pubKey")),null!=t.peerRecordEnvelope&&t.hasOwnProperty("peerRecordEnvelope")&&(r.peerRecordEnvelope=e.bytes===String?s.base64.encode(t.peerRecordEnvelope,0,t.peerRecordEnvelope.length):e.bytes===Array?Array.prototype.slice.call(t.peerRecordEnvelope):t.peerRecordEnvelope,e.oneofs&&(r._peerRecordEnvelope="peerRecordEnvelope")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.Address=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.multiaddr=s.newBuffer([]),t.prototype.isCertified=null,Object.defineProperty(t.prototype,"_isCertified",{get:s.oneOfGetter(e=["isCertified"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=o.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),null!=t.isCertified&&Object.hasOwnProperty.call(t,"isCertified")&&e.uint32(16).bool(t.isCertified),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.Address;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.multiaddr=t.bytes();break;case 2:n.isCertified=t.bool();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.Address)return t;var e=new a.Address;return null!=t.multiaddr&&("string"===typeof t.multiaddr?s.base64.decode(t.multiaddr,e.multiaddr=s.newBuffer(s.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),null!=t.isCertified&&(e.isCertified=Boolean(t.isCertified)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.multiaddr="":(r.multiaddr=[],e.bytes!==Array&&(r.multiaddr=s.newBuffer(r.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(r.multiaddr=e.bytes===String?s.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),null!=t.isCertified&&t.hasOwnProperty("isCertified")&&(r.isCertified=t.isCertified,e.oneofs&&(r._isCertified="isCertified")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.Metadata=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.key="",t.prototype.value=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).string(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).bytes(t.value),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.Metadata;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.key=t.string();break;case 2:n.value=t.bytes();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.Metadata)return t;var e=new a.Metadata;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&("string"===typeof t.value?s.base64.decode(t.value,e.value=s.newBuffer(s.base64.length(t.value)),0):t.value.length&&(e.value=t.value)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.key="",e.bytes===String?r.value="":(r.value=[],e.bytes!==Array&&(r.value=s.newBuffer(r.value)))),null!=t.key&&t.hasOwnProperty("key")&&(r.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(r.value=e.bytes===String?s.base64.encode(t.value,0,t.value.length):e.bytes===Array?Array.prototype.slice.call(t.value):t.value),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},function(t,e,r){(function(e){const n=r(629),i=r(630),{default:o}=r(323),{timeout:s}=r(636),a=r(322),c={};let u;function h(t,e){let r;const n=new Promise((t=>{r=t}));return t.add((()=>s(new Promise((t=>{r((()=>{t()}))})),e.timeout))),n}const l={concurrency:1/0,timeout:846e5,global:e,singleProcess:!1};t.exports=(t,e)=>(e||(e={}),"object"===typeof t&&(e=t,t="lock"),t||(t="lock"),e=Object.assign({},l,e),u||(u=n(e)||i(e),u.isWorker||(u.on("requestReadLock",((t,e)=>{c[t]&&c[t].readLock().then((t=>e().finally((()=>t()))))})),u.on("requestWriteLock",(async(t,e)=>{c[t]&&c[t].writeLock().then((t=>e().finally((()=>t()))))})))),c[t]||(c[t]=((t,e)=>{if(u.isWorker)return{readLock:u.readLock(t,e),writeLock:u.writeLock(t,e)};const r=new o({concurrency:1});let n=null;return{readLock:()=>{if(n)return h(n,e);n=new o({concurrency:e.concurrency,autoStart:!1});const t=n,i=h(n,e);return r.add((()=>(t.start(),t.onIdle().then((()=>{n===t&&(n=null)}))))),i},writeLock:()=>(n=null,h(r,e))}})(t,e)),c[t]),t.exports.Worker=function(t,r){let n;r=r||e.Worker;try{n=new r(t)}catch(i){i.message.includes("not a constructor")&&(n=r(t))}if(!n)throw new Error("Could not create Worker from",r);return a(n),n}}).call(this,r(21))},function(t,e,r){(function(e){const n=r(33).EventEmitter,{nanoid:i}=r(188),{WORKER_REQUEST_READ_LOCK:o,WORKER_RELEASE_READ_LOCK:s,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:u,MASTER_GRANT_WRITE_LOCK:h}=r(320);let l;const f=(t,e,r,n,i)=>(o,s)=>{s&&s.type===r&&t.emit(e,s.name,(()=>(o.send({type:i,name:s.name,identifier:s.identifier}),new Promise((t=>{const e=r=>{r&&r.type===n&&r.identifier===s.identifier&&(o.removeListener("message",e),t())};o.on("message",e)})))))},d=(t,r,n,o)=>()=>{const s=i();return e.send({type:r,identifier:s,name:t}),new Promise((r=>{const i=a=>{a&&a.type===n&&a.identifier===s&&(e.removeListener("message",i),r((()=>{e.send({type:o,identifier:s,name:t})})))};e.on("message",i)}))};t.exports=t=>{try{if(l=r(321),!Object.keys(l).length)return}catch(e){return}if(l.isMaster||t.singleProcess){const t=new n;return l.on("message",f(t,"requestReadLock",o,s,a)),l.on("message",f(t,"requestWriteLock",c,u,h)),t}return{isWorker:!0,readLock:t=>d(t,o,a,s),writeLock:t=>d(t,c,h,u)}}}).call(this,r(22))},function(t,e,r){const n=r(33).EventEmitter,{nanoid:i}=r(188),{WORKER_REQUEST_READ_LOCK:o,WORKER_RELEASE_READ_LOCK:s,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:u,MASTER_GRANT_WRITE_LOCK:h}=r(320),l=r(322),f=(t,e,r,n,i)=>(o,s)=>{if(!s||!s.data||s.data.type!==r)return;const a={type:s.data.type,name:s.data.name,identifier:s.data.identifier};t.emit(e,a.name,(()=>(o.postMessage({type:i,name:a.name,identifier:a.identifier}),new Promise((t=>{const e=r=>{if(!r||!r.data)return;const i={type:r.data.type,name:r.data.name,identifier:r.data.identifier};i&&i.type===n&&i.identifier===a.identifier&&(o.removeEventListener("message",e),t())};o.addEventListener("message",e)})))))},d=(t,e,r,n)=>()=>{const o=i();return globalThis.postMessage({type:e,identifier:o,name:t}),new Promise((e=>{const i=s=>{if(!s||!s.data)return;const a={type:s.data.type,identifier:s.data.identifier};a&&a.type===r&&a.identifier===o&&(globalThis.removeEventListener("message",i),e((()=>{globalThis.postMessage({type:n,identifier:o,name:t})})))};globalThis.addEventListener("message",i)}))},p={singleProcess:!1};t.exports=t=>{t=Object.assign({},p,t);if(!!globalThis.document||t.singleProcess){const t=new n;return l.addEventListener("message",f(t,"requestReadLock",o,s,a)),l.addEventListener("message",f(t,"requestWriteLock",c,u,h)),t}return{isWorker:!0,readLock:t=>d(t,o,a,s),writeLock:t=>d(t,c,h,u)}}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||t,o),c=i?i+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},u.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,n,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,o),!0;case 6:return h.fn.call(h.context,e,r,n,o,s),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var f,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,r);break;case 4:h[u].fn.call(h[u].context,e,r,n);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];h[u].fn.apply(h[u].context,c)}}return!0},u.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return c(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||c(this,o);else{for(var a=0,u=[],h=s.length;a<h;a++)(s[a].fn!==e||n&&!s[a].once||r&&s[a].context!==r)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:c(this,o)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&c(this,e)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},function(t,e,r){"use strict";const n=r(633);class i extends Error{constructor(t){super(t),this.name="TimeoutError"}}const o=(t,e,r)=>new Promise(((o,s)=>{if("number"!==typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void o(t);const a=setTimeout((()=>{if("function"===typeof r){try{o(r())}catch(c){s(c)}return}const n="string"===typeof r?r:"Promise timed out after ".concat(e," milliseconds"),a=r instanceof Error?r:new i(n);"function"===typeof t.cancel&&t.cancel(),s(a)}),e);n(t.then(o,s),(()=>{clearTimeout(a)}))}));t.exports=o,t.exports.default=o,t.exports.TimeoutError=i},function(t,e,r){"use strict";t.exports=(t,e)=>(e=e||(()=>{}),t.then((t=>new Promise((t=>{t(e())})).then((()=>t))),(t=>new Promise((t=>{t(e())})).then((()=>{throw t})))))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(635);e.default=class{constructor(){this._queue=[]}enqueue(t,e){const r={priority:(e=Object.assign({priority:0},e)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority)return void this._queue.push(r);const i=n.default(this._queue,r,((t,e)=>e.priority-t.priority));this._queue.splice(i,0,r)}dequeue(){const t=this._queue.shift();return null===t||void 0===t?void 0:t.run}filter(t){return this._queue.filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return this._queue.length}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){let n=0,i=t.length;for(;i>0;){const o=i/2|0;let s=n+o;r(t[s],e)<=0?(n=++s,i-=o+1):i=o}return n}},function(t,e,r){"use strict";var n;t.exports.timeout=function(t,e){var r,i=new n;return Promise.race([t,new Promise((function(t,n){r=setTimeout((function(){n(i)}),e)}))]).then((function(t){return clearTimeout(r),t}),(function(t){throw clearTimeout(r),t}))};(n=t.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),n.prototype.name="TimeoutError"},function(t,e,r){"use strict";t.exports=function(t,e,r){const n=new t(e,r);return n._subscribeAdapter=n.subscribe,n._unsubscribeAdapter=n.unsubscribe,n.subscribe=function(t,e){e&&n.on(t,e),n._subscribeAdapter(t)},n.unsubscribe=function(t,e){e?n.removeListener(t,e):n.removeAllListeners(t),0===n.listenerCount(t)&&n._unsubscribeAdapter(t)},n}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:registrar"),{error:n("libp2p:registrar:err")}),o=r(9),{codes:{ERR_INVALID_PARAMETERS:s}}=r(27),a=r(324);t.exports=class{constructor(t){let{peerStore:e,connectionManager:r}=t;this.peerStore=e,this.connectionManager=r,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(t){this._handle=t}getConnection(t){return this.connectionManager.get(t)}async register(t){if(!a.isTopology(t))throw i.error("topology must be an instance of interfaces/topology"),o(new Error("topology must be an instance of interfaces/topology"),s);const e=(1e9*Math.random()).toString(36)+Date.now();return this.topologies.set(e,t),await t.setRegistrar(this),e}unregister(t){return this.topologies.delete(t)}_onDisconnect(t){for(const[,e]of this.topologies)e.disconnect(t.remotePeer)}}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:identify"),{error:n("libp2p:identify:err")}),o=r(9),s=r(40),{pipe:a}=r(31),{collect:c,take:u,consume:h}=r(184),{fromString:l}=r(24),f=r(23),{Multiaddr:d}=r(11),{toBuffer:p}=r(175),m=r(640),y=r(128),g=r(181),{MULTICODEC_IDENTIFY:b,MULTICODEC_IDENTIFY_PUSH:v,IDENTIFY_PROTOCOL_VERSION:w,MULTICODEC_IDENTIFY_PROTOCOL_NAME:_,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:S,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:E,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:A}=r(304),{codes:M}=r(27);class I{static getProtocolStr(t){return{identifyProtocolStr:"/".concat(t._config.protocolPrefix,"/").concat(_,"/").concat(E),identifyPushProtocolStr:"/".concat(t._config.protocolPrefix,"/").concat(S,"/").concat(A)}}constructor(t){let{libp2p:e}=t;this._libp2p=e,this.peerStore=e.peerStore,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.peerId=e.peerId,this.handleMessage=this.handleMessage.bind(this);const r=I.getProtocolStr(e);this.identifyProtocolStr=r.identifyProtocolStr,this.identifyPushProtocolStr=r.identifyPushProtocolStr,this._host={protocolVersion:"".concat(e._config.protocolPrefix,"/").concat(w),...e._options.host},this.connectionManager.on("peer:connect",(t=>{this.identify(t).catch(i.error)})),this.peerStore.on("change:multiaddrs",(t=>{let{peerId:e}=t;e.toString()===this.peerId.toString()&&this.pushToPeerStore().catch((t=>i.error(t)))})),this.peerStore.on("change:protocols",(t=>{let{peerId:e}=t;e.toString()===this.peerId.toString()&&this.pushToPeerStore().catch((t=>i.error(t)))}))}async start(){await this.peerStore.metadataBook.setValue(this.peerId,"AgentVersion",l(this._host.agentVersion)),await this.peerStore.metadataBook.setValue(this.peerId,"ProtocolVersion",l(this._host.protocolVersion))}async stop(){}async push(t){const e=await this.peerStore.addressBook.getRawEnvelope(this.peerId),r=this._libp2p.multiaddrs.map((t=>t.bytes)),n=await this.peerStore.protoBook.get(this.peerId),o=t.map((async t=>{try{const{stream:i}=await t.newStream(this.identifyPushProtocolStr);await a([m.Identify.encode({listenAddrs:r,signedPeerRecord:e,protocols:n}).finish()],s.encode(),i,h)}catch(o){i.error("could not push identify update to peer",o)}}));return Promise.all(o)}async pushToPeerStore(){if(!this._libp2p.isStarted())return;const t=[];let e;for await(const r of this.peerStore.getPeers())r.protocols.includes(this.identifyPushProtocolStr)&&(e=this.connectionManager.get(r.id))&&t.push(e);await this.push(t)}async identify(t){const{stream:e}=await t.newStream(this.identifyProtocolStr),[r]=await a([],e,s.decode(),u(1),p,c);if(!r)throw o(new Error("No data could be retrieved"),M.ERR_CONNECTION_ENDED);let n;try{n=m.Identify.decode(r)}catch(A){throw o(A,M.ERR_INVALID_MESSAGE)}const{publicKey:h,listenAddrs:b,protocols:v,observedAddr:w,signedPeerRecord:_}=n,S=await f.createFromPubKey(h);if(t.remotePeer.toB58String()!==S.toB58String())throw o(new Error("identified peer does not match the expected peer"),M.ERR_INVALID_PEER);const E=I.getCleanMultiaddr(w);try{const t=await y.openAndCertify(_,g.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(t))return await this.peerStore.protoBook.set(S,v),await this.peerStore.metadataBook.setValue(S,"AgentVersion",l(n.agentVersion)),void await this.peerStore.metadataBook.setValue(S,"ProtocolVersion",l(n.protocolVersion))}catch(A){i("received invalid envelope, discard it and fallback to listenAddrs is available",A)}try{await this.peerStore.addressBook.set(S,b.map((t=>new d(t))))}catch(A){i.error("received invalid addrs",A)}await this.peerStore.protoBook.set(S,v),await this.peerStore.metadataBook.setValue(S,"AgentVersion",l(n.agentVersion)),await this.peerStore.metadataBook.setValue(S,"ProtocolVersion",l(n.protocolVersion)),i("received observed address of %s",E)}handleMessage(t){let{connection:e,stream:r,protocol:n}=t;switch(n){case this.identifyProtocolStr:return this._handleIdentify({connection:e,stream:r});case this.identifyPushProtocolStr:return this._handlePush({connection:e,stream:r});default:i.error("cannot handle unknown protocol %s",n)}}async _handleIdentify(t){let{connection:e,stream:r}=t;try{let t=new Uint8Array(0);this.peerId.pubKey&&(t=this.peerId.pubKey.bytes);const n=await this.peerStore.addressBook.getRawEnvelope(this.peerId),i=await this.peerStore.protoBook.get(this.peerId),o=m.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:t,listenAddrs:this._libp2p.multiaddrs.map((t=>t.bytes)),signedPeerRecord:n,observedAddr:e.remoteAddr.bytes,protocols:i}).finish();await a([o],s.encode(),r,h)}catch(n){i.error("could not respond to identify request",n)}}async _handlePush(t){let e,{connection:r,stream:n}=t;try{const[t]=await a([],n,s.decode(),u(1),p,c);e=m.Identify.decode(t)}catch(h){return i.error("received invalid message",h)}const o=r.remotePeer;try{const t=await y.openAndCertify(e.signedPeerRecord,g.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(t))return void await this.peerStore.protoBook.set(o,e.protocols)}catch(h){i("received invalid envelope, discard it and fallback to listenAddrs is available",h)}try{await this.peerStore.addressBook.set(o,e.listenAddrs.map((t=>new d(t))))}catch(h){i.error("received invalid addrs",h)}try{await this.peerStore.protoBook.set(o,e.protocols)}catch(h){i.error("received invalid protocols",h)}}static getCleanMultiaddr(t){if(t&&t.length>0)try{return new d(t)}catch(e){return null}return null}}const R={IDENTIFY:b,IDENTIFY_PUSH:v};I.multicodecs=R,I.Messsage=m,t.exports=I},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-identify"]||(n.roots["libp2p-identify"]={});a.Identify=function(){function t(t){if(this.listenAddrs=[],this.protocols=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.protocolVersion="",t.prototype.agentVersion="",t.prototype.publicKey=s.newBuffer([]),t.prototype.listenAddrs=s.emptyArray,t.prototype.observedAddr=s.newBuffer([]),t.prototype.protocols=s.emptyArray,t.prototype.signedPeerRecord=s.newBuffer([]),t.encode=function(t,e){if(e||(e=o.create()),null!=t.publicKey&&Object.hasOwnProperty.call(t,"publicKey")&&e.uint32(10).bytes(t.publicKey),null!=t.listenAddrs&&t.listenAddrs.length)for(var r=0;r<t.listenAddrs.length;++r)e.uint32(18).bytes(t.listenAddrs[r]);if(null!=t.protocols&&t.protocols.length)for(r=0;r<t.protocols.length;++r)e.uint32(26).string(t.protocols[r]);return null!=t.observedAddr&&Object.hasOwnProperty.call(t,"observedAddr")&&e.uint32(34).bytes(t.observedAddr),null!=t.protocolVersion&&Object.hasOwnProperty.call(t,"protocolVersion")&&e.uint32(42).string(t.protocolVersion),null!=t.agentVersion&&Object.hasOwnProperty.call(t,"agentVersion")&&e.uint32(50).string(t.agentVersion),null!=t.signedPeerRecord&&Object.hasOwnProperty.call(t,"signedPeerRecord")&&e.uint32(66).bytes(t.signedPeerRecord),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.Identify;t.pos<r;){var o=t.uint32();switch(o>>>3){case 5:n.protocolVersion=t.string();break;case 6:n.agentVersion=t.string();break;case 1:n.publicKey=t.bytes();break;case 2:n.listenAddrs&&n.listenAddrs.length||(n.listenAddrs=[]),n.listenAddrs.push(t.bytes());break;case 4:n.observedAddr=t.bytes();break;case 3:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(t.string());break;case 8:n.signedPeerRecord=t.bytes();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.Identify)return t;var e=new a.Identify;if(null!=t.protocolVersion&&(e.protocolVersion=String(t.protocolVersion)),null!=t.agentVersion&&(e.agentVersion=String(t.agentVersion)),null!=t.publicKey&&("string"===typeof t.publicKey?s.base64.decode(t.publicKey,e.publicKey=s.newBuffer(s.base64.length(t.publicKey)),0):t.publicKey.length&&(e.publicKey=t.publicKey)),t.listenAddrs){if(!Array.isArray(t.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");e.listenAddrs=[];for(var r=0;r<t.listenAddrs.length;++r)"string"===typeof t.listenAddrs[r]?s.base64.decode(t.listenAddrs[r],e.listenAddrs[r]=s.newBuffer(s.base64.length(t.listenAddrs[r])),0):t.listenAddrs[r].length&&(e.listenAddrs[r]=t.listenAddrs[r])}if(null!=t.observedAddr&&("string"===typeof t.observedAddr?s.base64.decode(t.observedAddr,e.observedAddr=s.newBuffer(s.base64.length(t.observedAddr)),0):t.observedAddr.length&&(e.observedAddr=t.observedAddr)),t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Identify.protocols: array expected");e.protocols=[];for(r=0;r<t.protocols.length;++r)e.protocols[r]=String(t.protocols[r])}return null!=t.signedPeerRecord&&("string"===typeof t.signedPeerRecord?s.base64.decode(t.signedPeerRecord,e.signedPeerRecord=s.newBuffer(s.base64.length(t.signedPeerRecord)),0):t.signedPeerRecord.length&&(e.signedPeerRecord=t.signedPeerRecord)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.listenAddrs=[],r.protocols=[]),e.defaults&&(e.bytes===String?r.publicKey="":(r.publicKey=[],e.bytes!==Array&&(r.publicKey=s.newBuffer(r.publicKey))),e.bytes===String?r.observedAddr="":(r.observedAddr=[],e.bytes!==Array&&(r.observedAddr=s.newBuffer(r.observedAddr))),r.protocolVersion="",r.agentVersion="",e.bytes===String?r.signedPeerRecord="":(r.signedPeerRecord=[],e.bytes!==Array&&(r.signedPeerRecord=s.newBuffer(r.signedPeerRecord)))),null!=t.publicKey&&t.hasOwnProperty("publicKey")&&(r.publicKey=e.bytes===String?s.base64.encode(t.publicKey,0,t.publicKey.length):e.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.listenAddrs&&t.listenAddrs.length){r.listenAddrs=[];for(var n=0;n<t.listenAddrs.length;++n)r.listenAddrs[n]=e.bytes===String?s.base64.encode(t.listenAddrs[n],0,t.listenAddrs[n].length):e.bytes===Array?Array.prototype.slice.call(t.listenAddrs[n]):t.listenAddrs[n]}if(t.protocols&&t.protocols.length){r.protocols=[];for(n=0;n<t.protocols.length;++n)r.protocols[n]=t.protocols[n]}return null!=t.observedAddr&&t.hasOwnProperty("observedAddr")&&(r.observedAddr=e.bytes===String?s.base64.encode(t.observedAddr,0,t.observedAddr.length):e.bytes===Array?Array.prototype.slice.call(t.observedAddr):t.observedAddr),null!=t.protocolVersion&&t.hasOwnProperty("protocolVersion")&&(r.protocolVersion=t.protocolVersion),null!=t.agentVersion&&t.hasOwnProperty("agentVersion")&&(r.agentVersion=t.agentVersion),null!=t.signedPeerRecord&&t.hasOwnProperty("signedPeerRecord")&&(r.signedPeerRecord=e.bytes===String?s.base64.encode(t.signedPeerRecord,0,t.signedPeerRecord.length):e.bytes===Array?Array.prototype.slice.call(t.signedPeerRecord):t.signedPeerRecord),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:fetch"),{error:n("libp2p:fetch:err")}),o=r(9),{codes:s}=r(27),a=r(40),{FetchRequest:c,FetchResponse:u}=r(642),h=r(87),{PROTOCOL:l}=r(643);class f{constructor(t){this._lookupFunctions=new Map,this._libp2p=t,this.handleMessage=this.handleMessage.bind(this)}async fetch(t,e){i("dialing %s to %s",this._protocol,t.toB58String?t.toB58String():t);const r=await this._libp2p.dial(t),{stream:n}=await r.newStream(f.PROTOCOL),l=h(n),d=new c({identifier:e});l.write(a.encode.single(c.encode(d).finish()));const p=u.decode((await a.decode.fromReader(l.reader).next()).value.slice());switch(p.status){case u.StatusCode.OK:return p.data;case u.StatusCode.NOT_FOUND:return null;case u.StatusCode.ERROR:{const t=(new TextDecoder).decode(p.data);throw o(new Error("Error in fetch protocol response: "+t),s.ERR_INVALID_PARAMETERS)}default:throw o(new Error("Unknown response status"),s.ERR_INVALID_MESSAGE)}}async handleMessage(t){const{stream:e}=t,r=h(e),n=c.decode((await a.decode.fromReader(r.reader).next()).value.slice());let i;const o=this._getLookupFunction(n.identifier);if(o){const t=await o(n.identifier);i=new u(t?{status:u.StatusCode.OK,data:t}:{status:u.StatusCode.NOT_FOUND})}else{const t=(new TextEncoder).encode("No lookup function registered for key: "+n.identifier);i=new u({status:u.StatusCode.ERROR,data:t})}r.write(a.encode.single(u.encode(i).finish()))}_getLookupFunction(t){for(const e of this._lookupFunctions.keys())if(t.startsWith(e))return this._lookupFunctions.get(e);return null}registerLookupFunction(t,e){if(this._lookupFunctions.has(t))throw o(new Error("Fetch protocol handler for key prefix '"+t+"' already registered"),s.ERR_KEY_ALREADY_EXISTS);this._lookupFunctions.set(t,e)}unregisterLookupFunction(t,e){if(null!=e){if(this._lookupFunctions.get(t)!==e)return}this._lookupFunctions.delete(t)}}f.PROTOCOL=l,t.exports=f},function(t,e,r){"use strict";var n=r(2),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-fetch"]||(n.roots["libp2p-fetch"]={});a.FetchRequest=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.identifier="",t.encode=function(t,e){return e||(e=o.create()),null!=t.identifier&&Object.hasOwnProperty.call(t,"identifier")&&e.uint32(10).string(t.identifier),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.FetchRequest;t.pos<r;){var o=t.uint32();if(o>>>3===1)n.identifier=t.string();else t.skipType(7&o)}return n},t.fromObject=function(t){if(t instanceof a.FetchRequest)return t;var e=new a.FetchRequest;return null!=t.identifier&&(e.identifier=String(t.identifier)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.identifier=""),null!=t.identifier&&t.hasOwnProperty("identifier")&&(r.identifier=t.identifier),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.FetchResponse=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.status=0,t.prototype.data=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.status&&Object.hasOwnProperty.call(t,"status")&&e.uint32(8).int32(t.status),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.FetchResponse;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.status=t.int32();break;case 2:n.data=t.bytes();break;default:t.skipType(7&o)}}return n},t.fromObject=function(t){if(t instanceof a.FetchResponse)return t;var e=new a.FetchResponse;switch(t.status){case"OK":case 0:e.status=0;break;case"NOT_FOUND":case 1:e.status=1;break;case"ERROR":case 2:e.status=2}return null!=t.data&&("string"===typeof t.data?s.base64.decode(t.data,e.data=s.newBuffer(s.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.status=e.enums===String?"OK":0,e.bytes===String?r.data="":(r.data=[],e.bytes!==Array&&(r.data=s.newBuffer(r.data)))),null!=t.status&&t.hasOwnProperty("status")&&(r.status=e.enums===String?a.FetchResponse.StatusCode[t.status]:t.status),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?s.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.StatusCode=function(){var t={},e=Object.create(t);return e[t[0]="OK"]=0,e[t[1]="NOT_FOUND"]=1,e[t[2]="ERROR"]=2,e}(),t}(),t.exports=a},function(t,e,r){"use strict";t.exports={PROTOCOL:"/libp2p/fetch/0.0.1"}},function(t,e,r){"use strict";t.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}},function(t,e,r){"use strict";const n=r(325),i=r(5),{promisify:o}=r(646),{Multiaddr:s}=r(11),a=Object.assign(i("libp2p:nat"),{error:i("libp2p:nat:err")}),{isBrowser:c}=r(647),u=r(648),h=r(307),l=r(305),f=r(9),{codes:{ERR_INVALID_PARAMETERS:d}}=r(27),p=r(652),m=7200;function y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65535;return Math.floor(Math.random()*(e-t+1)+t)}t.exports=class{constructor(t){let{peerId:e,addressManager:r,transportManager:n,...i}=t;if(this._peerId=e,this._addressManager=r,this._transportManager=n,this._enabled=i.enabled,this._externalIp=i.externalIp,this._options={description:i.description||"".concat(l.name,"@").concat(l.version," ").concat(this._peerId),ttl:i.ttl||m,autoUpdate:i.keepAlive||!0,gateway:i.gateway,enablePMP:Boolean(i.pmp&&i.pmp.enabled)},this._options.ttl<m)throw f(new Error("NatManager ttl should be at least ".concat(m," seconds")),d)}start(){!c&&this._enabled&&this._start().catch((t=>{a.error(t)}))}async _start(){const t=this._transportManager.getAddrs();for(const e of t){const{family:t,host:r,port:n,transport:i}=e.toOptions();if(!e.isThinWaistAddress()||"tcp"!==i)continue;if(p(e))continue;if(4!==t)continue;const o=this._getClient(),c=this._externalIp||await o.externalIp();if(h(c))throw new Error("".concat(c," is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT"));const u=y();a("opening uPnP connection from ".concat(c,":").concat(u," to ").concat(r,":").concat(n)),await o.map({publicPort:u,privatePort:n,protocol:i.toUpperCase()}),this._addressManager.addObservedAddr(s.fromNodeAddress({family:4,address:c,port:u},i))}}_getClient(){if(this._client)return this._client;const t=new n(this._options),e=o(t.map.bind(t)),r=o(t.destroy.bind(t)),i=o(t.externalIp.bind(t));return this._client={map:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return u((()=>e(...r)),{onFailedAttempt:a.error,unref:!0})},destroy:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return u((()=>r(...e)),{onFailedAttempt:a.error,unref:!0})},externalIp:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return u((()=>i(...e)),{onFailedAttempt:a.error,unref:!0})}},this._client}async stop(){if(!c&&this._client)try{await this._client.destroy(),this._client=null}catch(t){a.error(t)}}}},function(t,e,r){"use strict";r.r(e),r.d(e,"promisify",(function(){return n}));function n(t){if("function"!=typeof t)throw new TypeError("Argument to promisify must be a function");var e=t["__ES6-PROMISIFY--CUSTOM-ARGUMENTS__"],r=n.Promise||Promise;if("function"!=typeof r)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return new r(((r,n)=>{i.push((function(t){if(t)return n(t);for(var i=arguments.length,o=Array(1<i?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(1===o.length||!e)return r(o[0]);var a={};o.forEach(((t,r)=>{var n=e[r];n&&(a[n]=t)})),r(a)})),t.apply(this,i)}))}}n.argumentNames="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__",n.Promise=void 0},function(t,e,r){"use strict";const n=r(326),i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,o=n(),s=i&&!o,a=o&&!i,c=o&&i,u="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!o,h="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,l="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&"test"===globalThis.process.env.NODE_ENV,f="undefined"!==typeof navigator&&"ReactNative"===navigator.product;t.exports={isTest:l,isElectron:o,isElectronMain:a,isElectronRenderer:c,isNode:u,isBrowser:s,isWebWorker:h,isEnvWithDom:i,isReactNative:f}},function(t,e,r){"use strict";const n=r(649),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,({message:t}=t)):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const s=(t,e)=>new Promise(((r,s)=>{e={onFailedAttempt:()=>{},retries:10,...e};const a=n.operation(e);a.attempt((async n=>{try{r(await t(n))}catch(u){if(!(u instanceof Error))return void s(new TypeError('Non-error was thrown: "'.concat(u,'". You should only throw errors.')));if(u instanceof o)a.stop(),s(u.originalError);else if(u instanceof TypeError&&(c=u.message,!i.includes(c)))a.stop(),s(u);else{((t,e,r)=>{const n=r.retries-(e-1);t.attemptNumber=e,t.retriesLeft=n})(u,n,e);try{await e.onFailedAttempt(u)}catch(u){return void s(u)}a.retry(u)||s(a.mainError())}}var c}))}));t.exports=s,t.exports.default=s,t.exports.AbortError=o},function(t,e,r){t.exports=r(650)},function(t,e,r){var n=r(651);e.operation=function(t){var r=e.timeouts(t);return new n(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort((function(t,e){return t-e})),n},e.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout)},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],t)"function"===typeof t[i]&&n.push(i);for(var o=0;o<n.length;o++){var s=n[o],a=t[s];t[s]=function(n){var i=e.operation(r),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(t){i.retry(t)||(t&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){n.apply(t,o)}))}.bind(t,a),t[s].options=r}}},function(t,e){function r(t,e){"boolean"===typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},r.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,s=(t[o]||0)+1;t[o]=s,s>=r&&(e=i,r=s)}return e}},function(t,e,r){"use strict";const n=r(653);t.exports=function(t){const{address:e}=t.nodeAddress();return n(e)}},function(t,e,r){"use strict";t.exports=function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}},function(t,e,r){"use strict";const n=r(31),i=r(99),o=r(5)("libp2p:mplex"),s=r(66),a=r(655),c=r(327),{MessageTypes:u,MessageTypeNames:h}=r(328),l=r(658);class f{constructor(t){t="function"===typeof(t=t||{})?{onStream:t}:t,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=t,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=t.onStream,this.onStreamEnd=t.onStreamEnd}get streams(){const t=[];return this._streams.initiators.forEach((e=>{t.push(e)})),this._streams.receivers.forEach((e=>{t.push(e)})),t}newStream(t){const e=this._streamId++;t=null==t?e.toString():String(t);const r=this._streams.initiators;return this._newStream({id:e,name:t,type:"initiator",registry:r})}_newReceiverStream(t){let{id:e,name:r}=t;const n=this._streams.receivers;return this._newStream({id:e,name:r,type:"receiver",registry:n})}_newStream(t){let{id:e,name:r,type:n,registry:i}=t;if(i.has(e))throw new Error("".concat(n," stream ").concat(e," already exists!"));o("new %s stream %s %s",n,e,r);const s=l({id:e,name:r,send:t=>(o.enabled&&o("%s stream %s %s send",n,e,r,{...t,type:h[t.type],data:t.data&&t.data.slice()}),this.source.push(t)),type:n,onEnd:()=>{o("%s stream %s %s ended",n,e,r),i.delete(e),this.onStreamEnd&&this.onStreamEnd(s)},maxMsgSize:this._options.maxMsgSize});return i.set(e,s),s}_createSink(){return async t=>{this._options.signal&&(t=s(t,this._options.signal));try{await n(t,a.decode,c(this._options.maxMsgSize),(async t=>{for await(const e of t)for(const t of e)this._handleIncoming(t)}))}catch(e){return o("error in sink",e),this.source.end(e)}this.source.end()}}_createSource(){const t=i({onEnd:t=>{const{initiators:e,receivers:r}=this._streams;for(const n of e.values())n.abort(t);for(const n of r.values())n.abort(t)},writev:!0});return Object.assign(a.encode(t),{push:t.push,end:t.end,return:t.return})}_handleIncoming(t){let{id:e,type:r,data:n}=t;if(o.enabled&&o("incoming message",{id:e,type:h[r],data:n.slice()}),r===u.NEW_STREAM&&this.onStream){const t=this._newReceiverStream({id:e,name:n.toString()});return this.onStream(t)}const i=(1&r?this._streams.initiators:this._streams.receivers).get(e);if(!i)return o("missing stream %s",e);switch(r){case u.MESSAGE_INITIATOR:case u.MESSAGE_RECEIVER:i.source.push(n);break;case u.CLOSE_INITIATOR:case u.CLOSE_RECEIVER:i.close();break;case u.RESET_INITIATOR:case u.RESET_RECEIVER:i.reset();break;default:o("unknown message type %s",r)}}}f.multicodec="/mplex/6.7.0",t.exports=f},function(t,e,r){"use strict";e.encode=r(656),e.decode=r(657)},function(t,e,r){"use strict";const n=r(58),i=r(54),o=10240;const s=new class{constructor(){this._pool=new Uint8Array(o),this._poolOffset=0}write(t){const e=this._pool;let r=this._poolOffset;n.encode(t.id<<3|t.type,e,r),r+=n.encode.bytes,n.encode(t.data?t.data.length:0,e,r),r+=n.encode.bytes;const i=e.subarray(this._poolOffset,r);return o-r<100?(this._pool=new Uint8Array(o),this._poolOffset=0):this._poolOffset=r,t.data?[i,t.data]:i}};t.exports=t=>async function*(){for await(const e of t)Array.isArray(e)?yield new i(e.map((t=>s.write(t)))):yield new i(s.write(e))}()},function(t,e,r){"use strict";const n=r(58),i=r(54);t.exports=t=>async function*(){const e=new o;for await(const r of t){const t=e.write(r);t.length&&(yield t)}}();class o{constructor(){this._buffer=new i,this._bufferProxy=new Proxy({},{get:(t,e)=>"l"===e[0]?this._buffer[e]:this._buffer.get(parseInt(e))}),this._headerInfo=null}write(t){if(!t||!t.length)return[];this._buffer.append(t);const e=[];for(;this._buffer.length;){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch(r){break}const{id:t,type:n,length:i,offset:o}=this._headerInfo;if(this._buffer.length-o<i)break;e.push({id:t,type:n,data:this._buffer.shallowSlice(o,o+i)}),this._buffer.consume(o+i),this._headerInfo=null}return e}_decodeHeader(t){const e=n.decode(t);let r=n.decode.bytes;const i=n.decode(t,r);return r+=n.decode.bytes,{id:e>>3,type:7&e,offset:r,length:i}}}},function(t,e,r){"use strict";const n=r(66),i=r(5)("libp2p:mplex:stream"),o=r(99),s=r(54),a=r(9),{MAX_MSG_SIZE:c}=r(327),{InitiatorMessageTypes:u,ReceiverMessageTypes:h}=r(328),l="ERR_MPLEX_STREAM_RESET";t.exports=t=>{let{id:e,name:r,send:f,onEnd:d=(()=>{}),type:p="initiator",maxMsgSize:m=c}=t;const y=new AbortController,g=new AbortController,b="initiator"===p?u:h,v="initiator"===p?"i".concat(e):"r".concat(e);r=String(null==r?e:r);let w,_=!1,S=!1;const E=t=>{S||(S=!0,i("%s stream %s sink end",p,r,t),t&&!w&&(w=t),_&&(A.timeline.close=Date.now(),d(w)))},A={close:()=>A.source.end(),abort:t=>{i("%s stream %s abort",p,r,t),A.source.end(t),y.abort(),E(t)},reset:()=>{const t=a(new Error("stream reset"),l);g.abort(),A.source.end(t),E(t)},sink:async t=>{t=n(t,[{signal:y.signal,options:{abortMessage:"stream aborted",abortCode:"ERR_MPLEX_STREAM_ABORT"}},{signal:g.signal,options:{abortMessage:"stream reset",abortCode:l}}]),"initiator"===p&&f({id:e,type:b.NEW_STREAM,data:r});try{for await(let r of t)for(;r.length;){if(r.length<=m){f({id:e,type:b.MESSAGE,data:r});break}r=s.isBufferList(r)?r:new s(r),f({id:e,type:b.MESSAGE,data:r.shallowSlice(0,m)}),r.consume(m)}}catch(o){return o.code===l?i("%s stream %s reset",p,r):(i("%s stream %s error",p,r,o),f({id:e,type:b.RESET})),A.source.end(o),E(o)}f({id:e,type:b.CLOSE}),E()},source:o((t=>{_||(_=!0,i("%s stream %s source end",p,r,t),t&&!w&&(w=t),S&&(A.timeline.close=Date.now(),d(w)))})),timeline:{open:Date.now(),close:null},id:v};return A}},function(t,e,r){"use strict";var n=r(660),i=r(661),o=r(667);t.exports=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof window?{}:window.location,s=o(t,r),a=new n(s,e.websocket),c=i(a,e);return c.remoteAddress=s,c.close=()=>new Promise(((t,e)=>{a.addEventListener("close",t),a.close()})),c.destroy=()=>{a.terminate?a.terminate():a.close()},c.socket=a,c},t.exports.connect=t.exports},function(t,e,r){t.exports="undefined"===typeof WebSocket?r(329):WebSocket},function(t,e,r){const n=r(662),i=r(665);t.exports=(t,e)=>{(e=e||{}).binaryType?t.binaryType=e.binaryType:e.binary&&(t.binaryType="arraybuffer");const r={sink:i(t,e),source:n(t,e),connected:()=>r.source.connected()};return r}},function(t,e,r){const{Buffer:n}=r(19),{EventIterator:i}=r(663);t.exports=t=>{const e=t.removeEventListener||t.removeListener,r=async function*(){const r=new i((r=>{let{push:n,stop:i,fail:o}=r;return t.addEventListener("message",n),t.addEventListener("error",o),t.addEventListener("close",i),()=>{e.call(t,"message",n),e.call(t,"error",o),e.call(t,"close",i)}}),{highWaterMark:1/0});for await(const{data:t}of r)yield(o=t,o instanceof ArrayBuffer||null!=o&&null!=o.constructor&&"ArrayBuffer"===o.constructor.name&&"number"===typeof o.byteLength?n.from(t):t);var o}();let o,s=1===t.readyState;return t.addEventListener("open",(()=>{s=!0,o=null})),t.addEventListener("close",(()=>{s=!1,o=null})),t.addEventListener("error",(t=>{s||(o=t)})),r.connected=()=>new Promise(((r,n)=>{if(s)return r();if(o)return n(o);const i=r=>{e.call(t,"open",a),e.call(t,"error",c),r()},a=()=>i(r),c=t=>i((()=>n(t)));t.addEventListener("open",a),t.addEventListener("error",c)})),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(664);e.EventIterator=n.EventIterator,e.subscribe=function(t,e,r){return new n.EventIterator((r=>{let{push:n}=r;return this.addEventListener(t,n,e),()=>this.removeEventListener(t,n,e)}),r)},e.default=n.EventIterator},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(t){if(this.isStopped)return;const e={value:t,done:!1};if(this.pullQueue.length){const t=this.pullQueue.shift();t&&t.resolve(e)}else this.pushQueue.push(Promise.resolve(e)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn("EventIterator queue reached ".concat(this.pushQueue.length," items")))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const t of this.pullQueue)t.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(t){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const e of this.pullQueue)e.reject(t);this.pullQueue.length=0}else{const e=Promise.reject(t);e.catch((()=>{})),this.pushQueue.push(e)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:t=>{const e=this.pushQueue.shift();return e?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),e):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((t,e)=>{this.pullQueue.push({resolve:t,reject:e})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class i{constructor(t){let{highWaterMark:e=100,lowWaterMark:r=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new n;i.highWaterMark=e,i.lowWaterMark=r,i.removeCallback=t({push:t=>i.push(t),stop:()=>i.stop(),fail:t=>i.fail(t),on:(t,e)=>{i.eventHandlers[t]=e}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}}e.EventIterator=i,e.default=i},function(t,e,r){const n=r(666);t.exports=(t,e)=>((e=e||{}).closeOnEnd=!1!==e.closeOnEnd,async r=>{for await(const e of r){try{await n(t)}catch(i){if("socket closed"===i.message)break;throw i}t.send(e)}if(e.closeOnEnd&&t.readyState<=1)return new Promise(((e,r)=>{t.addEventListener("close",(t=>{if(t.wasClean||1006===t.code)e();else{const e=Object.assign(new Error("ws error"),{event:t});r(e)}})),setTimeout((()=>t.close()))}))})},function(t,e){t.exports=async t=>{if(t.readyState>=2)throw new Error("socket closed");if(1!==t.readyState)return new Promise(((e,r)=>{const n=t&&(t.removeEventListener||t.removeListener);function i(){"function"===typeof n&&(n.call(t,"open",o),n.call(t,"error",s))}function o(){i(),e()}function s(t){i(),r(t)}t.addEventListener("open",o),t.addEventListener("error",s)}))}},function(t,e,r){const{relative:n}=r(668),i={http:"ws",https:"wss"};t.exports=(t,e)=>n(t,e,i,"ws")},function(t,e,r){"use strict";const{URLWithLegacySupport:n,format:i,URLSearchParams:o,defaultBase:s}=r(330),a=r(669);t.exports={URL:n,URLSearchParams:o,format:i,relative:a,defaultBase:s}},function(t,e,r){"use strict";const{URLWithLegacySupport:n,format:i}=r(330);t.exports=function(t){let e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,a=r.protocol?r.protocol.replace(":",""):"http";a=(o[a]||s||a)+":";try{e=new n(t)}catch(u){e={}}const c=Object.assign({},r,{protocol:a||e.protocol,host:r.host||e.host});return new n(t,i(c)).toString()}},function(t,e,r){const{Multiaddr:n}=r(11),i=(t,e)=>e,o={ip4:i,ip6:(t,e,r,n)=>1===n.length&&"ip6"===n[0].protocol?e:"[".concat(e,"]"),tcp:(t,e,r,n,i)=>n.some((t=>["http","https","ws","wss"].includes(t.protocol)))?"".concat(t,":").concat(e):((t,e,r,n)=>{if(n&&!1===n.assumeHttp)return"tcp://".concat(t,":").concat(e);let i="tcp",o=":".concat(e);return"tcp"===r[r.length-1].protocol&&(i="443"===e?"https":"http",o="443"===e||"80"===e?"":o),"".concat(i,"://").concat(t).concat(o)})(t,e,n,i),udp:(t,e)=>"udp://".concat(t,":").concat(e),dnsaddr:i,dns4:i,dns6:i,ipfs:(t,e)=>"".concat(t,"/ipfs/").concat(e),p2p:(t,e)=>"".concat(t,"/p2p/").concat(e),http:t=>"http://".concat(t),https:t=>"https://".concat(t),ws:t=>"ws://".concat(t),wss:t=>"wss://".concat(t),"p2p-websocket-star":t=>"".concat(t,"/p2p-websocket-star"),"p2p-webrtc-star":t=>"".concat(t,"/p2p-webrtc-star"),"p2p-webrtc-direct":t=>"".concat(t,"/p2p-webrtc-direct")};t.exports=(t,e)=>{const r=new n(t),i=t.toString().split("/").slice(1);return r.tuples().map((t=>({protocol:i.shift(),content:t[1]?i.shift():null}))).reduce(((t,r,n,i)=>{const s=o[r.protocol];if(!s)throw new Error("Unsupported protocol ".concat(r.protocol));return s(t,r.content,n,i,e)}),"")}},function(t,e,r){"use strict";(function(e){const n=r(326),i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,o=n(),s=i&&!o,a=o&&!i,c=o&&i,u="undefined"!==typeof e&&"undefined"!==typeof e.release&&"node"===e.release.name&&!o,h="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,l="undefined"!==typeof e&&!1,f="undefined"!==typeof navigator&&"ReactNative"===navigator.product;t.exports={isTest:l,isElectron:o,isElectronMain:a,isElectronRenderer:c,isNode:u,isBrowser:s,isWebWorker:h,isEnvWithDom:i,isReactNative:f}}).call(this,r(22))},function(t,e,r){"use strict";t.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}},function(t,e,r){"use strict";const n=r(66),{CLOSE_TIMEOUT:i}=r(331),o=r(674),s=r(675),a=r(5),c=a("libp2p:websockets:socket");c.error=a("libp2p:websockets:socket:error"),t.exports=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={async sink(r){e.signal&&(r=n(r,e.signal));try{await t.sink(async function*(){for await(const t of r)yield t instanceof Uint8Array?t:t.slice()}())}catch(i){"aborted"!==i.type&&c.error(i)}},source:e.signal?n(t.source,e.signal):t.source,conn:t,localAddr:e.localAddr||(t.localAddress&&t.localPort?o(t.localAddress,t.localPort):void 0),remoteAddr:e.remoteAddr||o(t.remoteAddress,t.remotePort),timeline:{open:Date.now()},async close(){const e=Date.now();try{await s(t.close(),i)}catch(n){const{host:i,port:o}=r.remoteAddr.toOptions();c("timeout closing stream to %s:%s after %dms, destroying it manually",i,o,Date.now()-e),t.destroy()}finally{r.timeline.close=Date.now()}}};return t.socket.once&&t.socket.once("close",(()=>{r.timeline.close||(r.timeline.close=Date.now())})),r}},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p:ip-port-to-multiaddr"),{error:n("libp2p:ip-port-to-multiaddr:err")}),{Multiaddr:o}=r(11),s=r(9),{Address4:a,Address6:c}=r(710),u={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};t.exports=function(t,e){if("string"!==typeof t)throw s(new Error("invalid ip provided: ".concat(t)),u.ERR_INVALID_IP_PARAMETER);if("string"===typeof e&&(e=parseInt(e)),isNaN(e))throw s(new Error("invalid port provided: ".concat(e)),u.ERR_INVALID_PORT_PARAMETER);try{return new a(t),new o("/ip4/".concat(t,"/tcp/").concat(e))}catch{}try{const r=new c(t);return r.is4()?new o("/ip4/".concat(r.to4().correctForm(),"/tcp/").concat(e)):new o("/ip6/".concat(t,"/tcp/").concat(e))}catch(r){const n="invalid ip:port for creating a multiaddr: ".concat(t,":").concat(e);throw i.error(n),s(new Error(n),u.ERR_INVALID_IP)}},t.exports.Errors=u},function(t,e,r){"use strict";class n extends Error{constructor(t){super(t),this.name="TimeoutError"}}const i=(t,e,r,i)=>{let o;const s=new Promise(((s,a)=>{if("number"!==typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");e!==1/0?(i={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...i},o=i.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof r){try{s(r())}catch(c){a(c)}return}const i="string"===typeof r?r:"Promise timed out after ".concat(e," milliseconds"),o=r instanceof Error?r:new n(i);"function"===typeof t.cancel&&t.cancel(),a(o)}),e),(async()=>{try{s(await t)}catch(e){a(e)}finally{i.customTimers.clearTimeout.call(void 0,o)}})()):s(t)}));return s.clear=()=>{clearTimeout(o),o=void 0},s};t.exports=i,t.exports.default=i,t.exports.TimeoutError=n},function(t,e,r){"use strict";const n=r(5),{EventEmitter:i}=r(33),o=r(9),{pipe:s}=r(31),{default:a}=r(323),c=r(677),{codes:u}=r(186),{RPC:h}=r(332),l=r(678),{SignaturePolicy:f}=r(194),d=r(333),{signMessage:p,verifySignature:m}=r(679);class y extends i{constructor(t){let{debugName:e,multicodecs:r,libp2p:i,globalSignaturePolicy:s=f.StrictSign,canRelayMessage:c=!1,emitSelf:h=!1,messageProcessingConcurrency:l=10}=t;if("string"!==typeof e)throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");if(super(),this.log=Object.assign(n(e),{err:n("".concat(e,":error"))}),this.multicodecs=d.ensureArray(r),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!f[s])throw o(new Error("Invalid global signature policy"),u.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=s,this.canRelayMessage=c,this.emitSelf=h,this.topicValidators=new Map,this.queue=new a({concurrency:l}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);const t=new c({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=await this.registrar.register(t),this.log("started"),this.started=!0}async stop(){this.started&&(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach((t=>t.close())),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream(t){let{protocol:e,stream:r,connection:n}=t;const i=n.remotePeer,o=i.toB58String(),s=this._addPeer(i,e),a=s.attachInboundStream(r);this._processMessages(o,a,s)}async _onPeerConnected(t,e){const r=t.toB58String();this.log("connected",r);try{const{stream:r,protocol:n}=await e.newStream(this.multicodecs),i=this._addPeer(t,n);await i.attachOutboundStream(r)}catch(n){this.log.err(n)}this._sendSubscriptions(r,Array.from(this.subscriptions),!0)}_onPeerDisconnected(t,e){const r=t.toB58String();this.log("connection ended",r,e?e.message:""),this._removePeer(t)}_addPeer(t,e){const r=t.toB58String(),n=this.peers.get(r);if(n)return n;this.log("new peer",r);const i=new l({id:t,protocol:e});return this.peers.set(r,i),i.once("close",(()=>this._removePeer(t))),i}_removePeer(t){if(!t)return;const e=t.toB58String(),r=this.peers.get(e);if(r){r.removeAllListeners(),r.close(),this.log("delete peer",e),this.peers.delete(e);for(const t of this.topics.values())t.delete(e);return r}}async _processMessages(t,e,r){try{await s(e,(async e=>{for await(const n of e){const e=n instanceof Uint8Array?n:n.slice(),i=this._decodeRpc(e);(async()=>{try{await this._processRpc(t,r,i)}catch(e){this.log.err(e)}})()}}))}catch(n){this._onPeerDisconnected(r.id,n)}}async _processRpc(t,e,r){this.log("rpc from",t);const n=r.subscriptions,i=r.msgs;return n.length&&(n.forEach((e=>{this._processRpcSubOpt(t,e)})),this.emit("pubsub:subscription-change",e.id,n)),this._acceptFrom(t)?(i.length&&this.queue.addAll(i.map((e=>async()=>{if(this.canRelayMessage||e.topicIDs&&e.topicIDs.some((t=>this.subscriptions.has(t))))try{const r=d.normalizeInRpcMessage(e,t);await this._processRpcMessage(r)}catch(r){this.log.err(r)}else this.log("received message we didn't subscribe to. Dropping.")}))),!0):(this.log("received message from unacceptable peer %s",t),!1)}_processRpcSubOpt(t,e){const r=e.topicID;if(!r)return;let n=this.topics.get(r);n||(n=new Set,this.topics.set(r,n)),e.subscribe?n.add(t):n.delete(t)}async _processRpcMessage(t){if(this.peerId.toB58String()!==t.from||this.emitSelf){try{await this.validate(t)}catch(e){return void this.log("Message is invalid, dropping it. %O",e)}return this._emitMessage(t),this._publish(d.normalizeOutRpcMessage(t))}}_emitMessage(t){t.topicIDs.forEach((e=>{this.subscriptions.has(e)&&this.emit(e,t)}))}getMsgId(t){const e=this.globalSignaturePolicy;switch(e){case f.StrictSign:return d.msgId(t.from,t.seqno);case f.StrictNoSign:return d.noSignMsgId(t.data);default:throw o(new Error("Cannot get message id: unhandled signature policy: "+e),u.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(t){return!0}_decodeRpc(t){return h.decode(t)}_encodeRpc(t){return h.encode(t).finish()}_sendRpc(t,e){const r=this.peers.get(t);if(r&&r.isWritable)r.write(this._encodeRpc(e));else{const e="Cannot send RPC to ".concat(t," as there is no open stream to it available");this.log.err(e)}}_sendSubscriptions(t,e,r){return this._sendRpc(t,{subscriptions:e.map((t=>({topicID:t,subscribe:r})))})}async validate(t){const e=this.globalSignaturePolicy;switch(e){case f.StrictNoSign:if(t.from)throw o(new Error("StrictNoSigning: from should not be present"),u.ERR_UNEXPECTED_FROM);if(t.signature)throw o(new Error("StrictNoSigning: signature should not be present"),u.ERR_UNEXPECTED_SIGNATURE);if(t.key)throw o(new Error("StrictNoSigning: key should not be present"),u.ERR_UNEXPECTED_KEY);if(t.seqno)throw o(new Error("StrictNoSigning: seqno should not be present"),u.ERR_UNEXPECTED_SEQNO);break;case f.StrictSign:if(!t.signature)throw o(new Error("StrictSigning: Signing required and no signature was present"),u.ERR_MISSING_SIGNATURE);if(!t.seqno)throw o(new Error("StrictSigning: Signing required and no seqno was present"),u.ERR_MISSING_SEQNO);if(!await m(t))throw o(new Error("StrictSigning: Invalid message signature"),u.ERR_INVALID_SIGNATURE);break;default:throw o(new Error("Cannot validate message: unhandled signature policy: "+e),u.ERR_UNHANDLED_SIGNATURE_POLICY)}for(const r of t.topicIDs){const e=this.topicValidators.get(r);e&&await e(r,t)}}_buildMessage(t){const e=this.globalSignaturePolicy;switch(e){case f.StrictSign:return t.from=this.peerId.toB58String(),t.seqno=d.randomSeqno(),p(this.peerId,t);case f.StrictNoSign:return Promise.resolve(t);default:throw o(new Error("Cannot build message: unhandled signature policy: "+e),u.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(t){if(!this.started)throw o(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!t||"string"!==typeof t)throw o(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");const e=this.topics.get(t);return e?Array.from(e):[]}async publish(t,e){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",t,e);const r={receivedFrom:this.peerId.toB58String(),data:e,topicIDs:[t]},n=await this._buildMessage(r),i=d.normalizeInRpcMessage(n);this.emitSelf&&this._emitMessage(i),await this._publish(i)}_publish(t){throw o(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(t){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(t)||(this.subscriptions.add(t),this.peers.forEach(((e,r)=>this._sendSubscriptions(r,[t],!0))))}unsubscribe(t){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(t)&&0===this.listenerCount(t)&&(this.subscriptions.delete(t),this.peers.forEach(((e,r)=>this._sendSubscriptions(r,[t],!1))))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}}y.utils=d,y.SignaturePolicy=f,t.exports=y},function(t,e,r){"use strict";const n=r(324),i=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),o=r(5),s=Object.assign(o("libp2p:topology:multicodec-topology"),{error:o("libp2p:topology:multicodec-topology:error")});class a extends n{constructor(t){let{min:e,max:r,multicodecs:n,handlers:i}=t;if(super({min:e,max:r,handlers:i}),!n)throw new Error("one or more multicodec should be provided");if(!i)throw new Error("the handlers should be provided");if("function"!==typeof i.onConnect)throw new Error("the 'onConnect' handler must be provided");if("function"!==typeof i.onDisconnect)throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(n)?n:[n],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[i](){return!0}static isMulticodecTopology(t){return Boolean(t&&t[i])}async setRegistrar(t){this._registrar=t,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),await this._updatePeers(this._registrar.peerStore.getPeers())}async _updatePeers(t){for await(const{id:e,protocols:r}of t)if(this.multicodecs.filter((t=>r.includes(t))).length){this.peers.add(e.toB58String());const t=this._registrar.getConnection(e);t&&this._onConnect(e,t)}else this.peers.delete(e.toB58String())}async _onProtocolChange(t){let{peerId:e,protocols:r}=t;try{const t=this.peers.has(e.toB58String()),n=r.filter((t=>this.multicodecs.includes(t)));t&&0===n.length&&this._onDisconnect(e);for(const i of r)if(this.multicodecs.includes(i)){const t=await this._registrar.peerStore.get(e);return void await this._updatePeers([t])}}catch(n){s.error(n)}}async _onPeerConnect(t){try{const e=t.remotePeer,r=await this._registrar.peerStore.protoBook.get(e);if(!r)return;this.multicodecs.find((t=>r.includes(t)))&&(this.peers.add(e.toB58String()),this._onConnect(e,t))}catch(e){s.error(e)}}}t.exports=a},function(t,e,r){"use strict";const n=r(5),i=Object.assign(n("libp2p-pubsub:peer-streams"),{error:n("libp2p-pubsub:peer-streams:err")}),{EventEmitter:o}=r(33),s=r(40),a=r(99),{pipe:c}=r(31),{source:u}=r(66);t.exports=class extends o{constructor(t){let{id:e,protocol:r}=t;super(),this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new AbortController,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(t){if(!this.outboundStream){const t=this.id.toB58String();throw new Error("No writable connection to "+t)}this.outboundStream.push(t)}attachInboundStream(t){return this._rawInboundStream=t,this.inboundStream=u(c(this._rawInboundStream,s.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(t){const e=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=t,this.outboundStream=a({onEnd:t=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,t&&this.emit("close")}}),c(this.outboundStream,s.encode(),this._rawOutboundStream).catch((t=>{i.error(t)})),e||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}}},function(t,e,r){"use strict";const n=r(23),{RPC:i}=r(332),{concat:o}=r(25),{fromString:s}=r(24),a=s("libp2p-pubsub:"),{normalizeOutRpcMessage:c}=r(333);async function u(t){if(!t.from)throw new Error("Could not get the public key from the originator id");const e=n.createFromB58String(t.from);if(t.key){const r=await n.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}t.exports={messagePublicKey:u,signMessage:async function(t,e){const r=o([a,i.Message.encode(c(e)).finish()]),n=await t.privKey.sign(r);return{...e,signature:n,key:t.pubKey.bytes}},SignPrefix:a,verifySignature:async function(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");const e=o([a,i.Message.encode({...t,from:n.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await u(t)).verify(e,t.signature)}}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageCache=void 0;const i=r(42);e.MessageCache=class{constructor(t,e){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let r=0;r<e;r++)this.history[r]=[];this.gossip=t}put(t,e){return n(this,void 0,void 0,(function*(){this.msgs.set(e,t);const r=i.messageIdFromString(e);this.history[0].push({msgId:r,topics:t.topicIDs})}))}get(t){return this.msgs.get(i.messageIdToString(t))}getForPeer(t,e){const r=this.msgs.get(t);if(!r)return[void 0,0];let n=this.peertx.get(t);n||(n=new Map,this.peertx.set(t,n));const i=(n.get(e)||0)+1;return n.set(e,i),[r,i]}getGossipIDs(t){const e=[];for(let r=0;r<this.gossip;r++)this.history[r].forEach((r=>{for(const n of r.topics)if(n===t){e.push(r.msgId);break}}));return e}shift(){this.history[this.history.length-1].forEach((t=>{const e=i.messageIdToString(t.msgId);this.msgs.delete(e),this.peertx.delete(e)})),this.history.pop(),this.history.unshift([])}}},function(t,e,r){var n,i,o;i=[r(2)],void 0===(o="function"===typeof(n=function(t){"use strict";var e=t.Reader,r=t.Writer,n=t.util,i=t.roots.default||(t.roots.default={});return i.RPC=function(){function o(t){if(this.subscriptions=[],this.msgs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.subscriptions=n.emptyArray,o.prototype.msgs=n.emptyArray,o.prototype.control=null,Object.defineProperty(o.prototype,"_control",{get:n.oneOfGetter(s=["control"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.subscriptions&&t.subscriptions.length)for(var n=0;n<t.subscriptions.length;++n)i.RPC.SubOpts.encode(t.subscriptions[n],e.uint32(10).fork()).ldelim();if(null!=t.msgs&&t.msgs.length)for(n=0;n<t.msgs.length;++n)i.RPC.Message.encode(t.msgs[n],e.uint32(18).fork()).ldelim();return null!=t.control&&Object.hasOwnProperty.call(t,"control")&&i.RPC.ControlMessage.encode(t.control,e.uint32(26).fork()).ldelim(),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.subscriptions&&o.subscriptions.length||(o.subscriptions=[]),o.subscriptions.push(i.RPC.SubOpts.decode(t,t.uint32()));break;case 2:o.msgs&&o.msgs.length||(o.msgs=[]),o.msgs.push(i.RPC.Message.decode(t,t.uint32()));break;case 3:o.control=i.RPC.ControlMessage.decode(t,t.uint32());break;default:t.skipType(7&s)}}return o},o.fromObject=function(t){if(t instanceof i.RPC)return t;var e=new i.RPC;if(t.subscriptions){if(!Array.isArray(t.subscriptions))throw TypeError(".RPC.subscriptions: array expected");e.subscriptions=[];for(var r=0;r<t.subscriptions.length;++r){if("object"!==typeof t.subscriptions[r])throw TypeError(".RPC.subscriptions: object expected");e.subscriptions[r]=i.RPC.SubOpts.fromObject(t.subscriptions[r])}}if(t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".RPC.msgs: array expected");for(e.msgs=[],r=0;r<t.msgs.length;++r){if("object"!==typeof t.msgs[r])throw TypeError(".RPC.msgs: object expected");e.msgs[r]=i.RPC.Message.fromObject(t.msgs[r])}}if(null!=t.control){if("object"!==typeof t.control)throw TypeError(".RPC.control: object expected");e.control=i.RPC.ControlMessage.fromObject(t.control)}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.subscriptions=[],r.msgs=[]),t.subscriptions&&t.subscriptions.length){r.subscriptions=[];for(var n=0;n<t.subscriptions.length;++n)r.subscriptions[n]=i.RPC.SubOpts.toObject(t.subscriptions[n],e)}if(t.msgs&&t.msgs.length)for(r.msgs=[],n=0;n<t.msgs.length;++n)r.msgs[n]=i.RPC.Message.toObject(t.msgs[n],e);return null!=t.control&&t.hasOwnProperty("control")&&(r.control=i.RPC.ControlMessage.toObject(t.control,e),e.oneofs&&(r._control="control")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o.SubOpts=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.subscribe=null,o.prototype.topicID=null,Object.defineProperty(o.prototype,"_subscribe",{get:n.oneOfGetter(s=["subscribe"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){return e||(e=r.create()),null!=t.subscribe&&Object.hasOwnProperty.call(t,"subscribe")&&e.uint32(8).bool(t.subscribe),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(18).string(t.topicID),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.SubOpts;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.subscribe=t.bool();break;case 2:o.topicID=t.string();break;default:t.skipType(7&s)}}return o},o.fromObject=function(t){if(t instanceof i.RPC.SubOpts)return t;var e=new i.RPC.SubOpts;return null!=t.subscribe&&(e.subscribe=Boolean(t.subscribe)),null!=t.topicID&&(e.topicID=String(t.topicID)),e},o.toObject=function(t,e){e||(e={});var r={};return null!=t.subscribe&&t.hasOwnProperty("subscribe")&&(r.subscribe=t.subscribe,e.oneofs&&(r._subscribe="subscribe")),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.Message=function(){function o(t){if(this.topicIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.from=null,o.prototype.data=null,o.prototype.seqno=null,o.prototype.topicIDs=n.emptyArray,o.prototype.signature=null,o.prototype.key=null,Object.defineProperty(o.prototype,"_from",{get:n.oneOfGetter(s=["from"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_data",{get:n.oneOfGetter(s=["data"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_seqno",{get:n.oneOfGetter(s=["seqno"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_signature",{get:n.oneOfGetter(s=["signature"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_key",{get:n.oneOfGetter(s=["key"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.from&&Object.hasOwnProperty.call(t,"from")&&e.uint32(10).bytes(t.from),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),null!=t.seqno&&Object.hasOwnProperty.call(t,"seqno")&&e.uint32(26).bytes(t.seqno),null!=t.topicIDs&&t.topicIDs.length)for(var n=0;n<t.topicIDs.length;++n)e.uint32(34).string(t.topicIDs[n]);return null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(50).bytes(t.key),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.Message;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.from=t.bytes();break;case 2:o.data=t.bytes();break;case 3:o.seqno=t.bytes();break;case 4:o.topicIDs&&o.topicIDs.length||(o.topicIDs=[]),o.topicIDs.push(t.string());break;case 5:o.signature=t.bytes();break;case 6:o.key=t.bytes();break;default:t.skipType(7&s)}}return o},o.fromObject=function(t){if(t instanceof i.RPC.Message)return t;var e=new i.RPC.Message;if(null!=t.from&&("string"===typeof t.from?n.base64.decode(t.from,e.from=n.newBuffer(n.base64.length(t.from)),0):t.from.length&&(e.from=t.from)),null!=t.data&&("string"===typeof t.data?n.base64.decode(t.data,e.data=n.newBuffer(n.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),null!=t.seqno&&("string"===typeof t.seqno?n.base64.decode(t.seqno,e.seqno=n.newBuffer(n.base64.length(t.seqno)),0):t.seqno.length&&(e.seqno=t.seqno)),t.topicIDs){if(!Array.isArray(t.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");e.topicIDs=[];for(var r=0;r<t.topicIDs.length;++r)e.topicIDs[r]=String(t.topicIDs[r])}return null!=t.signature&&("string"===typeof t.signature?n.base64.decode(t.signature,e.signature=n.newBuffer(n.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),null!=t.key&&("string"===typeof t.key?n.base64.decode(t.key,e.key=n.newBuffer(n.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.topicIDs=[]),null!=t.from&&t.hasOwnProperty("from")&&(r.from=e.bytes===String?n.base64.encode(t.from,0,t.from.length):e.bytes===Array?Array.prototype.slice.call(t.from):t.from,e.oneofs&&(r._from="from")),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?n.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data,e.oneofs&&(r._data="data")),null!=t.seqno&&t.hasOwnProperty("seqno")&&(r.seqno=e.bytes===String?n.base64.encode(t.seqno,0,t.seqno.length):e.bytes===Array?Array.prototype.slice.call(t.seqno):t.seqno,e.oneofs&&(r._seqno="seqno")),t.topicIDs&&t.topicIDs.length){r.topicIDs=[];for(var i=0;i<t.topicIDs.length;++i)r.topicIDs[i]=t.topicIDs[i]}return null!=t.signature&&t.hasOwnProperty("signature")&&(r.signature=e.bytes===String?n.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature,e.oneofs&&(r._signature="signature")),null!=t.key&&t.hasOwnProperty("key")&&(r.key=e.bytes===String?n.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(r._key="key")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlMessage=function(){function o(t){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return o.prototype.ihave=n.emptyArray,o.prototype.iwant=n.emptyArray,o.prototype.graft=n.emptyArray,o.prototype.prune=n.emptyArray,o.encode=function(t,e){if(e||(e=r.create()),null!=t.ihave&&t.ihave.length)for(var n=0;n<t.ihave.length;++n)i.RPC.ControlIHave.encode(t.ihave[n],e.uint32(10).fork()).ldelim();if(null!=t.iwant&&t.iwant.length)for(n=0;n<t.iwant.length;++n)i.RPC.ControlIWant.encode(t.iwant[n],e.uint32(18).fork()).ldelim();if(null!=t.graft&&t.graft.length)for(n=0;n<t.graft.length;++n)i.RPC.ControlGraft.encode(t.graft[n],e.uint32(26).fork()).ldelim();if(null!=t.prune&&t.prune.length)for(n=0;n<t.prune.length;++n)i.RPC.ControlPrune.encode(t.prune[n],e.uint32(34).fork()).ldelim();return e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlMessage;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.ihave&&o.ihave.length||(o.ihave=[]),o.ihave.push(i.RPC.ControlIHave.decode(t,t.uint32()));break;case 2:o.iwant&&o.iwant.length||(o.iwant=[]),o.iwant.push(i.RPC.ControlIWant.decode(t,t.uint32()));break;case 3:o.graft&&o.graft.length||(o.graft=[]),o.graft.push(i.RPC.ControlGraft.decode(t,t.uint32()));break;case 4:o.prune&&o.prune.length||(o.prune=[]),o.prune.push(i.RPC.ControlPrune.decode(t,t.uint32()));break;default:t.skipType(7&s)}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlMessage)return t;var e=new i.RPC.ControlMessage;if(t.ihave){if(!Array.isArray(t.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");e.ihave=[];for(var r=0;r<t.ihave.length;++r){if("object"!==typeof t.ihave[r])throw TypeError(".RPC.ControlMessage.ihave: object expected");e.ihave[r]=i.RPC.ControlIHave.fromObject(t.ihave[r])}}if(t.iwant){if(!Array.isArray(t.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");for(e.iwant=[],r=0;r<t.iwant.length;++r){if("object"!==typeof t.iwant[r])throw TypeError(".RPC.ControlMessage.iwant: object expected");e.iwant[r]=i.RPC.ControlIWant.fromObject(t.iwant[r])}}if(t.graft){if(!Array.isArray(t.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");for(e.graft=[],r=0;r<t.graft.length;++r){if("object"!==typeof t.graft[r])throw TypeError(".RPC.ControlMessage.graft: object expected");e.graft[r]=i.RPC.ControlGraft.fromObject(t.graft[r])}}if(t.prune){if(!Array.isArray(t.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");for(e.prune=[],r=0;r<t.prune.length;++r){if("object"!==typeof t.prune[r])throw TypeError(".RPC.ControlMessage.prune: object expected");e.prune[r]=i.RPC.ControlPrune.fromObject(t.prune[r])}}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.ihave=[],r.iwant=[],r.graft=[],r.prune=[]),t.ihave&&t.ihave.length){r.ihave=[];for(var n=0;n<t.ihave.length;++n)r.ihave[n]=i.RPC.ControlIHave.toObject(t.ihave[n],e)}if(t.iwant&&t.iwant.length)for(r.iwant=[],n=0;n<t.iwant.length;++n)r.iwant[n]=i.RPC.ControlIWant.toObject(t.iwant[n],e);if(t.graft&&t.graft.length)for(r.graft=[],n=0;n<t.graft.length;++n)r.graft[n]=i.RPC.ControlGraft.toObject(t.graft[n],e);if(t.prune&&t.prune.length)for(r.prune=[],n=0;n<t.prune.length;++n)r.prune[n]=i.RPC.ControlPrune.toObject(t.prune[n],e);return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlIHave=function(){function o(t){if(this.messageIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.topicID=null,o.prototype.messageIDs=n.emptyArray,Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),null!=t.messageIDs&&t.messageIDs.length)for(var n=0;n<t.messageIDs.length;++n)e.uint32(18).bytes(t.messageIDs[n]);return e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlIHave;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.topicID=t.string();break;case 2:o.messageIDs&&o.messageIDs.length||(o.messageIDs=[]),o.messageIDs.push(t.bytes());break;default:t.skipType(7&s)}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlIHave)return t;var e=new i.RPC.ControlIHave;if(null!=t.topicID&&(e.topicID=String(t.topicID)),t.messageIDs){if(!Array.isArray(t.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");e.messageIDs=[];for(var r=0;r<t.messageIDs.length;++r)"string"===typeof t.messageIDs[r]?n.base64.decode(t.messageIDs[r],e.messageIDs[r]=n.newBuffer(n.base64.length(t.messageIDs[r])),0):t.messageIDs[r].length&&(e.messageIDs[r]=t.messageIDs[r])}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.messageIDs=[]),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),t.messageIDs&&t.messageIDs.length){r.messageIDs=[];for(var i=0;i<t.messageIDs.length;++i)r.messageIDs[i]=e.bytes===String?n.base64.encode(t.messageIDs[i],0,t.messageIDs[i].length):e.bytes===Array?Array.prototype.slice.call(t.messageIDs[i]):t.messageIDs[i]}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlIWant=function(){function o(t){if(this.messageIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return o.prototype.messageIDs=n.emptyArray,o.encode=function(t,e){if(e||(e=r.create()),null!=t.messageIDs&&t.messageIDs.length)for(var n=0;n<t.messageIDs.length;++n)e.uint32(10).bytes(t.messageIDs[n]);return e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlIWant;t.pos<n;){var s=t.uint32();s>>>3===1?(o.messageIDs&&o.messageIDs.length||(o.messageIDs=[]),o.messageIDs.push(t.bytes())):t.skipType(7&s)}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlIWant)return t;var e=new i.RPC.ControlIWant;if(t.messageIDs){if(!Array.isArray(t.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");e.messageIDs=[];for(var r=0;r<t.messageIDs.length;++r)"string"===typeof t.messageIDs[r]?n.base64.decode(t.messageIDs[r],e.messageIDs[r]=n.newBuffer(n.base64.length(t.messageIDs[r])),0):t.messageIDs[r].length&&(e.messageIDs[r]=t.messageIDs[r])}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.messageIDs=[]),t.messageIDs&&t.messageIDs.length){r.messageIDs=[];for(var i=0;i<t.messageIDs.length;++i)r.messageIDs[i]=e.bytes===String?n.base64.encode(t.messageIDs[i],0,t.messageIDs[i].length):e.bytes===Array?Array.prototype.slice.call(t.messageIDs[i]):t.messageIDs[i]}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlGraft=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.topicID=null,Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){return e||(e=r.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlGraft;t.pos<n;){var s=t.uint32();s>>>3===1?o.topicID=t.string():t.skipType(7&s)}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlGraft)return t;var e=new i.RPC.ControlGraft;return null!=t.topicID&&(e.topicID=String(t.topicID)),e},o.toObject=function(t,e){e||(e={});var r={};return null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlPrune=function(){function o(t){if(this.peers=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.topicID=null,o.prototype.peers=n.emptyArray,o.prototype.backoff=null,Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_backoff",{get:n.oneOfGetter(s=["backoff"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),null!=t.peers&&t.peers.length)for(var n=0;n<t.peers.length;++n)i.RPC.PeerInfo.encode(t.peers[n],e.uint32(18).fork()).ldelim();return null!=t.backoff&&Object.hasOwnProperty.call(t,"backoff")&&e.uint32(24).uint64(t.backoff),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlPrune;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.topicID=t.string();break;case 2:o.peers&&o.peers.length||(o.peers=[]),o.peers.push(i.RPC.PeerInfo.decode(t,t.uint32()));break;case 3:o.backoff=t.uint64();break;default:t.skipType(7&s)}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlPrune)return t;var e=new i.RPC.ControlPrune;if(null!=t.topicID&&(e.topicID=String(t.topicID)),t.peers){if(!Array.isArray(t.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");e.peers=[];for(var r=0;r<t.peers.length;++r){if("object"!==typeof t.peers[r])throw TypeError(".RPC.ControlPrune.peers: object expected");e.peers[r]=i.RPC.PeerInfo.fromObject(t.peers[r])}}return null!=t.backoff&&(n.Long?(e.backoff=n.Long.fromValue(t.backoff)).unsigned=!0:"string"===typeof t.backoff?e.backoff=parseInt(t.backoff,10):"number"===typeof t.backoff?e.backoff=t.backoff:"object"===typeof t.backoff&&(e.backoff=new n.LongBits(t.backoff.low>>>0,t.backoff.high>>>0).toNumber(!0))),e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.peers=[]),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),t.peers&&t.peers.length){r.peers=[];for(var o=0;o<t.peers.length;++o)r.peers[o]=i.RPC.PeerInfo.toObject(t.peers[o],e)}return null!=t.backoff&&t.hasOwnProperty("backoff")&&("number"===typeof t.backoff?r.backoff=e.longs===String?String(t.backoff):t.backoff:r.backoff=e.longs===String?n.Long.prototype.toString.call(t.backoff):e.longs===Number?new n.LongBits(t.backoff.low>>>0,t.backoff.high>>>0).toNumber(!0):t.backoff,e.oneofs&&(r._backoff="backoff")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.PeerInfo=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.peerID=null,o.prototype.signedPeerRecord=null,Object.defineProperty(o.prototype,"_peerID",{get:n.oneOfGetter(s=["peerID"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_signedPeerRecord",{get:n.oneOfGetter(s=["signedPeerRecord"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){return e||(e=r.create()),null!=t.peerID&&Object.hasOwnProperty.call(t,"peerID")&&e.uint32(10).bytes(t.peerID),null!=t.signedPeerRecord&&Object.hasOwnProperty.call(t,"signedPeerRecord")&&e.uint32(18).bytes(t.signedPeerRecord),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));for(var n=void 0===r?t.len:t.pos+r,o=new i.RPC.PeerInfo;t.pos<n;){var s=t.uint32();switch(s>>>3){case 1:o.peerID=t.bytes();break;case 2:o.signedPeerRecord=t.bytes();break;default:t.skipType(7&s)}}return o},o.fromObject=function(t){if(t instanceof i.RPC.PeerInfo)return t;var e=new i.RPC.PeerInfo;return null!=t.peerID&&("string"===typeof t.peerID?n.base64.decode(t.peerID,e.peerID=n.newBuffer(n.base64.length(t.peerID)),0):t.peerID.length&&(e.peerID=t.peerID)),null!=t.signedPeerRecord&&("string"===typeof t.signedPeerRecord?n.base64.decode(t.signedPeerRecord,e.signedPeerRecord=n.newBuffer(n.base64.length(t.signedPeerRecord)),0):t.signedPeerRecord.length&&(e.signedPeerRecord=t.signedPeerRecord)),e},o.toObject=function(t,e){e||(e={});var r={};return null!=t.peerID&&t.hasOwnProperty("peerID")&&(r.peerID=e.bytes===String?n.base64.encode(t.peerID,0,t.peerID.length):e.bytes===Array?Array.prototype.slice.call(t.peerID):t.peerID,e.oneofs&&(r._peerID="peerID")),null!=t.signedPeerRecord&&t.hasOwnProperty("signedPeerRecord")&&(r.signedPeerRecord=e.bytes===String?n.base64.encode(t.signedPeerRecord,0,t.signedPeerRecord.length):e.bytes===Array?Array.prototype.slice.call(t.signedPeerRecord):t.signedPeerRecord,e.oneofs&&(r._signedPeerRecord="signedPeerRecord")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o}(),i})?n.apply(e,i):n)||(t.exports=o)},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(335),e),i(r(683),e),i(r(684),e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validatePeerScoreThresholds=e.createPeerScoreThresholds=e.defaultPeerScoreThresholds=void 0;const n=r(336),i=r(9);e.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20},e.createPeerScoreThresholds=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},e.defaultPeerScoreThresholds),t)},e.validatePeerScoreThresholds=function(t){if(t.gossipThreshold>0)throw i(new Error("invalid gossip threshold; it must be <= 0"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw i(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw i(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw i(new Error("invalid accept PX threshold; it must be >= 0"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw i(new Error("invalid opportunistic grafting threshold; it must be >= 0"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS)}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PeerScore=void 0;const o=r(335),s=r(685),a=r(686),c=r(687),u=r(74),h=i(r(23)),l=r(5),f=r(186),{ERR_INVALID_SIGNATURE:d,ERR_MISSING_SIGNATURE:p}=f.codes,m=l("libp2p:gossipsub:score");e.PeerScore=class{constructor(t,e){o.validatePeerScoreParams(t),this.params=t,this._connectionManager=e,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new c.MessageDeliveries}start(){this._backgroundInterval?m("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),m("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),m("stopped")):m("Peer score already stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){const t=Date.now(),e=this.params.decayToZero;this.peerStats.forEach(((r,n)=>{r.connected?(Object.entries(r.topics).forEach((r=>{let[n,i]=r;const o=this.params.topics[n];o&&(i.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,i.firstMessageDeliveries<e&&(i.firstMessageDeliveries=0),i.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,i.meshMessageDeliveries<e&&(i.meshMessageDeliveries=0),i.meshFailurePenalty*=o.meshFailurePenaltyDecay,i.meshFailurePenalty<e&&(i.meshFailurePenalty=0),i.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,i.invalidMessageDeliveries<e&&(i.invalidMessageDeliveries=0),i.inMesh&&(i.meshTime=t-i.graftTime,i.meshTime>o.meshMessageDeliveriesActivation&&(i.meshMessageDeliveriesActive=!0)))})),r.behaviourPenalty*=this.params.behaviourPenaltyDecay,r.behaviourPenalty<e&&(r.behaviourPenalty=0),this.scoreCache.set(n,{score:null,cacheUntil:0})):t>r.expire&&(this._removeIPs(n,r.ips),this.peerStats.delete(n))}))}score(t){const e=this.peerStats.get(t);if(!e)return 0;const r=Date.now();let n=this.scoreCache.get(t);void 0===n&&(n={score:null,cacheUntil:0},this.scoreCache.set(t,n));const{score:i,cacheUntil:o}=n;return o>r&&null!==i?i:(n.score=a.computeScore(t,e,this.params,this.peerIPs),n.cacheUntil=r+this.params.decayInterval,n.score)}addPenalty(t,e){const r=this.peerStats.get(t);r&&(r.behaviourPenalty+=e,this.scoreCache.set(t,{score:null,cacheUntil:0}))}addPeer(t){const e=s.createPeerStats({connected:!0});this.peerStats.set(t,e);const r=this._getIPs(t);this._setIPs(t,r,e.ips),e.ips=r}removePeer(t){const e=this.peerStats.get(t);if(e){if(this.score(t)>0)return this._removeIPs(t,e.ips),void this.peerStats.delete(t);this.scoreCache.delete(t),Object.entries(e.topics).forEach((t=>{let[e,r]=t;r.firstMessageDeliveries=0;const n=this.params.topics[e].meshMessageDeliveriesThreshold;if(r.inMesh&&r.meshMessageDeliveriesActive&&r.meshMessageDeliveries<n){const t=n-r.meshMessageDeliveries;r.meshFailurePenalty+=t*t}r.inMesh=!1})),e.connected=!1,e.expire=Date.now()+this.params.retainScore}}graft(t,e){const r=this.peerStats.get(t);if(!r)return;const n=s.ensureTopicStats(e,r,this.params);n&&(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1,this.scoreCache.set(t,{score:null,cacheUntil:0}))}prune(t,e){const r=this.peerStats.get(t);if(!r)return;const n=s.ensureTopicStats(e,r,this.params);if(!n)return;const i=this.params.topics[e].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<i){const t=i-n.meshMessageDeliveries;n.meshFailurePenalty+=t*t}n.inMesh=!1,this.scoreCache.set(t,{score:null,cacheUntil:0})}validateMessage(t){return n(this,void 0,void 0,(function*(){this.deliveryRecords.ensureRecord(t)}))}deliverMessage(t,e){return n(this,void 0,void 0,(function*(){const r=t.receivedFrom;this._markFirstMessageDelivery(r,t);const n=this.deliveryRecords.ensureRecord(e),i=Date.now();n.status===c.DeliveryRecordStatus.unknown?(n.status=c.DeliveryRecordStatus.valid,n.validated=i,n.peers.forEach((e=>{e!==r&&this._markDuplicateMessageDelivery(e,t)}))):m("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",r,i-n.firstSeen,c.DeliveryRecordStatus[n.status])}))}rejectMessage(t,e,r){return n(this,void 0,void 0,(function*(){const n=t.receivedFrom;switch(r){case p:case d:return void this._markInvalidMessageDelivery(n,t)}const i=this.deliveryRecords.ensureRecord(e);i.status===c.DeliveryRecordStatus.unknown?r!==u.ERR_TOPIC_VALIDATOR_IGNORE?(i.status=c.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(n,t),i.peers.forEach((e=>{this._markInvalidMessageDelivery(e,t)}))):i.status=c.DeliveryRecordStatus.ignored:m("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",n,Date.now()-i.firstSeen,c.DeliveryRecordStatus[i.status])}))}duplicateMessage(t,e){return n(this,void 0,void 0,(function*(){const r=t.receivedFrom,n=this.deliveryRecords.ensureRecord(e);if(!n.peers.has(r))switch(n.status){case c.DeliveryRecordStatus.unknown:n.peers.add(r);break;case c.DeliveryRecordStatus.valid:n.peers.add(r),this._markDuplicateMessageDelivery(r,t,n.validated);break;case c.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(r,t)}}))}_markInvalidMessageDelivery(t,e){const r=this.peerStats.get(t);r&&(e.topicIDs.forEach((t=>{const e=s.ensureTopicStats(t,r,this.params);e&&(e.invalidMessageDeliveries+=1)})),this.scoreCache.set(t,{score:null,cacheUntil:0}))}_markFirstMessageDelivery(t,e){const r=this.peerStats.get(t);r&&(e.topicIDs.forEach((t=>{const e=s.ensureTopicStats(t,r,this.params);if(!e)return;let n=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries+=1,e.firstMessageDeliveries>n&&(e.firstMessageDeliveries=n),e.inMesh&&(n=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries+=1,e.meshMessageDeliveries>n&&(e.meshMessageDeliveries=n))})),this.scoreCache.set(t,{score:null,cacheUntil:0}))}_markDuplicateMessageDelivery(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.peerStats.get(t);if(!n)return;const i=r?Date.now():0;e.topicIDs.forEach((t=>{const e=s.ensureTopicStats(t,n,this.params);if(!e)return;if(!e.inMesh)return;const o=this.params.topics[t];if(r&&i>r+o.meshMessageDeliveriesWindow)return;const a=o.meshMessageDeliveriesCap;e.meshMessageDeliveries+=1,e.meshMessageDeliveries>a&&(e.meshMessageDeliveries=a)})),this.scoreCache.set(t,{score:null,cacheUntil:0})}_getIPs(t){return this._connectionManager.getAll(h.default.createFromB58String(t)).map((t=>t.remoteAddr.toOptions().host))}_setIPs(t,e,r){t:for(const n of e){for(const t of r)if(n===t)continue t;let e=this.peerIPs.get(n);e||(e=new Set,this.peerIPs.set(n,e)),e.add(t)}t:for(const n of r){for(const t of e)if(n===t)continue t;const r=this.peerIPs.get(n);r&&(r.delete(t),r.size||this.peerIPs.delete(n))}this.scoreCache.set(t,{score:null,cacheUntil:0})}_removeIPs(t,e){e.forEach((e=>{const r=this.peerIPs.get(e);r&&(r.delete(t),r.size||this.peerIPs.delete(e))})),this.scoreCache.set(t,{score:null,cacheUntil:0})}_updateIPs(){this.peerStats.forEach(((t,e)=>{const r=this._getIPs(e);this._setIPs(e,r,t.ips),t.ips=r,this.scoreCache.set(e,{score:null,cacheUntil:0})}))}}},function(t,e,r){"use strict";function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ensureTopicStats=e.createTopicStats=e.createPeerStats=void 0,e.createPeerStats=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce(((t,e)=>{let[r,i]=e;return t[r]=n(i),t}),{}):{}})},e.createTopicStats=n,e.ensureTopicStats=function(t,e,r){let i=e.topics[t];return i||(r.topics[t]?(e.topics[t]=i=n(),i):void 0)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeScore=void 0,e.computeScore=function(t,e,r,n){let i=0;Object.entries(e.topics).forEach((t=>{let[e,n]=t;const o=r.topics[e];if(!o)return;let s=0;if(n.inMesh){let t=n.meshTime/o.timeInMeshQuantum;t>o.timeInMeshCap&&(t=o.timeInMeshCap),s+=t*o.timeInMeshWeight}if(s+=n.firstMessageDeliveries*o.firstMessageDeliveriesWeight,n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<o.meshMessageDeliveriesThreshold){const t=o.meshMessageDeliveriesThreshold-n.meshMessageDeliveries;s+=t*t*o.meshMessageDeliveriesWeight}s+=n.meshFailurePenalty*o.meshFailurePenaltyWeight;s+=n.invalidMessageDeliveries*n.invalidMessageDeliveries*o.invalidMessageDeliveriesWeight,i+=s*o.topicWeight})),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const o=r.appSpecificScore(t);i+=o*r.appSpecificWeight,e.ips.forEach((t=>{if(r.IPColocationFactorWhitelist.has(t))return;const e=n.get(t),o=e?e.size:0;if(o>r.IPColocationFactorThreshold){const t=o-r.IPColocationFactorThreshold;i+=t*t*r.IPColocationFactorWeight}}));const s=e.behaviourPenalty*e.behaviourPenalty;return i+=s*r.behaviourPenaltyWeight,i}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDeliveries=e.DeliveryRecordStatus=void 0;const i=r(74),o=n(r(688));var s;!function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"}(s=e.DeliveryRecordStatus||(e.DeliveryRecordStatus={}));e.MessageDeliveries=class{constructor(){this.records=new Map,this.queue=new o.default}ensureRecord(t){let e=this.records.get(t);if(e)return e;e={status:s.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(t,e);const r={msgId:t,expire:Date.now()+i.TimeCacheDuration};return this.queue.push(r),e}gc(){const t=Date.now();let e=this.queue.peekFront();for(;e&&e.expire<t;)this.records.delete(e.msgId),this.queue.shift(),e=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}},function(t,e,r){"use strict";function n(t,e){e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}n.prototype.peekAt=function(t){var e=t;if(e===(0|e)){var r=this.size();if(!(e>=r||e<-r))return e<0&&(e+=r),e=this._head+e&this._capacityMask,this._list[e]}},n.prototype.get=function(t){return this.peekAt(t)},n.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},n.prototype.peekFront=function(){return this.peek()},n.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(n.prototype,"length",{get:function(){return this.size()}}),n.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.unshift=function(t){if(void 0===t)return this.size();var e=this._list.length;return this._head=this._head-1+e&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.shift=function(){var t=this._head;if(t!==this._tail){var e=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),e}},n.prototype.push=function(t){if(void 0===t)return this.size();var e=this._tail;return this._list[e]=t,this._tail=e+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.pop=function(){var t=this._tail;if(t!==this._head){var e=this._list.length;this._tail=t-1+e&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=e>>>2&&this._shrinkArray(),r}},n.prototype.removeOne=function(t){var e=t;if(e===(0|e)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(e>=r||e<-r)){e<0&&(e+=r),e=this._head+e&this._capacityMask;var i,o=this._list[e];if(t<r/2){for(i=t;i>0;i--)this._list[e]=this._list[e=e-1+n&this._capacityMask];this._list[e]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(i=r-1-t;i>0;i--)this._list[e]=this._list[e=e+1+n&this._capacityMask];this._list[e]=void 0,this._tail=this._tail-1+n&this._capacityMask}return o}}},n.prototype.remove=function(t,e){var r,n=t,i=e;if(n===(0|n)&&this._head!==this._tail){var o=this.size(),s=this._list.length;if(!(n>=o||n<-o||e<1)){if(n<0&&(n+=o),1===e||!e)return(r=new Array(1))[0]=this.removeOne(n),r;if(0===n&&n+e>=o)return r=this.toArray(),this.clear(),r;var a;for(n+e>o&&(e=o-n),r=new Array(e),a=0;a<e;a++)r[a]=this._list[this._head+n+a&this._capacityMask];if(n=this._head+n&this._capacityMask,t+e===o){for(this._tail=this._tail-e+s&this._capacityMask,a=e;a>0;a--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(0===t){for(this._head=this._head+e+s&this._capacityMask,a=e-1;a>0;a--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(n<o/2){for(this._head=this._head+t+e+s&this._capacityMask,a=t;a>0;a--)this.unshift(this._list[n=n-1+s&this._capacityMask]);for(n=this._head-1+s&this._capacityMask;i>0;)this._list[n=n-1+s&this._capacityMask]=void 0,i--;t<0&&(this._tail=n)}else{for(this._tail=n,n=n+e+s&this._capacityMask,a=o-(e+t);a>0;a--)this.push(this._list[n++]);for(n=this._tail;i>0;)this._list[n=n+1+s&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=s>>>2&&this._shrinkArray(),r}}},n.prototype.splice=function(t,e){var r=t;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var i,o,s,a=arguments.length,c=this._list.length,u=2;if(!n||r<n/2){for(o=new Array(r),i=0;i<r;i++)o[i]=this._list[this._head+i&this._capacityMask];for(0===e?(s=[],r>0&&(this._head=this._head+r+c&this._capacityMask)):(s=this.remove(r,e),this._head=this._head+r+c&this._capacityMask);a>u;)this.unshift(arguments[--a]);for(i=r;i>0;i--)this.unshift(o[i-1])}else{var h=(o=new Array(n-(r+e))).length;for(i=0;i<h;i++)o[i]=this._list[this._head+r+e+i&this._capacityMask];for(0===e?(s=[],r!=n&&(this._tail=this._head+r+c&this._capacityMask)):(s=this.remove(r,e),this._tail=this._tail-h+c&this._capacityMask);u<a;)this.push(arguments[u++]);for(i=0;i<h;i++)this.push(o[i])}return s}return this.remove(r,e)}}},n.prototype.clear=function(){this._head=0,this._tail=0},n.prototype.isEmpty=function(){return this._head===this._tail},n.prototype.toArray=function(){return this._copyArray(!1)},n.prototype._fromArray=function(t){for(var e=0;e<t.length;e++)this.push(t[e])},n.prototype._copyArray=function(t){var e,r=[],n=this._list,i=n.length;if(t||this._head>this._tail){for(e=this._head;e<i;e++)r.push(n[e]);for(e=0;e<this._tail;e++)r.push(n[e])}else for(e=this._head;e<this._tail;e++)r.push(n[e]);return r},n.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},n.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.exports=n},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.IWantTracer=void 0;const i=r(74),o=r(42),s=r(186),{ERR_INVALID_SIGNATURE:a,ERR_MISSING_SIGNATURE:c}=s.codes;e.IWantTracer=class{constructor(){this.promises=new Map}addPromise(t,e){const r=e[Math.floor(Math.random()*e.length)],n=o.messageIdToString(r);let s=this.promises.get(n);s||(s=new Map,this.promises.set(n,s)),s.has(t)||s.set(t,Date.now()+i.GossipsubIWantFollowupTime)}getBrokenPromises(){const t=Date.now(),e=new Map;return this.promises.forEach(((r,n)=>{r.forEach(((n,i)=>{n<t&&(e.set(i,(e.get(i)||0)+1),r.delete(i))})),r.size||this.promises.delete(n)})),e}deliverMessage(t){return n(this,void 0,void 0,(function*(){this.promises.delete(t)}))}rejectMessage(t,e){return n(this,void 0,void 0,(function*(){switch(e){case a:case c:return}this.promises.delete(t)}))}clear(){this.promises.clear()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleTimeCache=void 0;e.SimpleTimeCache=class{constructor(t){this.lastPruneTime=0,this.entries=new Map,this.validityMs=t.validityMs}put(t,e){this.entries.set(t,{value:e,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){const t=Date.now();if(!(t-this.lastPruneTime<200)){this.lastPruneTime=t;for(const[e,r]of this.entries.entries()){if(!(r.validUntilMs<t))break;this.entries.delete(e)}}}has(t){return this.entries.has(t)}get(t){const e=this.entries.get(t);return e&&e.validUntilMs>=Date.now()?e.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}}},function(t,e,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var r,a,c=s(t),u=1;u<arguments.length;u++){for(var h in r=Object(arguments[u]))i.call(r,h)&&(c[h]=r[h]);if(n){a=n(r);for(var l=0;l<a.length;l++)o.call(r,a[l])&&(c[a[l]]=r[a[l]])}}return c}},function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){(function(t){if("undefined"===typeof localStorage||null===localStorage){var e=r(695).LocalStorage;t.localStorage=new e("./scratch")}}).call(this,r(21))},function(t,e,r){(function(t){(function(){var n,i,o,s,a,c,u,h,l,f,d,p,m,y,g=function(t,e){for(var r in e)b.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;m=r(696),p=r(338),d=r(33),y=r(697).sync,i="---.EMPTY_STRING.---",u=function(t){var e,r,n,i,o;for(o=[],e=0,r=(i=p.readdirSync(t)).length;e<r;e++)n=i[e],o.push(l(m.join(t,n)));return o},l=function(t){return p.statSync(t).isDirectory()?(u(t),p.rmdirSync(t)):p.unlinkSync(t)},h=function(t){return""===t?i:""+t},a=function(t){function e(t){this.message=null!=t?t:"Unknown error.",e.__super__.constructor.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}return g(e,t),e.prototype.toString=function(){return this.name+": "+this.message},e}(Error),c=function(t,e,r,n,i){this.key=t,this.oldValue=e,this.newValue=r,this.url=n,this.storageArea=null!=i?i:"localStorage"},s=function t(e,r){if(this.key=e,this.index=r,!(this instanceof t))return new t(this.key,this.index)},f=function(){var t;return(t=function(){}).prototype=Object.create(null),new t},n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.setItem=function(t,r){var n;return n=JSON.stringify(r),e.__super__.setItem.call(this,t,n)},e.prototype.getItem=function(t){return JSON.parse(e.__super__.getItem.call(this,t))},e}(o=function(e){var r;function n(e,i){var o,s;return this._location=e,this.quota=null!=i?i:5242880,n.__super__.constructor.call(this),this instanceof n?(this._location=m.resolve(this._location),null!=r[this._location]?r[this._location]:(this.length=0,this._bytesInUse=0,this._keys=[],this._metaKeyMap=f(),this._eventUrl="pid:"+t.pid,this._init(),this._QUOTA_EXCEEDED_ERR=a,"undefined"!==typeof Proxy&&null!==Proxy?(o={set:(s=this,function(t,e,r){return null!=s[e]?s[e]=r:s.setItem(e,r)}),get:function(t){return function(e,r){return null!=t[r]?t[r]:t.getItem(r)}}(this)},r[this._location]=new Proxy(this,o),r[this._location]):(r[this._location]=this,r[this._location]))):new n(this._location,this.quota)}return g(n,e),r={},n.prototype._init=function(){var t,e,r,n,i,o,a,c,u;try{if(null!=(u=p.statSync(this._location))&&!u.isDirectory())throw new Error("A file exists at the location '"+this._location+"' when trying to create/open localStorage");for(this._bytesInUse=0,this.length=0,r=p.readdirSync(this._location),o=i=0,c=r.length;i<c;o=++i)a=r[o],e=decodeURIComponent(a),this._keys.push(e),t=new s(a,o),this._metaKeyMap[e]=t,null!=(null!=(u=this._getStat(a))?u.size:void 0)&&(t.size=u.size,this._bytesInUse+=u.size);this.length=r.length}catch(h){if("ENOENT"!==(n=h).code)throw n;try{p.mkdirSync(this._location,{recursive:!0})}catch(h){if("EEXIST"!==(n=h).code)throw n}}},n.prototype.setItem=function(t,e){var r,n,i,o,u,l,f,d,p,g;if(d=null,(u=this.listenerCount("storage"))&&(d=this.getItem(t)),t=h(t),r=encodeURIComponent(t).replace(/[!'()]/g,escape).replace(/\*/g,"%2A"),o=m.join(this._location,r),g=(p=""+e).length,f=(i=!!(l=this._metaKeyMap[t]))?l.size:0,this._bytesInUse-f+g>this.quota)throw new a;if(y(o,p,{encoding:"utf8"}),i||((l=new s(r,this._keys.push(t)-1)).size=g,this._metaKeyMap[t]=l,this.length+=1,this._bytesInUse+=g),u)return n=new c(t,d,e,this._eventUrl),this.emit("storage",n)},n.prototype.getItem=function(t){var e,r;return t=h(t),(r=this._metaKeyMap[t])?(e=m.join(this._location,r.key),p.readFileSync(e,"utf8")):null},n.prototype._getStat=function(t){var e;t=h(t),e=m.join(this._location,encodeURIComponent(t));try{return p.statSync(e)}catch(r){return null}},n.prototype.removeItem=function(t){var e,r,n,i,o,s,a,u;if(t=h(t),s=this._metaKeyMap[t]){for(i in a=null,(n=this.listenerCount("storage"))&&(a=this.getItem(t)),delete this._metaKeyMap[t],this.length-=1,this._bytesInUse-=s.size,r=m.join(this._location,s.key),this._keys.splice(s.index,1),u=this._metaKeyMap)u[i],(o=this._metaKeyMap[i]).index>s.index&&(o.index-=1);if(l(r),n)return e=new c(t,a,null,this._eventUrl),this.emit("storage",e)}},n.prototype.key=function(t){var e;return(e=this._keys[t])===i?"":e},n.prototype.clear=function(){var t;if(u(this._location),this._metaKeyMap=f(),this._keys=[],this.length=0,this._bytesInUse=0,this.listenerCount("storage"))return t=new c(null,null,null,this._eventUrl),this.emit("storage",t)},n.prototype._getBytesInUse=function(){return this._bytesInUse},n.prototype._deleteLocation=function(){return delete r[this._location],l(this._location),this._metaKeyMap={},this._keys=[],this.length=0,this._bytesInUse=0},n}(d.EventEmitter)),e.LocalStorage=o,e.JSONStorage=n,e.QUOTA_EXCEEDED_ERR=a}).call(this)}).call(this,r(22))},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return(i?"/":"")+(e=r(n(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===i(t,-1);return(t=r(n(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=function(t){"string"!==typeof t&&(t+="");var e,r=0,n=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){r=e+1;break}}else-1===n&&(i=!1,n=e+1);return-1===n?"":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,r=0,n=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===n&&(i=!1,n=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=s+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(22))},function(t,e,r){"use strict";(function(e,n,i){t.exports=function(t,e,r,a){r instanceof Function&&(a=r,r=null);r||(r={});o.realpath(t,(function(u,l){!function(t,e,r,a){var u=h(t);return r.mode&&r.chown?l():o.stat(t,(function(t,e){return t||!e||((r=c({},r)).mode||(r.mode=e.mode),!r.chown&&n.getuid&&(r.chown={uid:e.uid,gid:e.gid})),l()}));function l(){s([[f,u,e,r.mode,r.encoding||"utf8"],r.chown&&[o,o.chown,u,r.chown.uid,r.chown.gid],r.mode&&[o,o.chmod,u,r.mode],[o,o.rename,u,t]],(function(t){t?o.unlink(u,(function(){a(t)})):a()}))}function f(t,e,n,s,a){o.open(t,"w",r.mode,(function(t,r){return t?a(t):i.isBuffer(e)?o.write(r,e,0,e.length,0,n):null!=e?o.write(r,String(e),0,String(s),n):n();function n(t){if(t)return a(t);o.fsync(r,(function(t){if(t)return a(t);o.close(r,a)}))}}))}}(l||t,e,r,a)}))},t.exports.sync=function(t,e,r){r||(r={});try{t=o.realpathSync(t)}catch(l){}var s=h(t);try{if(!r.mode||!r.chown)try{var a=o.statSync(t);(r=c({},r)).mode||(r.mode=a.mode),!r.chown&&n.getuid&&(r.chown={uid:a.uid,gid:a.gid})}catch(l){}var u=o.openSync(s,"w",r.mode);i.isBuffer(e)?o.writeSync(u,e,0,e.length,0):null!=e&&o.writeSync(u,String(e),0,String(r.encoding||"utf8")),o.fsyncSync(u),o.closeSync(u),r.chown&&o.chownSync(s,r.chown.uid,r.chown.gid),r.mode&&o.chmodSync(s,r.mode),o.renameSync(s,t)}catch(f){try{o.unlinkSync(s)}catch(d){}throw f}},t.exports._getTmpname=h;var o=r(698),s=r(703).chain,a=r(706),c=Object.assign||r(187)._extend,u=0;function h(t){return t+"."+a(e).hash(String(n.pid)).hash(String(++u)).result()}}).call(this,"/index.js",r(22),r(19).Buffer)},function(t,e,r){(function(e,n){var i,o,s=r(338),a=r(699),c=r(701),u=r(702),h=r(187);function l(t,e){Object.defineProperty(t,i,{get:function(){return e}})}"function"===typeof Symbol&&"function"===typeof Symbol.for?(i=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(i="___graceful-fs.queue",o="___graceful-fs.previous");var f,d=function(){};if(h.debuglog?d=h.debuglog("gfs4"):/\bgfs4\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||"")&&(d=function(){var t=h.format.apply(h,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!s[i]){var p=e[i]||[];l(s,p),s.close=function(t){function e(e,r){return t.call(s,e,(function(t){t||g(),"function"===typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(e,o,{value:t}),e}(s.close),s.closeSync=function(t){function e(e){t.apply(s,arguments),g()}return Object.defineProperty(e,o,{value:t}),e}(s.closeSync),/\bgfs4\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||"")&&n.on("exit",(function(){d(s[i]),r(196).equal(s[i].length,0)}))}function m(t){a(t),t.gracefulify=m,t.createReadStream=function(e,r){return new t.ReadStream(e,r)},t.createWriteStream=function(e,r){return new t.WriteStream(e,r)};var e=t.readFile;t.readFile=function(t,r,n){"function"===typeof r&&(n=r,r=null);return function t(r,n,i,o){return e(r,n,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"===typeof i&&i.apply(this,arguments):y([t,[r,n,i],e,o||Date.now(),Date.now()])}))}(t,r,n)};var r=t.writeFile;t.writeFile=function(t,e,n,i){"function"===typeof n&&(i=n,n=null);return function t(e,n,i,o,s){return r(e,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"===typeof o&&o.apply(this,arguments):y([t,[e,n,i,o],r,s||Date.now(),Date.now()])}))}(t,e,n,i)};var i=t.appendFile;i&&(t.appendFile=function(t,e,r,n){"function"===typeof r&&(n=r,r=null);return function t(e,r,n,o,s){return i(e,r,n,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"===typeof o&&o.apply(this,arguments):y([t,[e,r,n,o],i,s||Date.now(),Date.now()])}))}(t,e,r,n)});var o=t.copyFile;o&&(t.copyFile=function(t,e,r,n){"function"===typeof r&&(n=r,r=0);return function t(e,r,n,i,s){return o(e,r,n,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"===typeof i&&i.apply(this,arguments):y([t,[e,r,n,i],o,s||Date.now(),Date.now()])}))}(t,e,r,n)});var s=t.readdir;t.readdir=function(t,e,r){"function"===typeof e&&(r=e,e=null);var i=u.test(n.version)?function(t,e,r,n){return s(t,o(t,e,r,n))}:function(t,e,r,n){return s(t,e,o(t,e,r,n))};return i(t,e,r);function o(t,e,r,n){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"===typeof r&&r.call(this,o,s)):y([i,[t,e,r],o,n||Date.now(),Date.now()])}}};var u=/^v[0-5]\./;if("v0.8"===n.version.substr(0,4)){var h=c(t);g=h.ReadStream,b=h.WriteStream}var l=t.ReadStream;l&&(g.prototype=Object.create(l.prototype),g.prototype.open=function(){var t=this;w(t.path,t.flags,t.mode,(function(e,r){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=r,t.emit("open",r),t.read())}))});var f=t.WriteStream;f&&(b.prototype=Object.create(f.prototype),b.prototype.open=function(){var t=this;w(t.path,t.flags,t.mode,(function(e,r){e?(t.destroy(),t.emit("error",e)):(t.fd=r,t.emit("open",r))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return g},set:function(t){g=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return b},set:function(t){b=t},enumerable:!0,configurable:!0});var d=g;Object.defineProperty(t,"FileReadStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0});var p=b;function g(t,e){return this instanceof g?(l.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function b(t,e){return this instanceof b?(f.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return p},set:function(t){p=t},enumerable:!0,configurable:!0});var v=t.open;function w(t,e,r,n){return"function"===typeof r&&(n=r,r=null),function t(e,r,n,i,o){return v(e,r,n,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"===typeof i&&i.apply(this,arguments):y([t,[e,r,n,i],s,o||Date.now(),Date.now()])}))}(t,e,r,n)}return t.open=w,t}function y(t){d("ENQUEUE",t[0].name,t[1]),s[i].push(t),b()}function g(){for(var t=Date.now(),e=0;e<s[i].length;++e)s[i][e].length>2&&(s[i][e][3]=t,s[i][e][4]=t);b()}function b(){if(clearTimeout(f),f=void 0,0!==s[i].length){var t=s[i].shift(),e=t[0],r=t[1],n=t[2],o=t[3],a=t[4];if(void 0===o)d("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-o>=6e4){d("TIMEOUT",e.name,r);var c=r.pop();"function"===typeof c&&c.call(null,n)}else{var u=Date.now()-a,h=Math.max(a-o,1);u>=Math.min(1.2*h,100)?(d("RETRY",e.name,r),e.apply(null,r.concat([o]))):s[i].push(t)}void 0===f&&(f=setTimeout(b,0))}}e[i]||l(e,s[i]),t.exports=m(u(s)),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).TEST_GRACEFUL_FS_GLOBAL_PATCH&&!s.__patched&&(t.exports=m(s),s.__patched=!0)}).call(this,r(21),r(22))},function(t,e,r){(function(e){var n=r(700),i=e.cwd,o=null,s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).GRACEFUL_FS_PLATFORM||e.platform;e.cwd=function(){return o||(o=i.call(e)),o};try{e.cwd()}catch(c){}if("function"===typeof e.chdir){var a=e.chdir;e.chdir=function(t){o=null,a.call(e,t)},Object.setPrototypeOf&&Object.setPrototypeOf(e.chdir,a)}t.exports=function(t){n.hasOwnProperty("O_SYMLINK")&&e.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,r,i){t.open(e,n.O_WRONLY|n.O_SYMLINK,r,(function(e,n){e?i&&i(e):t.fchmod(n,r,(function(e){t.close(n,(function(t){i&&i(e||t)}))}))}))},t.lchmodSync=function(e,r){var i,o=t.openSync(e,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{i=t.fchmodSync(o,r),s=!1}finally{if(s)try{t.closeSync(o)}catch(c){}else t.closeSync(o)}return i}}(t);t.lutimes||function(t){n.hasOwnProperty("O_SYMLINK")&&t.futimes?(t.lutimes=function(e,r,i,o){t.open(e,n.O_SYMLINK,(function(e,n){e?o&&o(e):t.futimes(n,r,i,(function(e){t.close(n,(function(t){o&&o(e||t)}))}))}))},t.lutimesSync=function(e,r,i){var o,s=t.openSync(e,n.O_SYMLINK),a=!0;try{o=t.futimesSync(s,r,i),a=!1}finally{if(a)try{t.closeSync(s)}catch(c){}else t.closeSync(s)}return o}):t.futimes&&(t.lutimes=function(t,r,n,i){i&&e.nextTick(i)},t.lutimesSync=function(){})}(t);t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=r(t.chmod),t.fchmod=r(t.fchmod),t.lchmod=r(t.lchmod),t.chownSync=a(t.chownSync),t.fchownSync=a(t.fchownSync),t.lchownSync=a(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=u(t.stat),t.fstat=u(t.fstat),t.lstat=u(t.lstat),t.statSync=h(t.statSync),t.fstatSync=h(t.fstatSync),t.lstatSync=h(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(t,r,n){n&&e.nextTick(n)},t.lchmodSync=function(){});t.chown&&!t.lchown&&(t.lchown=function(t,r,n,i){i&&e.nextTick(i)},t.lchownSync=function(){});"win32"===s&&(t.rename="function"!==typeof t.rename?t.rename:function(e){function r(r,n,i){var o=Date.now(),s=0;e(r,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){t.stat(n,(function(t,o){t&&"ENOENT"===t.code?e(r,n,a):i(c)}))}),s),void(s<100&&(s+=10));i&&i(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(r,e),r}(t.rename));function r(e){return e?function(r,n,i){return e.call(t,r,n,(function(t){l(t)&&(t=null),i&&i.apply(this,arguments)}))}:e}function i(e){return e?function(r,n){try{return e.call(t,r,n)}catch(c){if(!l(c))throw c}}:e}function o(e){return e?function(r,n,i,o){return e.call(t,r,n,i,(function(t){l(t)&&(t=null),o&&o.apply(this,arguments)}))}:e}function a(e){return e?function(r,n,i){try{return e.call(t,r,n,i)}catch(c){if(!l(c))throw c}}:e}function u(e){return e?function(r,n,i){function o(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"===typeof n&&(i=n,n=null),n?e.call(t,r,n,o):e.call(t,r,o)}:e}function h(e){return e?function(r,n){var i=n?e.call(t,r,n):e.call(t,r);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:e}function l(t){return!t||("ENOSYS"===t.code||!(e.getuid&&0===e.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read="function"!==typeof t.read?t.read:function(e){function r(r,n,i,o,s,a){var c;if(a&&"function"===typeof a){var u=0;c=function(h,l,f){if(h&&"EAGAIN"===h.code&&u<10)return u++,e.call(t,r,n,i,o,s,c);a.apply(this,arguments)}}return e.call(t,r,n,i,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,e),r}(t.read),t.readSync="function"!==typeof t.readSync?t.readSync:(f=t.readSync,function(e,r,n,i,o){for(var s=0;;)try{return f.call(t,e,r,n,i,o)}catch(c){if("EAGAIN"===c.code&&s<10){s++;continue}throw c}});var f}}).call(this,r(22))},function(t){t.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(t,e,r){(function(e){var n=r(222).Stream;t.exports=function(t){return{ReadStream:function r(i,o){if(!(this instanceof r))return new r(i,o);n.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var a=Object.keys(o),c=0,u=a.length;c<u;c++){var h=a[c];this[h]=o[h]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!==typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!==typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void e.nextTick((function(){s._read()}));t.open(this.path,this.flags,this.mode,(function(t,e){if(t)return s.emit("error",t),void(s.readable=!1);s.fd=e,s.emit("open",e),s._read()}))},WriteStream:function e(r,i){if(!(this instanceof e))return new e(r,i);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(void 0!==this.start){if("number"!==typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}}).call(this,r(22))},function(t,e,r){"use strict";t.exports=function(t){if(null===t||"object"!==typeof t)return t;if(t instanceof Object)var e={__proto__:n(t)};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e};var n=Object.getPrototypeOf||function(t){return t.__proto__}},function(t,e,r){e.asyncMap=r(704),e.bindActor=r(339),e.chain=r(705)},function(t,e,r){(function(e){t.exports=function(){var t=Array.prototype.slice.call(arguments),r=t.shift()||[],n=t.pop();if("function"!==typeof n)throw new Error("No callback provided to asyncMap");if(!r)return n(null,[]);Array.isArray(r)||(r=[r]);var i=t.length,o=[],s=null,a=r.length,c=a*i;if(!c)return n(null,[]);function u(h){h&&!s&&(s=h);for(var l=arguments.length,f=1;f<l;f++)void 0!==arguments[f]&&(o[f-1]=(o[f-1]||[]).concat(arguments[f]));if(r.length>a){var d=r.slice(a);c+=(r.length-a)*i,a=r.length,e.nextTick((function(){d.forEach((function(e){t.forEach((function(t){t(e,u)}))}))}))}0===--c&&n.apply(null,[s].concat(o))}r.forEach((function(e){t.forEach((function(t){t(e,u)}))}))}}).call(this,r(22))},function(t,e,r){t.exports=i;var n=r(339);function i(t,e){var r=[];!function o(s,a){return s>=a?e(null,r):(Array.isArray(t[s])&&(t[s]=n.apply(null,t[s].map((function(t){return t===i.first?r[0]:t===i.last?r[r.length-1]:t})))),t[s]?void t[s]((function(t,n){if(t)return e(t,r);void 0!==n&&(r=r.concat(n)),o(s+1,a)})):o(s+1,a))}(0,t.length)}i.first={},i.last={}},function(t,e,r){!function(){var e;function r(t,n){var i=this instanceof r?this:e;if(i.reset(n),"string"===typeof t&&t.length>0&&i.hash(t),i!==this)return i}r.prototype.hash=function(t){var e,r,n,i,o;switch(o=t.length,this.len+=o,r=this.k1,n=0,this.rem){case 0:r^=o>n?65535&t.charCodeAt(n++):0;case 1:r^=o>n?(65535&t.charCodeAt(n++))<<8:0;case 2:r^=o>n?(65535&t.charCodeAt(n++))<<16:0;case 3:r^=o>n?(255&t.charCodeAt(n))<<24:0,r^=o>n?(65280&t.charCodeAt(n++))>>8:0}if(this.rem=o+this.rem&3,(o-=this.rem)>0){for(e=this.h1;e=5*(e=(e^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295)<<13|e>>>19)+3864292196&4294967295,!(n>=o);)r=65535&t.charCodeAt(n++)^(65535&t.charCodeAt(n++))<<8^(65535&t.charCodeAt(n++))<<16,r^=(255&(i=t.charCodeAt(n++)))<<24^(65280&i)>>8;switch(r=0,this.rem){case 3:r^=(65535&t.charCodeAt(n+2))<<16;case 2:r^=(65535&t.charCodeAt(n+1))<<8;case 1:r^=65535&t.charCodeAt(n)}this.h1=e}return this.k1=r,this},r.prototype.result=function(){var t,e;return t=this.k1,e=this.h1,t>0&&(e^=t=13715*(t=(t=11601*t+3432906752*(65535&t)&4294967295)<<15|t>>>17)+461832192*(65535&t)&4294967295),e^=this.len,e=51819*(e^=e>>>16)+2246770688*(65535&e)&4294967295,e=44597*(e^=e>>>13)+3266445312*(65535&e)&4294967295,(e^=e>>>16)>>>0},r.prototype.reset=function(t){return this.h1="number"===typeof t?t:0,this.rem=this.k1=this.len=0,this},e=new r,t.exports=r}()},function(module,exports,__webpack_require__){(function(global){(function(){"use strict";const state_=Symbol("state_"),storedError_=Symbol("storedError_");function isInteger(t){if(!isFinite(t))return!1;const e=Math.abs(t);return Math.floor(e)===e}function isFiniteNonNegativeNumber(t){return!("number"!=typeof t||!isFinite(t))&&t>=0}function isAbortSignal(t){if("object"!=typeof t||null===t)return!1;try{return Object.getOwnPropertyDescriptor(AbortSignal.prototype,"aborted").get.call(t),!0}catch(e){return!1}}function invokeOrNoop(t,e,r){const n=t[e];if(void 0!==n)return Function.prototype.apply.call(n,t,r)}function cloneArrayBuffer(t,e,r,n){return t.slice(e,e+r)}function transferArrayBuffer(t){return t.slice(0)}function copyDataBlockBytes(t,e,r,n,i){new Uint8Array(t,e,i).set(new Uint8Array(r,n,i))}const objectCloneMemo=new WeakMap;let sharedArrayBufferSupported_;function supportsSharedArrayBuffer(){if(void 0===sharedArrayBufferSupported_)try{new SharedArrayBuffer(16),sharedArrayBufferSupported_=!0}catch(t){sharedArrayBufferSupported_=!1}return sharedArrayBufferSupported_}function cloneValue(t){switch(typeof t){case"number":case"string":case"boolean":case"undefined":case"bigint":return t;case"object":{if(objectCloneMemo.has(t))return objectCloneMemo.get(t);if(null===t)return t;if(t instanceof Date)return new Date(t.valueOf());if(t instanceof RegExp)return new RegExp(t);if(supportsSharedArrayBuffer()&&t instanceof SharedArrayBuffer)return t;if(t instanceof ArrayBuffer){const e=cloneArrayBuffer(t,0,t.byteLength);return objectCloneMemo.set(t,e),e}if(ArrayBuffer.isView(t)){const e=cloneValue(t.buffer);let r;return r=t instanceof DataView?t.byteLength:t.length,new t.constructor(e,t.byteOffset,r)}if(t instanceof Map){const e=new Map;return objectCloneMemo.set(t,e),t.forEach(((t,r)=>e.set(r,cloneValue(t)))),e}if(t instanceof Set){const e=new Map;return objectCloneMemo.set(t,e),t.forEach(((t,r)=>e.set(r,cloneValue(t)))),e}const e={};objectCloneMemo.set(t,e);const r=Object.getOwnPropertyNames(t);for(const n of r)e[n]=cloneValue(t[n]);return e}default:throw new DOMException("Uncloneable value in stream","DataCloneError")}}function promiseCall(t,e,r){try{const n=Function.prototype.apply.call(t,e,r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}function createAlgorithmFromUnderlyingMethod(t,e,r){const n=t[e];if(void 0===n)return()=>Promise.resolve(void 0);if("function"!=typeof n)throw new TypeError('Field "'.concat(e,'" is not a function.'));return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return promiseCall(n,t,i.concat(r))}}function validateAndNormalizeHighWaterMark(t){const e=Number(t);if(isNaN(e)||e<0)throw new RangeError("highWaterMark must be a valid, non-negative integer.");return e}function makeSizeAlgorithmFromSizeFunction(t){if("function"!=typeof t&&void 0!==t)throw new TypeError("size function must be undefined or a function");return function(e){return"function"==typeof t?t(e):1}}function createControlledPromise(){const t={state:0};return t.promise=new Promise((function(e,r){t.resolve=function(r){t.state=1,e(r)},t.reject=function(e){t.state=2,r(e)}})),t}const CHUNK_SIZE=16384;class QueueImpl{constructor(){this.chunks_=[[]],this.readChunk_=this.writeChunk_=this.chunks_[0],this.length_=0}push(t){this.writeChunk_.push(t),this.length_+=1,this.writeChunk_.length===CHUNK_SIZE&&(this.writeChunk_=[],this.chunks_.push(this.writeChunk_))}front(){if(0!==this.length_)return this.readChunk_[0]}shift(){if(0===this.length_)return;const t=this.readChunk_.shift();return this.length_-=1,0===this.readChunk_.length&&this.readChunk_!==this.writeChunk_&&(this.chunks_.shift(),this.readChunk_=this.chunks_[0]),t}get length(){return this.length_}}const queue_=Symbol("queue_"),queueTotalSize_=Symbol("queueTotalSize_");function dequeueValue(t){const e=t[queue_].shift(),r=t[queueTotalSize_]-e.size;return t[queueTotalSize_]=Math.max(0,r),e.value}function enqueueValueWithSize(t,e,r){if(!isFiniteNonNegativeNumber(r))throw new RangeError("Chunk size must be a non-negative, finite numbers");t[queue_].push({value:e,size:r}),t[queueTotalSize_]+=r}function peekQueueValue(t){return t[queue_].front().value}function resetQueue(t){t[queue_]=new QueueImpl,t[queueTotalSize_]=0}const controlledReadableStream_=Symbol("controlledReadableStream_"),pullAlgorithm_=Symbol("pullAlgorithm_"),cancelAlgorithm_=Symbol("cancelAlgorithm_"),strategySizeAlgorithm_=Symbol("strategySizeAlgorithm_"),strategyHWM_=Symbol("strategyHWM_"),started_=Symbol("started_"),closeRequested_=Symbol("closeRequested_"),pullAgain_=Symbol("pullAgain_"),pulling_=Symbol("pulling_"),cancelSteps_=Symbol("cancelSteps_"),pullSteps_=Symbol("pullSteps_"),autoAllocateChunkSize_=Symbol("autoAllocateChunkSize_"),byobRequest_=Symbol("byobRequest_"),controlledReadableByteStream_=Symbol("controlledReadableByteStream_"),pendingPullIntos_=Symbol("pendingPullIntos_"),closedPromise_=Symbol("closedPromise_"),ownerReadableStream_=Symbol("ownerReadableStream_"),readRequests_=Symbol("readRequests_"),readIntoRequests_=Symbol("readIntoRequests_"),associatedReadableByteStreamController_=Symbol("associatedReadableByteStreamController_"),view_=Symbol("view_"),reader_=Symbol("reader_"),readableStreamController_=Symbol("readableStreamController_");function initializeReadableStream(t){t[state_]="readable",t[reader_]=void 0,t[storedError_]=void 0,t[readableStreamController_]=void 0}function isReadableStream(t){return"object"==typeof t&&null!==t&&readableStreamController_ in t}function isReadableStreamLocked(t){return void 0!==t[reader_]}function readableStreamGetNumReadIntoRequests(t){const e=t[reader_];return void 0===e?0:e[readIntoRequests_].length}function readableStreamGetNumReadRequests(t){const e=t[reader_];return void 0===e?0:e[readRequests_].length}function readableStreamCreateReadResult(t,e,r){const n=r?Object.prototype:null,i=Object.create(n);return i.value=t,i.done=e,i}function readableStreamAddReadIntoRequest(t,e){const r=t[reader_],n=createControlledPromise();return n.forAuthorCode=e,r[readIntoRequests_].push(n),n.promise}function readableStreamAddReadRequest(t,e){const r=t[reader_],n=createControlledPromise();return n.forAuthorCode=e,r[readRequests_].push(n),n.promise}function readableStreamHasBYOBReader(t){return isReadableStreamBYOBReader(t[reader_])}function readableStreamHasDefaultReader(t){return isReadableStreamDefaultReader(t[reader_])}function readableStreamCancel(t,e){return"closed"===t[state_]?Promise.resolve(void 0):"errored"===t[state_]?Promise.reject(t[storedError_]):(readableStreamClose(t),t[readableStreamController_][cancelSteps_](e).then((t=>{})))}function readableStreamClose(t){t[state_]="closed";const e=t[reader_];if(void 0!==e&&(e[closedPromise_].resolve(),e[closedPromise_].promise.catch((()=>{})),isReadableStreamDefaultReader(e))){for(const t of e[readRequests_])t.resolve(readableStreamCreateReadResult(void 0,!0,t.forAuthorCode));e[readRequests_]=[]}}function readableStreamError(t,e){if("readable"!==t[state_])throw new RangeError("Stream is in an invalid state");t[state_]="errored",t[storedError_]=e;const r=t[reader_];if(void 0!==r)if(r[closedPromise_].reject(e),isReadableStreamDefaultReader(r)){for(const t of r[readRequests_])t.reject(e);r[readRequests_]=[]}else{const t=r[readIntoRequests_];for(const r of t)r.reject(e);r[readIntoRequests_]=[]}}function isReadableStreamDefaultReader(t){return"object"==typeof t&&null!==t&&readRequests_ in t}function isReadableStreamBYOBReader(t){return"object"==typeof t&&null!==t&&readIntoRequests_ in t}function readableStreamReaderGenericInitialize(t,e){t[ownerReadableStream_]=e,e[reader_]=t;const r=e[state_];t[closedPromise_]=createControlledPromise(),"readable"===r||("closed"===r?t[closedPromise_].resolve(void 0):(t[closedPromise_].reject(e[storedError_]),t[closedPromise_].promise.catch((()=>{}))))}function readableStreamReaderGenericRelease(t){const e=t[ownerReadableStream_];if(void 0===e)throw new TypeError("Reader is in an inconsistent state");"readable"===e[state_]||(t[closedPromise_]=createControlledPromise()),t[closedPromise_].reject(new TypeError),t[closedPromise_].promise.catch((()=>{})),e[reader_]=void 0,t[ownerReadableStream_]=void 0}function readableStreamBYOBReaderRead(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=t[ownerReadableStream_];return"errored"===n[state_]?Promise.reject(n[storedError_]):readableByteStreamControllerPullInto(n[readableStreamController_],e,r)}function readableStreamDefaultReaderRead(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t[ownerReadableStream_];return"closed"===r[state_]?Promise.resolve(readableStreamCreateReadResult(void 0,!0,e)):"errored"===r[state_]?Promise.reject(r[storedError_]):r[readableStreamController_][pullSteps_](e)}function readableStreamFulfillReadIntoRequest(t,e,r){const n=t[reader_][readIntoRequests_].shift();n.resolve(readableStreamCreateReadResult(e,r,n.forAuthorCode))}function readableStreamFulfillReadRequest(t,e,r){const n=t[reader_][readRequests_].shift();n.resolve(readableStreamCreateReadResult(e,r,n.forAuthorCode))}function setUpReadableStreamDefaultController(t,e,r,n,i,o,s){e[controlledReadableStream_]=t,resetQueue(e),e[started_]=!1,e[closeRequested_]=!1,e[pullAgain_]=!1,e[pulling_]=!1,e[strategySizeAlgorithm_]=s,e[strategyHWM_]=o,e[pullAlgorithm_]=n,e[cancelAlgorithm_]=i,t[readableStreamController_]=e;const a=r();Promise.resolve(a).then((t=>{e[started_]=!0,readableStreamDefaultControllerCallPullIfNeeded(e)}),(t=>{readableStreamDefaultControllerError(e,t)}))}function isReadableStreamDefaultController(t){return"object"==typeof t&&null!==t&&controlledReadableStream_ in t}function readableStreamDefaultControllerHasBackpressure(t){return!readableStreamDefaultControllerShouldCallPull(t)}function readableStreamDefaultControllerCanCloseOrEnqueue(t){const e=t[controlledReadableStream_][state_];return!1===t[closeRequested_]&&"readable"===e}function readableStreamDefaultControllerGetDesiredSize(t){const e=t[controlledReadableStream_][state_];return"errored"===e?null:"closed"===e?0:t[strategyHWM_]-t[queueTotalSize_]}function readableStreamDefaultControllerClose(t){t[closeRequested_]=!0;const e=t[controlledReadableStream_];0===t[queue_].length&&(readableStreamDefaultControllerClearAlgorithms(t),readableStreamClose(e))}function readableStreamDefaultControllerEnqueue(t,e){const r=t[controlledReadableStream_];if(isReadableStreamLocked(r)&&readableStreamGetNumReadRequests(r)>0)readableStreamFulfillReadRequest(r,e,!1);else{let r;try{r=t[strategySizeAlgorithm_](e)}catch(n){throw readableStreamDefaultControllerError(t,n),n}try{enqueueValueWithSize(t,e,r)}catch(n){throw readableStreamDefaultControllerError(t,n),n}}readableStreamDefaultControllerCallPullIfNeeded(t)}function readableStreamDefaultControllerError(t,e){const r=t[controlledReadableStream_];"readable"===r[state_]&&(resetQueue(t),readableStreamDefaultControllerClearAlgorithms(t),readableStreamError(r,e))}function readableStreamDefaultControllerCallPullIfNeeded(t){if(readableStreamDefaultControllerShouldCallPull(t))if(t[pulling_])t[pullAgain_]=!0;else{if(t[pullAgain_])throw new RangeError("Stream controller is in an invalid state.");t[pulling_]=!0,t[pullAlgorithm_](t).then((e=>{t[pulling_]=!1,t[pullAgain_]&&(t[pullAgain_]=!1,readableStreamDefaultControllerCallPullIfNeeded(t))}),(e=>{readableStreamDefaultControllerError(t,e)}))}}function readableStreamDefaultControllerShouldCallPull(t){const e=t[controlledReadableStream_];if(!readableStreamDefaultControllerCanCloseOrEnqueue(t))return!1;if(!1===t[started_])return!1;if(isReadableStreamLocked(e)&&readableStreamGetNumReadRequests(e)>0)return!0;const r=readableStreamDefaultControllerGetDesiredSize(t);if(null===r)throw new RangeError("Stream is in an invalid state.");return r>0}function readableStreamDefaultControllerClearAlgorithms(t){t[pullAlgorithm_]=void 0,t[cancelAlgorithm_]=void 0,t[strategySizeAlgorithm_]=void 0}function setUpReadableByteStreamController(t,e,r,n,i,o,s){if(void 0!==t[readableStreamController_])throw new TypeError("Cannot reuse streams");if(void 0!==s&&(!isInteger(s)||s<=0))throw new RangeError("autoAllocateChunkSize must be a positive, finite integer");e[controlledReadableByteStream_]=t,e[pullAgain_]=!1,e[pulling_]=!1,readableByteStreamControllerClearPendingPullIntos(e),resetQueue(e),e[closeRequested_]=!1,e[started_]=!1,e[strategyHWM_]=validateAndNormalizeHighWaterMark(o),e[pullAlgorithm_]=n,e[cancelAlgorithm_]=i,e[autoAllocateChunkSize_]=s,e[pendingPullIntos_]=[],t[readableStreamController_]=e;const a=r();Promise.resolve(a).then((t=>{e[started_]=!0,readableByteStreamControllerCallPullIfNeeded(e)}),(t=>{readableByteStreamControllerError(e,t)}))}function isReadableStreamBYOBRequest(t){return"object"==typeof t&&null!==t&&associatedReadableByteStreamController_ in t}function isReadableByteStreamController(t){return"object"==typeof t&&null!==t&&controlledReadableByteStream_ in t}function readableByteStreamControllerCallPullIfNeeded(t){readableByteStreamControllerShouldCallPull(t)&&(t[pulling_]?t[pullAgain_]=!0:(t[pulling_]=!0,t[pullAlgorithm_](t).then((e=>{t[pulling_]=!1,t[pullAgain_]&&(t[pullAgain_]=!1,readableByteStreamControllerCallPullIfNeeded(t))}),(e=>{readableByteStreamControllerError(t,e)}))))}function readableByteStreamControllerClearAlgorithms(t){t[pullAlgorithm_]=void 0,t[cancelAlgorithm_]=void 0}function readableByteStreamControllerClearPendingPullIntos(t){readableByteStreamControllerInvalidateBYOBRequest(t),t[pendingPullIntos_]=[]}function readableByteStreamControllerClose(t){const e=t[controlledReadableByteStream_];if(t[queueTotalSize_]>0)t[closeRequested_]=!0;else{if(t[pendingPullIntos_].length>0&&t[pendingPullIntos_][0].bytesFilled>0){const e=new TypeError;throw readableByteStreamControllerError(t,e),e}readableByteStreamControllerClearAlgorithms(t),readableStreamClose(e)}}function readableByteStreamControllerCommitPullIntoDescriptor(t,e){let r=!1;"closed"===t[state_]&&(r=!0);const n=readableByteStreamControllerConvertPullIntoDescriptor(e);"default"===e.readerType?readableStreamFulfillReadRequest(t,n,r):readableStreamFulfillReadIntoRequest(t,n,r)}function readableByteStreamControllerConvertPullIntoDescriptor(t){const{bytesFilled:e,elementSize:r}=t;return new t.ctor(t.buffer,t.byteOffset,e/r)}function readableByteStreamControllerEnqueue(t,e){const r=t[controlledReadableByteStream_],{buffer:n,byteOffset:i,byteLength:o}=e,s=transferArrayBuffer(n);readableStreamHasDefaultReader(r)?0===readableStreamGetNumReadRequests(r)?readableByteStreamControllerEnqueueChunkToQueue(t,s,i,o):readableStreamFulfillReadRequest(r,new Uint8Array(s,i,o),!1):readableStreamHasBYOBReader(r)?(readableByteStreamControllerEnqueueChunkToQueue(t,s,i,o),readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)):readableByteStreamControllerEnqueueChunkToQueue(t,s,i,o),readableByteStreamControllerCallPullIfNeeded(t)}function readableByteStreamControllerEnqueueChunkToQueue(t,e,r,n){t[queue_].push({buffer:e,byteOffset:r,byteLength:n}),t[queueTotalSize_]+=n}function readableByteStreamControllerError(t,e){const r=t[controlledReadableByteStream_];"readable"===r[state_]&&(readableByteStreamControllerClearPendingPullIntos(t),resetQueue(t),readableByteStreamControllerClearAlgorithms(t),readableStreamError(r,e))}function readableByteStreamControllerFillHeadPullIntoDescriptor(t,e,r){readableByteStreamControllerInvalidateBYOBRequest(t),r.bytesFilled+=e}function readableByteStreamControllerFillPullIntoDescriptorFromQueue(t,e){const r=e.elementSize,n=e.bytesFilled-e.bytesFilled%r,i=Math.min(t[queueTotalSize_],e.byteLength-e.bytesFilled),o=e.bytesFilled+i,s=o-o%r;let a=i,c=!1;s>n&&(a=s-e.bytesFilled,c=!0);const u=t[queue_];for(;a>0;){const r=u.front(),n=Math.min(a,r.byteLength),i=e.byteOffset+e.bytesFilled;copyDataBlockBytes(e.buffer,i,r.buffer,r.byteOffset,n),r.byteLength===n?u.shift():(r.byteOffset+=n,r.byteLength-=n),t[queueTotalSize_]-=n,readableByteStreamControllerFillHeadPullIntoDescriptor(t,n,e),a-=n}return c}function readableByteStreamControllerGetDesiredSize(t){const e=t[controlledReadableByteStream_][state_];return"errored"===e?null:"closed"===e?0:t[strategyHWM_]-t[queueTotalSize_]}function readableByteStreamControllerHandleQueueDrain(t){0===t[queueTotalSize_]&&t[closeRequested_]?(readableByteStreamControllerClearAlgorithms(t),readableStreamClose(t[controlledReadableByteStream_])):readableByteStreamControllerCallPullIfNeeded(t)}function readableByteStreamControllerInvalidateBYOBRequest(t){const e=t[byobRequest_];void 0!==e&&(e[associatedReadableByteStreamController_]=void 0,e[view_]=void 0,t[byobRequest_]=void 0)}function readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){const e=t[pendingPullIntos_];for(;e.length>0;){if(0===t[queueTotalSize_])return;const r=e[0];readableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r)&&(readableByteStreamControllerShiftPendingPullInto(t),readableByteStreamControllerCommitPullIntoDescriptor(t[controlledReadableByteStream_],r))}}function readableByteStreamControllerPullInto(t,e,r){const n=t[controlledReadableByteStream_],i=e.BYTES_PER_ELEMENT||1,o=e.constructor,s=e.byteOffset,a=e.byteLength,c={buffer:transferArrayBuffer(e.buffer),byteOffset:s,byteLength:a,bytesFilled:0,elementSize:i,ctor:o,readerType:"byob"};if(t[pendingPullIntos_].length>0)return t[pendingPullIntos_].push(c),readableStreamAddReadIntoRequest(n,r);if("closed"===n[state_]){const t=new o(c.buffer,c.byteOffset,0);return Promise.resolve(readableStreamCreateReadResult(t,!0,r))}if(t[queueTotalSize_]>0){if(readableByteStreamControllerFillPullIntoDescriptorFromQueue(t,c)){const e=readableByteStreamControllerConvertPullIntoDescriptor(c);return readableByteStreamControllerHandleQueueDrain(t),Promise.resolve(readableStreamCreateReadResult(e,!1,r))}if(t[closeRequested_]){const e=new TypeError;return readableByteStreamControllerError(t,e),Promise.reject(e)}}t[pendingPullIntos_].push(c);const u=readableStreamAddReadIntoRequest(n,r);return readableByteStreamControllerCallPullIfNeeded(t),u}function readableByteStreamControllerRespond(t,e){if(!isFiniteNonNegativeNumber(e=Number(e)))throw new RangeError("bytesWritten must be a finite, non-negative number");readableByteStreamControllerRespondInternal(t,e)}function readableByteStreamControllerRespondInClosedState(t,e){e.buffer=transferArrayBuffer(e.buffer);const r=t[controlledReadableByteStream_];if(readableStreamHasBYOBReader(r))for(;readableStreamGetNumReadIntoRequests(r)>0;)readableByteStreamControllerCommitPullIntoDescriptor(r,readableByteStreamControllerShiftPendingPullInto(t))}function readableByteStreamControllerRespondInReadableState(t,e,r){if(r.bytesFilled+e>r.byteLength)throw new RangeError;if(readableByteStreamControllerFillHeadPullIntoDescriptor(t,e,r),r.bytesFilled<r.elementSize)return;readableByteStreamControllerShiftPendingPullInto(t);const n=r.bytesFilled%r.elementSize;if(n>0){const e=r.byteOffset+r.bytesFilled,i=cloneArrayBuffer(r.buffer,e-n,n);readableByteStreamControllerEnqueueChunkToQueue(t,i,0,i.byteLength)}r.buffer=transferArrayBuffer(r.buffer),r.bytesFilled=r.bytesFilled-n,readableByteStreamControllerCommitPullIntoDescriptor(t[controlledReadableByteStream_],r),readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}function readableByteStreamControllerRespondInternal(t,e){const r=t[pendingPullIntos_][0];if("closed"===t[controlledReadableByteStream_][state_]){if(0!==e)throw new TypeError;readableByteStreamControllerRespondInClosedState(t,r)}else readableByteStreamControllerRespondInReadableState(t,e,r);readableByteStreamControllerCallPullIfNeeded(t)}function readableByteStreamControllerRespondWithNewView(t,e){const r=t[pendingPullIntos_][0];if(r.byteOffset+r.bytesFilled!==e.byteOffset)throw new RangeError;if(r.byteLength!==e.byteLength)throw new RangeError;r.buffer=e.buffer,readableByteStreamControllerRespondInternal(t,e.byteLength)}function readableByteStreamControllerShiftPendingPullInto(t){const e=t[pendingPullIntos_].shift();return readableByteStreamControllerInvalidateBYOBRequest(t),e}function readableByteStreamControllerShouldCallPull(t){const e=t[controlledReadableByteStream_];return"readable"===e[state_]&&(!t[closeRequested_]&&(!!t[started_]&&(!!(readableStreamHasDefaultReader(e)&&readableStreamGetNumReadRequests(e)>0)||(!!(readableStreamHasBYOBReader(e)&&readableStreamGetNumReadIntoRequests(e)>0)||readableByteStreamControllerGetDesiredSize(t)>0))))}function setUpReadableStreamBYOBRequest(t,e,r){if(!isReadableByteStreamController(e))throw new TypeError;if(!ArrayBuffer.isView(r))throw new TypeError;t[associatedReadableByteStreamController_]=e,t[view_]=r}const backpressure_=Symbol("backpressure_"),closeRequest_=Symbol("closeRequest_"),inFlightWriteRequest_=Symbol("inFlightWriteRequest_"),inFlightCloseRequest_=Symbol("inFlightCloseRequest_"),pendingAbortRequest_=Symbol("pendingAbortRequest_"),writableStreamController_=Symbol("writableStreamController_"),writer_=Symbol("writer_"),writeRequests_=Symbol("writeRequests_"),abortAlgorithm_=Symbol("abortAlgorithm_"),closeAlgorithm_=Symbol("closeAlgorithm_"),controlledWritableStream_=Symbol("controlledWritableStream_"),started_$1=Symbol("started_"),strategyHWM_$1=Symbol("strategyHWM_"),strategySizeAlgorithm_$1=Symbol("strategySizeAlgorithm_"),writeAlgorithm_=Symbol("writeAlgorithm_"),ownerWritableStream_=Symbol("ownerWritableStream_"),closedPromise_$1=Symbol("closedPromise_"),readyPromise_=Symbol("readyPromise_"),errorSteps_=Symbol("errorSteps_"),abortSteps_=Symbol("abortSteps_");function initializeWritableStream(t){t[state_]="writable",t[storedError_]=void 0,t[writer_]=void 0,t[writableStreamController_]=void 0,t[inFlightWriteRequest_]=void 0,t[closeRequest_]=void 0,t[inFlightCloseRequest_]=void 0,t[pendingAbortRequest_]=void 0,t[writeRequests_]=[],t[backpressure_]=!1}function isWritableStream(t){return"object"==typeof t&&null!==t&&writableStreamController_ in t}function isWritableStreamLocked(t){return void 0!==t[writer_]}function writableStreamAbort(t,e){const r=t[state_];if("closed"===r||"errored"===r)return Promise.resolve(void 0);let n=t[pendingAbortRequest_];if(void 0!==n)return n.promise;let i=!1;"erroring"===r&&(i=!0,e=void 0),n={reason:e,wasAlreadyErroring:i};const o=new Promise(((t,e)=>{n.resolve=t,n.reject=e}));return n.promise=o,t[pendingAbortRequest_]=n,i||writableStreamStartErroring(t,e),o}function writableStreamAddWriteRequest(t){const e=createControlledPromise();return t[writeRequests_].push(e),e.promise}function writableStreamDealWithRejection(t,e){"writable"!==t[state_]?writableStreamFinishErroring(t):writableStreamStartErroring(t,e)}function writableStreamStartErroring(t,e){const r=t[writableStreamController_];t[state_]="erroring",t[storedError_]=e;const n=t[writer_];void 0!==n&&writableStreamDefaultWriterEnsureReadyPromiseRejected(n,e),!writableStreamHasOperationMarkedInFlight(t)&&r[started_$1]&&writableStreamFinishErroring(t)}function writableStreamFinishErroring(t){t[state_]="errored";const e=t[writableStreamController_];e[errorSteps_]();const r=t[storedError_];for(const i of t[writeRequests_])i.reject(r);t[writeRequests_]=[];const n=t[pendingAbortRequest_];if(void 0!==n)return t[pendingAbortRequest_]=void 0,n.wasAlreadyErroring?(n.reject(r),void writableStreamRejectCloseAndClosedPromiseIfNeeded(t)):void e[abortSteps_](n.reason).then((e=>{n.resolve(),writableStreamRejectCloseAndClosedPromiseIfNeeded(t)}),(e=>{n.reject(e),writableStreamRejectCloseAndClosedPromiseIfNeeded(t)}));writableStreamRejectCloseAndClosedPromiseIfNeeded(t)}function writableStreamFinishInFlightWrite(t){t[inFlightWriteRequest_].resolve(void 0),t[inFlightWriteRequest_]=void 0}function writableStreamFinishInFlightWriteWithError(t,e){t[inFlightWriteRequest_].reject(e),t[inFlightWriteRequest_]=void 0,writableStreamDealWithRejection(t,e)}function writableStreamFinishInFlightClose(t){t[inFlightCloseRequest_].resolve(void 0),t[inFlightCloseRequest_]=void 0,"erroring"===t[state_]&&(t[storedError_]=void 0,void 0!==t[pendingAbortRequest_]&&(t[pendingAbortRequest_].resolve(),t[pendingAbortRequest_]=void 0)),t[state_]="closed";const e=t[writer_];void 0!==e&&e[closedPromise_$1].resolve(void 0)}function writableStreamFinishInFlightCloseWithError(t,e){t[inFlightCloseRequest_].reject(e),t[inFlightCloseRequest_]=void 0,void 0!==t[pendingAbortRequest_]&&(t[pendingAbortRequest_].reject(e),t[pendingAbortRequest_]=void 0),writableStreamDealWithRejection(t,e)}function writableStreamCloseQueuedOrInFlight(t){return void 0!==t[closeRequest_]||void 0!==t[inFlightCloseRequest_]}function writableStreamHasOperationMarkedInFlight(t){return void 0!==t[inFlightWriteRequest_]||void 0!==t[inFlightCloseRequest_]}function writableStreamMarkCloseRequestInFlight(t){t[inFlightCloseRequest_]=t[closeRequest_],t[closeRequest_]=void 0}function writableStreamMarkFirstWriteRequestInFlight(t){const e=t[writeRequests_].shift();t[inFlightWriteRequest_]=e}function writableStreamRejectCloseAndClosedPromiseIfNeeded(t){const e=t[closeRequest_];void 0!==e&&(e.reject(t[storedError_]),t[closeRequest_]=void 0);const r=t[writer_];void 0!==r&&(r[closedPromise_$1].reject(t[storedError_]),r[closedPromise_$1].promise.catch((()=>{})))}function writableStreamUpdateBackpressure(t,e){const r=t[writer_];void 0!==r&&e!==t[backpressure_]&&(e?r[readyPromise_]=createControlledPromise():r[readyPromise_].resolve(void 0)),t[backpressure_]=e}function isWritableStreamDefaultWriter(t){return"object"==typeof t&&null!==t&&ownerWritableStream_ in t}function writableStreamDefaultWriterAbort(t,e){return writableStreamAbort(t[ownerWritableStream_],e)}function writableStreamDefaultWriterClose(t){const e=t[ownerWritableStream_],r=e[state_];if("closed"===r||"errored"===r)return Promise.reject(new TypeError("Writer stream is already closed or errored"));const n=createControlledPromise();return e[closeRequest_]=n,e[backpressure_]&&"writable"===r&&t[readyPromise_].resolve(void 0),writableStreamDefaultControllerClose(e[writableStreamController_]),n.promise}function writableStreamDefaultWriterCloseWithErrorPropagation(t){const e=t[ownerWritableStream_],r=e[state_];return writableStreamCloseQueuedOrInFlight(e)||"closed"===r?Promise.resolve(void 0):"errored"===r?Promise.reject(e[storedError_]):writableStreamDefaultWriterClose(t)}function writableStreamDefaultWriterEnsureClosedPromiseRejected(t,e){const r=t[closedPromise_$1];0===r.state?r.reject(e):(t[closedPromise_$1]=createControlledPromise(),t[closedPromise_$1].reject(e)),t[closedPromise_$1].promise.catch((()=>{}))}function writableStreamDefaultWriterEnsureReadyPromiseRejected(t,e){const r=t[readyPromise_];0===r.state?r.reject(e):(t[readyPromise_]=createControlledPromise(),t[readyPromise_].reject(e)),t[readyPromise_].promise.catch((()=>{}))}function writableStreamDefaultWriterGetDesiredSize(t){const e=t[ownerWritableStream_],r=e[state_];return"errored"===r||"erroring"===r?null:"closed"===r?0:writableStreamDefaultControllerGetDesiredSize(e[writableStreamController_])}function writableStreamDefaultWriterRelease(t){const e=t[ownerWritableStream_],r=new TypeError;writableStreamDefaultWriterEnsureReadyPromiseRejected(t,r),writableStreamDefaultWriterEnsureClosedPromiseRejected(t,r),e[writer_]=void 0,t[ownerWritableStream_]=void 0}function writableStreamDefaultWriterWrite(t,e){const r=t[ownerWritableStream_],n=r[writableStreamController_],i=writableStreamDefaultControllerGetChunkSize(n,e);if(t[ownerWritableStream_]!==r)return Promise.reject(new TypeError);const o=r[state_];if("errored"===o)return Promise.reject(r[storedError_]);if(writableStreamCloseQueuedOrInFlight(r)||"closed"===o)return Promise.reject(new TypeError("Cannot write to a closing or closed stream"));if("erroring"===o)return Promise.reject(r[storedError_]);const s=writableStreamAddWriteRequest(r);return writableStreamDefaultControllerWrite(n,e,i),s}function setUpWritableStreamDefaultController(t,e,r,n,i,o,s,a){if(!isWritableStream(t))throw new TypeError;if(void 0!==t[writableStreamController_])throw new TypeError;e[controlledWritableStream_]=t,t[writableStreamController_]=e,resetQueue(e),e[started_$1]=!1,e[strategySizeAlgorithm_$1]=a,e[strategyHWM_$1]=s,e[writeAlgorithm_]=n,e[closeAlgorithm_]=i,e[abortAlgorithm_]=o;const c=writableStreamDefaultControllerGetBackpressure(e);writableStreamUpdateBackpressure(t,c);const u=r();Promise.resolve(u).then((t=>{e[started_$1]=!0,writableStreamDefaultControllerAdvanceQueueIfNeeded(e)}),(r=>{e[started_$1]=!0,writableStreamDealWithRejection(t,r)}))}function isWritableStreamDefaultController(t){return"object"==typeof t&&null!==t&&controlledWritableStream_ in t}function writableStreamDefaultControllerClearAlgorithms(t){t[writeAlgorithm_]=void 0,t[closeAlgorithm_]=void 0,t[abortAlgorithm_]=void 0,t[strategySizeAlgorithm_$1]=void 0}function writableStreamDefaultControllerClose(t){enqueueValueWithSize(t,"close",0),writableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function writableStreamDefaultControllerGetChunkSize(t,e){let r;try{r=t[strategySizeAlgorithm_$1](e)}catch(n){writableStreamDefaultControllerErrorIfNeeded(t,n),r=1}return r}function writableStreamDefaultControllerGetDesiredSize(t){return t[strategyHWM_$1]-t[queueTotalSize_]}function writableStreamDefaultControllerWrite(t,e,r){try{enqueueValueWithSize(t,{chunk:e},r)}catch(i){return void writableStreamDefaultControllerErrorIfNeeded(t,i)}const n=t[controlledWritableStream_];writableStreamCloseQueuedOrInFlight(n)||"writable"!==n[state_]||writableStreamUpdateBackpressure(n,writableStreamDefaultControllerGetBackpressure(t)),writableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function writableStreamDefaultControllerAdvanceQueueIfNeeded(t){if(!t[started_$1])return;const e=t[controlledWritableStream_];if(void 0!==e[inFlightWriteRequest_])return;const r=e[state_];if("closed"===r||"errored"===r)return;if("erroring"===r)return void writableStreamFinishErroring(e);if(0===t[queue_].length)return;const n=peekQueueValue(t);"close"===n?writableStreamDefaultControllerProcessClose(t):writableStreamDefaultControllerProcessWrite(t,n.chunk)}function writableStreamDefaultControllerErrorIfNeeded(t,e){"writable"===t[controlledWritableStream_][state_]&&writableStreamDefaultControllerError(t,e)}function writableStreamDefaultControllerProcessClose(t){const e=t[controlledWritableStream_];writableStreamMarkCloseRequestInFlight(e),dequeueValue(t);const r=t[closeAlgorithm_]();writableStreamDefaultControllerClearAlgorithms(t),r.then((t=>{writableStreamFinishInFlightClose(e)}),(t=>{writableStreamFinishInFlightCloseWithError(e,t)}))}function writableStreamDefaultControllerProcessWrite(t,e){const r=t[controlledWritableStream_];writableStreamMarkFirstWriteRequestInFlight(r),t[writeAlgorithm_](e).then((e=>{writableStreamFinishInFlightWrite(r);const n=r[state_];if(dequeueValue(t),!writableStreamCloseQueuedOrInFlight(r)&&"writable"===n){const e=writableStreamDefaultControllerGetBackpressure(t);writableStreamUpdateBackpressure(r,e)}writableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(e=>{"writable"===r[state_]&&writableStreamDefaultControllerClearAlgorithms(t),writableStreamFinishInFlightWriteWithError(r,e)}))}function writableStreamDefaultControllerGetBackpressure(t){return writableStreamDefaultControllerGetDesiredSize(t)<=0}function writableStreamDefaultControllerError(t,e){const r=t[controlledWritableStream_];writableStreamDefaultControllerClearAlgorithms(t),writableStreamStartErroring(r,e)}class ReadableStreamDefaultReader{constructor(t){if(!isReadableStream(t))throw new TypeError;if(isReadableStreamLocked(t))throw new TypeError("The stream is locked.");readableStreamReaderGenericInitialize(this,t),this[readRequests_]=[]}get closed(){return isReadableStreamDefaultReader(this)?this[closedPromise_].promise:Promise.reject(new TypeError)}cancel(t){if(!isReadableStreamDefaultReader(this))return Promise.reject(new TypeError);const e=this[ownerReadableStream_];return void 0===e?Promise.reject(new TypeError("Reader is not associated with a stream")):readableStreamCancel(e,t)}read(){return isReadableStreamDefaultReader(this)?void 0===this[ownerReadableStream_]?Promise.reject(new TypeError("Reader is not associated with a stream")):readableStreamDefaultReaderRead(this,!0):Promise.reject(new TypeError)}releaseLock(){if(!isReadableStreamDefaultReader(this))throw new TypeError;if(void 0!==this[ownerReadableStream_]){if(0!==this[readRequests_].length)throw new TypeError("Cannot release a stream with pending read requests");readableStreamReaderGenericRelease(this)}}}class WritableStreamDefaultWriter{constructor(t){if(!isWritableStream(t))throw new TypeError;if(isWritableStreamLocked(t))throw new TypeError("Stream is already locked");this[ownerWritableStream_]=t,t[writer_]=this;const e=createControlledPromise(),r=createControlledPromise();this[readyPromise_]=e,this[closedPromise_$1]=r;const n=t[state_];if("writable"===n)!writableStreamCloseQueuedOrInFlight(t)&&t[backpressure_]||e.resolve(void 0);else if("erroring"===n)e.reject(t[storedError_]),e.promise.catch((()=>{}));else if("closed"===n)e.resolve(void 0),r.resolve(void 0);else{const n=t[storedError_];e.reject(n),e.promise.catch((()=>{})),r.reject(n),r.promise.catch((()=>{}))}}abort(t){return isWritableStreamDefaultWriter(this)?void 0===this[ownerWritableStream_]?Promise.reject(new TypeError("Writer is not connected to a stream")):writableStreamDefaultWriterAbort(this,t):Promise.reject(new TypeError)}close(){if(!isWritableStreamDefaultWriter(this))return Promise.reject(new TypeError);const t=this[ownerWritableStream_];return void 0===t?Promise.reject(new TypeError("Writer is not connected to a stream")):writableStreamCloseQueuedOrInFlight(t)?Promise.reject(new TypeError):writableStreamDefaultWriterClose(this)}releaseLock(){void 0!==this[ownerWritableStream_]&&writableStreamDefaultWriterRelease(this)}write(t){return isWritableStreamDefaultWriter(this)?void 0===this[ownerWritableStream_]?Promise.reject(new TypeError("Writer is not connected to a stream")):writableStreamDefaultWriterWrite(this,t):Promise.reject(new TypeError)}get closed(){return isWritableStreamDefaultWriter(this)?this[closedPromise_$1].promise:Promise.reject(new TypeError)}get desiredSize(){if(!isWritableStreamDefaultWriter(this))throw new TypeError;if(void 0===this[ownerWritableStream_])throw new TypeError("Writer is not connected to stream");return writableStreamDefaultWriterGetDesiredSize(this)}get ready(){return isWritableStreamDefaultWriter(this)?this[readyPromise_].promise:Promise.reject(new TypeError)}}function pipeTo(t,e,r){const n=!!r.preventClose,i=!!r.preventAbort,o=!!r.preventCancel,s=r.signal;let a=!1,c=Promise.resolve();const u=createControlledPromise(),h=new ReadableStreamDefaultReader(t),l=new WritableStreamDefaultWriter(e);let f;function d(t,e,r){"errored"===t[state_]?r(t[storedError_]):e.catch(r)}if(void 0!==s&&(f=()=>{const r=new DOMException("Aborted","AbortError"),n=[];!1===i&&n.push((()=>"writable"===e[state_]?writableStreamAbort(e,r):Promise.resolve())),!1===o&&n.push((()=>"readable"===t[state_]?readableStreamCancel(t,r):Promise.resolve())),y((()=>Promise.all(n.map((t=>t()))).then((t=>{}))),{actualError:r})},!0===s.aborted?f():s.addEventListener("abort",f)),d(t,h[closedPromise_].promise,(t=>{y(i?void 0:()=>writableStreamAbort(e,t),{actualError:t})})),d(e,l[closedPromise_$1].promise,(e=>{y(o?void 0:()=>readableStreamCancel(t,e),{actualError:e})})),function(t,e,r){"closed"===t[state_]?r():e.then(r)}(t,h[closedPromise_].promise,(()=>{n?y():y((()=>writableStreamDefaultWriterCloseWithErrorPropagation(l)))})),writableStreamCloseQueuedOrInFlight(e)||"closed"===e[state_]){const e=new TypeError;y(o?void 0:()=>readableStreamCancel(t,e),{actualError:e})}function p(){const t=c;return c.then((()=>t===c?void 0:p()))}function m(){return"writable"!==e[state_]||writableStreamCloseQueuedOrInFlight(e)?void 0:p()}function y(t,e){if(a)return;function r(){t().then((t=>g(e)),(t=>g({actualError:t})))}a=!0,void 0===t&&(t=()=>Promise.resolve());const n=m();n?n.then(r):r()}function g(t){writableStreamDefaultWriterRelease(l),readableStreamReaderGenericRelease(h),s&&f&&s.removeEventListener("abort",f),t?u.reject(t.actualError):u.resolve(void 0)}return function t(){a||l[readyPromise_].promise.then((()=>{readableStreamDefaultReaderRead(h).then((e=>{let{value:r,done:n}=e;n||(c=writableStreamDefaultWriterWrite(l,r).catch((()=>{})),t())}),(t=>{c=Promise.resolve()}))}))}(),u.promise}class ReadableStreamDefaultController{constructor(){throw new TypeError}get desiredSize(){return readableStreamDefaultControllerGetDesiredSize(this)}close(){if(!isReadableStreamDefaultController(this))throw new TypeError;if(!readableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("Cannot close, the stream is already closing or not readable");readableStreamDefaultControllerClose(this)}enqueue(t){if(!isReadableStreamDefaultController(this))throw new TypeError;if(!readableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("Cannot enqueue, the stream is closing or not readable");readableStreamDefaultControllerEnqueue(this,t)}error(t){if(!isReadableStreamDefaultController(this))throw new TypeError;readableStreamDefaultControllerError(this,t)}[cancelSteps_](t){resetQueue(this);const e=this[cancelAlgorithm_](t);return readableStreamDefaultControllerClearAlgorithms(this),e}[pullSteps_](t){const e=this[controlledReadableStream_];if(this[queue_].length>0){const r=dequeueValue(this);return this[closeRequested_]&&0===this[queue_].length?(readableStreamDefaultControllerClearAlgorithms(this),readableStreamClose(e)):readableStreamDefaultControllerCallPullIfNeeded(this),Promise.resolve(readableStreamCreateReadResult(r,!1,t))}const r=readableStreamAddReadRequest(e,t);return readableStreamDefaultControllerCallPullIfNeeded(this),r}}function setUpReadableStreamDefaultControllerFromUnderlyingSource(t,e,r,n){const i=Object.create(ReadableStreamDefaultController.prototype),o=createAlgorithmFromUnderlyingMethod(e,"pull",[i]),s=createAlgorithmFromUnderlyingMethod(e,"cancel",[]);setUpReadableStreamDefaultController(t,i,(()=>invokeOrNoop(e,"start",[i])),o,s,r,n)}class ReadableStreamBYOBRequest{constructor(){throw new TypeError}get view(){if(!isReadableStreamBYOBRequest(this))throw new TypeError;return this[view_]}respond(t){if(!isReadableStreamBYOBRequest(this))throw new TypeError;if(void 0===this[associatedReadableByteStreamController_])throw new TypeError;return readableByteStreamControllerRespond(this[associatedReadableByteStreamController_],t)}respondWithNewView(t){if(!isReadableStreamBYOBRequest(this))throw new TypeError;if(void 0===this[associatedReadableByteStreamController_])throw new TypeError;if(!ArrayBuffer.isView(t))throw new TypeError("view parameter must be a TypedArray");return readableByteStreamControllerRespondWithNewView(this[associatedReadableByteStreamController_],t)}}class ReadableByteStreamController{constructor(){throw new TypeError}get byobRequest(){if(!isReadableByteStreamController(this))throw new TypeError;if(void 0===this[byobRequest_]&&this[pendingPullIntos_].length>0){const t=this[pendingPullIntos_][0],e=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),r=Object.create(ReadableStreamBYOBRequest.prototype);setUpReadableStreamBYOBRequest(r,this,e),this[byobRequest_]=r}return this[byobRequest_]}get desiredSize(){if(!isReadableByteStreamController(this))throw new TypeError;return readableByteStreamControllerGetDesiredSize(this)}close(){if(!isReadableByteStreamController(this))throw new TypeError;if(this[closeRequested_])throw new TypeError("Stream is already closing");if("readable"!==this[controlledReadableByteStream_][state_])throw new TypeError("Stream is closed or errored");readableByteStreamControllerClose(this)}enqueue(t){if(!isReadableByteStreamController(this))throw new TypeError;if(this[closeRequested_])throw new TypeError("Stream is already closing");if("readable"!==this[controlledReadableByteStream_][state_])throw new TypeError("Stream is closed or errored");if(!ArrayBuffer.isView(t))throw new TypeError("chunk must be a valid ArrayBufferView");return readableByteStreamControllerEnqueue(this,t)}error(t){if(!isReadableByteStreamController(this))throw new TypeError;readableByteStreamControllerError(this,t)}[cancelSteps_](t){this[pendingPullIntos_].length>0&&(this[pendingPullIntos_][0].bytesFilled=0),resetQueue(this);const e=this[cancelAlgorithm_](t);return readableByteStreamControllerClearAlgorithms(this),e}[pullSteps_](t){const e=this[controlledReadableByteStream_];if(this[queueTotalSize_]>0){const e=this[queue_].shift();this[queueTotalSize_]-=e.byteLength,readableByteStreamControllerHandleQueueDrain(this);const r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Promise.resolve(readableStreamCreateReadResult(r,!1,t))}const r=this[autoAllocateChunkSize_];if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(i){return Promise.reject(i)}const e={buffer:t,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this[pendingPullIntos_].push(e)}const n=readableStreamAddReadRequest(e,t);return readableByteStreamControllerCallPullIfNeeded(this),n}}function setUpReadableByteStreamControllerFromUnderlyingSource(t,e,r){const n=Object.create(ReadableByteStreamController.prototype),i=createAlgorithmFromUnderlyingMethod(e,"pull",[n]),o=createAlgorithmFromUnderlyingMethod(e,"cancel",[]);let s=e.autoAllocateChunkSize;if(void 0!==s&&(s=Number(s),!isInteger(s)||s<=0))throw new RangeError("autoAllocateChunkSize must be a positive, finite integer");setUpReadableByteStreamController(t,n,(()=>invokeOrNoop(e,"start",[n])),i,o,r,s)}class SDReadableStreamBYOBReader{constructor(t){if(!isReadableStream(t))throw new TypeError;if(!isReadableByteStreamController(t[readableStreamController_]))throw new TypeError;if(isReadableStreamLocked(t))throw new TypeError("The stream is locked.");readableStreamReaderGenericInitialize(this,t),this[readIntoRequests_]=[]}get closed(){return isReadableStreamBYOBReader(this)?this[closedPromise_].promise:Promise.reject(new TypeError)}cancel(t){if(!isReadableStreamBYOBReader(this))return Promise.reject(new TypeError);const e=this[ownerReadableStream_];return void 0===e?Promise.reject(new TypeError("Reader is not associated with a stream")):readableStreamCancel(e,t)}read(t){return isReadableStreamBYOBReader(this)?void 0===this[ownerReadableStream_]?Promise.reject(new TypeError("Reader is not associated with a stream")):ArrayBuffer.isView(t)?0===t.byteLength?Promise.reject(new TypeError("supplied buffer view must be > 0 bytes")):readableStreamBYOBReaderRead(this,t,!0):Promise.reject(new TypeError("view argument must be a valid ArrayBufferView")):Promise.reject(new TypeError)}releaseLock(){if(!isReadableStreamBYOBReader(this))throw new TypeError;if(void 0===this[ownerReadableStream_])throw new TypeError("Reader is not associated with a stream");if(this[readIntoRequests_].length>0)throw new TypeError;readableStreamReaderGenericRelease(this)}}class SDReadableStream{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};initializeReadableStream(this);const r=e.size,n=e.highWaterMark,i=t.type;if(void 0===i){const e=makeSizeAlgorithmFromSizeFunction(r);setUpReadableStreamDefaultControllerFromUnderlyingSource(this,t,validateAndNormalizeHighWaterMark(void 0===n?1:n),e)}else{if("bytes"!==String(i))throw new RangeError("The underlying source's `type` field must be undefined or 'bytes'");if(void 0!==r)throw new RangeError("bytes streams cannot have a strategy with a `size` field");setUpReadableByteStreamControllerFromUnderlyingSource(this,t,validateAndNormalizeHighWaterMark(void 0===n?0:n))}}get locked(){return isReadableStreamLocked(this)}getReader(t){if(!isReadableStream(this))throw new TypeError;void 0===t&&(t={});const{mode:e}=t;if(void 0===e)return new ReadableStreamDefaultReader(this);if("byob"===String(e))return new SDReadableStreamBYOBReader(this);throw RangeError("mode option must be undefined or `byob`")}cancel(t){return isReadableStream(this)?isReadableStreamLocked(this)?Promise.reject(new TypeError("Cannot cancel a locked stream")):readableStreamCancel(this,t):Promise.reject(new TypeError)}tee(){return readableStreamTee(this,!1)}pipeThrough(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{readable:r,writable:n}=t;if(!isReadableStream(this))throw new TypeError;if(!isWritableStream(n))throw new TypeError("writable must be a WritableStream");if(!isReadableStream(r))throw new TypeError("readable must be a ReadableStream");if(void 0!==e.signal&&!isAbortSignal(e.signal))throw new TypeError("options.signal must be an AbortSignal instance");if(isReadableStreamLocked(this))throw new TypeError("Cannot pipeThrough on a locked stream");if(isWritableStreamLocked(n))throw new TypeError("Cannot pipeThrough to a locked stream");return pipeTo(this,n,e).catch((()=>{})),r}pipeTo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return isReadableStream(this)?isWritableStream(t)?void 0===e.signal||isAbortSignal(e.signal)?isReadableStreamLocked(this)?Promise.reject(new TypeError("Cannot pipe from a locked stream")):isWritableStreamLocked(t)?Promise.reject(new TypeError("Cannot pipe to a locked stream")):pipeTo(this,t,e):Promise.reject(new TypeError("options.signal must be an AbortSignal instance")):Promise.reject(new TypeError("destination must be a WritableStream")):Promise.reject(new TypeError)}}function createReadableStream(t,e,r,n,i){void 0===n&&(n=1),void 0===i&&(i=()=>1);const o=Object.create(SDReadableStream.prototype);return initializeReadableStream(o),setUpReadableStreamDefaultController(o,Object.create(ReadableStreamDefaultController.prototype),t,e,r,n,i),o}function readableStreamTee(t,e){if(!isReadableStream(t))throw new TypeError;const r=new ReadableStreamDefaultReader(t);let n,i,o,s,a,c=!1,u=!1,h=!1;const l=new Promise((t=>a=t)),f=()=>readableStreamDefaultReaderRead(r).then((t=>{let{value:r,done:n}=t;if(n&&!c&&(u||readableStreamDefaultControllerClose(o[readableStreamController_]),h||readableStreamDefaultControllerClose(s[readableStreamController_]),c=!0),c)return;const i=r;let a=r;u||readableStreamDefaultControllerEnqueue(o[readableStreamController_],i),h||(e&&(a=cloneValue(a)),readableStreamDefaultControllerEnqueue(s[readableStreamController_],a))})),d=()=>{};return o=createReadableStream(d,f,(e=>{if(u=!0,n=e,h){const e=readableStreamCancel(t,[n,i]);a(e)}return l})),s=createReadableStream(d,f,(e=>{if(h=!0,i=e,u){const e=readableStreamCancel(t,[n,i]);a(e)}return l})),r[closedPromise_].promise.catch((t=>{c||(readableStreamDefaultControllerError(o[readableStreamController_],t),readableStreamDefaultControllerError(s[readableStreamController_],t),c=!0)})),[o,s]}class WritableStreamDefaultController{constructor(){throw new TypeError}error(t){if(!isWritableStreamDefaultController(this))throw new TypeError;"writable"===this[controlledWritableStream_][state_]&&writableStreamDefaultControllerError(this,t)}[abortSteps_](t){const e=this[abortAlgorithm_](t);return writableStreamDefaultControllerClearAlgorithms(this),e}[errorSteps_](){resetQueue(this)}}function setUpWritableStreamDefaultControllerFromUnderlyingSink(t,e,r,n){const i=Object.create(WritableStreamDefaultController.prototype),o=createAlgorithmFromUnderlyingMethod(e,"write",[i]),s=createAlgorithmFromUnderlyingMethod(e,"close",[]),a=createAlgorithmFromUnderlyingMethod(e,"abort",[]);setUpWritableStreamDefaultController(t,i,(function(){return invokeOrNoop(e,"start",[i])}),o,s,a,r,n)}class WritableStream{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};initializeWritableStream(this);const r=e.size,n=e.highWaterMark;if(void 0!==t.type)throw new RangeError("The type of an underlying sink must be undefined");const i=makeSizeAlgorithmFromSizeFunction(r);setUpWritableStreamDefaultControllerFromUnderlyingSink(this,t,validateAndNormalizeHighWaterMark(void 0===n?1:n),i)}get locked(){if(!isWritableStream(this))throw new TypeError;return isWritableStreamLocked(this)}abort(t){return isWritableStream(this)?isWritableStreamLocked(this)?Promise.reject(new TypeError("Cannot abort a locked stream")):writableStreamAbort(this,t):Promise.reject(new TypeError)}getWriter(){if(!isWritableStream(this))throw new TypeError;return new WritableStreamDefaultWriter(this)}}function createWritableStream(t,e,r,n,i,o){void 0===i&&(i=1),void 0===o&&(o=()=>1);const s=Object.create(WritableStream.prototype);return initializeWritableStream(s),setUpWritableStreamDefaultController(s,Object.create(WritableStreamDefaultController.prototype),t,e,r,n,i,o),s}const backpressure_$1=Symbol("backpressure_"),backpressureChangePromise_=Symbol("backpressureChangePromise_"),readable_=Symbol("readable_"),transformStreamController_=Symbol("transformStreamController_"),writable_=Symbol("writable_"),controlledTransformStream_=Symbol("controlledTransformStream_"),flushAlgorithm_=Symbol("flushAlgorithm_"),transformAlgorithm_=Symbol("transformAlgorithm_");function isTransformStream(t){return"object"==typeof t&&null!==t&&transformStreamController_ in t}function initializeTransformStream(t,e,r,n,i,o){const s=function(){return e};t[writable_]=createWritableStream(s,(function(e){return transformStreamDefaultSinkWriteAlgorithm(t,e)}),(function(){return transformStreamDefaultSinkCloseAlgorithm(t)}),(function(e){return transformStreamDefaultSinkAbortAlgorithm(t,e)}),r,n),t[readable_]=createReadableStream(s,(function(){return transformStreamDefaultSourcePullAlgorithm(t)}),(function(e){return transformStreamErrorWritableAndUnblockWrite(t,e),Promise.resolve(void 0)}),i,o),t[backpressure_$1]=void 0,t[backpressureChangePromise_]=void 0,transformStreamSetBackpressure(t,!0),t[transformStreamController_]=void 0}function transformStreamError(t,e){readableStreamDefaultControllerError(t[readable_][readableStreamController_],e),transformStreamErrorWritableAndUnblockWrite(t,e)}function transformStreamErrorWritableAndUnblockWrite(t,e){transformStreamDefaultControllerClearAlgorithms(t[transformStreamController_]),writableStreamDefaultControllerErrorIfNeeded(t[writable_][writableStreamController_],e),t[backpressure_$1]&&transformStreamSetBackpressure(t,!1)}function transformStreamSetBackpressure(t,e){void 0!==t[backpressure_$1]&&t[backpressureChangePromise_].resolve(void 0),t[backpressureChangePromise_]=createControlledPromise(),t[backpressure_$1]=e}function isTransformStreamDefaultController(t){return"object"==typeof t&&null!==t&&controlledTransformStream_ in t}function setUpTransformStreamDefaultController(t,e,r,n){e[controlledTransformStream_]=t,t[transformStreamController_]=e,e[transformAlgorithm_]=r,e[flushAlgorithm_]=n}function transformStreamDefaultControllerClearAlgorithms(t){t[transformAlgorithm_]=void 0,t[flushAlgorithm_]=void 0}function transformStreamDefaultControllerEnqueue(t,e){const r=t[controlledTransformStream_],n=r[readable_][readableStreamController_];if(!readableStreamDefaultControllerCanCloseOrEnqueue(n))throw new TypeError;try{readableStreamDefaultControllerEnqueue(n,e)}catch(i){throw transformStreamErrorWritableAndUnblockWrite(r,i),r[readable_][storedError_]}readableStreamDefaultControllerHasBackpressure(n)!==r[backpressure_$1]&&transformStreamSetBackpressure(r,!0)}function transformStreamDefaultControllerError(t,e){transformStreamError(t[controlledTransformStream_],e)}function transformStreamDefaultControllerPerformTransform(t,e){return t[transformAlgorithm_](e).catch((e=>{throw transformStreamError(t[controlledTransformStream_],e),e}))}function transformStreamDefaultControllerTerminate(t){const e=t[controlledTransformStream_],r=e[readable_][readableStreamController_];readableStreamDefaultControllerCanCloseOrEnqueue(r)&&readableStreamDefaultControllerClose(r),transformStreamErrorWritableAndUnblockWrite(e,new TypeError("The transform stream has been terminated"))}function transformStreamDefaultSinkWriteAlgorithm(t,e){const r=t[transformStreamController_];return t[backpressure_$1]?t[backpressureChangePromise_].promise.then((n=>{const i=t[writable_];if("erroring"===i[state_])throw i[storedError_];return transformStreamDefaultControllerPerformTransform(r,e)})):transformStreamDefaultControllerPerformTransform(r,e)}function transformStreamDefaultSinkAbortAlgorithm(t,e){return transformStreamError(t,e),Promise.resolve(void 0)}function transformStreamDefaultSinkCloseAlgorithm(t){const e=t[readable_],r=t[transformStreamController_],n=r[flushAlgorithm_]();return transformStreamDefaultControllerClearAlgorithms(r),n.then((t=>{if("errored"===e[state_])throw e[storedError_];const r=e[readableStreamController_];readableStreamDefaultControllerCanCloseOrEnqueue(r)&&readableStreamDefaultControllerClose(r)}),(r=>{throw transformStreamError(t,r),e[storedError_]}))}function transformStreamDefaultSourcePullAlgorithm(t){return transformStreamSetBackpressure(t,!1),t[backpressureChangePromise_].promise}class TransformStreamDefaultController{constructor(){throw new TypeError}get desiredSize(){if(!isTransformStreamDefaultController(this))throw new TypeError;return readableStreamDefaultControllerGetDesiredSize(this[controlledTransformStream_][readable_][readableStreamController_])}enqueue(t){if(!isTransformStreamDefaultController(this))throw new TypeError;transformStreamDefaultControllerEnqueue(this,t)}error(t){if(!isTransformStreamDefaultController(this))throw new TypeError;transformStreamDefaultControllerError(this,t)}terminate(){if(!isTransformStreamDefaultController(this))throw new TypeError;transformStreamDefaultControllerTerminate(this)}}class TransformStream$1{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.size,i=e.highWaterMark,o=r.size,s=r.highWaterMark;if(void 0!==t.writableType)throw new RangeError("The transformer's `writableType` field must be undefined");const a=makeSizeAlgorithmFromSizeFunction(n),c=validateAndNormalizeHighWaterMark(void 0===i?1:i);if(void 0!==t.readableType)throw new RangeError("The transformer's `readableType` field must be undefined");const u=makeSizeAlgorithmFromSizeFunction(o),h=validateAndNormalizeHighWaterMark(void 0===s?0:s),l=createControlledPromise();initializeTransformStream(this,l.promise,c,a,h,u),setUpTransformStreamDefaultControllerFromTransformer(this,t);const f=invokeOrNoop(t,"start",[this[transformStreamController_]]);l.resolve(f)}get readable(){if(!isTransformStream(this))throw new TypeError;return this[readable_]}get writable(){if(!isTransformStream(this))throw new TypeError;return this[writable_]}}function setUpTransformStreamDefaultControllerFromTransformer(t,e){const r=Object.create(TransformStreamDefaultController.prototype);let n;const i=e.transform;if(void 0!==i){if("function"!=typeof i)throw new TypeError("`transform` field of the transformer must be a function");n=t=>promiseCall(i,e,[t,r])}else n=function(t){try{transformStreamDefaultControllerEnqueue(r,t)}catch(e){return Promise.reject(e)}return Promise.resolve(void 0)};const o=createAlgorithmFromUnderlyingMethod(e,"flush",[r]);setUpTransformStreamDefaultController(t,r,n,o)}class ByteLengthQueuingStrategy{constructor(t){this.highWaterMark=t.highWaterMark}size(t){return t.byteLength}}class CountQueuingStrategy{constructor(t){this.highWaterMark=t.highWaterMark}size(){return 1}}function wrapReadableStream(t,e){let r;return new e({start(e){r=t.getReader(),r.closed.catch((t=>{e.error(t)}))},pull:t=>r.read().then((e=>{let{value:r,done:n}=e;n?t.close():t.enqueue(r)}),(e=>{t.error(e)})),cancel(t){r.cancel(t)}})}function getMIMETypeFromHeadersInit(t){const e="Content-Type";if(void 0===t)return"";if(t instanceof Headers)return t.get(e)||"";if(Array.isArray(t)){const r=t.find((t=>Array.isArray(t)&&2===t.length&&t[0]===e));return r?r[1]:""}return t[e]||""}function resolveRequestInitStream(t,e,r){if(void 0===t)return Promise.resolve(t);const n=t.body;let i;if(n&&"object"==typeof n&&(e&&n instanceof e||n instanceof r)&&(i=n),!i)return Promise.resolve(t);const o=getMIMETypeFromHeadersInit(t.headers);return readAllBytesFromStream(i.getReader(),o).then((e=>(t.body=e,t)))}function createAdaptedFetch(t,e,r,n,i){return function(o,s){return resolveRequestInitStream(s,r,n).then((r=>t.call(void 0,o,r).then((t=>{if("body"in t){const r=t;let o,a;t=new Proxy(r,{get(c,u,h){let l;return"body"===u?(void 0===o&&(o=wrapReadableStream(r.body,n)),l=o):"clone"===u?(void 0===a&&(a=function(){const[r,n]=i(t.body,!0);return o=r,createResponseProxyWithStreamBody(e,i,n,s)}),l=a):l=c[u],"function"==typeof l?function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return l.apply(c,e)}:l}})}else t.body=new n({pull:e=>t.arrayBuffer().then((t=>{e.enqueue(new Uint8Array(t)),e.close()}),(t=>{e.error(t)}))}),t.clone=function(){const[r,n]=i(t.body,!0);return t.body=r,createResponseProxyWithStreamBody(e,i,n,s)};return t}))))}}function readAllBytesFromStream(t,e){return new Promise(((r,n)=>{const i=[];!function o(){t.read().then((t=>{let{value:s,done:a}=t;a?function(){0===i.length&&i.push(new Uint8Array(0));const t=new Blob(i,{type:e});r(t)}():s instanceof Uint8Array?(i.push(s),o()):n(new TypeError("A ReadableStream body must only yield Uint8Array values"))}),(t=>{n(t)}))}()}))}function createResponseProxyWithStreamBody(t,e,r,n){const i=new t("fake",n),o=getMIMETypeFromHeadersInit(i.headers);let s,a=!1;function c(){return void 0===s&&(s=new Promise(((e,i)=>{if(a=!0,r.locked)return i(new TypeError("The ReadableStream is locked"));readAllBytesFromStream(r.getReader(),o).then((r=>{e(new t(r,n))})).catch((t=>{i(t)}))}))),s}return new class{get type(){return i.type}get url(){return i.url}get redirected(){return i.redirected}get status(){return i.status}get ok(){return i.ok}get statusText(){return i.statusText}get headers(){return i.headers}clone(){const[i,o]=e(r,!0);return r=i,createResponseProxyWithStreamBody(t,e,o,n)}get body(){return r}get bodyUsed(){return a}arrayBuffer(){return c().then((t=>t.arrayBuffer()))}blob(){return c().then((t=>t.blob()))}formData(){return c().then((t=>t.formData()))}json(){return c().then((t=>t.json()))}text(){return c().then((t=>t.text()))}}}function createAdaptedResponse(t,e,r,n){const i=function(i,o){if(i instanceof r){if(void 0===e||!("body"in t))return createResponseProxyWithStreamBody(t,n,i,o);i=wrapReadableStream(i,e)}return new t(i,o)};return i.prototype=t.prototype,i}const decDecoder=Symbol("decDecoder"),decTransform=Symbol("decTransform");class TextDecodeTransformer{constructor(t){this.decoder_=t}transform(t,e){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new TypeError("Input data must be a BufferSource");const r=this.decoder_.decode(t,{stream:!0});0!==r.length&&e.enqueue(r)}flush(t){const e=this.decoder_.decode();0!==e.length&&t.enqueue(e)}}class TextDecoderStream{constructor(t,e){this[decDecoder]=new TextDecoder(t,e),this[decTransform]=new TransformStream(new TextDecodeTransformer(this[decDecoder]))}get encoding(){return this[decDecoder].encoding}get fatal(){return this[decDecoder].fatal}get ignoreBOM(){return this[decDecoder].ignoreBOM}get readable(){return this[decTransform].readable}get writable(){return this[decTransform].writable}}const encEncoder=Symbol("encEncoder"),encTransform=Symbol("encTransform");class TextEncodeTransformer{constructor(t){this.encoder_=t,this.partial_=void 0}transform(t,e){let r=String(t);void 0!==this.partial_&&(r=this.partial_+r,this.partial_=void 0);const n=r.length-1,i=r.charCodeAt(n);i>=55296&&i<56320&&(this.partial_=String.fromCharCode(i),r=r.substring(0,n));const o=this.encoder_.encode(r);0!==o.length&&e.enqueue(o)}flush(t){this.partial_&&(t.enqueue(this.encoder_.encode(this.partial_)),this.partial_=void 0)}}class TextEncoderStream{constructor(){this[encEncoder]=new TextEncoder,this[encTransform]=new TransformStream(new TextEncodeTransformer(this[encEncoder]))}get encoding(){return this[encEncoder].encoding}get readable(){return this[encTransform].readable}get writable(){return this[encTransform].writable}}const PRESET_DICT=32,Z_DEFLATED=8,GZIP_ID1=31,GZIP_ID2=139,inflate_mask=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],swap32=t=>(t>>>24&255|t>>>8&65280|(65280&t)<<8|(255&t)<<24)>>>0;function u8ArrayFromBufferSource(t){return t instanceof ArrayBuffer?new Uint8Array(t):ArrayBuffer.isView(t)?t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength):void 0}function adler32(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=u8ArrayFromBufferSource(t);if(!r)throw new TypeError("source must be a BufferSource");return computeAdler32(r,e)}const BASE=65521,NMAX=5552;function computeAdler32(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e>>>16&65535;e&=65535;let n=t.length,i=0;for(;n>=NMAX;){n-=NMAX;let o=NMAX/16;do{r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++]}while(--o);e%=BASE,r+=BASE}if(n){for(;n>=16;)n-=16,r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++];for(;n--;)r+=e+=t[i++];e%=BASE,r%=BASE}return e|r<<16}function crc32(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=u8ArrayFromBufferSource(t);if(!r)throw new TypeError("source must be a BufferSource");return computeCRC32(r,e)}const endian=new Uint32Array([1]),endianCheck=new Uint8Array(endian.buffer,0,1)[0],computeCRC32=1===endianCheck?computeCRC32Little:computeCRC32Big;function computeCRC32Little(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=~e,n=t.byteOffset,i=0,o=t.byteLength;const s=crcTables[0],a=crcTables[1],c=crcTables[2],u=crcTables[3];for(;o&&3&n;)r=s[255&(r^t[i++])]^r>>>8,o--,n++;const h=new Uint32Array(t.buffer,n,o>>>2);let l=0;for(;o>=32;)r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],o-=32;for(;o>=4;)r^=h[l++],r=u[255&r]^c[r>>>8&255]^a[r>>>16&255]^s[r>>>24],o-=4;if(o){i+=4*l;do{r=s[255&(r^t[i++])]^r>>>8}while(--o)}return r=~r,r}function computeCRC32Big(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=~swap32(e),n=t.byteOffset,i=0,o=t.byteLength;const s=crcTables[4],a=crcTables[5],c=crcTables[6],u=crcTables[7];for(;o&&3&n;)r=s[r>>>24^t[i++]]^r<<8,o--,n++;const h=new Uint32Array(t.buffer,n,o>>>2);let l=0;for(;o>=32;)r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],o-=32;for(;o>=4;)r^=h[l++],r=s[255&r]^a[r>>>8&255]^c[r>>>16&255]^u[r>>>24],o-=4;if(o){i+=4*l;do{r=s[r>>>24^t[i++]]^r<<8}while(--o)}return r=~r,swap32(r)}function makeCRCTables(){const t=new ArrayBuffer(8192),e=[new Uint32Array(t,0,256),new Uint32Array(t,1024,256),new Uint32Array(t,2048,256),new Uint32Array(t,3072,256),new Uint32Array(t,4096,256),new Uint32Array(t,5120,256),new Uint32Array(t,6144,256),new Uint32Array(t,7168,256)];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;e[0][r]=t,e[4][r]=swap32(t)}for(let r=0;r<256;r++){let t=e[0][r];for(let n=1;n<4;n++)t=e[0][255&t]^t>>>8,e[n][r]=t,e[n+4][r]=swap32(t)}return e}const crcTables=makeCRCTables(),OUTPUT_BUFSIZE=16384;class ZStream{constructor(){this.avail_in=0,this.next_in_index=0,this.next_out=new Uint8Array(OUTPUT_BUFSIZE),this.avail_out=this.next_out.byteLength,this.next_out_index=0,this.total_in=this.total_out=0,this.msg=""}append(t){this.next_in=t,this.avail_in=t.length,this.next_in_index=0}read_buf(t,e){return this.next_in.subarray(t,t+e)}read_into_buf(t,e,r){let n=this.avail_in;return n>r&&(n=r),0===n?0:(t.set(this.next_in.subarray(this.next_in_index,this.next_in_index+n),e),this.avail_in-=n,this.next_in_index+=n,this.total_in+=n,n)}flush_pending(t){var e=t.pending;e>this.avail_out&&(e=this.avail_out),0!==e&&(this.next_out.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),this.next_out_index),this.next_out_index+=e,t.pending_out+=e,this.total_out+=e,this.avail_out-=e,t.pending-=e,0===t.pending&&(t.pending_out=0))}}function InfCodes(){let t,e,r,n,i=0,o=0,s=0,a=0,c=0,u=0,h=0,l=0,f=0,d=0;function p(t,e,r,n,i,o,s,a){let c,u,h,l,f,d,p,m,y,g,b,v,w,_,S,E;p=a.next_in_index,m=a.avail_in,f=s.bitb,d=s.bitk,y=s.write,g=y<s.read?s.read-y-1:s.end-y,b=inflate_mask[t],v=inflate_mask[e];do{for(;d<20;)m--,f|=(255&a.next_in[p++])<<d,d+=8;if(c=f&b,u=r,h=n,E=3*(h+c),l=u[E],0!==l)for(;;){if(f>>=u[E+1],d-=u[E+1],0!=(16&l)){for(l&=15,w=u[E+2]+(f&inflate_mask[l]),f>>=l,d-=l;d<15;)m--,f|=(255&a.next_in[p++])<<d,d+=8;for(c=f&v,u=i,h=o,E=3*(h+c),l=u[E];;){if(f>>=u[E+1],d-=u[E+1],0!=(16&l)){for(l&=15;d<l;)m--,f|=(255&a.next_in[p++])<<d,d+=8;if(_=u[E+2]+(f&inflate_mask[l]),f>>=l,d-=l,g-=w,y>=_)S=y-_,s.window[y++]=s.window[S++],s.window[y++]=s.window[S++],w-=2;else{S=y-_;do{S+=s.end}while(S<0);if(l=s.end-S,w>l){w-=l;do{s.window[y++]=s.window[S++]}while(0!=--l);S=0}}do{s.window[y++]=s.window[S++]}while(0!=--w);break}if(0!=(64&l))return a.msg="invalid distance code",w=a.avail_in-m,w=d>>3<w?d>>3:w,m+=w,p-=w,d-=w<<3,s.bitb=f,s.bitk=d,a.avail_in=m,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=y,-3;c+=u[E+2],c+=f&inflate_mask[l],E=3*(h+c),l=u[E]}break}if(0!=(64&l))return 0!=(32&l)?(w=a.avail_in-m,w=d>>3<w?d>>3:w,m+=w,p-=w,d-=w<<3,s.bitb=f,s.bitk=d,a.avail_in=m,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=y,1):(a.msg="invalid literal/length code",w=a.avail_in-m,w=d>>3<w?d>>3:w,m+=w,p-=w,d-=w<<3,s.bitb=f,s.bitk=d,a.avail_in=m,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=y,-3);if(c+=u[E+2],c+=f&inflate_mask[l],E=3*(h+c),l=u[E],0===l){f>>=u[E+1],d-=u[E+1],s.window[y++]=u[E+2],g--;break}}else f>>=u[E+1],d-=u[E+1],s.window[y++]=u[E+2],g--}while(g>=258&&m>=10);return w=a.avail_in-m,w=d>>3<w?d>>3:w,m+=w,p-=w,d-=w<<3,s.bitb=f,s.bitk=d,a.avail_in=m,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=y,0}return{init:function(e,i,o,s,a,c){t=0,h=e,l=i,r=o,f=s,n=a,d=c},proc:function(m,y,g){let b,v,w,_,S,E,A,M=0,I=0,R=0;for(R=y.next_in_index,_=y.avail_in,M=m.bitb,I=m.bitk,S=m.write,E=S<m.read?m.read-S-1:m.end-S;;)switch(t){case 0:if(E>=258&&_>=10&&(m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,g=p(h,l,r,f,n,d,m,y),R=y.next_in_index,_=y.avail_in,M=m.bitb,I=m.bitk,S=m.write,E=S<m.read?m.read-S-1:m.end-S,0!==g)){t=1===g?7:9;break}s=h,e=r,o=f,t=1;case 1:for(b=s;I<b;){if(0===_)return m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);g=0,_--,M|=(255&y.next_in[R++])<<I,I+=8}if(v=3*(o+(M&inflate_mask[b])),M>>>=e[v+1],I-=e[v+1],w=e[v],0===w){a=e[v+2],t=6;break}if(0!=(16&w)){c=15&w,i=e[v+2],t=2;break}if(0==(64&w)){s=w,o=v/3+e[v+2];break}if(0!=(32&w)){t=7;break}return t=9,y.msg="invalid literal/length code",g=-3,m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);case 2:for(b=c;I<b;){if(0===_)return m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);g=0,_--,M|=(255&y.next_in[R++])<<I,I+=8}i+=M&inflate_mask[b],M>>=b,I-=b,s=l,e=n,o=d,t=3;case 3:for(b=s;I<b;){if(0===_)return m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);g=0,_--,M|=(255&y.next_in[R++])<<I,I+=8}if(v=3*(o+(M&inflate_mask[b])),M>>=e[v+1],I-=e[v+1],w=e[v],0!=(16&w)){c=15&w,u=e[v+2],t=4;break}if(0==(64&w)){s=w,o=v/3+e[v+2];break}return t=9,y.msg="invalid distance code",g=-3,m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);case 4:for(b=c;I<b;){if(0===_)return m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);g=0,_--,M|=(255&y.next_in[R++])<<I,I+=8}u+=M&inflate_mask[b],M>>=b,I-=b,t=5;case 5:for(A=S-u;A<0;)A+=m.end;for(;0!==i;){if(0===E&&(S===m.end&&0!==m.read&&(S=0,E=S<m.read?m.read-S-1:m.end-S),0===E&&(m.write=S,g=m.inflate_flush(y,g),S=m.write,E=S<m.read?m.read-S-1:m.end-S,S===m.end&&0!==m.read&&(S=0,E=S<m.read?m.read-S-1:m.end-S),0===E)))return m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);m.window[S++]=m.window[A++],E--,A===m.end&&(A=0),i--}t=0;break;case 6:if(0===E&&(S===m.end&&0!==m.read&&(S=0,E=S<m.read?m.read-S-1:m.end-S),0===E&&(m.write=S,g=m.inflate_flush(y,g),S=m.write,E=S<m.read?m.read-S-1:m.end-S,S===m.end&&0!==m.read&&(S=0,E=S<m.read?m.read-S-1:m.end-S),0===E)))return m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);g=0,m.window[S++]=a,E--,t=0;break;case 7:if(I>7&&(I-=8,_++,R--),m.write=S,g=m.inflate_flush(y,g),S=m.write,E=S<m.read?m.read-S-1:m.end-S,m.read!==m.write)return m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);t=8;case 8:return g=1,m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);case 9:return g=-3,m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g);default:return g=-2,m.bitb=M,m.bitk=I,y.avail_in=_,y.total_in+=R-y.next_in_index,y.next_in_index=R,m.write=S,m.inflate_flush(y,g)}}}}const fixed_bl=9,fixed_bd=5,fixed_tl=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],fixed_td=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],BMAX=15;let v;const hn=[0],c=new Int32Array(BMAX+1),r=new Int32Array(3),u=new Int32Array(BMAX),x=new Int32Array(BMAX+1);function huft_build(t,e,n,i,o,s,a,h,l,f,d){let p,m,y,g,b,v,w,_,S,E,A,M,I,R,T;E=0,b=n;do{c[t[e+E]]++,E++,b--}while(0!==b);if(c[0]===n)return a[0]=-1,h[0]=0,0;for(_=h[0],v=1;v<=BMAX&&0===c[v];v++);for(w=v,_<v&&(_=v),b=BMAX;0!==b&&0===c[b];b--);for(y=b,_>b&&(_=b),h[0]=_,R=1<<v;v<b;v++,R<<=1)if(R-=c[v],R<0)return-3;if(R-=c[b],R<0)return-3;for(c[b]+=R,x[1]=v=0,E=1,I=2;0!=--b;)x[I]=v+=c[E],I++,E++;b=0,E=0;do{v=t[e+E],0!==v&&(d[x[v]++]=b),E++}while(++b<n);for(n=x[y],x[0]=b=0,E=0,g=-1,M=-_,u[0]=0,A=0,T=0;w<=y;w++)for(p=c[w];0!=p--;){for(;w>M+_;){if(g++,M+=_,T=y-M,T=T>_?_:T,m=1<<(v=w-M),m>p+1&&(m-=p+1,I=w,v<T))for(;++v<T&&(m<<=1,!(m<=c[++I]));)m-=c[I];if(T=1<<v,f[0]+T>1400)return-3;u[g]=A=f[0],f[0]+=T,0!==g?(x[g]=b,r[0]=v,r[1]=_,v=b>>>M-_,r[2]=A-u[g-1]-v,l.set(r,3*(u[g-1]+v))):a[0]=A}for(r[1]=w-M,E>=n?r[0]=192:d[E]<i?(r[0]=d[E]<256?0:96,r[2]=d[E++]):(r[0]=s[d[E]-i]+16+64,r[2]=o[d[E++]-i]),m=1<<w-M,v=b>>>M;v<T;v+=m)l.set(r,3*(A+v));for(v=1<<w-1;0!=(b&v);v>>>=1)b^=v;for(b^=v,S=(1<<M)-1;(b&S)!==x[g];)g--,M-=_,S=(1<<M)-1}return 0!==R&&1!==y?-5:0}function initWorkArea(t){v=new Int32Array(t);for(let e=0;e<BMAX+1;e++)c[e]=0,u[e]=0,x[e]=0;for(let e=0;e<3;e++)r[e]=0}function inflate_trees_bits(t,e,r,n,i){initWorkArea(19),hn[0]=0;let o=huft_build(t,0,19,19,null,null,r,e,n,hn,v);return-3===o?i.msg="oversubscribed dynamic bit lengths tree":-5!==o&&0!==e[0]||(i.msg="incomplete dynamic bit lengths tree",o=-3),o}function inflate_trees_dynamic(t,e,r,n,i,o,s,a,c){initWorkArea(288),hn[0]=0;let u=huft_build(r,0,t,257,cplens,cplext,o,n,a,hn,v);return 0!==u||0===n[0]?(-3===u?c.msg="oversubscribed literal/length tree":(c.msg="incomplete literal/length tree",u=-3),u):(initWorkArea(288),u=huft_build(r,t,e,0,cpdist,cpdext,s,i,a,hn,v),0!==u||0===i[0]&&t>257?(-3===u?c.msg="oversubscribed distance tree":-5===u?(c.msg="incomplete distance tree",u=-3):(c.msg="empty distance tree with lengths",u=-3),u):0)}function inflate_trees_fixed(t,e,r,n){return t[0]=fixed_bl,e[0]=fixed_bd,r[0]=fixed_tl,n[0]=fixed_td,0}const border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];class InfBlocks{constructor(t){this.codes=InfCodes(),this.hufts=new Int32Array(4200),this.mode=0,this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.last=0,this.end=t,this.window=new Uint8Array(t)}reset(){this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.last=0}inflate_flush(t,e){let r,n,i;return n=t.next_out_index,i=this.read,r=(i<=this.write?this.write:this.end)-i,r>t.avail_out&&(r=t.avail_out),0!==r&&-5===e&&(e=0),t.avail_out-=r,t.total_out+=r,t.next_out.set(this.window.subarray(i,i+r),n),n+=r,i+=r,i===this.end&&(i=0,this.write===this.end&&(this.write=0),r=this.write-i,r>t.avail_out&&(r=t.avail_out),0!==r&&-5===e&&(e=0),t.avail_out-=r,t.total_out+=r,t.next_out.set(this.window.subarray(i,i+r),n),n+=r,i+=r),t.next_out_index=n,this.read=i,e}proc(t,e){let r,n,i,o,s,a,c,u,h=0,l=0,f=0;const d=new Uint8Array(320),p=[0],m=[0],y=this.codes,g=this.hufts;for(o=t.next_in_index,s=t.avail_in,n=this.bitb,i=this.bitk,a=this.write,c=a<this.read?this.read-a-1:this.end-a;;)switch(this.mode){case 0:if(this.last)return 1;for(;i<3;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}switch(r=7&n,this.last=1&r,r>>>1){case 0:n>>>=3,i-=3,r=7&i,n>>>=r,i-=r,this.mode=1;break;case 1:const c=[0],u=[0],h=[[]],l=[[]];inflate_trees_fixed(c,u,h,l),y.init(c[0],u[0],h[0],0,l[0],0),n>>>=3,i-=3,this.mode=6;break;case 2:n>>>=3,i-=3,this.mode=3;break;case 3:return n>>>=3,i-=3,this.mode=9,t.msg="invalid block type",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e)}break;case 1:for(;i<32;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if((~n>>>16&65535)!=(65535&n))return this.mode=9,t.msg="invalid stored block lengths",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);h=65535&n,n=i=0,this.mode=0!==h?2:0!==this.last?7:0;break;case 2:if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);if(0===c&&(a===this.end&&0!==this.read&&(a=0,c=a<this.read?this.read-a-1:this.end-a),0===c&&(this.write=a,e=this.inflate_flush(t,e),a=this.write,c=a<this.read?this.read-a-1:this.end-a,a===this.end&&0!==this.read&&(a=0,c=a<this.read?this.read-a-1:this.end-a),0===c)))return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);if(e=0,r=h,r>s&&(r=s),r>c&&(r=c),this.window.set(t.read_buf(o,r),a),o+=r,s-=r,a+=r,c-=r,h-=r,0!==h)break;this.mode=0!==this.last?7:0;break;case 3:for(;i<14;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if(l=r=16383&n,(31&r)>29||(r>>5&31)>29)return this.mode=9,t.msg="too many length or distance symbols",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);for(r=258+(31&r)+(r>>5&31),u=0;u<r;u++)d[u]=0;for(n>>>=14,i-=14,f=0,this.mode=4;f<4+(l>>>10);){for(;i<3;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}d[border[f++]]=7&n,n>>>=3,i-=3}for(;f<19;)d[border[f++]]=0;if(p[0]=7,r=inflate_trees_bits(d,p,m,g,t),0!==r)return-3===(e=r)&&(this.mode=9),this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);for(f=0,this.mode=5;r=l,!(f>=258+(31&r)+(r>>5&31));){let c,h;for(r=p[0];i<r;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if(r=g[3*(m[0]+(n&inflate_mask[r]))+1],h=g[3*(m[0]+(n&inflate_mask[r]))+2],h<16)n>>>=r,i-=r,d[f++]=h;else{for(u=18===h?7:h-14,c=18===h?11:3;i<r+u;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if(n>>>=r,i-=r,c+=n&inflate_mask[u],n>>>=u,i-=u,u=f,r=l,u+c>258+(31&r)+(r>>5&31)||16===h&&u<1)return this.mode=9,t.msg="invalid bit length repeat",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);h=16===h?d[u-1]:0;do{d[u++]=h}while(0!=--c);f=u}}m[0]=-1;const b=[9],v=[6],w=[0],_=[0];if(r=inflate_trees_dynamic(257+(31&r),1+(r>>5&31),d,b,v,w,_,g,t),0!==r)return-3===r&&(this.mode=9),e=r,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);y.init(b[0],v[0],g,w[0],g,_[0]),this.mode=6;case 6:if(this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,1!==(e=y.proc(this,t,e)))return this.inflate_flush(t,e);if(e=0,o=t.next_in_index,s=t.avail_in,n=this.bitb,i=this.bitk,a=this.write,c=a<this.read?this.read-a-1:this.end-a,0===this.last){this.mode=0;break}this.mode=7;case 7:if(this.write=a,e=this.inflate_flush(t,e),a=this.write,c=a<this.read?this.read-a-1:this.end-a,this.read!==this.write)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);this.mode=8;case 8:return e=1,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);case 9:return e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);default:return e=-2,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e)}}set_dictionary(t,e,r){this.window.set(t.subarray(e,e+r),0),this.read=this.write=r}}class Inflate{constructor(t){this.isGZip=!1,this.method=0,this.gflags=0,this.name="",this.mtime=0,this.xlen=0,this.dictChecksum=0,this.fullChecksum=0,this.inflatedSize=0,this.wbits=0,this.wbits=15,this.blocks=new InfBlocks(1<<this.wbits),this.mode=t?22:0}get isComplete(){const{blocks:t}=this,e=(0===t.mode||8===t.mode)&&0===t.bitb&&0===t.bitk;return 31===this.mode&&e}get fileName(){return this.name}get modDate(){if(0!==this.mtime)return new Date(1e3*this.mtime)}get checksum(){return this.fullChecksum}get fullSize(){return this.inflatedSize}get containerFormat(){return this.isGZip?2:0===this.method?0:1}inflate(t){let e;if(!t||!t.next_in)return-2;let r=-5;for(;;)switch(this.mode){case 0:if(0===t.avail_in)return r;if(e=t.next_in[t.next_in_index],e!==GZIP_ID1){this.mode=2;break}this.mode=1,r=0,t.avail_in--,t.total_in++,t.next_in_index++;case 1:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=t.next_in[t.next_in_index++],e!==GZIP_ID2){this.mode=32,t.msg="invalid gzip id";break}this.isGZip=!0,this.mode=2;case 2:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,this.method=t.next_in[t.next_in_index++],(15&this.method)!==Z_DEFLATED){this.mode=32,t.msg="unknown compression method";break}if(8+(this.method>>4)>this.wbits){this.mode=32,t.msg="invalid window size";break}this.mode=3;case 3:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.isGZip){this.gflags=e,this.mode=9;break}if(((this.method<<8)+e)%31!=0){this.mode=32,t.msg="incorrect header check";break}if(0==(e&PRESET_DICT)){this.mode=22;break}this.mode=4;case 4:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,this.dictChecksum=(255&t.next_in[t.next_in_index++])<<24&4278190080,this.mode=5;case 5:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,this.dictChecksum|=(255&t.next_in[t.next_in_index++])<<16&16711680,this.mode=6;case 6:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,this.dictChecksum|=(255&t.next_in[t.next_in_index++])<<8&65280,this.mode=7;case 7:return 0===t.avail_in?r:(r=0,t.avail_in--,t.total_in++,this.dictChecksum|=255&t.next_in[t.next_in_index++],this.mode=8,2);case 8:return this.mode=32,t.msg="need dictionary",-2;case 9:case 10:case 11:case 12:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.mtime=this.mtime>>>8|e<<24,12!==this.mode){this.mode++;break}this.mode=13;case 13:case 14:case 20:case 21:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,t.next_in_index++,14===this.mode?4&this.gflags?this.mode=15:8&this.gflags?this.mode=18:16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22:this.mode++;break;case 15:case 16:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.xlen=this.xlen>>>8|e<<24,15===this.mode)break;this.xlen=this.xlen>>>16;case 17:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,t.next_in_index++,this.xlen--,0===this.xlen&&(8&this.gflags?this.mode=18:16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22);break;case 18:case 19:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],0!==e?18===this.mode&&(this.name+=String.fromCharCode(e)):19!==this.mode&&16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22;break;case 22:if(r=this.blocks.proc(t,r),-3===r){this.mode=32;break}if(1!==r)return r;if(r=0,this.blocks.reset(),0===this.method){this.mode=31;break}this.mode=23;case 23:case 24:case 25:case 26:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.isGZip?this.fullChecksum=this.fullChecksum>>>8|e<<24:this.fullChecksum=this.fullChecksum<<8|e,this.mode++,27!==this.mode||this.isGZip||(this.mode=31);break;case 27:case 28:case 29:case 30:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.inflatedSize=this.inflatedSize>>>8|e<<24,this.mode++;break;case 31:return 1;case 32:return-3;default:return-2}}inflateSetDictionary(t){if(8!==this.mode)return-2;const e=u8ArrayFromBufferSource(t);if(!e)return-3;let r=0,n=e.byteLength;return n>=1<<this.wbits&&(n=(1<<this.wbits)-1,r=e.byteLength-n),adler32(e)!==this.dictChecksum?-3:(this.blocks.set_dictionary(e,r,n),this.mode=22,0)}}class Inflater{constructor(t){const e=null==t?void 0:t.raw;if(void 0!==e&&!0!==e&&!1!==e)throw new TypeError("options.raw must be undefined or true or false");const r=void 0!==e&&e,n=null==t?void 0:t.dictionary;if(void 0!==n){if(r)throw new RangeError("options.dictionary cannot be set when options.raw is true");if(void 0===u8ArrayFromBufferSource(n))throw new TypeError("options.dictionary must be undefined or a buffer or a buffer view");this.customDict=n}this.inflate=new Inflate(r),this.z=new ZStream}append(t){const e=u8ArrayFromBufferSource(t);if(!(e instanceof Uint8Array))throw new TypeError("data must be an ArrayBuffer or buffer view");if(0===e.length)return[];const{inflate:r,z:n}=this,i=[];let o=!1;n.append(e);do{n.next_out_index=0,n.avail_out=OUTPUT_BUFSIZE,0!==n.avail_in||o||(n.next_in_index=0,o=!0);const t=r.inflate(n);if(o&&-5===t){if(0!==n.avail_in)throw new Error("inflate error: bad input")}else if(2===t){if(!this.customDict)throw new Error("Custom dictionary required for this data");if(0!==r.inflateSetDictionary(this.customDict))throw new Error("Custom dictionary is not valid for this data")}else if(0!==t&&1!==t)throw new Error("inflate error: "+n.msg);if((o||1===t)&&n.avail_in===e.length)throw new Error("inflate error: bad input data");if(n.next_out_index){const t=new Uint8Array(n.next_out.subarray(0,n.next_out_index)),e=2===r.containerFormat;void 0===this.checksum&&(this.checksum=e?0:1),this.checksum=e?crc32(t,this.checksum):adler32(t,this.checksum),i.push(t)}}while(n.avail_in>0||0===n.avail_out);return i}finish(){const t=this.inflate.checksum,e=this.inflate.fullSize,r=this.inflate.isComplete,n=0===t?"unchecked":t===this.checksum?"match":"mismatch",i=0===e?"unchecked":e===this.z.total_out?"match":"mismatch";return{success:r&&"mismatch"!==n&&"mismatch"!==i,complete:r,checksum:n,fileSize:i,fileName:this.inflate.fileName,modDate:this.inflate.modDate}}}const D_CODES=30,BL_CODES=19,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,HEAP_SIZE=2*L_CODES+1,MAX_BL_BITS=7,_dist_code=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];class Tree{constructor(t,e){this.dyn_tree=t,this.stat_desc=e,this.max_code=0}gen_bitlen(t){var e,r,n,i,o,s,a=this.dyn_tree,c=this.stat_desc.static_tree,u=this.stat_desc.extra_bits,h=this.stat_desc.extra_base,l=this.stat_desc.max_length,f=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(a[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<HEAP_SIZE;e++)(i=a[2*a[2*(r=t.heap[e])+1]+1]+1)>l&&(i=l,f++),a[2*r+1]=i,r>this.max_code||(t.bl_count[i]++,o=0,r>=h&&(o=u[r-h]),s=a[2*r],t.opt_len+=s*(i+o),c&&(t.static_len+=s*(c[2*r+1]+o)));if(0!==f){do{for(i=l-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[l]--,f-=2}while(f>0);for(i=l;0!==i;i--)for(r=t.bl_count[i];0!==r;)(n=t.heap[--e])>this.max_code||(a[2*n+1]!=i&&(t.opt_len+=(i-a[2*n+1])*a[2*n],a[2*n+1]=i),r--)}}bi_reverse(t,e){let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}gen_codes(t,e,r){const n=new Uint16Array(16);let i=0;for(let o=1;o<=15;o++)n[o]=i=i+r[o-1]<<1;for(let o=0;o<=e;o++){const e=t[2*o+1];0!==e&&(t[2*o]=this.bi_reverse(n[e]++,e))}}build_tree(t){var e,r,n,i=this.dyn_tree,o=this.stat_desc.static_tree,s=this.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=HEAP_SIZE,e=0;e<s;e++)0!==i[2*e]?(t.heap[++t.heap_len]=a=e,t.depth[e]=0):i[2*e+1]=0;for(;t.heap_len<2;)i[2*(n=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=o[2*n+1]);for(this.max_code=a,e=Math.floor(t.heap_len/2);e>=1;e--)t.pqdownheap(i,e);n=s;do{e=t.heap[1],t.heap[1]=t.heap[t.heap_len--],t.pqdownheap(i,1),r=t.heap[1],t.heap[--t.heap_max]=e,t.heap[--t.heap_max]=r,i[2*n]=i[2*e]+i[2*r],t.depth[n]=Math.max(t.depth[e],t.depth[r])+1,i[2*e+1]=i[2*r+1]=n,t.heap[1]=n++,t.pqdownheap(i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],this.gen_bitlen(t),this.gen_codes(i,this.max_code,t.bl_count)}static d_code(t){return t<256?_dist_code[t]:_dist_code[256+(t>>>7)]}}Tree._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];class StaticTree{constructor(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i}}StaticTree.static_ltree=new Uint16Array([12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8]),StaticTree.static_dtree=new Uint16Array([0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5]),StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,15),StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,15),StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,MAX_BL_BITS);const makeConfig=(t,e,r,n,i)=>({good_length:t,max_lazy:e,nice_length:r,max_chain:n,func:i}),config_table=[makeConfig(0,0,0,0,0),makeConfig(4,4,8,4,1),makeConfig(4,5,16,8,1),makeConfig(4,6,32,32,1),makeConfig(4,4,16,16,2),makeConfig(8,16,32,32,2),makeConfig(8,16,128,128,2),makeConfig(8,32,128,256,2),makeConfig(32,128,258,1024,2),makeConfig(32,258,258,4096,2)];function smaller(t,e,r,n){const i=t[2*e],o=t[2*r];return i<o||i==o&&n[e]<=n[r]}const END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,hash_bits=15,hash_size=1<<hash_bits,hash_mask=hash_size-1,hash_shift=Math.floor((hash_bits+MIN_MATCH-1)/MIN_MATCH),lit_bufsize=16384,pending_buf_size=4*lit_bufsize,d_buf=Math.floor(lit_bufsize/2),l_buf=3*lit_bufsize,window_size=65536;class Deflate{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.status=1,this.pending_buf=new Uint8Array(pending_buf_size),this.pending=0,this.pending_out=0,this.last_flush=0,this.window=new Uint8Array(window_size),this.prev=new Uint16Array(32768),this.head=new Uint16Array(hash_size),this.ins_h=0,this.block_start=0,this.match_length=MIN_MATCH-1,this.match_available=!1,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=MIN_MATCH-1,this.dyn_ltree=new Uint16Array(2*HEAP_SIZE),this.dyn_dtree=new Uint16Array(2*(2*D_CODES+1)),this.bl_tree=new Uint16Array(2*(2*BL_CODES+1)),this.l_desc=new Tree(this.dyn_ltree,StaticTree.static_l_desc),this.d_desc=new Tree(this.dyn_dtree,StaticTree.static_d_desc),this.bl_desc=new Tree(this.bl_tree,StaticTree.static_bl_desc),this.depth=new Uint16Array(2*L_CODES+1),this.last_lit=0,this.matches=0,this.opt_len=0,this.static_len=0,this.last_eob_len=8,this.bi_buf=0,this.bi_valid=0,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(2*L_CODES+1),this.heap_len=0,this.heap_max=HEAP_SIZE,e<0||e>9||r<0||r>2)throw RangeError("level or strategy is out of range");this.strm=t,this.level=e,this.strategy=r,t.msg="",t.total_in=t.total_out=0,this.init_block();for(let n=0;n<hash_size;++n)this.head[n]=0;this.max_lazy_match=config_table[e].max_lazy,this.good_match=config_table[e].good_length,this.nice_match=config_table[e].nice_length,this.max_chain_length=config_table[e].max_chain}init_block(){for(let t=0;t<L_CODES;t++)this.dyn_ltree[2*t]=0;for(let t=0;t<D_CODES;t++)this.dyn_dtree[2*t]=0;for(let t=0;t<BL_CODES;t++)this.bl_tree[2*t]=0;this.dyn_ltree[2*END_BLOCK]=1,this.opt_len=this.static_len=0,this.last_lit=this.matches=0}pqdownheap(t,e){const r=this.heap,n=r[e];let i=e<<1;for(;i<=this.heap_len&&(i<this.heap_len&&smaller(t,r[i+1],r[i],this.depth)&&i++,!smaller(t,n,r[i],this.depth));)r[e]=r[i],e=i,i<<=1;r[e]=n}scan_tree(t,e){var r,n=-1,i=t[1],o=0,s=7,a=4;0===i&&(s=138,a=3),t[2*(e+1)+1]=65535;for(let c=0;c<=e;c++)r=i,i=t[2*(c+1)+1],++o<s&&r==i||(o<a?this.bl_tree[2*r]+=o:0!==r?(r!=n&&this.bl_tree[2*r]++,this.bl_tree[2*REP_3_6]++):o<=10?this.bl_tree[2*REPZ_3_10]++:this.bl_tree[2*REPZ_11_138]++,o=0,n=r,0===i?(s=138,a=3):r==i?(s=6,a=3):(s=7,a=4))}build_bl_tree(){let t;for(this.scan_tree(this.dyn_ltree,this.l_desc.max_code),this.scan_tree(this.dyn_dtree,this.d_desc.max_code),this.bl_desc.build_tree(this),t=BL_CODES-1;t>=3&&0===this.bl_tree[2*Tree.bl_order[t]+1];t--);return this.opt_len+=3*(t+1)+5+5+4,t}put_short(t){this.pending_buf[this.pending++]=255&t,this.pending_buf[this.pending++]=t>>>8&255}send_bits(t,e){if(this.bi_valid>16-e){this.bi_buf|=t<<this.bi_valid&65535;const r=this.pending;this.pending_buf[r]=this.bi_buf,this.pending_buf[r+1]=this.bi_buf>>>8,this.pending=r+2,this.bi_buf=t>>>16-this.bi_valid,this.bi_valid+=e-16}else this.bi_buf|=t<<this.bi_valid&65535,this.bi_valid+=e}send_code(t,e){const r=2*t;this.send_bits(65535&e[r],65535&e[r+1])}send_tree(t,e){var r,n=-1,i=t[1],o=0,s=7,a=4;0===i&&(s=138,a=3);for(let c=0;c<=e;c++)if(r=i,i=t[2*(c+1)+1],!(++o<s&&r==i)){if(o<a)do{this.send_code(r,this.bl_tree)}while(0!=--o);else 0!==r?(r!=n&&(this.send_code(r,this.bl_tree),o--),this.send_code(REP_3_6,this.bl_tree),this.send_bits(o-3,2)):o<=10?(this.send_code(REPZ_3_10,this.bl_tree),this.send_bits(o-3,3)):(this.send_code(REPZ_11_138,this.bl_tree),this.send_bits(o-11,7));o=0,n=r,0===i?(s=138,a=3):r==i?(s=6,a=3):(s=7,a=4)}}send_all_trees(t,e,r){this.send_bits(t-257,5),this.send_bits(e-1,5),this.send_bits(r-4,4);for(let n=0;n<r;n++)this.send_bits(this.bl_tree[2*Tree.bl_order[n]+1],3);this.send_tree(this.dyn_ltree,t-1),this.send_tree(this.dyn_dtree,e-1)}bi_flush(){16===this.bi_valid?(this.put_short(this.bi_buf),this.bi_buf=0,this.bi_valid=0):this.bi_valid>=8&&(this.pending_buf[this.pending++]=this.bi_buf,this.bi_buf>>>=8,this.bi_valid-=8)}_tr_align(){this.send_bits(STATIC_TREES<<1,3),this.send_code(END_BLOCK,StaticTree.static_ltree),this.bi_flush(),1+this.last_eob_len+10-this.bi_valid<9&&(this.send_bits(STATIC_TREES<<1,3),this.send_code(END_BLOCK,StaticTree.static_ltree),this.bi_flush()),this.last_eob_len=7}_tr_tally(t,e){if(this.pending_buf[d_buf+2*this.last_lit]=t>>>8&255,this.pending_buf[d_buf+2*this.last_lit+1]=255&t,this.pending_buf[l_buf+this.last_lit]=255&e,this.last_lit++,0===t?this.dyn_ltree[2*e]++:(this.matches++,t--,this.dyn_ltree[2*(Tree._length_code[e]+LITERALS+1)]++,this.dyn_dtree[2*Tree.d_code(t)]++),0==(8191&this.last_lit)&&this.level>2){let t=8*this.last_lit,e=this.strstart-this.block_start;for(let r=0;r<D_CODES;r++)t+=this.dyn_dtree[2*r]*(5+Tree.extra_dbits[r]);if(t>>>=3,this.matches<Math.floor(this.last_lit/2)&&t<Math.floor(e/2))return!0}return this.last_lit===lit_bufsize-1}compress_block(t,e){let r=0;if(0!==this.last_lit)do{let n=this.pending_buf[d_buf+2*r]<<8&65280|255&this.pending_buf[d_buf+2*r+1],i=255&this.pending_buf[l_buf+r];if(r++,0===n)this.send_code(i,t);else{let r=Tree._length_code[i];this.send_code(r+LITERALS+1,t);let o=Tree.extra_lbits[r];0!==o&&(i-=Tree.base_length[r],this.send_bits(i,o)),n--,r=Tree.d_code(n),this.send_code(r,e),o=Tree.extra_dbits[r],0!==o&&(n-=Tree.base_dist[r],this.send_bits(n,o))}}while(r<this.last_lit);this.send_code(END_BLOCK,t),this.last_eob_len=t[2*END_BLOCK+1]}bi_windup(){this.bi_valid>8?this.put_short(this.bi_buf):this.bi_valid>0&&(this.pending_buf[this.pending++]=this.bi_buf),this.bi_buf=0,this.bi_valid=0}copy_block(t,e,r){this.bi_windup(),this.last_eob_len=8,r&&(this.put_short(e),this.put_short(~e)),this.pending_buf.set(this.window.subarray(t,t+e),this.pending),this.pending+=e}_tr_stored_block(t,e,r){this.send_bits((STORED_BLOCK<<1)+(r?1:0),3),this.copy_block(t,e,!0)}_tr_flush_block(t,e,r){let n,i,o=0;this.level>0?(this.l_desc.build_tree(this),this.d_desc.build_tree(this),o=this.build_bl_tree(),n=this.opt_len+3+7>>>3,i=this.static_len+3+7>>>3,i<=n&&(n=i)):n=i=e+5,e+4<=n&&-1!==t?this._tr_stored_block(t,e,r):i==n?(this.send_bits((STATIC_TREES<<1)+(r?1:0),3),this.compress_block(StaticTree.static_ltree,StaticTree.static_dtree)):(this.send_bits((DYN_TREES<<1)+(r?1:0),3),this.send_all_trees(this.l_desc.max_code+1,this.d_desc.max_code+1,o+1),this.compress_block(this.dyn_ltree,this.dyn_dtree)),this.init_block(),r&&this.bi_windup()}flush_block_only(t){this._tr_flush_block(this.block_start>=0?this.block_start:-1,this.strstart-this.block_start,t),this.block_start=this.strstart,this.strm.flush_pending(this)}fill_window(){do{let t=window_size-this.lookahead-this.strstart;if(0===t&&0===this.strstart&&0===this.lookahead)t=32768;else if(-1===t)t--;else if(this.strstart>=65536-MIN_LOOKAHEAD){this.window.set(this.window.subarray(32768,65536),0),this.match_start-=32768,this.strstart-=32768,this.block_start-=32768;let e=hash_size,r=e;do{let t=65535&this.head[--r];this.head[r]=t>=32768?t-32768:0}while(0!=--e);e=32768,r=e;do{let t=65535&this.prev[--r];this.prev[r]=t>=32768?t-32768:0}while(0!=--e);t+=32768}if(0===this.strm.avail_in)return;const e=this.strm.read_into_buf(this.window,this.strstart+this.lookahead,t);this.lookahead+=e,this.lookahead>=MIN_MATCH&&(this.ins_h=255&this.window[this.strstart],this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+1])&hash_mask)}while(this.lookahead<MIN_LOOKAHEAD&&0!==this.strm.avail_in)}deflate_stored(t){let e=65535;for(e>pending_buf_size-5&&(e=pending_buf_size-5);;){if(this.lookahead<=1){if(this.fill_window(),0===this.lookahead&&0===t)return 0;if(0===this.lookahead)break}this.strstart+=this.lookahead,this.lookahead=0;let r=this.block_start+e;if((0===this.strstart||this.strstart>=r)&&(this.lookahead=this.strstart-r,this.strstart=r,this.flush_block_only(!1),0===this.strm.avail_out))return 0;if(this.strstart-this.block_start>=32768-MIN_LOOKAHEAD&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}return this.flush_block_only(4===t),0===this.strm.avail_out?4===t?2:0:4===t?3:1}longest_match(t){let e=this.max_chain_length,r=this.strstart,n=this.prev_length,i=this.strstart>32768-MIN_LOOKAHEAD?this.strstart-(32768-MIN_LOOKAHEAD):0,o=this.nice_match;const s=this.window,a=this.strstart+MAX_MATCH;let c=s[r+n-1],u=s[r+n];const h=s[r],l=s[r+1];this.prev_length>=this.good_match&&(e>>=2),o>this.lookahead&&(o=this.lookahead);do{let f=t,d=!0;for(;;){if(f=t,s[f+n]!==u||s[f+n-1]!==c){if((t=this.prev[32767&t])>i&&0!=--e)continue;d=!1}break}if(!d)break;if(s[f]!==h||s[f+1]!==l)continue;r+=2,f+=2;do{const t=(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3])^(s[f]<<24|s[f+1]<<16|s[f+2]<<8|s[f+3]);if(t){const e=Math.clz32(t)>>3;r+=e,f+=e;break}r+=4,f+=4}while(r<a);r>a&&(r=a);let p=MAX_MATCH-(a-r);if(r=a-MAX_MATCH,p>n){if(this.match_start=t,n=p,p>=o)break;c=s[r+n-1],u=s[r+n]}}while((t=this.prev[32767&t])>i&&0!=--e);return n<=this.lookahead?n:this.lookahead}deflate_fast(t){let e,r=0;for(;;){if(this.lookahead<MIN_LOOKAHEAD){if(this.fill_window(),this.lookahead<MIN_LOOKAHEAD&&0===t)return 0;if(0===this.lookahead)break}if(this.lookahead>=MIN_MATCH&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,r=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart),0!==r&&(this.strstart-r&65535)<=32768-MIN_LOOKAHEAD&&2!==this.strategy&&(this.match_length=this.longest_match(r)),this.match_length>=MIN_MATCH)if(e=this._tr_tally(this.strstart-this.match_start,this.match_length-MIN_MATCH),this.lookahead-=this.match_length,this.match_length<=this.max_lazy_match&&this.lookahead>=MIN_MATCH){this.match_length--;do{this.strstart++,this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,r=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart}while(0!=--this.match_length);this.strstart++}else this.strstart+=this.match_length,this.match_length=0,this.ins_h=255&this.window[this.strstart],this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+1])&hash_mask;else e=this._tr_tally(0,255&this.window[this.strstart]),this.lookahead--,this.strstart++;if(e&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}return this.flush_block_only(4===t),0===this.strm.avail_out?4===t?2:0:4===t?3:1}deflate_slow(t){let e,r,n,i=0;for(;;){if(this.lookahead<MIN_LOOKAHEAD){if(this.fill_window(),this.lookahead<MIN_LOOKAHEAD&&0===t)return 0;if(0===this.lookahead)break}if(this.lookahead>=MIN_MATCH&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,i=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart),this.prev_length=this.match_length,n=this.match_start,this.match_length=MIN_MATCH-1,0!==i&&this.prev_length<this.max_lazy_match&&(this.strstart-i&65535)<=32768-MIN_LOOKAHEAD&&(2!==this.strategy&&(this.match_length=this.longest_match(i)),this.match_length<=5&&(1===this.strategy||this.match_length===MIN_MATCH&&this.strstart-this.match_start>4096)&&(this.match_length=MIN_MATCH-1)),this.prev_length>=MIN_MATCH&&this.match_length<=this.prev_length){r=this.strstart+this.lookahead-MIN_MATCH,e=this._tr_tally(this.strstart-1-n,this.prev_length-MIN_MATCH),this.lookahead-=this.prev_length-1,this.prev_length-=2;do{++this.strstart<=r&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,i=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart)}while(0!=--this.prev_length);if(this.match_available=!1,this.match_length=MIN_MATCH-1,this.strstart++,e&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}else if(this.match_available){if(e=this._tr_tally(0,255&this.window[this.strstart-1]),e&&this.flush_block_only(!1),this.strstart++,this.lookahead--,0===this.strm.avail_out)return 0}else this.match_available=!0,this.strstart++,this.lookahead--}return this.match_available&&(e=this._tr_tally(0,255&this.window[this.strstart-1]),this.match_available=!1),this.flush_block_only(4===t),0===this.strm.avail_out?4===t?2:0:4===t?3:1}deflateSetDictionary(t){const e=t.byteLength;let r,n=e,i=0;if(!t||1!==this.status)return-2;if(n<MIN_MATCH)return 0;for(n>32768-MIN_LOOKAHEAD&&(n=32768-MIN_LOOKAHEAD,i=e-n),this.window.set(t.subarray(i,i+n),0),this.strstart=n,this.block_start=n,this.ins_h=255&this.window[0],this.ins_h=(this.ins_h<<hash_shift^255&this.window[1])&hash_mask,r=0;r<=n-MIN_MATCH;r++)this.ins_h=(this.ins_h<<hash_shift^255&this.window[r+(MIN_MATCH-1)])&hash_mask,this.prev[32767&r]=this.head[this.ins_h],this.head[this.ins_h]=r;return 0}deflate(t){if(t>4||t<0)return-2;const{strm:e}=this;if(!e.next_out||!e.next_in&&0!==e.avail_in||3===this.status&&4!=t)return-2;if(0===e.avail_out)return-5;let r=this.last_flush;if(this.last_flush=t,1===this.status&&(this.status=2),0!==this.pending){if(e.flush_pending(this),0===e.avail_out)return this.last_flush=-1,0}else if(0===e.avail_in&&t<=r&&4!==t)return-5;if(3===this.status&&0!==e.avail_in)return-5;if(0!==e.avail_in||0!==this.lookahead||0!==t&&3!==this.status){let r;switch(config_table[this.level].func){case 0:r=this.deflate_stored(t);break;case 1:r=this.deflate_fast(t);break;default:r=this.deflate_slow(t)}if(2!=r&&3!==r||(this.status=3),0===r||2===r)return 0===e.avail_out&&(this.last_flush=-1),0;if(1===r){if(1===t)this._tr_align();else if(this._tr_stored_block(0,0,!1),3===t)for(let t=0;t<hash_size;t++)this.head[t]=0;if(e.flush_pending(this),0===e.avail_out)return this.last_flush=-1,0}}return 4!==t?0:1}}class Deflater{constructor(t){var e,r;this.checksum=1,this.origSize=0,this.dictChecksum=0;const n=null!==(e=null==t?void 0:t.level)&&void 0!==e?e:6,i=null!==(r=null==t?void 0:t.format)&&void 0!==r?r:"deflate",o=null==t?void 0:t.dictionary,s=null==t?void 0:t.fileName;if("number"!=typeof n||n<1||n>9)throw new RangeError("level must be between 1 and 9, inclusive");if("gzip"!==i&&"raw"!==i&&"deflate"!==i)throw new RangeError("container must be one of `raw`, `deflate`, `gzip`");if(void 0!==s&&"string"!=typeof s)throw new TypeError("fileName must be a string");if(this.fileName=s||"",this.z=new ZStream,this.deflate=new Deflate(this.z,n,0),o){if("deflate"!==i)throw new TypeError("Can only provide a dictionary for `deflate` containers.");const t=u8ArrayFromBufferSource(o);if(!t)throw new TypeError("dictionary must be an ArrayBuffer or buffer view");this.dictChecksum=adler32(t),this.deflate.deflateSetDictionary(t)}this.format=i,"gzip"===this.format&&(this.checksum=0)}buildZlibHeader(){let t=2,e=1;0!==this.dictChecksum&&(t+=4,e=PRESET_DICT);const r=new ArrayBuffer(t),n=new DataView(r);return n.setUint16(0,30720|e),0!==this.dictChecksum&&n.setUint32(2,this.dictChecksum),new Uint8Array(r)}buildGZipHeader(){let t=0,e=[];this.fileName.length>0&&(t|=8,e=Array.from(this.fileName).map((t=>{const e=t.charCodeAt(0);return e>255?95:e})),e.push(0));const r=new ArrayBuffer(10+e.length),n=new DataView(r);n.setUint16(0,GZIP_ID1<<8|GZIP_ID2),n.setUint16(2,Z_DEFLATED<<8|t);const i=Math.floor(Date.now()/1e3);n.setUint32(4,i,!0),n.setUint16(8,255);const o=new Uint8Array(r);return e.length&&o.set(e,10),o}buildTrailer(){const t="gzip"===this.format,e=new ArrayBuffer(t?8:4),r=new DataView(e);return r.setUint32(0,this.checksum,t),t&&r.setUint32(4,this.origSize,!0),new Uint8Array(e)}append(t){const e=[],r=u8ArrayFromBufferSource(t);if(!(r instanceof Uint8Array))throw new TypeError("data must be an ArrayBuffer or buffer view");if(!r.length)return e;"gzip"!==this.format?this.checksum=adler32(r,this.checksum):this.checksum=crc32(r,this.checksum),this.origSize+=r.length;const{deflate:n,z:i}=this;i.next_in_index=0,i.next_in=r,i.avail_in=r.length,1===n.status&&("deflate"===this.format?e.push(this.buildZlibHeader()):"gzip"===this.format&&e.push(this.buildGZipHeader()));do{if(i.next_out_index=0,i.avail_out=OUTPUT_BUFSIZE,0!==n.deflate(0))throw new Error("deflating: "+i.msg);i.next_out_index&&e.push(new Uint8Array(i.next_out.subarray(0,i.next_out_index)))}while(i.avail_in>0||0===i.avail_out);return e}finish(){const t=[],{deflate:e,z:r}=this;if(1===e.status)throw new Error("Cannot call finish before at least 1 call to append");do{r.next_out_index=0,r.avail_out=OUTPUT_BUFSIZE;const n=e.deflate(4);if(1!==n&&0!==n)throw new Error("deflating: "+r.msg);OUTPUT_BUFSIZE-r.avail_out>0&&t.push(new Uint8Array(r.next_out.subarray(0,r.next_out_index)))}while(r.avail_in>0||0===r.avail_out);return"raw"!==this.format&&t.push(this.buildTrailer()),t}}const decContext=Symbol("decContext"),decTransform$1=Symbol("decTransform");class DecompressionTransformer{constructor(t){this.inflater_=t}transform(t,e){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new TypeError("Input data must be a BufferSource");const r=this.inflater_.append(t);for(const n of r)e.enqueue(n)}flush(t){const e=this.inflater_.finish();if(!e.success){if(!e.complete)throw new Error("Unexpected EOF during decompression");if("mismatch"===e.checksum)throw new Error("Data integrity check failed");if("mismatch"===e.fileSize)throw new Error("Data size check failed");throw new Error("Decompression error")}}}class DecompressionStream{constructor(t){if("deflate"!==t&&"gzip"!==t)throw new TypeError("format must be one of `deflate`, `gzip`");this[decContext]=new Inflater,this[decTransform$1]=new TransformStream(new DecompressionTransformer(this[decContext]))}get readable(){return this[decTransform$1].readable}get writable(){return this[decTransform$1].writable}}const comContext=Symbol("comContext"),comTransform=Symbol("comTransform");class CompressionTransformer{constructor(t){this.deflater_=t}transform(t,e){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new TypeError("Input data must be a BufferSource");const r=this.deflater_.append(t);for(const n of r)e.enqueue(n)}flush(t){const e=this.deflater_.finish();for(const r of e)t.enqueue(r)}}class CompressionStream{constructor(t){if("deflate"!==t&&"gzip"!==t)throw new TypeError("format must be one of `deflate`, `gzip`");this[comContext]=new Deflater({format:t}),this[comTransform]=new TransformStream(new CompressionTransformer(this[comContext]))}get readable(){return this[comTransform].readable}get writable(){return this[comTransform].writable}}function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0}function getGlobalValue(t){const e=getGlobal();let r;return void 0!==e&&(r=e[t]),r}function getGlobalOrContextualValue(name){const global=getGlobal();let value;if(void 0!==global&&(value=global[name]),void 0===value)try{value=eval(name)}catch(e){}return value}function hasCompleteStreamsImplementation(){const t=getGlobalValue("ReadableStream"),e=getGlobalValue("WritableStream"),r=getGlobalValue("TransformStream"),n=getGlobalValue("ByteLengthQueuingStrategy"),i=getGlobalValue("CountQueuingStrategy"),o=t=>"function"==typeof t;if(!(o(t)&&o(e)&&o(r)&&o(n)&&o(i)))return!1;try{const e=new t({type:"bytes"}).getReader({mode:"byob"});if(null==e||"object"!=typeof e)return!1}catch(s){return!1}return!0}function installStardazedStreams(){const t=getGlobal();if(!t)return!1;if(hasCompleteStreamsImplementation())return!1;const e=getGlobalOrContextualValue("fetch"),r=getGlobalOrContextualValue("Response"),n=getGlobalValue("ReadableStream");if(e&&r){const i=createAdaptedFetch(e,r,n,SDReadableStream,readableStreamTee),o=createAdaptedResponse(r,n,SDReadableStream,readableStreamTee);t.fetch=i,t.Response=o}return t.ReadableStream=SDReadableStream,t.WritableStream=WritableStream,t.TransformStream=TransformStream$1,t.ByteLengthQueuingStrategy=ByteLengthQueuingStrategy,t.CountQueuingStrategy=CountQueuingStrategy,!0}function installEncodingStreams(t){const e=getGlobal();if(!e)return;const r=getGlobalValue("TextDecoderStream");(t||"function"!=typeof r)&&(e.TextDecoderStream=TextDecoderStream);const n=getGlobalValue("TextEncoderStream");(t||"function"!=typeof n)&&(e.TextEncoderStream=TextEncoderStream)}function installCompressionStreams(t){const e=getGlobal();if(!e)return;const r=getGlobalValue("CompressionStream");(t||"function"!=typeof r)&&(e.CompressionStream=CompressionStream);const n=getGlobalValue("DecompressionStream");(t||"function"!=typeof n)&&(e.DecompressionStream=DecompressionStream)}const overwritten=installStardazedStreams();installEncodingStreams(overwritten),installCompressionStreams(overwritten)})()}).call(this,__webpack_require__(21))},,,function(t,e,r){"use strict";r.r(e),r.d(e,"Address4",(function(){return f})),r.d(e,"Address6",(function(){return x})),r.d(e,"AddressError",(function(){return u})),r.d(e,"v6",(function(){return L}));var n={};function i(t){return!(this.subnetMask<t.subnetMask)&&this.mask(t.subnetMask)===t.mask()}function o(t){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===t&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}}r.r(n),r.d(n,"spanAllZeroes",(function(){return S})),r.d(n,"spanAll",(function(){return E})),r.d(n,"spanLeadingZeroes",(function(){return M})),r.d(n,"simpleGroup",(function(){return I}));const s=32,a=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,c=/\/\d{1,2}$/;class u extends Error{constructor(t,e){super(t),this.name="AddressError",null!==e&&(this.parseMessage=e)}}var h=r(37),l=r(18);class f{constructor(t){this.groups=4,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=o(s),this.isInSubnet=i,this.address=t;const e=c.exec(t);if(e){if(this.parsedSubnet=e[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/".concat(this.subnetMask),this.subnetMask<0||this.subnetMask>s)throw new u("Invalid subnet mask.");t=t.replace(c,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new f(t),!0}catch(e){return!1}}parse(t){const e=t.split(".");if(!t.match(a))throw new u("Invalid IPv4 address.");return e}correctForm(){return this.parsedAddress.map((t=>parseInt(t,10))).join(".")}static fromHex(t){const e=t.replace(/:/g,"").padStart(8,"0"),r=[];let n;for(n=0;n<8;n+=2){const t=e.slice(n,n+2);r.push(parseInt(t,16))}return new f(r.join("."))}static fromInteger(t){return f.fromHex(t.toString(16))}static fromArpa(t){const e=t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new f(e)}toHex(){return this.parsedAddress.map((t=>Object(l.sprintf)("%02x",parseInt(t,10)))).join(":")}toArray(){return this.parsedAddress.map((t=>parseInt(t,10)))}toGroup6(){const t=[];let e;for(e=0;e<4;e+=2){const r=Object(l.sprintf)("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push(Object(l.sprintf)("%x",parseInt(r,16)))}return t.join(":")}bigInteger(){return new h.BigInteger(this.parsedAddress.map((t=>Object(l.sprintf)("%02x",parseInt(t,10)))).join(""),16)}_startAddress(){return new h.BigInteger(this.mask()+"0".repeat(s-this.subnetMask),2)}startAddress(){return f.fromBigInteger(this._startAddress())}startAddressExclusive(){const t=new h.BigInteger("1");return f.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new h.BigInteger(this.mask()+"1".repeat(s-this.subnetMask),2)}endAddress(){return f.fromBigInteger(this._endAddress())}endAddressExclusive(){const t=new h.BigInteger("1");return f.fromBigInteger(this._endAddress().subtract(t))}static fromBigInteger(t){return f.fromInteger(parseInt(t.toString(),10))}mask(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}reverseForm(t){t||(t={});const e=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?e:Object(l.sprintf)("%s.in-addr.arpa.",e)}isMulticast(){return this.isInSubnet(new f("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(s,"0")}groupForV6(){const t=this.parsedAddress;return this.address.replace(a,Object(l.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))}}const d=128,p={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},m={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},y=/([^0-9a-f:/%])/gi,g=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,b=/\/\d{1,3}(?=%|$)/,v=/%.*$/,w=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),_=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);function S(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}function E(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.split("");return r.map(((t,r)=>Object(l.sprintf)('<span class="digit value-%s position-%d">%s</span>',t,r+e,S(t)))).join("")}function A(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function M(t){return t.split(":").map((t=>A(t))).join(":")}function I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.split(":");return r.map(((t,r)=>/group-v4/.test(t)?t:Object(l.sprintf)('<span class="hover-group group-%d">%s</span>',r+e,A(t))))}function R(t){return Object(l.sprintf)("(%s)",t.join("|"))}function T(t){return t.length<4?Object(l.sprintf)("0{0,%d}%s",4-t.length,t):t}const C="[^A-Fa-f0-9:]";function O(t){const e=[];t.forEach(((t,r)=>{0===parseInt(t,16)&&e.push(r)}));const r=e.map((e=>t.map(((t,r)=>{if(r===e){const e=0===r||7===r?":":"";return R([T(t),e])}return T(t)})).join(":")));return r.push(t.map(T).join(":")),R(r)}function k(t,e,r){const n=e?"":":",i=r?"":":",o=[];e||r||o.push("::"),e&&r&&o.push(""),(r&&!e||!r&&e)&&o.push(":"),o.push(Object(l.sprintf)("%s(:0{1,4}){1,%d}",n,t-1)),o.push(Object(l.sprintf)("(0{1,4}:){1,%d}%s",t-1,i)),o.push(Object(l.sprintf)("(0{1,4}:){%d}0{1,4}",t-1));for(let s=1;s<t-1;s++)for(let e=1;e<t-s;e++)o.push(Object(l.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",e,t-e-s-1));return R(o)}function P(t){if(!t)throw new Error("Assertion failed.")}function N(t){return t=(t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function D(t){return Object(l.sprintf)("%04x",parseInt(t,16))}function B(t){return 255&t}class x{constructor(t,e){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=i,this.isCorrect=o(d),this.groups=void 0===e?8:e,this.address=t;const r=b.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/".concat(this.subnetMask),Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>d)throw new u("Invalid subnet mask.");t=t.replace(b,"")}else if(/\//.test(t))throw new u("Invalid subnet mask.");const n=v.exec(t);n&&(this.zone=n[0],t=t.replace(v,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new x(t),!0}catch(e){return!1}}static fromBigInteger(t){const e=t.toString(16).padStart(32,"0"),r=[];let n;for(n=0;n<8;n++)r.push(e.slice(4*n,4*(n+1)));return new x(r.join(":"))}static fromURL(t){let e,r,n=null;if(-1!==t.indexOf("[")&&-1!==t.indexOf("]:")){if(r=_.exec(t),null===r)return{error:"failed to parse address with port",address:null,port:null};e=r[1],n=r[2]}else if(-1!==t.indexOf("/")){if(t=t.replace(/^[a-z0-9]+:\/\//,""),r=w.exec(t),null===r)return{error:"failed to parse address from URL",address:null,port:null};e=r[1]}else e=t;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new x(e),port:n}}static fromAddress4(t){const e=new f(t),r=d-(s-e.subnetMask);return new x("::ffff:".concat(e.correctForm(),"/").concat(r))}static fromArpa(t){let e=t.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==e.length)throw new u("Invalid 'ip6.arpa' form.");const r=e.split(".").reverse();for(let n=7;n>0;n--){const t=4*n;r.splice(t,0,":")}return e=r.join(""),new x(e)}microsoftTranscription(){return Object(l.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.subnetMask;return this.getBitsBase2(0,t)}possibleSubnets(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const e=d-this.subnetMask-Math.abs(t-d);return e<0?"0":function(t){const e=/(\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t}(new h.BigInteger("2",10).pow(e).toString(10))}_startAddress(){return new h.BigInteger(this.mask()+"0".repeat(d-this.subnetMask),2)}startAddress(){return x.fromBigInteger(this._startAddress())}startAddressExclusive(){const t=new h.BigInteger("1");return x.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new h.BigInteger(this.mask()+"1".repeat(d-this.subnetMask),2)}endAddress(){return x.fromBigInteger(this._endAddress())}endAddressExclusive(){const t=new h.BigInteger("1");return x.fromBigInteger(this._endAddress().subtract(t))}getScope(){let t=p[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==t&&(t="Global"),t||"Unknown"}getType(){for(const t of Object.keys(m))if(this.isInSubnet(new x(t)))return m[t];return"Global unicast"}getBits(t,e){return new h.BigInteger(this.getBitsBase2(t,e),2)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}getBitsBase16(t,e){const r=e-t;if(r%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,e).toString(16).padStart(r/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,d)}reverseForm(t){t||(t={});const e=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,e).reverse().join(".");return e>0?t.omitSuffix?r:Object(l.sprintf)("%s.ip6.arpa.",r):t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,e=[],r=0;const n=[];for(t=0;t<this.parsedAddress.length;t++){const e=parseInt(this.parsedAddress[t],16);0===e&&r++,0!==e&&r>0&&(r>1&&n.push([t-r,t-1]),r=0)}r>1&&n.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);const i=n.map((t=>t[1]-t[0]+1));if(n.length>0){const t=i.indexOf(Math.max(...i));e=function(t,e){const r=[],n=[];let i;for(i=0;i<t.length;i++)i<e[0]?r.push(t[i]):i>e[1]&&n.push(t[i]);return r.concat(["compact"]).concat(n)}(this.parsedAddress,n[t])}else e=this.parsedAddress;for(t=0;t<e.length;t++)"compact"!==e[t]&&(e[t]=parseInt(e[t],16).toString(16));let o=e.join(":");return o=o.replace(/^compact$/,"::"),o=o.replace(/^compact|compact$/,":"),o=o.replace(/compact/,""),o}binaryZeroPad(){return this.bigInteger().toString(2).padStart(d,"0")}parse4in6(t){const e=t.split(":"),r=e.slice(-1)[0].match(a);if(r){this.parsedAddress4=r[0],this.address4=new f(this.parsedAddress4);for(let e=0;e<this.address4.groups;e++)if(/^0[0-9]+/.test(this.address4.parsedAddress[e]))throw new u("IPv4 addresses can't have leading zeroes.",t.replace(a,this.address4.parsedAddress.map(N).join(".")));this.v4=!0,e[e.length-1]=this.address4.toGroup6(),t=e.join(":")}return t}parse(t){const e=(t=this.parse4in6(t)).match(y);if(e)throw new u(Object(l.sprintf)("Bad character%s detected in address: %s",e.length>1?"s":"",e.join("")),t.replace(y,'<span class="parse-error">$1</span>'));const r=t.match(g);if(r)throw new u(Object(l.sprintf)("Address failed regex: %s",r.join("")),t.replace(g,'<span class="parse-error">$1</span>'));let n=[];const i=t.split("::");if(2===i.length){let t=i[0].split(":"),e=i[1].split(":");1===t.length&&""===t[0]&&(t=[]),1===e.length&&""===e[0]&&(e=[]);const r=this.groups-(t.length+e.length);if(!r)throw new u("Error parsing groups");this.elidedGroups=r,this.elisionBegin=t.length,this.elisionEnd=t.length+this.elidedGroups,n=n.concat(t);for(let i=0;i<r;i++)n.push("0");n=n.concat(e)}else{if(1!==i.length)throw new u("Too many :: groups found");n=t.split(":"),this.elidedGroups=0}if(n=n.map((t=>Object(l.sprintf)("%x",parseInt(t,16)))),n.length!==this.groups)throw new u("Incorrect number of groups found");return n}canonicalForm(){return this.parsedAddress.map(D).join(":")}decimal(){return this.parsedAddress.map((t=>Object(l.sprintf)("%05d",parseInt(t,16)))).join(":")}bigInteger(){return new h.BigInteger(this.parsedAddress.map(D).join(""),16)}to4(){const t=this.binaryZeroPad().split("");return f.fromHex(new h.BigInteger(t.slice(96,128).join(""),2).toString(16))}to4in6(){const t=this.to4(),e=new x(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let r="";return/:$/.test(e)||(r=":"),e+r+t.address}inspectTeredo(){const t=this.getBitsBase16(0,32),e=this.getBits(80,96).xor(new h.BigInteger("ffff",16)).toString(),r=f.fromHex(this.getBitsBase16(32,64)),n=f.fromHex(this.getBits(96,128).xor(new h.BigInteger("ffffffff",16)).toString(16)),i=this.getBits(64,80),o=this.getBitsBase2(64,80),s=i.testBit(15),a=i.testBit(14),c=i.testBit(8),u=i.testBit(9),d=new h.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:Object(l.sprintf)("%s:%s",t.slice(0,4),t.slice(4,8)),server4:r.address,client4:n.address,flags:o,coneNat:s,microsoft:{reserved:a,universalLocal:u,groupIndividual:c,nonce:d},udpPort:e}}inspect6to4(){const t=this.getBitsBase16(0,16),e=f.fromHex(this.getBitsBase16(16,48));return{prefix:Object(l.sprintf)("%s",t.slice(0,4)),gateway:e.address}}to6to4(){if(!this.is4())return null;const t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new x(t)}toByteArray(){const t=this.bigInteger().toByteArray();return 17===t.length&&0===t[0]?t.slice(1):t}toUnsignedByteArray(){return this.toByteArray().map(B)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(B))}static fromUnsignedByteArray(t){const e=new h.BigInteger("256",10);let r=new h.BigInteger("0",10),n=new h.BigInteger("1",10);for(let i=t.length-1;i>=0;i--)r=r.add(n.multiply(new h.BigInteger(t[i].toString(10),10))),n=n.multiply(e);return x.fromBigInteger(r)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new x("2001::/32"))}is6to4(){return this.isInSubnet(new x("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(t){return t=void 0===t?"":Object(l.sprintf)(":%s",t),Object(l.sprintf)("http://[%s]%s/",this.correctForm(),t)}link(t){t||(t={}),void 0===t.className&&(t.className=""),void 0===t.prefix&&(t.prefix="/#address="),void 0===t.v4&&(t.v4=!1);let e=this.correctForm;return t.v4&&(e=this.to4in6),t.className?Object(l.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,e.call(this),t.className):Object(l.sprintf)('<a href="%1$s%2$s">%2$s</a>',t.prefix,e.call(this))}group(){if(0===this.elidedGroups)return I(this.address).join(":");P("number"===typeof this.elidedGroups),P("number"===typeof this.elisionBegin);const t=[],[e,r]=this.address.split("::");e.length?t.push(...I(e)):t.push("");const n=["hover-group"];for(let i=this.elisionBegin;i<this.elisionBegin+this.elidedGroups;i++)n.push(Object(l.sprintf)("group-%d",i));return t.push(Object(l.sprintf)('<span class="%s"></span>',n.join(" "))),r.length?t.push(...I(r,this.elisionEnd)):t.push(""),this.is4()&&(P(this.address4 instanceof f),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[];const r=new x(this.correctForm());if(0===r.elidedGroups)e.push(O(r.parsedAddress));else if(8===r.elidedGroups)e.push(k(8));else{const t=r.address.split("::");t[0].length&&e.push(O(t[0].split(":"))),P("number"===typeof r.elidedGroups),e.push(k(r.elidedGroups,0!==t[0].length,0!==t[1].length)),t[1].length&&e.push(O(t[1].split(":"))),e=[e.join(":")]}return t||(e=["(?=^|",C,"|[^\\w\\:])(",...e,")(?=[^\\w\\:]|",C,"|$)"]),e.join("")}regularExpression(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new RegExp(this.regularExpressionString(t),"i")}}const L={helpers:n}},,function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(1),i=r(353);function o(t,e,r,o,s){let a;t=Object(n.a)(t),e=Object(n.a)(e);let c=1;const u=new Uint8Array(o),h=new Uint8Array(e.length+4);let l,f;h.set(e);for(let d=1;d<=c;d++){h[e.length]=d>>24&255,h[e.length+1]=d>>16&255,h[e.length+2]=d>>8&255,h[e.length+3]=255&d;let p=Object(n.a)(Object(i.a)(s,t,h));a||(a=p.length,f=new Uint8Array(a),c=Math.ceil(o/a),l=o-(c-1)*a),f.set(p);for(let e=1;e<r;e++){p=Object(n.a)(Object(i.a)(s,t,p));for(let t=0;t<a;t++)f[t]^=p[t]}const m=(d-1)*a,y=d===c?l:a;u.set(Object(n.a)(f).slice(0,y),m)}return Object(n.i)(u)}},,function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return a}));var n=r(30);const i=n.a.from(-1),o=n.a.from(0),s=n.a.from(1),a=n.a.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")},function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(1),i=r(13),o=r(44);function s(t){return"string"===typeof t&&(t=Object(o.f)(t)),Object(i.a)(Object(n.b)([Object(o.f)("\x19Ethereum Signed Message:\n"),Object(o.f)(String(t.length)),t]))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return I}));var n=r(20),i=r(30),o=r(1),s=r(13),a=r(4),c=r(3),u=r(132),h=r(197),l=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const f=new c.a(u.a),d=new Uint8Array(32);d.fill(0);const p=i.a.from(-1),m=i.a.from(0),y=i.a.from(1),g=i.a.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const b=Object(o.h)(y.toHexString(),32),v=Object(o.h)(m.toHexString(),32),w={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},_=["name","version","chainId","verifyingContract","salt"];function S(t){return function(e){return"string"!==typeof e&&f.throwArgumentError("invalid domain value for ".concat(JSON.stringify(t)),"domain.".concat(t),e),e}}const E={name:S("name"),version:S("version"),chainId:function(t){try{return i.a.from(t).toString()}catch(e){}return f.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Object(n.a)(t).toLowerCase()}catch(e){}return f.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=Object(o.a)(t);if(32!==e.length)throw new Error("bad length");return Object(o.i)(e)}catch(e){}return f.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function A(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=""===e[1],n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&f.throwArgumentError("invalid numeric width","type",t);const s=g.mask(r?n-1:n),a=r?s.add(y).mul(p):m;return function(e){const r=i.a.from(e);return(r.lt(a)||r.gt(s))&&f.throwArgumentError("value out-of-bounds for ".concat(t),"value",e),Object(o.h)(r.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(0===r||r>32||e[1]!==String(r))&&f.throwArgumentError("invalid bytes width","type",t),function(e){return Object(o.a)(e).length!==r&&f.throwArgumentError("invalid length for ".concat(t),"value",e),function(t){const e=Object(o.a)(t),r=e.length%32;return r?Object(o.c)([e,d.slice(r)]):Object(o.i)(e)}(e)}}}switch(t){case"address":return function(t){return Object(o.h)(Object(n.a)(t),32)};case"bool":return function(t){return t?b:v};case"bytes":return function(t){return Object(s.a)(t)};case"string":return function(t){return Object(h.a)(t)}}return null}function M(t,e){return"".concat(t,"(").concat(e.map((t=>{let{name:e,type:r}=t;return r+" "+e})).join(","),")")}class I{constructor(t){Object(a.d)(this,"types",Object.freeze(Object(a.c)(t))),Object(a.d)(this,"_encoderCache",{}),Object(a.d)(this,"_types",{});const e={},r={},n={};Object.keys(t).forEach((t=>{e[t]={},r[t]=[],n[t]={}}));for(const o in t){const n={};t[o].forEach((i=>{n[i.name]&&f.throwArgumentError("duplicate variable name ".concat(JSON.stringify(i.name)," in ").concat(JSON.stringify(o)),"types",t),n[i.name]=!0;const s=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===o&&f.throwArgumentError("circular type reference to ".concat(JSON.stringify(s)),"types",t);A(s)||(r[s]||f.throwArgumentError("unknown type ".concat(JSON.stringify(s)),"types",t),r[s].push(o),e[o][s]=!0)}))}const i=Object.keys(r).filter((t=>0===r[t].length));0===i.length?f.throwArgumentError("missing primary type","types",t):i.length>1&&f.throwArgumentError("ambiguous primary types or unused types: ".concat(i.map((t=>JSON.stringify(t))).join(", ")),"types",t),Object(a.d)(this,"primaryType",i[0]),function i(o,s){s[o]&&f.throwArgumentError("circular type reference to ".concat(JSON.stringify(o)),"types",t),s[o]=!0,Object.keys(e[o]).forEach((t=>{r[t]&&(i(t,s),Object.keys(s).forEach((e=>{n[e][t]=!0})))})),delete s[o]}(this.primaryType,{});for(const o in n){const e=Object.keys(n[o]);e.sort(),this._types[o]=M(o,t[o])+e.map((e=>M(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}_getEncoder(t){{const e=A(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t),n=parseInt(e[3]);return e=>{n>=0&&e.length!==n&&f.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let i=e.map(r);return this._types[t]&&(i=i.map(s.a)),Object(s.a)(Object(o.c)(i))}}const r=this.types[t];if(r){const e=Object(h.a)(this._types[t]);return t=>{const n=r.map((e=>{let{name:r,type:n}=e;const i=this.getEncoder(n)(t[r]);return this._types[n]?Object(s.a)(i):i}));return n.unshift(e),Object(o.c)(n)}}return f.throwArgumentError("unknown type: ".concat(t),"type",t)}encodeType(t){const e=this._types[t];return e||f.throwArgumentError("unknown type: ".concat(JSON.stringify(t)),"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return Object(s.a)(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(A(t))return r(t,e);const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const t=n[1],i=parseInt(n[3]);return i>=0&&e.length!==i&&f.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((e=>this._visit(t,e,r)))}const i=this.types[t];return i?i.reduce(((t,n)=>{let{name:i,type:o}=n;return t[i]=this._visit(o,e[i],r),t}),{}):f.throwArgumentError("unknown type: ".concat(t),"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new I(t)}static getPrimaryType(t){return I.from(t).primaryType}static hashStruct(t,e,r){return I.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){const n=w[r];n||f.throwArgumentError("invalid typed-data domain key: ".concat(JSON.stringify(r)),"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>_.indexOf(t.name)-_.indexOf(e.name))),I.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return Object(o.c)(["0x1901",I.hashDomain(t),I.from(e).hash(r)])}static hash(t,e,r){return Object(s.a)(I.encode(t,e,r))}static resolveNames(t,e,r,n){return l(this,void 0,void 0,(function*(){t=Object(a.g)(t);const i={};t.verifyingContract&&!Object(o.l)(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const s=I.from(e);s.visit(r,((t,e)=>("address"!==t||Object(o.l)(e,20)||(i[e]="0x"),e)));for(const t in i)i[t]=yield n(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=s.visit(r,((t,e)=>"address"===t&&i[e]?i[e]:e)),{domain:t,value:r}}))}static getPayload(t,e,r){I.hashDomain(t);const n={},s=[];_.forEach((e=>{const r=t[e];null!=r&&(n[e]=E[e](r),s.push({name:e,type:w[e]}))}));const c=I.from(e),u=Object(a.g)(e);return u.EIP712Domain?f.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e):u.EIP712Domain=s,c.encode(r),{types:u,domain:n,primaryType:c.primaryType,message:c.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/))return Object(o.i)(Object(o.a)(e));if(t.match(/^u?int/))return i.a.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!==typeof e&&f.throwArgumentError("invalid string","value",e),e}return f.throwArgumentError("unsupported type","type",t)}))}}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(140);let i=null;function o(t){if(null==i&&(i="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==n.a.check(t)))throw i=null,new Error("BIP39 Wordlist for en (English) FAILED")}class s extends n.a{constructor(){super("en")}getWord(t){return o(this),i[t]}getWordIndex(t){return o(this),i.indexOf(t)}}const a=new s;n.a.register(a);const c={en:a}}]]);
//# sourceMappingURL=0.c1bde522.chunk.js.map