(this["webpackJsonpchrome-react-seo-extension"]=this["webpackJsonpchrome-react-seo-extension"]||[]).push([[0],{166:function(e,t){},322:function(e,t){},326:function(e,t){},327:function(e,t){},344:function(e,t,s){},345:function(e,t,s){},364:function(e,t){},366:function(e,t){},375:function(e,t){},377:function(e,t){},402:function(e,t){},404:function(e,t){},405:function(e,t){},410:function(e,t){},412:function(e,t){},431:function(e,t){},443:function(e,t){},446:function(e,t){},512:function(e,t){},588:function(e,t){},626:function(e,t){},643:function(e,t){},659:function(e,t){},709:function(e,t,s){"use strict";s.r(t);var a,n,c,o,i=s(32),l=s(321),r=s.n(l),d=(s(344),s(345),s(334)),u=s(197),j=s(102),m=s(335),p=s(12),g=[],v={all:[]};function b(){const[e,t]=Object(i.useState)(0),[s,l]=Object(i.useState)(null===localStorage.getItem("privateKey")),[r,b]=Object(i.useState)(null!==localStorage.getItem("privateKey")&&localStorage.getItem("privateKey").includes("cipher")),[f,h]=Object(i.useState)(0),[y,O]=Object(i.useState)(!1),[x,N]=Object(i.useState)(!1),[w,S]=Object(i.useState)(!1),[C,I]=Object(i.useState)(""),[P,M]=Object(i.useState)(""),[k,K]=Object(i.useState)(!1);async function E(e){if(""!==e)try{a=await j.a.fromEncryptedJson(localStorage.getItem("privateKey"),e,h)}catch(t){alert("Invalid password")}else a=new j.a(localStorage.getItem("privateKey"));console.log(a),L(),await A()}async function A(){o=a.address,n=await m.a.create(a),console.log(n),await async function(){let e=await n.conversations.list();for(const t of e)g.push(t);O(!0),console.log(g)}()}async function T(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";try{""===s&&(s="all");let a=await n.conversations.newConversation(e);await a.send(s+"////"+t),console.log("Sent message "+t+" to "+e)}catch(a){alert("Address is not on the XMTP network yet")}}async function B(e){v={all:[]},console.log(e);let t=await async function(e){let t=await n.conversations.newConversation(e);return await t.messages()}(e.peerAddress);I(e.peerAddress),console.log(t);for(const s of t){let e,t,a,n=s.content.split("////");n.length>1?(e=n[0],t=n[1]):(e="all",t=n[0]),a=s.senderAddress===o?"Me - ":s.senderAddress.substring(0,6)+"..."+s.senderAddress.slice(-4)+" - ",e in v?v[e].push(a+t):v[e]=[a+t],"all"!==e&&v.all.push(a+t)}console.log(v),N(!1),N(!0)}function L(){b(!1),l(!1),t(0),h(0),K(!1)}return window.onload=function(){r||null===localStorage.getItem("privateKey")||E("")},Object(p.jsxs)("div",{className:"App",children:[s&&Object(p.jsxs)("div",{className:"Settings",children:[localStorage.getItem("privateKey")&&Object(p.jsx)(u.a,{className:"ClosePrivateKey Icon",onClick:()=>{L()}}),Object(p.jsx)("div",{className:"Progress",id:"PrivateKeyProgress",style:{width:500*f+"px"}}),Object(p.jsx)("input",{className:"SettingsInput",id:"PrivateKey",type:"text",autoComplete:"off",placeholder:"Private Key"}),Object(p.jsx)("input",{className:"SettingsInput",id:"Password",type:"text",autoComplete:"off",placeholder:"Password"}),Object(p.jsx)("button",{className:"Save SaveSettings",onClick:()=>{!async function(e,t){try{if(a=new j.a(e),t){let e=await a.encrypt(t,h);chrome.storage.local.set({privateKey:e},(function(){}))}else chrome.storage.local.set({privateKey:e},(function(){}));console.log(a),L(),await A()}catch(s){alert("Invalid private key")}}(document.getElementById("PrivateKey").value,document.getElementById("Password").value)},children:"Save"})]}),r&&Object(p.jsxs)("div",{className:"InitialPassword",children:[Object(p.jsx)("div",{className:"Progress",id:"PasswordProgress",style:{width:500*f+"px"}}),Object(p.jsx)("input",{className:"SettingsInput",id:"InitialPassword",type:"text",autoComplete:"off",placeholder:"Password"}),Object(p.jsx)("button",{className:"Save SavePassword",onClick:()=>{E(document.getElementById("InitialPassword").value)},children:"Enter"})]}),k&&Object(p.jsxs)("div",{className:"NewConversationPopup",children:[Object(p.jsx)(u.a,{className:"ClosePrivateKey Icon",onClick:()=>{L()}}),Object(p.jsx)("input",{className:"SettingsInput",id:"ToAddress",type:"text",autoComplete:"off",placeholder:"Message Recipient"}),Object(p.jsx)("input",{className:"SettingsInput",id:"ToWebsite",type:"text",autoComplete:"off",placeholder:"Website (Optional)"}),Object(p.jsx)("button",{className:"CurrentWebsite",onClick:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var t;document.getElementById("ToWebsite").value=(t=e[0].url,new URL(t).host)}))},children:"Current"}),Object(p.jsx)("input",{className:"SettingsInput",id:"ToMessage",type:"text",autoComplete:"off",placeholder:"Message"}),Object(p.jsx)("button",{className:"Save SendMessage",onClick:()=>{T(document.getElementById("ToAddress").value,document.getElementById("ToMessage").value,document.getElementById("ToWebsite").value),L()},children:"Send"})]}),Object(p.jsxs)("div",{className:"GlobalHeader",children:[Object(p.jsx)("span",{className:"MyAddress",title:o,children:o&&"Logged in as "+o.substring(0,6)+"..."+o.slice(-4)||"Loading..."}),Object(p.jsx)("div",{className:"NewConversation HeaderButton",onClick:()=>{K(!0)},children:"New Conversation"}),Object(p.jsx)(d.a,{className:"OpenSettings Icon",onClick:()=>{t(2),l(!0)},style:{color:2===e?"white":"rgba(255,255,255,0.5)"}})]}),Object(p.jsxs)("div",{className:"LeftNav",children:[Object(p.jsx)("div",{className:"LeftNavHeader",children:Object(p.jsx)("span",{className:"LeftNavHeaderOption",children:"People"})}),y?Object(p.jsx)("div",{children:g.map(((e,t)=>Object(p.jsx)("div",{className:"Option Person",onClick:()=>{B(e)},children:e.peerAddress.substring(0,6)+"..."+e.peerAddress.slice(-4)},t)))}):Object(p.jsx)("div",{className:"Option Person",children:"Loading..."})]}),Object(p.jsxs)("div",{className:"MiddleNav",children:[Object(p.jsx)("span",{className:"MiddleNavHeaderOption",children:"Sites"}),x&&Object(p.jsx)("div",{children:Object.keys(v).map(((e,t)=>Object(p.jsx)("div",{className:"Option Site",onClick:()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";c=v[e],M(e),S(!1),S(!0)}(e)},children:e},t)))})]}),Object(p.jsxs)("div",{className:"RightNav",children:[Object(p.jsx)("div",{className:"RightNavHeader"}),Object(p.jsx)("div",{className:"Messages",children:w&&Object(p.jsx)("div",{children:c.map(((e,t)=>Object(p.jsx)("div",{className:e.includes("Me")?"Message Right":"Message Left",title:P,children:e},t)))})}),w&&Object(p.jsx)("input",{className:"TextMessage",type:"text",placeholder:"Type your message",autoComplete:"off",onKeyPress:e=>{if("Enter"===e.key){console.log(e.target.value),T(C,e.target.value,P);let t=document.createElement("div");t.classList.add("Message"),t.classList.add("Right"),t.innerHTML="Me - "+e.target.value,document.getElementsByClassName("Messages")[0].appendChild(t),document.getElementsByClassName("TextMessage")[0].value=""}}})]})]})}r.a.createRoot(document.getElementById("root")).render(Object(p.jsx)(b,{}))}},[[709,1,2]]]);
//# sourceMappingURL=main.4f45f1c9.chunk.js.map