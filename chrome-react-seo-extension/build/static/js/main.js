!function(e){function t(t){for(var s,o,i=t[0],l=t[1],r=t[2],u=0,p=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(d&&d(t);p.length;)p.shift()();return c.push.apply(c,r||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],s=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(s=!1)}s&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},a={2:0},c=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=this["webpackJsonpchrome-react-seo-extension"]=this["webpackJsonpchrome-react-seo-extension"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var r=0;r<i.length;r++)t(i[r]);var d=l;c.push([356,0,3]),n()}({121:function(e,t){},190:function(e,t){},191:function(e,t){},192:function(e,t){},213:function(e,t){},214:function(e,t){},225:function(e,t){},226:function(e,t){},246:function(e,t){},248:function(e,t){},249:function(e,t){},250:function(e,t){},251:function(e,t){},259:function(e,t){},265:function(e,t){},268:function(e,t){},287:function(e,t){},316:function(e,t){},321:function(e,t){},325:function(e,t){},329:function(e,t){},356:function(e,t,n){e.exports=n(712)},363:function(e,t,n){},364:function(e,t,n){},712:function(e,t,n){"use strict";n.r(t);var s=n(25),a=n(342),c=n.n(a),o=(n(363),n(364),n(353)),i=n(108),l=n(78),r=n(138),d=n(352),u=n(5);const p="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDY1Nzc1NjBhMjU5ZTVFNkY5ZGY2OUI5MjUzNzg3NjBlM2NiMzE1OTMiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTgyOTA2ODQwMDYsIm5hbWUiOiJIYWNrRlMyMDIyIn0.pV0ewTBjRB2MVpB8Dkiu8McnSNTCQvVSLeMr8RfVgsM",m="ea1e18b5-7e10-4dd5-8354-9198453d55e8";var j,f,g,h,b=[],v={all:[]};function y(){const[e,t]=Object(s.useState)(0),[n,a]=Object(s.useState)(null===localStorage.getItem("privateKey")),[c,y]=Object(s.useState)(null!==localStorage.getItem("privateKey")&&localStorage.getItem("privateKey").includes("cipher")),[O,N]=Object(s.useState)(0),[x,w]=Object(s.useState)(!1),[S,I]=Object(s.useState)(!1),[C,M]=Object(s.useState)(!1),[P,T]=Object(s.useState)(""),[k,B]=Object(s.useState)(""),[E,_]=Object(s.useState)(!1),[L,A]=Object(s.useState)(!1),[W,K]=Object(s.useState)([]),[J,R]=Object(s.useState)(!1),[F,U]=Object(s.useState)(!1),[H,z]=Object(s.useState)("Awaiting command...");async function D(e){if(""!==e)try{j=await l.a.fromEncryptedJson(localStorage.getItem("privateKey"),e,N)}catch(t){alert("Invalid password")}else j=new l.a(localStorage.getItem("privateKey"));console.log(j),Z(),await X()}async function X(){h=j.address,f=await r.a.create(j),console.log(f),await async function(){let e=await f.conversations.list();for(const t of e)b.push(t);w(!0),console.log(b)}()}async function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";try{""===n&&(n="all");let s=await f.conversations.newConversation(e);await s.send(n+"////"+t),console.log("Sent message "+t+" to "+e)}catch(s){alert("Address is not on the XMTP network yet")}}async function Y(e){v={all:[]},console.log(e);let t=await async function(e){let t=await f.conversations.newConversation(e);return await t.messages()}(e.peerAddress);T(e.peerAddress),console.log(t);for(const n of t){let e,t,s,a=n.content.split("////");a.length>1?(e=a[0],t=a[1]):(e="all",t=a[0]),s=n.senderAddress===h?"Me - ":n.senderAddress.substring(0,6)+"..."+n.senderAddress.slice(-4)+" - ",e in v?v[e].push(s+t):v[e]=[s+t],"all"!==e&&v.all.push(s+t)}console.log(v),I(!1),I(!0)}function Z(){y(!1),a(!1),t(0),N(0),_(!1),A(!1),U(!1),z("Awaiting command...")}function q(e){return new URL(e).host}function G(e){try{fetch("https://favicongrabber.com/api/grab/".concat(document.getElementById("CurrentWebsiteInput").value),{method:"GET",mode:"cors"}).then((e=>e.json())).then((t=>{console.log(t.icons[0].src);var n=document.getElementsByClassName("NFTPreview")[0];n.width=n.height*(n.clientWidth/n.clientHeight);var s=n.getContext("2d");s.clearRect(0,0,n.width,n.height);var a=new Image;a.src="https://i.imgur.com/ZP5RI97.png",a.crossOrigin="Anonymous",a.onload=function(){s.drawImage(a,-7,-5,164,164),s.beginPath(),s.arc(76,76,42,0,2*Math.PI,!1),s.fillStyle="white",s.fill(),s.lineWidth=5,s.strokeStyle="white",s.stroke();var n=new Image;n.src=t.icons[0].src,n.crossOrigin="Anonymous",n.onload=function(){s.drawImage(n,36,36,82,82),e&&async function(e){document.getElementsByClassName("NFTPreview")[0].toBlob((function(t){!async function(e,t){z("Uploading to web3.storage..."),console.log(e);let n=new d.a({token:p}),s=new File([e],"nft.png");console.log(s);const a=await n.put([s]);console.log(a);let c="https://ipfs.io/ipfs/".concat(a,"/nft.png");console.log(c),await async function(e,t){z("Minting with NFTPort...");let n={chain:"polygon",name:"Noir - "+e,description:"Minted via Noir for being a user of "+e,file_url:t,mint_to_address:h};fetch("https://api.nftport.xyz/v0/mints/easy/urls",{method:"POST",headers:{Authorization:m,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{console.log(e),z("Success!")}))}(t,c)}(t,e)}))}(document.getElementById("CurrentWebsiteInput").value)}}}))}catch(t){alert(t)}}return window.onload=function(){c||null===localStorage.getItem("privateKey")||D("")},Object(u.jsxs)("div",{className:"App",children:[n&&Object(u.jsxs)("div",{className:"Settings",children:[localStorage.getItem("privateKey")&&Object(u.jsx)(i.a,{className:"ClosePrivateKey Icon",onClick:()=>{Z()}}),Object(u.jsx)("div",{className:"Progress",id:"PrivateKeyProgress",style:{width:500*O+"px"}}),Object(u.jsx)("input",{className:"SettingsInput",id:"PrivateKey",type:"text",autoComplete:"off",placeholder:"Private Key"}),Object(u.jsx)("input",{className:"SettingsInput",id:"Password",type:"text",autoComplete:"off",placeholder:"Password"}),Object(u.jsx)("button",{className:"Save SaveSettings",onClick:()=>{!async function(e,t){try{if(j=new l.a(e),t){let e=await j.encrypt(t,N);localStorage.setItem("privateKey",e)}else localStorage.setItem("privateKey",e);console.log(j),Z(),await X()}catch(n){alert("Invalid private key")}}(document.getElementById("PrivateKey").value,document.getElementById("Password").value)},children:"Save"})]}),c&&Object(u.jsxs)("div",{className:"InitialPassword",children:[Object(u.jsx)("div",{className:"Progress",id:"PasswordProgress",style:{width:500*O+"px"}}),Object(u.jsx)("input",{className:"SettingsInput",id:"InitialPassword",type:"text",autoComplete:"off",placeholder:"Password"}),Object(u.jsx)("button",{className:"Save SavePassword",onClick:()=>{D(document.getElementById("InitialPassword").value)},children:"Enter"})]}),E&&Object(u.jsxs)("div",{className:"NewConversationPopup",children:[Object(u.jsx)(i.a,{className:"ClosePrivateKey Icon",onClick:()=>{Z()}}),Object(u.jsx)("input",{className:"SettingsInput",id:"ToAddress",type:"text",autoComplete:"off",placeholder:"Message Recipient"}),Object(u.jsx)("input",{className:"SettingsInput",id:"ToWebsite",type:"text",autoComplete:"off",placeholder:"Website (Optional)"}),Object(u.jsx)("button",{className:"CurrentWebsite",onClick:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){document.getElementById("ToWebsite").value=q(e[0].url)}))},children:"Current"}),Object(u.jsx)("input",{className:"SettingsInput",id:"ToMessage",type:"text",autoComplete:"off",placeholder:"Message"}),Object(u.jsx)("button",{className:"Save SendMessage",onClick:()=>{V(document.getElementById("ToAddress").value,document.getElementById("ToMessage").value,document.getElementById("ToWebsite").value),Z()},children:"Send"})]}),L&&Object(u.jsxs)("div",{className:"LookupPopup",children:[Object(u.jsx)(i.a,{className:"ClosePrivateKey Icon",onClick:()=>{Z()}}),Object(u.jsx)("input",{className:"SettingsInput",id:"SearchAddress",type:"text",autoComplete:"off",placeholder:"Enter address to search",onKeyPress:e=>{if("Enter"===e.key)try{!async function(e){try{R(!0);let t=[];fetch("https://api.covalenthq.com/v1/".concat(137,"/address/").concat(e,"/balances_v2/?quote-currency=USD&format=JSON&nft=true&no-nft-fetch=false&key=").concat("ckey_79c997c7e8084e0f9df0af9824c")).then((e=>e.json())).then((e=>{console.log(e.data.items);for(let n=0;n<e.data.items.length;n++){let s=e.data.items[n];"nft"===s.type&&s.nft_data&&s.nft_data[0].external_data&&s.nft_data[0].external_data.name&&s.nft_data[0].external_data.name.includes("Noir")&&t.push(s)}console.log(t),K(t),R(!1)}))}catch(t){alert("User is not on the XMTP network yet")}}(document.getElementById("SearchAddress").value)}catch(t){alert(t)}}}),J?Object(u.jsx)("div",{className:"LoadingNFTs",children:"Loading..."}):Object(u.jsx)("div",{className:"NFTs",children:W.map(((e,t)=>Object(u.jsxs)("div",{className:"NFT",style:{left:20+t%3*189+"px",top:10+154*Math.floor(t/3)+"px"},children:[Object(u.jsx)("img",{className:"NFTImage",src:e.nft_data[0].external_data.image,alt:e.nft_data[0].external_data.name}),Object(u.jsx)("span",{className:"NFTText",children:e.nft_data[0].external_data.name})]},t)))})]}),F&&Object(u.jsxs)("div",{className:"MintPopup",children:[Object(u.jsx)(i.a,{className:"ClosePrivateKey Icon",onClick:()=>{Z()}}),Object(u.jsx)("input",{className:"SettingsInput",id:"CurrentWebsiteInput",type:"text",placeholder:"Enter full URL"}),Object(u.jsx)("button",{className:"CurrentWebsite MintCurrentWebsite",onClick:()=>{chrome.tabs&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){document.getElementById("CurrentWebsiteInput").value=q(e[0].url)}))},children:"Current"}),Object(u.jsx)("button",{className:"Save DisplayButton",onClick:()=>{G(!1)},children:"Display"}),Object(u.jsx)("button",{className:"Save MintButton",onClick:()=>{G(!0)},children:"Mint"}),Object(u.jsx)("span",{className:"MintStatus",children:H}),Object(u.jsx)("canvas",{className:"NFTPreview"})]}),Object(u.jsxs)("div",{className:"GlobalHeader",children:[Object(u.jsx)("span",{className:"MyAddress",title:h,children:h&&"Logged in as "+h.substring(0,6)+"..."+h.slice(-4)||"Loading..."}),Object(u.jsx)("div",{className:"NewConversation HeaderButton",onClick:()=>{_(!0)},children:"New Conversation"}),Object(u.jsx)("div",{className:"LookupUser HeaderButton",onClick:()=>{A(!0)},children:"Lookup User"}),Object(u.jsx)("div",{className:"MintNFT HeaderButton",onClick:()=>{U(!0)},children:"Mint NFT"}),Object(u.jsx)(o.a,{className:"OpenSettings Icon",onClick:()=>{t(2),a(!0)},style:{color:2===e?"white":"rgba(255,255,255,0.5)"}})]}),Object(u.jsxs)("div",{className:"LeftNav",children:[Object(u.jsx)("div",{className:"LeftNavHeader",children:Object(u.jsx)("span",{className:"LeftNavHeaderOption",children:"People"})}),x?Object(u.jsx)("div",{children:b.map(((e,t)=>Object(u.jsx)("div",{className:"Option Person",onClick:()=>{Y(e)},children:e.peerAddress.substring(0,6)+"..."+e.peerAddress.slice(-4)},t)))}):Object(u.jsx)("div",{className:"Option Person",children:"Loading..."})]}),Object(u.jsxs)("div",{className:"MiddleNav",children:[Object(u.jsx)("span",{className:"MiddleNavHeaderOption",children:"Sites"}),S&&Object(u.jsx)("div",{children:Object.keys(v).map(((e,t)=>Object(u.jsx)("div",{className:"Option Site",onClick:()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";g=v[e],B(e),M(!1),M(!0)}(e)},children:e},t)))})]}),Object(u.jsxs)("div",{className:"RightNav",children:[Object(u.jsx)("div",{className:"RightNavHeader",children:Object(u.jsx)("span",{className:"XMTPTitle",children:Object(u.jsx)("i",{children:"Powered by XMTP"})})}),Object(u.jsx)("div",{className:"Messages",children:C&&Object(u.jsx)("div",{children:g.map(((e,t)=>Object(u.jsx)("div",{className:e.includes("Me")?"Message Right":"Message Left",title:k,children:e},t)))})}),C&&Object(u.jsx)("input",{className:"TextMessage",type:"text",placeholder:"Type your message",autoComplete:"off",onKeyPress:e=>{if("Enter"===e.key){console.log(e.target.value),V(P,e.target.value,k);let t=document.createElement("div");t.classList.add("Message"),t.classList.add("Right"),t.innerHTML="Me - "+e.target.value,document.getElementsByClassName("Messages")[0].appendChild(t),document.getElementsByClassName("TextMessage")[0].value=""}}})]})]})}c.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(y,{}))}});
//# sourceMappingURL=main.js.map