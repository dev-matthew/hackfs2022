{"version":3,"sources":["../webpack/bootstrap","App.js","index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","this","oldJsonpFunction","slice","wallet","xmtp","activeMessages","myAddress","conversations","sites","App","activeLeft","setActiveLeft","useState","settings","setSettings","localStorage","getItem","passwordNeeded","setPasswordNeeded","includes","progressWidth","setProgressWidth","loadedPeople","setLoadedPeople","loadedSites","setLoadedSites","loadedMessages","setLoadedMessages","currentAddress","setCurrentAddress","currentWebsite","setCurrentWebsite","newConversationPopup","setNewConversationPopup","async","activateWallet","password","Wallet","fromEncryptedJson","e","alert","console","log","reset","activateXMTP","address","Client","allConversations","list","conversation","getAllConversations","sendMessage","message","website","newConversation","send","loadMessageByPerson","messages","getAllMessages","peerAddress","site","content","sender","contents","split","senderAddress","substring","window","onload","className","onClick","id","style","width","type","autoComplete","placeholder","privateKey","encrypted","encrypt","setItem","handlePrivateKey","document","getElementById","chrome","tabs","query","active","currentWindow","url","URL","host","title","color","map","index","keys","displayMessages","onKeyPress","event","target","newMessage","createElement","classList","add","innerHTML","getElementsByClassName","appendChild","ReactDOM","createRoot","render"],"mappings":"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","file":"static/js/main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = this[\"webpackJsonpchrome-react-seo-extension\"] = this[\"webpackJsonpchrome-react-seo-extension\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([355,0,3]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import './App.css';\nimport {useState} from 'react';\nimport {FiSettings} from 'react-icons/fi';\nimport {IoMdClose} from 'react-icons/io';\nimport {Wallet} from 'ethers';\nimport {Client} from '@xmtp/xmtp-js';\n\nvar wallet, xmtp;\nvar conversations = [];\nvar sites = {\"all\": []};\nvar activeMessages;\nvar myAddress;\n\nexport default function App() {\n  const [activeLeft, setActiveLeft] = useState(0);\n  const [settings, setSettings] = useState(localStorage.getItem(\"privateKey\") === null);\n  const [passwordNeeded, setPasswordNeeded] = useState(localStorage.getItem(\"privateKey\") !== null && localStorage.getItem(\"privateKey\").includes(\"cipher\"));\n  const [progressWidth, setProgressWidth] = useState(0);\n  const [loadedPeople, setLoadedPeople] = useState(false);\n  const [loadedSites, setLoadedSites] = useState(false);\n  const [loadedMessages, setLoadedMessages] = useState(false);\n  const [currentAddress, setCurrentAddress] = useState(\"\");\n  const [currentWebsite, setCurrentWebsite] = useState(\"\");\n  const [newConversationPopup, setNewConversationPopup] = useState(false);\n\n  async function handlePrivateKey(privateKey, password) {\n    try {\n      wallet = new Wallet(privateKey);\n      if (password) {\n        let encrypted = await wallet.encrypt(password, setProgressWidth);\n        localStorage.setItem(\"privateKey\", encrypted);\n        // eslint-disable-next-line\n        //chrome.storage.local.set({\"privateKey\": encrypted}, function() {});\n      } else {\n        localStorage.setItem(\"privateKey\", privateKey);\n        // eslint-disable-next-line\n        //chrome.storage.local.set({\"privateKey\": privateKey}, function() {});\n      }\n      console.log(wallet);\n      reset();\n      await activateXMTP();\n    } catch(e) {\n      alert(\"Invalid private key\");\n    }\n  }\n\n  async function activateWallet(password) {\n    if (password !== \"\") {\n      try {\n        wallet = await Wallet.fromEncryptedJson(localStorage.getItem(\"privateKey\"), password, setProgressWidth);\n      } catch(e) {\n        alert(\"Invalid password\");\n      }\n    } else {\n      wallet = new Wallet(localStorage.getItem(\"privateKey\"));\n    }\n    console.log(wallet);\n    reset();\n    await activateXMTP();\n  }\n\n  async function activateXMTP() {\n    myAddress = wallet.address;\n    xmtp = await Client.create(wallet);\n    console.log(xmtp);\n    await getAllConversations();\n    //await sendMessage(\"0xf82e053D56Ce2feF2EA52d2f120b706A66963327\", \"Hi this is Person 1 speaking\", \"google.com\")\n  }\n\n  async function sendMessage(address, message, website=\"all\") {\n    try {\n      if (website === \"\") {\n        website = \"all\"\n      }\n      let conversation = await xmtp.conversations.newConversation(address);\n      await conversation.send(website + \"////\" + message);\n      console.log(\"Sent message \" + message + \" to \" + address);\n    } catch (e) {\n      alert(\"Address is not on the XMTP network yet\");\n    }\n  }\n\n  async function getAllMessages(address) {\n    let conversation = await xmtp.conversations.newConversation(address);\n    let messages = await conversation.messages();\n    return messages;\n  }\n\n  async function getAllConversations() {\n    let allConversations = await xmtp.conversations.list();\n    for (const conversation of allConversations) {\n      conversations.push(conversation);\n    }\n    setLoadedPeople(true);\n    console.log(conversations);\n  }\n\n  async function loadMessageByPerson(conversation) {\n    sites = {\"all\": []};\n    console.log(conversation);\n    let messages = await getAllMessages(conversation.peerAddress);\n    setCurrentAddress(conversation.peerAddress);\n    console.log(messages);\n    for (const message of messages) {\n      let contents = message.content.split(\"////\");\n      let site, content;\n      if (contents.length > 1) {\n        site = contents[0];\n        content = contents[1];\n      } else {\n        site = \"all\";\n        content = contents[0];\n      }\n\n      let sender;\n      if (message.senderAddress === myAddress) {\n        sender = \"Me - \"\n      } else {\n        sender = message.senderAddress.substring(0, 6) + \"...\" + message.senderAddress.slice(-4) + \" - \";\n      }\n\n      if (site in sites) {\n        sites[site].push(sender + content);\n      } else {\n        sites[site] = [sender + content];\n      }\n      \n      if (site !== \"all\") {\n        sites[\"all\"].push(sender + content);\n      }\n    }\n\n    console.log(sites);\n    setLoadedSites(false);\n    setLoadedSites(true);\n  }\n\n  async function displayMessages(site=\"all\") {\n    activeMessages = sites[site];\n    setCurrentWebsite(site);\n    setLoadedMessages(false);\n    setLoadedMessages(true);\n  }\n\n  function reset() {\n    setPasswordNeeded(false);\n    setSettings(false);\n    setActiveLeft(0);\n    setProgressWidth(0);\n    setNewConversationPopup(false);\n  }\n\n  function isolateWebsite(address) {\n    let url = new URL(address);\n    return url.host\n  }\n\n  window.onload = function() {\n    if (!passwordNeeded && localStorage.getItem(\"privateKey\") !== null) {\n      activateWallet(\"\");\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      {settings && <div className=\"Settings\">\n        {localStorage.getItem(\"privateKey\") && <IoMdClose className=\"ClosePrivateKey Icon\"\n          onClick={() => {\n            reset();\n          }}/>}\n        <div className=\"Progress\" id=\"PrivateKeyProgress\"\n          style={{\n            width: progressWidth * 500 + \"px\"\n          }}></div>\n        <input className=\"SettingsInput\" id=\"PrivateKey\" type=\"text\" autoComplete=\"off\" placeholder=\"Private Key\"></input>\n        <input className=\"SettingsInput\" id=\"Password\" type=\"text\" autoComplete=\"off\" placeholder=\"Password\"></input>\n        <button className=\"Save SaveSettings\"\n          onClick={() => {\n            handlePrivateKey(document.getElementById(\"PrivateKey\").value, document.getElementById(\"Password\").value);\n          }}>Save</button>\n      </div>}\n\n      {passwordNeeded && <div className=\"InitialPassword\">\n          <div className=\"Progress\" id=\"PasswordProgress\"\n            style={{\n              width: progressWidth * 500 + \"px\"\n            }}></div>\n          <input className=\"SettingsInput\" id=\"InitialPassword\" type=\"text\" autoComplete=\"off\" placeholder=\"Password\"></input>\n          <button className=\"Save SavePassword\"\n            onClick={() => {\n              activateWallet(document.getElementById(\"InitialPassword\").value);\n            }}>Enter</button>\n      </div>}\n\n      {newConversationPopup && <div className=\"NewConversationPopup\">\n        <IoMdClose className=\"ClosePrivateKey Icon\"\n          onClick={() => {\n            reset();\n          }}/>\n        <input className=\"SettingsInput\" id=\"ToAddress\" type=\"text\" autoComplete=\"off\" placeholder=\"Message Recipient\"></input>\n        <input className=\"SettingsInput\" id=\"ToWebsite\" type=\"text\" autoComplete=\"off\" placeholder=\"Website (Optional)\"></input>\n        <button className=\"CurrentWebsite\"\n          onClick={() => {\n            // eslint-disable-next-line\n            chrome.tabs && chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\n                document.getElementById(\"ToWebsite\").value = isolateWebsite(tabs[0].url);\n            });\n          }}>Current</button>\n        <input className=\"SettingsInput\" id=\"ToMessage\" type=\"text\" autoComplete=\"off\" placeholder=\"Message\"></input>\n        <button className=\"Save SendMessage\"\n            onClick={() => {\n              sendMessage(\n                document.getElementById(\"ToAddress\").value,\n                document.getElementById(\"ToMessage\").value,\n                document.getElementById(\"ToWebsite\").value\n              );\n              reset();\n            }}>Send</button>\n      </div>}\n\n      <div className=\"GlobalHeader\">\n        <span className=\"MyAddress\" title={myAddress}>{(myAddress && \"Logged in as \" + myAddress.substring(0,6) + \"...\" + myAddress.slice(-4)) || \"Loading...\"}</span>\n        <div className=\"NewConversation HeaderButton\" onClick={() => {\n          setNewConversationPopup(true);\n        }}>New Conversation</div>\n        <FiSettings className=\"OpenSettings Icon\"\n            onClick={() => {\n              setActiveLeft(2);\n              setSettings(true);\n            }}\n            style={{\n              color: activeLeft === 2 ? \"white\" : \"rgba(255,255,255,0.5)\"\n            }}/>\n      </div>\n\n      <div className=\"LeftNav\">\n        <div className=\"LeftNavHeader\">\n          <span className=\"LeftNavHeaderOption\">People</span>\n        </div>\n        {loadedPeople ? (<div>\n          {conversations.map((conversation, index) => \n            <div className=\"Option Person\" key={index}\n              onClick={() => {\n                loadMessageByPerson(conversation);\n              }}\n            >{conversation.peerAddress.substring(0,6) + \"...\" + conversation.peerAddress.slice(-4)}</div>\n          )}\n        </div>) : <div className=\"Option Person\">Loading...</div>}\n      </div>\n      <div className=\"MiddleNav\">\n        <span className=\"MiddleNavHeaderOption\">Sites</span>\n        {loadedSites && <div>\n          {Object.keys(sites).map((site, index) => \n            <div className=\"Option Site\" key={index}\n              onClick={() => {\n                displayMessages(site);\n              }}\n            >{site}</div>\n          )}\n        </div>}\n      </div>\n\n      <div className=\"RightNav\">\n        <div className=\"RightNavHeader\"></div>\n        <div className=\"Messages\">\n          {loadedMessages && <div>\n            {activeMessages.map((message, index) => \n              <div className={message.includes(\"Me\") ? \"Message Right\" : \"Message Left\"} key={index} title={currentWebsite}>{message}</div>\n            )}  \n          </div>}\n        </div>\n\n        {loadedMessages && <input className=\"TextMessage\" type=\"text\" placeholder=\"Type your message\" autoComplete=\"off\"\n          onKeyPress={event => {\n            if (event.key === \"Enter\") {\n              console.log(event.target.value);\n              sendMessage(currentAddress, event.target.value, currentWebsite);\n              let newMessage = document.createElement(\"div\");\n              newMessage.classList.add(\"Message\");\n              newMessage.classList.add(\"Right\");\n              newMessage.innerHTML = \"Me - \" + event.target.value;\n              document.getElementsByClassName(\"Messages\")[0].appendChild(newMessage)\n              document.getElementsByClassName(\"TextMessage\")[0].value = \"\";\n            }\n          }}\n        ></input>}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  //React.StrictMode causes useEffect to be called twice\n  <App />\n);\n"],"sourceRoot":""}