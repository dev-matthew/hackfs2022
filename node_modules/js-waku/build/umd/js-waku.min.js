!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jswaku=t():e.jswaku=t()}(this,(function(){return(()=>{var e,t={3607:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StoreCodecs=t.WakuStore=t.PageDirection=t.waku_store=t.RelayCodecs=t.WakuRelay=t.waku_relay=t.PushResponse=t.LightPushCodec=t.WakuLightPush=t.waku_light_push=t.WakuMessage=t.waku_message=t.Protocols=t.DefaultPubSubTopic=t.Waku=t.waku=t.utils=t.enr=t.discovery=t.getPredefinedBootstrapNodes=t.getPublicKey=t.generateSymmetricKey=t.generatePrivateKey=void 0;var n=r(5474);Object.defineProperty(t,"generatePrivateKey",{enumerable:!0,get:function(){return n.generatePrivateKey}}),Object.defineProperty(t,"generateSymmetricKey",{enumerable:!0,get:function(){return n.generateSymmetricKey}}),Object.defineProperty(t,"getPublicKey",{enumerable:!0,get:function(){return n.getPublicKey}});var a=r(8994);Object.defineProperty(t,"getPredefinedBootstrapNodes",{enumerable:!0,get:function(){return a.getPredefinedBootstrapNodes}}),t.discovery=s(r(8994)),t.enr=s(r(9460)),t.utils=s(r(1721)),t.waku=s(r(607));var u=r(607);Object.defineProperty(t,"Waku",{enumerable:!0,get:function(){return u.Waku}}),Object.defineProperty(t,"DefaultPubSubTopic",{enumerable:!0,get:function(){return u.DefaultPubSubTopic}}),Object.defineProperty(t,"Protocols",{enumerable:!0,get:function(){return u.Protocols}}),t.waku_message=s(r(2560));var c=r(2560);Object.defineProperty(t,"WakuMessage",{enumerable:!0,get:function(){return c.WakuMessage}}),t.waku_light_push=s(r(7087));var d=r(7087);Object.defineProperty(t,"WakuLightPush",{enumerable:!0,get:function(){return d.WakuLightPush}}),Object.defineProperty(t,"LightPushCodec",{enumerable:!0,get:function(){return d.LightPushCodec}}),Object.defineProperty(t,"PushResponse",{enumerable:!0,get:function(){return d.PushResponse}}),t.waku_relay=s(r(2979));var l=r(2979);Object.defineProperty(t,"WakuRelay",{enumerable:!0,get:function(){return l.WakuRelay}}),Object.defineProperty(t,"RelayCodecs",{enumerable:!0,get:function(){return l.RelayCodecs}}),t.waku_store=s(r(5960));var p=r(5960);Object.defineProperty(t,"PageDirection",{enumerable:!0,get:function(){return p.PageDirection}}),Object.defineProperty(t,"WakuStore",{enumerable:!0,get:function(){return p.WakuStore}}),Object.defineProperty(t,"StoreCodecs",{enumerable:!0,get:function(){return p.StoreCodecs}})},5474:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verifySignature=t.compressPublicKey=t.keccak256=t.sign=t.getPublicKey=t.generateSymmetricKey=t.generatePrivateKey=t.sha256=t.randomBytes=t.getSubtle=void 0;const a=n(r(4031)),u=s(r(9656)),c=s(r(1094)),d=r(605),l=s(r(4231)),p=r(8340),f={node:a.default,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0};t.getSubtle=function(){if(f.web)return f.web.subtle;if(f.node)return f.node.webcrypto.subtle;throw new Error("The environment doesn't have Crypto Subtle API (if in the browser, be sure to use to be in a secure context, ie, https)")},t.randomBytes=u.utils.randomBytes,t.sha256=u.utils.sha256,t.generatePrivateKey=function(){return(0,t.randomBytes)(p.PrivateKeySize)},t.generateSymmetricKey=function(){return(0,t.randomBytes)(l.KeySize)},t.getPublicKey=u.getPublicKey,t.sign=async function(e,t){const[r,o]=await u.sign(e,t,{recovered:!0,der:!1});return(0,d.concat)([r,[o]],r.length+1)},t.keccak256=function(e){return new Uint8Array(c.keccak256.arrayBuffer(e))},t.compressPublicKey=function(e){return 64===e.length&&(e=(0,d.concat)([[4],e],65)),u.Point.fromHex(e).toRawBytes(!0)},t.verifySignature=function(e,t,r){try{const o=u.Signature.fromCompact(e.slice(0,64));return u.verify(o,t,r)}catch{return!1}}},4134:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Bootstrap=void 0;const i=o(r(1227)),s=r(6584),n=r(6216),a=r(8994),u=(0,i.default)("waku:discovery:bootstrap");class c{constructor(e){const t=e.maxPeers??c.DefaultMaxPeers;if(e.default)u("Use hosted list of peers."),this.getBootstrapPeers=()=>Promise.resolve((0,a.getPredefinedBootstrapNodes)(void 0,t));else if(void 0!==e.peers&&e.peers.length>0){const r=e.peers.map((e=>"string"==typeof e?new s.Multiaddr(e):e)),o=(0,a.getPseudoRandomSubset)(r,t);u("Use provided list of peers (reduced to maxPeers)",r.map((e=>e.toString()))),this.getBootstrapPeers=()=>Promise.resolve(o)}else if("function"==typeof e.getPeers){u("Bootstrap: Use provided getPeers function.");const r=e.getPeers;this.getBootstrapPeers=async()=>{const e=await r();return(0,a.getPseudoRandomSubset)(e,t).map((e=>new s.Multiaddr(e)))}}else if(e.enrUrl){const t=e.wantedNodeCapabilityCount;if(!t)throw"`wantedNodeCapabilityCount` must be defined when using `enrUrl`";const r=e.enrUrl;u("Use provided EIP-1459 ENR Tree URL.");const o=n.DnsNodeDiscovery.dnsOverHttp();this.getBootstrapPeers=async()=>{const e=await o.getPeers([r],t);return u(`Found ${e.length} peers`),e.map((e=>e.getFullMultiaddrs())).flat()}}else u("No bootstrap method specified, no peer will be returned"),this.getBootstrapPeers=void 0}}t.Bootstrap=c,c.DefaultMaxPeers=1},6216:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DnsNodeDiscovery=void 0;const i=r(1227),s=r(9460),n=r(1613),a=r(8395),u=o(r(8407)),c=(0,i.debug)("waku:discovery:dns");class d{constructor(e){this._errorTolerance=10,this._DNSTreeCache={},this.dns=e}static dnsOverHttp(e){const t=new n.DnsOverHttps(e);return new d(t)}async getPeers(e,t){const r=Math.floor(Math.random()*e.length),{publicKey:o,domain:i}=a.ENRTree.parseTree(e[r]),s={domain:i,publicKey:o,visits:{}},n=await(0,u.default)(t,this._errorTolerance,(()=>this._search(i,s)));return c("retrieved peers: ",n),n}async _search(e,t){try{const r=await this._getTXTRecord(e,t);let o,i;t.visits[e]=!0;const n=function(e){return e.startsWith(a.ENRTree.ROOT_PREFIX)?a.ENRTree.ROOT_PREFIX:e.startsWith(a.ENRTree.BRANCH_PREFIX)?a.ENRTree.BRANCH_PREFIX:e.startsWith(a.ENRTree.RECORD_PREFIX)?a.ENRTree.RECORD_PREFIX:""}(r);try{switch(n){case a.ENRTree.ROOT_PREFIX:return o=a.ENRTree.parseAndVerifyRoot(r,t.publicKey),await this._search(o,t);case a.ENRTree.BRANCH_PREFIX:return i=a.ENRTree.parseBranch(r),o=function(e,t){const r={};for(const[o,i]of e.entries())t.visits[i]&&(r[o]=!0);if(Object.keys(r).length===e.length)throw new Error("Unresolvable circular path detected");let o;do{o=Math.floor(Math.random()*e.length)}while(r[o]);return e[o]}(i,t),await this._search(o,t);case a.ENRTree.RECORD_PREFIX:return s.ENR.decodeTxt(r);default:return null}}catch(t){return c(`Failed to search DNS tree ${n} at subdomain ${e}: ${t}`),null}}catch(t){return c(`Failed to retrieve TXT record at subdomain ${e}: ${t}`),null}}async _getTXTRecord(e,t){if(this._DNSTreeCache[e])return this._DNSTreeCache[e];const r=e!==t.domain?`${e}.${t.domain}`:t.domain,o=await this.dns.resolveTXT(r);if(!o.length)throw new Error("Received empty result array while fetching TXT record");if(!o[0].length)throw new Error("Received empty TXT record");const i=o.join("");return this._DNSTreeCache[e]=i,i}}t.DnsNodeDiscovery=d},1613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DnsOverHttps=void 0;const o=r(6176),i=r(1721),{cloudflare:s,google:n,opendns:a}=o.endpoints;t.DnsOverHttps=class{constructor(e=[s,n,a]){this.endpoints=e}async resolveTXT(e){const t=(await(0,o.query)({questions:[{type:"TXT",name:e}]})).answers.map((e=>e.data)),r=[];return t.forEach((e=>{"string"==typeof e?r.push(e):Array.isArray(e)?e.forEach((e=>{"string"==typeof e?r.push(e):r.push((0,i.bytesToUtf8)(e))})):r.push((0,i.bytesToUtf8)(e))})),r}}},8395:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ENRTree=void 0;const n=s(r(9090)),a=r(2217),u=r(5474),c=r(9460),d=r(1721);class l{static parseAndVerifyRoot(e,t){if(!e.startsWith(this.ROOT_PREFIX))throw new Error(`ENRTree root entry must start with '${this.ROOT_PREFIX}'`);const r=l.parseRootValues(e),o=n.decode.asBytes(t),i=e.split(" sig")[0],s=(0,d.utf8ToBytes)(i),c=(0,a.fromString)(r.signature,"base64url").slice(0,64);if(!(0,u.verifySignature)(c,(0,u.keccak256)(s),new Uint8Array(o)))throw new Error("Unable to verify ENRTree root signature");return r.eRoot}static parseRootValues(e){const t=e.match(/^enrtree-root:v1 e=([^ ]+) l=([^ ]+) seq=(\d+) sig=([^ ]+)$/);if(!Array.isArray(t))throw new Error("Could not parse ENRTree root entry");t.shift();const[r,o,i,s]=t;if(!r)throw new Error("Could not parse 'e' value from ENRTree root entry");if(!o)throw new Error("Could not parse 'l' value from ENRTree root entry");if(!i)throw new Error("Could not parse 'seq' value from ENRTree root entry");if(!s)throw new Error("Could not parse 'sig' value from ENRTree root entry");return{eRoot:r,lRoot:o,seq:Number(i),signature:s}}static parseTree(e){if(!e.startsWith(this.TREE_PREFIX))throw new Error(`ENRTree tree entry must start with '${this.TREE_PREFIX}'`);const t=e.match(/^enrtree:\/\/([^@]+)@(.+)$/);if(!Array.isArray(t))throw new Error("Could not parse ENRTree tree entry");t.shift();const[r,o]=t;if(!r)throw new Error("Could not parse public key from ENRTree tree entry");if(!o)throw new Error("Could not parse domain from ENRTree tree entry");return{publicKey:r,domain:o}}static parseBranch(e){if(!e.startsWith(this.BRANCH_PREFIX))throw new Error(`ENRTree branch entry must start with '${this.BRANCH_PREFIX}'`);return e.split(this.BRANCH_PREFIX)[1].split(",")}}t.ENRTree=l,l.RECORD_PREFIX=c.ENR.RECORD_PREFIX,l.TREE_PREFIX="enrtree:",l.BRANCH_PREFIX="enrtree-branch:",l.ROOT_PREFIX="enrtree-root:"},8407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=(0,r(1227).debug)("waku:discovery:fetch_nodes");function i(e,t){return t.relay>=e.relay&&t.store>=e.store&&t.filter>=e.filter&&t.lightPush>=e.lightPush}function s(e,t){if(!e.nodeId)return!1;for(const r of t)if(e.nodeId===r.nodeId)return!1;return!0}function n(e,t,r){if(i(t,r))throw"Internal Error: Waku2 wanted capabilities are already fulfilled";const o=function(e,t){return{relay:t.relay<e.relay,store:t.store<e.store,filter:t.filter<e.filter,lightPush:t.lightPush<e.lightPush}}(t,r);return o.relay&&e.relay||o.store&&e.store||o.filter&&e.filter||o.lightPush&&e.lightPush}t.default=async function(e,t,r){const a={relay:e.relay??0,store:e.store??0,filter:e.filter??0,lightPush:e.lightPush??0},u=a.relay+a.store+a.filter+a.lightPush,c={relay:0,store:0,filter:0,lightPush:0};let d=0;const l=[];for(;!i(a,c)&&d<u+t;){const e=await r();e&&s(e,l)&&(e.waku2&&n(e.waku2,a,c)&&(p=e.waku2,f=c,p.relay&&(f.relay+=1),p.store&&(f.store+=1),p.filter&&(f.filter+=1),p.lightPush&&(f.lightPush+=1),l.push(e)),o(`got new peer candidate from DNS address=${e.nodeId}@${e.ip}`)),d++}var p,f;return l}},8994:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getPseudoRandomSubset=t.ENRTree=t.DnsOverHttps=t.dns=t.Bootstrap=t.predefined=t.getPredefinedBootstrapNodes=void 0;const n=r(663);var a=r(5417);Object.defineProperty(t,"getPredefinedBootstrapNodes",{enumerable:!0,get:function(){return a.getPredefinedBootstrapNodes}}),t.predefined=s(r(5417));var u=r(4134);Object.defineProperty(t,"Bootstrap",{enumerable:!0,get:function(){return u.Bootstrap}}),t.dns=s(r(6216));var c=r(1613);Object.defineProperty(t,"DnsOverHttps",{enumerable:!0,get:function(){return c.DnsOverHttps}});var d=r(8395);Object.defineProperty(t,"ENRTree",{enumerable:!0,get:function(){return d.ENRTree}}),t.getPseudoRandomSubset=function(e,t){return e.length<=t?e:(0,n.shuffle)(e).slice(0,t)}},5417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fleets=t.getPredefinedBootstrapNodes=t.Fleet=t.DefaultWantedNumber=void 0;const o=r(6584),i=r(8994);var s;t.DefaultWantedNumber=1,function(e){e.Prod="prod",e.Test="test"}(s=t.Fleet||(t.Fleet={})),t.getPredefinedBootstrapNodes=function(e=s.Prod,r=t.DefaultWantedNumber){if(r<=0)return[];let n;switch(e){case s.Prod:n=t.fleets.fleets["wakuv2.prod"]["waku-websocket"];break;case s.Test:n=t.fleets.fleets["wakuv2.test"]["waku-websocket"];break;default:n=t.fleets.fleets["wakuv2.prod"]["waku-websocket"]}return n=Object.values(n),n=n.map((e=>new o.Multiaddr(e))),(0,i.getPseudoRandomSubset)(n,r)},t.fleets={fleets:{"wakuv2.prod":{"waku-websocket":{"node-01.ac-cn-hongkong-c.wakuv2.prod":"/dns4/node-01.ac-cn-hongkong-c.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAm4v86W3bmT1BiH6oSPzcsSr24iDQpSN5Qa992BCjjwgrD","node-01.do-ams3.wakuv2.prod":"/dns4/node-01.do-ams3.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAmL5okWopX7NqZWBUKVqW8iUxCEmd5GMHLVPwCgzYzQv3e","node-01.gc-us-central1-a.wakuv2.prod":"/dns4/node-01.gc-us-central1-a.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAmVkKntsECaYfefR1V2yCR79CegLATuTPE6B9TxgxBiiiA"}},"wakuv2.test":{"waku-websocket":{"node-01.ac-cn-hongkong-c.wakuv2.test":"/dns4/node-01.ac-cn-hongkong-c.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAkvWiyFsgRhuJEb9JfjYxEkoHLgnUQmr1N5mKWnYjxYRVm","node-01.do-ams3.wakuv2.test":"/dns4/node-01.do-ams3.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAmPLe7Mzm8TsYUubgCAW1aJoeFScxrLj8ppHFivPo97bUZ","node-01.gc-us-central1-a.wakuv2.test":"/dns4/node-01.gc-us-central1-a.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAmJb2e28qLXxT5kZxVUUoJt72EMzNGXB47Rxx5hw3q4YjS"}}}}},2611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MULTIADDR_LENGTH_SIZE=t.ERR_NO_SIGNATURE=t.ERR_INVALID_ID=t.MAX_RECORD_SIZE=void 0,t.MAX_RECORD_SIZE=300,t.ERR_INVALID_ID="Invalid record id",t.ERR_NO_SIGNATURE="No valid signature found",t.MULTIADDR_LENGTH_SIZE=2},6995:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ENR=void 0;const a=s(r(1719)),u=n(r(1227)),c=r(6584),d=n(r(9918)),l=r(2217),p=r(2263),f=r(4676),h=r(5474),g=r(1721),y=r(2611),b=r(2569),m=r(4751),v=s(r(4670)),R=r(7024),P=(0,u.default)("waku:enr");class _ extends Map{constructor(e={},t=BigInt(1),r=null){super(Object.entries(e)),this.seq=t,this.signature=r}static async create(e={},t=BigInt(1),r=null){const o=new _(e,t,r);try{const e=o.publicKey;if(e){const t=(0,b.createKeypair)(o.keypairType,void 0,e);o.peerId=await(0,b.createPeerIdFromKeypair)(t)}}catch(e){P("Could not calculate peer id for ENR",e)}return o}static createV4(e,t={}){return 33!==e.length&&(e=(0,h.compressPublicKey)(e)),_.create({...t,id:(0,g.utf8ToBytes)("v4"),secp256k1:e})}static createFromPeerId(e,t={}){const r=(0,b.createKeypairFromPeerId)(e);if(r.type===b.KeypairType.secp256k1)return _.createV4(r.publicKey,t);throw new Error}static async decodeFromValues(e){if(!Array.isArray(e))throw new Error("Decoded ENR must be an array");if(e.length%2!=0)throw new Error("Decoded ENR must have an even number of elements");const[t,r,...o]=e;if(!t||Array.isArray(t))throw new Error("Decoded ENR invalid signature: must be a byte array");if(!r||Array.isArray(r))throw new Error("Decoded ENR invalid sequence number: must be a byte array");const i={};for(let e=0;e<o.length;e+=2)try{i[(0,g.bytesToUtf8)(o[e])]=o[e+1]}catch(t){P("Failed to decode ENR key to UTF-8, skipping it",o[e],t)}const s="0x"+(r.length?(0,g.bytesToHex)(r):"00"),n=await _.create(i,BigInt(s),t),u=(0,g.hexToBytes)(a.encode([r,...o]));if(!n.verify(u,t))throw new Error("Unable to verify ENR signature");return n}static decode(e){const t=a.decode(e).map(g.hexToBytes);return _.decodeFromValues(t)}static decodeTxt(e){if(!e.startsWith(this.RECORD_PREFIX))throw new Error(`"string encoded ENR must start with '${this.RECORD_PREFIX}'`);return _.decode((0,l.fromString)(e.slice(4),"base64url"))}set(e,t){return this.signature=null,this.seq++,super.set(e,t)}get id(){const e=this.get("id");if(!e)throw new Error("id not found.");return(0,g.bytesToUtf8)(e)}get keypairType(){if("v4"===this.id)return b.KeypairType.secp256k1;throw new Error(y.ERR_INVALID_ID)}get publicKey(){if("v4"===this.id)return this.get("secp256k1");throw new Error(y.ERR_INVALID_ID)}get keypair(){if(this.publicKey){const e=this.publicKey;return(0,b.createKeypair)(this.keypairType,void 0,e)}}get nodeId(){if("v4"===this.id)return this.publicKey?v.nodeId(this.publicKey):void 0;throw new Error(y.ERR_INVALID_ID)}get ip(){const e=this.get("ip");return e?d.default.toString(c.protocols.names.ip4.code,e):void 0}set ip(e){e?this.set("ip",d.default.toBytes(c.protocols.names.ip4.code,e)):this.delete("ip")}get tcp(){const e=this.get("tcp");return e?Number(d.default.toString(c.protocols.names.tcp.code,e)):void 0}set tcp(e){void 0===e?this.delete("tcp"):this.set("tcp",d.default.toBytes(c.protocols.names.tcp.code,e))}get udp(){const e=this.get("udp");return e?Number(d.default.toString(c.protocols.names.udp.code,e)):void 0}set udp(e){void 0===e?this.delete("udp"):this.set("udp",d.default.toBytes(c.protocols.names.udp.code,e))}get ip6(){const e=this.get("ip6");return e?d.default.toString(c.protocols.names.ip6.code,e):void 0}set ip6(e){e?this.set("ip6",d.default.toBytes(c.protocols.names.ip6.code,e)):this.delete("ip6")}get tcp6(){const e=this.get("tcp6");return e?Number(d.default.toString(c.protocols.names.tcp.code,e)):void 0}set tcp6(e){void 0===e?this.delete("tcp6"):this.set("tcp6",d.default.toBytes(c.protocols.names.tcp.code,e))}get udp6(){const e=this.get("udp6");return e?Number(d.default.toString(c.protocols.names.udp.code,e)):void 0}set udp6(e){void 0===e?this.delete("udp6"):this.set("udp6",d.default.toBytes(c.protocols.names.udp.code,e))}get multiaddrs(){const e=this.get("multiaddrs");if(e)return(0,m.decodeMultiaddrs)(e)}set multiaddrs(e){if(void 0===e)this.delete("multiaddrs");else{const t=(0,m.encodeMultiaddrs)(e);this.set("multiaddrs",t)}}getLocationMultiaddr(e){if("udp"===e)return this.getLocationMultiaddr("udp4")||this.getLocationMultiaddr("udp6");if("tcp"===e)return this.getLocationMultiaddr("tcp4")||this.getLocationMultiaddr("tcp6");const t=e.endsWith("6"),r=this.get(t?"ip6":"ip");if(!r)return;const o=e.startsWith("udp"),i=e.startsWith("tcp");let s,n;if(o)s="udp",n=t?this.get("udp6"):this.get("udp");else{if(!i)return;s="tcp",n=t?this.get("tcp6"):this.get("tcp")}if(!n)return;const a=c.protocols.names[t?"ip6":"ip4"],u=a.size/8,d=c.protocols.names[s],l=(0,f.encode)(d.code),p=new Uint8Array(3+u+l.length);return p[0]=a.code,p.set(r,1),p.set(l,1+u),p.set(n,1+u+l.length),new c.Multiaddr(p)}setLocationMultiaddr(e){const t=e.protoNames();if(2!==t.length&&"udp"!==t[1]&&"tcp"!==t[1])throw new Error("Invalid multiaddr");const r=e.tuples();if(!r[0][1]||!r[1][1])throw new Error("Invalid multiaddr");4===r[0][0]?(this.set("ip",r[0][1]),this.set(t[1],r[1][1])):(this.set("ip6",r[0][1]),this.set(t[1]+"6",r[1][1]))}getFullMultiaddr(e){if(this.peerId){const t=this.getLocationMultiaddr(e);if(t)return t.encapsulate(`/p2p/${this.peerId.toB58String()}`)}}getFullMultiaddrs(){if(this.peerId&&this.multiaddrs){const e=this.peerId;return this.multiaddrs.map((t=>t.encapsulate(`/p2p/${e.toB58String()}`)))}return[]}get waku2(){const e=this.get("waku2");if(e)return(0,R.decodeWaku2)(e[0])}set waku2(e){if(void 0===e)this.delete("waku2");else{const t=(0,R.encodeWaku2)(e);this.set("waku2",new Uint8Array([t]))}}verify(e,t){if(!this.get("id")||"v4"!==this.id)throw new Error(y.ERR_INVALID_ID);if(!this.publicKey)throw new Error("Failed to verify ENR: No public key");return(0,h.verifySignature)(t,(0,h.keccak256)(e),this.publicKey)}async sign(e,t){if("v4"!==this.id)throw new Error(y.ERR_INVALID_ID);return this.signature=await v.sign(t,e),this.signature}async encodeToValues(e){const t=Array.from(this.keys()).sort(((e,t)=>e.localeCompare(t))).map((e=>[e,this.get(e)])).map((([e,t])=>[(0,g.utf8ToBytes)(e),t])).flat();if(t.unshift(new Uint8Array([Number(this.seq)])),e)t.unshift(await this.sign((0,g.hexToBytes)(a.encode(t)),e));else{if(!this.signature)throw new Error(y.ERR_NO_SIGNATURE);t.unshift(this.signature)}return t}async encode(e){const t=(0,g.hexToBytes)(a.encode(await this.encodeToValues(e)));if(t.length>=y.MAX_RECORD_SIZE)throw new Error("ENR must be less than 300 bytes");return t}async encodeTxt(e){return _.RECORD_PREFIX+(0,p.toString)(await this.encode(e),"base64url")}}t.ENR=_,_.RECORD_PREFIX="enr:"},9460:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.v4=void 0;const a=s(r(4670));t.v4=a,n(r(2611),t),n(r(6995),t),n(r(6734),t),n(r(2569),t),n(r(7024),t)},2569:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createKeypairFromPeerId=t.createPeerIdFromKeypair=t.createKeypair=t.generateKeypair=t.ERR_TYPE_NOT_IMPLEMENTED=void 0;const n=r(2204),a=r(8103),u=s(r(8785)),c=r(1175),d=r(7922),{keysPBM:l,supportedKeys:p}=n.keys;function f(e,r,o){if(e===d.KeypairType.secp256k1)return new c.Secp256k1Keypair(r,o);throw new Error(t.ERR_TYPE_NOT_IMPLEMENTED)}t.ERR_TYPE_NOT_IMPLEMENTED="Keypair type not implemented",i(r(7922),t),i(r(1175),t),t.generateKeypair=async function(e){if(e===d.KeypairType.secp256k1)return await c.Secp256k1Keypair.generate();throw new Error(t.ERR_TYPE_NOT_IMPLEMENTED)},t.createKeypair=f,t.createPeerIdFromKeypair=async function(e){if(e.type===d.KeypairType.secp256k1){const t=e.hasPrivateKey()?new p.secp256k1.Secp256k1PrivateKey(e.privateKey,e.publicKey):void 0,r=new p.secp256k1.Secp256k1PublicKey(e.publicKey),o=await a.identity.digest(r.bytes);return new u.default(o.bytes,t,r)}throw new Error(t.ERR_TYPE_NOT_IMPLEMENTED)},t.createKeypairFromPeerId=function(e){const t=l.PublicKey.decode(e.pubKey.bytes);return f(t.Type,e.privKey?e.privKey.marshal():void 0,t.Data)}},1175:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Secp256k1Keypair=void 0;const n=s(r(9656)),a=r(5474),u=r(7922);class c{constructor(e,t){let r=t;if(r&&(r=(0,a.compressPublicKey)(r)),(this._privateKey=e)&&!this.privateKeyVerify())throw new Error("Invalid private key");if((this._publicKey=r)&&!this.publicKeyVerify())throw new Error("Invalid public key");this.type=u.KeypairType.secp256k1}static async generate(){const e=(0,a.randomBytes)(32),t=n.getPublicKey(e);return new c(e,t)}privateKeyVerify(e=this._privateKey){return!e||n.utils.isValidPrivateKey(e)}publicKeyVerify(e=this._publicKey){if(e)try{return n.Point.fromHex(e),!0}catch{return!1}return!0}get privateKey(){if(!this._privateKey)throw new Error;return this._privateKey}get publicKey(){if(!this._publicKey)throw new Error;return this._publicKey}hasPrivateKey(){return!!this._privateKey}}t.Secp256k1Keypair=c},7922:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeypairType=void 0,(r=t.KeypairType||(t.KeypairType={}))[r.rsa=0]="rsa",r[r.ed25519=1]="ed25519",r[r.secp256k1=2]="secp256k1"},4751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeMultiaddrs=t.decodeMultiaddrs=void 0;const o=r(6584),i=r(2611);t.decodeMultiaddrs=function(e){const t=[];let r=0;for(;r<e.length;){const s=new DataView(e.buffer,r,i.MULTIADDR_LENGTH_SIZE).getUint16(0);r+=i.MULTIADDR_LENGTH_SIZE;const n=e.slice(r,r+s);r+=s;const a=new o.Multiaddr(n);t.push(a)}return t},t.encodeMultiaddrs=function(e){const t=e.reduce(((e,t)=>e+i.MULTIADDR_LENGTH_SIZE+t.bytes.length),0),r=new Uint8Array(t),o=new DataView(r.buffer);let s=0;return e.forEach((e=>{if(e.getPeerId())throw new Error("`multiaddr` field MUST not contain peer id");o.setUint16(s,e.bytes.length),s+=i.MULTIADDR_LENGTH_SIZE,r.set(e.bytes,s),s+=e.bytes.length})),r}},6734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4670:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.nodeId=t.sign=void 0;const n=s(r(9656)),a=r(5474),u=r(1721);t.sign=async function(e,t){return n.sign((0,a.keccak256)(t),e,{der:!1})},t.nodeId=function(e){const t=n.Point.fromHex(e).toRawBytes(!1);return(0,u.bytesToHex)((0,a.keccak256)(t.slice(1)))}},7024:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeWaku2=t.encodeWaku2=void 0,t.encodeWaku2=function(e){let t=0;return e.lightPush&&(t+=1),t<<=1,e.filter&&(t+=1),t<<=1,e.store&&(t+=1),t<<=1,e.relay&&(t+=1),t},t.decodeWaku2=function(e){const t={relay:!1,store:!1,filter:!1,lightPush:!1};return e%2&&(t.relay=!0),(e>>=1)%2&&(t.store=!0),(e>>=1)%2&&(t.filter=!0),(e>>=1)%2&&(t.lightPush=!0),t}},5187:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPeersForProtocol=t.selectRandomPeer=void 0,t.selectRandomPeer=async function(e){const t=[];for await(const r of e)t.push(r);if(0!==t.length)return t[Math.round(Math.random()*(t.length-1))]},t.getPeersForProtocol=async function*(e,t){for await(const r of e.peerStore.getPeers()){let e=!1;for(let o=0;o<t.length;o++)if(r.protocols.includes(t[o])){e=!0;break}e&&(yield r)}}},1721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utf8ToBytes=t.bytesToUtf8=t.bytesToHex=t.hexToBytes=void 0;const o=r(2217),i=r(2263);t.hexToBytes=function(e){if("string"==typeof e){const t=e.replace(/^0x/i,"");return(0,o.fromString)(t,"base16")}return e},t.bytesToHex=e=>(0,i.toString)(e,"base16"),t.bytesToUtf8=e=>(0,i.toString)(e,"utf8"),t.utf8ToBytes=e=>(0,o.fromString)(e,"utf8")},607:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Waku=t.Protocols=t.DefaultPubSubTopic=t.DefaultRelayKeepAliveValueSecs=t.DefaultPingKeepAliveValueSecs=void 0;const i=r(2641),s=o(r(1227)),n=o(r(6384)),a=o(r(3100)),u=o(r(1267)),c=o(r(9846)),d=o(r(40)),l=o(r(5466)),p=r(6584),f=o(r(8785)),h=r(8994),g=r(9243),y=r(7087),b=r(2560),m=r(2979),v=r(6559),R=r(5960),P=c.default.prototype[Symbol.toStringTag];t.DefaultPingKeepAliveValueSecs=0,t.DefaultRelayKeepAliveValueSecs=300,t.DefaultPubSubTopic="/waku/2/default-waku/proto";const _=(0,s.default)("waku:waku");var T;!function(e){e.Relay="relay",e.Store="store",e.LightPush="lightpush",e.Filter="filter"}(T=t.Protocols||(t.Protocols={}));class w{constructor(e,r,o,i,s){this.libp2p=r,this.relay=r.pubsub,this.store=o,this.filter=s,this.lightPush=i,this.pingKeepAliveTimers={},this.relayKeepAliveTimers={};const n=e.pingKeepAlive||t.DefaultPingKeepAliveValueSecs,a=e.relayKeepAlive||t.DefaultRelayKeepAliveValueSecs;r.connectionManager.on("peer:connect",(e=>{this.startKeepAlive(e.remotePeer,n,a)})),r.connectionManager.on("peer:disconnect",(e=>{this.stopKeepAlive(e.remotePeer)})),e?.decryptionKeys?.forEach((e=>{this.addDecryptionKey(e)}))}static async create(e){const t=Object.assign({},e?.libp2p);if(t.config=Object.assign({transport:{[P]:{filter:d.default.all}}},e?.libp2p?.config),e?.pubSubTopic&&(t.config.pubsub=Object.assign({pubSubTopic:e.pubSubTopic},t.config.pubsub)),t.modules=Object.assign({},e?.libp2p?.modules),t.modules=Object.assign({transport:[c.default]},e?.libp2p?.modules),t.modules=Object.assign(t.modules,{streamMuxer:[u.default],connEncryption:[new i.Noise(e?.staticNoiseKey)],pubsub:m.WakuRelay}),e?.bootstrap){const r=new h.Bootstrap(e?.bootstrap);if(void 0!==r.getBootstrapPeers)try{const e=await r.getBootstrapPeers();t.modules=Object.assign(t.modules,{peerDiscovery:[a.default]}),t.config.peerDiscovery={[a.default.tag]:{list:e,enabled:!0}}}catch(e){_("Failed to retrieve bootstrap nodes",e)}}const r=await n.default.create(t),o=new R.WakuStore(r,{pubSubTopic:e?.pubSubTopic}),s=new y.WakuLightPush(r),l=new g.WakuFilter(r);return await r.start(),new w(e||{},r,o,s,l)}async dial(e,t){const r=t??[T.Relay],o=[];if(r.includes(T.Relay)&&m.RelayCodecs.forEach((e=>o.push(e))),r.includes(T.Store))for(const e of Object.values(R.StoreCodecs))o.push(e);return r.includes(T.LightPush)&&o.push(y.LightPushCodec),r.includes(T.Filter)&&o.push(g.FilterCodec),this.libp2p.dialProtocol(e,o)}addPeerToAddressBook(e,t){let r;r="string"==typeof e?f.default.createFromB58String(e):e;const o=t.map((e=>"string"==typeof e?(0,p.multiaddr)(e):e));this.libp2p.peerStore.addressBook.set(r,o)}async stop(){return this.libp2p.stop()}addDecryptionKey(e,t){this.relay.addDecryptionKey(e,t),this.store.addDecryptionKey(e,t),this.filter.addDecryptionKey(e,t)}deleteDecryptionKey(e){this.relay.deleteDecryptionKey(e),this.store.deleteDecryptionKey(e),this.filter.deleteDecryptionKey(e)}getLocalMultiaddrWithID(){const e=this.libp2p.multiaddrs.find((e=>e.toString().match(/127\.0\.0\.1/)));if(!e||""===e.toString())throw"Not listening on localhost";return e+"/p2p/"+this.libp2p.peerId.toB58String()}async waitForRemotePeer(e,t){const r=[];if((e=e??[T.Relay]).includes(T.Relay)&&0==this.relay.getPeers().size){const e=new Promise((e=>{this.libp2p.pubsub.once("pubsub:subscription-change",(()=>{this.libp2p.pubsub.once("gossipsub:heartbeat",e)}))}));r.push(e)}if(e.includes(T.Store)){const e=(async()=>{for await(const e of this.store.peers){_("Store peer found",e.id.toB58String());break}})();r.push(e)}if(e.includes(T.LightPush)){const e=(async()=>{for await(const e of this.lightPush.peers){_("Light Push peer found",e.id.toB58String());break}})();r.push(e)}if(e.includes(T.Filter)){const e=(async()=>{for await(const e of this.filter.peers){_("Filter peer found",e.id.toB58String());break}})();r.push(e)}t?await I(Promise.all(r),t,"Timed out waiting for a remote peer."):await Promise.all(r)}startKeepAlive(e,t,r){this.stopKeepAlive(e);const o=e.toB58String();if(0!==t){const r=new l.default(this.libp2p);this.pingKeepAliveTimers[o]=setInterval((()=>{r.ping(e).catch((e=>{_(`Ping failed (${o})`,e)}))}),1e3*t)}0!==r&&(this.relayKeepAliveTimers[o]=setInterval((()=>{b.WakuMessage.fromBytes(new Uint8Array,v.RelayPingContentTopic).then((e=>this.relay.send(e)))}),1e3*r))}stopKeepAlive(e){const t=e.toB58String();this.pingKeepAliveTimers[t]&&(clearInterval(this.pingKeepAliveTimers[t]),delete this.pingKeepAliveTimers[t]),this.relayKeepAliveTimers[t]&&(clearInterval(this.relayKeepAliveTimers[t]),delete this.relayKeepAliveTimers[t])}}t.Waku=w;const S=(e,t)=>new Promise(((r,o)=>setTimeout((()=>o(t)),e))),I=(e,t,r)=>Promise.race([e,S(t,r)])},1972:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FilterRPC=void 0;const n=r(2100),a=r(1614),u=s(r(42));class c{constructor(e){this.proto=e}static createRequest(e,t,r,o=!0){return new c({requestId:r||(0,a.v4)(),request:{subscribe:o,topic:e,contentFilters:t},push:void 0})}static decode(e){const t=u.FilterRPC.decode(n.Reader.create(e));return new c(t)}encode(){return u.FilterRPC.encode(this.proto).finish()}get push(){return this.proto.push}get requestId(){return this.proto.requestId}}t.FilterRPC=c},9243:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuFilter=t.FilterCodec=void 0;const i=o(r(1227)),s=o(r(8963)),n=r(618),a=r(5187),u=r(1721),c=r(607),d=r(2560),l=r(1972);t.FilterCodec="/vac/waku/filter/2.0.0-beta1";const p=(0,i.default)("waku:filter");t.WakuFilter=class{constructor(e){this.libp2p=e,this.subscriptions=new Map,this.decryptionKeys=new Map,this.libp2p.handle(t.FilterCodec,this.onRequest.bind(this))}async subscribe(e,t,r){const o=r?.pubsubTopic||c.DefaultPubSubTopic,i=t.map((e=>({contentTopic:e}))),a=l.FilterRPC.createRequest(o,i,void 0,!0),u=await this.getPeer(r?.peerId),d=await this.newStream(u);try{await(0,n.pipe)([a.encode()],s.default.encode(),d)}catch(e){throw p("Error subscribing to peer ",u.id.toB58String(),"for content topics",t,": ",e),e}return this.addCallback(a.requestId,e),async()=>{await this.unsubscribe(o,i,a.requestId,u),this.removeCallback(a.requestId)}}async onRequest({stream:e}){p("Receiving message push");try{await(0,n.pipe)(e.source,s.default.decode(),(async e=>{for await(const t of e){const e=l.FilterRPC.decode(t.slice());e.push?.messages?.length&&await this.pushMessages(e.requestId,e.push.messages)}}))}catch(e){p("Error decoding message",e)}}async pushMessages(e,t){const r=this.subscriptions.get(e);if(!r)return void p(`No callback registered for request ID ${e}`);const o=Array.from(this.decryptionKeys).map((([e,{method:t,contentTopics:r}])=>({key:e,method:t,contentTopics:r})));for(const e of t){const t=await d.WakuMessage.decodeProto(e,o);t?r(t):p("Not able to decode message")}}addCallback(e,t){this.subscriptions.set(e,t)}removeCallback(e){this.subscriptions.delete(e)}async unsubscribe(e,t,r,o){const i=l.FilterRPC.createRequest(e,t,r,!1),a=await this.newStream(o);try{await(0,n.pipe)([i.encode()],s.default.encode(),a.sink)}catch(e){throw p("Error unsubscribing",e),e}}async newStream(e){const r=this.libp2p.connectionManager.get(e.id);if(!r)throw new Error("Failed to get a connection to the peer");const{stream:o}=await r.newStream(t.FilterCodec);return o}async getPeer(e){let t;if(e){if(t=await this.libp2p.peerStore.get(e),!t)throw new Error(`Failed to retrieve connection details for provided peer in peer store: ${e.toB58String()}`)}else if(t=await this.randomPeer,!t)throw new Error("Failed to find known peer that registers waku filter protocol");return t}addDecryptionKey(e,t){this.decryptionKeys.set((0,u.hexToBytes)(e),t??{})}deleteDecryptionKey(e){this.decryptionKeys.delete((0,u.hexToBytes)(e))}get peers(){return(0,a.getPeersForProtocol)(this.libp2p,[t.FilterCodec])}get randomPeer(){return(0,a.selectRandomPeer)(this.peers)}}},7087:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuLightPush=t.PushResponse=t.LightPushCodec=void 0;const i=o(r(8342)),s=o(r(8963)),n=r(618),a=r(7405);Object.defineProperty(t,"PushResponse",{enumerable:!0,get:function(){return a.PushResponse}});const u=r(5187),c=r(607),d=r(7140);t.LightPushCodec="/vac/waku/lightpush/2.0.0-beta1",t.WakuLightPush=class{constructor(e,t){this.libp2p=e,this.pubSubTopic=t?.pubSubTopic?t.pubSubTopic:c.DefaultPubSubTopic}async push(e,r){let o;if(r?.peerId){if(o=await this.libp2p.peerStore.get(r.peerId),!o)throw"Peer is unknown"}else o=await this.randomPeer;if(!o)throw"No peer available";if(!o.protocols.includes(t.LightPushCodec))throw"Peer does not register waku light push protocol";const a=this.libp2p.connectionManager.get(o.id);if(!a)throw"Failed to get a connection to the peer";const{stream:u}=await a.newStream(t.LightPushCodec);try{const t=r?.pubSubTopic?r.pubSubTopic:this.pubSubTopic,o=d.PushRPC.createRequest(e,t),a=await(0,n.pipe)([o.encode()],s.default.encode(),u,s.default.decode(),i.default);try{return d.PushRPC.decode(a.slice()).response||(console.log("No response in PushRPC"),null)}catch(e){console.log("Failed to decode push reply",e)}}catch(e){console.log("Failed to send waku light push request",e)}return null}get peers(){return(0,u.getPeersForProtocol)(this.libp2p,[t.LightPushCodec])}get randomPeer(){return(0,u.selectRandomPeer)(this.peers)}}},7140:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PushRPC=void 0;const n=r(2100),a=r(1614),u=s(r(7405));class c{constructor(e){this.proto=e}static createRequest(e,t){return new c({requestId:(0,a.v4)(),request:{message:e.proto,pubSubTopic:t},response:void 0})}static decode(e){const t=u.PushRPC.decode(n.Reader.create(e));return new c(t)}encode(){return u.PushRPC.encode(this.proto).finish()}get query(){return this.proto.request}get response(){return this.proto.response}}t.PushRPC=c},7993:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;const n=s(r(9656)),a=r(605),u=r(5474),c=r(1721);function d(e,t){let r=1,o=0,i=Promise.resolve(new Uint8Array);for(;o<t;){const t=new Uint8Array([r>>24,r>>16,r>>8,r]),s=(0,a.concat)([t,e],t.length+e.length),n=(0,u.sha256)(s);i=i.then((e=>n.then((t=>{const r=new Uint8Array(t);return(0,a.concat)([e,r],e.length+r.length)})))),o+=32,r+=1}return i}function l(e,t){if(32!==e.length)throw new Error(`Bad private key, it should be 32 bytes but it's actually ${e.length} bytes long`);if(65!==t.length)throw new Error(`Bad public key, it should be 65 bytes but it's actually ${t.length} bytes long`);if(4!==t[0])throw new Error("Bad public key, a valid public key would begin with 4");{const r=n.getSharedSecret(e,t,!0);return new Uint8Array((0,c.hexToBytes)(r).slice(1))}}t.encrypt=async function(e,t){const r=(0,u.randomBytes)(32),o=await l(r,e),i=await d(o,32),s=(0,u.randomBytes)(16),c=i.slice(0,16),p=await(f=s,h=c,g=t,(0,u.getSubtle)().importKey("raw",h,"AES-CTR",!1,["encrypt"]).then((e=>(0,u.getSubtle)().encrypt({name:"AES-CTR",counter:f,length:128},e,g))).then((e=>new Uint8Array(e))));var f,h,g;const y=(0,a.concat)([s,p],s.length+p.length),b=await(0,u.sha256)(i.slice(16)),m=await function(e,t){const r={name:"HMAC",hash:{name:"SHA-256"}};return(0,u.getSubtle)().importKey("raw",e,r,!1,["sign"]).then((e=>(0,u.getSubtle)().sign(r,e,t))).then((e=>new Uint8Array(e)))}(b,y),v=n.getPublicKey(r,!1);return(0,a.concat)([v,y,m],v.length+y.length+m.length)},t.decrypt=async function(e,t){if(t.length<=113)throw new Error("Invalid Ciphertext. Data is too small. It should ba at least 113 bytes");if(4!==t[0])throw new Error(`Not a valid ciphertext. It should begin with 4 but actually begin with ${t[0]}`);{const s=t.slice(0,65),n=t.length-113,a=t.slice(65,81),c=t.slice(65,81+n),p=c.slice(16),f=t.slice(81+n),h=l(e,s),g=await d(h,32),[y,b]=await(0,u.sha256)(g.slice(16)).then((e=>[g.slice(0,16),e]));if(!await function(e,t,r){const o={name:"HMAC",hash:{name:"SHA-256"}};return(0,u.getSubtle)().importKey("raw",e,o,!1,["verify"]).then((e=>(0,u.getSubtle)().verify(o,e,r,t)))}(b,c,f))throw new Error("Incorrect MAC");return r=a,o=y,i=p,(0,u.getSubtle)().importKey("raw",o,"AES-CTR",!1,["decrypt"]).then((e=>(0,u.getSubtle)().decrypt({name:"AES-CTR",counter:r,length:128},e,i))).then((e=>new Uint8Array(e)))}var r,o,i}},2560:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuMessage=t.DecryptionMethod=void 0;const a=n(r(1227)),u=n(r(3720)),c=r(2100),d=s(r(6561)),l=r(1721),p=s(r(8340)),f=(0,a.default)("waku:message");var h;!function(e){e.Asymmetric="asymmetric",e.Symmetric="symmetric"}(h=t.DecryptionMethod||(t.DecryptionMethod={}));class g{constructor(e,t,r){this.proto=e,this._signaturePublicKey=t,this._signature=r}static async fromUtf8String(e,t,r){const o=(0,l.utf8ToBytes)(e);return g.fromBytes(o,t,r)}static async fromBytes(e,t,r){const{timestamp:o,encPublicKey:i,symKey:s,sigPrivKey:n}=Object.assign({timestamp:new Date},r||{});let a,c=e,d=0;if(i&&s)throw"Pass either `encPublicKey` or `symKey`, not both.";if(i){const e=await p.clearEncode(c,n);c=await p.encryptAsymmetric(e.payload,i),a=e.sig,d=1}else if(s){const e=await p.clearEncode(c,n);c=await p.encryptSymmetric(e.payload,s),a=e.sig,d=1}return new g({payload:c,timestampDeprecated:o.valueOf()/1e3,timestamp:u.default.fromNumber(o.valueOf()).mul(1e6),version:d,contentTopic:t},a?.publicKey,a?.signature)}static async decode(e,t){const r=d.WakuMessage.decode(c.Reader.create(e));return g.decodeProto(r,t)}static async decodeProto(e,t){if(void 0===e.payload)return void f("Payload is undefined");const r=e.payload;let o,i;if(1===e.version&&e.payload){if(void 0===t)return void f("Payload is encrypted but no private keys have been provided.");const s=e=>!!e,n=(await Promise.all(t.map((async({key:t,method:o,contentTopics:i})=>{if(!i||e.contentTopic&&i.includes(e.contentTopic))switch(o){case h.Asymmetric:try{return await p.decryptAsymmetric(r,t)}catch(e){return void f("Failed to decrypt message using asymmetric encryption despite decryption method being specified",e)}case h.Symmetric:try{return await p.decryptSymmetric(r,t)}catch(e){return void f("Failed to decrypt message using asymmetric encryption despite decryption method being specified",e)}default:try{return await p.decryptSymmetric(r,t)}catch(e){f("Failed to decrypt message using symmetric encryption",e);try{return await p.decryptAsymmetric(r,t)}catch(e){return void f("Failed to decrypt message using asymmetric encryption",e)}}}})))).filter(s);if(0===n.length)return void f("Failed to decrypt payload.");const a=n[0],u=await p.clearDecode(a);if(!u)return void f("Failed to decode payload.");Object.assign(e,{payload:u.payload}),o=u.sig?.publicKey,i=u.sig?.signature}return new g(e,o,i)}encode(){return d.WakuMessage.encode(this.proto).finish()}get payloadAsUtf8(){if(!this.payload)return"";try{return(0,l.bytesToUtf8)(this.payload)}catch(e){return f("Could not decode byte as UTF-8",e),""}}get payload(){if(this.proto.payload)return new Uint8Array(this.proto.payload)}get contentTopic(){return this.proto.contentTopic}get version(){return this.proto.version}get timestamp(){try{if(this.proto.timestamp){const e=this.proto.timestamp.div(1e6).toNumber();return new Date(e)}if(this.proto.timestampDeprecated)return new Date(1e3*this.proto.timestampDeprecated)}catch(e){return}}get signaturePublicKey(){return this._signaturePublicKey}get signature(){return this._signature}}t.WakuMessage=g},4231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateIv=t.decrypt=t.encrypt=t.TagSize=t.IvSize=t.KeySize=void 0;const o=r(5474);t.KeySize=32,t.IvSize=12,t.TagSize=16;const i={name:"AES-GCM",length:128};t.encrypt=async function(e,t,r){return(0,o.getSubtle)().importKey("raw",t,i,!1,["encrypt"]).then((t=>(0,o.getSubtle)().encrypt({iv:e,...i},t,r))).then((e=>new Uint8Array(e)))},t.decrypt=async function(e,t,r){return(0,o.getSubtle)().importKey("raw",t,i,!1,["decrypt"]).then((t=>(0,o.getSubtle)().decrypt({iv:e,...i},t,r))).then((e=>new Uint8Array(e)))},t.generateIv=function(){return(0,o.randomBytes)(t.IvSize)}},8340:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.decryptSymmetric=t.encryptSymmetric=t.decryptAsymmetric=t.encryptAsymmetric=t.clearDecode=t.clearEncode=t.PrivateKeySize=void 0;const n=s(r(9656)),a=r(605),u=r(5474),c=r(1721),d=s(r(7993)),l=s(r(4231));function p(e){let t=1;for(let r=e.length;r>=256;r/=256)t++;return t}t.PrivateKeySize=32,t.clearEncode=async function(e,t){let r=new Uint8Array([0]);r=function(e,t){const r=p(t);let o=new Uint8Array(4);return new DataView(o.buffer).setUint32(0,t.length,!0),o=o.slice(0,r),(e=(0,a.concat)([e,o]))[0]|=r,e}(r,e),r=(0,a.concat)([r,e]);let o=1+p(e)+e.length;t&&(o+=65);const i=256-o%256,s=(0,u.randomBytes)(i);if(d=i,(c=s).length!==d||!(d<=3||-1!==c.findIndex((e=>0!==e))))throw new Error("failed to generate random padding of size "+i);var c,d;let l;if(r=(0,a.concat)([r,s]),t){r[0]|=4;const e=(0,u.keccak256)(r),o=await(0,u.sign)(e,t);r=(0,a.concat)([r,o]),l={signature:o,publicKey:n.getPublicKey(t,!1)}}return{payload:r,sig:l}},t.clearDecode=function(e){const t=function(e){return 3&new DataView(e.buffer).getUint8(0)}(e);if(0===t)return;const r=function(e,t){let r=e.slice(1,1+t);return t<4&&(r=(0,a.concat)([r,new Uint8Array(4-t)],4)),new DataView(r.buffer).getInt32(0,!0)}(e,t),o=1+t,i=e.slice(o,o+r),s=function(e){return 4==(4&new DataView(e.buffer).getUint8(0))}(e);let c;if(s){const t=function(e){return e.slice(e.length-65,e.length)}(e),r=function(e,t){return t?(0,u.keccak256)(e.slice(0,e.length-65)):(0,u.keccak256)(e)}(e,s),o=function(e,t){const r=new DataView(t.slice(64).buffer).getUint8(0),o=n.Signature.fromCompact(t.slice(0,64));return n.recoverPublicKey(e,o,r,!1)}(r,t);c={signature:t,publicKey:o}}return{payload:i,sig:c}},t.encryptAsymmetric=async function(e,t){return d.encrypt((0,c.hexToBytes)(t),e)},t.decryptAsymmetric=async function(e,t){return d.decrypt(t,e)},t.encryptSymmetric=async function(e,t){const r=l.generateIv(),o=await l.encrypt(r,(0,c.hexToBytes)(t),e);return(0,a.concat)([o,r])},t.decryptSymmetric=async function(e,t){const r=e.length-l.IvSize,o=e.slice(0,r),i=e.slice(r);return l.decrypt(i,(0,c.hexToBytes)(t),o)}},6559:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayMaxIHaveLength=t.RelayOpportunisticGraftPeers=t.RelayOpportunisticGraftTicks=t.RelayFanoutTTL=t.RelayPruneBackoff=t.RelayPrunePeers=t.RelayHeartbeatInterval=t.RelayHeartbeatInitialDelay=t.RelayGossipFactor=t.RelayPingContentTopic=t.RelayCodecs=t.minute=t.second=void 0,t.second=1e3,t.minute=60*t.second,t.RelayCodecs=["/vac/waku/relay/2.0.0-beta2","/vac/waku/relay/2.0.0"],t.RelayPingContentTopic="/relay-ping/1/ping/null",t.RelayGossipFactor=.25,t.RelayHeartbeatInitialDelay=100,t.RelayHeartbeatInterval=t.second,t.RelayPrunePeers=16,t.RelayPruneBackoff=t.minute,t.RelayFanoutTTL=t.minute,t.RelayOpportunisticGraftTicks=60,t.RelayOpportunisticGraftPeers=2,t.RelayMaxIHaveLength=5e3},6624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelayPeers=void 0;const o=r(663),i=r(2979);t.getRelayPeers=function(e,t,r,s=(()=>!0)){const n=e.topics.get(t);if(!n)return new Set;let a=[];return n.forEach((t=>{const r=e.peers.get(t);r&&i.RelayCodecs.includes(r.protocol)&&s(t)&&a.push(t)})),a=(0,o.shuffle)(a),r>0&&a.length>r&&(a=a.slice(0,r)),new Set(a)}},2979:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuRelay=t.RelayCodecs=void 0;const a=n(r(1227)),u=n(r(5391)),c=r(663),d=r(2185),l=n(r(8785)),p=r(1721),f=r(607),h=r(2560),g=s(r(6559)),y=r(6559);Object.defineProperty(t,"RelayCodecs",{enumerable:!0,get:function(){return y.RelayCodecs}});const b=r(6624),m=r(5714),v=(0,a.default)("waku:relay");class R extends u.default{constructor(e,t){super(e,Object.assign(t,{globalSignaturePolicy:d.SignaturePolicy.StrictNoSign})),this.heartbeat=new m.RelayHeartbeat(this),this.observers={},this.decryptionKeys=new Map;const r=g.RelayCodecs;Object.assign(this,{multicodecs:r}),this.pubSubTopic=t?.pubSubTopic||f.DefaultPubSubTopic,t?.decryptionKeys?.forEach((e=>{this.addDecryptionKey(e)}))}async start(){await super.start(),this.subscribe(this.pubSubTopic)}async send(e){const t=e.encode();await super.publish(this.pubSubTopic,t)}addDecryptionKey(e,t){this.decryptionKeys.set((0,p.hexToBytes)(e),t??{})}deleteDecryptionKey(e){this.decryptionKeys.delete((0,p.hexToBytes)(e))}addObserver(e,t=[]){0===t.length?(this.observers[""]||(this.observers[""]=new Set),this.observers[""].add(e)):t.forEach((t=>{this.observers[t]||(this.observers[t]=new Set),this.observers[t].add(e)}))}deleteObserver(e,t=[]){0===t.length?this.observers[""]&&this.observers[""].delete(e):t.forEach((t=>{this.observers[t]&&this.observers[t].delete(e)}))}getPeers(){return(0,b.getRelayPeers)(this,this.pubSubTopic,this._options.D,(e=>this.score.score(e)>=this._options.scoreThresholds.publishThreshold))}subscribe(e){this.on(e,(t=>{const r=Array.from(this.decryptionKeys).map((([e,{method:t,contentTopics:r}])=>({key:e,method:t,contentTopics:r})));v(`Message received on ${e}`),h.WakuMessage.decode(t.data,r).then((e=>{e?(this.observers[""]&&this.observers[""].forEach((t=>{t(e)})),e.contentTopic&&this.observers[e.contentTopic]&&this.observers[e.contentTopic].forEach((t=>{t(e)}))):v("Failed to decode Waku Message")})).catch((e=>{v("Failed to decode Waku Message",e)}))})),super.subscribe(e)}join(e){if(!this.started)throw new Error("WakuRelayPubSub has not started");const t=this.fanout.get(e);if(t)t.forEach((e=>{this.score.score(e)<0&&t.delete(e)})),t.size<this._options.D&&(0,b.getRelayPeers)(this,e,this._options.D-t.size,(e=>!t.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0)).forEach((e=>t.add(e))),this.mesh.set(e,t),this.fanout.delete(e),this.lastpub.delete(e);else{const t=(0,b.getRelayPeers)(this,e,this._options.D,(e=>!this.direct.has(e)&&this.score.score(e)>=0));this.mesh.set(e,t)}this.mesh.get(e)?.forEach((t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this._sendGraft(t,e)}))}async _publish(e){const t=await this.getCanonicalMsgIdStr(e);e.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(e,t),this.gossipTracer.deliverMessage(t)),this.seenCache.put(t),this.messageCache.put(e,t);const r=new Set;e.topicIDs.forEach((e=>{if(!this.topics.get(e))return;this.direct.forEach((e=>{r.add(e)}));let t=this.mesh.get(e);if(!t||!t.size){if(t=this.fanout.get(e),!t){const r=(0,b.getRelayPeers)(this,e,this._options.D,(e=>this.score.score(e)>=this._options.scoreThresholds.publishThreshold));r.size>0?(t=r,this.fanout.set(e,r)):t=new Set}this.lastpub.set(e,this._now())}t?.forEach((e=>{r.add(e)}))}));const o=(0,c.createGossipRpc)([u.default.utils.normalizeOutRpcMessage(e)]);v(`Relay message to ${r.size} peers`),r.forEach((t=>{t!==e.from&&(v("Relay message to",t),this._sendRpc(t,o))}))}_emitGossip(e,t){const r=this.messageCache.getGossipIDs(e);if(!r.length)return;(0,c.shuffle)(r),r.length>g.RelayMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length);const o=[],i=this.topics.get(e);if(!i)return;i.forEach((e=>{const r=this.peers.get(e);r&&!t.has(e)&&!this.direct.has(e)&&g.RelayCodecs.includes(r.protocol)&&this.score.score(e)>=this._options.scoreThresholds.gossipThreshold&&o.push(e)}));let s=this._options.Dlazy;const n=g.RelayGossipFactor*o.length;n>s&&(s=n),s>o.length?s=o.length:(0,c.shuffle)(o),o.slice(0,s).forEach((t=>{let o=r;r.length>g.RelayMaxIHaveLength&&(o=(0,c.shuffle)(o.slice()).slice(0,g.RelayMaxIHaveLength)),this._pushGossip(t,{topicID:e,messageIDs:o})}))}async _makePrune(e,t,r){const o=g.RelayPruneBackoff/1e3;if(!r)return{topicID:t,peers:[],backoff:o};const i=(0,b.getRelayPeers)(this,t,g.RelayPrunePeers,(t=>t!==e&&this.score.score(t)>=0));return{topicID:t,peers:await Promise.all(Array.from(i).map((async e=>{const t=l.default.createFromB58String(e);return{peerID:t.toBytes(),signedPeerRecord:await this._libp2p.peerStore.addressBook.getRawEnvelope(t)}}))),backoff:o}}}t.WakuRelay=R},5714:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RelayHeartbeat=void 0;const n=r(1259),a=r(663),u=s(r(6559)),c=r(6624);class d extends n.Heartbeat{constructor(e){super(e)}start(){if(this._heartbeatTimer)return;const e=this._heartbeat.bind(this),t=setTimeout((()=>{e(),this._heartbeatTimer?.runPeriodically(e,u.RelayHeartbeatInterval)}),u.RelayHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(e,t)=>{this._heartbeatTimer._intervalId=setInterval(e,t)},cancel:()=>{clearTimeout(t),clearInterval(this._heartbeatTimer?._intervalId)}}}stop(){this._heartbeatTimer&&(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){const{D:e,Dlo:t,Dhi:r,Dscore:o,Dout:i}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;const s=new Map,n=e=>{let t=s.get(e);return void 0===t&&(t=this.gossipsub.score.score(e),s.set(e,t)),t},d=new Map,l=new Map,p=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach(((s,f)=>{const h=e=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",e,f),this.gossipsub.score.prune(e,f),this.gossipsub._addBackoff(e,f),s.delete(e);const t=l.get(e);t?t.push(f):l.set(e,[f])},g=e=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",e,f),this.gossipsub.score.graft(e,f),s.add(e);const t=d.get(e);t?t.push(f):d.set(e,[f])};if(s.forEach((e=>{const t=n(e);t<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,t,f),h(e),p.set(e,!0))})),s.size<t){const t=this.gossipsub.backoff.get(f),r=e-s.size;(0,c.getRelayPeers)(this.gossipsub,f,r,(e=>!s.has(e)&&!this.gossipsub.direct.has(e)&&(!t||!t.has(e))&&n(e)>=0)).forEach(g)}if(s.size>r){let t=Array.from(s);t.sort(((e,t)=>n(t)-n(e))),t=t.slice(0,o).concat((0,a.shuffle)(t.slice(o)));let r=0;if(t.slice(0,e).forEach((e=>{this.gossipsub.outbound.get(e)&&r++})),r<i){const o=e=>{const r=t[e];for(let r=e;r>0;r--)t[r]=t[r-1];t[0]=r};if(r>0){let i=r;for(let r=1;r<e&&i>0;r++)this.gossipsub.outbound.get(t[r])&&(o(r),i--)}let i=e-r;for(let r=e;r<t.length&&i>0;r++)this.gossipsub.outbound.get(t[r])&&(o(r),i--)}t.slice(e).forEach(h)}if(s.size>=t){let e=0;if(s.forEach((t=>{this.gossipsub.outbound.get(t)&&e++})),e<i){const t=i-e,r=this.gossipsub.backoff.get(f);(0,c.getRelayPeers)(this.gossipsub,f,t,(e=>!s.has(e)&&!this.gossipsub.direct.has(e)&&(!r||!r.has(e))&&n(e)>=0)).forEach(g)}}if(this.gossipsub.heartbeatTicks%u.RelayOpportunisticGraftTicks==0&&s.size>1){const e=Array.from(s).sort(((e,t)=>n(e)-n(t))),t=Math.floor(s.size/2),r=n(e[t]);if(r<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){const e=this.gossipsub.backoff.get(f);(0,c.getRelayPeers)(this.gossipsub,f,u.RelayOpportunisticGraftPeers,(t=>s.has(t)&&!this.gossipsub.direct.has(t)&&(!e||!e.has(t))&&n(t)>r)).forEach((e=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",e,f),g(e)}))}}this.gossipsub._emitGossip(f,s)}));const f=this.gossipsub._now();this.gossipsub.lastpub.forEach(((e,t)=>{e+u.RelayFanoutTTL<f&&(this.gossipsub.fanout.delete(t),this.gossipsub.lastpub.delete(t))})),this.gossipsub.fanout.forEach(((t,r)=>{const o=this.gossipsub.topics.get(r);if(t.forEach((e=>{(!o?.has(e)||n(e)<this.gossipsub._options.scoreThresholds.publishThreshold)&&t.delete(e)})),t.size<e){const o=e-t.size;(0,c.getRelayPeers)(this.gossipsub,r,o,(e=>!t.has(e)&&!this.gossipsub.direct.has(e)&&n(e)>=this.gossipsub._options.scoreThresholds.publishThreshold)).forEach((e=>{t.add(e)}))}this.gossipsub._emitGossip(r,t)})),this.gossipsub._sendGraftPrune(d,l,p),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}t.RelayHeartbeat=d},7545:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRPC=t.PageDirection=void 0;const a=n(r(3720)),u=r(2100),c=r(1614),d=s(r(6180)),l=s(r(5214)),p=r(5960);var f;!function(e){e.BACKWARD="backward",e.FORWARD="forward"}(f=t.PageDirection||(t.PageDirection={}));class h{constructor(e,t){switch(this.proto=e,this.storeCodec=t,t){case p.StoreCodecs.V2Beta3:this.protoCodec=d;break;case p.StoreCodecs.V2Beta4:this.protoCodec=l;break;default:throw`Internal Error: Unexpected store codec value received in constructor: ${t}`}}get query(){return this.proto.query}get response(){return this.proto.response}static createQuery(e){const t=e.storeCodec??p.StoreCodecs.V2Beta4,r=e.contentTopics.map((e=>({contentTopic:e}))),o=function(e){switch(e){case f.BACKWARD:return l.PagingInfo_Direction.DIRECTION_BACKWARD_UNSPECIFIED;case f.FORWARD:return l.PagingInfo_Direction.DIRECTION_FORWARD;default:return l.PagingInfo_Direction.DIRECTION_BACKWARD_UNSPECIFIED}}(e.pageDirection);switch(t){case p.StoreCodecs.V2Beta3:return(()=>{const i={pageSize:a.default.fromNumber(e.pageSize),cursor:e.cursor,direction:o};let s,n;return e.startTime&&(s=e.startTime.valueOf()/1e3),e.endTime&&(n=e.endTime.valueOf()/1e3),new h({requestId:(0,c.v4)(),query:{pubSubTopic:e.pubSubTopic,contentFilters:r,pagingInfo:i,startTime:s,endTime:n},response:void 0},t)})();case p.StoreCodecs.V2Beta4:return(()=>{const i={pageSize:a.default.fromNumber(e.pageSize),cursor:e.cursor,direction:o};let s,n;return e.startTime&&(s=a.default.fromNumber(e.startTime.valueOf()).mul(1e6)),e.endTime&&(n=a.default.fromNumber(e.endTime.valueOf()).mul(1e6)),new h({requestId:(0,c.v4)(),query:{pubSubTopic:e.pubSubTopic,contentFilters:r,pagingInfo:i,startTime:s,endTime:n},response:void 0},t)})();default:throw`Internal Error: Unexpected store codec value received in createQuery: ${t}`}}decode(e){const t=this.protoCodec.HistoryRPC.decode(u.Reader.create(e));return new h(t,this.storeCodec)}encode(){return this.protoCodec.HistoryRPC.encode(this.proto).finish()}}t.HistoryRPC=h},5960:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuStore=t.PageDirection=t.DefaultPageSize=t.StoreCodecs=void 0;const i=o(r(1227)),s=o(r(8342)),n=o(r(8963)),a=r(618),u=r(5187),c=r(1721),d=r(607),l=r(2560),p=r(7545);Object.defineProperty(t,"PageDirection",{enumerable:!0,get:function(){return p.PageDirection}});const f=(0,i.default)("waku:store");var h;!function(e){e.V2Beta3="/vac/waku/store/2.0.0-beta3",e.V2Beta4="/vac/waku/store/2.0.0-beta4"}(h=t.StoreCodecs||(t.StoreCodecs={})),t.DefaultPageSize=10,t.WakuStore=class{constructor(e,t){this.libp2p=e,this.pubSubTopic=t?.pubSubTopic?t.pubSubTopic:d.DefaultPubSubTopic,this.decryptionKeys=new Map}async queryHistory(e,r){let o,i;r?.timeFilter&&(o=r.timeFilter.startTime,i=r.timeFilter.endTime);const u=Object.assign({pubSubTopic:this.pubSubTopic,pageDirection:p.PageDirection.BACKWARD,pageSize:t.DefaultPageSize},r,{contentTopics:e,startTime:o,endTime:i});let d;if(f("Querying history with the following options",{peerId:r?.peerId?.toB58String(),...r}),u.peerId){if(d=await this.libp2p.peerStore.get(u.peerId),!d)throw`Failed to retrieve connection details for provided peer in peer store: ${u.peerId.toB58String()}`}else if(d=await this.randomPeer,!d)throw"Failed to find known peer that registers waku store protocol";let g="";for(const e of Object.values(h))d.protocols.includes(e)&&(g=e);if(f(`Use store codec ${g}`),!g)throw`Peer does not register waku store protocol: ${d.id.toB58String()}`;Object.assign(u,{storeCodec:g});const y=this.libp2p.connectionManager.get(d.id);if(!y)throw"Failed to get a connection to the peer";const b=Array.from(this.decryptionKeys).map((([e,{method:t,contentTopics:r}])=>({key:e,method:t,contentTopics:r})));u.decryptionKeys&&u.decryptionKeys.forEach((t=>{b.push({key:(0,c.hexToBytes)(t),contentTopics:e.length?e:void 0,method:void 0})}));const m=[];let v;for(;;){const{stream:e}=await y.newStream(g),t=Object.assign(u,{cursor:v}),r=p.HistoryRPC.createQuery(t);f("Querying store peer",y.remoteAddr.toString());const o=await(0,a.pipe)([r.encode()],n.default.encode(),e,n.default.decode(),s.default),i=r.decode(o.slice()).response;if(!i)throw"History response misses response field";if(i.error)throw"History response contains an Error"+i.error;if(!i.messages||!i.messages.length)return console.log("No messages present in HistoryRPC response"),m;f(`${i.messages.length} messages retrieved for pubsub topic ${u.pubSubTopic}`);const c=[];await Promise.all(i.messages.map((async e=>{const t=await l.WakuMessage.decodeProto(e,b);t&&(m.push(t),c.push(t))})));let d=!1;u.callback&&(d=Boolean(u.callback(c)));const h=i.pagingInfo?.pageSize,R=r.query?.pagingInfo?.pageSize;if(d||h&&R&&h<R)return m;if(v=i.pagingInfo?.cursor,void 0===v)return console.log("No cursor returned by peer."),m}}addDecryptionKey(e,t){this.decryptionKeys.set((0,c.hexToBytes)(e),t??{})}deleteDecryptionKey(e){this.decryptionKeys.delete((0,c.hexToBytes)(e))}get peers(){const e=[];for(const t of Object.values(h))e.push(t);return(0,u.getPeersForProtocol)(this.libp2p,e)}get randomPeer(){return(0,u.selectRandomPeer)(this.peers)}}},42:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FilterRPC=t.MessagePush=t.FilterRequest_ContentFilter=t.FilterRequest=t.protobufPackage=void 0;const i=o(r(3720)),s=o(r(2100)),n=r(6561);function a(e){return null!=e}t.protobufPackage="waku.v2",t.FilterRequest={encode(e,r=s.default.Writer.create()){!0===e.subscribe&&r.uint32(8).bool(e.subscribe),""!==e.topic&&r.uint32(18).string(e.topic);for(const o of e.contentFilters)t.FilterRequest_ContentFilter.encode(o,r.uint32(26).fork()).ldelim();return r},decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n={subscribe:!1,topic:"",contentFilters:[]};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 1:n.subscribe=o.bool();break;case 2:n.topic=o.string();break;case 3:n.contentFilters.push(t.FilterRequest_ContentFilter.decode(o,o.uint32()));break;default:o.skipType(7&e)}}return n},fromJSON:e=>({subscribe:!!a(e.subscribe)&&Boolean(e.subscribe),topic:a(e.topic)?String(e.topic):"",contentFilters:Array.isArray(e?.contentFilters)?e.contentFilters.map((e=>t.FilterRequest_ContentFilter.fromJSON(e))):[]}),toJSON(e){const r={};return void 0!==e.subscribe&&(r.subscribe=e.subscribe),void 0!==e.topic&&(r.topic=e.topic),e.contentFilters?r.contentFilters=e.contentFilters.map((e=>e?t.FilterRequest_ContentFilter.toJSON(e):void 0)):r.contentFilters=[],r},fromPartial(e){const r={subscribe:!1,topic:"",contentFilters:[]};return r.subscribe=e.subscribe??!1,r.topic=e.topic??"",r.contentFilters=e.contentFilters?.map((e=>t.FilterRequest_ContentFilter.fromPartial(e)))||[],r}},t.FilterRequest_ContentFilter={encode:(e,t=s.default.Writer.create())=>(""!==e.contentTopic&&t.uint32(10).string(e.contentTopic),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i={contentTopic:""};for(;r.pos<o;){const e=r.uint32();e>>>3==1?i.contentTopic=r.string():r.skipType(7&e)}return i},fromJSON:e=>({contentTopic:a(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){const t={};return void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){const t={contentTopic:""};return t.contentTopic=e.contentTopic??"",t}},t.MessagePush={encode(e,t=s.default.Writer.create()){for(const r of e.messages)n.WakuMessage.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i={messages:[]};for(;r.pos<o;){const e=r.uint32();e>>>3==1?i.messages.push(n.WakuMessage.decode(r,r.uint32())):r.skipType(7&e)}return i},fromJSON:e=>({messages:Array.isArray(e?.messages)?e.messages.map((e=>n.WakuMessage.fromJSON(e))):[]}),toJSON(e){const t={};return e.messages?t.messages=e.messages.map((e=>e?n.WakuMessage.toJSON(e):void 0)):t.messages=[],t},fromPartial(e){const t={messages:[]};return t.messages=e.messages?.map((e=>n.WakuMessage.fromPartial(e)))||[],t}},t.FilterRPC={encode:(e,r=s.default.Writer.create())=>(""!==e.requestId&&r.uint32(10).string(e.requestId),void 0!==e.request&&t.FilterRequest.encode(e.request,r.uint32(18).fork()).ldelim(),void 0!==e.push&&t.MessagePush.encode(e.push,r.uint32(26).fork()).ldelim(),r),decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n={requestId:"",request:void 0,push:void 0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 1:n.requestId=o.string();break;case 2:n.request=t.FilterRequest.decode(o,o.uint32());break;case 3:n.push=t.MessagePush.decode(o,o.uint32());break;default:o.skipType(7&e)}}return n},fromJSON:e=>({requestId:a(e.requestId)?String(e.requestId):"",request:a(e.request)?t.FilterRequest.fromJSON(e.request):void 0,push:a(e.push)?t.MessagePush.fromJSON(e.push):void 0}),toJSON(e){const r={};return void 0!==e.requestId&&(r.requestId=e.requestId),void 0!==e.request&&(r.request=e.request?t.FilterRequest.toJSON(e.request):void 0),void 0!==e.push&&(r.push=e.push?t.MessagePush.toJSON(e.push):void 0),r},fromPartial(e){const r={requestId:"",request:void 0,push:void 0};return r.requestId=e.requestId??"",r.request=void 0!==e.request&&null!==e.request?t.FilterRequest.fromPartial(e.request):void 0,r.push=void 0!==e.push&&null!==e.push?t.MessagePush.fromPartial(e.push):void 0,r}},s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},7405:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PushRPC=t.PushResponse=t.PushRequest=t.protobufPackage=void 0;const i=o(r(3720)),s=o(r(2100)),n=r(6561);function a(e){return null!=e}t.protobufPackage="waku.v2",t.PushRequest={encode:(e,t=s.default.Writer.create())=>(""!==e.pubSubTopic&&t.uint32(10).string(e.pubSubTopic),void 0!==e.message&&n.WakuMessage.encode(e.message,t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i={pubSubTopic:"",message:void 0};for(;r.pos<o;){const e=r.uint32();switch(e>>>3){case 1:i.pubSubTopic=r.string();break;case 2:i.message=n.WakuMessage.decode(r,r.uint32());break;default:r.skipType(7&e)}}return i},fromJSON:e=>({pubSubTopic:a(e.pubSubTopic)?String(e.pubSubTopic):"",message:a(e.message)?n.WakuMessage.fromJSON(e.message):void 0}),toJSON(e){const t={};return void 0!==e.pubSubTopic&&(t.pubSubTopic=e.pubSubTopic),void 0!==e.message&&(t.message=e.message?n.WakuMessage.toJSON(e.message):void 0),t},fromPartial(e){const t={pubSubTopic:"",message:void 0};return t.pubSubTopic=e.pubSubTopic??"",t.message=void 0!==e.message&&null!==e.message?n.WakuMessage.fromPartial(e.message):void 0,t}},t.PushResponse={encode:(e,t=s.default.Writer.create())=>(!0===e.isSuccess&&t.uint32(8).bool(e.isSuccess),""!==e.info&&t.uint32(18).string(e.info),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i={isSuccess:!1,info:""};for(;r.pos<o;){const e=r.uint32();switch(e>>>3){case 1:i.isSuccess=r.bool();break;case 2:i.info=r.string();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({isSuccess:!!a(e.isSuccess)&&Boolean(e.isSuccess),info:a(e.info)?String(e.info):""}),toJSON(e){const t={};return void 0!==e.isSuccess&&(t.isSuccess=e.isSuccess),void 0!==e.info&&(t.info=e.info),t},fromPartial(e){const t={isSuccess:!1,info:""};return t.isSuccess=e.isSuccess??!1,t.info=e.info??"",t}},t.PushRPC={encode:(e,r=s.default.Writer.create())=>(""!==e.requestId&&r.uint32(10).string(e.requestId),void 0!==e.request&&t.PushRequest.encode(e.request,r.uint32(18).fork()).ldelim(),void 0!==e.response&&t.PushResponse.encode(e.response,r.uint32(26).fork()).ldelim(),r),decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n={requestId:"",request:void 0,response:void 0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 1:n.requestId=o.string();break;case 2:n.request=t.PushRequest.decode(o,o.uint32());break;case 3:n.response=t.PushResponse.decode(o,o.uint32());break;default:o.skipType(7&e)}}return n},fromJSON:e=>({requestId:a(e.requestId)?String(e.requestId):"",request:a(e.request)?t.PushRequest.fromJSON(e.request):void 0,response:a(e.response)?t.PushResponse.fromJSON(e.response):void 0}),toJSON(e){const r={};return void 0!==e.requestId&&(r.requestId=e.requestId),void 0!==e.request&&(r.request=e.request?t.PushRequest.toJSON(e.request):void 0),void 0!==e.response&&(r.response=e.response?t.PushResponse.toJSON(e.response):void 0),r},fromPartial(e){const r={requestId:"",request:void 0,response:void 0};return r.requestId=e.requestId??"",r.request=void 0!==e.request&&null!==e.request?t.PushRequest.fromPartial(e.request):void 0,r.response=void 0!==e.response&&null!==e.response?t.PushResponse.fromPartial(e.response):void 0,r}},s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},6561:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WakuMessage=t.protobufPackage=void 0;const i=o(r(3720)),s=o(r(2100));t.protobufPackage="waku.v2",t.WakuMessage={encode:(e,t=s.default.Writer.create())=>(void 0!==e.payload&&t.uint32(10).bytes(e.payload),void 0!==e.contentTopic&&t.uint32(18).string(e.contentTopic),void 0!==e.version&&t.uint32(24).uint32(e.version),void 0!==e.timestampDeprecated&&t.uint32(33).double(e.timestampDeprecated),void 0!==e.timestamp&&t.uint32(80).sint64(e.timestamp),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i={payload:void 0,contentTopic:void 0,version:void 0,timestampDeprecated:void 0,timestamp:void 0};for(;r.pos<o;){const e=r.uint32();switch(e>>>3){case 1:i.payload=r.bytes();break;case 2:i.contentTopic=r.string();break;case 3:i.version=r.uint32();break;case 4:i.timestampDeprecated=r.double();break;case 10:i.timestamp=r.sint64();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({payload:d(e.payload)?u(e.payload):void 0,contentTopic:d(e.contentTopic)?String(e.contentTopic):void 0,version:d(e.version)?Number(e.version):void 0,timestampDeprecated:d(e.timestampDeprecated)?Number(e.timestampDeprecated):void 0,timestamp:d(e.timestamp)?i.default.fromString(e.timestamp):void 0}),toJSON(e){const t={};return void 0!==e.payload&&(t.payload=void 0!==e.payload?function(e){const t=[];for(const r of e)t.push(String.fromCharCode(r));return c(t.join(""))}(e.payload):void 0),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),void 0!==e.version&&(t.version=Math.round(e.version)),void 0!==e.timestampDeprecated&&(t.timestampDeprecated=e.timestampDeprecated),void 0!==e.timestamp&&(t.timestamp=(e.timestamp||void 0).toString()),t},fromPartial(e){const t={payload:void 0,contentTopic:void 0,version:void 0,timestampDeprecated:void 0,timestamp:void 0};return t.payload=e.payload??void 0,t.contentTopic=e.contentTopic??void 0,t.version=e.version??void 0,t.timestampDeprecated=e.timestampDeprecated??void 0,t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?i.default.fromValue(e.timestamp):void 0,t}};var n=(()=>{if(void 0!==n)return n;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();const a=n.atob||(e=>n.Buffer.from(e,"base64").toString("binary"));function u(e){const t=a(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}const c=n.btoa||(e=>n.Buffer.from(e,"binary").toString("base64"));function d(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},6180:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRPC=t.HistoryResponse=t.HistoryQuery=t.ContentFilter=t.PagingInfo=t.Index=t.historyResponse_ErrorToJSON=t.historyResponse_ErrorFromJSON=t.HistoryResponse_Error=t.pagingInfo_DirectionToJSON=t.pagingInfo_DirectionFromJSON=t.PagingInfo_Direction=t.protobufPackage=void 0;const i=o(r(3720)),s=o(r(2100)),n=r(6561);var a,u;function c(e){switch(e){case 0:case"DIRECTION_BACKWARD_UNSPECIFIED":return a.DIRECTION_BACKWARD_UNSPECIFIED;case 1:case"DIRECTION_FORWARD":return a.DIRECTION_FORWARD;default:return a.UNRECOGNIZED}}function d(e){switch(e){case a.DIRECTION_BACKWARD_UNSPECIFIED:return"DIRECTION_BACKWARD_UNSPECIFIED";case a.DIRECTION_FORWARD:return"DIRECTION_FORWARD";default:return"UNKNOWN"}}function l(e){switch(e){case 0:case"ERROR_NONE_UNSPECIFIED":return u.ERROR_NONE_UNSPECIFIED;case 1:case"ERROR_INVALID_CURSOR":return u.ERROR_INVALID_CURSOR;default:return u.UNRECOGNIZED}}function p(e){switch(e){case u.ERROR_NONE_UNSPECIFIED:return"ERROR_NONE_UNSPECIFIED";case u.ERROR_INVALID_CURSOR:return"ERROR_INVALID_CURSOR";default:return"UNKNOWN"}}function f(){return{digest:new Uint8Array,receivedTime:0,senderTime:0}}function h(){return{pageSize:i.default.UZERO,cursor:void 0,direction:0}}t.protobufPackage="waku.v2.store.v2beta3",function(e){e[e.DIRECTION_BACKWARD_UNSPECIFIED=0]="DIRECTION_BACKWARD_UNSPECIFIED",e[e.DIRECTION_FORWARD=1]="DIRECTION_FORWARD",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a=t.PagingInfo_Direction||(t.PagingInfo_Direction={})),t.pagingInfo_DirectionFromJSON=c,t.pagingInfo_DirectionToJSON=d,function(e){e[e.ERROR_NONE_UNSPECIFIED=0]="ERROR_NONE_UNSPECIFIED",e[e.ERROR_INVALID_CURSOR=1]="ERROR_INVALID_CURSOR",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(u=t.HistoryResponse_Error||(t.HistoryResponse_Error={})),t.historyResponse_ErrorFromJSON=l,t.historyResponse_ErrorToJSON=p,t.Index={encode:(e,t=s.default.Writer.create())=>(0!==e.digest.length&&t.uint32(10).bytes(e.digest),0!==e.receivedTime&&t.uint32(17).double(e.receivedTime),0!==e.senderTime&&t.uint32(25).double(e.senderTime),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i=f();for(;r.pos<o;){const e=r.uint32();switch(e>>>3){case 1:i.digest=r.bytes();break;case 2:i.receivedTime=r.double();break;case 3:i.senderTime=r.double();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({digest:v(e.digest)?b(e.digest):new Uint8Array,receivedTime:v(e.receivedTime)?Number(e.receivedTime):0,senderTime:v(e.senderTime)?Number(e.senderTime):0}),toJSON(e){const t={};return void 0!==e.digest&&(t.digest=function(e){const t=[];for(const r of e)t.push(String.fromCharCode(r));return m(t.join(""))}(void 0!==e.digest?e.digest:new Uint8Array)),void 0!==e.receivedTime&&(t.receivedTime=e.receivedTime),void 0!==e.senderTime&&(t.senderTime=e.senderTime),t},fromPartial(e){const t=f();return t.digest=e.digest??new Uint8Array,t.receivedTime=e.receivedTime??0,t.senderTime=e.senderTime??0,t}},t.PagingInfo={encode:(e,r=s.default.Writer.create())=>(e.pageSize.isZero()||r.uint32(8).uint64(e.pageSize),void 0!==e.cursor&&t.Index.encode(e.cursor,r.uint32(18).fork()).ldelim(),0!==e.direction&&r.uint32(24).int32(e.direction),r),decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n=h();for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 1:n.pageSize=o.uint64();break;case 2:n.cursor=t.Index.decode(o,o.uint32());break;case 3:n.direction=o.int32();break;default:o.skipType(7&e)}}return n},fromJSON:e=>({pageSize:v(e.pageSize)?i.default.fromString(e.pageSize):i.default.UZERO,cursor:v(e.cursor)?t.Index.fromJSON(e.cursor):void 0,direction:v(e.direction)?c(e.direction):0}),toJSON(e){const r={};return void 0!==e.pageSize&&(r.pageSize=(e.pageSize||i.default.UZERO).toString()),void 0!==e.cursor&&(r.cursor=e.cursor?t.Index.toJSON(e.cursor):void 0),void 0!==e.direction&&(r.direction=d(e.direction)),r},fromPartial(e){const r=h();return r.pageSize=void 0!==e.pageSize&&null!==e.pageSize?i.default.fromValue(e.pageSize):i.default.UZERO,r.cursor=void 0!==e.cursor&&null!==e.cursor?t.Index.fromPartial(e.cursor):void 0,r.direction=e.direction??0,r}},t.ContentFilter={encode:(e,t=s.default.Writer.create())=>(""!==e.contentTopic&&t.uint32(10).string(e.contentTopic),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i={contentTopic:""};for(;r.pos<o;){const e=r.uint32();e>>>3==1?i.contentTopic=r.string():r.skipType(7&e)}return i},fromJSON:e=>({contentTopic:v(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){const t={};return void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){const t={contentTopic:""};return t.contentTopic=e.contentTopic??"",t}},t.HistoryQuery={encode(e,r=s.default.Writer.create()){void 0!==e.pubSubTopic&&r.uint32(18).string(e.pubSubTopic);for(const o of e.contentFilters)t.ContentFilter.encode(o,r.uint32(26).fork()).ldelim();return void 0!==e.pagingInfo&&t.PagingInfo.encode(e.pagingInfo,r.uint32(34).fork()).ldelim(),void 0!==e.startTime&&r.uint32(41).double(e.startTime),void 0!==e.endTime&&r.uint32(49).double(e.endTime),r},decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 2:n.pubSubTopic=o.string();break;case 3:n.contentFilters.push(t.ContentFilter.decode(o,o.uint32()));break;case 4:n.pagingInfo=t.PagingInfo.decode(o,o.uint32());break;case 5:n.startTime=o.double();break;case 6:n.endTime=o.double();break;default:o.skipType(7&e)}}return n},fromJSON:e=>({pubSubTopic:v(e.pubSubTopic)?String(e.pubSubTopic):void 0,contentFilters:Array.isArray(e?.contentFilters)?e.contentFilters.map((e=>t.ContentFilter.fromJSON(e))):[],pagingInfo:v(e.pagingInfo)?t.PagingInfo.fromJSON(e.pagingInfo):void 0,startTime:v(e.startTime)?Number(e.startTime):void 0,endTime:v(e.endTime)?Number(e.endTime):void 0}),toJSON(e){const r={};return void 0!==e.pubSubTopic&&(r.pubSubTopic=e.pubSubTopic),e.contentFilters?r.contentFilters=e.contentFilters.map((e=>e?t.ContentFilter.toJSON(e):void 0)):r.contentFilters=[],void 0!==e.pagingInfo&&(r.pagingInfo=e.pagingInfo?t.PagingInfo.toJSON(e.pagingInfo):void 0),void 0!==e.startTime&&(r.startTime=e.startTime),void 0!==e.endTime&&(r.endTime=e.endTime),r},fromPartial(e){const r={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};return r.pubSubTopic=e.pubSubTopic??void 0,r.contentFilters=e.contentFilters?.map((e=>t.ContentFilter.fromPartial(e)))||[],r.pagingInfo=void 0!==e.pagingInfo&&null!==e.pagingInfo?t.PagingInfo.fromPartial(e.pagingInfo):void 0,r.startTime=e.startTime??void 0,r.endTime=e.endTime??void 0,r}},t.HistoryResponse={encode(e,r=s.default.Writer.create()){for(const t of e.messages)n.WakuMessage.encode(t,r.uint32(18).fork()).ldelim();return void 0!==e.pagingInfo&&t.PagingInfo.encode(e.pagingInfo,r.uint32(26).fork()).ldelim(),0!==e.error&&r.uint32(32).int32(e.error),r},decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const a={messages:[],pagingInfo:void 0,error:0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 2:a.messages.push(n.WakuMessage.decode(o,o.uint32()));break;case 3:a.pagingInfo=t.PagingInfo.decode(o,o.uint32());break;case 4:a.error=o.int32();break;default:o.skipType(7&e)}}return a},fromJSON:e=>({messages:Array.isArray(e?.messages)?e.messages.map((e=>n.WakuMessage.fromJSON(e))):[],pagingInfo:v(e.pagingInfo)?t.PagingInfo.fromJSON(e.pagingInfo):void 0,error:v(e.error)?l(e.error):0}),toJSON(e){const r={};return e.messages?r.messages=e.messages.map((e=>e?n.WakuMessage.toJSON(e):void 0)):r.messages=[],void 0!==e.pagingInfo&&(r.pagingInfo=e.pagingInfo?t.PagingInfo.toJSON(e.pagingInfo):void 0),void 0!==e.error&&(r.error=p(e.error)),r},fromPartial(e){const r={messages:[],pagingInfo:void 0,error:0};return r.messages=e.messages?.map((e=>n.WakuMessage.fromPartial(e)))||[],r.pagingInfo=void 0!==e.pagingInfo&&null!==e.pagingInfo?t.PagingInfo.fromPartial(e.pagingInfo):void 0,r.error=e.error??0,r}},t.HistoryRPC={encode:(e,r=s.default.Writer.create())=>(""!==e.requestId&&r.uint32(10).string(e.requestId),void 0!==e.query&&t.HistoryQuery.encode(e.query,r.uint32(18).fork()).ldelim(),void 0!==e.response&&t.HistoryResponse.encode(e.response,r.uint32(26).fork()).ldelim(),r),decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n={requestId:"",query:void 0,response:void 0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 1:n.requestId=o.string();break;case 2:n.query=t.HistoryQuery.decode(o,o.uint32());break;case 3:n.response=t.HistoryResponse.decode(o,o.uint32());break;default:o.skipType(7&e)}}return n},fromJSON:e=>({requestId:v(e.requestId)?String(e.requestId):"",query:v(e.query)?t.HistoryQuery.fromJSON(e.query):void 0,response:v(e.response)?t.HistoryResponse.fromJSON(e.response):void 0}),toJSON(e){const r={};return void 0!==e.requestId&&(r.requestId=e.requestId),void 0!==e.query&&(r.query=e.query?t.HistoryQuery.toJSON(e.query):void 0),void 0!==e.response&&(r.response=e.response?t.HistoryResponse.toJSON(e.response):void 0),r},fromPartial(e){const r={requestId:"",query:void 0,response:void 0};return r.requestId=e.requestId??"",r.query=void 0!==e.query&&null!==e.query?t.HistoryQuery.fromPartial(e.query):void 0,r.response=void 0!==e.response&&null!==e.response?t.HistoryResponse.fromPartial(e.response):void 0,r}};var g=(()=>{if(void 0!==g)return g;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();const y=g.atob||(e=>g.Buffer.from(e,"base64").toString("binary"));function b(e){const t=y(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}const m=g.btoa||(e=>g.Buffer.from(e,"binary").toString("base64"));function v(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},5214:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryRPC=t.HistoryResponse=t.HistoryQuery=t.ContentFilter=t.PagingInfo=t.Index=t.historyResponse_ErrorToJSON=t.historyResponse_ErrorFromJSON=t.HistoryResponse_Error=t.pagingInfo_DirectionToJSON=t.pagingInfo_DirectionFromJSON=t.PagingInfo_Direction=t.protobufPackage=void 0;const i=o(r(3720)),s=o(r(2100)),n=r(6561);var a,u;function c(e){switch(e){case 0:case"DIRECTION_BACKWARD_UNSPECIFIED":return a.DIRECTION_BACKWARD_UNSPECIFIED;case 1:case"DIRECTION_FORWARD":return a.DIRECTION_FORWARD;default:return a.UNRECOGNIZED}}function d(e){switch(e){case a.DIRECTION_BACKWARD_UNSPECIFIED:return"DIRECTION_BACKWARD_UNSPECIFIED";case a.DIRECTION_FORWARD:return"DIRECTION_FORWARD";default:return"UNKNOWN"}}function l(e){switch(e){case 0:case"ERROR_NONE_UNSPECIFIED":return u.ERROR_NONE_UNSPECIFIED;case 1:case"ERROR_INVALID_CURSOR":return u.ERROR_INVALID_CURSOR;default:return u.UNRECOGNIZED}}function p(e){switch(e){case u.ERROR_NONE_UNSPECIFIED:return"ERROR_NONE_UNSPECIFIED";case u.ERROR_INVALID_CURSOR:return"ERROR_INVALID_CURSOR";default:return"UNKNOWN"}}function f(){return{digest:new Uint8Array,receivedTime:i.default.ZERO,senderTime:i.default.ZERO,pubsubTopic:""}}function h(){return{pageSize:i.default.UZERO,cursor:void 0,direction:0}}t.protobufPackage="waku.v2.store.v2beta4",function(e){e[e.DIRECTION_BACKWARD_UNSPECIFIED=0]="DIRECTION_BACKWARD_UNSPECIFIED",e[e.DIRECTION_FORWARD=1]="DIRECTION_FORWARD",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a=t.PagingInfo_Direction||(t.PagingInfo_Direction={})),t.pagingInfo_DirectionFromJSON=c,t.pagingInfo_DirectionToJSON=d,function(e){e[e.ERROR_NONE_UNSPECIFIED=0]="ERROR_NONE_UNSPECIFIED",e[e.ERROR_INVALID_CURSOR=1]="ERROR_INVALID_CURSOR",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(u=t.HistoryResponse_Error||(t.HistoryResponse_Error={})),t.historyResponse_ErrorFromJSON=l,t.historyResponse_ErrorToJSON=p,t.Index={encode:(e,t=s.default.Writer.create())=>(0!==e.digest.length&&t.uint32(10).bytes(e.digest),e.receivedTime.isZero()||t.uint32(16).sint64(e.receivedTime),e.senderTime.isZero()||t.uint32(24).sint64(e.senderTime),""!==e.pubsubTopic&&t.uint32(34).string(e.pubsubTopic),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i=f();for(;r.pos<o;){const e=r.uint32();switch(e>>>3){case 1:i.digest=r.bytes();break;case 2:i.receivedTime=r.sint64();break;case 3:i.senderTime=r.sint64();break;case 4:i.pubsubTopic=r.string();break;default:r.skipType(7&e)}}return i},fromJSON:e=>({digest:v(e.digest)?b(e.digest):new Uint8Array,receivedTime:v(e.receivedTime)?i.default.fromString(e.receivedTime):i.default.ZERO,senderTime:v(e.senderTime)?i.default.fromString(e.senderTime):i.default.ZERO,pubsubTopic:v(e.pubsubTopic)?String(e.pubsubTopic):""}),toJSON(e){const t={};return void 0!==e.digest&&(t.digest=function(e){const t=[];for(const r of e)t.push(String.fromCharCode(r));return m(t.join(""))}(void 0!==e.digest?e.digest:new Uint8Array)),void 0!==e.receivedTime&&(t.receivedTime=(e.receivedTime||i.default.ZERO).toString()),void 0!==e.senderTime&&(t.senderTime=(e.senderTime||i.default.ZERO).toString()),void 0!==e.pubsubTopic&&(t.pubsubTopic=e.pubsubTopic),t},fromPartial(e){const t=f();return t.digest=e.digest??new Uint8Array,t.receivedTime=void 0!==e.receivedTime&&null!==e.receivedTime?i.default.fromValue(e.receivedTime):i.default.ZERO,t.senderTime=void 0!==e.senderTime&&null!==e.senderTime?i.default.fromValue(e.senderTime):i.default.ZERO,t.pubsubTopic=e.pubsubTopic??"",t}},t.PagingInfo={encode:(e,r=s.default.Writer.create())=>(e.pageSize.isZero()||r.uint32(8).uint64(e.pageSize),void 0!==e.cursor&&t.Index.encode(e.cursor,r.uint32(18).fork()).ldelim(),0!==e.direction&&r.uint32(24).int32(e.direction),r),decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n=h();for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 1:n.pageSize=o.uint64();break;case 2:n.cursor=t.Index.decode(o,o.uint32());break;case 3:n.direction=o.int32();break;default:o.skipType(7&e)}}return n},fromJSON:e=>({pageSize:v(e.pageSize)?i.default.fromString(e.pageSize):i.default.UZERO,cursor:v(e.cursor)?t.Index.fromJSON(e.cursor):void 0,direction:v(e.direction)?c(e.direction):0}),toJSON(e){const r={};return void 0!==e.pageSize&&(r.pageSize=(e.pageSize||i.default.UZERO).toString()),void 0!==e.cursor&&(r.cursor=e.cursor?t.Index.toJSON(e.cursor):void 0),void 0!==e.direction&&(r.direction=d(e.direction)),r},fromPartial(e){const r=h();return r.pageSize=void 0!==e.pageSize&&null!==e.pageSize?i.default.fromValue(e.pageSize):i.default.UZERO,r.cursor=void 0!==e.cursor&&null!==e.cursor?t.Index.fromPartial(e.cursor):void 0,r.direction=e.direction??0,r}},t.ContentFilter={encode:(e,t=s.default.Writer.create())=>(""!==e.contentTopic&&t.uint32(10).string(e.contentTopic),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let o=void 0===t?r.len:r.pos+t;const i={contentTopic:""};for(;r.pos<o;){const e=r.uint32();e>>>3==1?i.contentTopic=r.string():r.skipType(7&e)}return i},fromJSON:e=>({contentTopic:v(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){const t={};return void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){const t={contentTopic:""};return t.contentTopic=e.contentTopic??"",t}},t.HistoryQuery={encode(e,r=s.default.Writer.create()){void 0!==e.pubSubTopic&&r.uint32(18).string(e.pubSubTopic);for(const o of e.contentFilters)t.ContentFilter.encode(o,r.uint32(26).fork()).ldelim();return void 0!==e.pagingInfo&&t.PagingInfo.encode(e.pagingInfo,r.uint32(34).fork()).ldelim(),void 0!==e.startTime&&r.uint32(40).sint64(e.startTime),void 0!==e.endTime&&r.uint32(48).sint64(e.endTime),r},decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 2:n.pubSubTopic=o.string();break;case 3:n.contentFilters.push(t.ContentFilter.decode(o,o.uint32()));break;case 4:n.pagingInfo=t.PagingInfo.decode(o,o.uint32());break;case 5:n.startTime=o.sint64();break;case 6:n.endTime=o.sint64();break;default:o.skipType(7&e)}}return n},fromJSON:e=>({pubSubTopic:v(e.pubSubTopic)?String(e.pubSubTopic):void 0,contentFilters:Array.isArray(e?.contentFilters)?e.contentFilters.map((e=>t.ContentFilter.fromJSON(e))):[],pagingInfo:v(e.pagingInfo)?t.PagingInfo.fromJSON(e.pagingInfo):void 0,startTime:v(e.startTime)?i.default.fromString(e.startTime):void 0,endTime:v(e.endTime)?i.default.fromString(e.endTime):void 0}),toJSON(e){const r={};return void 0!==e.pubSubTopic&&(r.pubSubTopic=e.pubSubTopic),e.contentFilters?r.contentFilters=e.contentFilters.map((e=>e?t.ContentFilter.toJSON(e):void 0)):r.contentFilters=[],void 0!==e.pagingInfo&&(r.pagingInfo=e.pagingInfo?t.PagingInfo.toJSON(e.pagingInfo):void 0),void 0!==e.startTime&&(r.startTime=(e.startTime||void 0).toString()),void 0!==e.endTime&&(r.endTime=(e.endTime||void 0).toString()),r},fromPartial(e){const r={pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0};return r.pubSubTopic=e.pubSubTopic??void 0,r.contentFilters=e.contentFilters?.map((e=>t.ContentFilter.fromPartial(e)))||[],r.pagingInfo=void 0!==e.pagingInfo&&null!==e.pagingInfo?t.PagingInfo.fromPartial(e.pagingInfo):void 0,r.startTime=void 0!==e.startTime&&null!==e.startTime?i.default.fromValue(e.startTime):void 0,r.endTime=void 0!==e.endTime&&null!==e.endTime?i.default.fromValue(e.endTime):void 0,r}},t.HistoryResponse={encode(e,r=s.default.Writer.create()){for(const t of e.messages)n.WakuMessage.encode(t,r.uint32(18).fork()).ldelim();return void 0!==e.pagingInfo&&t.PagingInfo.encode(e.pagingInfo,r.uint32(26).fork()).ldelim(),0!==e.error&&r.uint32(32).int32(e.error),r},decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const a={messages:[],pagingInfo:void 0,error:0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 2:a.messages.push(n.WakuMessage.decode(o,o.uint32()));break;case 3:a.pagingInfo=t.PagingInfo.decode(o,o.uint32());break;case 4:a.error=o.int32();break;default:o.skipType(7&e)}}return a},fromJSON:e=>({messages:Array.isArray(e?.messages)?e.messages.map((e=>n.WakuMessage.fromJSON(e))):[],pagingInfo:v(e.pagingInfo)?t.PagingInfo.fromJSON(e.pagingInfo):void 0,error:v(e.error)?l(e.error):0}),toJSON(e){const r={};return e.messages?r.messages=e.messages.map((e=>e?n.WakuMessage.toJSON(e):void 0)):r.messages=[],void 0!==e.pagingInfo&&(r.pagingInfo=e.pagingInfo?t.PagingInfo.toJSON(e.pagingInfo):void 0),void 0!==e.error&&(r.error=p(e.error)),r},fromPartial(e){const r={messages:[],pagingInfo:void 0,error:0};return r.messages=e.messages?.map((e=>n.WakuMessage.fromPartial(e)))||[],r.pagingInfo=void 0!==e.pagingInfo&&null!==e.pagingInfo?t.PagingInfo.fromPartial(e.pagingInfo):void 0,r.error=e.error??0,r}},t.HistoryRPC={encode:(e,r=s.default.Writer.create())=>(""!==e.requestId&&r.uint32(10).string(e.requestId),void 0!==e.query&&t.HistoryQuery.encode(e.query,r.uint32(18).fork()).ldelim(),void 0!==e.response&&t.HistoryResponse.encode(e.response,r.uint32(26).fork()).ldelim(),r),decode(e,r){const o=e instanceof s.default.Reader?e:new s.default.Reader(e);let i=void 0===r?o.len:o.pos+r;const n={requestId:"",query:void 0,response:void 0};for(;o.pos<i;){const e=o.uint32();switch(e>>>3){case 1:n.requestId=o.string();break;case 2:n.query=t.HistoryQuery.decode(o,o.uint32());break;case 3:n.response=t.HistoryResponse.decode(o,o.uint32());break;default:o.skipType(7&e)}}return n},fromJSON:e=>({requestId:v(e.requestId)?String(e.requestId):"",query:v(e.query)?t.HistoryQuery.fromJSON(e.query):void 0,response:v(e.response)?t.HistoryResponse.fromJSON(e.response):void 0}),toJSON(e){const r={};return void 0!==e.requestId&&(r.requestId=e.requestId),void 0!==e.query&&(r.query=e.query?t.HistoryQuery.toJSON(e.query):void 0),void 0!==e.response&&(r.response=e.response?t.HistoryResponse.toJSON(e.response):void 0),r},fromPartial(e){const r={requestId:"",query:void 0,response:void 0};return r.requestId=e.requestId??"",r.query=void 0!==e.query&&null!==e.query?t.HistoryQuery.fromPartial(e.query):void 0,r.response=void 0!==e.response&&null!==e.response?t.HistoryResponse.fromPartial(e.response):void 0,r}};var g=(()=>{if(void 0!==g)return g;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();const y=g.atob||(e=>g.Buffer.from(e,"base64").toString("binary"));function b(e){const t=y(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}const m=g.btoa||(e=>g.Buffer.from(e,"binary").toString("base64"));function v(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},3094:()=>{},9159:()=>{},5883:()=>{},5696:()=>{},9408:()=>{},7956:()=>{},1724:()=>{},2678:()=>{},5819:()=>{},4031:()=>{}},r={};function o(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,o),s.exports}o.m=t,o.amdO={},e=[],o.O=(t,r,i,s)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,i,s]=e[d],a=!0,u=0;u<r.length;u++)(!1&s||n>=s)&&Object.keys(o.O).every((e=>o.O[e](r[u])))?r.splice(u--,1):(a=!1,s<n&&(n=s));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,i,s]},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={204:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var i,s,[n,a,u]=r,c=0;if(n.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(u)var d=u(o)}for(t&&t(r);c<n.length;c++)s=n[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},r=this.webpackChunkjswaku=this.webpackChunkjswaku||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=o.O(void 0,[216],(()=>o(3607)));return o.O(i)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFVbUIsRUFBYUMsR0FBVzFyQixFQUdoQjRGLEVBQUksRUFDM0IsR0FBRzBrQixFQUFTcUIsTUFBTXRtQixHQUFnQyxJQUF4QmdtQixFQUFnQmhtQixLQUFhLENBQ3RELElBQUkwa0IsS0FBWTBCLEVBQ1ozQixFQUFvQmlCLEVBQUVVLEVBQWExQixLQUNyQ0QsRUFBb0JLLEVBQUVKLEdBQVkwQixFQUFZMUIsSUFHaEQsR0FBRzJCLEVBQVMsSUFBSS9yQixFQUFTK3JCLEVBQVE1QixHQUdsQyxJQURHMEIsR0FBNEJBLEVBQTJCeHJCLEdBQ3JENEYsRUFBSTBrQixFQUFTandCLE9BQVF1TCxJQUN6QjBsQixFQUFVaEIsRUFBUzFrQixHQUNoQmtrQixFQUFvQmlCLEVBQUVNLEVBQWlCQyxJQUFZRCxFQUFnQkMsSUFDckVELEVBQWdCQyxHQUFTLEtBRTFCRCxFQUFnQkMsR0FBVyxFQUU1QixPQUFPeEIsRUFBb0JPLEVBQUUxcUIsSUFHMUJpc0IsRUFBcUJsMEIsS0FBeUIsbUJBQUlBLEtBQXlCLG9CQUFLLEdBQ3BGazBCLEVBQW1CcnJCLFFBQVFnckIsRUFBcUJ2WSxLQUFLLEtBQU0sSUFDM0Q0WSxFQUFtQm5yQixLQUFPOHFCLEVBQXFCdlksS0FBSyxLQUFNNFksRUFBbUJuckIsS0FBS3VTLEtBQUs0WSxLLEdDN0N2RixJQUFJQyxFQUFzQi9CLEVBQW9CTyxPQUFFcHhCLEVBQVcsQ0FBQyxNQUFNLElBQU82d0IsRUFBb0IsUSxPQUN2RUEsRUFBb0JPLEVBQUV3QixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanN3YWt1L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9qc3dha3Uvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL2xpYi9jcnlwdG8udHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL2xpYi9kaXNjb3ZlcnkvYm9vdHN0cmFwLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvZGlzY292ZXJ5L2Rucy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL2Rpc2NvdmVyeS9kbnNfb3Zlcl9odHRwcy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL2Rpc2NvdmVyeS9lbnJ0cmVlLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvZGlzY292ZXJ5L2ZldGNoX25vZGVzLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvZGlzY292ZXJ5L2luZGV4LnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvZGlzY292ZXJ5L3ByZWRlZmluZWQudHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL2xpYi9lbnIvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvZW5yL2Vuci50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL2Vuci9pbmRleC50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL2Vuci9rZXlwYWlyL2luZGV4LnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvZW5yL2tleXBhaXIvc2VjcDI1NmsxLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvZW5yL2tleXBhaXIvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL2xpYi9lbnIvbXVsdGlhZGRyc19jb2RlYy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL2Vuci92NC50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL2Vuci93YWt1Ml9jb2RlYy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL3NlbGVjdF9wZWVyLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL2xpYi93YWt1LnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9maWx0ZXIvZmlsdGVyX3JwYy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL3dha3VfZmlsdGVyL2luZGV4LnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9saWdodF9wdXNoL2luZGV4LnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9saWdodF9wdXNoL3B1c2hfcnBjLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9tZXNzYWdlL2VjaWVzLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9tZXNzYWdlL2luZGV4LnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9tZXNzYWdlL3N5bW1ldHJpYy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL3dha3VfbWVzc2FnZS92ZXJzaW9uXzEudHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL2xpYi93YWt1X3JlbGF5L2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL3dha3VfcmVsYXkvZ2V0X3JlbGF5X3BlZXJzLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9yZWxheS9pbmRleC50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL3dha3VfcmVsYXkvcmVsYXlfaGVhcnRiZWF0LnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9saWIvd2FrdV9zdG9yZS9oaXN0b3J5X3JwYy50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvbGliL3dha3Vfc3RvcmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL3Byb3RvL3dha3UvdjIvZmlsdGVyLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9wcm90by93YWt1L3YyL2xpZ2h0X3B1c2gudHMiLCJ3ZWJwYWNrOi8vanN3YWt1Ly4vc3JjL3Byb3RvL3dha3UvdjIvbWVzc2FnZS50cyIsIndlYnBhY2s6Ly9qc3dha3UvLi9zcmMvcHJvdG8vd2FrdS92Mi9zdG9yZS92MmJldGEzL3N0b3JlLnRzIiwid2VicGFjazovL2pzd2FrdS8uL3NyYy9wcm90by93YWt1L3YyL3N0b3JlL3YyYmV0YTQvc3RvcmUudHMiLCJ3ZWJwYWNrOi8vanN3YWt1L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2pzd2FrdS93ZWJwYWNrL3J1bnRpbWUvYW1kIG9wdGlvbnMiLCJ3ZWJwYWNrOi8vanN3YWt1L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9qc3dha3Uvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9qc3dha3Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9qc3dha3Uvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9qc3dha3Uvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vanN3YWt1L3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJqc3dha3VcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wianN3YWt1XCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiZXhwb3J0IHtcbiAgZ2VuZXJhdGVQcml2YXRlS2V5LFxuICBnZW5lcmF0ZVN5bW1ldHJpY0tleSxcbiAgZ2V0UHVibGljS2V5LFxufSBmcm9tIFwiLi9saWIvY3J5cHRvXCI7XG5cbmV4cG9ydCB7IGdldFByZWRlZmluZWRCb290c3RyYXBOb2RlcyB9IGZyb20gXCIuL2xpYi9kaXNjb3ZlcnlcIjtcbmV4cG9ydCAqIGFzIGRpc2NvdmVyeSBmcm9tIFwiLi9saWIvZGlzY292ZXJ5XCI7XG5cbmV4cG9ydCAqIGFzIGVuciBmcm9tIFwiLi9saWIvZW5yXCI7XG5cbmV4cG9ydCAqIGFzIHV0aWxzIGZyb20gXCIuL2xpYi91dGlsc1wiO1xuXG5leHBvcnQgKiBhcyB3YWt1IGZyb20gXCIuL2xpYi93YWt1XCI7XG5leHBvcnQgeyBXYWt1LCBEZWZhdWx0UHViU3ViVG9waWMsIFByb3RvY29scyB9IGZyb20gXCIuL2xpYi93YWt1XCI7XG5cbmV4cG9ydCAqIGFzIHdha3VfbWVzc2FnZSBmcm9tIFwiLi9saWIvd2FrdV9tZXNzYWdlXCI7XG5leHBvcnQgeyBXYWt1TWVzc2FnZSB9IGZyb20gXCIuL2xpYi93YWt1X21lc3NhZ2VcIjtcblxuZXhwb3J0ICogYXMgd2FrdV9saWdodF9wdXNoIGZyb20gXCIuL2xpYi93YWt1X2xpZ2h0X3B1c2hcIjtcbmV4cG9ydCB7XG4gIFdha3VMaWdodFB1c2gsXG4gIExpZ2h0UHVzaENvZGVjLFxuICBQdXNoUmVzcG9uc2UsXG59IGZyb20gXCIuL2xpYi93YWt1X2xpZ2h0X3B1c2hcIjtcblxuZXhwb3J0ICogYXMgd2FrdV9yZWxheSBmcm9tIFwiLi9saWIvd2FrdV9yZWxheVwiO1xuZXhwb3J0IHsgV2FrdVJlbGF5LCBSZWxheUNvZGVjcyB9IGZyb20gXCIuL2xpYi93YWt1X3JlbGF5XCI7XG5cbmV4cG9ydCAqIGFzIHdha3Vfc3RvcmUgZnJvbSBcIi4vbGliL3dha3Vfc3RvcmVcIjtcbmV4cG9ydCB7IFBhZ2VEaXJlY3Rpb24sIFdha3VTdG9yZSwgU3RvcmVDb2RlY3MgfSBmcm9tIFwiLi9saWIvd2FrdV9zdG9yZVwiO1xuIiwiaW1wb3J0IG5vZGVDcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuXG5pbXBvcnQgKiBhcyBzZWNwIGZyb20gXCJAbm9ibGUvc2VjcDI1NmsxXCI7XG5pbXBvcnQgKiBhcyBzaGEzIGZyb20gXCJqcy1zaGEzXCI7XG5pbXBvcnQgeyBjb25jYXQgfSBmcm9tIFwidWludDhhcnJheXMvY29uY2F0XCI7XG5cbmltcG9ydCAqIGFzIHN5bW1ldHJpYyBmcm9tIFwiLi93YWt1X21lc3NhZ2Uvc3ltbWV0cmljXCI7XG5pbXBvcnQgeyBQcml2YXRlS2V5U2l6ZSB9IGZyb20gXCIuL3dha3VfbWVzc2FnZS92ZXJzaW9uXzFcIjtcblxuZGVjbGFyZSBjb25zdCBzZWxmOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgdW5kZWZpbmVkO1xuY29uc3QgY3J5cHRvOiB7IG5vZGU/OiBhbnk7IHdlYj86IGFueSB9ID0ge1xuICBub2RlOiBub2RlQ3J5cHRvLFxuICB3ZWI6IHR5cGVvZiBzZWxmID09PSBcIm9iamVjdFwiICYmIFwiY3J5cHRvXCIgaW4gc2VsZiA/IHNlbGYuY3J5cHRvIDogdW5kZWZpbmVkLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnRsZSgpOiBTdWJ0bGVDcnlwdG8ge1xuICBpZiAoY3J5cHRvLndlYikge1xuICAgIHJldHVybiBjcnlwdG8ud2ViLnN1YnRsZTtcbiAgfSBlbHNlIGlmIChjcnlwdG8ubm9kZSkge1xuICAgIHJldHVybiBjcnlwdG8ubm9kZS53ZWJjcnlwdG8uc3VidGxlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiVGhlIGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSBDcnlwdG8gU3VidGxlIEFQSSAoaWYgaW4gdGhlIGJyb3dzZXIsIGJlIHN1cmUgdG8gdXNlIHRvIGJlIGluIGEgc2VjdXJlIGNvbnRleHQsIGllLCBodHRwcylcIlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJhbmRvbUJ5dGVzID0gc2VjcC51dGlscy5yYW5kb21CeXRlcztcbmV4cG9ydCBjb25zdCBzaGEyNTYgPSBzZWNwLnV0aWxzLnNoYTI1NjtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIG5ldyBwcml2YXRlIGtleSB0byBiZSB1c2VkIGZvciBhc3ltbWV0cmljIGVuY3J5cHRpb24uXG4gKlxuICogVXNlIHtAbGluayBnZXRQdWJsaWNLZXl9IHRvIGdldCB0aGUgY29ycmVzcG9uZGluZyBQdWJsaWMgS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVQcml2YXRlS2V5KCk6IFVpbnQ4QXJyYXkge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoUHJpdmF0ZUtleVNpemUpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgbmV3IHN5bW1ldHJpYyBrZXkgdG8gYmUgdXNlZCBmb3Igc3ltbWV0cmljIGVuY3J5cHRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVN5bW1ldHJpY0tleSgpOiBVaW50OEFycmF5IHtcbiAgcmV0dXJuIHJhbmRvbUJ5dGVzKHN5bW1ldHJpYy5LZXlTaXplKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHB1YmxpYyBrZXkgZm9yIHRoZSBnaXZlbiBwcml2YXRlIGtleSwgdG8gYmUgdXNlZCBmb3IgYXN5bW1ldHJpY1xuICogZW5jcnlwdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFB1YmxpY0tleSA9IHNlY3AuZ2V0UHVibGljS2V5O1xuXG4vKipcbiAqIEVDRFNBIFNpZ24gYSBtZXNzYWdlIHdpdGggdGhlIGdpdmVuIHByaXZhdGUga2V5LlxuICpcbiAqICBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBzaWduLCB1c3VhbGx5IGEgaGFzaC5cbiAqICBAcGFyYW0gcHJpdmF0ZUtleSBUaGUgRUNEU0EgcHJpdmF0ZSBrZXkgdG8gdXNlIHRvIHNpZ24gdGhlIG1lc3NhZ2UuXG4gKlxuICogIEByZXR1cm5zIFRoZSBzaWduYXR1cmUgYW5kIHRoZSByZWNvdmVyeSBpZCBjb25jYXRlbmF0ZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduKFxuICBtZXNzYWdlOiBVaW50OEFycmF5LFxuICBwcml2YXRlS2V5OiBVaW50OEFycmF5XG4pOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcbiAgY29uc3QgW3NpZ25hdHVyZSwgcmVjb3ZlcnlJZF0gPSBhd2FpdCBzZWNwLnNpZ24obWVzc2FnZSwgcHJpdmF0ZUtleSwge1xuICAgIHJlY292ZXJlZDogdHJ1ZSxcbiAgICBkZXI6IGZhbHNlLFxuICB9KTtcbiAgcmV0dXJuIGNvbmNhdChbc2lnbmF0dXJlLCBbcmVjb3ZlcnlJZF1dLCBzaWduYXR1cmUubGVuZ3RoICsgMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBrZWNjYWsyNTYoaW5wdXQ6IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHNoYTMua2VjY2FrMjU2LmFycmF5QnVmZmVyKGlucHV0KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wcmVzc1B1YmxpY0tleShwdWJsaWNLZXk6IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgaWYgKHB1YmxpY0tleS5sZW5ndGggPT09IDY0KSB7XG4gICAgcHVibGljS2V5ID0gY29uY2F0KFtbNF0sIHB1YmxpY0tleV0sIDY1KTtcbiAgfVxuICBjb25zdCBwb2ludCA9IHNlY3AuUG9pbnQuZnJvbUhleChwdWJsaWNLZXkpO1xuICByZXR1cm4gcG9pbnQudG9SYXdCeXRlcyh0cnVlKTtcbn1cblxuLyoqXG4gKiBWZXJpZnkgYW4gRUNEU0Egc2lnbmF0dXJlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5U2lnbmF0dXJlKFxuICBzaWduYXR1cmU6IFVpbnQ4QXJyYXksXG4gIG1lc3NhZ2U6IFVpbnQ4QXJyYXkgfCBzdHJpbmcsXG4gIHB1YmxpY0tleTogVWludDhBcnJheVxuKTogYm9vbGVhbiB7XG4gIHRyeSB7XG4gICAgY29uc3QgX3NpZ25hdHVyZSA9IHNlY3AuU2lnbmF0dXJlLmZyb21Db21wYWN0KHNpZ25hdHVyZS5zbGljZSgwLCA2NCkpO1xuICAgIHJldHVybiBzZWNwLnZlcmlmeShfc2lnbmF0dXJlLCBtZXNzYWdlLCBwdWJsaWNLZXkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsImltcG9ydCBkZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCB7IE11bHRpYWRkciB9IGZyb20gXCJtdWx0aWFkZHJcIjtcblxuaW1wb3J0IHsgRG5zTm9kZURpc2NvdmVyeSwgTm9kZUNhcGFiaWxpdHlDb3VudCB9IGZyb20gXCIuL2Ruc1wiO1xuXG5pbXBvcnQgeyBnZXRQcmVkZWZpbmVkQm9vdHN0cmFwTm9kZXMsIGdldFBzZXVkb1JhbmRvbVN1YnNldCB9IGZyb20gXCIuL2luZGV4XCI7XG5cbmNvbnN0IGRiZyA9IGRlYnVnKFwid2FrdTpkaXNjb3Zlcnk6Ym9vdHN0cmFwXCIpO1xuXG4vKipcbiAqIFNldHVwIGRpc2NvdmVyeSBtZXRob2QgdXNlZCB0byBib290c3RyYXAuXG4gKlxuICogT25seSBvbmUgbWV0aG9kIGlzIHVzZWQuIFtbZGVmYXVsdF1dLCBbW3BlZXJzXV0sIFtbZ2V0UGVlcnNdXSBhbmQgW1tlbnJVcmxdXSBvcHRpb25zIGFyZSBtdXR1YWxseSBleGNsdXNpdmUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQm9vdHN0cmFwT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBvZiBwZWVycyB0byBjb25uZWN0IHRvIGFzIHBhcnQgb2YgdGhlIGJvb3RzdHJhcCBwcm9jZXNzLlxuICAgKiBUaGlzIG9ubHkgYXBwbGllcyBpZiBbW3BlZXJzXV0gb3IgW1tnZXRQZWVyc11dIGlzIHVzZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IFtbQm9vdHN0cmFwLkRlZmF1bHRNYXhQZWVyc11dXG4gICAqL1xuICBtYXhQZWVycz86IG51bWJlcjtcbiAgLyoqXG4gICAqIFVzZSB0aGUgZGVmYXVsdCBkaXNjb3ZlcnkgbWV0aG9kLiBPdmVycmlkZXMgYWxsIG90aGVyIG9wdGlvbnMgYnV0IGBtYXhQZWVyc2BcbiAgICpcbiAgICogVGhlIGRlZmF1bHQgZGlzY292ZXJ5IG1ldGhvZCBpcyBsaWtlbHkgdG8gY2hhbmdlIG92ZXJ0aW1lIGFzIG5ldyBkaXNjb3ZlcnlcbiAgICogbWV0aG9kcyBhcmUgaW1wbGVtZW50ZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBkZWZhdWx0PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIE11bHRpYWRkcnMgb2YgcGVlcnMgdG8gY29ubmVjdCB0by5cbiAgICovXG4gIHBlZXJzPzogc3RyaW5nW10gfCBNdWx0aWFkZHJbXTtcbiAgLyoqXG4gICAqIEdldHRlciB0aGF0IHJldHJpZXZlIG11bHRpYWRkcnMgb2YgcGVlcnMgdG8gY29ubmVjdCB0by5cbiAgICovXG4gIGdldFBlZXJzPzogKCkgPT4gUHJvbWlzZTxzdHJpbmdbXSB8IE11bHRpYWRkcltdPjtcbiAgLyoqXG4gICAqIEFuIEVJUC0xNDU5IEVOUiBUcmVlIFVSTC4gRm9yIGV4YW1wbGU6XG4gICAqIFwiZW5ydHJlZTovL0FPRlRJQ1UyWFdEVUxOTFpHUk1RUzRSSVpQQVpFSFlNVjRGWUhBUFc1NjNITlJBT0VSUDdDQHRlc3Qubm9kZXMudmFjLmRldlwiXG4gICAqXG4gICAqIFtbd2FudGVkTm9kZUNhcGFiaWxpdHlDb3VudF1dIE1VU1QgYmUgcGFzc2VkIHdoZW4gdXNpbmcgdGhpcyBvcHRpb24uXG4gICAqL1xuICBlbnJVcmw/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgd2hhdCBub2RlIGNhcGFiaWxpdGllcyAocHJvdG9jb2wpIG11c3QgYmUgcmV0dXJuZWQuXG4gICAqIFRoaXMgb25seSBhcHBsaWVzIHdoZW4gW1tlbnJVcmxdXSBpcyBwYXNzZWQgKEVJUC0xNDU5IEROUyBEaXNjb3ZlcnkpLlxuICAgKi9cbiAgd2FudGVkTm9kZUNhcGFiaWxpdHlDb3VudD86IFBhcnRpYWw8Tm9kZUNhcGFiaWxpdHlDb3VudD47XG59XG5cbi8qKlxuICogUGFyc2Ugb3B0aW9ucyBhbmQgZXhwb3NlIGZ1bmN0aW9uIHRvIHJldHVybiBib290c3RyYXAgcGVlciBhZGRyZXNzZXMuXG4gKlxuICogQHRocm93cyBpZiBhbiBpbnZhbGlkIGNvbWJpbmF0aW9uIG9mIG9wdGlvbnMgaXMgcGFzc2VkLCBzZWUgW1tCb290c3RyYXBPcHRpb25zXV0gZm9yIGRldGFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCb290c3RyYXAge1xuICBwdWJsaWMgc3RhdGljIERlZmF1bHRNYXhQZWVycyA9IDE7XG5cbiAgcHVibGljIHJlYWRvbmx5IGdldEJvb3RzdHJhcFBlZXJzOiAoKCkgPT4gUHJvbWlzZTxNdWx0aWFkZHJbXT4pIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKG9wdHM6IEJvb3RzdHJhcE9wdGlvbnMpIHtcbiAgICBjb25zdCBtYXhQZWVycyA9IG9wdHMubWF4UGVlcnMgPz8gQm9vdHN0cmFwLkRlZmF1bHRNYXhQZWVycztcblxuICAgIGlmIChvcHRzLmRlZmF1bHQpIHtcbiAgICAgIGRiZyhcIlVzZSBob3N0ZWQgbGlzdCBvZiBwZWVycy5cIik7XG5cbiAgICAgIHRoaXMuZ2V0Qm9vdHN0cmFwUGVlcnMgPSAoKTogUHJvbWlzZTxNdWx0aWFkZHJbXT4gPT4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICAgIGdldFByZWRlZmluZWRCb290c3RyYXBOb2Rlcyh1bmRlZmluZWQsIG1heFBlZXJzKVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKG9wdHMucGVlcnMgIT09IHVuZGVmaW5lZCAmJiBvcHRzLnBlZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGFsbFBlZXJzOiBNdWx0aWFkZHJbXSA9IG9wdHMucGVlcnMubWFwKFxuICAgICAgICAobm9kZTogc3RyaW5nIHwgTXVsdGlhZGRyKSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBub2RlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE11bHRpYWRkcihub2RlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgY29uc3QgcGVlcnMgPSBnZXRQc2V1ZG9SYW5kb21TdWJzZXQoYWxsUGVlcnMsIG1heFBlZXJzKTtcbiAgICAgIGRiZyhcbiAgICAgICAgXCJVc2UgcHJvdmlkZWQgbGlzdCBvZiBwZWVycyAocmVkdWNlZCB0byBtYXhQZWVycylcIixcbiAgICAgICAgYWxsUGVlcnMubWFwKChtYSkgPT4gbWEudG9TdHJpbmcoKSlcbiAgICAgICk7XG4gICAgICB0aGlzLmdldEJvb3RzdHJhcFBlZXJzID0gKCk6IFByb21pc2U8TXVsdGlhZGRyW10+ID0+XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShwZWVycyk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0cy5nZXRQZWVycyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBkYmcoXCJCb290c3RyYXA6IFVzZSBwcm92aWRlZCBnZXRQZWVycyBmdW5jdGlvbi5cIik7XG4gICAgICBjb25zdCBnZXRQZWVycyA9IG9wdHMuZ2V0UGVlcnM7XG5cbiAgICAgIHRoaXMuZ2V0Qm9vdHN0cmFwUGVlcnMgPSBhc3luYyAoKTogUHJvbWlzZTxNdWx0aWFkZHJbXT4gPT4ge1xuICAgICAgICBjb25zdCBhbGxQZWVycyA9IGF3YWl0IGdldFBlZXJzKCk7XG4gICAgICAgIHJldHVybiBnZXRQc2V1ZG9SYW5kb21TdWJzZXQ8c3RyaW5nIHwgTXVsdGlhZGRyPihcbiAgICAgICAgICBhbGxQZWVycyxcbiAgICAgICAgICBtYXhQZWVyc1xuICAgICAgICApLm1hcCgobm9kZSkgPT4gbmV3IE11bHRpYWRkcihub2RlKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAob3B0cy5lbnJVcmwpIHtcbiAgICAgIGNvbnN0IHdhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnQgPSBvcHRzLndhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnQ7XG4gICAgICBpZiAoIXdhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnQpXG4gICAgICAgIHRocm93IFwiYHdhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnRgIG11c3QgYmUgZGVmaW5lZCB3aGVuIHVzaW5nIGBlbnJVcmxgXCI7XG4gICAgICBjb25zdCBlbnJVcmwgPSBvcHRzLmVuclVybDtcbiAgICAgIGRiZyhcIlVzZSBwcm92aWRlZCBFSVAtMTQ1OSBFTlIgVHJlZSBVUkwuXCIpO1xuXG4gICAgICBjb25zdCBkbnMgPSBEbnNOb2RlRGlzY292ZXJ5LmRuc092ZXJIdHRwKCk7XG5cbiAgICAgIHRoaXMuZ2V0Qm9vdHN0cmFwUGVlcnMgPSBhc3luYyAoKTogUHJvbWlzZTxNdWx0aWFkZHJbXT4gPT4ge1xuICAgICAgICBjb25zdCBlbnJzID0gYXdhaXQgZG5zLmdldFBlZXJzKFtlbnJVcmxdLCB3YW50ZWROb2RlQ2FwYWJpbGl0eUNvdW50KTtcbiAgICAgICAgZGJnKGBGb3VuZCAke2VucnMubGVuZ3RofSBwZWVyc2ApO1xuICAgICAgICByZXR1cm4gZW5ycy5tYXAoKGVucikgPT4gZW5yLmdldEZ1bGxNdWx0aWFkZHJzKCkpLmZsYXQoKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRiZyhcIk5vIGJvb3RzdHJhcCBtZXRob2Qgc3BlY2lmaWVkLCBubyBwZWVyIHdpbGwgYmUgcmV0dXJuZWRcIik7XG4gICAgICB0aGlzLmdldEJvb3RzdHJhcFBlZXJzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgZGVidWcgfSBmcm9tIFwiZGVidWdcIjtcblxuaW1wb3J0IHsgRU5SIH0gZnJvbSBcIi4uL2VuclwiO1xuXG5pbXBvcnQgeyBEbnNPdmVySHR0cHMsIEVuZHBvaW50cyB9IGZyb20gXCIuL2Ruc19vdmVyX2h0dHBzXCI7XG5pbXBvcnQgeyBFTlJUcmVlIH0gZnJvbSBcIi4vZW5ydHJlZVwiO1xuaW1wb3J0IGZldGNoTm9kZXNVbnRpbENhcGFiaWxpdGllc0Z1bGZpbGxlZCBmcm9tIFwiLi9mZXRjaF9ub2Rlc1wiO1xuXG5jb25zdCBkYmcgPSBkZWJ1ZyhcIndha3U6ZGlzY292ZXJ5OmRuc1wiKTtcblxuZXhwb3J0IHR5cGUgU2VhcmNoQ29udGV4dCA9IHtcbiAgZG9tYWluOiBzdHJpbmc7XG4gIHB1YmxpY0tleTogc3RyaW5nO1xuICB2aXNpdHM6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9O1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBEbnNDbGllbnQge1xuICByZXNvbHZlVFhUOiAoZG9tYWluOiBzdHJpbmcpID0+IFByb21pc2U8c3RyaW5nW10+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVDYXBhYmlsaXR5Q291bnQge1xuICByZWxheTogbnVtYmVyO1xuICBzdG9yZTogbnVtYmVyO1xuICBmaWx0ZXI6IG51bWJlcjtcbiAgbGlnaHRQdXNoOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBEbnNOb2RlRGlzY292ZXJ5IHtcbiAgcHJpdmF0ZSByZWFkb25seSBkbnM6IERuc0NsaWVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfRE5TVHJlZUNhY2hlOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICBwcml2YXRlIHJlYWRvbmx5IF9lcnJvclRvbGVyYW5jZTogbnVtYmVyID0gMTA7XG5cbiAgcHVibGljIHN0YXRpYyBkbnNPdmVySHR0cChlbmRwb2ludHM/OiBFbmRwb2ludHMpOiBEbnNOb2RlRGlzY292ZXJ5IHtcbiAgICBjb25zdCBkbnNDbGllbnQgPSBuZXcgRG5zT3Zlckh0dHBzKGVuZHBvaW50cyk7XG4gICAgcmV0dXJuIG5ldyBEbnNOb2RlRGlzY292ZXJ5KGRuc0NsaWVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgdmVyaWZpZWQgcGVlcnMgbGlzdGVkIGluIGFuIEVJUC0xNDU5IEROUyB0cmVlLiBNZXRob2QgbWF5XG4gICAqIHJldHVybiBmZXdlciBwZWVycyB0aGFuIHJlcXVlc3RlZCBpZiBbW3dhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnRdXSByZXF1aXJlc1xuICAgKiBsYXJnZXIgcXVhbnRpdHkgb2YgcGVlcnMgdGhhbiBhdmFpbGFibGUgb3IgdGhlIG51bWJlciBvZiBlcnJvcnMvZHVwbGljYXRlXG4gICAqIHBlZXJzIGVuY291bnRlcmVkIGJ5IHJhbmRvbWl6ZWQgc2VhcmNoIGV4Y2VlZHMgdGhlIHN1bSBvZiB0aGUgZmllbGRzIG9mXG4gICAqIFtbd2FudGVkTm9kZUNhcGFiaWxpdHlDb3VudF1dIHBsdXMgdGhlIFtbX2Vycm9yVG9sZXJhbmNlXV0gZmFjdG9yLlxuICAgKi9cbiAgYXN5bmMgZ2V0UGVlcnMoXG4gICAgZW5yVHJlZVVybHM6IHN0cmluZ1tdLFxuICAgIHdhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnQ6IFBhcnRpYWw8Tm9kZUNhcGFiaWxpdHlDb3VudD5cbiAgKTogUHJvbWlzZTxFTlJbXT4ge1xuICAgIGNvbnN0IG5ldHdvcmtJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVuclRyZWVVcmxzLmxlbmd0aCk7XG4gICAgY29uc3QgeyBwdWJsaWNLZXksIGRvbWFpbiB9ID0gRU5SVHJlZS5wYXJzZVRyZWUoZW5yVHJlZVVybHNbbmV0d29ya0luZGV4XSk7XG4gICAgY29uc3QgY29udGV4dDogU2VhcmNoQ29udGV4dCA9IHtcbiAgICAgIGRvbWFpbixcbiAgICAgIHB1YmxpY0tleSxcbiAgICAgIHZpc2l0czoge30sXG4gICAgfTtcblxuICAgIGNvbnN0IHBlZXJzID0gYXdhaXQgZmV0Y2hOb2Rlc1VudGlsQ2FwYWJpbGl0aWVzRnVsZmlsbGVkKFxuICAgICAgd2FudGVkTm9kZUNhcGFiaWxpdHlDb3VudCxcbiAgICAgIHRoaXMuX2Vycm9yVG9sZXJhbmNlLFxuICAgICAgKCkgPT4gdGhpcy5fc2VhcmNoKGRvbWFpbiwgY29udGV4dClcbiAgICApO1xuICAgIGRiZyhcInJldHJpZXZlZCBwZWVyczogXCIsIHBlZXJzKTtcbiAgICByZXR1cm4gcGVlcnM7XG4gIH1cblxuICBwdWJsaWMgY29uc3RydWN0b3IoZG5zOiBEbnNDbGllbnQpIHtcbiAgICB0aGlzLl9ETlNUcmVlQ2FjaGUgPSB7fTtcbiAgICB0aGlzLmRucyA9IGRucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIGEgcmVjdXJzaXZlLCByYW5kb21pemVkIGRlc2NlbnQgb2YgdGhlIEROUyB0cmVlIHRvIHJldHJpZXZlIGEgc2luZ2xlXG4gICAqIEVOUiByZWNvcmQgYXMgYW4gRU5SLiBSZXR1cm5zIG51bGwgaWYgcGFyc2luZyBvciBETlMgcmVzb2x1dGlvbiBmYWlscy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgX3NlYXJjaChcbiAgICBzdWJkb21haW46IHN0cmluZyxcbiAgICBjb250ZXh0OiBTZWFyY2hDb250ZXh0XG4gICk6IFByb21pc2U8RU5SIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHRoaXMuX2dldFRYVFJlY29yZChzdWJkb21haW4sIGNvbnRleHQpO1xuICAgICAgY29udGV4dC52aXNpdHNbc3ViZG9tYWluXSA9IHRydWU7XG5cbiAgICAgIGxldCBuZXh0OiBzdHJpbmc7XG4gICAgICBsZXQgYnJhbmNoZXM6IHN0cmluZ1tdO1xuXG4gICAgICBjb25zdCBlbnRyeVR5cGUgPSBnZXRFbnRyeVR5cGUoZW50cnkpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3dpdGNoIChlbnRyeVR5cGUpIHtcbiAgICAgICAgICBjYXNlIEVOUlRyZWUuUk9PVF9QUkVGSVg6XG4gICAgICAgICAgICBuZXh0ID0gRU5SVHJlZS5wYXJzZUFuZFZlcmlmeVJvb3QoZW50cnksIGNvbnRleHQucHVibGljS2V5KTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9zZWFyY2gobmV4dCwgY29udGV4dCk7XG4gICAgICAgICAgY2FzZSBFTlJUcmVlLkJSQU5DSF9QUkVGSVg6XG4gICAgICAgICAgICBicmFuY2hlcyA9IEVOUlRyZWUucGFyc2VCcmFuY2goZW50cnkpO1xuICAgICAgICAgICAgbmV4dCA9IHNlbGVjdFJhbmRvbVBhdGgoYnJhbmNoZXMsIGNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3NlYXJjaChuZXh0LCBjb250ZXh0KTtcbiAgICAgICAgICBjYXNlIEVOUlRyZWUuUkVDT1JEX1BSRUZJWDpcbiAgICAgICAgICAgIHJldHVybiBFTlIuZGVjb2RlVHh0KGVudHJ5KTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRiZyhcbiAgICAgICAgICBgRmFpbGVkIHRvIHNlYXJjaCBETlMgdHJlZSAke2VudHJ5VHlwZX0gYXQgc3ViZG9tYWluICR7c3ViZG9tYWlufTogJHtlcnJvcn1gXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkYmcoYEZhaWxlZCB0byByZXRyaWV2ZSBUWFQgcmVjb3JkIGF0IHN1YmRvbWFpbiAke3N1YmRvbWFpbn06ICR7ZXJyb3J9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBUWFQgcmVjb3JkIHN0b3JlZCBhdCBhIGxvY2F0aW9uIGZyb20gZWl0aGVyXG4gICAqIHRoaXMgRE5TIHRyZWUgY2FjaGUgb3IgdmlhIEROUyBxdWVyeS5cbiAgICpcbiAgICogQHRocm93cyBpZiB0aGUgVFhUIFJlY29yZCBjb250YWlucyBub24tVVRGLTggdmFsdWVzLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0VFhUUmVjb3JkKFxuICAgIHN1YmRvbWFpbjogc3RyaW5nLFxuICAgIGNvbnRleHQ6IFNlYXJjaENvbnRleHRcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5fRE5TVHJlZUNhY2hlW3N1YmRvbWFpbl0pIHtcbiAgICAgIHJldHVybiB0aGlzLl9ETlNUcmVlQ2FjaGVbc3ViZG9tYWluXTtcbiAgICB9XG5cbiAgICAvLyBMb2NhdGlvbiBpcyBlaXRoZXIgdGhlIHRvcCBsZXZlbCB0cmVlIGVudHJ5IGhvc3Qgb3IgYSBzdWJkb21haW4gb2YgaXQuXG4gICAgY29uc3QgbG9jYXRpb24gPVxuICAgICAgc3ViZG9tYWluICE9PSBjb250ZXh0LmRvbWFpblxuICAgICAgICA/IGAke3N1YmRvbWFpbn0uJHtjb250ZXh0LmRvbWFpbn1gXG4gICAgICAgIDogY29udGV4dC5kb21haW47XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZG5zLnJlc29sdmVUWFQobG9jYXRpb24pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5sZW5ndGgpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWNlaXZlZCBlbXB0eSByZXN1bHQgYXJyYXkgd2hpbGUgZmV0Y2hpbmcgVFhUIHJlY29yZFwiKTtcbiAgICBpZiAoIXJlc3BvbnNlWzBdLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiUmVjZWl2ZWQgZW1wdHkgVFhUIHJlY29yZFwiKTtcblxuICAgIC8vIEJyYW5jaCBlbnRyaWVzIGNhbiBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIG9mIGNvbW1hIGRlbGltaXRlZCBzdWJkb21haW5zLCB3aXRoXG4gICAgLy8gc29tZSBzdWJkb21haW4gc3RyaW5ncyBzcGxpdCBhY3Jvc3MgdGhlIGFycmF5IGVsZW1lbnRzXG4gICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2Uuam9pbihcIlwiKTtcblxuICAgIHRoaXMuX0ROU1RyZWVDYWNoZVtzdWJkb21haW5dID0gcmVzdWx0O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RW50cnlUeXBlKGVudHJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoZW50cnkuc3RhcnRzV2l0aChFTlJUcmVlLlJPT1RfUFJFRklYKSkgcmV0dXJuIEVOUlRyZWUuUk9PVF9QUkVGSVg7XG4gIGlmIChlbnRyeS5zdGFydHNXaXRoKEVOUlRyZWUuQlJBTkNIX1BSRUZJWCkpIHJldHVybiBFTlJUcmVlLkJSQU5DSF9QUkVGSVg7XG4gIGlmIChlbnRyeS5zdGFydHNXaXRoKEVOUlRyZWUuUkVDT1JEX1BSRUZJWCkpIHJldHVybiBFTlJUcmVlLlJFQ09SRF9QUkVGSVg7XG5cbiAgcmV0dXJuIFwiXCI7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHJhbmRvbWx5IHNlbGVjdGVkIHN1YmRvbWFpbiBzdHJpbmcgZnJvbSB0aGUgbGlzdCBwcm92aWRlZCBieSBhIGJyYW5jaFxuICogZW50cnkgcmVjb3JkLlxuICpcbiAqIFRoZSBjbGllbnQgbXVzdCB0cmFjayBzdWJkb21haW5zIHdoaWNoIGFyZSBhbHJlYWR5IHJlc29sdmVkIHRvIGF2b2lkXG4gKiBnb2luZyBpbnRvIGFuIGluZmluaXRlIGxvb3AgYi9jIGJyYW5jaCBlbnRyaWVzIGNhbiBjb250YWluXG4gKiBjaXJjdWxhciByZWZlcmVuY2VzLiBJdOKAmXMgaW4gdGhlIGNsaWVudOKAmXMgYmVzdCBpbnRlcmVzdCB0byB0cmF2ZXJzZSB0aGVcbiAqIHRyZWUgaW4gcmFuZG9tIG9yZGVyLlxuICovXG5mdW5jdGlvbiBzZWxlY3RSYW5kb21QYXRoKGJyYW5jaGVzOiBzdHJpbmdbXSwgY29udGV4dDogU2VhcmNoQ29udGV4dCk6IHN0cmluZyB7XG4gIC8vIElkZW50aWZ5IGRvbWFpbnMgYWxyZWFkeSB2aXNpdGVkIGluIHRoaXMgdHJhdmVyc2FsIG9mIHRoZSBETlMgdHJlZS5cbiAgLy8gVGhlbiBmaWx0ZXIgYWdhaW5zdCB0aGVtIHRvIHByZXZlbnQgY3ljbGVzLlxuICBjb25zdCBjaXJjdWxhclJlZnM6IHsgW2tleTogbnVtYmVyXTogYm9vbGVhbiB9ID0ge307XG4gIGZvciAoY29uc3QgW2lkeCwgc3ViZG9tYWluXSBvZiBicmFuY2hlcy5lbnRyaWVzKCkpIHtcbiAgICBpZiAoY29udGV4dC52aXNpdHNbc3ViZG9tYWluXSkge1xuICAgICAgY2lyY3VsYXJSZWZzW2lkeF0gPSB0cnVlO1xuICAgIH1cbiAgfVxuICAvLyBJZiBhbGwgcG9zc2libGUgcGF0aHMgYXJlIGNpcmN1bGFyLi4uXG4gIGlmIChPYmplY3Qua2V5cyhjaXJjdWxhclJlZnMpLmxlbmd0aCA9PT0gYnJhbmNoZXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZXNvbHZhYmxlIGNpcmN1bGFyIHBhdGggZGV0ZWN0ZWRcIik7XG4gIH1cblxuICAvLyBSYW5kb21seSBzZWxlY3QgYSB2aWFibGUgcGF0aFxuICBsZXQgaW5kZXg7XG4gIGRvIHtcbiAgICBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJyYW5jaGVzLmxlbmd0aCk7XG4gIH0gd2hpbGUgKGNpcmN1bGFyUmVmc1tpbmRleF0pO1xuXG4gIHJldHVybiBicmFuY2hlc1tpbmRleF07XG59XG4iLCJpbXBvcnQgeyBUeHRBbnN3ZXIgfSBmcm9tIFwiZG5zLXBhY2tldFwiO1xuaW1wb3J0IHtcbiAgZW5kcG9pbnRzIGFzIGRlZmF1bHRFbmRwb2ludHMsXG4gIEVuZHBvaW50LFxuICBFbmRwb2ludFByb3BzLFxuICBxdWVyeSxcbn0gZnJvbSBcImRucy1xdWVyeVwiO1xuXG5pbXBvcnQgeyBieXRlc1RvVXRmOCB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbXBvcnQgeyBEbnNDbGllbnQgfSBmcm9tIFwiLi9kbnNcIjtcblxuY29uc3QgeyBjbG91ZGZsYXJlLCBnb29nbGUsIG9wZW5kbnMgfSA9IGRlZmF1bHRFbmRwb2ludHM7XG5cbmV4cG9ydCB0eXBlIEVuZHBvaW50cyA9XG4gIHwgXCJkb2hcIlxuICB8IFwiZG5zXCJcbiAgfCBJdGVyYWJsZTxFbmRwb2ludCB8IEVuZHBvaW50UHJvcHMgfCBzdHJpbmc+O1xuXG5leHBvcnQgY2xhc3MgRG5zT3Zlckh0dHBzIGltcGxlbWVudHMgRG5zQ2xpZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBuZXcgRG5zLU92ZXItSHR0cCBETlMgY2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gZW5kcG9pbnRzIFRoZSBlbmRwb2ludHMgZm9yIERucy1PdmVyLUh0dHBzIHF1ZXJpZXMuXG4gICAqIFNlZSBbZG5zLXF1ZXJ5XShodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9kbnMtcXVlcnkpIGZvciBkZXRhaWxzLlxuICAgKiBEZWZhdWx0cyB0byBjbG91ZGZsYXJlLCBnb29nbGUgYW5kIG9wZW5kbnMuXG4gICAqXG4gICAqIEB0aHJvd3Mge2NvZGU6IHN0cmluZ30gSWYgRE5TIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBlbmRwb2ludHM6IEVuZHBvaW50cyA9IFtjbG91ZGZsYXJlLCBnb29nbGUsIG9wZW5kbnNdXG4gICkge31cblxuICAvKipcbiAgICogUmVzb2x2ZXMgYSBUWFQgcmVjb3JkXG4gICAqXG4gICAqIEBwYXJhbSBkb21haW4gVGhlIGRvbWFpbiBuYW1lXG4gICAqXG4gICAqIEB0aHJvd3MgaWYgdGhlIHJlc3VsdCBpcyBwcm92aWRlZCBpbiBieXRlIGZvcm0gd2hpY2ggY2Fubm90IGJlIGRlY29kZWRcbiAgICogdG8gVVRGLThcbiAgICovXG4gIGFzeW5jIHJlc29sdmVUWFQoZG9tYWluOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBxdWVyeSh7XG4gICAgICBxdWVzdGlvbnM6IFt7IHR5cGU6IFwiVFhUXCIsIG5hbWU6IGRvbWFpbiB9XSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGFuc3dlcnMgPSByZXNwb25zZS5hbnN3ZXJzIGFzIFR4dEFuc3dlcltdO1xuXG4gICAgY29uc3QgZGF0YSA9IGFuc3dlcnMubWFwKChhKSA9PiBhLmRhdGEpO1xuXG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZGF0YS5mb3JFYWNoKChkKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goZCk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZCkpIHtcbiAgICAgICAgZC5mb3JFYWNoKChzZCkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2Ygc2QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goYnl0ZXNUb1V0Zjgoc2QpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnB1c2goYnl0ZXNUb1V0ZjgoZCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgYmFzZTMyIGZyb20gXCJoaS1iYXNlMzJcIjtcbmltcG9ydCB7IGZyb21TdHJpbmcgfSBmcm9tIFwidWludDhhcnJheXMvZnJvbS1zdHJpbmdcIjtcblxuaW1wb3J0IHsga2VjY2FrMjU2LCB2ZXJpZnlTaWduYXR1cmUgfSBmcm9tIFwiLi4vY3J5cHRvXCI7XG5pbXBvcnQgeyBFTlIgfSBmcm9tIFwiLi4vZW5yXCI7XG5pbXBvcnQgeyB1dGY4VG9CeXRlcyB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5leHBvcnQgdHlwZSBFTlJSb290VmFsdWVzID0ge1xuICBlUm9vdDogc3RyaW5nO1xuICBsUm9vdDogc3RyaW5nO1xuICBzZXE6IG51bWJlcjtcbiAgc2lnbmF0dXJlOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBFTlJUcmVlVmFsdWVzID0ge1xuICBwdWJsaWNLZXk6IHN0cmluZztcbiAgZG9tYWluOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY2xhc3MgRU5SVHJlZSB7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUkVDT1JEX1BSRUZJWCA9IEVOUi5SRUNPUkRfUFJFRklYO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFRSRUVfUFJFRklYID0gXCJlbnJ0cmVlOlwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEJSQU5DSF9QUkVGSVggPSBcImVucnRyZWUtYnJhbmNoOlwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJPT1RfUFJFRklYID0gXCJlbnJ0cmVlLXJvb3Q6XCI7XG5cbiAgLyoqXG4gICAqIEV4dHJhY3RzIHRoZSBicmFuY2ggc3ViZG9tYWluIHJlZmVyZW5jZWQgYnkgYSBETlMgdHJlZSByb290IHN0cmluZyBhZnRlciB2ZXJpZnlpbmdcbiAgICogdGhlIHJvb3QgcmVjb3JkIHNpZ25hdHVyZSB3aXRoIGl0cyBiYXNlMzIgY29tcHJlc3NlZCBwdWJsaWMga2V5LlxuICAgKi9cbiAgc3RhdGljIHBhcnNlQW5kVmVyaWZ5Um9vdChyb290OiBzdHJpbmcsIHB1YmxpY0tleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXJvb3Quc3RhcnRzV2l0aCh0aGlzLlJPT1RfUFJFRklYKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEVOUlRyZWUgcm9vdCBlbnRyeSBtdXN0IHN0YXJ0IHdpdGggJyR7dGhpcy5ST09UX1BSRUZJWH0nYFxuICAgICAgKTtcblxuICAgIGNvbnN0IHJvb3RWYWx1ZXMgPSBFTlJUcmVlLnBhcnNlUm9vdFZhbHVlcyhyb290KTtcbiAgICBjb25zdCBkZWNvZGVkUHVibGljS2V5ID0gYmFzZTMyLmRlY29kZS5hc0J5dGVzKHB1YmxpY0tleSk7XG5cbiAgICAvLyBUaGUgc2lnbmF0dXJlIGlzIGEgNjUtYnl0ZSBzZWNwMjU2azEgb3ZlciB0aGUga2VjY2FrMjU2IGhhc2hcbiAgICAvLyBvZiB0aGUgcmVjb3JkIGNvbnRlbnQsIGV4Y2x1ZGluZyB0aGUgYHNpZz1gIHBhcnQsIGVuY29kZWQgYXMgVVJMLXNhZmUgYmFzZTY0IHN0cmluZ1xuICAgIC8vIChUcmFpbGluZyByZWNvdmVyeSBiaXQgbXVzdCBiZSB0cmltbWVkIHRvIHBhc3MgYGVjZHNhVmVyaWZ5YCBtZXRob2QpXG4gICAgY29uc3Qgc2lnbmVkQ29tcG9uZW50ID0gcm9vdC5zcGxpdChcIiBzaWdcIilbMF07XG4gICAgY29uc3Qgc2lnbmVkQ29tcG9uZW50QnVmZmVyID0gdXRmOFRvQnl0ZXMoc2lnbmVkQ29tcG9uZW50KTtcbiAgICBjb25zdCBzaWduYXR1cmVCdWZmZXIgPSBmcm9tU3RyaW5nKHJvb3RWYWx1ZXMuc2lnbmF0dXJlLCBcImJhc2U2NHVybFwiKS5zbGljZShcbiAgICAgIDAsXG4gICAgICA2NFxuICAgICk7XG5cbiAgICBjb25zdCBpc1ZlcmlmaWVkID0gdmVyaWZ5U2lnbmF0dXJlKFxuICAgICAgc2lnbmF0dXJlQnVmZmVyLFxuICAgICAga2VjY2FrMjU2KHNpZ25lZENvbXBvbmVudEJ1ZmZlciksXG4gICAgICBuZXcgVWludDhBcnJheShkZWNvZGVkUHVibGljS2V5KVxuICAgICk7XG5cbiAgICBpZiAoIWlzVmVyaWZpZWQpIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byB2ZXJpZnkgRU5SVHJlZSByb290IHNpZ25hdHVyZVwiKTtcblxuICAgIHJldHVybiByb290VmFsdWVzLmVSb290O1xuICB9XG5cbiAgc3RhdGljIHBhcnNlUm9vdFZhbHVlcyh0eHQ6IHN0cmluZyk6IEVOUlJvb3RWYWx1ZXMge1xuICAgIGNvbnN0IG1hdGNoZXMgPSB0eHQubWF0Y2goXG4gICAgICAvXmVucnRyZWUtcm9vdDp2MSBlPShbXiBdKykgbD0oW14gXSspIHNlcT0oXFxkKykgc2lnPShbXiBdKykkL1xuICAgICk7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWF0Y2hlcykpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgcGFyc2UgRU5SVHJlZSByb290IGVudHJ5XCIpO1xuXG4gICAgbWF0Y2hlcy5zaGlmdCgpOyAvLyBUaGUgZmlyc3QgZW50cnkgaXMgdGhlIGZ1bGwgbWF0Y2hcbiAgICBjb25zdCBbZVJvb3QsIGxSb290LCBzZXEsIHNpZ25hdHVyZV0gPSBtYXRjaGVzO1xuXG4gICAgaWYgKCFlUm9vdClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSAnZScgdmFsdWUgZnJvbSBFTlJUcmVlIHJvb3QgZW50cnlcIik7XG4gICAgaWYgKCFsUm9vdClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSAnbCcgdmFsdWUgZnJvbSBFTlJUcmVlIHJvb3QgZW50cnlcIik7XG5cbiAgICBpZiAoIXNlcSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSAnc2VxJyB2YWx1ZSBmcm9tIEVOUlRyZWUgcm9vdCBlbnRyeVwiKTtcbiAgICBpZiAoIXNpZ25hdHVyZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSAnc2lnJyB2YWx1ZSBmcm9tIEVOUlRyZWUgcm9vdCBlbnRyeVwiKTtcblxuICAgIHJldHVybiB7IGVSb290LCBsUm9vdCwgc2VxOiBOdW1iZXIoc2VxKSwgc2lnbmF0dXJlIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcHVibGljIGtleSBhbmQgdG9wIGxldmVsIGRvbWFpbiBvZiBhbiBFTlIgdHJlZSBlbnRyeS5cbiAgICogVGhlIGRvbWFpbiBpcyB0aGUgc3RhcnRpbmcgcG9pbnQgZm9yIHRyYXZlcnNpbmcgYSBzZXQgb2YgbGlua2VkIEROUyBUWFQgcmVjb3Jkc1xuICAgKiBhbmQgdGhlIHB1YmxpYyBrZXkgaXMgdXNlZCB0byB2ZXJpZnkgdGhlIHJvb3QgZW50cnkgcmVjb3JkXG4gICAqL1xuICBzdGF0aWMgcGFyc2VUcmVlKHRyZWU6IHN0cmluZyk6IEVOUlRyZWVWYWx1ZXMge1xuICAgIGlmICghdHJlZS5zdGFydHNXaXRoKHRoaXMuVFJFRV9QUkVGSVgpKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgRU5SVHJlZSB0cmVlIGVudHJ5IG11c3Qgc3RhcnQgd2l0aCAnJHt0aGlzLlRSRUVfUFJFRklYfSdgXG4gICAgICApO1xuXG4gICAgY29uc3QgbWF0Y2hlcyA9IHRyZWUubWF0Y2goL15lbnJ0cmVlOlxcL1xcLyhbXkBdKylAKC4rKSQvKTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShtYXRjaGVzKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBFTlJUcmVlIHRyZWUgZW50cnlcIik7XG5cbiAgICBtYXRjaGVzLnNoaWZ0KCk7IC8vIFRoZSBmaXJzdCBlbnRyeSBpcyB0aGUgZnVsbCBtYXRjaFxuICAgIGNvbnN0IFtwdWJsaWNLZXksIGRvbWFpbl0gPSBtYXRjaGVzO1xuXG4gICAgaWYgKCFwdWJsaWNLZXkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgcGFyc2UgcHVibGljIGtleSBmcm9tIEVOUlRyZWUgdHJlZSBlbnRyeVwiKTtcbiAgICBpZiAoIWRvbWFpbilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBkb21haW4gZnJvbSBFTlJUcmVlIHRyZWUgZW50cnlcIik7XG5cbiAgICByZXR1cm4geyBwdWJsaWNLZXksIGRvbWFpbiB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgc3ViZG9tYWlucyBsaXN0ZWQgaW4gYW4gRU5SIGJyYW5jaCBlbnRyeS4gVGhlc2UgaW4gdHVybiBsZWFkIHRvXG4gICAqIGVpdGhlciBmdXJ0aGVyIGJyYW5jaCBlbnRyaWVzIG9yIEVOUiByZWNvcmRzLlxuICAgKi9cbiAgc3RhdGljIHBhcnNlQnJhbmNoKGJyYW5jaDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGlmICghYnJhbmNoLnN0YXJ0c1dpdGgodGhpcy5CUkFOQ0hfUFJFRklYKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEVOUlRyZWUgYnJhbmNoIGVudHJ5IG11c3Qgc3RhcnQgd2l0aCAnJHt0aGlzLkJSQU5DSF9QUkVGSVh9J2BcbiAgICAgICk7XG5cbiAgICByZXR1cm4gYnJhbmNoLnNwbGl0KHRoaXMuQlJBTkNIX1BSRUZJWClbMV0uc3BsaXQoXCIsXCIpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBkZWJ1ZyB9IGZyb20gXCJkZWJ1Z1wiO1xuXG5pbXBvcnQgeyBFTlIsIFdha3UyIH0gZnJvbSBcIi4uL2VuclwiO1xuXG5pbXBvcnQgeyBOb2RlQ2FwYWJpbGl0eUNvdW50IH0gZnJvbSBcIi4vZG5zXCI7XG5cbmNvbnN0IGRiZyA9IGRlYnVnKFwid2FrdTpkaXNjb3Zlcnk6ZmV0Y2hfbm9kZXNcIik7XG5cbi8qKlxuICogRmV0Y2ggbm9kZXMgdXNpbmcgcGFzc2VkIFtbZ2V0Tm9kZV1dIHVudGlsIGFsbCB3YW50ZWQgY2FwYWJpbGl0aWVzIGFyZVxuICogZnVsZmlsbGVkIG9yIHRoZSBudW1iZXIgb2YgW1tnZXROb2RlXV0gY2FsbCBleGNlZWRzIHRoZSBzdW0gb2ZcbiAqIFtbd2FudGVkTm9kZUNhcGFiaWxpdHlDb3VudF1dIHBsdXMgW1tlcnJvclRvbGVyYW5jZV1dLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBmZXRjaE5vZGVzVW50aWxDYXBhYmlsaXRpZXNGdWxmaWxsZWQoXG4gIHdhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnQ6IFBhcnRpYWw8Tm9kZUNhcGFiaWxpdHlDb3VudD4sXG4gIGVycm9yVG9sZXJhbmNlOiBudW1iZXIsXG4gIGdldE5vZGU6ICgpID0+IFByb21pc2U8RU5SIHwgbnVsbD5cbik6IFByb21pc2U8RU5SW10+IHtcbiAgY29uc3Qgd2FudGVkID0ge1xuICAgIHJlbGF5OiB3YW50ZWROb2RlQ2FwYWJpbGl0eUNvdW50LnJlbGF5ID8/IDAsXG4gICAgc3RvcmU6IHdhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnQuc3RvcmUgPz8gMCxcbiAgICBmaWx0ZXI6IHdhbnRlZE5vZGVDYXBhYmlsaXR5Q291bnQuZmlsdGVyID8/IDAsXG4gICAgbGlnaHRQdXNoOiB3YW50ZWROb2RlQ2FwYWJpbGl0eUNvdW50LmxpZ2h0UHVzaCA/PyAwLFxuICB9O1xuXG4gIGNvbnN0IG1heFNlYXJjaGVzID1cbiAgICB3YW50ZWQucmVsYXkgKyB3YW50ZWQuc3RvcmUgKyB3YW50ZWQuZmlsdGVyICsgd2FudGVkLmxpZ2h0UHVzaDtcblxuICBjb25zdCBhY3R1YWwgPSB7XG4gICAgcmVsYXk6IDAsXG4gICAgc3RvcmU6IDAsXG4gICAgZmlsdGVyOiAwLFxuICAgIGxpZ2h0UHVzaDogMCxcbiAgfTtcblxuICBsZXQgdG90YWxTZWFyY2hlcyA9IDA7XG4gIGNvbnN0IHBlZXJzOiBFTlJbXSA9IFtdO1xuXG4gIHdoaWxlIChcbiAgICAhaXNTYXRpc2ZpZWQod2FudGVkLCBhY3R1YWwpICYmXG4gICAgdG90YWxTZWFyY2hlcyA8IG1heFNlYXJjaGVzICsgZXJyb3JUb2xlcmFuY2VcbiAgKSB7XG4gICAgY29uc3QgcGVlciA9IGF3YWl0IGdldE5vZGUoKTtcbiAgICBpZiAocGVlciAmJiBpc05ld1BlZXIocGVlciwgcGVlcnMpKSB7XG4gICAgICAvLyBFTlJzIHdpdGhvdXQgYSB3YWt1MiBrZXkgYXJlIGlnbm9yZWQuXG4gICAgICBpZiAocGVlci53YWt1Mikge1xuICAgICAgICBpZiAoaGVscHNTYXRpc2Z5Q2FwYWJpbGl0aWVzKHBlZXIud2FrdTIsIHdhbnRlZCwgYWN0dWFsKSkge1xuICAgICAgICAgIGFkZENhcGFiaWxpdGllcyhwZWVyLndha3UyLCBhY3R1YWwpO1xuICAgICAgICAgIHBlZXJzLnB1c2gocGVlcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGRiZyhgZ290IG5ldyBwZWVyIGNhbmRpZGF0ZSBmcm9tIEROUyBhZGRyZXNzPSR7cGVlci5ub2RlSWR9QCR7cGVlci5pcH1gKTtcbiAgICB9XG5cbiAgICB0b3RhbFNlYXJjaGVzKys7XG4gIH1cbiAgcmV0dXJuIHBlZXJzO1xufVxuXG5mdW5jdGlvbiBpc1NhdGlzZmllZChcbiAgd2FudGVkOiBOb2RlQ2FwYWJpbGl0eUNvdW50LFxuICBhY3R1YWw6IE5vZGVDYXBhYmlsaXR5Q291bnRcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIGFjdHVhbC5yZWxheSA+PSB3YW50ZWQucmVsYXkgJiZcbiAgICBhY3R1YWwuc3RvcmUgPj0gd2FudGVkLnN0b3JlICYmXG4gICAgYWN0dWFsLmZpbHRlciA+PSB3YW50ZWQuZmlsdGVyICYmXG4gICAgYWN0dWFsLmxpZ2h0UHVzaCA+PSB3YW50ZWQubGlnaHRQdXNoXG4gICk7XG59XG5cbmZ1bmN0aW9uIGlzTmV3UGVlcihwZWVyOiBFTlIsIHBlZXJzOiBFTlJbXSk6IGJvb2xlYW4ge1xuICBpZiAoIXBlZXIubm9kZUlkKSByZXR1cm4gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBleGlzdGluZ1BlZXIgb2YgcGVlcnMpIHtcbiAgICBpZiAocGVlci5ub2RlSWQgPT09IGV4aXN0aW5nUGVlci5ub2RlSWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gYWRkQ2FwYWJpbGl0aWVzKG5vZGU6IFdha3UyLCB0b3RhbDogTm9kZUNhcGFiaWxpdHlDb3VudCk6IHZvaWQge1xuICBpZiAobm9kZS5yZWxheSkgdG90YWwucmVsYXkgKz0gMTtcbiAgaWYgKG5vZGUuc3RvcmUpIHRvdGFsLnN0b3JlICs9IDE7XG4gIGlmIChub2RlLmZpbHRlcikgdG90YWwuZmlsdGVyICs9IDE7XG4gIGlmIChub2RlLmxpZ2h0UHVzaCkgdG90YWwubGlnaHRQdXNoICs9IDE7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBwcm9wb3NlZCBFTlIgW1tub2RlXV0gaGVscHMgc2F0aXNmeSB0aGUgW1t3YW50ZWRdXSBjYXBhYmlsaXRpZXMsXG4gKiBjb25zaWRlcmluZyB0aGUgW1thY3R1YWxdXSBjYXBhYmlsaXRpZXMgb2Ygbm9kZXMgcmV0cmlldmVkIHNvIGZhci4uXG4gKlxuICogQHRocm93cyBJZiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIHdhbnRlZCBjYXBhYmlsaXRpZXMgYXJlIGFscmVhZHkgZnVsZmlsbGVkLlxuICovXG5mdW5jdGlvbiBoZWxwc1NhdGlzZnlDYXBhYmlsaXRpZXMoXG4gIG5vZGU6IFdha3UyLFxuICB3YW50ZWQ6IE5vZGVDYXBhYmlsaXR5Q291bnQsXG4gIGFjdHVhbDogTm9kZUNhcGFiaWxpdHlDb3VudFxuKTogYm9vbGVhbiB7XG4gIGlmIChpc1NhdGlzZmllZCh3YW50ZWQsIGFjdHVhbCkpIHtcbiAgICB0aHJvdyBcIkludGVybmFsIEVycm9yOiBXYWt1MiB3YW50ZWQgY2FwYWJpbGl0aWVzIGFyZSBhbHJlYWR5IGZ1bGZpbGxlZFwiO1xuICB9XG5cbiAgY29uc3QgbWlzc2luZyA9IG1pc3NpbmdDYXBhYmlsaXRpZXMod2FudGVkLCBhY3R1YWwpO1xuXG4gIHJldHVybiAoXG4gICAgKG1pc3NpbmcucmVsYXkgJiYgbm9kZS5yZWxheSkgfHxcbiAgICAobWlzc2luZy5zdG9yZSAmJiBub2RlLnN0b3JlKSB8fFxuICAgIChtaXNzaW5nLmZpbHRlciAmJiBub2RlLmZpbHRlcikgfHxcbiAgICAobWlzc2luZy5saWdodFB1c2ggJiYgbm9kZS5saWdodFB1c2gpXG4gICk7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgW1tXYWt1Ml1dIE9iamVjdCBmb3Igd2hpY2ggY2FwYWJpbGl0aWVzIGFyZSBzZXQgdG8gdHJ1ZSBpZiB0aGV5IGFyZVxuICogW1t3YW50ZWRdXSB5ZXQgbWlzc2luZyBmcm9tIFtbYWN0dWFsXV0uXG4gKi9cbmZ1bmN0aW9uIG1pc3NpbmdDYXBhYmlsaXRpZXMoXG4gIHdhbnRlZDogTm9kZUNhcGFiaWxpdHlDb3VudCxcbiAgYWN0dWFsOiBOb2RlQ2FwYWJpbGl0eUNvdW50XG4pOiBXYWt1MiB7XG4gIHJldHVybiB7XG4gICAgcmVsYXk6IGFjdHVhbC5yZWxheSA8IHdhbnRlZC5yZWxheSxcbiAgICBzdG9yZTogYWN0dWFsLnN0b3JlIDwgd2FudGVkLnN0b3JlLFxuICAgIGZpbHRlcjogYWN0dWFsLmZpbHRlciA8IHdhbnRlZC5maWx0ZXIsXG4gICAgbGlnaHRQdXNoOiBhY3R1YWwubGlnaHRQdXNoIDwgd2FudGVkLmxpZ2h0UHVzaCxcbiAgfTtcbn1cbiIsImltcG9ydCB7IHNodWZmbGUgfSBmcm9tIFwibGlicDJwLWdvc3NpcHN1Yi9zcmMvdXRpbHNcIjtcblxuZXhwb3J0IHsgZ2V0UHJlZGVmaW5lZEJvb3RzdHJhcE5vZGVzIH0gZnJvbSBcIi4vcHJlZGVmaW5lZFwiO1xuZXhwb3J0ICogYXMgcHJlZGVmaW5lZCBmcm9tIFwiLi9wcmVkZWZpbmVkXCI7XG5leHBvcnQgeyBCb290c3RyYXAsIEJvb3RzdHJhcE9wdGlvbnMgfSBmcm9tIFwiLi9ib290c3RyYXBcIjtcbmV4cG9ydCAqIGFzIGRucyBmcm9tIFwiLi9kbnNcIjtcbmV4cG9ydCB7IEVuZHBvaW50cywgRG5zT3Zlckh0dHBzIH0gZnJvbSBcIi4vZG5zX292ZXJfaHR0cHNcIjtcbmV4cG9ydCB7IEVOUlRyZWUsIEVOUlRyZWVWYWx1ZXMsIEVOUlJvb3RWYWx1ZXMgfSBmcm9tIFwiLi9lbnJ0cmVlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQc2V1ZG9SYW5kb21TdWJzZXQ8VD4oXG4gIHZhbHVlczogVFtdLFxuICB3YW50ZWROdW1iZXI6IG51bWJlclxuKTogVFtdIHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggPD0gd2FudGVkTnVtYmVyKSB7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIHJldHVybiBzaHVmZmxlKHZhbHVlcykuc2xpY2UoMCwgd2FudGVkTnVtYmVyKTtcbn1cbiIsImltcG9ydCB7IE11bHRpYWRkciB9IGZyb20gXCJtdWx0aWFkZHJcIjtcblxuaW1wb3J0IHsgZ2V0UHNldWRvUmFuZG9tU3Vic2V0IH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGNvbnN0IERlZmF1bHRXYW50ZWROdW1iZXIgPSAxO1xuXG5leHBvcnQgZW51bSBGbGVldCB7XG4gIFByb2QgPSBcInByb2RcIixcbiAgVGVzdCA9IFwidGVzdFwiLFxufVxuXG4vKipcbiAqIFJldHVybiBsaXN0IG9mIHByZS1kZWZpbmVkIChoYXJkY29kZWQpIGJvb3RzdHJhcCBub2Rlcy5cbiAqXG4gKiBEZWZhdWx0IGJlaGF2aW9yIGlzIHRvIHJldHVybiBub2RlcyBvZiB0aGUgbndha3UgU3RhdHVzIFByb2QgZmxlZXQuXG4gKlxuICogQHBhcmFtIGZsZWV0IFRoZSBmbGVldCB0byBiZSByZXR1cm5lZC4gRGVmYXVsdHMgdG8gcHJvZHVjdGlvbiBmbGVldC5cbiAqIEBwYXJhbSB3YW50ZWROdW1iZXIgVGhlIG51bWJlciBvZiBjb25uZWN0aW9ucyBkZXNpcmVkLiBEZWZhdWx0cyB0byBbW0RlZmF1bHRXYW50ZWROdW1iZXJdXS5cbiAqXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiBtdWx0aWFkZHJlc3Nlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByZWRlZmluZWRCb290c3RyYXBOb2RlcyhcbiAgZmxlZXQ6IEZsZWV0ID0gRmxlZXQuUHJvZCxcbiAgd2FudGVkTnVtYmVyOiBudW1iZXIgPSBEZWZhdWx0V2FudGVkTnVtYmVyXG4pOiBNdWx0aWFkZHJbXSB7XG4gIGlmICh3YW50ZWROdW1iZXIgPD0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGxldCBub2RlcztcbiAgc3dpdGNoIChmbGVldCkge1xuICAgIGNhc2UgRmxlZXQuUHJvZDpcbiAgICAgIG5vZGVzID0gZmxlZXRzLmZsZWV0c1tcIndha3V2Mi5wcm9kXCJdW1wid2FrdS13ZWJzb2NrZXRcIl07XG4gICAgICBicmVhaztcbiAgICBjYXNlIEZsZWV0LlRlc3Q6XG4gICAgICBub2RlcyA9IGZsZWV0cy5mbGVldHNbXCJ3YWt1djIudGVzdFwiXVtcIndha3Utd2Vic29ja2V0XCJdO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIG5vZGVzID0gZmxlZXRzLmZsZWV0c1tcIndha3V2Mi5wcm9kXCJdW1wid2FrdS13ZWJzb2NrZXRcIl07XG4gIH1cblxuICBub2RlcyA9IE9iamVjdC52YWx1ZXMobm9kZXMpIGFzIHN0cmluZ1tdO1xuXG4gIG5vZGVzID0gbm9kZXMubWFwKChub2RlOiBzdHJpbmcpID0+IG5ldyBNdWx0aWFkZHIobm9kZSkpO1xuICByZXR1cm4gZ2V0UHNldWRvUmFuZG9tU3Vic2V0KG5vZGVzLCB3YW50ZWROdW1iZXIpO1xufVxuXG5leHBvcnQgY29uc3QgZmxlZXRzID0ge1xuICBmbGVldHM6IHtcbiAgICBcIndha3V2Mi5wcm9kXCI6IHtcbiAgICAgIFwid2FrdS13ZWJzb2NrZXRcIjoge1xuICAgICAgICBcIm5vZGUtMDEuYWMtY24taG9uZ2tvbmctYy53YWt1djIucHJvZFwiOlxuICAgICAgICAgIFwiL2RuczQvbm9kZS0wMS5hYy1jbi1ob25na29uZy1jLndha3V2Mi5wcm9kLnN0YXR1c2ltLm5ldC90Y3AvNDQzL3dzcy9wMnAvMTZVaXUySEFtNHY4NlczYm1UMUJpSDZvU1B6Y3NTcjI0aURRcFNONVFhOTkyQkNqandnckRcIixcbiAgICAgICAgXCJub2RlLTAxLmRvLWFtczMud2FrdXYyLnByb2RcIjpcbiAgICAgICAgICBcIi9kbnM0L25vZGUtMDEuZG8tYW1zMy53YWt1djIucHJvZC5zdGF0dXNpbS5uZXQvdGNwLzQ0My93c3MvcDJwLzE2VWl1MkhBbUw1b2tXb3BYN05xWldCVUtWcVc4aVV4Q0VtZDVHTUhMVlB3Q2d6WXpRdjNlXCIsXG4gICAgICAgIFwibm9kZS0wMS5nYy11cy1jZW50cmFsMS1hLndha3V2Mi5wcm9kXCI6XG4gICAgICAgICAgXCIvZG5zNC9ub2RlLTAxLmdjLXVzLWNlbnRyYWwxLWEud2FrdXYyLnByb2Quc3RhdHVzaW0ubmV0L3RjcC80NDMvd3NzL3AycC8xNlVpdTJIQW1Wa0tudHNFQ2FZZmVmUjFWMnlDUjc5Q2VnTEFUdVRQRTZCOVR4Z3hCaWlpQVwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIFwid2FrdXYyLnRlc3RcIjoge1xuICAgICAgXCJ3YWt1LXdlYnNvY2tldFwiOiB7XG4gICAgICAgIFwibm9kZS0wMS5hYy1jbi1ob25na29uZy1jLndha3V2Mi50ZXN0XCI6XG4gICAgICAgICAgXCIvZG5zNC9ub2RlLTAxLmFjLWNuLWhvbmdrb25nLWMud2FrdXYyLnRlc3Quc3RhdHVzaW0ubmV0L3RjcC80NDMvd3NzL3AycC8xNlVpdTJIQWt2V2l5RnNnUmh1SkViOUpmall4RWtvSExnblVRbXIxTjVtS1duWWp4WVJWbVwiLFxuICAgICAgICBcIm5vZGUtMDEuZG8tYW1zMy53YWt1djIudGVzdFwiOlxuICAgICAgICAgIFwiL2RuczQvbm9kZS0wMS5kby1hbXMzLndha3V2Mi50ZXN0LnN0YXR1c2ltLm5ldC90Y3AvNDQzL3dzcy9wMnAvMTZVaXUySEFtUExlN016bThUc1lVdWJnQ0FXMWFKb2VGU2N4ckxqOHBwSEZpdlBvOTdiVVpcIixcbiAgICAgICAgXCJub2RlLTAxLmdjLXVzLWNlbnRyYWwxLWEud2FrdXYyLnRlc3RcIjpcbiAgICAgICAgICBcIi9kbnM0L25vZGUtMDEuZ2MtdXMtY2VudHJhbDEtYS53YWt1djIudGVzdC5zdGF0dXNpbS5uZXQvdGNwLzQ0My93c3MvcDJwLzE2VWl1MkhBbUpiMmUyOHFMWHhUNWtaeFZVVW9KdDcyRU16TkdYQjQ3Unh4NWh3M3E0WWpTXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG59O1xuIiwiLy8gTWF4aW11bSBlbmNvZGVkIHNpemUgb2YgYW4gRU5SXG5leHBvcnQgY29uc3QgTUFYX1JFQ09SRF9TSVpFID0gMzAwO1xuXG5leHBvcnQgY29uc3QgRVJSX0lOVkFMSURfSUQgPSBcIkludmFsaWQgcmVjb3JkIGlkXCI7XG5cbmV4cG9ydCBjb25zdCBFUlJfTk9fU0lHTkFUVVJFID0gXCJObyB2YWxpZCBzaWduYXR1cmUgZm91bmRcIjtcblxuLy8gVGhlIG1heGltdW0gbGVuZ3RoIG9mIGJ5dGUgc2l6ZSBvZiBhIG11bHRpYWRkciB0byBlbmNvZGUgaW4gdGhlIGBtdWx0aWFkZHJgIGZpZWxkXG4vLyBUaGUgc2l6ZSBpcyBhIGJpZyBlbmRpYW4gMTYtYml0IHVuc2lnbmVkIGludGVnZXJcbmV4cG9ydCBjb25zdCBNVUxUSUFERFJfTEVOR1RIX1NJWkUgPSAyO1xuIiwiaW1wb3J0ICogYXMgUkxQIGZyb20gXCJAZXRoZXJzcHJvamVjdC9ybHBcIjtcbmltcG9ydCBkZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCB7IE11bHRpYWRkciwgcHJvdG9jb2xzIH0gZnJvbSBcIm11bHRpYWRkclwiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuLy8gQHRzLWlnbm9yZTogTm8gdHlwZXMgYXZhaWxhYmxlXG5pbXBvcnQgbXVDb252ZXJ0IGZyb20gXCJtdWx0aWFkZHIvc3JjL2NvbnZlcnRcIjtcbmltcG9ydCBQZWVySWQgZnJvbSBcInBlZXItaWRcIjtcbmltcG9ydCB7IGZyb21TdHJpbmcgfSBmcm9tIFwidWludDhhcnJheXMvZnJvbS1zdHJpbmdcIjtcbmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSBcInVpbnQ4YXJyYXlzL3RvLXN0cmluZ1wiO1xuaW1wb3J0IHsgZW5jb2RlIGFzIHZhcmludEVuY29kZSB9IGZyb20gXCJ2YXJpbnRcIjtcblxuaW1wb3J0IHsgY29tcHJlc3NQdWJsaWNLZXksIGtlY2NhazI1NiwgdmVyaWZ5U2lnbmF0dXJlIH0gZnJvbSBcIi4uL2NyeXB0b1wiO1xuaW1wb3J0IHsgYnl0ZXNUb0hleCwgYnl0ZXNUb1V0ZjgsIGhleFRvQnl0ZXMsIHV0ZjhUb0J5dGVzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmltcG9ydCB7IEVSUl9JTlZBTElEX0lELCBFUlJfTk9fU0lHTkFUVVJFLCBNQVhfUkVDT1JEX1NJWkUgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUtleXBhaXIsXG4gIGNyZWF0ZUtleXBhaXJGcm9tUGVlcklkLFxuICBjcmVhdGVQZWVySWRGcm9tS2V5cGFpcixcbiAgSUtleXBhaXIsXG4gIEtleXBhaXJUeXBlLFxufSBmcm9tIFwiLi9rZXlwYWlyXCI7XG5pbXBvcnQgeyBkZWNvZGVNdWx0aWFkZHJzLCBlbmNvZGVNdWx0aWFkZHJzIH0gZnJvbSBcIi4vbXVsdGlhZGRyc19jb2RlY1wiO1xuaW1wb3J0IHsgRU5SS2V5LCBFTlJWYWx1ZSwgTm9kZUlkLCBTZXF1ZW5jZU51bWJlciB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgKiBhcyB2NCBmcm9tIFwiLi92NFwiO1xuaW1wb3J0IHsgZGVjb2RlV2FrdTIsIGVuY29kZVdha3UyLCBXYWt1MiB9IGZyb20gXCIuL3dha3UyX2NvZGVjXCI7XG5cbmNvbnN0IGRiZyA9IGRlYnVnKFwid2FrdTplbnJcIik7XG5cbmV4cG9ydCBjbGFzcyBFTlIgZXh0ZW5kcyBNYXA8RU5SS2V5LCBFTlJWYWx1ZT4ge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJFQ09SRF9QUkVGSVggPSBcImVucjpcIjtcbiAgcHVibGljIHNlcTogU2VxdWVuY2VOdW1iZXI7XG4gIHB1YmxpYyBzaWduYXR1cmU6IFVpbnQ4QXJyYXkgfCBudWxsO1xuICBwdWJsaWMgcGVlcklkPzogUGVlcklkO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAga3ZzOiBSZWNvcmQ8RU5SS2V5LCBFTlJWYWx1ZT4gPSB7fSxcbiAgICBzZXE6IFNlcXVlbmNlTnVtYmVyID0gQmlnSW50KDEpLFxuICAgIHNpZ25hdHVyZTogVWludDhBcnJheSB8IG51bGwgPSBudWxsXG4gICkge1xuICAgIHN1cGVyKE9iamVjdC5lbnRyaWVzKGt2cykpO1xuICAgIHRoaXMuc2VxID0gc2VxO1xuICAgIHRoaXMuc2lnbmF0dXJlID0gc2lnbmF0dXJlO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZShcbiAgICBrdnM6IFJlY29yZDxFTlJLZXksIEVOUlZhbHVlPiA9IHt9LFxuICAgIHNlcTogU2VxdWVuY2VOdW1iZXIgPSBCaWdJbnQoMSksXG4gICAgc2lnbmF0dXJlOiBVaW50OEFycmF5IHwgbnVsbCA9IG51bGxcbiAgKTogUHJvbWlzZTxFTlI+IHtcbiAgICBjb25zdCBlbnIgPSBuZXcgRU5SKGt2cywgc2VxLCBzaWduYXR1cmUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwdWJsaWNLZXkgPSBlbnIucHVibGljS2V5O1xuICAgICAgaWYgKHB1YmxpY0tleSkge1xuICAgICAgICBjb25zdCBrZXlwYWlyID0gY3JlYXRlS2V5cGFpcihlbnIua2V5cGFpclR5cGUsIHVuZGVmaW5lZCwgcHVibGljS2V5KTtcbiAgICAgICAgZW5yLnBlZXJJZCA9IGF3YWl0IGNyZWF0ZVBlZXJJZEZyb21LZXlwYWlyKGtleXBhaXIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGRiZyhcIkNvdWxkIG5vdCBjYWxjdWxhdGUgcGVlciBpZCBmb3IgRU5SXCIsIGUpO1xuICAgIH1cblxuICAgIHJldHVybiBlbnI7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlVjQoXG4gICAgcHVibGljS2V5OiBVaW50OEFycmF5LFxuICAgIGt2czogUmVjb3JkPEVOUktleSwgRU5SVmFsdWU+ID0ge31cbiAgKTogUHJvbWlzZTxFTlI+IHtcbiAgICAvLyBFSVAtNzc4IHNwZWNpZmllcyB0aGF0IHRoZSBrZXkgbXVzdCBiZSBpbiBjb21wcmVzc2VkIGZvcm1hdCwgMzMgYnl0ZXNcbiAgICBpZiAocHVibGljS2V5Lmxlbmd0aCAhPT0gMzMpIHtcbiAgICAgIHB1YmxpY0tleSA9IGNvbXByZXNzUHVibGljS2V5KHB1YmxpY0tleSk7XG4gICAgfVxuICAgIHJldHVybiBFTlIuY3JlYXRlKHtcbiAgICAgIC4uLmt2cyxcbiAgICAgIGlkOiB1dGY4VG9CeXRlcyhcInY0XCIpLFxuICAgICAgc2VjcDI1NmsxOiBwdWJsaWNLZXksXG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlRnJvbVBlZXJJZChcbiAgICBwZWVySWQ6IFBlZXJJZCxcbiAgICBrdnM6IFJlY29yZDxFTlJLZXksIEVOUlZhbHVlPiA9IHt9XG4gICk6IFByb21pc2U8RU5SPiB7XG4gICAgY29uc3Qga2V5cGFpciA9IGNyZWF0ZUtleXBhaXJGcm9tUGVlcklkKHBlZXJJZCk7XG4gICAgc3dpdGNoIChrZXlwYWlyLnR5cGUpIHtcbiAgICAgIGNhc2UgS2V5cGFpclR5cGUuc2VjcDI1NmsxOlxuICAgICAgICByZXR1cm4gRU5SLmNyZWF0ZVY0KGtleXBhaXIucHVibGljS2V5LCBrdnMpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRlY29kZUZyb21WYWx1ZXMoZGVjb2RlZDogVWludDhBcnJheVtdKTogUHJvbWlzZTxFTlI+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGVjb2RlZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlY29kZWQgRU5SIG11c3QgYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuICAgIGlmIChkZWNvZGVkLmxlbmd0aCAlIDIgIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlY29kZWQgRU5SIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBlbGVtZW50c1wiKTtcbiAgICB9XG4gICAgY29uc3QgW3NpZ25hdHVyZSwgc2VxLCAuLi5rdnNdID0gZGVjb2RlZDtcbiAgICBpZiAoIXNpZ25hdHVyZSB8fCBBcnJheS5pc0FycmF5KHNpZ25hdHVyZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlY29kZWQgRU5SIGludmFsaWQgc2lnbmF0dXJlOiBtdXN0IGJlIGEgYnl0ZSBhcnJheVwiKTtcbiAgICB9XG4gICAgaWYgKCFzZXEgfHwgQXJyYXkuaXNBcnJheShzZXEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRGVjb2RlZCBFTlIgaW52YWxpZCBzZXF1ZW5jZSBudW1iZXI6IG11c3QgYmUgYSBieXRlIGFycmF5XCJcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IG9iajogUmVjb3JkPEVOUktleSwgRU5SVmFsdWU+ID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrdnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG9ialtieXRlc1RvVXRmOChrdnNbaV0pXSA9IGt2c1tpICsgMV07XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGRiZyhcIkZhaWxlZCB0byBkZWNvZGUgRU5SIGtleSB0byBVVEYtOCwgc2tpcHBpbmcgaXRcIiwga3ZzW2ldLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgc2VxIGlzIGFuIGVtcHR5IGFycmF5LCB0cmFuc2xhdGUgYXMgdmFsdWUgMFxuICAgIGNvbnN0IGhleFNlcSA9IFwiMHhcIiArIChzZXEubGVuZ3RoID8gYnl0ZXNUb0hleChzZXEpIDogXCIwMFwiKTtcblxuICAgIGNvbnN0IGVuciA9IGF3YWl0IEVOUi5jcmVhdGUob2JqLCBCaWdJbnQoaGV4U2VxKSwgc2lnbmF0dXJlKTtcblxuICAgIGNvbnN0IHJscEVuY29kZWRCeXRlcyA9IGhleFRvQnl0ZXMoUkxQLmVuY29kZShbc2VxLCAuLi5rdnNdKSk7XG4gICAgaWYgKCFlbnIudmVyaWZ5KHJscEVuY29kZWRCeXRlcywgc2lnbmF0dXJlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHZlcmlmeSBFTlIgc2lnbmF0dXJlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZW5yO1xuICB9XG5cbiAgc3RhdGljIGRlY29kZShlbmNvZGVkOiBVaW50OEFycmF5KTogUHJvbWlzZTxFTlI+IHtcbiAgICBjb25zdCBkZWNvZGVkID0gUkxQLmRlY29kZShlbmNvZGVkKS5tYXAoaGV4VG9CeXRlcyk7XG4gICAgcmV0dXJuIEVOUi5kZWNvZGVGcm9tVmFsdWVzKGRlY29kZWQpO1xuICB9XG5cbiAgc3RhdGljIGRlY29kZVR4dChlbmNvZGVkOiBzdHJpbmcpOiBQcm9taXNlPEVOUj4ge1xuICAgIGlmICghZW5jb2RlZC5zdGFydHNXaXRoKHRoaXMuUkVDT1JEX1BSRUZJWCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFwic3RyaW5nIGVuY29kZWQgRU5SIG11c3Qgc3RhcnQgd2l0aCAnJHt0aGlzLlJFQ09SRF9QUkVGSVh9J2BcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBFTlIuZGVjb2RlKGZyb21TdHJpbmcoZW5jb2RlZC5zbGljZSg0KSwgXCJiYXNlNjR1cmxcIikpO1xuICB9XG5cbiAgc2V0KGs6IEVOUktleSwgdjogRU5SVmFsdWUpOiB0aGlzIHtcbiAgICB0aGlzLnNpZ25hdHVyZSA9IG51bGw7XG4gICAgdGhpcy5zZXErKztcbiAgICByZXR1cm4gc3VwZXIuc2V0KGssIHYpO1xuICB9XG5cbiAgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgY29uc3QgaWQgPSB0aGlzLmdldChcImlkXCIpO1xuICAgIGlmICghaWQpIHRocm93IG5ldyBFcnJvcihcImlkIG5vdCBmb3VuZC5cIik7XG4gICAgcmV0dXJuIGJ5dGVzVG9VdGY4KGlkKTtcbiAgfVxuXG4gIGdldCBrZXlwYWlyVHlwZSgpOiBLZXlwYWlyVHlwZSB7XG4gICAgc3dpdGNoICh0aGlzLmlkKSB7XG4gICAgICBjYXNlIFwidjRcIjpcbiAgICAgICAgcmV0dXJuIEtleXBhaXJUeXBlLnNlY3AyNTZrMTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJfSU5WQUxJRF9JRCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHB1YmxpY0tleSgpOiBVaW50OEFycmF5IHwgdW5kZWZpbmVkIHtcbiAgICBzd2l0Y2ggKHRoaXMuaWQpIHtcbiAgICAgIGNhc2UgXCJ2NFwiOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXQoXCJzZWNwMjU2azFcIik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJSX0lOVkFMSURfSUQpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBrZXlwYWlyKCk6IElLZXlwYWlyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5wdWJsaWNLZXkpIHtcbiAgICAgIGNvbnN0IHB1YmxpY0tleSA9IHRoaXMucHVibGljS2V5O1xuICAgICAgcmV0dXJuIGNyZWF0ZUtleXBhaXIodGhpcy5rZXlwYWlyVHlwZSwgdW5kZWZpbmVkLCBwdWJsaWNLZXkpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBnZXQgbm9kZUlkKCk6IE5vZGVJZCB8IHVuZGVmaW5lZCB7XG4gICAgc3dpdGNoICh0aGlzLmlkKSB7XG4gICAgICBjYXNlIFwidjRcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMucHVibGljS2V5ID8gdjQubm9kZUlkKHRoaXMucHVibGljS2V5KSA6IHVuZGVmaW5lZDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihFUlJfSU5WQUxJRF9JRCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlwKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgcmF3ID0gdGhpcy5nZXQoXCJpcFwiKTtcbiAgICBpZiAocmF3KSB7XG4gICAgICByZXR1cm4gbXVDb252ZXJ0LnRvU3RyaW5nKHByb3RvY29scy5uYW1lcy5pcDQuY29kZSwgcmF3KSBhcyBzdHJpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgc2V0IGlwKGlwOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICBpZiAoaXApIHtcbiAgICAgIHRoaXMuc2V0KFwiaXBcIiwgbXVDb252ZXJ0LnRvQnl0ZXMocHJvdG9jb2xzLm5hbWVzLmlwNC5jb2RlLCBpcCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlbGV0ZShcImlwXCIpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB0Y3AoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByYXcgPSB0aGlzLmdldChcInRjcFwiKTtcbiAgICBpZiAocmF3KSB7XG4gICAgICByZXR1cm4gTnVtYmVyKG11Q29udmVydC50b1N0cmluZyhwcm90b2NvbHMubmFtZXMudGNwLmNvZGUsIHJhdykpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNldCB0Y3AocG9ydDogbnVtYmVyIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKHBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5kZWxldGUoXCJ0Y3BcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0KFwidGNwXCIsIG11Q29udmVydC50b0J5dGVzKHByb3RvY29scy5uYW1lcy50Y3AuY29kZSwgcG9ydCkpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB1ZHAoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByYXcgPSB0aGlzLmdldChcInVkcFwiKTtcbiAgICBpZiAocmF3KSB7XG4gICAgICByZXR1cm4gTnVtYmVyKG11Q29udmVydC50b1N0cmluZyhwcm90b2NvbHMubmFtZXMudWRwLmNvZGUsIHJhdykpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNldCB1ZHAocG9ydDogbnVtYmVyIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKHBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5kZWxldGUoXCJ1ZHBcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0KFwidWRwXCIsIG11Q29udmVydC50b0J5dGVzKHByb3RvY29scy5uYW1lcy51ZHAuY29kZSwgcG9ydCkpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpcDYoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByYXcgPSB0aGlzLmdldChcImlwNlwiKTtcbiAgICBpZiAocmF3KSB7XG4gICAgICByZXR1cm4gbXVDb252ZXJ0LnRvU3RyaW5nKHByb3RvY29scy5uYW1lcy5pcDYuY29kZSwgcmF3KSBhcyBzdHJpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgc2V0IGlwNihpcDogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKGlwKSB7XG4gICAgICB0aGlzLnNldChcImlwNlwiLCBtdUNvbnZlcnQudG9CeXRlcyhwcm90b2NvbHMubmFtZXMuaXA2LmNvZGUsIGlwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVsZXRlKFwiaXA2XCIpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB0Y3A2KCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgcmF3ID0gdGhpcy5nZXQoXCJ0Y3A2XCIpO1xuICAgIGlmIChyYXcpIHtcbiAgICAgIHJldHVybiBOdW1iZXIobXVDb252ZXJ0LnRvU3RyaW5nKHByb3RvY29scy5uYW1lcy50Y3AuY29kZSwgcmF3KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgc2V0IHRjcDYocG9ydDogbnVtYmVyIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKHBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5kZWxldGUoXCJ0Y3A2XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldChcInRjcDZcIiwgbXVDb252ZXJ0LnRvQnl0ZXMocHJvdG9jb2xzLm5hbWVzLnRjcC5jb2RlLCBwb3J0KSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHVkcDYoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByYXcgPSB0aGlzLmdldChcInVkcDZcIik7XG4gICAgaWYgKHJhdykge1xuICAgICAgcmV0dXJuIE51bWJlcihtdUNvbnZlcnQudG9TdHJpbmcocHJvdG9jb2xzLm5hbWVzLnVkcC5jb2RlLCByYXcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzZXQgdWRwNihwb3J0OiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICBpZiAocG9ydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmRlbGV0ZShcInVkcDZcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0KFwidWRwNlwiLCBtdUNvbnZlcnQudG9CeXRlcyhwcm90b2NvbHMubmFtZXMudWRwLmNvZGUsIHBvcnQpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBgbXVsdGlhZGRyc2AgZmllbGQgZnJvbSBFTlIuXG4gICAqXG4gICAqIFRoaXMgZmllbGQgaXMgdXNlZCB0byBzdG9yZSBtdWx0aWFkZHJlc3NlcyB0aGF0IGNhbm5vdCBiZSBzdG9yZWQgd2l0aCB0aGUgY3VycmVudCBFTlIgcHJlLWRlZmluZWQga2V5cy5cbiAgICogVGhlc2UgY2FuIGJlIGEgbXVsdGlhZGRyZXNzZXMgdGhhdCBpbmNsdWRlIGVuY2Fwc3VsYXRpb24gKGUuZy4gd3NzKSBvciBkbyBub3QgdXNlIGBpcDRgIG5vciBgaXA2YCBmb3IgdGhlIGhvc3RcbiAgICogYWRkcmVzcyAoZS5nLiBgZG5zNGAsIGBkbnNhZGRyYCwgZXRjKS4uXG4gICAqXG4gICAqIElmIHRoZSBwZWVyIGluZm9ybWF0aW9uIG9ubHkgY29udGFpbnMgaW5mb3JtYXRpb24gdGhhdCBjYW4gYmUgcmVwcmVzZW50ZWQgd2l0aCB0aGUgRU5SIHByZS1kZWZpbmVkIGtleXNcbiAgICogKGlwLCB0Y3AsIGV0YykgdGhlbiB0aGUgdXNhZ2Ugb2YgW1tnZXRMb2NhdGlvbk11bHRpYWRkcl1dIHNob3VsZCBiZSBwcmVmZXJyZWQuXG4gICAqXG4gICAqIFRoZSBtdWx0aWFkZHJlc3NlcyBzdG9yZWQgaW4gdGhpcyBmaWVsZCBhcmUgZXhwZWN0ZWQgdG8gYmUgbG9jYXRpb24gbXVsdGlhZGRyZXNzZXMsIGllLCBwZWVyIGlkIGxlc3MuXG4gICAqL1xuICBnZXQgbXVsdGlhZGRycygpOiBNdWx0aWFkZHJbXSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgcmF3ID0gdGhpcy5nZXQoXCJtdWx0aWFkZHJzXCIpO1xuXG4gICAgaWYgKHJhdykgcmV0dXJuIGRlY29kZU11bHRpYWRkcnMocmF3KTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGBtdWx0aWFkZHJzYCBmaWVsZCBvbiB0aGUgRU5SLlxuICAgKlxuICAgKiBUaGlzIGZpZWxkIGlzIHVzZWQgdG8gc3RvcmUgbXVsdGlhZGRyZXNzZXMgdGhhdCBjYW5ub3QgYmUgc3RvcmVkIHdpdGggdGhlIGN1cnJlbnQgRU5SIHByZS1kZWZpbmVkIGtleXMuXG4gICAqIFRoZXNlIGNhbiBiZSBhIG11bHRpYWRkcmVzc2VzIHRoYXQgaW5jbHVkZSBlbmNhcHN1bGF0aW9uIChlLmcuIHdzcykgb3IgZG8gbm90IHVzZSBgaXA0YCBub3IgYGlwNmAgZm9yIHRoZSBob3N0XG4gICAqIGFkZHJlc3MgKGUuZy4gYGRuczRgLCBgZG5zYWRkcmAsIGV0YykuLlxuICAgKlxuICAgKiBJZiB0aGUgcGVlciBpbmZvcm1hdGlvbiBvbmx5IGNvbnRhaW5zIGluZm9ybWF0aW9uIHRoYXQgY2FuIGJlIHJlcHJlc2VudGVkIHdpdGggdGhlIEVOUiBwcmUtZGVmaW5lZCBrZXlzXG4gICAqIChpcCwgdGNwLCBldGMpIHRoZW4gdGhlIHVzYWdlIG9mIFtbc2V0TG9jYXRpb25NdWx0aWFkZHJdXSBzaG91bGQgYmUgcHJlZmVycmVkLlxuICAgKiBUaGUgbXVsdGlhZGRyZXNzZXMgc3RvcmVkIGluIHRoaXMgZmllbGQgbXVzdCBiZSBsb2NhdGlvbiBtdWx0aWFkZHJlc3NlcyxcbiAgICogaWUsIHdpdGhvdXQgYSBwZWVyIGlkLlxuICAgKi9cbiAgc2V0IG11bHRpYWRkcnMobXVsdGlhZGRyczogTXVsdGlhZGRyW10gfCB1bmRlZmluZWQpIHtcbiAgICBpZiAobXVsdGlhZGRycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmRlbGV0ZShcIm11bHRpYWRkcnNcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG11bHRpYWRkcnNCdWYgPSBlbmNvZGVNdWx0aWFkZHJzKG11bHRpYWRkcnMpO1xuICAgICAgdGhpcy5zZXQoXCJtdWx0aWFkZHJzXCIsIG11bHRpYWRkcnNCdWYpO1xuICAgIH1cbiAgfVxuXG4gIGdldExvY2F0aW9uTXVsdGlhZGRyKFxuICAgIHByb3RvY29sOiBcInVkcFwiIHwgXCJ1ZHA0XCIgfCBcInVkcDZcIiB8IFwidGNwXCIgfCBcInRjcDRcIiB8IFwidGNwNlwiXG4gICk6IE11bHRpYWRkciB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHByb3RvY29sID09PSBcInVkcFwiKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmdldExvY2F0aW9uTXVsdGlhZGRyKFwidWRwNFwiKSB8fCB0aGlzLmdldExvY2F0aW9uTXVsdGlhZGRyKFwidWRwNlwiKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHByb3RvY29sID09PSBcInRjcFwiKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmdldExvY2F0aW9uTXVsdGlhZGRyKFwidGNwNFwiKSB8fCB0aGlzLmdldExvY2F0aW9uTXVsdGlhZGRyKFwidGNwNlwiKVxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgaXNJcHY2ID0gcHJvdG9jb2wuZW5kc1dpdGgoXCI2XCIpO1xuICAgIGNvbnN0IGlwVmFsID0gdGhpcy5nZXQoaXNJcHY2ID8gXCJpcDZcIiA6IFwiaXBcIik7XG4gICAgaWYgKCFpcFZhbCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBpc1VkcCA9IHByb3RvY29sLnN0YXJ0c1dpdGgoXCJ1ZHBcIik7XG4gICAgY29uc3QgaXNUY3AgPSBwcm90b2NvbC5zdGFydHNXaXRoKFwidGNwXCIpO1xuICAgIGxldCBwcm90b05hbWUsIHByb3RvVmFsO1xuICAgIGlmIChpc1VkcCkge1xuICAgICAgcHJvdG9OYW1lID0gXCJ1ZHBcIjtcbiAgICAgIHByb3RvVmFsID0gaXNJcHY2ID8gdGhpcy5nZXQoXCJ1ZHA2XCIpIDogdGhpcy5nZXQoXCJ1ZHBcIik7XG4gICAgfSBlbHNlIGlmIChpc1RjcCkge1xuICAgICAgcHJvdG9OYW1lID0gXCJ0Y3BcIjtcbiAgICAgIHByb3RvVmFsID0gaXNJcHY2ID8gdGhpcy5nZXQoXCJ0Y3A2XCIpIDogdGhpcy5nZXQoXCJ0Y3BcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghcHJvdG9WYWwpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHJhdyBtdWx0aWFkZHIgYnVmZmVyXG4gICAgLy8gbXVsdGlhZGRyIGxlbmd0aCBpczpcbiAgICAvLyAgMSBieXRlIGZvciB0aGUgaXAgcHJvdG9jb2wgKGlwNCBvciBpcDYpXG4gICAgLy8gIE4gYnl0ZXMgZm9yIHRoZSBpcCBhZGRyZXNzXG4gICAgLy8gIDEgb3IgMiBieXRlcyBmb3IgdGhlIHByb3RvY29sIGFzIGJ1ZmZlciAodGNwIG9yIHVkcClcbiAgICAvLyAgMiBieXRlcyBmb3IgdGhlIHBvcnRcbiAgICBjb25zdCBpcE1hID0gcHJvdG9jb2xzLm5hbWVzW2lzSXB2NiA/IFwiaXA2XCIgOiBcImlwNFwiXTtcbiAgICBjb25zdCBpcEJ5dGVMZW4gPSBpcE1hLnNpemUgLyA4O1xuICAgIGNvbnN0IHByb3RvTWEgPSBwcm90b2NvbHMubmFtZXNbcHJvdG9OYW1lXTtcbiAgICBjb25zdCBwcm90b0J1ZiA9IHZhcmludEVuY29kZShwcm90b01hLmNvZGUpO1xuICAgIGNvbnN0IG1hQnVmID0gbmV3IFVpbnQ4QXJyYXkoMyArIGlwQnl0ZUxlbiArIHByb3RvQnVmLmxlbmd0aCk7XG4gICAgbWFCdWZbMF0gPSBpcE1hLmNvZGU7XG4gICAgbWFCdWYuc2V0KGlwVmFsLCAxKTtcbiAgICBtYUJ1Zi5zZXQocHJvdG9CdWYsIDEgKyBpcEJ5dGVMZW4pO1xuICAgIG1hQnVmLnNldChwcm90b1ZhbCwgMSArIGlwQnl0ZUxlbiArIHByb3RvQnVmLmxlbmd0aCk7XG5cbiAgICByZXR1cm4gbmV3IE11bHRpYWRkcihtYUJ1Zik7XG4gIH1cblxuICBzZXRMb2NhdGlvbk11bHRpYWRkcihtdWx0aWFkZHI6IE11bHRpYWRkcik6IHZvaWQge1xuICAgIGNvbnN0IHByb3RvTmFtZXMgPSBtdWx0aWFkZHIucHJvdG9OYW1lcygpO1xuICAgIGlmIChcbiAgICAgIHByb3RvTmFtZXMubGVuZ3RoICE9PSAyICYmXG4gICAgICBwcm90b05hbWVzWzFdICE9PSBcInVkcFwiICYmXG4gICAgICBwcm90b05hbWVzWzFdICE9PSBcInRjcFwiXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG11bHRpYWRkclwiKTtcbiAgICB9XG4gICAgY29uc3QgdHVwbGVzID0gbXVsdGlhZGRyLnR1cGxlcygpO1xuICAgIGlmICghdHVwbGVzWzBdWzFdIHx8ICF0dXBsZXNbMV1bMV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbXVsdGlhZGRyXCIpO1xuICAgIH1cblxuICAgIC8vIElQdjRcbiAgICBpZiAodHVwbGVzWzBdWzBdID09PSA0KSB7XG4gICAgICB0aGlzLnNldChcImlwXCIsIHR1cGxlc1swXVsxXSk7XG4gICAgICB0aGlzLnNldChwcm90b05hbWVzWzFdLCB0dXBsZXNbMV1bMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldChcImlwNlwiLCB0dXBsZXNbMF1bMV0pO1xuICAgICAgdGhpcy5zZXQocHJvdG9OYW1lc1sxXSArIFwiNlwiLCB0dXBsZXNbMV1bMV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmdWxsIG11bHRpYWRkciBmcm9tIHRoZSBFTlIgZmllbGRzIG1hdGNoaW5nIHRoZSBwcm92aWRlZFxuICAgKiBgcHJvdG9jb2xgIHBhcmFtZXRlci5cbiAgICogVG8gcmV0dXJuIGZ1bGwgbXVsdGlhZGRycyBmcm9tIHRoZSBgbXVsdGlhZGRyc2AgRU5SIGZpZWxkLFxuICAgKiB1c2UgW1tFTlIuZ2V0RnVsbE11bHRpYWRkcnNdXVxuICAgKlxuICAgKiBAcGFyYW0gcHJvdG9jb2xcbiAgICovXG4gIGdldEZ1bGxNdWx0aWFkZHIoXG4gICAgcHJvdG9jb2w6IFwidWRwXCIgfCBcInVkcDRcIiB8IFwidWRwNlwiIHwgXCJ0Y3BcIiB8IFwidGNwNFwiIHwgXCJ0Y3A2XCJcbiAgKTogTXVsdGlhZGRyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5wZWVySWQpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uTXVsdGlhZGRyID0gdGhpcy5nZXRMb2NhdGlvbk11bHRpYWRkcihwcm90b2NvbCk7XG4gICAgICBpZiAobG9jYXRpb25NdWx0aWFkZHIpIHtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uTXVsdGlhZGRyLmVuY2Fwc3VsYXRlKFxuICAgICAgICAgIGAvcDJwLyR7dGhpcy5wZWVySWQudG9CNThTdHJpbmcoKX1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmdWxsIG11bHRpYWRkcnMgZnJvbSB0aGUgYG11bHRpYWRkcnNgIEVOUiBmaWVsZC5cbiAgICovXG4gIGdldEZ1bGxNdWx0aWFkZHJzKCk6IE11bHRpYWRkcltdIHtcbiAgICBpZiAodGhpcy5wZWVySWQgJiYgdGhpcy5tdWx0aWFkZHJzKSB7XG4gICAgICBjb25zdCBwZWVySWQgPSB0aGlzLnBlZXJJZDtcbiAgICAgIHJldHVybiB0aGlzLm11bHRpYWRkcnMubWFwKChtYSkgPT4ge1xuICAgICAgICByZXR1cm4gbWEuZW5jYXBzdWxhdGUoYC9wMnAvJHtwZWVySWQudG9CNThTdHJpbmcoKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBgd2FrdTJgIGZpZWxkIGZyb20gRU5SLlxuICAgKi9cbiAgZ2V0IHdha3UyKCk6IFdha3UyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCByYXcgPSB0aGlzLmdldChcIndha3UyXCIpO1xuICAgIGlmIChyYXcpIHJldHVybiBkZWNvZGVXYWt1MihyYXdbMF0pO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYHdha3UyYCBmaWVsZCBvbiB0aGUgRU5SLlxuICAgKi9cbiAgc2V0IHdha3UyKHdha3UyOiBXYWt1MiB8IHVuZGVmaW5lZCkge1xuICAgIGlmICh3YWt1MiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmRlbGV0ZShcIndha3UyXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBieXRlID0gZW5jb2RlV2FrdTIod2FrdTIpO1xuICAgICAgdGhpcy5zZXQoXCJ3YWt1MlwiLCBuZXcgVWludDhBcnJheShbYnl0ZV0pKTtcbiAgICB9XG4gIH1cblxuICB2ZXJpZnkoZGF0YTogVWludDhBcnJheSwgc2lnbmF0dXJlOiBVaW50OEFycmF5KTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmdldChcImlkXCIpIHx8IHRoaXMuaWQgIT09IFwidjRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUl9JTlZBTElEX0lEKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnB1YmxpY0tleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHZlcmlmeSBFTlI6IE5vIHB1YmxpYyBrZXlcIik7XG4gICAgfVxuICAgIHJldHVybiB2ZXJpZnlTaWduYXR1cmUoc2lnbmF0dXJlLCBrZWNjYWsyNTYoZGF0YSksIHRoaXMucHVibGljS2V5KTtcbiAgfVxuXG4gIGFzeW5jIHNpZ24oZGF0YTogVWludDhBcnJheSwgcHJpdmF0ZUtleTogVWludDhBcnJheSk6IFByb21pc2U8VWludDhBcnJheT4ge1xuICAgIHN3aXRjaCAodGhpcy5pZCkge1xuICAgICAgY2FzZSBcInY0XCI6XG4gICAgICAgIHRoaXMuc2lnbmF0dXJlID0gYXdhaXQgdjQuc2lnbihwcml2YXRlS2V5LCBkYXRhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoRVJSX0lOVkFMSURfSUQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zaWduYXR1cmU7XG4gIH1cblxuICBhc3luYyBlbmNvZGVUb1ZhbHVlcyhcbiAgICBwcml2YXRlS2V5PzogVWludDhBcnJheVxuICApOiBQcm9taXNlPChFTlJLZXkgfCBFTlJWYWx1ZSB8IG51bWJlcltdKVtdPiB7XG4gICAgLy8gc29ydCBrZXlzIGFuZCBmbGF0dGVuIGludG8gW2ssIHYsIGssIHYsIC4uLl1cbiAgICBjb25zdCBjb250ZW50OiBBcnJheTxFTlJLZXkgfCBFTlJWYWx1ZSB8IG51bWJlcltdPiA9IEFycmF5LmZyb20odGhpcy5rZXlzKCkpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxuICAgICAgLm1hcCgoaykgPT4gW2ssIHRoaXMuZ2V0KGspXSBhcyBbRU5SS2V5LCBFTlJWYWx1ZV0pXG4gICAgICAubWFwKChbaywgdl0pID0+IFt1dGY4VG9CeXRlcyhrKSwgdl0pXG4gICAgICAuZmxhdCgpO1xuICAgIGNvbnRlbnQudW5zaGlmdChuZXcgVWludDhBcnJheShbTnVtYmVyKHRoaXMuc2VxKV0pKTtcbiAgICBpZiAocHJpdmF0ZUtleSkge1xuICAgICAgY29udGVudC51bnNoaWZ0KFxuICAgICAgICBhd2FpdCB0aGlzLnNpZ24oaGV4VG9CeXRlcyhSTFAuZW5jb2RlKGNvbnRlbnQpKSwgcHJpdmF0ZUtleSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdGhpcy5zaWduYXR1cmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUl9OT19TSUdOQVRVUkUpO1xuICAgICAgfVxuICAgICAgY29udGVudC51bnNoaWZ0KHRoaXMuc2lnbmF0dXJlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBhc3luYyBlbmNvZGUocHJpdmF0ZUtleT86IFVpbnQ4QXJyYXkpOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcbiAgICBjb25zdCBlbmNvZGVkID0gaGV4VG9CeXRlcyhcbiAgICAgIFJMUC5lbmNvZGUoYXdhaXQgdGhpcy5lbmNvZGVUb1ZhbHVlcyhwcml2YXRlS2V5KSlcbiAgICApO1xuICAgIGlmIChlbmNvZGVkLmxlbmd0aCA+PSBNQVhfUkVDT1JEX1NJWkUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVOUiBtdXN0IGJlIGxlc3MgdGhhbiAzMDAgYnl0ZXNcIik7XG4gICAgfVxuICAgIHJldHVybiBlbmNvZGVkO1xuICB9XG5cbiAgYXN5bmMgZW5jb2RlVHh0KHByaXZhdGVLZXk/OiBVaW50OEFycmF5KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gKFxuICAgICAgRU5SLlJFQ09SRF9QUkVGSVggKyB0b1N0cmluZyhhd2FpdCB0aGlzLmVuY29kZShwcml2YXRlS2V5KSwgXCJiYXNlNjR1cmxcIilcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyB2NENyeXB0byBmcm9tIFwiLi92NFwiO1xuZXhwb3J0IGNvbnN0IHY0ID0gdjRDcnlwdG87XG5leHBvcnQgKiBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2VuclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHlwZXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2tleXBhaXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3dha3UyX2NvZGVjXCI7XG4iLCJpbXBvcnQgeyBrZXlzIH0gZnJvbSBcImxpYnAycC1jcnlwdG9cIjtcbmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSBcIm11bHRpZm9ybWF0cy9oYXNoZXMvaWRlbnRpdHlcIjtcbmltcG9ydCBQZWVySWQgZnJvbSBcInBlZXItaWRcIjtcblxuaW1wb3J0IHsgU2VjcDI1NmsxS2V5cGFpciB9IGZyb20gXCIuL3NlY3AyNTZrMVwiO1xuaW1wb3J0IHsgSUtleXBhaXIsIEtleXBhaXJUeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuY29uc3QgeyBrZXlzUEJNLCBzdXBwb3J0ZWRLZXlzIH0gPSBrZXlzO1xuXG5leHBvcnQgY29uc3QgRVJSX1RZUEVfTk9UX0lNUExFTUVOVEVEID0gXCJLZXlwYWlyIHR5cGUgbm90IGltcGxlbWVudGVkXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90eXBlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc2VjcDI1NmsxXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUtleXBhaXIodHlwZTogS2V5cGFpclR5cGUpOiBQcm9taXNlPElLZXlwYWlyPiB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgS2V5cGFpclR5cGUuc2VjcDI1NmsxOlxuICAgICAgcmV0dXJuIGF3YWl0IFNlY3AyNTZrMUtleXBhaXIuZ2VuZXJhdGUoKTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKEVSUl9UWVBFX05PVF9JTVBMRU1FTlRFRCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUtleXBhaXIoXG4gIHR5cGU6IEtleXBhaXJUeXBlLFxuICBwcml2YXRlS2V5PzogVWludDhBcnJheSxcbiAgcHVibGljS2V5PzogVWludDhBcnJheVxuKTogSUtleXBhaXIge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIEtleXBhaXJUeXBlLnNlY3AyNTZrMTpcbiAgICAgIHJldHVybiBuZXcgU2VjcDI1NmsxS2V5cGFpcihwcml2YXRlS2V5LCBwdWJsaWNLZXkpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoRVJSX1RZUEVfTk9UX0lNUExFTUVOVEVEKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUGVlcklkRnJvbUtleXBhaXIoXG4gIGtleXBhaXI6IElLZXlwYWlyXG4pOiBQcm9taXNlPFBlZXJJZD4ge1xuICBzd2l0Y2ggKGtleXBhaXIudHlwZSkge1xuICAgIGNhc2UgS2V5cGFpclR5cGUuc2VjcDI1NmsxOiB7XG4gICAgICAvLyBtYW51YWxseSBjcmVhdGUgYSBwZWVyIGlkIHRvIGF2b2lkIGV4cGVuc2l2ZSBvcHNcbiAgICAgIGNvbnN0IHByaXZLZXkgPSBrZXlwYWlyLmhhc1ByaXZhdGVLZXkoKVxuICAgICAgICA/IG5ldyBzdXBwb3J0ZWRLZXlzLnNlY3AyNTZrMS5TZWNwMjU2azFQcml2YXRlS2V5KFxuICAgICAgICAgICAga2V5cGFpci5wcml2YXRlS2V5LFxuICAgICAgICAgICAga2V5cGFpci5wdWJsaWNLZXlcbiAgICAgICAgICApXG4gICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICBjb25zdCBwdWJLZXkgPSBuZXcgc3VwcG9ydGVkS2V5cy5zZWNwMjU2azEuU2VjcDI1NmsxUHVibGljS2V5KFxuICAgICAgICBrZXlwYWlyLnB1YmxpY0tleVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGlkID0gYXdhaXQgaWRlbnRpdHkuZGlnZXN0KHB1YktleS5ieXRlcyk7XG4gICAgICByZXR1cm4gbmV3IFBlZXJJZChpZC5ieXRlcywgcHJpdktleSwgcHViS2V5KTtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihFUlJfVFlQRV9OT1RfSU1QTEVNRU5URUQpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVLZXlwYWlyRnJvbVBlZXJJZChwZWVySWQ6IFBlZXJJZCk6IElLZXlwYWlyIHtcbiAgLy8gcHViL3ByaXZhdGUga2V5IGJ5dGVzIGZyb20gcGVlci1pZCBhcmUgZW5jb2RlZCBpbiBwcm90b2J1ZiBmb3JtYXRcbiAgY29uc3QgcHViID0ga2V5c1BCTS5QdWJsaWNLZXkuZGVjb2RlKHBlZXJJZC5wdWJLZXkuYnl0ZXMpO1xuICByZXR1cm4gY3JlYXRlS2V5cGFpcihcbiAgICBwdWIuVHlwZSBhcyBLZXlwYWlyVHlwZSxcbiAgICBwZWVySWQucHJpdktleSA/IHBlZXJJZC5wcml2S2V5Lm1hcnNoYWwoKSA6IHVuZGVmaW5lZCxcbiAgICBwdWIuRGF0YVxuICApO1xufVxuIiwiaW1wb3J0ICogYXMgc2VjcCBmcm9tIFwiQG5vYmxlL3NlY3AyNTZrMVwiO1xuXG5pbXBvcnQgeyBjb21wcmVzc1B1YmxpY0tleSwgcmFuZG9tQnl0ZXMgfSBmcm9tIFwiLi4vLi4vY3J5cHRvXCI7XG5cbmltcG9ydCB7IElLZXlwYWlyLCBLZXlwYWlyVHlwZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBTZWNwMjU2azFLZXlwYWlyIGltcGxlbWVudHMgSUtleXBhaXIge1xuICByZWFkb25seSB0eXBlOiBLZXlwYWlyVHlwZTtcbiAgX3ByaXZhdGVLZXk/OiBVaW50OEFycmF5O1xuICByZWFkb25seSBfcHVibGljS2V5PzogVWludDhBcnJheTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlS2V5PzogVWludDhBcnJheSwgcHVibGljS2V5PzogVWludDhBcnJheSkge1xuICAgIGxldCBwdWIgPSBwdWJsaWNLZXk7XG4gICAgaWYgKHB1Yikge1xuICAgICAgcHViID0gY29tcHJlc3NQdWJsaWNLZXkocHViKTtcbiAgICB9XG4gICAgaWYgKCh0aGlzLl9wcml2YXRlS2V5ID0gcHJpdmF0ZUtleSkgJiYgIXRoaXMucHJpdmF0ZUtleVZlcmlmeSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHByaXZhdGUga2V5XCIpO1xuICAgIH1cbiAgICBpZiAoKHRoaXMuX3B1YmxpY0tleSA9IHB1YikgJiYgIXRoaXMucHVibGljS2V5VmVyaWZ5KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcHVibGljIGtleVwiKTtcbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSBLZXlwYWlyVHlwZS5zZWNwMjU2azE7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2VuZXJhdGUoKTogUHJvbWlzZTxTZWNwMjU2azFLZXlwYWlyPiB7XG4gICAgY29uc3QgcHJpdmF0ZUtleSA9IHJhbmRvbUJ5dGVzKDMyKTtcbiAgICBjb25zdCBwdWJsaWNLZXkgPSBzZWNwLmdldFB1YmxpY0tleShwcml2YXRlS2V5KTtcbiAgICByZXR1cm4gbmV3IFNlY3AyNTZrMUtleXBhaXIocHJpdmF0ZUtleSwgcHVibGljS2V5KTtcbiAgfVxuXG4gIHByaXZhdGVLZXlWZXJpZnkoa2V5ID0gdGhpcy5fcHJpdmF0ZUtleSk6IGJvb2xlYW4ge1xuICAgIGlmIChrZXkpIHtcbiAgICAgIHJldHVybiBzZWNwLnV0aWxzLmlzVmFsaWRQcml2YXRlS2V5KGtleSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljS2V5VmVyaWZ5KGtleSA9IHRoaXMuX3B1YmxpY0tleSk6IGJvb2xlYW4ge1xuICAgIGlmIChrZXkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlY3AuUG9pbnQuZnJvbUhleChrZXkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0IHByaXZhdGVLZXkoKTogVWludDhBcnJheSB7XG4gICAgaWYgKCF0aGlzLl9wcml2YXRlS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ByaXZhdGVLZXk7XG4gIH1cblxuICBnZXQgcHVibGljS2V5KCk6IFVpbnQ4QXJyYXkge1xuICAgIGlmICghdGhpcy5fcHVibGljS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3B1YmxpY0tleTtcbiAgfVxuXG4gIGhhc1ByaXZhdGVLZXkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5fcHJpdmF0ZUtleTtcbiAgfVxufVxuIiwiZXhwb3J0IGVudW0gS2V5cGFpclR5cGUge1xuICByc2EgPSAwLFxuICBlZDI1NTE5ID0gMSxcbiAgc2VjcDI1NmsxID0gMixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJS2V5cGFpciB7XG4gIHR5cGU6IEtleXBhaXJUeXBlO1xuICBwcml2YXRlS2V5OiBVaW50OEFycmF5O1xuICBwdWJsaWNLZXk6IFVpbnQ4QXJyYXk7XG4gIHByaXZhdGVLZXlWZXJpZnkoKTogYm9vbGVhbjtcbiAgcHVibGljS2V5VmVyaWZ5KCk6IGJvb2xlYW47XG4gIGhhc1ByaXZhdGVLZXkoKTogYm9vbGVhbjtcbn1cbiIsImltcG9ydCB7IE11bHRpYWRkciB9IGZyb20gXCJtdWx0aWFkZHJcIjtcblxuaW1wb3J0IHsgTVVMVElBRERSX0xFTkdUSF9TSVpFIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVNdWx0aWFkZHJzKGJ5dGVzOiBVaW50OEFycmF5KTogTXVsdGlhZGRyW10ge1xuICBjb25zdCBtdWx0aWFkZHJzID0gW107XG5cbiAgbGV0IGluZGV4ID0gMDtcblxuICB3aGlsZSAoaW5kZXggPCBieXRlcy5sZW5ndGgpIHtcbiAgICBjb25zdCBzaXplRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoXG4gICAgICBieXRlcy5idWZmZXIsXG4gICAgICBpbmRleCxcbiAgICAgIE1VTFRJQUREUl9MRU5HVEhfU0laRVxuICAgICk7XG4gICAgY29uc3Qgc2l6ZSA9IHNpemVEYXRhVmlldy5nZXRVaW50MTYoMCk7XG4gICAgaW5kZXggKz0gTVVMVElBRERSX0xFTkdUSF9TSVpFO1xuXG4gICAgY29uc3QgbXVsdGlhZGRyQnl0ZXMgPSBieXRlcy5zbGljZShpbmRleCwgaW5kZXggKyBzaXplKTtcbiAgICBpbmRleCArPSBzaXplO1xuXG4gICAgY29uc3QgbXVsdGlhZGRyID0gbmV3IE11bHRpYWRkcihtdWx0aWFkZHJCeXRlcyk7XG4gICAgbXVsdGlhZGRycy5wdXNoKG11bHRpYWRkcik7XG4gIH1cbiAgcmV0dXJuIG11bHRpYWRkcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVNdWx0aWFkZHJzKG11bHRpYWRkcnM6IE11bHRpYWRkcltdKTogVWludDhBcnJheSB7XG4gIGNvbnN0IHRvdGFsTGVuZ3RoID0gbXVsdGlhZGRycy5yZWR1Y2UoXG4gICAgKGFjYywgbWEpID0+IGFjYyArIE1VTFRJQUREUl9MRU5HVEhfU0laRSArIG1hLmJ5dGVzLmxlbmd0aCxcbiAgICAwXG4gICk7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpO1xuICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhieXRlcy5idWZmZXIpO1xuXG4gIGxldCBpbmRleCA9IDA7XG4gIG11bHRpYWRkcnMuZm9yRWFjaCgobXVsdGlhZGRyKSA9PiB7XG4gICAgaWYgKG11bHRpYWRkci5nZXRQZWVySWQoKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImBtdWx0aWFkZHJgIGZpZWxkIE1VU1Qgbm90IGNvbnRhaW4gcGVlciBpZFwiKTtcblxuICAgIC8vIFByZXBlbmQgdGhlIHNpemUgb2YgdGhlIG5leHQgZW50cnlcbiAgICBkYXRhVmlldy5zZXRVaW50MTYoaW5kZXgsIG11bHRpYWRkci5ieXRlcy5sZW5ndGgpO1xuICAgIGluZGV4ICs9IE1VTFRJQUREUl9MRU5HVEhfU0laRTtcblxuICAgIGJ5dGVzLnNldChtdWx0aWFkZHIuYnl0ZXMsIGluZGV4KTtcbiAgICBpbmRleCArPSBtdWx0aWFkZHIuYnl0ZXMubGVuZ3RoO1xuICB9KTtcblxuICByZXR1cm4gYnl0ZXM7XG59XG4iLCJpbXBvcnQgKiBhcyBzZWNwIGZyb20gXCJAbm9ibGUvc2VjcDI1NmsxXCI7XG5cbmltcG9ydCB7IGtlY2NhazI1NiB9IGZyb20gXCIuLi9jcnlwdG9cIjtcbmltcG9ydCB7IGJ5dGVzVG9IZXggfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW1wb3J0IHsgTm9kZUlkIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ24oXG4gIHByaXZLZXk6IFVpbnQ4QXJyYXksXG4gIG1zZzogVWludDhBcnJheVxuKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XG4gIHJldHVybiBzZWNwLnNpZ24oa2VjY2FrMjU2KG1zZyksIHByaXZLZXksIHtcbiAgICBkZXI6IGZhbHNlLFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vZGVJZChwdWJLZXk6IFVpbnQ4QXJyYXkpOiBOb2RlSWQge1xuICBjb25zdCBwdWJsaWNLZXkgPSBzZWNwLlBvaW50LmZyb21IZXgocHViS2V5KTtcbiAgY29uc3QgdW5jb21wcmVzc2VkUHVia2V5ID0gcHVibGljS2V5LnRvUmF3Qnl0ZXMoZmFsc2UpO1xuXG4gIHJldHVybiBieXRlc1RvSGV4KGtlY2NhazI1Nih1bmNvbXByZXNzZWRQdWJrZXkuc2xpY2UoMSkpKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgV2FrdTIge1xuICByZWxheTogYm9vbGVhbjtcbiAgc3RvcmU6IGJvb2xlYW47XG4gIGZpbHRlcjogYm9vbGVhbjtcbiAgbGlnaHRQdXNoOiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlV2FrdTIocHJvdG9jb2xzOiBXYWt1Mik6IG51bWJlciB7XG4gIGxldCBieXRlID0gMDtcblxuICBpZiAocHJvdG9jb2xzLmxpZ2h0UHVzaCkgYnl0ZSArPSAxO1xuICBieXRlID0gYnl0ZSA8PCAxO1xuICBpZiAocHJvdG9jb2xzLmZpbHRlcikgYnl0ZSArPSAxO1xuICBieXRlID0gYnl0ZSA8PCAxO1xuICBpZiAocHJvdG9jb2xzLnN0b3JlKSBieXRlICs9IDE7XG4gIGJ5dGUgPSBieXRlIDw8IDE7XG4gIGlmIChwcm90b2NvbHMucmVsYXkpIGJ5dGUgKz0gMTtcblxuICByZXR1cm4gYnl0ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVdha3UyKGJ5dGU6IG51bWJlcik6IFdha3UyIHtcbiAgY29uc3Qgd2FrdTIgPSB7XG4gICAgcmVsYXk6IGZhbHNlLFxuICAgIHN0b3JlOiBmYWxzZSxcbiAgICBmaWx0ZXI6IGZhbHNlLFxuICAgIGxpZ2h0UHVzaDogZmFsc2UsXG4gIH07XG5cbiAgaWYgKGJ5dGUgJSAyKSB3YWt1Mi5yZWxheSA9IHRydWU7XG4gIGJ5dGUgPSBieXRlID4+IDE7XG4gIGlmIChieXRlICUgMikgd2FrdTIuc3RvcmUgPSB0cnVlO1xuICBieXRlID0gYnl0ZSA+PiAxO1xuICBpZiAoYnl0ZSAlIDIpIHdha3UyLmZpbHRlciA9IHRydWU7XG4gIGJ5dGUgPSBieXRlID4+IDE7XG4gIGlmIChieXRlICUgMikgd2FrdTIubGlnaHRQdXNoID0gdHJ1ZTtcblxuICByZXR1cm4gd2FrdTI7XG59XG4iLCJpbXBvcnQgTGlicDJwIGZyb20gXCJsaWJwMnBcIjtcbmltcG9ydCB7IFBlZXIgfSBmcm9tIFwibGlicDJwL3NyYy9wZWVyLXN0b3JlXCI7XG5cbi8qKlxuICogUmV0dXJucyBhIHBzZXVkby1yYW5kb20gcGVlciB0aGF0IHN1cHBvcnRzIHRoZSBnaXZlbiBwcm90b2NvbC5cbiAqIFVzZWZ1bCBmb3IgcHJvdG9jb2xzIHN1Y2ggYXMgc3RvcmUgYW5kIGxpZ2h0IHB1c2hcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbGVjdFJhbmRvbVBlZXIoXG4gIHBlZXJzSXRlcjogQXN5bmNJdGVyYWJsZTxQZWVyPlxuKTogUHJvbWlzZTxQZWVyIHwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IHBlZXJzID0gW107XG4gIGZvciBhd2FpdCAoY29uc3QgcGVlciBvZiBwZWVyc0l0ZXIpIHtcbiAgICBwZWVycy5wdXNoKHBlZXIpO1xuICB9XG5cbiAgaWYgKHBlZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gIGNvbnN0IGluZGV4ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKHBlZXJzLmxlbmd0aCAtIDEpKTtcbiAgcmV0dXJuIHBlZXJzW2luZGV4XTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHBlZXJzIHRoYXQgc3VwcG9ydHMgdGhlIGdpdmVuIHByb3RvY29sLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24qIGdldFBlZXJzRm9yUHJvdG9jb2woXG4gIGxpYnAycDogTGlicDJwLFxuICBwcm90b2NvbHM6IHN0cmluZ1tdXG4pOiBBc3luY0l0ZXJhYmxlPFBlZXI+IHtcbiAgZm9yIGF3YWl0IChjb25zdCBwZWVyIG9mIGxpYnAycC5wZWVyU3RvcmUuZ2V0UGVlcnMoKSkge1xuICAgIGxldCBwZWVyRm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3RvY29scy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHBlZXIucHJvdG9jb2xzLmluY2x1ZGVzKHByb3RvY29sc1tpXSkpIHtcbiAgICAgICAgcGVlckZvdW5kID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghcGVlckZvdW5kKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgeWllbGQgcGVlcjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZnJvbVN0cmluZyB9IGZyb20gXCJ1aW50OGFycmF5cy9mcm9tLXN0cmluZ1wiO1xuaW1wb3J0IHsgdG9TdHJpbmcgfSBmcm9tIFwidWludDhhcnJheXMvdG8tc3RyaW5nXCI7XG5cbi8qKlxuICogQ29udmVydCBpbnB1dCB0byBhIGJ5dGUgYXJyYXkuXG4gKlxuICogSGFuZGxlcyBib3RoIGAweGAgcHJlZml4ZWQgYW5kIG5vbi1wcmVmaXhlZCBzdHJpbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGV4VG9CeXRlcyhoZXg6IHN0cmluZyB8IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgaWYgKHR5cGVvZiBoZXggPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBfaGV4ID0gaGV4LnJlcGxhY2UoL14weC9pLCBcIlwiKTtcbiAgICByZXR1cm4gZnJvbVN0cmluZyhfaGV4LCBcImJhc2UxNlwiKTtcbiAgfVxuICByZXR1cm4gaGV4O1xufVxuXG4vKipcbiAqIENvbnZlcnQgYnl0ZSBhcnJheSB0byBoZXggc3RyaW5nIChubyBgMHhgIHByZWZpeCkuXG4gKi9cbmV4cG9ydCBjb25zdCBieXRlc1RvSGV4ID0gKGJ5dGVzOiBVaW50OEFycmF5KTogc3RyaW5nID0+XG4gIHRvU3RyaW5nKGJ5dGVzLCBcImJhc2UxNlwiKTtcblxuLyoqXG4gKiBEZWNvZGUgYnl0ZSBhcnJheSB0byB1dGYtOCBzdHJpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBieXRlc1RvVXRmOCA9IChiOiBVaW50OEFycmF5KTogc3RyaW5nID0+IHRvU3RyaW5nKGIsIFwidXRmOFwiKTtcblxuLyoqXG4gKiBFbmNvZGUgdXRmLTggc3RyaW5nIHRvIGJ5dGUgYXJyYXkuXG4gKi9cbmV4cG9ydCBjb25zdCB1dGY4VG9CeXRlcyA9IChzOiBzdHJpbmcpOiBVaW50OEFycmF5ID0+IGZyb21TdHJpbmcocywgXCJ1dGY4XCIpO1xuIiwiaW1wb3J0IHsgTm9pc2UgfSBmcm9tIFwiQGNoYWluc2FmZS9saWJwMnAtbm9pc2VcIjtcbmltcG9ydCBkZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCBMaWJwMnAsIHsgQ29ubmVjdGlvbiwgTGlicDJwTW9kdWxlcywgTGlicDJwT3B0aW9ucyB9IGZyb20gXCJsaWJwMnBcIjtcbmltcG9ydCBMaWJwMnBCb290c3RyYXAgZnJvbSBcImxpYnAycC1ib290c3RyYXBcIjtcbmltcG9ydCB7IE11eGVkU3RyZWFtIH0gZnJvbSBcImxpYnAycC1pbnRlcmZhY2VzL2Rpc3Qvc3JjL3N0cmVhbS1tdXhlci90eXBlc1wiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuLy8gQHRzLWlnbm9yZTogTm8gdHlwZXMgYXZhaWxhYmxlXG5pbXBvcnQgTXBsZXggZnJvbSBcImxpYnAycC1tcGxleFwiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuLy8gQHRzLWlnbm9yZTogTm8gdHlwZXMgYXZhaWxhYmxlXG5pbXBvcnQgV2Vic29ja2V0cyBmcm9tIFwibGlicDJwLXdlYnNvY2tldHNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbi8vIEB0cy1pZ25vcmU6IE5vIHR5cGVzIGF2YWlsYWJsZVxuaW1wb3J0IGZpbHRlcnMgZnJvbSBcImxpYnAycC13ZWJzb2NrZXRzL3NyYy9maWx0ZXJzXCI7XG5pbXBvcnQgUGluZ1NlcnZpY2UgZnJvbSBcImxpYnAycC9zcmMvcGluZ1wiO1xuaW1wb3J0IHsgTXVsdGlhZGRyLCBtdWx0aWFkZHIgfSBmcm9tIFwibXVsdGlhZGRyXCI7XG5pbXBvcnQgUGVlcklkIGZyb20gXCJwZWVyLWlkXCI7XG5cbmltcG9ydCB7IEJvb3RzdHJhcCwgQm9vdHN0cmFwT3B0aW9ucyB9IGZyb20gXCIuL2Rpc2NvdmVyeVwiO1xuaW1wb3J0IHsgRmlsdGVyQ29kZWMsIFdha3VGaWx0ZXIgfSBmcm9tIFwiLi93YWt1X2ZpbHRlclwiO1xuaW1wb3J0IHsgTGlnaHRQdXNoQ29kZWMsIFdha3VMaWdodFB1c2ggfSBmcm9tIFwiLi93YWt1X2xpZ2h0X3B1c2hcIjtcbmltcG9ydCB7IERlY3J5cHRpb25NZXRob2QsIFdha3VNZXNzYWdlIH0gZnJvbSBcIi4vd2FrdV9tZXNzYWdlXCI7XG5pbXBvcnQgeyBSZWxheUNvZGVjcywgV2FrdVJlbGF5IH0gZnJvbSBcIi4vd2FrdV9yZWxheVwiO1xuaW1wb3J0IHsgUmVsYXlQaW5nQ29udGVudFRvcGljIH0gZnJvbSBcIi4vd2FrdV9yZWxheS9jb25zdGFudHNcIjtcbmltcG9ydCB7IFN0b3JlQ29kZWNzLCBXYWt1U3RvcmUgfSBmcm9tIFwiLi93YWt1X3N0b3JlXCI7XG5cbmNvbnN0IHdlYnNvY2tldHNUcmFuc3BvcnRLZXkgPSBXZWJzb2NrZXRzLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddO1xuXG5leHBvcnQgY29uc3QgRGVmYXVsdFBpbmdLZWVwQWxpdmVWYWx1ZVNlY3MgPSAwO1xuZXhwb3J0IGNvbnN0IERlZmF1bHRSZWxheUtlZXBBbGl2ZVZhbHVlU2VjcyA9IDUgKiA2MDtcblxuLyoqXG4gKiBEZWZhdWx0UHViU3ViVG9waWMgaXMgdGhlIGRlZmF1bHQgZ29zc2lwc3ViIHRvcGljIHRvIHVzZSBmb3IgV2FrdS5cbiAqL1xuZXhwb3J0IGNvbnN0IERlZmF1bHRQdWJTdWJUb3BpYyA9IFwiL3dha3UvMi9kZWZhdWx0LXdha3UvcHJvdG9cIjtcblxuY29uc3QgZGJnID0gZGVidWcoXCJ3YWt1Ondha3VcIik7XG5cbmV4cG9ydCBlbnVtIFByb3RvY29scyB7XG4gIFJlbGF5ID0gXCJyZWxheVwiLFxuICBTdG9yZSA9IFwic3RvcmVcIixcbiAgTGlnaHRQdXNoID0gXCJsaWdodHB1c2hcIixcbiAgRmlsdGVyID0gXCJmaWx0ZXJcIixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBQdWJTdWIgVG9waWMgdG8gdXNlLiBEZWZhdWx0cyB0byB7QGxpbmsgRGVmYXVsdFB1YlN1YlRvcGljfS5cbiAgICpcbiAgICogT25lIGFuZCBvbmx5IG9uZSBwdWJzdWIgdG9waWMgaXMgdXNlZCBieSBXYWt1LiBUaGlzIGlzIHVzZWQgYnk6XG4gICAqIC0gV2FrdVJlbGF5IHRvIHJlY2VpdmUsIHJvdXRlIGFuZCBzZW5kIG1lc3NhZ2VzLFxuICAgKiAtIFdha3VMaWdodFB1c2ggdG8gc2VuZCBtZXNzYWdlcyxcbiAgICogLSBXYWt1U3RvcmUgdG8gcmV0cmlldmUgbWVzc2FnZXMuXG4gICAqXG4gICAqIFRoZSB1c2FnZSBvZiB0aGUgZGVmYXVsdCBwdWJzdWIgdG9waWMgaXMgcmVjb21tZW5kZWQuXG4gICAqIFNlZSBbV2FrdSB2MiBUb3BpYyBVc2FnZSBSZWNvbW1lbmRhdGlvbnNdKGh0dHBzOi8vcmZjLnZhYy5kZXYvc3BlYy8yMy8pIGZvciBkZXRhaWxzLlxuICAgKlxuICAgKiBAZGVmYXVsdCB7QGxpbmsgRGVmYXVsdFB1YlN1YlRvcGljfVxuICAgKi9cbiAgcHViU3ViVG9waWM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTZXQga2VlcCBhbGl2ZSBmcmVxdWVuY3kgaW4gc2Vjb25kczogV2FrdSB3aWxsIHNlbmQgYSBgL2lwZnMvcGluZy8xLjAuMGBcbiAgICogcmVxdWVzdCB0byBlYWNoIHBlZXIgYWZ0ZXIgdGhlIHNldCBudW1iZXIgb2Ygc2Vjb25kcy4gU2V0IHRvIDAgdG8gZGlzYWJsZS5cbiAgICpcbiAgICogQGRlZmF1bHQge0BsaW5rIERlZmF1bHRQaW5nS2VlcEFsaXZlVmFsdWVTZWNzfVxuICAgKi9cbiAgcGluZ0tlZXBBbGl2ZT86IG51bWJlcjtcbiAgLyoqXG4gICAqIFNldCBrZWVwIGFsaXZlIGZyZXF1ZW5jeSBpbiBzZWNvbmRzOiBXYWt1IHdpbGwgc2VuZCBhIHBpbmcgbWVzc2FnZSBvdmVyXG4gICAqIHJlbGF5IHRvIGVhY2ggcGVlciBhZnRlciB0aGUgc2V0IG51bWJlciBvZiBzZWNvbmRzLiBTZXQgdG8gMCB0byBkaXNhYmxlLlxuICAgKlxuICAgKiBAZGVmYXVsdCB7QGxpbmsgRGVmYXVsdFJlbGF5S2VlcEFsaXZlVmFsdWVTZWNzfVxuICAgKi9cbiAgcmVsYXlLZWVwQWxpdmU/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBZb3UgY2FuIHBhc3Mgb3B0aW9ucyB0byB0aGUgYExpYnAycGAgaW5zdGFuY2UgdXNlZCBieSB7QGxpbmsgV2FrdX0gdXNpbmcgdGhlIHtAbGluayBDcmVhdGVPcHRpb25zLmxpYnAycH0gcHJvcGVydHkuXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgdGhlIHNhbWUgdHlwZSB0aGFuIHRoZSBvbmUgcGFzc2VkIHRvIFtgTGlicDJwLmNyZWF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9saWJwMnAvanMtbGlicDJwL2Jsb2IvbWFzdGVyL2RvYy9BUEkubWQjY3JlYXRlKVxuICAgKiBhcGFydCB0aGF0IHdlIG1hZGUgdGhlIGBtb2R1bGVzYCBwcm9wZXJ0eSBvcHRpb25hbCBhbmQgcGFydGlhbCxcbiAgICogYWxsb3dpbmcgaXRzIG9taXNzaW9uIGFuZCBsZXR0aW5nIFdha3Ugc2V0IGdvb2QgZGVmYXVsdHMuXG4gICAqIE5vdGVzIHRoYXQgc29tZSB2YWx1ZXMgYXJlIG92ZXJyaWRkZW4gYnkge0BsaW5rIFdha3V9IHRvIGVuc3VyZSBpdCBpbXBsZW1lbnRzIHRoZSBXYWt1IHByb3RvY29sLlxuICAgKi9cbiAgbGlicDJwPzogT21pdDxMaWJwMnBPcHRpb25zICYgaW1wb3J0KFwibGlicDJwXCIpLkNyZWF0ZU9wdGlvbnMsIFwibW9kdWxlc1wiPiAmIHtcbiAgICBtb2R1bGVzPzogUGFydGlhbDxMaWJwMnBNb2R1bGVzPjtcbiAgfTtcbiAgLyoqXG4gICAqIEJ5dGUgYXJyYXkgdXNlZCBhcyBrZXkgZm9yIHRoZSBub2lzZSBwcm90b2NvbCB1c2VkIGZvciBjb25uZWN0aW9uIGVuY3J5cHRpb25cbiAgICogYnkgW2BMaWJwMnAuY3JlYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2xpYnAycC9qcy1saWJwMnAvYmxvYi9tYXN0ZXIvZG9jL0FQSS5tZCNjcmVhdGUpXG4gICAqIFRoaXMgaXMgb25seSB1c2VkIGZvciB0ZXN0IHB1cnBvc2VzIHRvIG5vdCBydW4gb3V0IG9mIGVudHJvcHkgZHVyaW5nIENJIHJ1bnMuXG4gICAqL1xuICBzdGF0aWNOb2lzZUtleT86IFVpbnQ4QXJyYXk7XG4gIC8qKlxuICAgKiBVc2UgbGlicDJwLWJvb3RzdHJhcCB0byBkaXNjb3ZlciBhbmQgY29ubmVjdCB0byBuZXcgbm9kZXMuXG4gICAqXG4gICAqIFNlZSBbW0Jvb3RzdHJhcE9wdGlvbnNdXSBmb3IgYXZhaWxhYmxlIHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIE5vdGU6IEl0IG92ZXJyaWRlcyBhbnkgb3RoZXIgcGVlckRpc2NvdmVyeSBtb2R1bGVzIHRoYXQgbWF5IGhhdmUgYmVlbiBzZXQgdmlhXG4gICAqIHtAbGluayBDcmVhdGVPcHRpb25zLmxpYnAycH0uXG4gICAqL1xuICBib290c3RyYXA/OiBCb290c3RyYXBPcHRpb25zO1xuICBkZWNyeXB0aW9uS2V5cz86IEFycmF5PFVpbnQ4QXJyYXkgfCBzdHJpbmc+O1xufVxuXG5leHBvcnQgY2xhc3MgV2FrdSB7XG4gIHB1YmxpYyBsaWJwMnA6IExpYnAycDtcbiAgcHVibGljIHJlbGF5OiBXYWt1UmVsYXk7XG4gIHB1YmxpYyBzdG9yZTogV2FrdVN0b3JlO1xuICBwdWJsaWMgZmlsdGVyOiBXYWt1RmlsdGVyO1xuICBwdWJsaWMgbGlnaHRQdXNoOiBXYWt1TGlnaHRQdXNoO1xuXG4gIHByaXZhdGUgcGluZ0tlZXBBbGl2ZVRpbWVyczoge1xuICAgIFtwZWVyOiBzdHJpbmddOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRJbnRlcnZhbD47XG4gIH07XG4gIHByaXZhdGUgcmVsYXlLZWVwQWxpdmVUaW1lcnM6IHtcbiAgICBbcGVlcjogc3RyaW5nXTogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+O1xuICB9O1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogQ3JlYXRlT3B0aW9ucyxcbiAgICBsaWJwMnA6IExpYnAycCxcbiAgICBzdG9yZTogV2FrdVN0b3JlLFxuICAgIGxpZ2h0UHVzaDogV2FrdUxpZ2h0UHVzaCxcbiAgICBmaWx0ZXI6IFdha3VGaWx0ZXJcbiAgKSB7XG4gICAgdGhpcy5saWJwMnAgPSBsaWJwMnA7XG4gICAgdGhpcy5yZWxheSA9IGxpYnAycC5wdWJzdWIgYXMgdW5rbm93biBhcyBXYWt1UmVsYXk7XG4gICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIHRoaXMuZmlsdGVyID0gZmlsdGVyO1xuICAgIHRoaXMubGlnaHRQdXNoID0gbGlnaHRQdXNoO1xuICAgIHRoaXMucGluZ0tlZXBBbGl2ZVRpbWVycyA9IHt9O1xuICAgIHRoaXMucmVsYXlLZWVwQWxpdmVUaW1lcnMgPSB7fTtcblxuICAgIGNvbnN0IHBpbmdLZWVwQWxpdmUgPVxuICAgICAgb3B0aW9ucy5waW5nS2VlcEFsaXZlIHx8IERlZmF1bHRQaW5nS2VlcEFsaXZlVmFsdWVTZWNzO1xuICAgIGNvbnN0IHJlbGF5S2VlcEFsaXZlID1cbiAgICAgIG9wdGlvbnMucmVsYXlLZWVwQWxpdmUgfHwgRGVmYXVsdFJlbGF5S2VlcEFsaXZlVmFsdWVTZWNzO1xuXG4gICAgbGlicDJwLmNvbm5lY3Rpb25NYW5hZ2VyLm9uKFwicGVlcjpjb25uZWN0XCIsIChjb25uZWN0aW9uOiBDb25uZWN0aW9uKSA9PiB7XG4gICAgICB0aGlzLnN0YXJ0S2VlcEFsaXZlKGNvbm5lY3Rpb24ucmVtb3RlUGVlciwgcGluZ0tlZXBBbGl2ZSwgcmVsYXlLZWVwQWxpdmUpO1xuICAgIH0pO1xuXG4gICAgbGlicDJwLmNvbm5lY3Rpb25NYW5hZ2VyLm9uKFwicGVlcjpkaXNjb25uZWN0XCIsIChjb25uZWN0aW9uOiBDb25uZWN0aW9uKSA9PiB7XG4gICAgICB0aGlzLnN0b3BLZWVwQWxpdmUoY29ubmVjdGlvbi5yZW1vdGVQZWVyKTtcbiAgICB9KTtcblxuICAgIG9wdGlvbnM/LmRlY3J5cHRpb25LZXlzPy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRoaXMuYWRkRGVjcnlwdGlvbktleShrZXkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgc3RhcnQgbmV3IHdha3Ugbm9kZS5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUob3B0aW9ucz86IENyZWF0ZU9wdGlvbnMpOiBQcm9taXNlPFdha3U+IHtcbiAgICAvLyBHZXQgYW4gb2JqZWN0IGluIGNhc2Ugb3B0aW9ucyBvciBsaWJwMnAgYXJlIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxpYnAycE9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zPy5saWJwMnApO1xuXG4gICAgLy8gRGVmYXVsdCBmb3IgV2Vic29ja2V0IGZpbHRlciBpcyBgYWxsYDpcbiAgICAvLyBSZXR1cm5zIGFsbCBUQ1AgYW5kIEROUyBiYXNlZCBhZGRyZXNzZXMsIGJvdGggd2l0aCB3cyBvciB3c3MuXG4gICAgbGlicDJwT3B0cy5jb25maWcgPSBPYmplY3QuYXNzaWduKFxuICAgICAge1xuICAgICAgICB0cmFuc3BvcnQ6IHtcbiAgICAgICAgICBbd2Vic29ja2V0c1RyYW5zcG9ydEtleV06IHtcbiAgICAgICAgICAgIGZpbHRlcjogZmlsdGVycy5hbGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBvcHRpb25zPy5saWJwMnA/LmNvbmZpZ1xuICAgICk7XG5cbiAgICAvLyBQYXNzIHB1YnN1YiB0b3BpYyB0byByZWxheVxuICAgIGlmIChvcHRpb25zPy5wdWJTdWJUb3BpYykge1xuICAgICAgbGlicDJwT3B0cy5jb25maWcucHVic3ViID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgeyBwdWJTdWJUb3BpYzogb3B0aW9ucy5wdWJTdWJUb3BpYyB9LFxuICAgICAgICBsaWJwMnBPcHRzLmNvbmZpZy5wdWJzdWJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGlicDJwT3B0cy5tb2R1bGVzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucz8ubGlicDJwPy5tb2R1bGVzKTtcblxuICAgIC8vIERlZmF1bHQgdHJhbnNwb3J0IGZvciBsaWJwMnAgaXMgV2Vic29ja2V0c1xuICAgIGxpYnAycE9wdHMubW9kdWxlcyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7XG4gICAgICAgIHRyYW5zcG9ydDogW1dlYnNvY2tldHNdLFxuICAgICAgfSxcbiAgICAgIG9wdGlvbnM/LmxpYnAycD8ubW9kdWxlc1xuICAgICk7XG5cbiAgICAvLyBzdHJlYW1NdXhlciwgY29ubmVjdGlvbiBlbmNyeXB0aW9uIGFuZCBwdWJzdWIgYXJlIG92ZXJyaWRkZW5cbiAgICAvLyBhcyB0aG9zZSBhcmUgdGhlIG9ubHkgb25lcyBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IFdha3Ugbm9kZXMuXG4gICAgbGlicDJwT3B0cy5tb2R1bGVzID0gT2JqZWN0LmFzc2lnbihsaWJwMnBPcHRzLm1vZHVsZXMsIHtcbiAgICAgIHN0cmVhbU11eGVyOiBbTXBsZXhdLFxuICAgICAgY29ubkVuY3J5cHRpb246IFtuZXcgTm9pc2Uob3B0aW9ucz8uc3RhdGljTm9pc2VLZXkpXSxcbiAgICAgIHB1YnN1YjogV2FrdVJlbGF5LFxuICAgIH0pO1xuXG4gICAgaWYgKG9wdGlvbnM/LmJvb3RzdHJhcCkge1xuICAgICAgY29uc3QgYm9vdHN0cmFwID0gbmV3IEJvb3RzdHJhcChvcHRpb25zPy5ib290c3RyYXApO1xuXG4gICAgICBpZiAoYm9vdHN0cmFwLmdldEJvb3RzdHJhcFBlZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBsaXN0ID0gYXdhaXQgYm9vdHN0cmFwLmdldEJvb3RzdHJhcFBlZXJzKCk7XG5cbiAgICAgICAgICAvLyBOb3RlOiB0aGlzIG92ZXJyaWRlcyBhbnkgb3RoZXIgcGVlciBkaXNjb3ZlclxuICAgICAgICAgIGxpYnAycE9wdHMubW9kdWxlcyA9IE9iamVjdC5hc3NpZ24obGlicDJwT3B0cy5tb2R1bGVzLCB7XG4gICAgICAgICAgICBwZWVyRGlzY292ZXJ5OiBbTGlicDJwQm9vdHN0cmFwXSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGxpYnAycE9wdHMuY29uZmlnLnBlZXJEaXNjb3ZlcnkgPSB7XG4gICAgICAgICAgICBbTGlicDJwQm9vdHN0cmFwLnRhZ106IHtcbiAgICAgICAgICAgICAgbGlzdCxcbiAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGRiZyhcIkZhaWxlZCB0byByZXRyaWV2ZSBib290c3RyYXAgbm9kZXNcIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgLy8gQHRzLWlnbm9yZTogbW9kdWxlcyBwcm9wZXJ0eSBpcyBjb3JyZWN0bHkgc2V0IHRoYW5rcyB0byB2b29kb29cbiAgICBjb25zdCBsaWJwMnAgPSBhd2FpdCBMaWJwMnAuY3JlYXRlKGxpYnAycE9wdHMpO1xuXG4gICAgY29uc3Qgd2FrdVN0b3JlID0gbmV3IFdha3VTdG9yZShsaWJwMnAsIHtcbiAgICAgIHB1YlN1YlRvcGljOiBvcHRpb25zPy5wdWJTdWJUb3BpYyxcbiAgICB9KTtcbiAgICBjb25zdCB3YWt1TGlnaHRQdXNoID0gbmV3IFdha3VMaWdodFB1c2gobGlicDJwKTtcbiAgICBjb25zdCB3YWt1RmlsdGVyID0gbmV3IFdha3VGaWx0ZXIobGlicDJwKTtcblxuICAgIGF3YWl0IGxpYnAycC5zdGFydCgpO1xuXG4gICAgcmV0dXJuIG5ldyBXYWt1KFxuICAgICAgb3B0aW9ucyA/IG9wdGlvbnMgOiB7fSxcbiAgICAgIGxpYnAycCxcbiAgICAgIHdha3VTdG9yZSxcbiAgICAgIHdha3VMaWdodFB1c2gsXG4gICAgICB3YWt1RmlsdGVyXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaWFscyB0byB0aGUgcHJvdmlkZWQgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHBlZXIgVGhlIHBlZXIgdG8gZGlhbFxuICAgKiBAcGFyYW0gcHJvdG9jb2xzIFdha3UgcHJvdG9jb2xzIHdlIGV4cGVjdCBmcm9tIHRoZSBwZWVyOyBEZWZhdWx0IHRvIFJlbGF5XG4gICAqL1xuICBhc3luYyBkaWFsKFxuICAgIHBlZXI6IFBlZXJJZCB8IE11bHRpYWRkciB8IHN0cmluZyxcbiAgICBwcm90b2NvbHM/OiBQcm90b2NvbHNbXVxuICApOiBQcm9taXNlPHtcbiAgICBzdHJlYW06IE11eGVkU3RyZWFtO1xuICAgIHByb3RvY29sOiBzdHJpbmc7XG4gIH0+IHtcbiAgICBjb25zdCBfcHJvdG9jb2xzID0gcHJvdG9jb2xzID8/IFtQcm90b2NvbHMuUmVsYXldO1xuXG4gICAgY29uc3QgY29kZWNzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChfcHJvdG9jb2xzLmluY2x1ZGVzKFByb3RvY29scy5SZWxheSkpIHtcbiAgICAgIFJlbGF5Q29kZWNzLmZvckVhY2goKGNvZGVjKSA9PiBjb2RlY3MucHVzaChjb2RlYykpO1xuICAgIH1cbiAgICBpZiAoX3Byb3RvY29scy5pbmNsdWRlcyhQcm90b2NvbHMuU3RvcmUpKSB7XG4gICAgICBmb3IgKGNvbnN0IGNvZGVjIG9mIE9iamVjdC52YWx1ZXMoU3RvcmVDb2RlY3MpKSB7XG4gICAgICAgIGNvZGVjcy5wdXNoKGNvZGVjKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKF9wcm90b2NvbHMuaW5jbHVkZXMoUHJvdG9jb2xzLkxpZ2h0UHVzaCkpIHtcbiAgICAgIGNvZGVjcy5wdXNoKExpZ2h0UHVzaENvZGVjKTtcbiAgICB9XG4gICAgaWYgKF9wcm90b2NvbHMuaW5jbHVkZXMoUHJvdG9jb2xzLkZpbHRlcikpIHtcbiAgICAgIGNvZGVjcy5wdXNoKEZpbHRlckNvZGVjKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5saWJwMnAuZGlhbFByb3RvY29sKHBlZXIsIGNvZGVjcyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHBlZXIgdG8gYWRkcmVzcyBib29rLCBpdCB3aWxsIGJlIGF1dG8tZGlhbGVkIGluIHRoZSBiYWNrZ3JvdW5kLlxuICAgKi9cbiAgYWRkUGVlclRvQWRkcmVzc0Jvb2soXG4gICAgcGVlcklkOiBQZWVySWQgfCBzdHJpbmcsXG4gICAgbXVsdGlhZGRyczogTXVsdGlhZGRyW10gfCBzdHJpbmdbXVxuICApOiB2b2lkIHtcbiAgICBsZXQgcGVlcjtcbiAgICBpZiAodHlwZW9mIHBlZXJJZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcGVlciA9IFBlZXJJZC5jcmVhdGVGcm9tQjU4U3RyaW5nKHBlZXJJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBlZXIgPSBwZWVySWQ7XG4gICAgfVxuICAgIGNvbnN0IGFkZHJlc3NlcyA9IG11bHRpYWRkcnMubWFwKChhZGRyOiBNdWx0aWFkZHIgfCBzdHJpbmcpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYWRkciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gbXVsdGlhZGRyKGFkZHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFkZHI7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5saWJwMnAucGVlclN0b3JlLmFkZHJlc3NCb29rLnNldChwZWVyLCBhZGRyZXNzZXMpO1xuICB9XG5cbiAgYXN5bmMgc3RvcCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5saWJwMnAuc3RvcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgZGVjcnlwdGlvbiBrZXkgdG8gYXR0ZW1wdCBkZWNyeXB0aW9uIG9mIG1lc3NhZ2VzIHJlY2VpdmVkIHZpYVxuICAgKiBbW1dha3VSZWxheV1dIGFuZCBbW1dha3VTdG9yZV1dLiBUaGlzIGNhbiBlaXRoZXIgYmUgYSBwcml2YXRlIGtleSBmb3JcbiAgICogYXN5bW1ldHJpYyBlbmNyeXB0aW9uIG9yIGEgc3ltbWV0cmljIGtleS5cbiAgICpcbiAgICogU3RyaW5ncyBtdXN0IGJlIGluIGhleCBmb3JtYXQuXG4gICAqL1xuICBhZGREZWNyeXB0aW9uS2V5KFxuICAgIGtleTogVWludDhBcnJheSB8IHN0cmluZyxcbiAgICBvcHRpb25zPzogeyBtZXRob2Q/OiBEZWNyeXB0aW9uTWV0aG9kOyBjb250ZW50VG9waWNzPzogc3RyaW5nW10gfVxuICApOiB2b2lkIHtcbiAgICB0aGlzLnJlbGF5LmFkZERlY3J5cHRpb25LZXkoa2V5LCBvcHRpb25zKTtcbiAgICB0aGlzLnN0b3JlLmFkZERlY3J5cHRpb25LZXkoa2V5LCBvcHRpb25zKTtcbiAgICB0aGlzLmZpbHRlci5hZGREZWNyeXB0aW9uS2V5KGtleSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZGVjcnlwdGlvbiBrZXkgdGhhdCB3YXMgdXNlZCB0byBhdHRlbXB0IGRlY3J5cHRpb24gb2YgbWVzc2FnZXNcbiAgICogcmVjZWl2ZWQgdmlhIFtbV2FrdVJlbGF5XV0gb3IgW1tXYWt1U3RvcmVdXS5cbiAgICpcbiAgICogU3RyaW5ncyBtdXN0IGJlIGluIGhleCBmb3JtYXQuXG4gICAqL1xuICBkZWxldGVEZWNyeXB0aW9uS2V5KGtleTogVWludDhBcnJheSB8IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucmVsYXkuZGVsZXRlRGVjcnlwdGlvbktleShrZXkpO1xuICAgIHRoaXMuc3RvcmUuZGVsZXRlRGVjcnlwdGlvbktleShrZXkpO1xuICAgIHRoaXMuZmlsdGVyLmRlbGV0ZURlY3J5cHRpb25LZXkoa2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGxvY2FsIG11bHRpYWRkciB3aXRoIHBlZXIgaWQgb24gd2hpY2ggbGlicDJwIGlzIGxpc3RlbmluZy5cbiAgICpcbiAgICogQHRocm93cyBpZiBsaWJwMnAgaXMgbm90IGxpc3RlbmluZyBvbiBsb2NhbGhvc3QuXG4gICAqL1xuICBnZXRMb2NhbE11bHRpYWRkcldpdGhJRCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxvY2FsTXVsdGlhZGRyID0gdGhpcy5saWJwMnAubXVsdGlhZGRycy5maW5kKChhZGRyKSA9PlxuICAgICAgYWRkci50b1N0cmluZygpLm1hdGNoKC8xMjdcXC4wXFwuMFxcLjEvKVxuICAgICk7XG4gICAgaWYgKCFsb2NhbE11bHRpYWRkciB8fCBsb2NhbE11bHRpYWRkci50b1N0cmluZygpID09PSBcIlwiKSB7XG4gICAgICB0aHJvdyBcIk5vdCBsaXN0ZW5pbmcgb24gbG9jYWxob3N0XCI7XG4gICAgfVxuICAgIHJldHVybiBsb2NhbE11bHRpYWRkciArIFwiL3AycC9cIiArIHRoaXMubGlicDJwLnBlZXJJZC50b0I1OFN0cmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgZm9yIGEgcmVtb3RlIHBlZXIgdG8gYmUgcmVhZHkgZ2l2ZW4gdGhlIHBhc3NlZCBwcm90b2NvbHMuXG4gICAqIFVzZWZ1bCB3aGVuIHVzaW5nIHRoZSBbW0NyZWF0ZU9wdGlvbnMuYm9vdHN0cmFwXV0gd2l0aCBbW1dha3UuY3JlYXRlXV0uXG4gICAqXG4gICAqIEBwYXJhbSBwcm90b2NvbHMgVGhlIHByb3RvY29scyB0aGF0IG5lZWQgdG8gYmUgZW5hYmxlZCBieSByZW1vdGUgcGVlcnMuXG4gICAqIEBwYXJhbSB0aW1lb3V0TXMgQSB0aW1lb3V0IHZhbHVlIGluIG1pbGxpc2Vjb25kcy4uXG4gICAqXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0ICoqcmVzb2x2ZXMqKiBpZiBhbGwgZGVzaXJlZCBwcm90b2NvbHMgYXJlIGZ1bGZpbGxlZCBieVxuICAgKiByZW1vdGUgbm9kZXMsICoqcmVqZWN0cyoqIGlmIHRoZSB0aW1lb3V0TXMgaXMgcmVhY2hlZC5cbiAgICpcbiAgICogQGRlZmF1bHQgUmVtb3RlIHBlZXIgbXVzdCBoYXZlIFdha3UgUmVsYXkgZW5hYmxlZCBhbmQgbm8gdGltZSBvdXQgaXMgYXBwbGllZC5cbiAgICovXG4gIGFzeW5jIHdhaXRGb3JSZW1vdGVQZWVyKFxuICAgIHByb3RvY29scz86IFByb3RvY29sc1tdLFxuICAgIHRpbWVvdXRNcz86IG51bWJlclxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBwcm90b2NvbHMgPSBwcm90b2NvbHMgPz8gW1Byb3RvY29scy5SZWxheV07XG5cbiAgICBjb25zdCBwcm9taXNlczogUHJvbWlzZTx2b2lkPltdID0gW107XG5cbiAgICBpZiAocHJvdG9jb2xzLmluY2x1ZGVzKFByb3RvY29scy5SZWxheSkpIHtcbiAgICAgIGNvbnN0IHBlZXJzID0gdGhpcy5yZWxheS5nZXRQZWVycygpO1xuXG4gICAgICBpZiAocGVlcnMuc2l6ZSA9PSAwKSB7XG4gICAgICAgIC8vIE5vIHBlZXIgeWV0IGF2YWlsYWJsZSwgd2FpdCBmb3IgYSBzdWJzY3JpcHRpb25cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgdGhpcy5saWJwMnAucHVic3ViLm9uY2UoXCJwdWJzdWI6c3Vic2NyaXB0aW9uLWNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBSZW1vdGUgcGVlciBzdWJzY3JpYmVkIHRvIHRvcGljLCBub3cgd2FpdCBmb3IgYSBoZWFydGJlYXRcbiAgICAgICAgICAgIC8vIHNvIHRoYXQgdGhlIG1lc2ggaXMgdXBkYXRlZCBhbmQgdGhlIHJlbW90ZSBwZWVyIGFkZGVkIHRvIGl0XG4gICAgICAgICAgICB0aGlzLmxpYnAycC5wdWJzdWIub25jZShcImdvc3NpcHN1YjpoZWFydGJlYXRcIiwgcmVzb2x2ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm90b2NvbHMuaW5jbHVkZXMoUHJvdG9jb2xzLlN0b3JlKSkge1xuICAgICAgY29uc3Qgc3RvcmVQcm9taXNlID0gKGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBwZWVyIG9mIHRoaXMuc3RvcmUucGVlcnMpIHtcbiAgICAgICAgICBkYmcoXCJTdG9yZSBwZWVyIGZvdW5kXCIsIHBlZXIuaWQudG9CNThTdHJpbmcoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pKCk7XG4gICAgICBwcm9taXNlcy5wdXNoKHN0b3JlUHJvbWlzZSk7XG4gICAgfVxuXG4gICAgaWYgKHByb3RvY29scy5pbmNsdWRlcyhQcm90b2NvbHMuTGlnaHRQdXNoKSkge1xuICAgICAgY29uc3QgbGlnaHRQdXNoUHJvbWlzZSA9IChhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgcGVlciBvZiB0aGlzLmxpZ2h0UHVzaC5wZWVycykge1xuICAgICAgICAgIGRiZyhcIkxpZ2h0IFB1c2ggcGVlciBmb3VuZFwiLCBwZWVyLmlkLnRvQjU4U3RyaW5nKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KSgpO1xuICAgICAgcHJvbWlzZXMucHVzaChsaWdodFB1c2hQcm9taXNlKTtcbiAgICB9XG5cbiAgICBpZiAocHJvdG9jb2xzLmluY2x1ZGVzKFByb3RvY29scy5GaWx0ZXIpKSB7XG4gICAgICBjb25zdCBmaWx0ZXJQcm9taXNlID0gKGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBwZWVyIG9mIHRoaXMuZmlsdGVyLnBlZXJzKSB7XG4gICAgICAgICAgZGJnKFwiRmlsdGVyIHBlZXIgZm91bmRcIiwgcGVlci5pZC50b0I1OFN0cmluZygpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSkoKTtcbiAgICAgIHByb21pc2VzLnB1c2goZmlsdGVyUHJvbWlzZSk7XG4gICAgfVxuXG4gICAgaWYgKHRpbWVvdXRNcykge1xuICAgICAgYXdhaXQgcmVqZWN0T25UaW1lb3V0KFxuICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcyksXG4gICAgICAgIHRpbWVvdXRNcyxcbiAgICAgICAgXCJUaW1lZCBvdXQgd2FpdGluZyBmb3IgYSByZW1vdGUgcGVlci5cIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRLZWVwQWxpdmUoXG4gICAgcGVlcklkOiBQZWVySWQsXG4gICAgcGluZ1BlcmlvZFNlY3M6IG51bWJlcixcbiAgICByZWxheVBlcmlvZFNlY3M6IG51bWJlclxuICApOiB2b2lkIHtcbiAgICAvLyBKdXN0IGluIGNhc2UgYSB0aW1lciBhbHJlYWR5IGV4aXN0IGZvciB0aGlzIHBlZXJcbiAgICB0aGlzLnN0b3BLZWVwQWxpdmUocGVlcklkKTtcblxuICAgIGNvbnN0IHBlZXJJZFN0ciA9IHBlZXJJZC50b0I1OFN0cmluZygpO1xuXG4gICAgaWYgKHBpbmdQZXJpb2RTZWNzICE9PSAwKSB7XG4gICAgICBjb25zdCBwaW5nU2VydmljZSA9IG5ldyBQaW5nU2VydmljZSh0aGlzLmxpYnAycCk7XG4gICAgICB0aGlzLnBpbmdLZWVwQWxpdmVUaW1lcnNbcGVlcklkU3RyXSA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgcGluZ1NlcnZpY2UucGluZyhwZWVySWQpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgZGJnKGBQaW5nIGZhaWxlZCAoJHtwZWVySWRTdHJ9KWAsIGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIHBpbmdQZXJpb2RTZWNzICogMTAwMCk7XG4gICAgfVxuXG4gICAgaWYgKHJlbGF5UGVyaW9kU2VjcyAhPT0gMCkge1xuICAgICAgdGhpcy5yZWxheUtlZXBBbGl2ZVRpbWVyc1twZWVySWRTdHJdID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBXYWt1TWVzc2FnZS5mcm9tQnl0ZXMobmV3IFVpbnQ4QXJyYXkoKSwgUmVsYXlQaW5nQ29udGVudFRvcGljKS50aGVuKFxuICAgICAgICAgICh3YWt1TXNnKSA9PiB0aGlzLnJlbGF5LnNlbmQod2FrdU1zZylcbiAgICAgICAgKTtcbiAgICAgIH0sIHJlbGF5UGVyaW9kU2VjcyAqIDEwMDApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RvcEtlZXBBbGl2ZShwZWVySWQ6IFBlZXJJZCk6IHZvaWQge1xuICAgIGNvbnN0IHBlZXJJZFN0ciA9IHBlZXJJZC50b0I1OFN0cmluZygpO1xuXG4gICAgaWYgKHRoaXMucGluZ0tlZXBBbGl2ZVRpbWVyc1twZWVySWRTdHJdKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMucGluZ0tlZXBBbGl2ZVRpbWVyc1twZWVySWRTdHJdKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnBpbmdLZWVwQWxpdmVUaW1lcnNbcGVlcklkU3RyXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZWxheUtlZXBBbGl2ZVRpbWVyc1twZWVySWRTdHJdKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMucmVsYXlLZWVwQWxpdmVUaW1lcnNbcGVlcklkU3RyXSk7XG4gICAgICBkZWxldGUgdGhpcy5yZWxheUtlZXBBbGl2ZVRpbWVyc1twZWVySWRTdHJdO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBhd2FpdFRpbWVvdXQgPSAobXM6IG51bWJlciwgcmVqZWN0UmVhc29uOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+XG4gIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChyZWplY3RSZWFzb24pLCBtcykpO1xuXG5jb25zdCByZWplY3RPblRpbWVvdXQgPSAoXG4gIHByb21pc2U6IFByb21pc2U8YW55PixcbiAgdGltZW91dE1zOiBudW1iZXIsXG4gIHJlamVjdFJlYXNvbjogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+ID0+XG4gIFByb21pc2UucmFjZShbcHJvbWlzZSwgYXdhaXRUaW1lb3V0KHRpbWVvdXRNcywgcmVqZWN0UmVhc29uKV0pO1xuIiwiaW1wb3J0IHsgUmVhZGVyIH0gZnJvbSBcInByb3RvYnVmanMvbWluaW1hbFwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gXCJ1dWlkXCI7XG5cbmltcG9ydCAqIGFzIHByb3RvIGZyb20gXCIuLi8uLi9wcm90by93YWt1L3YyL2ZpbHRlclwiO1xuXG5leHBvcnQgdHlwZSBDb250ZW50RmlsdGVyID0ge1xuICBjb250ZW50VG9waWM6IHN0cmluZztcbn07XG5cbi8qKlxuICogRmlsdGVyUlBDIHJlcHJlc2VudHMgYSBtZXNzYWdlIGNvbmZvcm1pbmcgdG8gdGhlIFdha3UgRmlsdGVyIHByb3RvY29sXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWx0ZXJSUEMge1xuICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHByb3RvOiBwcm90by5GaWx0ZXJSUEMpIHt9XG5cbiAgc3RhdGljIGNyZWF0ZVJlcXVlc3QoXG4gICAgdG9waWM6IHN0cmluZyxcbiAgICBjb250ZW50RmlsdGVyczogQ29udGVudEZpbHRlcltdLFxuICAgIHJlcXVlc3RJZD86IHN0cmluZyxcbiAgICBzdWJzY3JpYmUgPSB0cnVlXG4gICk6IEZpbHRlclJQQyB7XG4gICAgcmV0dXJuIG5ldyBGaWx0ZXJSUEMoe1xuICAgICAgcmVxdWVzdElkOiByZXF1ZXN0SWQgfHwgdXVpZCgpLFxuICAgICAgcmVxdWVzdDoge1xuICAgICAgICBzdWJzY3JpYmUsXG4gICAgICAgIHRvcGljLFxuICAgICAgICBjb250ZW50RmlsdGVycyxcbiAgICAgIH0sXG4gICAgICBwdXNoOiB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGJ5dGVzIFVpbnQ4QXJyYXkgb2YgYnl0ZXMgZnJvbSBhIEZpbHRlclJQQyBtZXNzYWdlXG4gICAqIEByZXR1cm5zIEZpbHRlclJQQ1xuICAgKi9cbiAgc3RhdGljIGRlY29kZShieXRlczogVWludDhBcnJheSk6IEZpbHRlclJQQyB7XG4gICAgY29uc3QgcmVzID0gcHJvdG8uRmlsdGVyUlBDLmRlY29kZShSZWFkZXIuY3JlYXRlKGJ5dGVzKSk7XG4gICAgcmV0dXJuIG5ldyBGaWx0ZXJSUEMocmVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmNvZGUgdGhlIGN1cnJlbnQgRmlsdGVyUlBDIHJlcXVlc3QgdG8gYnl0ZXNcbiAgICogQHJldHVybnMgVWludDhBcnJheVxuICAgKi9cbiAgZW5jb2RlKCk6IFVpbnQ4QXJyYXkge1xuICAgIHJldHVybiBwcm90by5GaWx0ZXJSUEMuZW5jb2RlKHRoaXMucHJvdG8pLmZpbmlzaCgpO1xuICB9XG5cbiAgZ2V0IHB1c2goKTogcHJvdG8uTWVzc2FnZVB1c2ggfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnByb3RvLnB1c2g7XG4gIH1cblxuICBnZXQgcmVxdWVzdElkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucHJvdG8ucmVxdWVzdElkO1xuICB9XG59XG4iLCJpbXBvcnQgZGVidWcgZnJvbSBcImRlYnVnXCI7XG5pbXBvcnQgbHAgZnJvbSBcIml0LWxlbmd0aC1wcmVmaXhlZFwiO1xuaW1wb3J0IHsgcGlwZSB9IGZyb20gXCJpdC1waXBlXCI7XG5pbXBvcnQgTGlicDJwLCB7IE11eGVkU3RyZWFtIH0gZnJvbSBcImxpYnAycFwiO1xuaW1wb3J0IHsgUGVlciwgUGVlcklkIH0gZnJvbSBcImxpYnAycC9zcmMvcGVlci1zdG9yZVwiO1xuXG5pbXBvcnQgeyBXYWt1TWVzc2FnZSBhcyBXYWt1TWVzc2FnZVByb3RvIH0gZnJvbSBcIi4uLy4uL3Byb3RvL3dha3UvdjIvbWVzc2FnZVwiO1xuaW1wb3J0IHsgZ2V0UGVlcnNGb3JQcm90b2NvbCwgc2VsZWN0UmFuZG9tUGVlciB9IGZyb20gXCIuLi9zZWxlY3RfcGVlclwiO1xuaW1wb3J0IHsgaGV4VG9CeXRlcyB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFB1YlN1YlRvcGljIH0gZnJvbSBcIi4uL3dha3VcIjtcbmltcG9ydCB7IERlY3J5cHRpb25NZXRob2QsIFdha3VNZXNzYWdlIH0gZnJvbSBcIi4uL3dha3VfbWVzc2FnZVwiO1xuXG5pbXBvcnQgeyBDb250ZW50RmlsdGVyLCBGaWx0ZXJSUEMgfSBmcm9tIFwiLi9maWx0ZXJfcnBjXCI7XG5cbmV4cG9ydCBjb25zdCBGaWx0ZXJDb2RlYyA9IFwiL3ZhYy93YWt1L2ZpbHRlci8yLjAuMC1iZXRhMVwiO1xuXG5jb25zdCBsb2cgPSBkZWJ1ZyhcIndha3U6ZmlsdGVyXCIpO1xuXG50eXBlIEZpbHRlclN1YnNjcmlwdGlvbk9wdHMgPSB7XG4gIC8qKlxuICAgKiBUaGUgUHVic3ViIHRvcGljIGZvciB0aGUgc3Vic2NyaXB0aW9uXG4gICAqL1xuICBwdWJzdWJUb3BpYz86IHN0cmluZztcbiAgLyoqXG4gICAqIE9wdGlvbmFsbHkgc3BlY2lmeSBhIFBlZXJJZCBmb3IgdGhlIHN1YnNjcmlwdGlvbi4gSWYgbm90IGluY2x1ZGVkLCB3aWxsIHVzZSBhIHJhbmRvbSBwZWVyLlxuICAgKi9cbiAgcGVlcklkPzogUGVlcklkO1xufTtcblxudHlwZSBGaWx0ZXJDYWxsYmFjayA9IChtc2c6IFdha3VNZXNzYWdlKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcblxudHlwZSBVbnN1YnNjcmliZUZ1bmN0aW9uID0gKCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuLyoqXG4gKiBJbXBsZW1lbnRzIGNsaWVudCBzaWRlIG9mIHRoZSBbV2FrdSB2MiBGaWx0ZXIgcHJvdG9jb2xdKGh0dHBzOi8vcmZjLnZhYy5kZXYvc3BlYy8xMi8pLlxuICpcbiAqIE5vdGUgdGhpcyBjdXJyZW50bHkgb25seSB3b3JrcyBpbiBOb2RlSlMgd2hlbiB0aGUgV2FrdSBub2RlIGlzIGxpc3RlbmluZyBvbiBhIHBvcnQsIHNlZTpcbiAqIC0gaHR0cHM6Ly9naXRodWIuY29tL3N0YXR1cy1pbS9nby13YWt1L2lzc3Vlcy8yNDVcbiAqIC0gaHR0cHM6Ly9naXRodWIuY29tL3N0YXR1cy1pbS9ud2FrdS9pc3N1ZXMvOTQ4XG4gKi9cbmV4cG9ydCBjbGFzcyBXYWt1RmlsdGVyIHtcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zOiBNYXA8c3RyaW5nLCBGaWx0ZXJDYWxsYmFjaz47XG4gIHB1YmxpYyBkZWNyeXB0aW9uS2V5czogTWFwPFxuICAgIFVpbnQ4QXJyYXksXG4gICAgeyBtZXRob2Q/OiBEZWNyeXB0aW9uTWV0aG9kOyBjb250ZW50VG9waWNzPzogc3RyaW5nW10gfVxuICA+O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBsaWJwMnA6IExpYnAycCkge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmRlY3J5cHRpb25LZXlzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMubGlicDJwLmhhbmRsZShGaWx0ZXJDb2RlYywgdGhpcy5vblJlcXVlc3QuYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIGNvbnRlbnRUb3BpY3MgQXJyYXkgb2YgQ29udGVudFRvcGljcyB0byBzdWJzY3JpYmUgdG8uIElmIGVtcHR5LCBubyBtZXNzYWdlcyB3aWxsIGJlIHJldHVybmVkIGZyb20gdGhlIGZpbHRlci5cbiAgICogQHBhcmFtIGNhbGxiYWNrIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIG1lc3NhZ2UgcmV0dXJuZWQgYnkgdGhlIGZpbHRlci5cbiAgICogQHBhcmFtIG9wdHMgVGhlIEZpbHRlclN1YnNjcmlwdGlvbk9wdHMgdXNlZCB0byBuYXJyb3cgd2hpY2ggbWVzc2FnZXMgYXJlIHJldHVybmVkLCBhbmQgd2hpY2ggcGVlciB0byBjb25uZWN0IHRvLlxuICAgKiBAcmV0dXJucyBVbnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGVuZCB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKi9cbiAgYXN5bmMgc3Vic2NyaWJlKFxuICAgIGNhbGxiYWNrOiBGaWx0ZXJDYWxsYmFjayxcbiAgICBjb250ZW50VG9waWNzOiBzdHJpbmdbXSxcbiAgICBvcHRzPzogRmlsdGVyU3Vic2NyaXB0aW9uT3B0c1xuICApOiBQcm9taXNlPFVuc3Vic2NyaWJlRnVuY3Rpb24+IHtcbiAgICBjb25zdCB0b3BpYyA9IG9wdHM/LnB1YnN1YlRvcGljIHx8IERlZmF1bHRQdWJTdWJUb3BpYztcbiAgICBjb25zdCBjb250ZW50RmlsdGVycyA9IGNvbnRlbnRUb3BpY3MubWFwKChjb250ZW50VG9waWMpID0+ICh7XG4gICAgICBjb250ZW50VG9waWMsXG4gICAgfSkpO1xuICAgIGNvbnN0IHJlcXVlc3QgPSBGaWx0ZXJSUEMuY3JlYXRlUmVxdWVzdChcbiAgICAgIHRvcGljLFxuICAgICAgY29udGVudEZpbHRlcnMsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIGNvbnN0IHBlZXIgPSBhd2FpdCB0aGlzLmdldFBlZXIob3B0cz8ucGVlcklkKTtcbiAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLm5ld1N0cmVhbShwZWVyKTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwaXBlKFtyZXF1ZXN0LmVuY29kZSgpXSwgbHAuZW5jb2RlKCksIHN0cmVhbSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nKFxuICAgICAgICBcIkVycm9yIHN1YnNjcmliaW5nIHRvIHBlZXIgXCIsXG4gICAgICAgIHBlZXIuaWQudG9CNThTdHJpbmcoKSxcbiAgICAgICAgXCJmb3IgY29udGVudCB0b3BpY3NcIixcbiAgICAgICAgY29udGVudFRvcGljcyxcbiAgICAgICAgXCI6IFwiLFxuICAgICAgICBlXG4gICAgICApO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZENhbGxiYWNrKHJlcXVlc3QucmVxdWVzdElkLCBjYWxsYmFjayk7XG5cbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy51bnN1YnNjcmliZSh0b3BpYywgY29udGVudEZpbHRlcnMsIHJlcXVlc3QucmVxdWVzdElkLCBwZWVyKTtcbiAgICAgIHRoaXMucmVtb3ZlQ2FsbGJhY2socmVxdWVzdC5yZXF1ZXN0SWQpO1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9uUmVxdWVzdCh7IHN0cmVhbSB9OiBMaWJwMnAuSGFuZGxlclByb3BzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgbG9nKFwiUmVjZWl2aW5nIG1lc3NhZ2UgcHVzaFwiKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGlwZShcbiAgICAgICAgc3RyZWFtLnNvdXJjZSxcbiAgICAgICAgbHAuZGVjb2RlKCksXG4gICAgICAgIGFzeW5jIChzb3VyY2U6IEFzeW5jSXRlcmFibGU8QnVmZmVyPikgPT4ge1xuICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgYnl0ZXMgb2Ygc291cmNlKSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBGaWx0ZXJSUEMuZGVjb2RlKGJ5dGVzLnNsaWNlKCkpO1xuICAgICAgICAgICAgaWYgKHJlcy5wdXNoPy5tZXNzYWdlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucHVzaE1lc3NhZ2VzKHJlcy5yZXF1ZXN0SWQsIHJlcy5wdXNoLm1lc3NhZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nKFwiRXJyb3IgZGVjb2RpbmcgbWVzc2FnZVwiLCBlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHB1c2hNZXNzYWdlcyhcbiAgICByZXF1ZXN0SWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlczogV2FrdU1lc3NhZ2VQcm90b1tdXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5zdWJzY3JpcHRpb25zLmdldChyZXF1ZXN0SWQpO1xuICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgIGxvZyhgTm8gY2FsbGJhY2sgcmVnaXN0ZXJlZCBmb3IgcmVxdWVzdCBJRCAke3JlcXVlc3RJZH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNyeXB0aW9uS2V5cyA9IEFycmF5LmZyb20odGhpcy5kZWNyeXB0aW9uS2V5cykubWFwKFxuICAgICAgKFtrZXksIHsgbWV0aG9kLCBjb250ZW50VG9waWNzIH1dKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICBjb250ZW50VG9waWNzLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICk7XG5cbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCBXYWt1TWVzc2FnZS5kZWNvZGVQcm90byhtZXNzYWdlLCBkZWNyeXB0aW9uS2V5cyk7XG4gICAgICBpZiAoIWRlY29kZWQpIHtcbiAgICAgICAgbG9nKFwiTm90IGFibGUgdG8gZGVjb2RlIG1lc3NhZ2VcIik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soZGVjb2RlZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRDYWxsYmFjayhyZXF1ZXN0SWQ6IHN0cmluZywgY2FsbGJhY2s6IEZpbHRlckNhbGxiYWNrKTogdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnNldChyZXF1ZXN0SWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlQ2FsbGJhY2socmVxdWVzdElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZGVsZXRlKHJlcXVlc3RJZCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVuc3Vic2NyaWJlKFxuICAgIHRvcGljOiBzdHJpbmcsXG4gICAgY29udGVudEZpbHRlcnM6IENvbnRlbnRGaWx0ZXJbXSxcbiAgICByZXF1ZXN0SWQ6IHN0cmluZyxcbiAgICBwZWVyOiBQZWVyXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlUmVxdWVzdCA9IEZpbHRlclJQQy5jcmVhdGVSZXF1ZXN0KFxuICAgICAgdG9waWMsXG4gICAgICBjb250ZW50RmlsdGVycyxcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMubmV3U3RyZWFtKHBlZXIpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwaXBlKFt1bnN1YnNjcmliZVJlcXVlc3QuZW5jb2RlKCldLCBscC5lbmNvZGUoKSwgc3RyZWFtLnNpbmspO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZyhcIkVycm9yIHVuc3Vic2NyaWJpbmdcIiwgZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbmV3U3RyZWFtKHBlZXI6IFBlZXIpOiBQcm9taXNlPE11eGVkU3RyZWFtPiB7XG4gICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMubGlicDJwLmNvbm5lY3Rpb25NYW5hZ2VyLmdldChwZWVyLmlkKTtcbiAgICBpZiAoIWNvbm5lY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgYSBjb25uZWN0aW9uIHRvIHRoZSBwZWVyXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgc3RyZWFtIH0gPSBhd2FpdCBjb25uZWN0aW9uLm5ld1N0cmVhbShGaWx0ZXJDb2RlYyk7XG4gICAgcmV0dXJuIHN0cmVhbTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0UGVlcihwZWVySWQ/OiBQZWVySWQpOiBQcm9taXNlPFBlZXI+IHtcbiAgICBsZXQgcGVlcjtcbiAgICBpZiAocGVlcklkKSB7XG4gICAgICBwZWVyID0gYXdhaXQgdGhpcy5saWJwMnAucGVlclN0b3JlLmdldChwZWVySWQpO1xuICAgICAgaWYgKCFwZWVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIHJldHJpZXZlIGNvbm5lY3Rpb24gZGV0YWlscyBmb3IgcHJvdmlkZWQgcGVlciBpbiBwZWVyIHN0b3JlOiAke3BlZXJJZC50b0I1OFN0cmluZygpfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGVlciA9IGF3YWl0IHRoaXMucmFuZG9tUGVlcjtcbiAgICAgIGlmICghcGVlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJGYWlsZWQgdG8gZmluZCBrbm93biBwZWVyIHRoYXQgcmVnaXN0ZXJzIHdha3UgZmlsdGVyIHByb3RvY29sXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBlZXI7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBkZWNyeXB0aW9uIGtleSB0byBhdHRlbXB0IGRlY3J5cHRpb24gb2YgbWVzc2FnZXMgcmVjZWl2ZWQgaW4gYW55XG4gICAqIHN1YnNlcXVlbnQgW1tzdWJzY3JpYmVdXSBjYWxsLiBUaGlzIGNhbiBlaXRoZXIgYmUgYSBwcml2YXRlIGtleSBmb3JcbiAgICogYXN5bW1ldHJpYyBlbmNyeXB0aW9uIG9yIGEgc3ltbWV0cmljIGtleS4gW1tXYWt1U3RvcmVdXSB3aWxsIGF0dGVtcHQgdG9cbiAgICogZGVjcnlwdCBtZXNzYWdlcyB1c2luZyBib3RoIG1ldGhvZHMuXG4gICAqXG4gICAqIFN0cmluZ3MgbXVzdCBiZSBpbiBoZXggZm9ybWF0LlxuICAgKi9cbiAgYWRkRGVjcnlwdGlvbktleShcbiAgICBrZXk6IFVpbnQ4QXJyYXkgfCBzdHJpbmcsXG4gICAgb3B0aW9ucz86IHsgbWV0aG9kPzogRGVjcnlwdGlvbk1ldGhvZDsgY29udGVudFRvcGljcz86IHN0cmluZ1tdIH1cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5kZWNyeXB0aW9uS2V5cy5zZXQoaGV4VG9CeXRlcyhrZXkpLCBvcHRpb25zID8/IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBkZWNyeXB0aW9uIGtleSBzbyB0aGF0IGl0IGNhbm5vdCBiZSB1c2VkIGluIGZ1dHVyZSBbW3N1YnNjcmliZV1dIGNhbGxzXG4gICAqXG4gICAqIFN0cmluZ3MgbXVzdCBiZSBpbiBoZXggZm9ybWF0LlxuICAgKi9cbiAgZGVsZXRlRGVjcnlwdGlvbktleShrZXk6IFVpbnQ4QXJyYXkgfCBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmRlY3J5cHRpb25LZXlzLmRlbGV0ZShoZXhUb0J5dGVzKGtleSkpO1xuICB9XG5cbiAgZ2V0IHBlZXJzKCk6IEFzeW5jSXRlcmFibGU8UGVlcj4ge1xuICAgIHJldHVybiBnZXRQZWVyc0ZvclByb3RvY29sKHRoaXMubGlicDJwLCBbRmlsdGVyQ29kZWNdKTtcbiAgfVxuXG4gIGdldCByYW5kb21QZWVyKCk6IFByb21pc2U8UGVlciB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiBzZWxlY3RSYW5kb21QZWVyKHRoaXMucGVlcnMpO1xuICB9XG59XG4iLCJpbXBvcnQgY29uY2F0IGZyb20gXCJpdC1jb25jYXRcIjtcbmltcG9ydCBscCBmcm9tIFwiaXQtbGVuZ3RoLXByZWZpeGVkXCI7XG5pbXBvcnQgeyBwaXBlIH0gZnJvbSBcIml0LXBpcGVcIjtcbmltcG9ydCBMaWJwMnAgZnJvbSBcImxpYnAycFwiO1xuaW1wb3J0IHsgUGVlciB9IGZyb20gXCJsaWJwMnAvc3JjL3BlZXItc3RvcmVcIjtcbmltcG9ydCBQZWVySWQgZnJvbSBcInBlZXItaWRcIjtcblxuaW1wb3J0IHsgUHVzaFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3Byb3RvL3dha3UvdjIvbGlnaHRfcHVzaFwiO1xuaW1wb3J0IHsgZ2V0UGVlcnNGb3JQcm90b2NvbCwgc2VsZWN0UmFuZG9tUGVlciB9IGZyb20gXCIuLi9zZWxlY3RfcGVlclwiO1xuaW1wb3J0IHsgRGVmYXVsdFB1YlN1YlRvcGljIH0gZnJvbSBcIi4uL3dha3VcIjtcbmltcG9ydCB7IFdha3VNZXNzYWdlIH0gZnJvbSBcIi4uL3dha3VfbWVzc2FnZVwiO1xuXG5pbXBvcnQgeyBQdXNoUlBDIH0gZnJvbSBcIi4vcHVzaF9ycGNcIjtcblxuZXhwb3J0IGNvbnN0IExpZ2h0UHVzaENvZGVjID0gXCIvdmFjL3dha3UvbGlnaHRwdXNoLzIuMC4wLWJldGExXCI7XG5leHBvcnQgeyBQdXNoUmVzcG9uc2UgfTtcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBQdWJTdWIgVG9waWMgdG8gdXNlLiBEZWZhdWx0cyB0byB7QGxpbmsgRGVmYXVsdFB1YlN1YlRvcGljfS5cbiAgICpcbiAgICogVGhlIHVzYWdlIG9mIHRoZSBkZWZhdWx0IHB1YnN1YiB0b3BpYyBpcyByZWNvbW1lbmRlZC5cbiAgICogU2VlIFtXYWt1IHYyIFRvcGljIFVzYWdlIFJlY29tbWVuZGF0aW9uc10oaHR0cHM6Ly9yZmMudmFjLmRldi9zcGVjLzIzLykgZm9yIGRldGFpbHMuXG4gICAqXG4gICAqIEBkZWZhdWx0IHtAbGluayBEZWZhdWx0UHViU3ViVG9waWN9XG4gICAqL1xuICBwdWJTdWJUb3BpYz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQdXNoT3B0aW9ucyB7XG4gIHBlZXJJZD86IFBlZXJJZDtcbiAgcHViU3ViVG9waWM/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgW1dha3UgdjIgTGlnaHQgUHVzaCBwcm90b2NvbF0oaHR0cHM6Ly9yZmMudmFjLmRldi9zcGVjLzE5LykuXG4gKi9cbmV4cG9ydCBjbGFzcyBXYWt1TGlnaHRQdXNoIHtcbiAgcHViU3ViVG9waWM6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbGlicDJwOiBMaWJwMnAsIG9wdGlvbnM/OiBDcmVhdGVPcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnM/LnB1YlN1YlRvcGljKSB7XG4gICAgICB0aGlzLnB1YlN1YlRvcGljID0gb3B0aW9ucy5wdWJTdWJUb3BpYztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wdWJTdWJUb3BpYyA9IERlZmF1bHRQdWJTdWJUb3BpYztcbiAgICB9XG4gIH1cblxuICBhc3luYyBwdXNoKFxuICAgIG1lc3NhZ2U6IFdha3VNZXNzYWdlLFxuICAgIG9wdHM/OiBQdXNoT3B0aW9uc1xuICApOiBQcm9taXNlPFB1c2hSZXNwb25zZSB8IG51bGw+IHtcbiAgICBsZXQgcGVlcjtcbiAgICBpZiAob3B0cz8ucGVlcklkKSB7XG4gICAgICBwZWVyID0gYXdhaXQgdGhpcy5saWJwMnAucGVlclN0b3JlLmdldChvcHRzLnBlZXJJZCk7XG4gICAgICBpZiAoIXBlZXIpIHRocm93IFwiUGVlciBpcyB1bmtub3duXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBlZXIgPSBhd2FpdCB0aGlzLnJhbmRvbVBlZXI7XG4gICAgfVxuICAgIGlmICghcGVlcikgdGhyb3cgXCJObyBwZWVyIGF2YWlsYWJsZVwiO1xuICAgIGlmICghcGVlci5wcm90b2NvbHMuaW5jbHVkZXMoTGlnaHRQdXNoQ29kZWMpKVxuICAgICAgdGhyb3cgXCJQZWVyIGRvZXMgbm90IHJlZ2lzdGVyIHdha3UgbGlnaHQgcHVzaCBwcm90b2NvbFwiO1xuXG4gICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMubGlicDJwLmNvbm5lY3Rpb25NYW5hZ2VyLmdldChwZWVyLmlkKTtcbiAgICBpZiAoIWNvbm5lY3Rpb24pIHRocm93IFwiRmFpbGVkIHRvIGdldCBhIGNvbm5lY3Rpb24gdG8gdGhlIHBlZXJcIjtcblxuICAgIGNvbnN0IHsgc3RyZWFtIH0gPSBhd2FpdCBjb25uZWN0aW9uLm5ld1N0cmVhbShMaWdodFB1c2hDb2RlYyk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHB1YlN1YlRvcGljID0gb3B0cz8ucHViU3ViVG9waWNcbiAgICAgICAgPyBvcHRzLnB1YlN1YlRvcGljXG4gICAgICAgIDogdGhpcy5wdWJTdWJUb3BpYztcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gUHVzaFJQQy5jcmVhdGVSZXF1ZXN0KG1lc3NhZ2UsIHB1YlN1YlRvcGljKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHBpcGUoXG4gICAgICAgIFtxdWVyeS5lbmNvZGUoKV0sXG4gICAgICAgIGxwLmVuY29kZSgpLFxuICAgICAgICBzdHJlYW0sXG4gICAgICAgIGxwLmRlY29kZSgpLFxuICAgICAgICBjb25jYXRcbiAgICAgICk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IFB1c2hSUEMuZGVjb2RlKHJlcy5zbGljZSgpKS5yZXNwb25zZTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJObyByZXNwb25zZSBpbiBQdXNoUlBDXCIpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIGRlY29kZSBwdXNoIHJlcGx5XCIsIGVycik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBzZW5kIHdha3UgbGlnaHQgcHVzaCByZXF1ZXN0XCIsIGVycik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMga25vd24gcGVlcnMgZnJvbSB0aGUgYWRkcmVzcyBib29rIChgbGlicDJwLnBlZXJTdG9yZWApIHRoYXQgc3VwcG9ydFxuICAgKiBsaWdodCBwdXNoIHByb3RvY29sLiBXYWt1IG1heSBvciAgbWF5IG5vdCBiZSBjdXJyZW50bHkgY29ubmVjdGVkIHRvIHRoZXNlIHBlZXJzLlxuICAgKi9cbiAgZ2V0IHBlZXJzKCk6IEFzeW5jSXRlcmFibGU8UGVlcj4ge1xuICAgIHJldHVybiBnZXRQZWVyc0ZvclByb3RvY29sKHRoaXMubGlicDJwLCBbTGlnaHRQdXNoQ29kZWNdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcmFuZG9tIHBlZXIgdGhhdCBzdXBwb3J0cyBsaWdodCBwdXNoIHByb3RvY29sIGZyb20gdGhlIGFkZHJlc3NcbiAgICogYm9vayAoYGxpYnAycC5wZWVyU3RvcmVgKS4gV2FrdSBtYXkgb3IgIG1heSBub3QgYmUgY3VycmVudGx5IGNvbm5lY3RlZCB0b1xuICAgKiB0aGlzIHBlZXIuXG4gICAqL1xuICBnZXQgcmFuZG9tUGVlcigpOiBQcm9taXNlPFBlZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gc2VsZWN0UmFuZG9tUGVlcih0aGlzLnBlZXJzKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUmVhZGVyIH0gZnJvbSBcInByb3RvYnVmanMvbWluaW1hbFwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gXCJ1dWlkXCI7XG5cbmltcG9ydCAqIGFzIHByb3RvIGZyb20gXCIuLi8uLi9wcm90by93YWt1L3YyL2xpZ2h0X3B1c2hcIjtcbmltcG9ydCB7IFdha3VNZXNzYWdlIH0gZnJvbSBcIi4uL3dha3VfbWVzc2FnZVwiO1xuXG5leHBvcnQgY2xhc3MgUHVzaFJQQyB7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgcHJvdG86IHByb3RvLlB1c2hSUEMpIHt9XG5cbiAgc3RhdGljIGNyZWF0ZVJlcXVlc3QobWVzc2FnZTogV2FrdU1lc3NhZ2UsIHB1YlN1YlRvcGljOiBzdHJpbmcpOiBQdXNoUlBDIHtcbiAgICByZXR1cm4gbmV3IFB1c2hSUEMoe1xuICAgICAgcmVxdWVzdElkOiB1dWlkKCksXG4gICAgICByZXF1ZXN0OiB7XG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UucHJvdG8sXG4gICAgICAgIHB1YlN1YlRvcGljOiBwdWJTdWJUb3BpYyxcbiAgICAgIH0sXG4gICAgICByZXNwb25zZTogdW5kZWZpbmVkLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGRlY29kZShieXRlczogVWludDhBcnJheSk6IFB1c2hSUEMge1xuICAgIGNvbnN0IHJlcyA9IHByb3RvLlB1c2hSUEMuZGVjb2RlKFJlYWRlci5jcmVhdGUoYnl0ZXMpKTtcbiAgICByZXR1cm4gbmV3IFB1c2hSUEMocmVzKTtcbiAgfVxuXG4gIGVuY29kZSgpOiBVaW50OEFycmF5IHtcbiAgICByZXR1cm4gcHJvdG8uUHVzaFJQQy5lbmNvZGUodGhpcy5wcm90bykuZmluaXNoKCk7XG4gIH1cblxuICBnZXQgcXVlcnkoKTogcHJvdG8uUHVzaFJlcXVlc3QgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnByb3RvLnJlcXVlc3Q7XG4gIH1cblxuICBnZXQgcmVzcG9uc2UoKTogcHJvdG8uUHVzaFJlc3BvbnNlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5wcm90by5yZXNwb25zZTtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgc2VjcCBmcm9tIFwiQG5vYmxlL3NlY3AyNTZrMVwiO1xuaW1wb3J0IHsgY29uY2F0IH0gZnJvbSBcInVpbnQ4YXJyYXlzL2NvbmNhdFwiO1xuXG5pbXBvcnQgeyBnZXRTdWJ0bGUsIHJhbmRvbUJ5dGVzLCBzaGEyNTYgfSBmcm9tIFwiLi4vY3J5cHRvXCI7XG5pbXBvcnQgeyBoZXhUb0J5dGVzIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG4vKipcbiAqIEhLREYgYXMgaW1wbGVtZW50ZWQgaW4gZ28tZXRoZXJldW0uXG4gKi9cbmZ1bmN0aW9uIGtkZihzZWNyZXQ6IFVpbnQ4QXJyYXksIG91dHB1dExlbmd0aDogbnVtYmVyKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XG4gIGxldCBjdHIgPSAxO1xuICBsZXQgd3JpdHRlbiA9IDA7XG4gIGxldCB3aWxsQmVSZXN1bHQgPSBQcm9taXNlLnJlc29sdmUobmV3IFVpbnQ4QXJyYXkoKSk7XG4gIHdoaWxlICh3cml0dGVuIDwgb3V0cHV0TGVuZ3RoKSB7XG4gICAgY29uc3QgY291bnRlcnMgPSBuZXcgVWludDhBcnJheShbY3RyID4+IDI0LCBjdHIgPj4gMTYsIGN0ciA+PiA4LCBjdHJdKTtcbiAgICBjb25zdCBjb3VudGVyc1NlY3JldCA9IGNvbmNhdChcbiAgICAgIFtjb3VudGVycywgc2VjcmV0XSxcbiAgICAgIGNvdW50ZXJzLmxlbmd0aCArIHNlY3JldC5sZW5ndGhcbiAgICApO1xuICAgIGNvbnN0IHdpbGxCZUhhc2hSZXN1bHQgPSBzaGEyNTYoY291bnRlcnNTZWNyZXQpO1xuICAgIHdpbGxCZVJlc3VsdCA9IHdpbGxCZVJlc3VsdC50aGVuKChyZXN1bHQpID0+XG4gICAgICB3aWxsQmVIYXNoUmVzdWx0LnRoZW4oKGhhc2hSZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgX2hhc2hSZXN1bHQgPSBuZXcgVWludDhBcnJheShoYXNoUmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIGNvbmNhdChcbiAgICAgICAgICBbcmVzdWx0LCBfaGFzaFJlc3VsdF0sXG4gICAgICAgICAgcmVzdWx0Lmxlbmd0aCArIF9oYXNoUmVzdWx0Lmxlbmd0aFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICApO1xuICAgIHdyaXR0ZW4gKz0gMzI7XG4gICAgY3RyICs9IDE7XG4gIH1cbiAgcmV0dXJuIHdpbGxCZVJlc3VsdDtcbn1cblxuZnVuY3Rpb24gYWVzQ3RyRW5jcnlwdChcbiAgY291bnRlcjogVWludDhBcnJheSxcbiAga2V5OiBBcnJheUJ1ZmZlckxpa2UsXG4gIGRhdGE6IEFycmF5QnVmZmVyTGlrZVxuKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XG4gIHJldHVybiBnZXRTdWJ0bGUoKVxuICAgIC5pbXBvcnRLZXkoXCJyYXdcIiwga2V5LCBcIkFFUy1DVFJcIiwgZmFsc2UsIFtcImVuY3J5cHRcIl0pXG4gICAgLnRoZW4oKGNyeXB0b0tleSkgPT5cbiAgICAgIGdldFN1YnRsZSgpLmVuY3J5cHQoXG4gICAgICAgIHsgbmFtZTogXCJBRVMtQ1RSXCIsIGNvdW50ZXI6IGNvdW50ZXIsIGxlbmd0aDogMTI4IH0sXG4gICAgICAgIGNyeXB0b0tleSxcbiAgICAgICAgZGF0YVxuICAgICAgKVxuICAgIClcbiAgICAudGhlbigoYnl0ZXMpID0+IG5ldyBVaW50OEFycmF5KGJ5dGVzKSk7XG59XG5cbmZ1bmN0aW9uIGFlc0N0ckRlY3J5cHQoXG4gIGNvdW50ZXI6IFVpbnQ4QXJyYXksXG4gIGtleTogQXJyYXlCdWZmZXJMaWtlLFxuICBkYXRhOiBBcnJheUJ1ZmZlckxpa2Vcbik6IFByb21pc2U8VWludDhBcnJheT4ge1xuICByZXR1cm4gZ2V0U3VidGxlKClcbiAgICAuaW1wb3J0S2V5KFwicmF3XCIsIGtleSwgXCJBRVMtQ1RSXCIsIGZhbHNlLCBbXCJkZWNyeXB0XCJdKVxuICAgIC50aGVuKChjcnlwdG9LZXkpID0+XG4gICAgICBnZXRTdWJ0bGUoKS5kZWNyeXB0KFxuICAgICAgICB7IG5hbWU6IFwiQUVTLUNUUlwiLCBjb3VudGVyOiBjb3VudGVyLCBsZW5ndGg6IDEyOCB9LFxuICAgICAgICBjcnlwdG9LZXksXG4gICAgICAgIGRhdGFcbiAgICAgIClcbiAgICApXG4gICAgLnRoZW4oKGJ5dGVzKSA9PiBuZXcgVWludDhBcnJheShieXRlcykpO1xufVxuXG5mdW5jdGlvbiBobWFjU2hhMjU2U2lnbihcbiAga2V5OiBBcnJheUJ1ZmZlckxpa2UsXG4gIG1zZzogQXJyYXlCdWZmZXJMaWtlXG4pOiBQcm9taXNlTGlrZTxVaW50OEFycmF5PiB7XG4gIGNvbnN0IGFsZ29yaXRobSA9IHsgbmFtZTogXCJITUFDXCIsIGhhc2g6IHsgbmFtZTogXCJTSEEtMjU2XCIgfSB9O1xuICByZXR1cm4gZ2V0U3VidGxlKClcbiAgICAuaW1wb3J0S2V5KFwicmF3XCIsIGtleSwgYWxnb3JpdGhtLCBmYWxzZSwgW1wic2lnblwiXSlcbiAgICAudGhlbigoY3J5cHRvS2V5KSA9PiBnZXRTdWJ0bGUoKS5zaWduKGFsZ29yaXRobSwgY3J5cHRvS2V5LCBtc2cpKVxuICAgIC50aGVuKChieXRlcykgPT4gbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKTtcbn1cblxuZnVuY3Rpb24gaG1hY1NoYTI1NlZlcmlmeShcbiAga2V5OiBBcnJheUJ1ZmZlckxpa2UsXG4gIG1zZzogQXJyYXlCdWZmZXJMaWtlLFxuICBzaWc6IEFycmF5QnVmZmVyTGlrZVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IGFsZ29yaXRobSA9IHsgbmFtZTogXCJITUFDXCIsIGhhc2g6IHsgbmFtZTogXCJTSEEtMjU2XCIgfSB9O1xuICBjb25zdCBfa2V5ID0gZ2V0U3VidGxlKCkuaW1wb3J0S2V5KFwicmF3XCIsIGtleSwgYWxnb3JpdGhtLCBmYWxzZSwgW1widmVyaWZ5XCJdKTtcbiAgcmV0dXJuIF9rZXkudGhlbigoY3J5cHRvS2V5KSA9PlxuICAgIGdldFN1YnRsZSgpLnZlcmlmeShhbGdvcml0aG0sIGNyeXB0b0tleSwgc2lnLCBtc2cpXG4gICk7XG59XG5cbi8qKlxuICogRGVyaXZlIHNoYXJlZCBzZWNyZXQgZm9yIGdpdmVuIHByaXZhdGUgYW5kIHB1YmxpYyBrZXlzLlxuICpcbiAqIEBwYXJhbSAgcHJpdmF0ZUtleUEgU2VuZGVyJ3MgcHJpdmF0ZSBrZXkgKDMyIGJ5dGVzKVxuICogQHBhcmFtICBwdWJsaWNLZXlCIFJlY2lwaWVudCdzIHB1YmxpYyBrZXkgKDY1IGJ5dGVzKVxuICogQHJldHVybnMgIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGRlcml2ZWQgc2hhcmVkIHNlY3JldCAoUHgsIDMyIGJ5dGVzKVxuICogQHRocm93cyBFcnJvciBJZiBhcmd1bWVudHMgYXJlIGludmFsaWRcbiAqL1xuZnVuY3Rpb24gZGVyaXZlKHByaXZhdGVLZXlBOiBVaW50OEFycmF5LCBwdWJsaWNLZXlCOiBVaW50OEFycmF5KTogVWludDhBcnJheSB7XG4gIGlmIChwcml2YXRlS2V5QS5sZW5ndGggIT09IDMyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEJhZCBwcml2YXRlIGtleSwgaXQgc2hvdWxkIGJlIDMyIGJ5dGVzIGJ1dCBpdCdzIGFjdHVhbGx5ICR7cHJpdmF0ZUtleUEubGVuZ3RofSBieXRlcyBsb25nYFxuICAgICk7XG4gIH0gZWxzZSBpZiAocHVibGljS2V5Qi5sZW5ndGggIT09IDY1KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEJhZCBwdWJsaWMga2V5LCBpdCBzaG91bGQgYmUgNjUgYnl0ZXMgYnV0IGl0J3MgYWN0dWFsbHkgJHtwdWJsaWNLZXlCLmxlbmd0aH0gYnl0ZXMgbG9uZ2BcbiAgICApO1xuICB9IGVsc2UgaWYgKHB1YmxpY0tleUJbMF0gIT09IDQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgcHVibGljIGtleSwgYSB2YWxpZCBwdWJsaWMga2V5IHdvdWxkIGJlZ2luIHdpdGggNFwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBweCA9IHNlY3AuZ2V0U2hhcmVkU2VjcmV0KHByaXZhdGVLZXlBLCBwdWJsaWNLZXlCLCB0cnVlKTtcbiAgICAvLyBSZW1vdmUgdGhlIGNvbXByZXNzaW9uIHByZWZpeFxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShoZXhUb0J5dGVzKHB4KS5zbGljZSgxKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbmNyeXB0IG1lc3NhZ2UgZm9yIGdpdmVuIHJlY2lwaWVudCdzIHB1YmxpYyBrZXkuXG4gKlxuICogQHBhcmFtICBwdWJsaWNLZXlUbyBSZWNpcGllbnQncyBwdWJsaWMga2V5ICg2NSBieXRlcylcbiAqIEBwYXJhbSAgbXNnIFRoZSBtZXNzYWdlIGJlaW5nIGVuY3J5cHRlZFxuICogQHJldHVybiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBFQ0lFUyBzdHJ1Y3R1cmUgc2VyaWFsaXplZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5jcnlwdChcbiAgcHVibGljS2V5VG86IFVpbnQ4QXJyYXksXG4gIG1zZzogVWludDhBcnJheVxuKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XG4gIGNvbnN0IGVwaGVtUHJpdmF0ZUtleSA9IHJhbmRvbUJ5dGVzKDMyKTtcblxuICBjb25zdCBzaGFyZWRQeCA9IGF3YWl0IGRlcml2ZShlcGhlbVByaXZhdGVLZXksIHB1YmxpY0tleVRvKTtcblxuICBjb25zdCBoYXNoID0gYXdhaXQga2RmKHNoYXJlZFB4LCAzMik7XG5cbiAgY29uc3QgaXYgPSByYW5kb21CeXRlcygxNik7XG4gIGNvbnN0IGVuY3J5cHRpb25LZXkgPSBoYXNoLnNsaWNlKDAsIDE2KTtcbiAgY29uc3QgY2lwaGVyVGV4dCA9IGF3YWl0IGFlc0N0ckVuY3J5cHQoaXYsIGVuY3J5cHRpb25LZXksIG1zZyk7XG5cbiAgY29uc3QgaXZDaXBoZXJUZXh0ID0gY29uY2F0KFtpdiwgY2lwaGVyVGV4dF0sIGl2Lmxlbmd0aCArIGNpcGhlclRleHQubGVuZ3RoKTtcblxuICBjb25zdCBtYWNLZXkgPSBhd2FpdCBzaGEyNTYoaGFzaC5zbGljZSgxNikpO1xuICBjb25zdCBobWFjID0gYXdhaXQgaG1hY1NoYTI1NlNpZ24obWFjS2V5LCBpdkNpcGhlclRleHQpO1xuICBjb25zdCBlcGhlbVB1YmxpY0tleSA9IHNlY3AuZ2V0UHVibGljS2V5KGVwaGVtUHJpdmF0ZUtleSwgZmFsc2UpO1xuXG4gIHJldHVybiBjb25jYXQoXG4gICAgW2VwaGVtUHVibGljS2V5LCBpdkNpcGhlclRleHQsIGhtYWNdLFxuICAgIGVwaGVtUHVibGljS2V5Lmxlbmd0aCArIGl2Q2lwaGVyVGV4dC5sZW5ndGggKyBobWFjLmxlbmd0aFxuICApO1xufVxuXG5jb25zdCBtZXRhTGVuZ3RoID0gMSArIDY0ICsgMTYgKyAzMjtcblxuLyoqXG4gKiBEZWNyeXB0IG1lc3NhZ2UgdXNpbmcgZ2l2ZW4gcHJpdmF0ZSBrZXkuXG4gKlxuICogQHBhcmFtIHByaXZhdGVLZXkgQSAzMi1ieXRlIHByaXZhdGUga2V5IG9mIHJlY2lwaWVudCBvZiB0aGUgbWVzc2FnZVxuICogQHBhcmFtIGVuY3J5cHRlZCBFQ0lFUyBzZXJpYWxpemVkIHN0cnVjdHVyZSAocmVzdWx0IG9mIEVDSUVTIGVuY3J5cHRpb24pXG4gKiBAcmV0dXJucyBUaGUgY2xlYXIgdGV4dFxuICogQHRocm93cyBFcnJvciBJZiBkZWNyeXB0aW9uIGZhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWNyeXB0KFxuICBwcml2YXRlS2V5OiBVaW50OEFycmF5LFxuICBlbmNyeXB0ZWQ6IFVpbnQ4QXJyYXlcbik6IFByb21pc2U8VWludDhBcnJheT4ge1xuICBpZiAoZW5jcnlwdGVkLmxlbmd0aCA8PSBtZXRhTGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgQ2lwaGVydGV4dC4gRGF0YSBpcyB0b28gc21hbGwuIEl0IHNob3VsZCBiYSBhdCBsZWFzdCAke21ldGFMZW5ndGh9IGJ5dGVzYFxuICAgICk7XG4gIH0gZWxzZSBpZiAoZW5jcnlwdGVkWzBdICE9PSA0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYE5vdCBhIHZhbGlkIGNpcGhlcnRleHQuIEl0IHNob3VsZCBiZWdpbiB3aXRoIDQgYnV0IGFjdHVhbGx5IGJlZ2luIHdpdGggJHtlbmNyeXB0ZWRbMF19YFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gZGVzZXJpYWxpemVcbiAgICBjb25zdCBlcGhlbVB1YmxpY0tleSA9IGVuY3J5cHRlZC5zbGljZSgwLCA2NSk7XG4gICAgY29uc3QgY2lwaGVyVGV4dExlbmd0aCA9IGVuY3J5cHRlZC5sZW5ndGggLSBtZXRhTGVuZ3RoO1xuICAgIGNvbnN0IGl2ID0gZW5jcnlwdGVkLnNsaWNlKDY1LCA2NSArIDE2KTtcbiAgICBjb25zdCBjaXBoZXJBbmRJdiA9IGVuY3J5cHRlZC5zbGljZSg2NSwgNjUgKyAxNiArIGNpcGhlclRleHRMZW5ndGgpO1xuICAgIGNvbnN0IGNpcGhlcnRleHQgPSBjaXBoZXJBbmRJdi5zbGljZSgxNik7XG4gICAgY29uc3QgbXNnTWFjID0gZW5jcnlwdGVkLnNsaWNlKDY1ICsgMTYgKyBjaXBoZXJUZXh0TGVuZ3RoKTtcblxuICAgIC8vIGNoZWNrIEhNQUNcbiAgICBjb25zdCBweCA9IGRlcml2ZShwcml2YXRlS2V5LCBlcGhlbVB1YmxpY0tleSk7XG4gICAgY29uc3QgaGFzaCA9IGF3YWl0IGtkZihweCwgMzIpO1xuICAgIGNvbnN0IFtlbmNyeXB0aW9uS2V5LCBtYWNLZXldID0gYXdhaXQgc2hhMjU2KGhhc2guc2xpY2UoMTYpKS50aGVuKFxuICAgICAgKG1hY0tleSkgPT4gW2hhc2guc2xpY2UoMCwgMTYpLCBtYWNLZXldXG4gICAgKTtcblxuICAgIGlmICghKGF3YWl0IGhtYWNTaGEyNTZWZXJpZnkobWFjS2V5LCBjaXBoZXJBbmRJdiwgbXNnTWFjKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCBNQUNcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFlc0N0ckRlY3J5cHQoaXYsIGVuY3J5cHRpb25LZXksIGNpcGhlcnRleHQpO1xuICB9XG59XG4iLCJpbXBvcnQgZGVidWcgZnJvbSBcImRlYnVnXCI7XG5pbXBvcnQgTG9uZyBmcm9tIFwibG9uZ1wiO1xuaW1wb3J0IHsgUmVhZGVyIH0gZnJvbSBcInByb3RvYnVmanMvbWluaW1hbFwiO1xuXG5pbXBvcnQgKiBhcyBwcm90byBmcm9tIFwiLi4vLi4vcHJvdG8vd2FrdS92Mi9tZXNzYWdlXCI7XG5pbXBvcnQgeyBieXRlc1RvVXRmOCwgdXRmOFRvQnl0ZXMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW1wb3J0ICogYXMgdmVyc2lvbl8xIGZyb20gXCIuL3ZlcnNpb25fMVwiO1xuXG5jb25zdCBEZWZhdWx0VmVyc2lvbiA9IDA7XG5jb25zdCBkYmcgPSBkZWJ1ZyhcIndha3U6bWVzc2FnZVwiKTtcblxuZXhwb3J0IGVudW0gRGVjcnlwdGlvbk1ldGhvZCB7XG4gIEFzeW1tZXRyaWMgPSBcImFzeW1tZXRyaWNcIixcbiAgU3ltbWV0cmljID0gXCJzeW1tZXRyaWNcIixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRpbWVzdGFtcCB0byBzZXQgb24gdGhlIG1lc3NhZ2UsIGRlZmF1bHRzIHRvIG5vdyBpZiBub3QgcGFzc2VkLlxuICAgKi9cbiAgdGltZXN0YW1wPzogRGF0ZTtcbiAgLyoqXG4gICAqIFB1YmxpYyBLZXkgdG8gdXNlIHRvIGVuY3J5cHQgdGhlIG1lc3NhZ2VzIHVzaW5nIEVDSUVTIChBc3ltbWV0cmljIEVuY3J5cHRpb24pLlxuICAgKlxuICAgKiBAdGhyb3dzIGlmIGJvdGggYGVuY1B1YmxpY0tleWAgYW5kIGBzeW1LZXlgIGFyZSBwYXNzZWRcbiAgICovXG4gIGVuY1B1YmxpY0tleT86IFVpbnQ4QXJyYXkgfCBzdHJpbmc7XG4gIC8qKlxuICAgKiBLZXkgdG8gdXNlIHRvIGVuY3J5cHQgdGhlIG1lc3NhZ2VzIHVzaW5nIEFFUyAoU3ltbWV0cmljIEVuY3J5cHRpb24pLlxuICAgKlxuICAgKiBAdGhyb3dzIGlmIGJvdGggYGVuY1B1YmxpY0tleWAgYW5kIGBzeW1LZXlgIGFyZSBwYXNzZWRcbiAgICovXG4gIHN5bUtleT86IFVpbnQ4QXJyYXkgfCBzdHJpbmc7XG4gIC8qKlxuICAgKiBQcml2YXRlIGtleSB0byB1c2UgdG8gc2lnbiB0aGUgbWVzc2FnZSwgZWl0aGVyIGBlbmNQdWJsaWNLZXlgIG9yIGBzeW1LZXlgIG11c3QgYmUgcHJvdmlkZWQgYXMgb25seVxuICAgKiBlbmNyeXB0ZWQgbWVzc2FnZXMgYXJlIHNpZ25lZC5cbiAgICovXG4gIHNpZ1ByaXZLZXk/OiBVaW50OEFycmF5O1xufVxuXG5leHBvcnQgY2xhc3MgV2FrdU1lc3NhZ2Uge1xuICBwcml2YXRlIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBwcm90bzogcHJvdG8uV2FrdU1lc3NhZ2UsXG4gICAgcHJpdmF0ZSBfc2lnbmF0dXJlUHVibGljS2V5PzogVWludDhBcnJheSxcbiAgICBwcml2YXRlIF9zaWduYXR1cmU/OiBVaW50OEFycmF5XG4gICkge31cblxuICAvKipcbiAgICogQ3JlYXRlIE1lc3NhZ2Ugd2l0aCBhbiB1dGYtOCBzdHJpbmcgYXMgcGF5bG9hZC5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tVXRmOFN0cmluZyhcbiAgICB1dGY4OiBzdHJpbmcsXG4gICAgY29udGVudFRvcGljOiBzdHJpbmcsXG4gICAgb3B0cz86IE9wdGlvbnNcbiAgKTogUHJvbWlzZTxXYWt1TWVzc2FnZT4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSB1dGY4VG9CeXRlcyh1dGY4KTtcbiAgICByZXR1cm4gV2FrdU1lc3NhZ2UuZnJvbUJ5dGVzKHBheWxvYWQsIGNvbnRlbnRUb3BpYywgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgV2FrdSBNZXNzYWdlIHdpdGggdGhlIGdpdmVuIHBheWxvYWQuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoZSBwYXlsb2FkIGlzIGtlcHQgY2xlYXIgKHZlcnNpb24gMCkuXG4gICAqIElmIGBvcHRzLmVuY1B1YmxpY0tleWAgaXMgcGFzc2VkLCB0aGUgcGF5bG9hZCBpcyBlbmNyeXB0ZWQgdXNpbmdcbiAgICogYXN5bW1ldHJpYyBlbmNyeXB0aW9uICh2ZXJzaW9uIDEpLlxuICAgKlxuICAgKiBJZiBgb3B0cy5zaWdQcml2S2V5YCBpcyBwYXNzZWQgYW5kIHZlcnNpb24gMSBpcyB1c2VkLCB0aGUgcGF5bG9hZCBpcyBzaWduZWRcbiAgICogYmVmb3JlIGVuY3J5cHRpb24uXG4gICAqXG4gICAqIEB0aHJvd3MgaWYgYm90aCBgb3B0cy5lbmNQdWJsaWNLZXlgIGFuZCBgb3B0LnN5bUtleWAgYXJlIHBhc3NlZFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21CeXRlcyhcbiAgICBwYXlsb2FkOiBVaW50OEFycmF5LFxuICAgIGNvbnRlbnRUb3BpYzogc3RyaW5nLFxuICAgIG9wdHM/OiBPcHRpb25zXG4gICk6IFByb21pc2U8V2FrdU1lc3NhZ2U+IHtcbiAgICBjb25zdCB7IHRpbWVzdGFtcCwgZW5jUHVibGljS2V5LCBzeW1LZXksIHNpZ1ByaXZLZXkgfSA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7IHRpbWVzdGFtcDogbmV3IERhdGUoKSB9LFxuICAgICAgb3B0cyA/IG9wdHMgOiB7fVxuICAgICk7XG5cbiAgICBsZXQgX3BheWxvYWQgPSBwYXlsb2FkO1xuICAgIGxldCB2ZXJzaW9uID0gRGVmYXVsdFZlcnNpb247XG4gICAgbGV0IHNpZztcblxuICAgIGlmIChlbmNQdWJsaWNLZXkgJiYgc3ltS2V5KSB7XG4gICAgICB0aHJvdyBcIlBhc3MgZWl0aGVyIGBlbmNQdWJsaWNLZXlgIG9yIGBzeW1LZXlgLCBub3QgYm90aC5cIjtcbiAgICB9XG5cbiAgICBpZiAoZW5jUHVibGljS2V5KSB7XG4gICAgICBjb25zdCBlbmMgPSBhd2FpdCB2ZXJzaW9uXzEuY2xlYXJFbmNvZGUoX3BheWxvYWQsIHNpZ1ByaXZLZXkpO1xuICAgICAgX3BheWxvYWQgPSBhd2FpdCB2ZXJzaW9uXzEuZW5jcnlwdEFzeW1tZXRyaWMoZW5jLnBheWxvYWQsIGVuY1B1YmxpY0tleSk7XG4gICAgICBzaWcgPSBlbmMuc2lnO1xuICAgICAgdmVyc2lvbiA9IDE7XG4gICAgfSBlbHNlIGlmIChzeW1LZXkpIHtcbiAgICAgIGNvbnN0IGVuYyA9IGF3YWl0IHZlcnNpb25fMS5jbGVhckVuY29kZShfcGF5bG9hZCwgc2lnUHJpdktleSk7XG4gICAgICBfcGF5bG9hZCA9IGF3YWl0IHZlcnNpb25fMS5lbmNyeXB0U3ltbWV0cmljKGVuYy5wYXlsb2FkLCBzeW1LZXkpO1xuICAgICAgc2lnID0gZW5jLnNpZztcbiAgICAgIHZlcnNpb24gPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgV2FrdU1lc3NhZ2UoXG4gICAgICB7XG4gICAgICAgIHBheWxvYWQ6IF9wYXlsb2FkLFxuICAgICAgICB0aW1lc3RhbXBEZXByZWNhdGVkOiB0aW1lc3RhbXAudmFsdWVPZigpIC8gMTAwMCxcbiAgICAgICAgLy8gbWlsbGlzZWNvbmRzIDEwXi0zIHRvIG5hbm9zZWNvbmRzIDEwXi05XG4gICAgICAgIHRpbWVzdGFtcDogTG9uZy5mcm9tTnVtYmVyKHRpbWVzdGFtcC52YWx1ZU9mKCkpLm11bCgxXzAwMF8wMDApLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICBjb250ZW50VG9waWMsXG4gICAgICB9LFxuICAgICAgc2lnPy5wdWJsaWNLZXksXG4gICAgICBzaWc/LnNpZ25hdHVyZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlIGEgYnl0ZSBhcnJheSBpbnRvIFdha3UgTWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtcyBieXRlcyBUaGUgbWVzc2FnZSBlbmNvZGVkIHVzaW5nIHByb3RvYnVmIGFzIGRlZmluZWQgaW4gWzE0L1dBS1UyLU1FU1NBR0VdKGh0dHBzOi8vcmZjLnZhYy5kZXYvc3BlYy8xNC8pLlxuICAgKiBAcGFyYW1zIGRlY3J5cHRpb25LZXlzIElmIHRoZSBwYXlsb2FkIGlzIGVuY3J5cHRlZCAodmVyc2lvbiA9IDEpLCB0aGVuIHRoZVxuICAgKiBrZXlzIGFyZSB1c2VkIHRvIGF0dGVtcHQgZGVjcnlwdGlvbiBvZiB0aGUgbWVzc2FnZS4gVGhlIHBhc3NlZCBrZXkgY2FuIGVpdGhlclxuICAgKiBiZSBhc3ltbWV0cmljIHByaXZhdGUga2V5cyBvciBzeW1tZXRyaWMga2V5cywgYm90aCBtZXRob2QgYXJlIHRyaWVkIGZvciBlYWNoXG4gICAqIGtleSB1bnRpbCB0aGUgbWVzc2FnZSBpcyBkZWNyeXB0ZWQgb3IgY29tYmluYXRpb25zIGFyZSBydW4gb3V0LlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRlY29kZShcbiAgICBieXRlczogVWludDhBcnJheSxcbiAgICBkZWNyeXB0aW9uS2V5cz86IEFycmF5PHtcbiAgICAgIGtleTogVWludDhBcnJheTtcbiAgICAgIG1ldGhvZD86IERlY3J5cHRpb25NZXRob2Q7XG4gICAgICBjb250ZW50VG9waWM/OiBzdHJpbmdbXTtcbiAgICB9PlxuICApOiBQcm9taXNlPFdha3VNZXNzYWdlIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgcHJvdG9CdWYgPSBwcm90by5XYWt1TWVzc2FnZS5kZWNvZGUoUmVhZGVyLmNyZWF0ZShieXRlcykpO1xuXG4gICAgcmV0dXJuIFdha3VNZXNzYWdlLmRlY29kZVByb3RvKHByb3RvQnVmLCBkZWNyeXB0aW9uS2V5cyk7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlIGFuZCBkZWNyeXB0IFdha3UgTWVzc2FnZSBQcm90b2J1ZiBPYmplY3QgaW50byBXYWt1IE1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbXMgcHJvdG9CdWYgVGhlIG1lc3NhZ2UgdG8gZGVjb2RlIGFuZCBkZWNyeXB0LlxuICAgKiBAcGFyYW1zIGRlY3J5cHRpb25LZXlzIElmIHRoZSBwYXlsb2FkIGlzIGVuY3J5cHRlZCAodmVyc2lvbiA9IDEpLCB0aGVuIHRoZVxuICAgKiBrZXlzIGFyZSB1c2VkIHRvIGF0dGVtcHQgZGVjcnlwdGlvbiBvZiB0aGUgbWVzc2FnZS4gVGhlIHBhc3NlZCBrZXkgY2FuIGVpdGhlclxuICAgKiBiZSBhc3ltbWV0cmljIHByaXZhdGUga2V5cyBvciBzeW1tZXRyaWMga2V5cywgYm90aCBtZXRob2QgYXJlIHRyaWVkIGZvciBlYWNoXG4gICAqIGtleSB1bnRpbCB0aGUgbWVzc2FnZSBpcyBkZWNyeXB0ZWQgb3IgY29tYmluYXRpb25zIGFyZSBydW4gb3V0LlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRlY29kZVByb3RvKFxuICAgIHByb3RvQnVmOiBwcm90by5XYWt1TWVzc2FnZSxcbiAgICBkZWNyeXB0aW9uS2V5cz86IEFycmF5PHtcbiAgICAgIGtleTogVWludDhBcnJheTtcbiAgICAgIG1ldGhvZD86IERlY3J5cHRpb25NZXRob2Q7XG4gICAgICBjb250ZW50VG9waWNzPzogc3RyaW5nW107XG4gICAgfT5cbiAgKTogUHJvbWlzZTxXYWt1TWVzc2FnZSB8IHVuZGVmaW5lZD4ge1xuICAgIGlmIChwcm90b0J1Zi5wYXlsb2FkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRiZyhcIlBheWxvYWQgaXMgdW5kZWZpbmVkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYXlsb2FkID0gcHJvdG9CdWYucGF5bG9hZDtcblxuICAgIGxldCBzaWduYXR1cmVQdWJsaWNLZXk7XG4gICAgbGV0IHNpZ25hdHVyZTtcbiAgICBpZiAocHJvdG9CdWYudmVyc2lvbiA9PT0gMSAmJiBwcm90b0J1Zi5wYXlsb2FkKSB7XG4gICAgICBpZiAoZGVjcnlwdGlvbktleXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkYmcoXCJQYXlsb2FkIGlzIGVuY3J5cHRlZCBidXQgbm8gcHJpdmF0ZSBrZXlzIGhhdmUgYmVlbiBwcm92aWRlZC5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJucyBhIGJ1bmNoIG9mIGB1bmRlZmluZWRgIGFuZCBob3BlZnVsbHkgb25lIGRlY3J5cHRlZCByZXN1bHRcbiAgICAgIGNvbnN0IGFsbFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgZGVjcnlwdGlvbktleXMubWFwKGFzeW5jICh7IGtleSwgbWV0aG9kLCBjb250ZW50VG9waWNzIH0pID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAhY29udGVudFRvcGljcyB8fFxuICAgICAgICAgICAgKHByb3RvQnVmLmNvbnRlbnRUb3BpYyAmJlxuICAgICAgICAgICAgICBjb250ZW50VG9waWNzLmluY2x1ZGVzKHByb3RvQnVmLmNvbnRlbnRUb3BpYykpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgICAgICAgICBjYXNlIERlY3J5cHRpb25NZXRob2QuQXN5bW1ldHJpYzpcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHZlcnNpb25fMS5kZWNyeXB0QXN5bW1ldHJpYyhwYXlsb2FkLCBrZXkpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgIGRiZyhcbiAgICAgICAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gZGVjcnlwdCBtZXNzYWdlIHVzaW5nIGFzeW1tZXRyaWMgZW5jcnlwdGlvbiBkZXNwaXRlIGRlY3J5cHRpb24gbWV0aG9kIGJlaW5nIHNwZWNpZmllZFwiLFxuICAgICAgICAgICAgICAgICAgICBlXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBEZWNyeXB0aW9uTWV0aG9kLlN5bW1ldHJpYzpcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHZlcnNpb25fMS5kZWNyeXB0U3ltbWV0cmljKHBheWxvYWQsIGtleSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgZGJnKFxuICAgICAgICAgICAgICAgICAgICBcIkZhaWxlZCB0byBkZWNyeXB0IG1lc3NhZ2UgdXNpbmcgYXN5bW1ldHJpYyBlbmNyeXB0aW9uIGRlc3BpdGUgZGVjcnlwdGlvbiBtZXRob2QgYmVpbmcgc3BlY2lmaWVkXCIsXG4gICAgICAgICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdmVyc2lvbl8xLmRlY3J5cHRTeW1tZXRyaWMocGF5bG9hZCwga2V5KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICBkYmcoXG4gICAgICAgICAgICAgICAgICAgIFwiRmFpbGVkIHRvIGRlY3J5cHQgbWVzc2FnZSB1c2luZyBzeW1tZXRyaWMgZW5jcnlwdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBlXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHZlcnNpb25fMS5kZWNyeXB0QXN5bW1ldHJpYyhwYXlsb2FkLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBkYmcoXG4gICAgICAgICAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gZGVjcnlwdCBtZXNzYWdlIHVzaW5nIGFzeW1tZXRyaWMgZW5jcnlwdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8ga2V5IGF2YWlsYWJsZSBmb3IgdGhpcyBjb250ZW50IHRvcGljXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgY29uc3QgaXNEZWZpbmVkID0gKGRlYzogVWludDhBcnJheSB8IHVuZGVmaW5lZCk6IGRlYyBpcyBVaW50OEFycmF5ID0+IHtcbiAgICAgICAgcmV0dXJuICEhZGVjO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgZGVjb2RlZFJlc3VsdHMgPSBhbGxSZXN1bHRzLmZpbHRlcihpc0RlZmluZWQpO1xuXG4gICAgICBpZiAoZGVjb2RlZFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRiZyhcIkZhaWxlZCB0byBkZWNyeXB0IHBheWxvYWQuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBkZWMgPSBkZWNvZGVkUmVzdWx0c1swXTtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdmVyc2lvbl8xLmNsZWFyRGVjb2RlKGRlYyk7XG4gICAgICBpZiAoIXJlcykge1xuICAgICAgICBkYmcoXCJGYWlsZWQgdG8gZGVjb2RlIHBheWxvYWQuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKHByb3RvQnVmLCB7IHBheWxvYWQ6IHJlcy5wYXlsb2FkIH0pO1xuICAgICAgc2lnbmF0dXJlUHVibGljS2V5ID0gcmVzLnNpZz8ucHVibGljS2V5O1xuICAgICAgc2lnbmF0dXJlID0gcmVzLnNpZz8uc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgV2FrdU1lc3NhZ2UocHJvdG9CdWYsIHNpZ25hdHVyZVB1YmxpY0tleSwgc2lnbmF0dXJlKTtcbiAgfVxuXG4gIGVuY29kZSgpOiBVaW50OEFycmF5IHtcbiAgICByZXR1cm4gcHJvdG8uV2FrdU1lc3NhZ2UuZW5jb2RlKHRoaXMucHJvdG8pLmZpbmlzaCgpO1xuICB9XG5cbiAgZ2V0IHBheWxvYWRBc1V0ZjgoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMucGF5bG9hZCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBieXRlc1RvVXRmOCh0aGlzLnBheWxvYWQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGRiZyhcIkNvdWxkIG5vdCBkZWNvZGUgYnl0ZSBhcyBVVEYtOFwiLCBlKTtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIGdldCBwYXlsb2FkKCk6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLnByb3RvLnBheWxvYWQpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh0aGlzLnByb3RvLnBheWxvYWQpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBnZXQgY29udGVudFRvcGljKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMucHJvdG8uY29udGVudFRvcGljO1xuICB9XG5cbiAgZ2V0IHZlcnNpb24oKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5wcm90by52ZXJzaW9uO1xuICB9XG5cbiAgZ2V0IHRpbWVzdGFtcCgpOiBEYXRlIHwgdW5kZWZpbmVkIHtcbiAgICAvLyBJbiB0aGUgY2FzZSB3ZSByZWNlaXZlIGEgdmFsdWUgdGhhdCBpcyBiaWdnZXIgdGhhbiBKUydzIG1heCBudW1iZXIsXG4gICAgLy8gd2UgY2F0Y2ggdGhlIGVycm9yIGFuZCByZXR1cm4gdW5kZWZpbmVkLlxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5wcm90by50aW1lc3RhbXApIHtcbiAgICAgICAgLy8gbmFub3NlY29uZHMgMTBeLTkgdG8gbWlsbGlzZWNvbmRzIDEwXi0zXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMucHJvdG8udGltZXN0YW1wLmRpdigxXzAwMF8wMDApLnRvTnVtYmVyKCk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm90by50aW1lc3RhbXBEZXByZWNhdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnByb3RvLnRpbWVzdGFtcERlcHJlY2F0ZWQgKiAxMDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcHVibGljIGtleSB1c2VkIHRvIHNpZ24gdGhlIG1lc3NhZ2UuXG4gICAqXG4gICAqIE1BWSBiZSBwcmVzZW50IGlmIHRoZSBtZXNzYWdlIGlzIHZlcnNpb24gMS5cbiAgICovXG4gIGdldCBzaWduYXR1cmVQdWJsaWNLZXkoKTogVWludDhBcnJheSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX3NpZ25hdHVyZVB1YmxpY0tleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc2lnbmF0dXJlIG9mIHRoZSBtZXNzYWdlLlxuICAgKlxuICAgKiBNQVkgYmUgcHJlc2VudCBpZiB0aGUgbWVzc2FnZSBpcyB2ZXJzaW9uIDEuXG4gICAqL1xuICBnZXQgc2lnbmF0dXJlKCk6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9zaWduYXR1cmU7XG4gIH1cbn1cbiIsImltcG9ydCB7IGdldFN1YnRsZSwgcmFuZG9tQnl0ZXMgfSBmcm9tIFwiLi4vY3J5cHRvXCI7XG5cbmV4cG9ydCBjb25zdCBLZXlTaXplID0gMzI7XG5leHBvcnQgY29uc3QgSXZTaXplID0gMTI7XG5leHBvcnQgY29uc3QgVGFnU2l6ZSA9IDE2O1xuXG5jb25zdCBBbGdvcml0aG0gPSB7IG5hbWU6IFwiQUVTLUdDTVwiLCBsZW5ndGg6IDEyOCB9O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5jcnlwdChcbiAgaXY6IFVpbnQ4QXJyYXksXG4gIGtleTogVWludDhBcnJheSxcbiAgY2xlYXJUZXh0OiBVaW50OEFycmF5XG4pOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcbiAgcmV0dXJuIGdldFN1YnRsZSgpXG4gICAgLmltcG9ydEtleShcInJhd1wiLCBrZXksIEFsZ29yaXRobSwgZmFsc2UsIFtcImVuY3J5cHRcIl0pXG4gICAgLnRoZW4oKGNyeXB0b0tleSkgPT5cbiAgICAgIGdldFN1YnRsZSgpLmVuY3J5cHQoeyBpdiwgLi4uQWxnb3JpdGhtIH0sIGNyeXB0b0tleSwgY2xlYXJUZXh0KVxuICAgIClcbiAgICAudGhlbigoY2lwaGVyKSA9PiBuZXcgVWludDhBcnJheShjaXBoZXIpKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlY3J5cHQoXG4gIGl2OiBVaW50OEFycmF5LFxuICBrZXk6IFVpbnQ4QXJyYXksXG4gIGNpcGhlclRleHQ6IFVpbnQ4QXJyYXlcbik6IFByb21pc2U8VWludDhBcnJheT4ge1xuICByZXR1cm4gZ2V0U3VidGxlKClcbiAgICAuaW1wb3J0S2V5KFwicmF3XCIsIGtleSwgQWxnb3JpdGhtLCBmYWxzZSwgW1wiZGVjcnlwdFwiXSlcbiAgICAudGhlbigoY3J5cHRvS2V5KSA9PlxuICAgICAgZ2V0U3VidGxlKCkuZGVjcnlwdCh7IGl2LCAuLi5BbGdvcml0aG0gfSwgY3J5cHRvS2V5LCBjaXBoZXJUZXh0KVxuICAgIClcbiAgICAudGhlbigoY2xlYXIpID0+IG5ldyBVaW50OEFycmF5KGNsZWFyKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUl2KCk6IFVpbnQ4QXJyYXkge1xuICByZXR1cm4gcmFuZG9tQnl0ZXMoSXZTaXplKTtcbn1cbiIsImltcG9ydCAqIGFzIHNlY3AgZnJvbSBcIkBub2JsZS9zZWNwMjU2azFcIjtcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCJ1aW50OGFycmF5cy9jb25jYXRcIjtcblxuaW1wb3J0IHsga2VjY2FrMjU2LCByYW5kb21CeXRlcywgc2lnbiB9IGZyb20gXCIuLi9jcnlwdG9cIjtcbmltcG9ydCB7IGhleFRvQnl0ZXMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW1wb3J0ICogYXMgZWNpZXMgZnJvbSBcIi4vZWNpZXNcIjtcbmltcG9ydCAqIGFzIHN5bW1ldHJpYyBmcm9tIFwiLi9zeW1tZXRyaWNcIjtcblxuY29uc3QgRmxhZ3NMZW5ndGggPSAxO1xuY29uc3QgRmxhZ01hc2sgPSAzOyAvLyAwMDExXG5jb25zdCBJc1NpZ25lZE1hc2sgPSA0OyAvLyAwMTAwXG5jb25zdCBQYWRkaW5nVGFyZ2V0ID0gMjU2O1xuY29uc3QgU2lnbmF0dXJlTGVuZ3RoID0gNjU7XG5cbmV4cG9ydCBjb25zdCBQcml2YXRlS2V5U2l6ZSA9IDMyO1xuXG5leHBvcnQgdHlwZSBTaWduYXR1cmUgPSB7XG4gIHNpZ25hdHVyZTogVWludDhBcnJheTtcbiAgcHVibGljS2V5OiBVaW50OEFycmF5IHwgdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBFbmNvZGUgdGhlIHBheWxvYWQgcHJlLWVuY3J5cHRpb24uXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0gbWVzc2FnZVBheWxvYWQ6IFRoZSBwYXlsb2FkIHRvIGluY2x1ZGUgaW4gdGhlIG1lc3NhZ2VcbiAqIEBwYXJhbSBzaWdQcml2S2V5OiBJZiBzZXQsIGEgc2lnbmF0dXJlIHVzaW5nIHRoaXMgcHJpdmF0ZSBrZXkgaXMgYWRkZWQuXG4gKiBAcmV0dXJucyBUaGUgZW5jb2RlZCBwYXlsb2FkLCByZWFkeSBmb3IgZW5jcnlwdGlvbiB1c2luZyB7QGxpbmsgZW5jcnlwdEFzeW1tZXRyaWN9XG4gKiBvciB7QGxpbmsgZW5jcnlwdFN5bW1ldHJpY30uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhckVuY29kZShcbiAgbWVzc2FnZVBheWxvYWQ6IFVpbnQ4QXJyYXksXG4gIHNpZ1ByaXZLZXk/OiBVaW50OEFycmF5XG4pOiBQcm9taXNlPHsgcGF5bG9hZDogVWludDhBcnJheTsgc2lnPzogU2lnbmF0dXJlIH0+IHtcbiAgbGV0IGVudmVsb3BlID0gbmV3IFVpbnQ4QXJyYXkoWzBdKTsgLy8gTm8gZmxhZ3NcbiAgZW52ZWxvcGUgPSBhZGRQYXlsb2FkU2l6ZUZpZWxkKGVudmVsb3BlLCBtZXNzYWdlUGF5bG9hZCk7XG4gIGVudmVsb3BlID0gY29uY2F0KFtlbnZlbG9wZSwgbWVzc2FnZVBheWxvYWRdKTtcblxuICAvLyBDYWxjdWxhdGUgcGFkZGluZzpcbiAgbGV0IHJhd1NpemUgPVxuICAgIEZsYWdzTGVuZ3RoICtcbiAgICBjb21wdXRlU2l6ZU9mUGF5bG9hZFNpemVGaWVsZChtZXNzYWdlUGF5bG9hZCkgK1xuICAgIG1lc3NhZ2VQYXlsb2FkLmxlbmd0aDtcblxuICBpZiAoc2lnUHJpdktleSkge1xuICAgIHJhd1NpemUgKz0gU2lnbmF0dXJlTGVuZ3RoO1xuICB9XG5cbiAgY29uc3QgcmVtYWluZGVyID0gcmF3U2l6ZSAlIFBhZGRpbmdUYXJnZXQ7XG4gIGNvbnN0IHBhZGRpbmdTaXplID0gUGFkZGluZ1RhcmdldCAtIHJlbWFpbmRlcjtcbiAgY29uc3QgcGFkID0gcmFuZG9tQnl0ZXMocGFkZGluZ1NpemUpO1xuXG4gIGlmICghdmFsaWRhdGVEYXRhSW50ZWdyaXR5KHBhZCwgcGFkZGluZ1NpemUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZmFpbGVkIHRvIGdlbmVyYXRlIHJhbmRvbSBwYWRkaW5nIG9mIHNpemUgXCIgKyBwYWRkaW5nU2l6ZSk7XG4gIH1cblxuICBlbnZlbG9wZSA9IGNvbmNhdChbZW52ZWxvcGUsIHBhZF0pO1xuXG4gIGxldCBzaWc7XG4gIGlmIChzaWdQcml2S2V5KSB7XG4gICAgZW52ZWxvcGVbMF0gfD0gSXNTaWduZWRNYXNrO1xuICAgIGNvbnN0IGhhc2ggPSBrZWNjYWsyNTYoZW52ZWxvcGUpO1xuICAgIGNvbnN0IGJ5dGVzU2lnbmF0dXJlID0gYXdhaXQgc2lnbihoYXNoLCBzaWdQcml2S2V5KTtcbiAgICBlbnZlbG9wZSA9IGNvbmNhdChbZW52ZWxvcGUsIGJ5dGVzU2lnbmF0dXJlXSk7XG4gICAgc2lnID0ge1xuICAgICAgc2lnbmF0dXJlOiBieXRlc1NpZ25hdHVyZSxcbiAgICAgIHB1YmxpY0tleTogc2VjcC5nZXRQdWJsaWNLZXkoc2lnUHJpdktleSwgZmFsc2UpLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4geyBwYXlsb2FkOiBlbnZlbG9wZSwgc2lnIH07XG59XG5cbi8qKlxuICogRGVjb2RlIGEgZGVjcnlwdGVkIHBheWxvYWQuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckRlY29kZShcbiAgbWVzc2FnZTogVWludDhBcnJheVxuKTogeyBwYXlsb2FkOiBVaW50OEFycmF5OyBzaWc/OiBTaWduYXR1cmUgfSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHNpemVPZlBheWxvYWRTaXplRmllbGQgPSBnZXRTaXplT2ZQYXlsb2FkU2l6ZUZpZWxkKG1lc3NhZ2UpO1xuICBpZiAoc2l6ZU9mUGF5bG9hZFNpemVGaWVsZCA9PT0gMCkgcmV0dXJuO1xuXG4gIGNvbnN0IHBheWxvYWRTaXplID0gZ2V0UGF5bG9hZFNpemUobWVzc2FnZSwgc2l6ZU9mUGF5bG9hZFNpemVGaWVsZCk7XG4gIGNvbnN0IHBheWxvYWRTdGFydCA9IDEgKyBzaXplT2ZQYXlsb2FkU2l6ZUZpZWxkO1xuICBjb25zdCBwYXlsb2FkID0gbWVzc2FnZS5zbGljZShwYXlsb2FkU3RhcnQsIHBheWxvYWRTdGFydCArIHBheWxvYWRTaXplKTtcblxuICBjb25zdCBpc1NpZ25lZCA9IGlzTWVzc2FnZVNpZ25lZChtZXNzYWdlKTtcblxuICBsZXQgc2lnO1xuICBpZiAoaXNTaWduZWQpIHtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBnZXRTaWduYXR1cmUobWVzc2FnZSk7XG4gICAgY29uc3QgaGFzaCA9IGdldEhhc2gobWVzc2FnZSwgaXNTaWduZWQpO1xuICAgIGNvbnN0IHB1YmxpY0tleSA9IGVjUmVjb3ZlclB1YktleShoYXNoLCBzaWduYXR1cmUpO1xuICAgIHNpZyA9IHsgc2lnbmF0dXJlLCBwdWJsaWNLZXkgfTtcbiAgfVxuXG4gIHJldHVybiB7IHBheWxvYWQsIHNpZyB9O1xufVxuXG5mdW5jdGlvbiBnZXRTaXplT2ZQYXlsb2FkU2l6ZUZpZWxkKG1lc3NhZ2U6IFVpbnQ4QXJyYXkpOiBudW1iZXIge1xuICBjb25zdCBtZXNzYWdlRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcobWVzc2FnZS5idWZmZXIpO1xuICByZXR1cm4gbWVzc2FnZURhdGFWaWV3LmdldFVpbnQ4KDApICYgRmxhZ01hc2s7XG59XG5cbmZ1bmN0aW9uIGdldFBheWxvYWRTaXplKFxuICBtZXNzYWdlOiBVaW50OEFycmF5LFxuICBzaXplT2ZQYXlsb2FkU2l6ZUZpZWxkOiBudW1iZXJcbik6IG51bWJlciB7XG4gIGxldCBwYXlsb2FkU2l6ZUJ5dGVzID0gbWVzc2FnZS5zbGljZSgxLCAxICsgc2l6ZU9mUGF5bG9hZFNpemVGaWVsZCk7XG4gIC8vIGludCAzMiA9PSA0IGJ5dGVzXG4gIGlmIChzaXplT2ZQYXlsb2FkU2l6ZUZpZWxkIDwgNCkge1xuICAgIC8vIElmIGxlc3MgdGhhbiA0IGJ5dGVzIHBhZCByaWdodCAoTGl0dGxlIEVuZGlhbikuXG4gICAgcGF5bG9hZFNpemVCeXRlcyA9IGNvbmNhdChcbiAgICAgIFtwYXlsb2FkU2l6ZUJ5dGVzLCBuZXcgVWludDhBcnJheSg0IC0gc2l6ZU9mUGF5bG9hZFNpemVGaWVsZCldLFxuICAgICAgNFxuICAgICk7XG4gIH1cbiAgY29uc3QgcGF5bG9hZFNpemVEYXRhVmlldyA9IG5ldyBEYXRhVmlldyhwYXlsb2FkU2l6ZUJ5dGVzLmJ1ZmZlcik7XG4gIHJldHVybiBwYXlsb2FkU2l6ZURhdGFWaWV3LmdldEludDMyKDAsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBpc01lc3NhZ2VTaWduZWQobWVzc2FnZTogVWludDhBcnJheSk6IGJvb2xlYW4ge1xuICBjb25zdCBtZXNzYWdlRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcobWVzc2FnZS5idWZmZXIpO1xuICByZXR1cm4gKG1lc3NhZ2VEYXRhVmlldy5nZXRVaW50OCgwKSAmIElzU2lnbmVkTWFzaykgPT0gSXNTaWduZWRNYXNrO1xufVxuXG4vKipcbiAqIFByb2NlZWQgd2l0aCBBc3ltbWV0cmljIGVuY3J5cHRpb24gb2YgdGhlIGRhdGEgYXMgcGVyIFsyNi9XQUtVLVBBWUxPQURdKGh0dHBzOi8vcmZjLnZhYy5kZXYvc3BlYy8yNi8pLlxuICogVGhlIGRhdGEgTVVTVCBiZSBmbGFncyB8IHBheWxvYWQtbGVuZ3RoIHwgcGF5bG9hZCB8IFtzaWduYXR1cmVdLlxuICogVGhlIHJldHVybmVkIHJlc3VsdCAgY2FuIGJlIHNldCB0byBgV2FrdU1lc3NhZ2UucGF5bG9hZGAuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0QXN5bW1ldHJpYyhcbiAgZGF0YTogVWludDhBcnJheSxcbiAgcHVibGljS2V5OiBVaW50OEFycmF5IHwgc3RyaW5nXG4pOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcbiAgcmV0dXJuIGVjaWVzLmVuY3J5cHQoaGV4VG9CeXRlcyhwdWJsaWNLZXkpLCBkYXRhKTtcbn1cblxuLyoqXG4gKiBQcm9jZWVkIHdpdGggQXN5bW1ldHJpYyBkZWNyeXB0aW9uIG9mIHRoZSBkYXRhIGFzIHBlciBbMjYvV0FLVS1QQVlMT0FEXShodHRwczovL3JmYy52YWMuZGV2L3NwZWMvMjYvKS5cbiAqIFRoZSByZXR1cm5lZCBkYXRhIGlzIGV4cGVjdGVkIHRvIGJlIGBmbGFncyB8IHBheWxvYWQtbGVuZ3RoIHwgcGF5bG9hZCB8IFtzaWduYXR1cmVdYC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlY3J5cHRBc3ltbWV0cmljKFxuICBwYXlsb2FkOiBVaW50OEFycmF5LFxuICBwcml2S2V5OiBVaW50OEFycmF5XG4pOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcbiAgcmV0dXJuIGVjaWVzLmRlY3J5cHQocHJpdktleSwgcGF5bG9hZCk7XG59XG5cbi8qKlxuICogUHJvY2VlZCB3aXRoIFN5bW1ldHJpYyBlbmNyeXB0aW9uIG9mIHRoZSBkYXRhIGFzIHBlciBbMjYvV0FLVS1QQVlMT0FEXShodHRwczovL3JmYy52YWMuZGV2L3NwZWMvMjYvKS5cbiAqXG4gKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBlbmNyeXB0LCBleHBlY3RlZCB0byBiZSBgZmxhZ3MgfCBwYXlsb2FkLWxlbmd0aCB8IHBheWxvYWQgfCBbc2lnbmF0dXJlXWAuXG4gKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gdXNlIGZvciBlbmNyeXB0aW9uLlxuICogQHJldHVybnMgVGhlIGRlY3J5cHRlZCBkYXRhLCBgY2lwaGVyVGV4dCB8IHRhZyB8IGl2YCBhbmQgY2FuIGJlIHNldCB0byBgV2FrdU1lc3NhZ2UucGF5bG9hZGAuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0U3ltbWV0cmljKFxuICBkYXRhOiBVaW50OEFycmF5LFxuICBrZXk6IFVpbnQ4QXJyYXkgfCBzdHJpbmdcbik6IFByb21pc2U8VWludDhBcnJheT4ge1xuICBjb25zdCBpdiA9IHN5bW1ldHJpYy5nZW5lcmF0ZUl2KCk7XG5cbiAgLy8gUmV0dXJucyBgY2lwaGVyIHwgdGFnYFxuICBjb25zdCBjaXBoZXIgPSBhd2FpdCBzeW1tZXRyaWMuZW5jcnlwdChpdiwgaGV4VG9CeXRlcyhrZXkpLCBkYXRhKTtcbiAgcmV0dXJuIGNvbmNhdChbY2lwaGVyLCBpdl0pO1xufVxuXG4vKipcbiAqIFByb2NlZWQgd2l0aCBTeW1tZXRyaWMgZGVjcnlwdGlvbiBvZiB0aGUgZGF0YSBhcyBwZXIgWzI2L1dBS1UtUEFZTE9BRF0oaHR0cHM6Ly9yZmMudmFjLmRldi9zcGVjLzI2LykuXG4gKlxuICogQHBhcmFtIHBheWxvYWQgVGhlIGNpcGhlciBkYXRhLCBpdCBpcyBleHBlY3RlZCB0byBiZSBgY2lwaGVyVGV4dCB8IHRhZyB8IGl2YC5cbiAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byB1c2UgZm9yIGRlY3J5cHRpb24uXG4gKiBAcmV0dXJucyBUaGUgZGVjcnlwdGVkIGRhdGEsIGV4cGVjdGVkIHRvIGJlIGBmbGFncyB8IHBheWxvYWQtbGVuZ3RoIHwgcGF5bG9hZCB8IFtzaWduYXR1cmVdYC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlY3J5cHRTeW1tZXRyaWMoXG4gIHBheWxvYWQ6IFVpbnQ4QXJyYXksXG4gIGtleTogVWludDhBcnJheSB8IHN0cmluZ1xuKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XG4gIGNvbnN0IGl2U3RhcnQgPSBwYXlsb2FkLmxlbmd0aCAtIHN5bW1ldHJpYy5JdlNpemU7XG4gIGNvbnN0IGNpcGhlciA9IHBheWxvYWQuc2xpY2UoMCwgaXZTdGFydCk7XG4gIGNvbnN0IGl2ID0gcGF5bG9hZC5zbGljZShpdlN0YXJ0KTtcblxuICByZXR1cm4gc3ltbWV0cmljLmRlY3J5cHQoaXYsIGhleFRvQnl0ZXMoa2V5KSwgY2lwaGVyKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZmxhZ3MgJiBhdXhpbGlhcnktZmllbGQgYXMgcGVyIFsyNi9XQUtVLVBBWUxPQURdKGh0dHBzOi8vcmZjLnZhYy5kZXYvc3BlYy8yNi8pLlxuICovXG5mdW5jdGlvbiBhZGRQYXlsb2FkU2l6ZUZpZWxkKG1zZzogVWludDhBcnJheSwgcGF5bG9hZDogVWludDhBcnJheSk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBmaWVsZFNpemUgPSBjb21wdXRlU2l6ZU9mUGF5bG9hZFNpemVGaWVsZChwYXlsb2FkKTtcbiAgbGV0IGZpZWxkID0gbmV3IFVpbnQ4QXJyYXkoNCk7XG4gIGNvbnN0IGZpZWxkRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoZmllbGQuYnVmZmVyKTtcbiAgZmllbGREYXRhVmlldy5zZXRVaW50MzIoMCwgcGF5bG9hZC5sZW5ndGgsIHRydWUpO1xuICBmaWVsZCA9IGZpZWxkLnNsaWNlKDAsIGZpZWxkU2l6ZSk7XG4gIG1zZyA9IGNvbmNhdChbbXNnLCBmaWVsZF0pO1xuICBtc2dbMF0gfD0gZmllbGRTaXplO1xuICByZXR1cm4gbXNnO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIGF1eGlsaWFyeS1maWVsZCB3aGljaCBpbiB0dXJucyBjb250YWlucyB0aGUgcGF5bG9hZCBzaXplXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVTaXplT2ZQYXlsb2FkU2l6ZUZpZWxkKHBheWxvYWQ6IFVpbnQ4QXJyYXkpOiBudW1iZXIge1xuICBsZXQgcyA9IDE7XG4gIGZvciAobGV0IGkgPSBwYXlsb2FkLmxlbmd0aDsgaSA+PSAyNTY7IGkgLz0gMjU2KSB7XG4gICAgcysrO1xuICB9XG4gIHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURhdGFJbnRlZ3JpdHkoXG4gIHZhbHVlOiBVaW50OEFycmF5LFxuICBleHBlY3RlZFNpemU6IG51bWJlclxuKTogYm9vbGVhbiB7XG4gIGlmICh2YWx1ZS5sZW5ndGggIT09IGV4cGVjdGVkU2l6ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBleHBlY3RlZFNpemUgPD0gMyB8fCB2YWx1ZS5maW5kSW5kZXgoKGkpID0+IGkgIT09IDApICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gZ2V0U2lnbmF0dXJlKG1lc3NhZ2U6IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgcmV0dXJuIG1lc3NhZ2Uuc2xpY2UobWVzc2FnZS5sZW5ndGggLSBTaWduYXR1cmVMZW5ndGgsIG1lc3NhZ2UubGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gZ2V0SGFzaChtZXNzYWdlOiBVaW50OEFycmF5LCBpc1NpZ25lZDogYm9vbGVhbik6IFVpbnQ4QXJyYXkge1xuICBpZiAoaXNTaWduZWQpIHtcbiAgICByZXR1cm4ga2VjY2FrMjU2KG1lc3NhZ2Uuc2xpY2UoMCwgbWVzc2FnZS5sZW5ndGggLSBTaWduYXR1cmVMZW5ndGgpKTtcbiAgfVxuICByZXR1cm4ga2VjY2FrMjU2KG1lc3NhZ2UpO1xufVxuXG5mdW5jdGlvbiBlY1JlY292ZXJQdWJLZXkoXG4gIG1lc3NhZ2VIYXNoOiBVaW50OEFycmF5LFxuICBzaWduYXR1cmU6IFVpbnQ4QXJyYXlcbik6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQge1xuICBjb25zdCByZWNvdmVyeURhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHNpZ25hdHVyZS5zbGljZSg2NCkuYnVmZmVyKTtcbiAgY29uc3QgcmVjb3ZlcnkgPSByZWNvdmVyeURhdGFWaWV3LmdldFVpbnQ4KDApO1xuICBjb25zdCBfc2lnbmF0dXJlID0gc2VjcC5TaWduYXR1cmUuZnJvbUNvbXBhY3Qoc2lnbmF0dXJlLnNsaWNlKDAsIDY0KSk7XG5cbiAgcmV0dXJuIHNlY3AucmVjb3ZlclB1YmxpY0tleShcbiAgICBtZXNzYWdlSGFzaCxcbiAgICBfc2lnbmF0dXJlLFxuICAgIHJlY292ZXJ5LFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAvLyBAdHMtaWdub3JlOiBjb21wcmVzc2VkOiBmYWxzZVxuICAgIGZhbHNlXG4gICk7XG59XG4iLCJleHBvcnQgY29uc3Qgc2Vjb25kID0gMTAwMDtcbmV4cG9ydCBjb25zdCBtaW51dGUgPSA2MCAqIHNlY29uZDtcblxuLyoqXG4gKiBSZWxheUNvZGVjIGlzIHRoZSBsaWJwMnAgaWRlbnRpZmllciBmb3IgdGhlIHdha3UgcmVsYXkgcHJvdG9jb2xcbiAqL1xuZXhwb3J0IGNvbnN0IFJlbGF5Q29kZWNzID0gW1xuICBcIi92YWMvd2FrdS9yZWxheS8yLjAuMC1iZXRhMlwiLFxuICBcIi92YWMvd2FrdS9yZWxheS8yLjAuMFwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IFJlbGF5UGluZ0NvbnRlbnRUb3BpYyA9IFwiL3JlbGF5LXBpbmcvMS9waW5nL251bGxcIjtcblxuLyoqXG4gKiBSZWxheUdvc3NpcEZhY3RvciBhZmZlY3RzIGhvdyBtYW55IHBlZXJzIHdlIHdpbGwgZW1pdCBnb3NzaXAgdG8gYXQgZWFjaCBoZWFydGJlYXQuXG4gKiBXZSB3aWxsIHNlbmQgZ29zc2lwIHRvIFJlbGF5R29zc2lwRmFjdG9yICogKHRvdGFsIG51bWJlciBvZiBub24tbWVzaCBwZWVycyksIG9yXG4gKiBSZWxheURsYXp5LCB3aGljaGV2ZXIgaXMgZ3JlYXRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFJlbGF5R29zc2lwRmFjdG9yID0gMC4yNTtcblxuLyoqXG4gKiBHb3NzaXBzdWJIZWFydGJlYXRJbml0aWFsRGVsYXkgaXMgdGhlIHNob3J0IGRlbGF5IGJlZm9yZSB0aGUgaGVhcnRiZWF0IHRpbWVyIGJlZ2luc1xuICogYWZ0ZXIgdGhlIHJvdXRlciBpcyBpbml0aWFsaXplZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFJlbGF5SGVhcnRiZWF0SW5pdGlhbERlbGF5ID0gMTAwO1xuXG4vKipcbiAqIFJlbGF5SGVhcnRiZWF0SW50ZXJ2YWwgY29udHJvbHMgdGhlIHRpbWUgYmV0d2VlbiBoZWFydGJlYXRzLlxuICovXG5leHBvcnQgY29uc3QgUmVsYXlIZWFydGJlYXRJbnRlcnZhbCA9IHNlY29uZDtcblxuLyoqXG4gKiBSZWxheVBydW5lUGVlcnMgY29udHJvbHMgdGhlIG51bWJlciBvZiBwZWVycyB0byBpbmNsdWRlIGluIHBydW5lIFBlZXIgZVhjaGFuZ2UuXG4gKiBXaGVuIHdlIHBydW5lIGEgcGVlciB0aGF0J3MgZWxpZ2libGUgZm9yIFBYIChoYXMgYSBnb29kIHNjb3JlLCBldGMpLCB3ZSB3aWxsIHRyeSB0b1xuICogc2VuZCB0aGVtIHNpZ25lZCBwZWVyIHJlY29yZHMgZm9yIHVwIHRvIFJlbGF5UHJ1bmVQZWVycyBvdGhlciBwZWVycyB0aGF0IHdlXG4gKiBrbm93IG9mLlxuICovXG5leHBvcnQgY29uc3QgUmVsYXlQcnVuZVBlZXJzID0gMTY7XG5cbi8qKlxuICogUmVsYXlQcnVuZUJhY2tvZmYgY29udHJvbHMgdGhlIGJhY2tvZmYgdGltZSBmb3IgcHJ1bmVkIHBlZXJzLiBUaGlzIGlzIGhvdyBsb25nXG4gKiBhIHBlZXIgbXVzdCB3YWl0IGJlZm9yZSBhdHRlbXB0aW5nIHRvIGdyYWZ0IGludG8gb3VyIG1lc2ggYWdhaW4gYWZ0ZXIgYmVpbmcgcHJ1bmVkLlxuICogV2hlbiBwcnVuaW5nIGEgcGVlciwgd2Ugc2VuZCB0aGVtIG91ciB2YWx1ZSBvZiBSZWxheVBydW5lQmFja29mZiBzbyB0aGV5IGtub3dcbiAqIHRoZSBtaW5pbXVtIHRpbWUgdG8gd2FpdC4gUGVlcnMgcnVubmluZyBvbGRlciB2ZXJzaW9ucyBtYXkgbm90IHNlbmQgYSBiYWNrb2ZmIHRpbWUsXG4gKiBzbyBpZiB3ZSByZWNlaXZlIGEgcHJ1bmUgbWVzc2FnZSB3aXRob3V0IG9uZSwgd2Ugd2lsbCB3YWl0IGF0IGxlYXN0IFJlbGF5UHJ1bmVCYWNrb2ZmXG4gKiBiZWZvcmUgYXR0ZW1wdGluZyB0byByZS1ncmFmdC5cbiAqL1xuZXhwb3J0IGNvbnN0IFJlbGF5UHJ1bmVCYWNrb2ZmID0gbWludXRlO1xuXG4vKipcbiAqIFJlbGF5RmFub3V0VFRMIGNvbnRyb2xzIGhvdyBsb25nIHdlIGtlZXAgdHJhY2sgb2YgdGhlIGZhbm91dCBzdGF0ZS4gSWYgaXQncyBiZWVuXG4gKiBSZWxheUZhbm91dFRUTCBzaW5jZSB3ZSd2ZSBwdWJsaXNoZWQgdG8gYSB0b3BpYyB0aGF0IHdlJ3JlIG5vdCBzdWJzY3JpYmVkIHRvLFxuICogd2UnbGwgZGVsZXRlIHRoZSBmYW5vdXQgbWFwIGZvciB0aGF0IHRvcGljLlxuICovXG5leHBvcnQgY29uc3QgUmVsYXlGYW5vdXRUVEwgPSBtaW51dGU7XG5cbi8qKlxuICogUmVsYXlPcHBvcnR1bmlzdGljR3JhZnRUaWNrcyBpcyB0aGUgbnVtYmVyIG9mIGhlYXJ0YmVhdCB0aWNrcyBmb3IgYXR0ZW1wdGluZyB0byBpbXByb3ZlIHRoZSBtZXNoXG4gKiB3aXRoIG9wcG9ydHVuaXN0aWMgZ3JhZnRpbmcuIEV2ZXJ5IFJlbGF5T3Bwb3J0dW5pc3RpY0dyYWZ0VGlja3Mgd2Ugd2lsbCBhdHRlbXB0IHRvIHNlbGVjdCBzb21lXG4gKiBoaWdoLXNjb3JpbmcgbWVzaCBwZWVycyB0byByZXBsYWNlIGxvd2VyLXNjb3Jpbmcgb25lcywgaWYgdGhlIG1lZGlhbiBzY29yZSBvZiBvdXIgbWVzaCBwZWVycyBmYWxsc1xuICogYmVsb3cgYSB0aHJlc2hvbGRcbiAqL1xuZXhwb3J0IGNvbnN0IFJlbGF5T3Bwb3J0dW5pc3RpY0dyYWZ0VGlja3MgPSA2MDtcblxuLyoqXG4gKiBSZWxheU9wcG9ydHVuaXN0aWNHcmFmdFBlZXJzIGlzIHRoZSBudW1iZXIgb2YgcGVlcnMgdG8gb3Bwb3J0dW5pc3RpY2FsbHkgZ3JhZnQuXG4gKi9cbmV4cG9ydCBjb25zdCBSZWxheU9wcG9ydHVuaXN0aWNHcmFmdFBlZXJzID0gMjtcblxuLyoqXG4gKiBSZWxheU1heElIYXZlTGVuZ3RoIGlzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBtZXNzYWdlcyB0byBpbmNsdWRlIGluIGFuIElIQVZFIG1lc3NhZ2UuXG4gKiBBbHNvIGNvbnRyb2xzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBJSEFWRSBpZHMgd2Ugd2lsbCBhY2NlcHQgYW5kIHJlcXVlc3Qgd2l0aCBJV0FOVCBmcm9tIGFcbiAqIHBlZXIgd2l0aGluIGEgaGVhcnRiZWF0LCB0byBwcm90ZWN0IGZyb20gSUhBVkUgZmxvb2RzLiBZb3Ugc2hvdWxkIGFkanVzdCB0aGlzIHZhbHVlIGZyb20gdGhlXG4gKiBkZWZhdWx0IGlmIHlvdXIgc3lzdGVtIGlzIHB1c2hpbmcgbW9yZSB0aGFuIDUwMDAgbWVzc2FnZXMgaW4gR29zc2lwc3ViSGlzdG9yeUdvc3NpcCBoZWFydGJlYXRzO1xuICogd2l0aCB0aGUgZGVmYXVsdHMgdGhpcyBpcyAxNjY2IG1lc3NhZ2VzL3MuXG4gKi9cbmV4cG9ydCBjb25zdCBSZWxheU1heElIYXZlTGVuZ3RoID0gNTAwMDtcbiIsImltcG9ydCBHb3NzaXBzdWIgZnJvbSBcImxpYnAycC1nb3NzaXBzdWJcIjtcbmltcG9ydCB7IHNodWZmbGUgfSBmcm9tIFwibGlicDJwLWdvc3NpcHN1Yi9zcmMvdXRpbHNcIjtcblxuaW1wb3J0IHsgUmVsYXlDb2RlY3MgfSBmcm9tIFwiLi9pbmRleFwiO1xuXG4vKipcbiAqIEdpdmVuIGEgdG9waWMsIHJldHVybnMgdXAgdG8gY291bnQgcGVlcnMgc3Vic2NyaWJlZCB0byB0aGF0IHRvcGljXG4gKiB0aGF0IHBhc3MgYW4gb3B0aW9uYWwgZmlsdGVyIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtHb3NzaXBzdWJ9IHJvdXRlclxuICogQHBhcmFtIHtTdHJpbmd9IHRvcGljXG4gKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmaWx0ZXJdIGEgZnVuY3Rpb24gdG8gZmlsdGVyIGFjY2VwdGFibGUgcGVlcnNcbiAqIEByZXR1cm5zIHtTZXQ8c3RyaW5nPn1cbiAqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWxheVBlZXJzKFxuICByb3V0ZXI6IEdvc3NpcHN1YixcbiAgdG9waWM6IHN0cmluZyxcbiAgY291bnQ6IG51bWJlcixcbiAgZmlsdGVyOiAoaWQ6IHN0cmluZykgPT4gYm9vbGVhbiA9ICgpOiBib29sZWFuID0+IHRydWVcbik6IFNldDxzdHJpbmc+IHtcbiAgY29uc3QgcGVlcnNJblRvcGljID0gcm91dGVyLnRvcGljcy5nZXQodG9waWMpO1xuICBpZiAoIXBlZXJzSW5Ub3BpYykge1xuICAgIHJldHVybiBuZXcgU2V0KCk7XG4gIH1cblxuICAvLyBBZGRzIGFsbCBwZWVycyB1c2luZyBvdXIgcHJvdG9jb2xcbiAgLy8gdGhhdCBhbHNvIHBhc3MgdGhlIGZpbHRlciBmdW5jdGlvblxuICBsZXQgcGVlcnM6IHN0cmluZ1tdID0gW107XG4gIHBlZXJzSW5Ub3BpYy5mb3JFYWNoKChpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcGVlclN0cmVhbXMgPSByb3V0ZXIucGVlcnMuZ2V0KGlkKTtcbiAgICBpZiAoIXBlZXJTdHJlYW1zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChSZWxheUNvZGVjcy5pbmNsdWRlcyhwZWVyU3RyZWFtcy5wcm90b2NvbCkgJiYgZmlsdGVyKGlkKSkge1xuICAgICAgcGVlcnMucHVzaChpZCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBQc2V1ZG8tcmFuZG9tbHkgc2h1ZmZsZXMgcGVlcnNcbiAgcGVlcnMgPSBzaHVmZmxlKHBlZXJzKTtcbiAgaWYgKGNvdW50ID4gMCAmJiBwZWVycy5sZW5ndGggPiBjb3VudCkge1xuICAgIHBlZXJzID0gcGVlcnMuc2xpY2UoMCwgY291bnQpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBTZXQocGVlcnMpO1xufVxuIiwiaW1wb3J0IGRlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IExpYnAycCBmcm9tIFwibGlicDJwXCI7XG5pbXBvcnQgR29zc2lwc3ViIGZyb20gXCJsaWJwMnAtZ29zc2lwc3ViXCI7XG5pbXBvcnQgeyBBZGRySW5mbywgTWVzc2FnZUlkRnVuY3Rpb24gfSBmcm9tIFwibGlicDJwLWdvc3NpcHN1Yi9zcmMvaW50ZXJmYWNlc1wiO1xuaW1wb3J0IHsgTWVzc2FnZUNhY2hlIH0gZnJvbSBcImxpYnAycC1nb3NzaXBzdWIvc3JjL21lc3NhZ2UtY2FjaGVcIjtcbmltcG9ydCB7IFJQQyB9IGZyb20gXCJsaWJwMnAtZ29zc2lwc3ViL3NyYy9tZXNzYWdlL3JwY1wiO1xuaW1wb3J0IHtcbiAgUGVlclNjb3JlUGFyYW1zLFxuICBQZWVyU2NvcmVUaHJlc2hvbGRzLFxufSBmcm9tIFwibGlicDJwLWdvc3NpcHN1Yi9zcmMvc2NvcmVcIjtcbmltcG9ydCB7IGNyZWF0ZUdvc3NpcFJwYywgc2h1ZmZsZSB9IGZyb20gXCJsaWJwMnAtZ29zc2lwc3ViL3NyYy91dGlsc1wiO1xuaW1wb3J0IHsgSW5NZXNzYWdlIH0gZnJvbSBcImxpYnAycC1pbnRlcmZhY2VzL3NyYy9wdWJzdWJcIjtcbmltcG9ydCB7IFNpZ25hdHVyZVBvbGljeSB9IGZyb20gXCJsaWJwMnAtaW50ZXJmYWNlcy9zcmMvcHVic3ViL3NpZ25hdHVyZS1wb2xpY3lcIjtcbmltcG9ydCBQZWVySWQgZnJvbSBcInBlZXItaWRcIjtcblxuaW1wb3J0IHsgaGV4VG9CeXRlcyB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgQ3JlYXRlT3B0aW9ucywgRGVmYXVsdFB1YlN1YlRvcGljIH0gZnJvbSBcIi4uL3dha3VcIjtcbmltcG9ydCB7IERlY3J5cHRpb25NZXRob2QsIFdha3VNZXNzYWdlIH0gZnJvbSBcIi4uL3dha3VfbWVzc2FnZVwiO1xuXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBSZWxheUNvZGVjcyB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmVsYXlQZWVycyB9IGZyb20gXCIuL2dldF9yZWxheV9wZWVyc1wiO1xuaW1wb3J0IHsgUmVsYXlIZWFydGJlYXQgfSBmcm9tIFwiLi9yZWxheV9oZWFydGJlYXRcIjtcblxuY29uc3QgZGJnID0gZGVidWcoXCJ3YWt1OnJlbGF5XCIpO1xuXG5leHBvcnQgeyBSZWxheUNvZGVjcyB9O1xuXG4vKipcbiAqIFNlZSBjb25zdHJ1Y3RvciBsaWJwMnAtZ29zc2lwc3ViIFtBUEldKGh0dHBzOi8vZ2l0aHViLmNvbS9DaGFpblNhZmUvanMtbGlicDJwLWdvc3NpcHN1YiNhcGkpLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdvc3NpcE9wdGlvbnMge1xuICBlbWl0U2VsZjogYm9vbGVhbjtcbiAgZ29zc2lwSW5jb21pbmc6IGJvb2xlYW47XG4gIGZhbGxiYWNrVG9GbG9vZHN1YjogYm9vbGVhbjtcbiAgZmxvb2RQdWJsaXNoOiBib29sZWFuO1xuICBkb1BYOiBib29sZWFuO1xuICBtc2dJZEZuOiBNZXNzYWdlSWRGdW5jdGlvbjtcbiAgbWVzc2FnZUNhY2hlOiBNZXNzYWdlQ2FjaGU7XG4gIC8vIFRoaXMgb3B0aW9uIGlzIGFsd2F5cyBvdmVycmlkZGVuXG4gIC8vIGdsb2JhbFNpZ25hdHVyZVBvbGljeTogc3RyaW5nO1xuICBzY29yZVBhcmFtczogUGFydGlhbDxQZWVyU2NvcmVQYXJhbXM+O1xuICBzY29yZVRocmVzaG9sZHM6IFBhcnRpYWw8UGVlclNjb3JlVGhyZXNob2xkcz47XG4gIGRpcmVjdFBlZXJzOiBBZGRySW5mb1tdO1xuICBEOiBudW1iZXI7XG4gIERsbzogbnVtYmVyO1xuICBEaGk6IG51bWJlcjtcbiAgRHNjb3JlOiBudW1iZXI7XG4gIERvdXQ6IG51bWJlcjtcbiAgRGxhenk6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBbV2FrdSB2MiBSZWxheSBwcm90b2NvbF17QGxpbmsgaHR0cHM6Ly9yZmMudmFjLmRldi9zcGVjLzExL30uXG4gKiBNdXN0IGJlIHBhc3NlZCBhcyBhIGBwdWJzdWJgIG1vZHVsZSB0byBhIHtMaWJwMnB9IGluc3RhbmNlLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtyZXF1aXJlKCdsaWJwMnAtaW50ZXJmYWNlcy9zcmMvcHVic3ViJyl9XG4gKiBAbm9Jbmhlcml0RG9jXG4gKi9cbmV4cG9ydCBjbGFzcyBXYWt1UmVsYXkgZXh0ZW5kcyBHb3NzaXBzdWIge1xuICBoZWFydGJlYXQ6IFJlbGF5SGVhcnRiZWF0O1xuICBwdWJTdWJUb3BpYzogc3RyaW5nO1xuXG4gIHB1YmxpYyBkZWNyeXB0aW9uS2V5czogTWFwPFxuICAgIFVpbnQ4QXJyYXksXG4gICAgeyBtZXRob2Q/OiBEZWNyeXB0aW9uTWV0aG9kOyBjb250ZW50VG9waWNzPzogc3RyaW5nW10gfVxuICA+O1xuXG4gIC8qKlxuICAgKiBvYnNlcnZlcnMgY2FsbGVkIHdoZW4gcmVjZWl2aW5nIG5ldyBtZXNzYWdlLlxuICAgKiBPYnNlcnZlcnMgdW5kZXIga2V5IGBcIlwiYCBhcmUgYWx3YXlzIGNhbGxlZC5cbiAgICovXG4gIHB1YmxpYyBvYnNlcnZlcnM6IHtcbiAgICBbY29udGVudFRvcGljOiBzdHJpbmddOiBTZXQ8KG1lc3NhZ2U6IFdha3VNZXNzYWdlKSA9PiB2b2lkPjtcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBsaWJwMnA6IExpYnAycCxcbiAgICBvcHRpb25zPzogUGFydGlhbDxDcmVhdGVPcHRpb25zICYgR29zc2lwT3B0aW9ucz5cbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICBsaWJwMnAsXG4gICAgICBPYmplY3QuYXNzaWduKG9wdGlvbnMsIHtcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgbm8gc2lnbmF0dXJlIGlzIGluY2x1ZGVkIG5vciBleHBlY3RlZCBpbiB0aGUgbWVzc2FnZXMuXG4gICAgICAgIGdsb2JhbFNpZ25hdHVyZVBvbGljeTogU2lnbmF0dXJlUG9saWN5LlN0cmljdE5vU2lnbixcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHRoaXMuaGVhcnRiZWF0ID0gbmV3IFJlbGF5SGVhcnRiZWF0KHRoaXMpO1xuICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gICAgdGhpcy5kZWNyeXB0aW9uS2V5cyA9IG5ldyBNYXAoKTtcblxuICAgIGNvbnN0IG11bHRpY29kZWNzID0gY29uc3RhbnRzLlJlbGF5Q29kZWNzO1xuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCB7IG11bHRpY29kZWNzIH0pO1xuXG4gICAgdGhpcy5wdWJTdWJUb3BpYyA9IG9wdGlvbnM/LnB1YlN1YlRvcGljIHx8IERlZmF1bHRQdWJTdWJUb3BpYztcblxuICAgIG9wdGlvbnM/LmRlY3J5cHRpb25LZXlzPy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRoaXMuYWRkRGVjcnlwdGlvbktleShrZXkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdW50cyB0aGUgZ29zc2lwc3ViIHByb3RvY29sIG9udG8gdGhlIGxpYnAycCBub2RlXG4gICAqIGFuZCBzdWJzY3JpYmVzIHRvIHRoZSBkZWZhdWx0IHRvcGljLlxuICAgKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc3RhcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgc3VwZXIuc3RhcnQoKTtcbiAgICB0aGlzLnN1YnNjcmliZSh0aGlzLnB1YlN1YlRvcGljKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIFdha3UgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIHtXYWt1TWVzc2FnZX0gbWVzc2FnZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIHB1YmxpYyBhc3luYyBzZW5kKG1lc3NhZ2U6IFdha3VNZXNzYWdlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbXNnID0gbWVzc2FnZS5lbmNvZGUoKTtcbiAgICBhd2FpdCBzdXBlci5wdWJsaXNoKHRoaXMucHViU3ViVG9waWMsIG1zZyk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBkZWNyeXB0aW9uIGtleSB0byBhdHRlbXB0IGRlY3J5cHRpb24gb2YgcmVjZWl2ZWQgbWVzc2FnZXMuXG4gICAqIFRoaXMgY2FuIGVpdGhlciBiZSBhIHByaXZhdGUga2V5IGZvciBhc3ltbWV0cmljIGVuY3J5cHRpb24gb3IgYSBzeW1tZXRyaWNcbiAgICoga2V5LiBgV2FrdVJlbGF5YCB3aWxsIGF0dGVtcHQgdG8gZGVjcnlwdCBtZXNzYWdlcyB1c2luZyBib3RoIG1ldGhvZHMuXG4gICAqXG4gICAqIFN0cmluZ3MgbXVzdCBiZSBpbiBoZXggZm9ybWF0LlxuICAgKi9cbiAgYWRkRGVjcnlwdGlvbktleShcbiAgICBrZXk6IFVpbnQ4QXJyYXkgfCBzdHJpbmcsXG4gICAgb3B0aW9ucz86IHsgbWV0aG9kPzogRGVjcnlwdGlvbk1ldGhvZDsgY29udGVudFRvcGljcz86IHN0cmluZ1tdIH1cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5kZWNyeXB0aW9uS2V5cy5zZXQoaGV4VG9CeXRlcyhrZXkpLCBvcHRpb25zID8/IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBkZWNyeXB0aW9uIGtleSB0aGF0IHdhcyB1c2VkIHRvIGF0dGVtcHQgZGVjcnlwdGlvbiBvZiByZWNlaXZlZFxuICAgKiBtZXNzYWdlcy5cbiAgICpcbiAgICogU3RyaW5ncyBtdXN0IGJlIGluIGhleCBmb3JtYXQuXG4gICAqL1xuICBkZWxldGVEZWNyeXB0aW9uS2V5KGtleTogVWludDhBcnJheSB8IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuZGVjcnlwdGlvbktleXMuZGVsZXRlKGhleFRvQnl0ZXMoa2V5KSk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gb2JzZXJ2ZXIgb2YgbmV3IG1lc3NhZ2VzIHJlY2VpdmVkIHZpYSB3YWt1IHJlbGF5XG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIG5ldyBtZXNzYWdlIGlzIHJlY2VpdmVkIHZpYSB3YWt1IHJlbGF5XG4gICAqIEBwYXJhbSBjb250ZW50VG9waWNzIENvbnRlbnQgVG9waWNzIGZvciB3aGljaCB0aGUgY2FsbGJhY2sgd2l0aCBiZSBjYWxsZWQsXG4gICAqIGFsbCBvZiB0aGVtIGlmIHVuZGVmaW5lZCwgW10gb3IgW1wiXCIsLi5dIGlzIHBhc3NlZC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhZGRPYnNlcnZlcihcbiAgICBjYWxsYmFjazogKG1lc3NhZ2U6IFdha3VNZXNzYWdlKSA9PiB2b2lkLFxuICAgIGNvbnRlbnRUb3BpY3M6IHN0cmluZ1tdID0gW11cbiAgKTogdm9pZCB7XG4gICAgaWYgKGNvbnRlbnRUb3BpY3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzW1wiXCJdKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzW1wiXCJdID0gbmV3IFNldCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5vYnNlcnZlcnNbXCJcIl0uYWRkKGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudFRvcGljcy5mb3JFYWNoKChjb250ZW50VG9waWMpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLm9ic2VydmVyc1tjb250ZW50VG9waWNdKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnNbY29udGVudFRvcGljXSA9IG5ldyBTZXQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVyc1tjb250ZW50VG9waWNdLmFkZChjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuIG9ic2VydmVyIG9mIG5ldyBtZXNzYWdlcyByZWNlaXZlZCB2aWEgd2FrdSByZWxheS5cbiAgICogVXNlZnVsIHRvIGVuc3VyZSB0aGUgc2FtZSBvYnNlcnZlciBpcyBub3QgcmVnaXN0ZXJlZCBzZXZlcmFsIHRpbWVcbiAgICogKGUuZyB3aGVuIGxvYWRpbmcgUmVhY3QgY29tcG9uZW50cylcbiAgICovXG4gIGRlbGV0ZU9ic2VydmVyKFxuICAgIGNhbGxiYWNrOiAobWVzc2FnZTogV2FrdU1lc3NhZ2UpID0+IHZvaWQsXG4gICAgY29udGVudFRvcGljczogc3RyaW5nW10gPSBbXVxuICApOiB2b2lkIHtcbiAgICBpZiAoY29udGVudFRvcGljcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICh0aGlzLm9ic2VydmVyc1tcIlwiXSkge1xuICAgICAgICB0aGlzLm9ic2VydmVyc1tcIlwiXS5kZWxldGUoY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50VG9waWNzLmZvckVhY2goKGNvbnRlbnRUb3BpYykgPT4ge1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnNbY29udGVudFRvcGljXSkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzW2NvbnRlbnRUb3BpY10uZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcmVsYXkgcGVlcnMgd2UgYXJlIGNvbm5lY3RlZCB0bywgYW5kIHdlIHdvdWxkIHB1Ymxpc2ggYSBtZXNzYWdlIHRvXG4gICAqL1xuICBnZXRQZWVycygpOiBTZXQ8c3RyaW5nPiB7XG4gICAgcmV0dXJuIGdldFJlbGF5UGVlcnModGhpcywgdGhpcy5wdWJTdWJUb3BpYywgdGhpcy5fb3B0aW9ucy5ELCAoaWQpID0+IHtcbiAgICAgIC8vIEZpbHRlciBwZWVycyB3ZSB3b3VsZCBub3QgcHVibGlzaCB0b1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5zY29yZS5zY29yZShpZCkgPj0gdGhpcy5fb3B0aW9ucy5zY29yZVRocmVzaG9sZHMucHVibGlzaFRocmVzaG9sZFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYSBwdWJzdWIgdG9waWMgYW5kIHN0YXJ0IGVtaXR0aW5nIFdha3UgbWVzc2FnZXMgdG8gb2JzZXJ2ZXJzLlxuICAgKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHN1YnNjcmliZShwdWJTdWJUb3BpYzogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5vbihwdWJTdWJUb3BpYywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBkZWNyeXB0aW9uS2V5cyA9IEFycmF5LmZyb20odGhpcy5kZWNyeXB0aW9uS2V5cykubWFwKFxuICAgICAgICAoW2tleSwgeyBtZXRob2QsIGNvbnRlbnRUb3BpY3MgfV0pID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgY29udGVudFRvcGljcyxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBkYmcoYE1lc3NhZ2UgcmVjZWl2ZWQgb24gJHtwdWJTdWJUb3BpY31gKTtcbiAgICAgIFdha3VNZXNzYWdlLmRlY29kZShldmVudC5kYXRhLCBkZWNyeXB0aW9uS2V5cylcbiAgICAgICAgLnRoZW4oKHdha3VNc2cpID0+IHtcbiAgICAgICAgICBpZiAoIXdha3VNc2cpIHtcbiAgICAgICAgICAgIGRiZyhcIkZhaWxlZCB0byBkZWNvZGUgV2FrdSBNZXNzYWdlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVyc1tcIlwiXSkge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnNbXCJcIl0uZm9yRWFjaCgoY2FsbGJhY2tGbikgPT4ge1xuICAgICAgICAgICAgICBjYWxsYmFja0ZuKHdha3VNc2cpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh3YWt1TXNnLmNvbnRlbnRUb3BpYykge1xuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzW3dha3VNc2cuY29udGVudFRvcGljXSkge1xuICAgICAgICAgICAgICB0aGlzLm9ic2VydmVyc1t3YWt1TXNnLmNvbnRlbnRUb3BpY10uZm9yRWFjaCgoY2FsbGJhY2tGbikgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrRm4od2FrdU1zZyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgZGJnKFwiRmFpbGVkIHRvIGRlY29kZSBXYWt1IE1lc3NhZ2VcIiwgZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc3VwZXIuc3Vic2NyaWJlKHB1YlN1YlRvcGljKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBKb2luIHB1YnN1YiB0b3BpYy5cbiAgICogVGhpcyBpcyBwcmVzZW50IHRvIG92ZXJyaWRlIHRoZSBiZWhhdmlvciBvZiBHb3NzaXBzdWIgYW5kIHNob3VsZCBub3RcbiAgICogYmUgdXNlZCBieSBBUEkgQ29uc3VtZXJzXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9waWNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgam9pbih0b3BpYzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldha3VSZWxheVB1YlN1YiBoYXMgbm90IHN0YXJ0ZWRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgZmFub3V0UGVlcnMgPSB0aGlzLmZhbm91dC5nZXQodG9waWMpO1xuICAgIGlmIChmYW5vdXRQZWVycykge1xuICAgICAgLy8gdGhlc2UgcGVlcnMgaGF2ZSBhIHNjb3JlIGFib3ZlIHRoZSBwdWJsaXNoIHRocmVzaG9sZCwgd2hpY2ggbWF5IGJlIG5lZ2F0aXZlXG4gICAgICAvLyBzbyBkcm9wIHRoZSBvbmVzIHdpdGggYSBuZWdhdGl2ZSBzY29yZVxuICAgICAgZmFub3V0UGVlcnMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc2NvcmUuc2NvcmUoaWQpIDwgMCkge1xuICAgICAgICAgIGZhbm91dFBlZXJzLmRlbGV0ZShpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGZhbm91dFBlZXJzLnNpemUgPCB0aGlzLl9vcHRpb25zLkQpIHtcbiAgICAgICAgLy8gd2UgbmVlZCBtb3JlIHBlZXJzOyBlYWdlciwgYXMgdGhpcyB3b3VsZCBnZXQgZml4ZWQgaW4gdGhlIG5leHQgaGVhcnRiZWF0XG4gICAgICAgIGdldFJlbGF5UGVlcnMoXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICB0b3BpYyxcbiAgICAgICAgICB0aGlzLl9vcHRpb25zLkQgLSBmYW5vdXRQZWVycy5zaXplLFxuICAgICAgICAgIChpZDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3VyIGN1cnJlbnQgcGVlcnMsIGRpcmVjdCBwZWVycywgYW5kIHBlZXJzIHdpdGggbmVnYXRpdmUgc2NvcmVzXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAhZmFub3V0UGVlcnMuaGFzKGlkKSAmJlxuICAgICAgICAgICAgICAhdGhpcy5kaXJlY3QuaGFzKGlkKSAmJlxuICAgICAgICAgICAgICB0aGlzLnNjb3JlLnNjb3JlKGlkKSA+PSAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgKS5mb3JFYWNoKChpZCkgPT4gZmFub3V0UGVlcnMuYWRkKGlkKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm1lc2guc2V0KHRvcGljLCBmYW5vdXRQZWVycyk7XG4gICAgICB0aGlzLmZhbm91dC5kZWxldGUodG9waWMpO1xuICAgICAgdGhpcy5sYXN0cHViLmRlbGV0ZSh0b3BpYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBlZXJzID0gZ2V0UmVsYXlQZWVycyhcbiAgICAgICAgdGhpcyxcbiAgICAgICAgdG9waWMsXG4gICAgICAgIHRoaXMuX29wdGlvbnMuRCxcbiAgICAgICAgKGlkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgICAgICAvLyBmaWx0ZXIgZGlyZWN0IHBlZXJzIGFuZCBwZWVycyB3aXRoIG5lZ2F0aXZlIHNjb3JlXG4gICAgICAgICAgcmV0dXJuICF0aGlzLmRpcmVjdC5oYXMoaWQpICYmIHRoaXMuc2NvcmUuc2NvcmUoaWQpID49IDA7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB0aGlzLm1lc2guc2V0KHRvcGljLCBwZWVycyk7XG4gICAgfVxuICAgIHRoaXMubWVzaC5nZXQodG9waWMpPy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgdGhpcy5sb2coXCJKT0lOOiBBZGQgbWVzaCBsaW5rIHRvICVzIGluICVzXCIsIGlkLCB0b3BpYyk7XG4gICAgICB0aGlzLl9zZW5kR3JhZnQoaWQsIHRvcGljKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaXNoIG1lc3NhZ2VzLlxuICAgKiBUaGlzIGlzIHByZXNlbnQgdG8gb3ZlcnJpZGUgdGhlIGJlaGF2aW9yIG9mIEdvc3NpcHN1YiBhbmQgc2hvdWxkIG5vdFxuICAgKiBiZSB1c2VkIGJ5IEFQSSBDb25zdW1lcnNcbiAgICpcbiAgICogQGlnbm9yZVxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHBhcmFtIHtJbk1lc3NhZ2V9IG1zZ1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIF9wdWJsaXNoKG1zZzogSW5NZXNzYWdlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgbXNnSWRTdHIgPSBhd2FpdCB0aGlzLmdldENhbm9uaWNhbE1zZ0lkU3RyKG1zZyk7XG4gICAgaWYgKG1zZy5yZWNlaXZlZEZyb20gIT09IHRoaXMucGVlcklkLnRvQjU4U3RyaW5nKCkpIHtcbiAgICAgIHRoaXMuc2NvcmUuZGVsaXZlck1lc3NhZ2UobXNnLCBtc2dJZFN0cik7XG4gICAgICB0aGlzLmdvc3NpcFRyYWNlci5kZWxpdmVyTWVzc2FnZShtc2dJZFN0cik7XG4gICAgfVxuXG4gICAgLy8gcHV0IGluIHNlZW4gY2FjaGVcbiAgICB0aGlzLnNlZW5DYWNoZS5wdXQobXNnSWRTdHIpO1xuXG4gICAgdGhpcy5tZXNzYWdlQ2FjaGUucHV0KG1zZywgbXNnSWRTdHIpO1xuXG4gICAgY29uc3QgdG9TZW5kID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgbXNnLnRvcGljSURzLmZvckVhY2goKHRvcGljKSA9PiB7XG4gICAgICBjb25zdCBwZWVyc0luVG9waWMgPSB0aGlzLnRvcGljcy5nZXQodG9waWMpO1xuICAgICAgaWYgKCFwZWVyc0luVG9waWMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBkaXJlY3QgcGVlcnNcbiAgICAgIHRoaXMuZGlyZWN0LmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgIHRvU2VuZC5hZGQoaWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCBtZXNoUGVlcnMgPSB0aGlzLm1lc2guZ2V0KHRvcGljKTtcbiAgICAgIGlmICghbWVzaFBlZXJzIHx8ICFtZXNoUGVlcnMuc2l6ZSkge1xuICAgICAgICAvLyBXZSBhcmUgbm90IGluIHRoZSBtZXNoIGZvciB0b3BpYywgdXNlIGZhbm91dCBwZWVyc1xuICAgICAgICBtZXNoUGVlcnMgPSB0aGlzLmZhbm91dC5nZXQodG9waWMpO1xuICAgICAgICBpZiAoIW1lc2hQZWVycykge1xuICAgICAgICAgIC8vIElmIHdlIGFyZSBub3QgaW4gdGhlIGZhbm91dCwgdGhlbiBwaWNrIHBlZXJzIGluIHRvcGljIGFib3ZlIHRoZSBwdWJsaXNoVGhyZXNob2xkXG4gICAgICAgICAgY29uc3QgcGVlcnMgPSBnZXRSZWxheVBlZXJzKHRoaXMsIHRvcGljLCB0aGlzLl9vcHRpb25zLkQsIChpZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgdGhpcy5zY29yZS5zY29yZShpZCkgPj1cbiAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zY29yZVRocmVzaG9sZHMucHVibGlzaFRocmVzaG9sZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChwZWVycy5zaXplID4gMCkge1xuICAgICAgICAgICAgbWVzaFBlZXJzID0gcGVlcnM7XG4gICAgICAgICAgICB0aGlzLmZhbm91dC5zZXQodG9waWMsIHBlZXJzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzaFBlZXJzID0gbmV3IFNldCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTdG9yZSB0aGUgbGF0ZXN0IHB1Ymxpc2hpbmcgdGltZVxuICAgICAgICB0aGlzLmxhc3RwdWIuc2V0KHRvcGljLCB0aGlzLl9ub3coKSk7XG4gICAgICB9XG5cbiAgICAgIG1lc2hQZWVycz8uZm9yRWFjaCgocGVlcikgPT4ge1xuICAgICAgICB0b1NlbmQuYWRkKHBlZXIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy8gUHVibGlzaCBtZXNzYWdlcyB0byBwZWVyc1xuICAgIGNvbnN0IHJwYyA9IGNyZWF0ZUdvc3NpcFJwYyhbR29zc2lwc3ViLnV0aWxzLm5vcm1hbGl6ZU91dFJwY01lc3NhZ2UobXNnKV0pO1xuICAgIGRiZyhgUmVsYXkgbWVzc2FnZSB0byAke3RvU2VuZC5zaXplfSBwZWVyc2ApO1xuICAgIHRvU2VuZC5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgaWYgKGlkID09PSBtc2cuZnJvbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkYmcoXCJSZWxheSBtZXNzYWdlIHRvXCIsIGlkKTtcbiAgICAgIHRoaXMuX3NlbmRScGMoaWQsIHJwYyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRW1pdHMgZ29zc2lwIHRvIHBlZXJzIGluIGEgcGFydGljdWxhciB0b3BpYy5cbiAgICpcbiAgICogVGhpcyBpcyBwcmVzZW50IHRvIG92ZXJyaWRlIHRoZSBiZWhhdmlvciBvZiBHb3NzaXBzdWIgYW5kIHNob3VsZCBub3RcbiAgICogYmUgdXNlZCBieSBBUEkgQ29uc3VtZXJzXG4gICAqXG4gICAqIEBpZ25vcmVcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICAgKiBAcGFyYW0ge1NldDxzdHJpbmc+fSBleGNsdWRlIHBlZXJzIHRvIGV4Y2x1ZGVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBfZW1pdEdvc3NpcCh0b3BpYzogc3RyaW5nLCBleGNsdWRlOiBTZXQ8c3RyaW5nPik6IHZvaWQge1xuICAgIGNvbnN0IG1lc3NhZ2VJRHMgPSB0aGlzLm1lc3NhZ2VDYWNoZS5nZXRHb3NzaXBJRHModG9waWMpO1xuICAgIGlmICghbWVzc2FnZUlEcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBzaHVmZmxlIHRvIGVtaXQgaW4gcmFuZG9tIG9yZGVyXG4gICAgc2h1ZmZsZShtZXNzYWdlSURzKTtcblxuICAgIC8vIGlmIHdlIGFyZSBlbWl0dGluZyBtb3JlIHRoYW4gR29zc2lwc3ViTWF4SUhhdmVMZW5ndGggaWRzLCB0cnVuY2F0ZSB0aGUgbGlzdFxuICAgIGlmIChtZXNzYWdlSURzLmxlbmd0aCA+IGNvbnN0YW50cy5SZWxheU1heElIYXZlTGVuZ3RoKSB7XG4gICAgICAvLyB3ZSBkbyB0aGUgdHJ1bmNhdGlvbiAod2l0aCBzaHVmZmxpbmcpIHBlciBwZWVyIGJlbG93XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJ0b28gbWFueSBtZXNzYWdlcyBmb3IgZ29zc2lwOyB3aWxsIHRydW5jYXRlIElIQVZFIGxpc3QgKCVkIG1lc3NhZ2VzKVwiLFxuICAgICAgICBtZXNzYWdlSURzLmxlbmd0aFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTZW5kIGdvc3NpcCB0byBHb3NzaXBGYWN0b3IgcGVlcnMgYWJvdmUgdGhyZXNob2xkIHdpdGggYSBtaW5pbXVtIG9mIERfbGF6eVxuICAgIC8vIEZpcnN0IHdlIGNvbGxlY3QgdGhlIHBlZXJzIGFib3ZlIGdvc3NpcFRocmVzaG9sZCB0aGF0IGFyZSBub3QgaW4gdGhlIGV4Y2x1ZGUgc2V0XG4gICAgLy8gYW5kIHRoZW4gcmFuZG9tbHkgc2VsZWN0IGZyb20gdGhhdCBzZXRcbiAgICAvLyBXZSBhbHNvIGV4Y2x1ZGUgZGlyZWN0IHBlZXJzLCBhcyB0aGVyZSBpcyBubyByZWFzb24gdG8gZW1pdCBnb3NzaXAgdG8gdGhlbVxuICAgIGNvbnN0IHBlZXJzVG9Hb3NzaXA6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdG9waWNQZWVycyA9IHRoaXMudG9waWNzLmdldCh0b3BpYyk7XG4gICAgaWYgKCF0b3BpY1BlZXJzKSB7XG4gICAgICAvLyBubyB0b3BpYyBwZWVycywgbm8gZ29zc2lwXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRvcGljUGVlcnMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGNvbnN0IHBlZXJTdHJlYW1zID0gdGhpcy5wZWVycy5nZXQoaWQpO1xuICAgICAgaWYgKCFwZWVyU3RyZWFtcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgICFleGNsdWRlLmhhcyhpZCkgJiZcbiAgICAgICAgIXRoaXMuZGlyZWN0LmhhcyhpZCkgJiZcbiAgICAgICAgY29uc3RhbnRzLlJlbGF5Q29kZWNzLmluY2x1ZGVzKHBlZXJTdHJlYW1zLnByb3RvY29sKSAmJlxuICAgICAgICB0aGlzLnNjb3JlLnNjb3JlKGlkKSA+PSB0aGlzLl9vcHRpb25zLnNjb3JlVGhyZXNob2xkcy5nb3NzaXBUaHJlc2hvbGRcbiAgICAgICkge1xuICAgICAgICBwZWVyc1RvR29zc2lwLnB1c2goaWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHRhcmdldCA9IHRoaXMuX29wdGlvbnMuRGxhenk7XG4gICAgY29uc3QgZmFjdG9yID0gY29uc3RhbnRzLlJlbGF5R29zc2lwRmFjdG9yICogcGVlcnNUb0dvc3NpcC5sZW5ndGg7XG4gICAgaWYgKGZhY3RvciA+IHRhcmdldCkge1xuICAgICAgdGFyZ2V0ID0gZmFjdG9yO1xuICAgIH1cbiAgICBpZiAodGFyZ2V0ID4gcGVlcnNUb0dvc3NpcC5sZW5ndGgpIHtcbiAgICAgIHRhcmdldCA9IHBlZXJzVG9Hb3NzaXAubGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaHVmZmxlKHBlZXJzVG9Hb3NzaXApO1xuICAgIH1cbiAgICAvLyBFbWl0IHRoZSBJSEFWRSBnb3NzaXAgdG8gdGhlIHNlbGVjdGVkIHBlZXJzIHVwIHRvIHRoZSB0YXJnZXRcbiAgICBwZWVyc1RvR29zc2lwLnNsaWNlKDAsIHRhcmdldCkuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGxldCBwZWVyTWVzc2FnZUlEcyA9IG1lc3NhZ2VJRHM7XG4gICAgICBpZiAobWVzc2FnZUlEcy5sZW5ndGggPiBjb25zdGFudHMuUmVsYXlNYXhJSGF2ZUxlbmd0aCkge1xuICAgICAgICAvLyBzaHVmZmxlIGFuZCBzbGljZSBtZXNzYWdlIElEcyBwZXIgcGVlciBzbyB0aGF0IHdlIGVtaXQgYSBkaWZmZXJlbnQgc2V0IGZvciBlYWNoIHBlZXJcbiAgICAgICAgLy8gd2UgaGF2ZSBlbm91Z2ggcmVkdW5kYW5jeSBpbiB0aGUgc3lzdGVtIHRoYXQgdGhpcyB3aWxsIHNpZ25pZmljYW50bHkgaW5jcmVhc2UgdGhlIG1lc3NhZ2VcbiAgICAgICAgLy8gY292ZXJhZ2Ugd2hlbiB3ZSBkbyB0cnVuY2F0ZVxuICAgICAgICBwZWVyTWVzc2FnZUlEcyA9IHNodWZmbGUocGVlck1lc3NhZ2VJRHMuc2xpY2UoKSkuc2xpY2UoXG4gICAgICAgICAgMCxcbiAgICAgICAgICBjb25zdGFudHMuUmVsYXlNYXhJSGF2ZUxlbmd0aFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5fcHVzaEdvc3NpcChpZCwge1xuICAgICAgICB0b3BpY0lEOiB0b3BpYyxcbiAgICAgICAgbWVzc2FnZUlEczogcGVlck1lc3NhZ2VJRHMsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGEgUFJVTkUgY29udHJvbCBtZXNzYWdlIGZvciBhIHBlZXIgaW4gYSB0b3BpYy5cbiAgICogVGhpcyBpcyBwcmVzZW50IHRvIG92ZXJyaWRlIHRoZSBiZWhhdmlvciBvZiBHb3NzaXBzdWIgYW5kIHNob3VsZCBub3RcbiAgICogYmUgdXNlZCBieSBBUEkgQ29uc3VtZXJzXG4gICAqXG4gICAqIEBpZ25vcmVcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9waWNcbiAgICogQHBhcmFtIHtib29sZWFufSBkb1BYXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFJQQy5JQ29udHJvbFBydW5lPn1cbiAgICovXG4gIGFzeW5jIF9tYWtlUHJ1bmUoXG4gICAgaWQ6IHN0cmluZyxcbiAgICB0b3BpYzogc3RyaW5nLFxuICAgIGRvUFg6IGJvb2xlYW5cbiAgKTogUHJvbWlzZTxSUEMuSUNvbnRyb2xQcnVuZT4ge1xuICAgIC8vIGJhY2tvZmYgaXMgbWVhc3VyZWQgaW4gc2Vjb25kc1xuICAgIC8vIFJlbGF5UHJ1bmVCYWNrb2ZmIGlzIG1lYXN1cmVkIGluIG1pbGxpc2Vjb25kc1xuICAgIGNvbnN0IGJhY2tvZmYgPSBjb25zdGFudHMuUmVsYXlQcnVuZUJhY2tvZmYgLyAxMDAwO1xuICAgIGlmICghZG9QWCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9waWNJRDogdG9waWMsXG4gICAgICAgIHBlZXJzOiBbXSxcbiAgICAgICAgYmFja29mZjogYmFja29mZixcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gc2VsZWN0IHBlZXJzIGZvciBQZWVyIGVYY2hhbmdlXG4gICAgY29uc3QgcGVlcnMgPSBnZXRSZWxheVBlZXJzKFxuICAgICAgdGhpcyxcbiAgICAgIHRvcGljLFxuICAgICAgY29uc3RhbnRzLlJlbGF5UHJ1bmVQZWVycyxcbiAgICAgICh4aWQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgICByZXR1cm4geGlkICE9PSBpZCAmJiB0aGlzLnNjb3JlLnNjb3JlKHhpZCkgPj0gMDtcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHB4ID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBBcnJheS5mcm9tKHBlZXJzKS5tYXAoYXN5bmMgKHApID0+IHtcbiAgICAgICAgLy8gc2VlIGlmIHdlIGhhdmUgYSBzaWduZWQgcmVjb3JkIHRvIHNlbmQgYmFjazsgaWYgd2UgZG9uJ3QsIGp1c3Qgc2VuZFxuICAgICAgICAvLyB0aGUgcGVlciBJRCBhbmQgbGV0IHRoZSBwcnVuZWQgcGVlciBmaW5kIHRoZW0gaW4gdGhlIERIVCAtLSB3ZSBjYW4ndCB0cnVzdFxuICAgICAgICAvLyB1bnNpZ25lZCBhZGRyZXNzIHJlY29yZHMgdGhyb3VnaCBQWCBhbnl3YXlzXG4gICAgICAgIC8vIEZpbmRpbmcgc2lnbmVkIHJlY29yZHMgaW4gdGhlIERIVCBpcyBub3Qgc3VwcG9ydGVkIGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcgaW4ganMtbGlicDJwXG4gICAgICAgIGNvbnN0IHBlZXJJZCA9IFBlZXJJZC5jcmVhdGVGcm9tQjU4U3RyaW5nKHApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBlZXJJRDogcGVlcklkLnRvQnl0ZXMoKSxcbiAgICAgICAgICBzaWduZWRQZWVyUmVjb3JkOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fbGlicDJwLnBlZXJTdG9yZS5hZGRyZXNzQm9vay5nZXRSYXdFbnZlbG9wZShwZWVySWQpLFxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICApO1xuICAgIHJldHVybiB7XG4gICAgICB0b3BpY0lEOiB0b3BpYyxcbiAgICAgIHBlZXJzOiBweCxcbiAgICAgIGJhY2tvZmY6IGJhY2tvZmYsXG4gICAgfTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAaGlkZGVuXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IEdvc3NpcHN1YiBmcm9tIFwibGlicDJwLWdvc3NpcHN1YlwiO1xuaW1wb3J0IHsgSGVhcnRiZWF0IH0gZnJvbSBcImxpYnAycC1nb3NzaXBzdWIvc3JjL2hlYXJ0YmVhdFwiO1xuaW1wb3J0IHsgc2h1ZmZsZSB9IGZyb20gXCJsaWJwMnAtZ29zc2lwc3ViL3NyYy91dGlsc1wiO1xuXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZWxheVBlZXJzIH0gZnJvbSBcIi4vZ2V0X3JlbGF5X3BlZXJzXCI7XG5cbmV4cG9ydCBjbGFzcyBSZWxheUhlYXJ0YmVhdCBleHRlbmRzIEhlYXJ0YmVhdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZ29zc2lwc3ViXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoZ29zc2lwc3ViOiBHb3NzaXBzdWIpIHtcbiAgICBzdXBlcihnb3NzaXBzdWIpO1xuICB9XG5cbiAgc3RhcnQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2hlYXJ0YmVhdFRpbWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaGVhcnRiZWF0ID0gdGhpcy5faGVhcnRiZWF0LmJpbmQodGhpcyk7XG5cbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBoZWFydGJlYXQoKTtcbiAgICAgIHRoaXMuX2hlYXJ0YmVhdFRpbWVyPy5ydW5QZXJpb2RpY2FsbHkoXG4gICAgICAgIGhlYXJ0YmVhdCxcbiAgICAgICAgY29uc3RhbnRzLlJlbGF5SGVhcnRiZWF0SW50ZXJ2YWxcbiAgICAgICk7XG4gICAgfSwgY29uc3RhbnRzLlJlbGF5SGVhcnRiZWF0SW5pdGlhbERlbGF5KTtcblxuICAgIHRoaXMuX2hlYXJ0YmVhdFRpbWVyID0ge1xuICAgICAgX2ludGVydmFsSWQ6IHVuZGVmaW5lZCxcbiAgICAgIHJ1blBlcmlvZGljYWxseTogKGZuLCBwZXJpb2QpOiB2b2lkID0+IHtcbiAgICAgICAgLy8gdGhpcy5faGVhcnRiZWF0VGltZXIgY2Fubm90IGJlIG51bGwsIGl0IGlzIGJlaW5nIGFzc2lnbmVkLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICB0aGlzLl9oZWFydGJlYXRUaW1lciEuX2ludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmbiwgcGVyaW9kKTtcbiAgICAgIH0sXG4gICAgICBjYW5jZWw6ICgpOiB2b2lkID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2hlYXJ0YmVhdFRpbWVyPy5faW50ZXJ2YWxJZCBhcyBOb2RlSlMuVGltZW91dCk7XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVW5tb3VudHMgdGhlIGdvc3NpcHN1YiBwcm90b2NvbCBhbmQgc2h1dHMgZG93biBldmVyeSBjb25uZWN0aW9uXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHN0b3AoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9oZWFydGJlYXRUaW1lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2hlYXJ0YmVhdFRpbWVyLmNhbmNlbCgpO1xuICAgIHRoaXMuX2hlYXJ0YmVhdFRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWludGFpbnMgdGhlIG1lc2ggYW5kIGZhbm91dCBtYXBzIGluIGdvc3NpcHN1Yi5cbiAgICpcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBfaGVhcnRiZWF0KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgRCwgRGxvLCBEaGksIERzY29yZSwgRG91dCB9ID0gdGhpcy5nb3NzaXBzdWIuX29wdGlvbnM7XG4gICAgdGhpcy5nb3NzaXBzdWIuaGVhcnRiZWF0VGlja3MrKztcblxuICAgIC8vIGNhY2hlIHNjb3JlcyB0aHJvdWdoIHRoZSBoZWFydGJlYXRcbiAgICBjb25zdCBzY29yZXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgIGNvbnN0IGdldFNjb3JlID0gKGlkOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xuICAgICAgbGV0IHMgPSBzY29yZXMuZ2V0KGlkKTtcbiAgICAgIGlmIChzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcyA9IHRoaXMuZ29zc2lwc3ViLnNjb3JlLnNjb3JlKGlkKTtcbiAgICAgICAgc2NvcmVzLnNldChpZCwgcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcztcbiAgICB9O1xuXG4gICAgLy8gcGVlciBpZCA9PiB0b3BpY1tdXG4gICAgY29uc3QgdG9HcmFmdCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKTtcbiAgICAvLyBwZWVyIGlkID0+IHRvcGljW11cbiAgICBjb25zdCB0b1BydW5lID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZ1tdPigpO1xuICAgIC8vIHBlZXIgaWQgPT4gZG9uJ3QgcHhcbiAgICBjb25zdCBub1BYID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG5cbiAgICAvLyBjbGVhbiB1cCBleHBpcmVkIGJhY2tvZmZzXG4gICAgdGhpcy5nb3NzaXBzdWIuX2NsZWFyQmFja29mZigpO1xuXG4gICAgLy8gY2xlYW4gdXAgcGVlcmhhdmUvaWFza2VkIGNvdW50ZXJzXG4gICAgdGhpcy5nb3NzaXBzdWIucGVlcmhhdmUuY2xlYXIoKTtcbiAgICB0aGlzLmdvc3NpcHN1Yi5pYXNrZWQuY2xlYXIoKTtcblxuICAgIC8vIGFwcGx5IElXQU5UIHJlcXVlc3QgcGVuYWx0aWVzXG4gICAgdGhpcy5nb3NzaXBzdWIuX2FwcGx5SXdhbnRQZW5hbHRpZXMoKTtcblxuICAgIC8vIGVuc3VyZSBkaXJlY3QgcGVlcnMgYXJlIGNvbm5lY3RlZFxuICAgIHRoaXMuZ29zc2lwc3ViLl9kaXJlY3RDb25uZWN0KCk7XG5cbiAgICAvLyBtYWludGFpbiB0aGUgbWVzaCBmb3IgdG9waWNzIHdlIGhhdmUgam9pbmVkXG4gICAgdGhpcy5nb3NzaXBzdWIubWVzaC5mb3JFYWNoKChwZWVycywgdG9waWMpID0+IHtcbiAgICAgIC8vIHBydW5lL2dyYWZ0IGhlbHBlciBmdW5jdGlvbnMgKGRlZmluZWQgcGVyIHRvcGljKVxuICAgICAgY29uc3QgcHJ1bmVQZWVyID0gKGlkOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5nb3NzaXBzdWIubG9nKFxuICAgICAgICAgIFwiSEVBUlRCRUFUOiBSZW1vdmUgbWVzaCBsaW5rIHRvICVzIGluICVzXCIsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdG9waWNcbiAgICAgICAgKTtcbiAgICAgICAgLy8gdXBkYXRlIHBlZXIgc2NvcmVcbiAgICAgICAgdGhpcy5nb3NzaXBzdWIuc2NvcmUucHJ1bmUoaWQsIHRvcGljKTtcbiAgICAgICAgLy8gYWRkIHBydW5lIGJhY2tvZmYgcmVjb3JkXG4gICAgICAgIHRoaXMuZ29zc2lwc3ViLl9hZGRCYWNrb2ZmKGlkLCB0b3BpYyk7XG4gICAgICAgIC8vIHJlbW92ZSBwZWVyIGZyb20gbWVzaFxuICAgICAgICBwZWVycy5kZWxldGUoaWQpO1xuICAgICAgICAvLyBhZGQgdG8gdG9QcnVuZVxuICAgICAgICBjb25zdCB0b3BpY3MgPSB0b1BydW5lLmdldChpZCk7XG4gICAgICAgIGlmICghdG9waWNzKSB7XG4gICAgICAgICAgdG9QcnVuZS5zZXQoaWQsIFt0b3BpY10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvcGljcy5wdXNoKHRvcGljKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGdyYWZ0UGVlciA9IChpZDogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuZ29zc2lwc3ViLmxvZyhcIkhFQVJUQkVBVDogQWRkIG1lc2ggbGluayB0byAlcyBpbiAlc1wiLCBpZCwgdG9waWMpO1xuICAgICAgICAvLyB1cGRhdGUgcGVlciBzY29yZVxuICAgICAgICB0aGlzLmdvc3NpcHN1Yi5zY29yZS5ncmFmdChpZCwgdG9waWMpO1xuICAgICAgICAvLyBhZGQgcGVlciB0byBtZXNoXG4gICAgICAgIHBlZXJzLmFkZChpZCk7XG4gICAgICAgIC8vIGFkZCB0byB0b0dyYWZ0XG4gICAgICAgIGNvbnN0IHRvcGljcyA9IHRvR3JhZnQuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCF0b3BpY3MpIHtcbiAgICAgICAgICB0b0dyYWZ0LnNldChpZCwgW3RvcGljXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9waWNzLnB1c2godG9waWMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBkcm9wIGFsbCBwZWVycyB3aXRoIG5lZ2F0aXZlIHNjb3JlLCB3aXRob3V0IFBYXG4gICAgICBwZWVycy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgICBjb25zdCBzY29yZSA9IGdldFNjb3JlKGlkKTtcbiAgICAgICAgaWYgKHNjb3JlIDwgMCkge1xuICAgICAgICAgIHRoaXMuZ29zc2lwc3ViLmxvZyhcbiAgICAgICAgICAgIFwiSEVBUlRCRUFUOiBQcnVuZSBwZWVyICVzIHdpdGggbmVnYXRpdmUgc2NvcmU6IHNjb3JlPSVkLCB0b3BpYz0lc1wiLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBzY29yZSxcbiAgICAgICAgICAgIHRvcGljXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwcnVuZVBlZXIoaWQpO1xuICAgICAgICAgIG5vUFguc2V0KGlkLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGRvIHdlIGhhdmUgZW5vdWdoIHBlZXJzP1xuICAgICAgaWYgKHBlZXJzLnNpemUgPCBEbG8pIHtcbiAgICAgICAgY29uc3QgYmFja29mZiA9IHRoaXMuZ29zc2lwc3ViLmJhY2tvZmYuZ2V0KHRvcGljKTtcbiAgICAgICAgY29uc3QgaW5lZWQgPSBEIC0gcGVlcnMuc2l6ZTtcbiAgICAgICAgY29uc3QgcGVlcnNTZXQgPSBnZXRSZWxheVBlZXJzKFxuICAgICAgICAgIHRoaXMuZ29zc2lwc3ViLFxuICAgICAgICAgIHRvcGljLFxuICAgICAgICAgIGluZWVkLFxuICAgICAgICAgIChpZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IG1lc2ggcGVlcnMsIGRpcmVjdCBwZWVycywgcGVlcnMgd2UgYXJlIGJhY2tpbmcgb2ZmLCBwZWVycyB3aXRoIG5lZ2F0aXZlIHNjb3JlXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAhcGVlcnMuaGFzKGlkKSAmJlxuICAgICAgICAgICAgICAhdGhpcy5nb3NzaXBzdWIuZGlyZWN0LmhhcyhpZCkgJiZcbiAgICAgICAgICAgICAgKCFiYWNrb2ZmIHx8ICFiYWNrb2ZmLmhhcyhpZCkpICYmXG4gICAgICAgICAgICAgIGdldFNjb3JlKGlkKSA+PSAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBwZWVyc1NldC5mb3JFYWNoKGdyYWZ0UGVlcik7XG4gICAgICB9XG5cbiAgICAgIC8vIGRvIHdlIGhhdmUgdG8gbWFueSBwZWVycz9cbiAgICAgIGlmIChwZWVycy5zaXplID4gRGhpKSB7XG4gICAgICAgIGxldCBwZWVyc0FycmF5ID0gQXJyYXkuZnJvbShwZWVycyk7XG4gICAgICAgIC8vIHNvcnQgYnkgc2NvcmVcbiAgICAgICAgcGVlcnNBcnJheS5zb3J0KChhLCBiKSA9PiBnZXRTY29yZShiKSAtIGdldFNjb3JlKGEpKTtcbiAgICAgICAgLy8gV2Uga2VlcCB0aGUgZmlyc3QgRF9zY29yZSBwZWVycyBieSBzY29yZSBhbmQgdGhlIHJlbWFpbmluZyB1cCB0byBEIHJhbmRvbWx5XG4gICAgICAgIC8vIHVuZGVyIHRoZSBjb25zdHJhaW50IHRoYXQgd2Uga2VlcCBEX291dCBwZWVycyBpbiB0aGUgbWVzaCAoaWYgd2UgaGF2ZSB0aGF0IG1hbnkpXG4gICAgICAgIHBlZXJzQXJyYXkgPSBwZWVyc0FycmF5XG4gICAgICAgICAgLnNsaWNlKDAsIERzY29yZSlcbiAgICAgICAgICAuY29uY2F0KHNodWZmbGUocGVlcnNBcnJheS5zbGljZShEc2NvcmUpKSk7XG5cbiAgICAgICAgLy8gY291bnQgdGhlIG91dGJvdW5kIHBlZXJzIHdlIGFyZSBrZWVwaW5nXG4gICAgICAgIGxldCBvdXRib3VuZCA9IDA7XG4gICAgICAgIHBlZXJzQXJyYXkuc2xpY2UoMCwgRCkuZm9yRWFjaCgocCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmdvc3NpcHN1Yi5vdXRib3VuZC5nZXQocCkpIHtcbiAgICAgICAgICAgIG91dGJvdW5kKys7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBpZiBpdCdzIGxlc3MgdGhhbiBEX291dCwgYnViYmxlIHVwIHNvbWUgb3V0Ym91bmQgcGVlcnMgZnJvbSB0aGUgcmFuZG9tIHNlbGVjdGlvblxuICAgICAgICBpZiAob3V0Ym91bmQgPCBEb3V0KSB7XG4gICAgICAgICAgY29uc3Qgcm90YXRlID0gKGk6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgICAgICAgICAgLy8gcm90YXRlIHRoZSBwZWVyc0FycmF5IHRvIHRoZSByaWdodCBhbmQgcHV0IHRoZSBpdGggcGVlciBpbiB0aGUgZnJvbnRcbiAgICAgICAgICAgIGNvbnN0IHAgPSBwZWVyc0FycmF5W2ldO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGk7IGogPiAwOyBqLS0pIHtcbiAgICAgICAgICAgICAgcGVlcnNBcnJheVtqXSA9IHBlZXJzQXJyYXlbaiAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVlcnNBcnJheVswXSA9IHA7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIGZpcnN0IGJ1YmJsZSB1cCBhbGwgb3V0Ym91bmQgcGVlcnMgYWxyZWFkeSBpbiB0aGUgc2VsZWN0aW9uIHRvIHRoZSBmcm9udFxuICAgICAgICAgIGlmIChvdXRib3VuZCA+IDApIHtcbiAgICAgICAgICAgIGxldCBpaGF2ZSA9IG91dGJvdW5kO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBEICYmIGloYXZlID4gMDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmdvc3NpcHN1Yi5vdXRib3VuZC5nZXQocGVlcnNBcnJheVtpXSkpIHtcbiAgICAgICAgICAgICAgICByb3RhdGUoaSk7XG4gICAgICAgICAgICAgICAgaWhhdmUtLTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5vdyBidWJibGUgdXAgZW5vdWdoIG91dGJvdW5kIHBlZXJzIG91dHNpZGUgdGhlIHNlbGVjdGlvbiB0byB0aGUgZnJvbnRcbiAgICAgICAgICBsZXQgaW5lZWQgPSBEIC0gb3V0Ym91bmQ7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IEQ7IGkgPCBwZWVyc0FycmF5Lmxlbmd0aCAmJiBpbmVlZCA+IDA7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ29zc2lwc3ViLm91dGJvdW5kLmdldChwZWVyc0FycmF5W2ldKSkge1xuICAgICAgICAgICAgICByb3RhdGUoaSk7XG4gICAgICAgICAgICAgIGluZWVkLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gcHJ1bmUgdGhlIGV4Y2VzcyBwZWVyc1xuICAgICAgICBwZWVyc0FycmF5LnNsaWNlKEQpLmZvckVhY2gocHJ1bmVQZWVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gZG8gd2UgaGF2ZSBlbm91Z2ggb3V0Ym91bmQgcGVlcnM/XG4gICAgICBpZiAocGVlcnMuc2l6ZSA+PSBEbG8pIHtcbiAgICAgICAgLy8gY291bnQgdGhlIG91dGJvdW5kIHBlZXJzIHdlIGhhdmVcbiAgICAgICAgbGV0IG91dGJvdW5kID0gMDtcbiAgICAgICAgcGVlcnMuZm9yRWFjaCgocCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmdvc3NpcHN1Yi5vdXRib3VuZC5nZXQocCkpIHtcbiAgICAgICAgICAgIG91dGJvdW5kKys7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBpZiBpdCdzIGxlc3MgdGhhbiBEX291dCwgc2VsZWN0IHNvbWUgcGVlcnMgd2l0aCBvdXRib3VuZCBjb25uZWN0aW9ucyBhbmQgZ3JhZnQgdGhlbVxuICAgICAgICBpZiAob3V0Ym91bmQgPCBEb3V0KSB7XG4gICAgICAgICAgY29uc3QgaW5lZWQgPSBEb3V0IC0gb3V0Ym91bmQ7XG4gICAgICAgICAgY29uc3QgYmFja29mZiA9IHRoaXMuZ29zc2lwc3ViLmJhY2tvZmYuZ2V0KHRvcGljKTtcbiAgICAgICAgICBnZXRSZWxheVBlZXJzKHRoaXMuZ29zc2lwc3ViLCB0b3BpYywgaW5lZWQsIChpZDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICAgICAgICAvLyBmaWx0ZXIgb3VyIGN1cnJlbnQgbWVzaCBwZWVycywgZGlyZWN0IHBlZXJzLCBwZWVycyB3ZSBhcmUgYmFja2luZyBvZmYsIHBlZXJzIHdpdGggbmVnYXRpdmUgc2NvcmVcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICFwZWVycy5oYXMoaWQpICYmXG4gICAgICAgICAgICAgICF0aGlzLmdvc3NpcHN1Yi5kaXJlY3QuaGFzKGlkKSAmJlxuICAgICAgICAgICAgICAoIWJhY2tvZmYgfHwgIWJhY2tvZmYuaGFzKGlkKSkgJiZcbiAgICAgICAgICAgICAgZ2V0U2NvcmUoaWQpID49IDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSkuZm9yRWFjaChncmFmdFBlZXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHNob3VsZCB3ZSB0cnkgdG8gaW1wcm92ZSB0aGUgbWVzaCB3aXRoIG9wcG9ydHVuaXN0aWMgZ3JhZnRpbmc/XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZ29zc2lwc3ViLmhlYXJ0YmVhdFRpY2tzICVcbiAgICAgICAgICBjb25zdGFudHMuUmVsYXlPcHBvcnR1bmlzdGljR3JhZnRUaWNrcyA9PT1cbiAgICAgICAgICAwICYmXG4gICAgICAgIHBlZXJzLnNpemUgPiAxXG4gICAgICApIHtcbiAgICAgICAgLy8gT3Bwb3J0dW5pc3RpYyBncmFmdGluZyB3b3JrcyBhcyBmb2xsb3dzOiB3ZSBjaGVjayB0aGUgbWVkaWFuIHNjb3JlIG9mIHBlZXJzIGluIHRoZVxuICAgICAgICAvLyBtZXNoOyBpZiB0aGlzIHNjb3JlIGlzIGJlbG93IHRoZSBvcHBvcnR1bmlzdGljR3JhZnRUaHJlc2hvbGQsIHdlIHNlbGVjdCBhIGZldyBwZWVycyBhdFxuICAgICAgICAvLyByYW5kb20gd2l0aCBzY29yZSBvdmVyIHRoZSBtZWRpYW4uXG4gICAgICAgIC8vIFRoZSBpbnRlbnRpb24gaXMgdG8gKHNsb3dseSkgaW1wcm92ZSBhbiB1bmRlciBwZXJmb3JtaW5nIG1lc2ggYnkgaW50cm9kdWNpbmcgZ29vZFxuICAgICAgICAvLyBzY29yaW5nIHBlZXJzIHRoYXQgbWF5IGhhdmUgYmVlbiBnb3NzaXBpbmcgYXQgdXMuIFRoaXMgYWxsb3dzIHVzIHRvIGdldCBvdXQgb2Ygc3RpY2t5XG4gICAgICAgIC8vIHNpdHVhdGlvbnMgd2hlcmUgd2UgYXJlIHN0dWNrIHdpdGggcG9vciBwZWVycyBhbmQgYWxzbyByZWNvdmVyIGZyb20gY2h1cm4gb2YgZ29vZCBwZWVycy5cblxuICAgICAgICAvLyBub3cgY29tcHV0ZSB0aGUgbWVkaWFuIHBlZXIgc2NvcmUgaW4gdGhlIG1lc2hcbiAgICAgICAgY29uc3QgcGVlcnNMaXN0ID0gQXJyYXkuZnJvbShwZWVycykuc29ydChcbiAgICAgICAgICAoYSwgYikgPT4gZ2V0U2NvcmUoYSkgLSBnZXRTY29yZShiKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBtZWRpYW5JbmRleCA9IE1hdGguZmxvb3IocGVlcnMuc2l6ZSAvIDIpO1xuICAgICAgICBjb25zdCBtZWRpYW5TY29yZSA9IGdldFNjb3JlKHBlZXJzTGlzdFttZWRpYW5JbmRleF0pO1xuXG4gICAgICAgIC8vIGlmIHRoZSBtZWRpYW4gc2NvcmUgaXMgYmVsb3cgdGhlIHRocmVzaG9sZCwgc2VsZWN0IGEgYmV0dGVyIHBlZXIgKGlmIGFueSkgYW5kIEdSQUZUXG4gICAgICAgIGlmIChcbiAgICAgICAgICBtZWRpYW5TY29yZSA8XG4gICAgICAgICAgdGhpcy5nb3NzaXBzdWIuX29wdGlvbnMuc2NvcmVUaHJlc2hvbGRzLm9wcG9ydHVuaXN0aWNHcmFmdFRocmVzaG9sZFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBiYWNrb2ZmID0gdGhpcy5nb3NzaXBzdWIuYmFja29mZi5nZXQodG9waWMpO1xuICAgICAgICAgIGNvbnN0IHBlZXJzVG9HcmFmdCA9IGdldFJlbGF5UGVlcnMoXG4gICAgICAgICAgICB0aGlzLmdvc3NpcHN1YixcbiAgICAgICAgICAgIHRvcGljLFxuICAgICAgICAgICAgY29uc3RhbnRzLlJlbGF5T3Bwb3J0dW5pc3RpY0dyYWZ0UGVlcnMsXG4gICAgICAgICAgICAoaWQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IGN1cnJlbnQgbWVzaCBwZWVycywgZGlyZWN0IHBlZXJzLCBwZWVycyB3ZSBhcmUgYmFja2luZyBvZmYsIHBlZXJzIGJlbG93IG9yIGF0IHRocmVzaG9sZFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIHBlZXJzLmhhcyhpZCkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5nb3NzaXBzdWIuZGlyZWN0LmhhcyhpZCkgJiZcbiAgICAgICAgICAgICAgICAoIWJhY2tvZmYgfHwgIWJhY2tvZmYuaGFzKGlkKSkgJiZcbiAgICAgICAgICAgICAgICBnZXRTY29yZShpZCkgPiBtZWRpYW5TY29yZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgcGVlcnNUb0dyYWZ0LmZvckVhY2goKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ29zc2lwc3ViLmxvZyhcbiAgICAgICAgICAgICAgXCJIRUFSVEJFQVQ6IE9wcG9ydHVuaXN0aWNhbGx5IGdyYWZ0IHBlZXIgJXMgb24gdG9waWMgJXNcIixcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIHRvcGljXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZ3JhZnRQZWVyKGlkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyAybmQgYXJnIGFyZSBtZXNoIHBlZXJzIGV4Y2x1ZGVkIGZyb20gZ29zc2lwLiBXZSBoYXZlIGFscmVhZHkgcHVzaGVkXG4gICAgICAvLyBtZXNzYWdlcyB0byB0aGVtLCBzbyBpdHMgcmVkdW5kYW50IHRvIGdvc3NpcCBJSEFWRXMuXG4gICAgICB0aGlzLmdvc3NpcHN1Yi5fZW1pdEdvc3NpcCh0b3BpYywgcGVlcnMpO1xuICAgIH0pO1xuXG4gICAgLy8gZXhwaXJlIGZhbm91dCBmb3IgdG9waWNzIHdlIGhhdmVuJ3QgcHVibGlzaGVkIHRvIGluIGEgd2hpbGVcbiAgICBjb25zdCBub3cgPSB0aGlzLmdvc3NpcHN1Yi5fbm93KCk7XG4gICAgdGhpcy5nb3NzaXBzdWIubGFzdHB1Yi5mb3JFYWNoKChsYXN0cHViLCB0b3BpYykgPT4ge1xuICAgICAgaWYgKGxhc3RwdWIgKyBjb25zdGFudHMuUmVsYXlGYW5vdXRUVEwgPCBub3cpIHtcbiAgICAgICAgdGhpcy5nb3NzaXBzdWIuZmFub3V0LmRlbGV0ZSh0b3BpYyk7XG4gICAgICAgIHRoaXMuZ29zc2lwc3ViLmxhc3RwdWIuZGVsZXRlKHRvcGljKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIG1haW50YWluIG91ciBmYW5vdXQgZm9yIHRvcGljcyB3ZSBhcmUgcHVibGlzaGluZyBidXQgd2UgaGF2ZSBub3Qgam9pbmVkXG4gICAgdGhpcy5nb3NzaXBzdWIuZmFub3V0LmZvckVhY2goKGZhbm91dFBlZXJzLCB0b3BpYykgPT4ge1xuICAgICAgLy8gY2hlY2tzIHdoZXRoZXIgb3VyIHBlZXJzIGFyZSBzdGlsbCBpbiB0aGUgdG9waWMgYW5kIGhhdmUgYSBzY29yZSBhYm92ZSB0aGUgcHVibGlzaCB0aHJlc2hvbGRcbiAgICAgIGNvbnN0IHRvcGljUGVlcnMgPSB0aGlzLmdvc3NpcHN1Yi50b3BpY3MuZ2V0KHRvcGljKTtcbiAgICAgIGZhbm91dFBlZXJzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhdG9waWNQZWVycz8uaGFzKGlkKSB8fFxuICAgICAgICAgIGdldFNjb3JlKGlkKSA8XG4gICAgICAgICAgICB0aGlzLmdvc3NpcHN1Yi5fb3B0aW9ucy5zY29yZVRocmVzaG9sZHMucHVibGlzaFRocmVzaG9sZFxuICAgICAgICApIHtcbiAgICAgICAgICBmYW5vdXRQZWVycy5kZWxldGUoaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gZG8gd2UgbmVlZCBtb3JlIHBlZXJzP1xuICAgICAgaWYgKGZhbm91dFBlZXJzLnNpemUgPCBEKSB7XG4gICAgICAgIGNvbnN0IGluZWVkID0gRCAtIGZhbm91dFBlZXJzLnNpemU7XG4gICAgICAgIGNvbnN0IHBlZXJzU2V0ID0gZ2V0UmVsYXlQZWVycyhcbiAgICAgICAgICB0aGlzLmdvc3NpcHN1YixcbiAgICAgICAgICB0b3BpYyxcbiAgICAgICAgICBpbmVlZCxcbiAgICAgICAgICAoaWQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgICAgICAgLy8gZmlsdGVyIG91dCBleGlzdGluZyBmYW5vdXQgcGVlcnMsIGRpcmVjdCBwZWVycywgYW5kIHBlZXJzIHdpdGggc2NvcmUgYWJvdmUgdGhlIHB1Ymxpc2ggdGhyZXNob2xkXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAhZmFub3V0UGVlcnMuaGFzKGlkKSAmJlxuICAgICAgICAgICAgICAhdGhpcy5nb3NzaXBzdWIuZGlyZWN0LmhhcyhpZCkgJiZcbiAgICAgICAgICAgICAgZ2V0U2NvcmUoaWQpID49XG4gICAgICAgICAgICAgICAgdGhpcy5nb3NzaXBzdWIuX29wdGlvbnMuc2NvcmVUaHJlc2hvbGRzLnB1Ymxpc2hUaHJlc2hvbGRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBwZWVyc1NldC5mb3JFYWNoKChpZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgZmFub3V0UGVlcnMuYWRkKGlkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIDJuZCBhcmcgYXJlIGZhbm91dCBwZWVycyBleGNsdWRlZCBmcm9tIGdvc3NpcC5cbiAgICAgIC8vIFdlIGhhdmUgYWxyZWFkeSBwdXNoZWQgbWVzc2FnZXMgdG8gdGhlbSwgc28gaXRzIHJlZHVuZGFudCB0byBnb3NzaXAgSUhBVkVzXG4gICAgICB0aGlzLmdvc3NpcHN1Yi5fZW1pdEdvc3NpcCh0b3BpYywgZmFub3V0UGVlcnMpO1xuICAgIH0pO1xuXG4gICAgLy8gc2VuZCBjb2FsZXNjZWQgR1JBRlQvUFJVTkUgbWVzc2FnZXMgKHdpbGwgcGlnZ3liYWNrIGdvc3NpcClcbiAgICB0aGlzLmdvc3NpcHN1Yi5fc2VuZEdyYWZ0UHJ1bmUodG9HcmFmdCwgdG9QcnVuZSwgbm9QWCk7XG5cbiAgICAvLyBmbHVzaCBwZW5kaW5nIGdvc3NpcCB0aGF0IHdhc24ndCBwaWdneWJhY2tlZCBhYm92ZVxuICAgIHRoaXMuZ29zc2lwc3ViLl9mbHVzaCgpO1xuXG4gICAgLy8gYWR2YW5jZSB0aGUgbWVzc2FnZSBoaXN0b3J5IHdpbmRvd1xuICAgIHRoaXMuZ29zc2lwc3ViLm1lc3NhZ2VDYWNoZS5zaGlmdCgpO1xuXG4gICAgdGhpcy5nb3NzaXBzdWIuZW1pdChcImdvc3NpcHN1YjpoZWFydGJlYXRcIik7XG4gIH1cbn1cbiIsImltcG9ydCBMb25nIGZyb20gXCJsb25nXCI7XG5pbXBvcnQgeyBSZWFkZXIgfSBmcm9tIFwicHJvdG9idWZqcy9taW5pbWFsXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSBcInV1aWRcIjtcblxuaW1wb3J0ICogYXMgcHJvdG9WMkJldGEzIGZyb20gXCIuLi8uLi9wcm90by93YWt1L3YyL3N0b3JlL3YyYmV0YTMvc3RvcmVcIjtcbmltcG9ydCAqIGFzIHByb3RvVjJCZXRhNCBmcm9tIFwiLi4vLi4vcHJvdG8vd2FrdS92Mi9zdG9yZS92MmJldGE0L3N0b3JlXCI7XG5cbmltcG9ydCB7IFN0b3JlQ29kZWNzIH0gZnJvbSBcIi4vaW5kZXhcIjtcblxuZXhwb3J0IGVudW0gUGFnZURpcmVjdGlvbiB7XG4gIEJBQ0tXQVJEID0gXCJiYWNrd2FyZFwiLFxuICBGT1JXQVJEID0gXCJmb3J3YXJkXCIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyYW1zIHtcbiAgY29udGVudFRvcGljczogc3RyaW5nW107XG4gIHB1YlN1YlRvcGljOiBzdHJpbmc7XG4gIHBhZ2VEaXJlY3Rpb246IFBhZ2VEaXJlY3Rpb247XG4gIHBhZ2VTaXplOiBudW1iZXI7XG4gIHN0YXJ0VGltZT86IERhdGU7XG4gIGVuZFRpbWU/OiBEYXRlO1xuICBjdXJzb3I/OiBwcm90b1YyQmV0YTMuSW5kZXggfCBwcm90b1YyQmV0YTQuSW5kZXg7XG4gIHN0b3JlQ29kZWM/OiBTdG9yZUNvZGVjcztcbn1cblxuZXhwb3J0IGNsYXNzIEhpc3RvcnlSUEMge1xuICBwcml2YXRlIHJlYWRvbmx5IHByb3RvQ29kZWM6IGFueTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBwcm90bzogcHJvdG9WMkJldGEzLkhpc3RvcnlSUEMgfCBwcm90b1YyQmV0YTQuSGlzdG9yeVJQQyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3RvcmVDb2RlYzogU3RvcmVDb2RlY3NcbiAgKSB7XG4gICAgc3dpdGNoIChzdG9yZUNvZGVjKSB7XG4gICAgICBjYXNlIFN0b3JlQ29kZWNzLlYyQmV0YTM6XG4gICAgICAgIHRoaXMucHJvdG9Db2RlYyA9IHByb3RvVjJCZXRhMztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN0b3JlQ29kZWNzLlYyQmV0YTQ6XG4gICAgICAgIHRoaXMucHJvdG9Db2RlYyA9IHByb3RvVjJCZXRhNDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBgSW50ZXJuYWwgRXJyb3I6IFVuZXhwZWN0ZWQgc3RvcmUgY29kZWMgdmFsdWUgcmVjZWl2ZWQgaW4gY29uc3RydWN0b3I6ICR7c3RvcmVDb2RlY31gO1xuICAgIH1cbiAgfVxuXG4gIGdldCBxdWVyeSgpOlxuICAgIHwgcHJvdG9WMkJldGEzLkhpc3RvcnlRdWVyeVxuICAgIHwgcHJvdG9WMkJldGE0Lkhpc3RvcnlRdWVyeVxuICAgIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5wcm90by5xdWVyeTtcbiAgfVxuXG4gIGdldCByZXNwb25zZSgpOlxuICAgIHwgcHJvdG9WMkJldGEzLkhpc3RvcnlSZXNwb25zZVxuICAgIHwgcHJvdG9WMkJldGE0Lkhpc3RvcnlSZXNwb25zZVxuICAgIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5wcm90by5yZXNwb25zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgSGlzdG9yeSBRdWVyeS5cbiAgICovXG4gIHN0YXRpYyBjcmVhdGVRdWVyeShwYXJhbXM6IFBhcmFtcyk6IEhpc3RvcnlSUEMge1xuICAgIGNvbnN0IHN0b3JlQ29kZWMgPSBwYXJhbXMuc3RvcmVDb2RlYyA/PyBTdG9yZUNvZGVjcy5WMkJldGE0O1xuXG4gICAgY29uc3QgY29udGVudEZpbHRlcnMgPSBwYXJhbXMuY29udGVudFRvcGljcy5tYXAoKGNvbnRlbnRUb3BpYykgPT4ge1xuICAgICAgcmV0dXJuIHsgY29udGVudFRvcGljIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBkaXJlY3Rpb24gPSBkaXJlY3Rpb25Ub1Byb3RvKHBhcmFtcy5wYWdlRGlyZWN0aW9uKTtcblxuICAgIHN3aXRjaCAoc3RvcmVDb2RlYykge1xuICAgICAgY2FzZSBTdG9yZUNvZGVjcy5WMkJldGEzOlxuICAgICAgICAvLyBVc2luZyBmdW5jdGlvbiB0byBzY29wZSB2YXJpYWJsZXNcbiAgICAgICAgcmV0dXJuICgoKTogSGlzdG9yeVJQQyA9PiB7XG4gICAgICAgICAgY29uc3QgcGFnaW5nSW5mbyA9IHtcbiAgICAgICAgICAgIHBhZ2VTaXplOiBMb25nLmZyb21OdW1iZXIocGFyYW1zLnBhZ2VTaXplKSxcbiAgICAgICAgICAgIGN1cnNvcjogcGFyYW1zLmN1cnNvcixcbiAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICB9IGFzIHByb3RvVjJCZXRhMy5QYWdpbmdJbmZvO1xuXG4gICAgICAgICAgbGV0IHN0YXJ0VGltZSwgZW5kVGltZTtcbiAgICAgICAgICBpZiAocGFyYW1zLnN0YXJ0VGltZSkgc3RhcnRUaW1lID0gcGFyYW1zLnN0YXJ0VGltZS52YWx1ZU9mKCkgLyAxMDAwO1xuXG4gICAgICAgICAgaWYgKHBhcmFtcy5lbmRUaW1lKSBlbmRUaW1lID0gcGFyYW1zLmVuZFRpbWUudmFsdWVPZigpIC8gMTAwMDtcblxuICAgICAgICAgIHJldHVybiBuZXcgSGlzdG9yeVJQQyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkKCksXG4gICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgcHViU3ViVG9waWM6IHBhcmFtcy5wdWJTdWJUb3BpYyxcbiAgICAgICAgICAgICAgICBjb250ZW50RmlsdGVycyxcbiAgICAgICAgICAgICAgICBwYWdpbmdJbmZvLFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICBlbmRUaW1lLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICByZXNwb25zZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0b3JlQ29kZWNcbiAgICAgICAgICApO1xuICAgICAgICB9KSgpO1xuICAgICAgY2FzZSBTdG9yZUNvZGVjcy5WMkJldGE0OlxuICAgICAgICByZXR1cm4gKCgpOiBIaXN0b3J5UlBDID0+IHtcbiAgICAgICAgICBjb25zdCBwYWdpbmdJbmZvID0ge1xuICAgICAgICAgICAgcGFnZVNpemU6IExvbmcuZnJvbU51bWJlcihwYXJhbXMucGFnZVNpemUpLFxuICAgICAgICAgICAgY3Vyc29yOiBwYXJhbXMuY3Vyc29yLFxuICAgICAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICAgIH0gYXMgcHJvdG9WMkJldGE0LlBhZ2luZ0luZm87XG5cbiAgICAgICAgICBsZXQgc3RhcnRUaW1lLCBlbmRUaW1lO1xuICAgICAgICAgIGlmIChwYXJhbXMuc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAvLyBtaWxsaXNlY29uZHMgMTBeLTMgdG8gbmFub3NlY29uZHMgMTBeLTlcbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IExvbmcuZnJvbU51bWJlcihwYXJhbXMuc3RhcnRUaW1lLnZhbHVlT2YoKSkubXVsKFxuICAgICAgICAgICAgICAxXzAwMF8wMDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHBhcmFtcy5lbmRUaW1lKSB7XG4gICAgICAgICAgICAvLyBtaWxsaXNlY29uZHMgMTBeLTMgdG8gbmFub3NlY29uZHMgMTBeLTlcbiAgICAgICAgICAgIGVuZFRpbWUgPSBMb25nLmZyb21OdW1iZXIocGFyYW1zLmVuZFRpbWUudmFsdWVPZigpKS5tdWwoMV8wMDBfMDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5UlBDKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHV1aWQoKSxcbiAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICBwdWJTdWJUb3BpYzogcGFyYW1zLnB1YlN1YlRvcGljLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRGaWx0ZXJzLFxuICAgICAgICAgICAgICAgIHBhZ2luZ0luZm8sXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHJlc3BvbnNlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RvcmVDb2RlY1xuICAgICAgICAgICk7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGBJbnRlcm5hbCBFcnJvcjogVW5leHBlY3RlZCBzdG9yZSBjb2RlYyB2YWx1ZSByZWNlaXZlZCBpbiBjcmVhdGVRdWVyeTogJHtzdG9yZUNvZGVjfWA7XG4gICAgfVxuICB9XG5cbiAgZGVjb2RlKGJ5dGVzOiBVaW50OEFycmF5KTogSGlzdG9yeVJQQyB7XG4gICAgY29uc3QgcmVzID0gdGhpcy5wcm90b0NvZGVjLkhpc3RvcnlSUEMuZGVjb2RlKFJlYWRlci5jcmVhdGUoYnl0ZXMpKTtcbiAgICByZXR1cm4gbmV3IEhpc3RvcnlSUEMocmVzLCB0aGlzLnN0b3JlQ29kZWMpO1xuICB9XG5cbiAgZW5jb2RlKCk6IFVpbnQ4QXJyYXkge1xuICAgIHJldHVybiB0aGlzLnByb3RvQ29kZWMuSGlzdG9yeVJQQy5lbmNvZGUodGhpcy5wcm90bykuZmluaXNoKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlyZWN0aW9uVG9Qcm90byhcbiAgcGFnZURpcmVjdGlvbjogUGFnZURpcmVjdGlvblxuKTogcHJvdG9WMkJldGE0LlBhZ2luZ0luZm9fRGlyZWN0aW9uIHtcbiAgc3dpdGNoIChwYWdlRGlyZWN0aW9uKSB7XG4gICAgY2FzZSBQYWdlRGlyZWN0aW9uLkJBQ0tXQVJEOlxuICAgICAgcmV0dXJuIHByb3RvVjJCZXRhNC5QYWdpbmdJbmZvX0RpcmVjdGlvbi5ESVJFQ1RJT05fQkFDS1dBUkRfVU5TUEVDSUZJRUQ7XG4gICAgY2FzZSBQYWdlRGlyZWN0aW9uLkZPUldBUkQ6XG4gICAgICByZXR1cm4gcHJvdG9WMkJldGE0LlBhZ2luZ0luZm9fRGlyZWN0aW9uLkRJUkVDVElPTl9GT1JXQVJEO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gcHJvdG9WMkJldGE0LlBhZ2luZ0luZm9fRGlyZWN0aW9uLkRJUkVDVElPTl9CQUNLV0FSRF9VTlNQRUNJRklFRDtcbiAgfVxufVxuIiwiaW1wb3J0IGRlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IGNvbmNhdCBmcm9tIFwiaXQtY29uY2F0XCI7XG5pbXBvcnQgbHAgZnJvbSBcIml0LWxlbmd0aC1wcmVmaXhlZFwiO1xuaW1wb3J0IHsgcGlwZSB9IGZyb20gXCJpdC1waXBlXCI7XG5pbXBvcnQgTGlicDJwIGZyb20gXCJsaWJwMnBcIjtcbmltcG9ydCB7IFBlZXIgfSBmcm9tIFwibGlicDJwL3NyYy9wZWVyLXN0b3JlXCI7XG5pbXBvcnQgUGVlcklkIGZyb20gXCJwZWVyLWlkXCI7XG5cbmltcG9ydCB7IGdldFBlZXJzRm9yUHJvdG9jb2wsIHNlbGVjdFJhbmRvbVBlZXIgfSBmcm9tIFwiLi4vc2VsZWN0X3BlZXJcIjtcbmltcG9ydCB7IGhleFRvQnl0ZXMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7IERlZmF1bHRQdWJTdWJUb3BpYyB9IGZyb20gXCIuLi93YWt1XCI7XG5pbXBvcnQgeyBEZWNyeXB0aW9uTWV0aG9kLCBXYWt1TWVzc2FnZSB9IGZyb20gXCIuLi93YWt1X21lc3NhZ2VcIjtcblxuaW1wb3J0IHsgSGlzdG9yeVJQQywgUGFnZURpcmVjdGlvbiB9IGZyb20gXCIuL2hpc3RvcnlfcnBjXCI7XG5cbmNvbnN0IGRiZyA9IGRlYnVnKFwid2FrdTpzdG9yZVwiKTtcblxuZXhwb3J0IGVudW0gU3RvcmVDb2RlY3Mge1xuICBWMkJldGEzID0gXCIvdmFjL3dha3Uvc3RvcmUvMi4wLjAtYmV0YTNcIixcbiAgVjJCZXRhNCA9IFwiL3ZhYy93YWt1L3N0b3JlLzIuMC4wLWJldGE0XCIsXG59XG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0UGFnZVNpemUgPSAxMDtcblxuZXhwb3J0IHsgUGFnZURpcmVjdGlvbiB9O1xuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZU9wdGlvbnMge1xuICAvKipcbiAgICogVGhlIFB1YlN1YiBUb3BpYyB0byB1c2UuIERlZmF1bHRzIHRvIHtAbGluayBEZWZhdWx0UHViU3ViVG9waWN9LlxuICAgKlxuICAgKiBUaGUgdXNhZ2Ugb2YgdGhlIGRlZmF1bHQgcHVic3ViIHRvcGljIGlzIHJlY29tbWVuZGVkLlxuICAgKiBTZWUgW1dha3UgdjIgVG9waWMgVXNhZ2UgUmVjb21tZW5kYXRpb25zXShodHRwczovL3JmYy52YWMuZGV2L3NwZWMvMjMvKSBmb3IgZGV0YWlscy5cbiAgICpcbiAgICogQGRlZmF1bHQge0BsaW5rIERlZmF1bHRQdWJTdWJUb3BpY31cbiAgICovXG4gIHB1YlN1YlRvcGljPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVGaWx0ZXIge1xuICBzdGFydFRpbWU6IERhdGU7XG4gIGVuZFRpbWU6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBwZWVyIHRvIHF1ZXJ5LiBJZiB1bmRlZmluZWQsIGEgcHNldWRvLXJhbmRvbSBwZWVyIGlzIHNlbGVjdGVkIGZyb20gdGhlIGNvbm5lY3RlZCBXYWt1IFN0b3JlIHBlZXJzLlxuICAgKi9cbiAgcGVlcklkPzogUGVlcklkO1xuICAvKipcbiAgICogVGhlIHB1YnN1YiB0b3BpYyB0byBwYXNzIHRvIHRoZSBxdWVyeS5cbiAgICogU2VlIFtXYWt1IHYyIFRvcGljIFVzYWdlIFJlY29tbWVuZGF0aW9uc10oaHR0cHM6Ly9yZmMudmFjLmRldi9zcGVjLzIzLykuXG4gICAqL1xuICBwdWJTdWJUb3BpYz86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBkaXJlY3Rpb24gaW4gd2hpY2ggcGFnZXMgYXJlIHJldHJpZXZlZDpcbiAgICogLSBbW1BhZ2VEaXJlY3Rpb24uQkFDS1dBUkRdXTogTW9zdCByZWNlbnQgcGFnZSBmaXJzdC5cbiAgICogLSBbW1BhZ2VEaXJlY3Rpb24uRk9SV0FSRF1dOiBPbGRlc3QgcGFnZSBmaXJzdC5cbiAgICpcbiAgICogTm90ZTogVGhpcyBkb2VzIG5vdCBhZmZlY3QgdGhlIG9yZGVyaW5nIG9mIG1lc3NhZ2VzIHdpdGggdGhlIHBhZ2VcbiAgICogKG9sZGVzdCBtZXNzYWdlIGlzIGFsd2F5cyBmaXJzdCkuXG4gICAqXG4gICAqIEBkZWZhdWx0IFtbUGFnZURpcmVjdGlvbi5CQUNLV0FSRF1dXG4gICAqL1xuICBwYWdlRGlyZWN0aW9uPzogUGFnZURpcmVjdGlvbjtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgbWVzc2FnZSBwZXIgcGFnZS5cbiAgICpcbiAgICogQGRlZmF1bHQgW1tEZWZhdWx0UGFnZVNpemVdXVxuICAgKi9cbiAgcGFnZVNpemU/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBtZXNzYWdlcyB3aXRoIGEgdGltZXN0YW1wIHdpdGhpbiB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICAgKi9cbiAgdGltZUZpbHRlcj86IFRpbWVGaWx0ZXI7XG4gIC8qKlxuICAgKiBDYWxsYmFjayBjYWxsZWQgb24gcGFnZXMgb2Ygc3RvcmVkIG1lc3NhZ2VzIGFzIHRoZXkgYXJlIHJldHJpZXZlZC5cbiAgICpcbiAgICogQWxsb3dzIGZvciBhIGZhc3RlciBhY2Nlc3MgdG8gdGhlIHJlc3VsdHMgYXMgaXQgaXMgY2FsbGVkIGFzIHNvb24gYXMgYSBwYWdlXG4gICAqIGlzIHJlY2VpdmVkLiBUcmF2ZXJzYWwgb2YgdGhlIHBhZ2VzIGlzIGRvbmUgYXV0b21hdGljYWxseSBzbyB0aGlzIGZ1bmN0aW9uXG4gICAqIHdpbGwgaW52b2tlZCBmb3IgZWFjaCByZXRyaWV2ZWQgcGFnZS5cbiAgICpcbiAgICogSWYgdGhlIGNhbGwgb24gYSBwYWdlIHJldHVybnMgYHRydWVgLCB0aGVuIHRyYXZlcnNhbCBvZiB0aGUgcGFnZXMgaXMgYWJvcnRlZC5cbiAgICogRm9yIGV4YW1wbGUsIHRoaXMgY2FuIGJlIHVzZWQgZm9yIHRoZSBjYWxsZXIgdG8gc3RvcCB0aGUgcXVlcnkgYWZ0ZXIgYVxuICAgKiBzcGVjaWZpYyBtZXNzYWdlIGlzIGZvdW5kLlxuICAgKi9cbiAgY2FsbGJhY2s/OiAobWVzc2FnZXM6IFdha3VNZXNzYWdlW10pID0+IHZvaWQgfCBib29sZWFuO1xuICAvKipcbiAgICogS2V5cyB0aGF0IHdpbGwgYmUgdXNlZCB0byBkZWNyeXB0IG1lc3NhZ2VzLlxuICAgKlxuICAgKiBJdCBjYW4gYmUgQXN5bW1ldHJpYyBQcml2YXRlIEtleXMgYW5kIFN5bW1ldHJpYyBLZXlzIGluIHRoZSBzYW1lIGFycmF5LFxuICAgKiBhbGwga2V5cyB3aWxsIGJlIHRyaWVkIHdpdGggYm90aCBtZXRob2RzLlxuICAgKi9cbiAgZGVjcnlwdGlvbktleXM/OiBBcnJheTxVaW50OEFycmF5IHwgc3RyaW5nPjtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBbV2FrdSB2MiBTdG9yZSBwcm90b2NvbF0oaHR0cHM6Ly9yZmMudmFjLmRldi9zcGVjLzEzLykuXG4gKlxuICogVGhlIFdha3UgU3RvcmUgcHJvdG9jb2wgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmVkIGhpc3RvcmljYWwgbWVzc2FnZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBXYWt1U3RvcmUge1xuICBwdWJTdWJUb3BpYzogc3RyaW5nO1xuICBwdWJsaWMgZGVjcnlwdGlvbktleXM6IE1hcDxcbiAgICBVaW50OEFycmF5LFxuICAgIHsgbWV0aG9kPzogRGVjcnlwdGlvbk1ldGhvZDsgY29udGVudFRvcGljcz86IHN0cmluZ1tdIH1cbiAgPjtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbGlicDJwOiBMaWJwMnAsIG9wdGlvbnM/OiBDcmVhdGVPcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnM/LnB1YlN1YlRvcGljKSB7XG4gICAgICB0aGlzLnB1YlN1YlRvcGljID0gb3B0aW9ucy5wdWJTdWJUb3BpYztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wdWJTdWJUb3BpYyA9IERlZmF1bHRQdWJTdWJUb3BpYztcbiAgICB9XG5cbiAgICB0aGlzLmRlY3J5cHRpb25LZXlzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERvIGEgcXVlcnkgdG8gYSBXYWt1IFN0b3JlIHRvIHJldHJpZXZlIGhpc3RvcmljYWwvbWlzc2VkIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0gY29udGVudFRvcGljcyBUaGUgY29udGVudCB0b3BpY3MgdG8gcGFzcyB0byB0aGUgcXVlcnksIGxlYXZlIGVtcHR5IHRvXG4gICAqIHJldHJpZXZlIGFsbCBtZXNzYWdlcy5cbiAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgcGFyYW1ldGVycy5cbiAgICpcbiAgICogQHRocm93cyBJZiBub3QgYWJsZSB0byByZWFjaCBhIFdha3UgU3RvcmUgcGVlciB0byBxdWVyeVxuICAgKiBvciBpZiBhbiBlcnJvciBpcyBlbmNvdW50ZXJlZCB3aGVuIHByb2Nlc3NpbmcgdGhlIHJlcGx5LlxuICAgKi9cbiAgYXN5bmMgcXVlcnlIaXN0b3J5KFxuICAgIGNvbnRlbnRUb3BpY3M6IHN0cmluZ1tdLFxuICAgIG9wdGlvbnM/OiBRdWVyeU9wdGlvbnNcbiAgKTogUHJvbWlzZTxXYWt1TWVzc2FnZVtdPiB7XG4gICAgbGV0IHN0YXJ0VGltZSwgZW5kVGltZTtcblxuICAgIGlmIChvcHRpb25zPy50aW1lRmlsdGVyKSB7XG4gICAgICBzdGFydFRpbWUgPSBvcHRpb25zLnRpbWVGaWx0ZXIuc3RhcnRUaW1lO1xuICAgICAgZW5kVGltZSA9IG9wdGlvbnMudGltZUZpbHRlci5lbmRUaW1lO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKFxuICAgICAge1xuICAgICAgICBwdWJTdWJUb3BpYzogdGhpcy5wdWJTdWJUb3BpYyxcbiAgICAgICAgcGFnZURpcmVjdGlvbjogUGFnZURpcmVjdGlvbi5CQUNLV0FSRCxcbiAgICAgICAgcGFnZVNpemU6IERlZmF1bHRQYWdlU2l6ZSxcbiAgICAgIH0sXG4gICAgICBvcHRpb25zLFxuICAgICAgeyBjb250ZW50VG9waWNzLCBzdGFydFRpbWUsIGVuZFRpbWUgfVxuICAgICk7XG5cbiAgICBkYmcoXCJRdWVyeWluZyBoaXN0b3J5IHdpdGggdGhlIGZvbGxvd2luZyBvcHRpb25zXCIsIHtcbiAgICAgIHBlZXJJZDogb3B0aW9ucz8ucGVlcklkPy50b0I1OFN0cmluZygpLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KTtcblxuICAgIGxldCBwZWVyO1xuICAgIGlmIChvcHRzLnBlZXJJZCkge1xuICAgICAgcGVlciA9IGF3YWl0IHRoaXMubGlicDJwLnBlZXJTdG9yZS5nZXQob3B0cy5wZWVySWQpO1xuICAgICAgaWYgKCFwZWVyKVxuICAgICAgICB0aHJvdyBgRmFpbGVkIHRvIHJldHJpZXZlIGNvbm5lY3Rpb24gZGV0YWlscyBmb3IgcHJvdmlkZWQgcGVlciBpbiBwZWVyIHN0b3JlOiAke29wdHMucGVlcklkLnRvQjU4U3RyaW5nKCl9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGVlciA9IGF3YWl0IHRoaXMucmFuZG9tUGVlcjtcbiAgICAgIGlmICghcGVlcilcbiAgICAgICAgdGhyb3cgXCJGYWlsZWQgdG8gZmluZCBrbm93biBwZWVyIHRoYXQgcmVnaXN0ZXJzIHdha3Ugc3RvcmUgcHJvdG9jb2xcIjtcbiAgICB9XG5cbiAgICBsZXQgc3RvcmVDb2RlYyA9IFwiXCI7XG4gICAgZm9yIChjb25zdCBjb2RlYyBvZiBPYmplY3QudmFsdWVzKFN0b3JlQ29kZWNzKSkge1xuICAgICAgaWYgKHBlZXIucHJvdG9jb2xzLmluY2x1ZGVzKGNvZGVjKSkge1xuICAgICAgICBzdG9yZUNvZGVjID0gY29kZWM7XG4gICAgICAgIC8vIERvIG5vdCBicmVhayBhcyB3ZSB3YW50IHRvIGtlZXAgdGhlIGxhc3QgdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgZGJnKGBVc2Ugc3RvcmUgY29kZWMgJHtzdG9yZUNvZGVjfWApO1xuICAgIGlmICghc3RvcmVDb2RlYylcbiAgICAgIHRocm93IGBQZWVyIGRvZXMgbm90IHJlZ2lzdGVyIHdha3Ugc3RvcmUgcHJvdG9jb2w6ICR7cGVlci5pZC50b0I1OFN0cmluZygpfWA7XG5cbiAgICBPYmplY3QuYXNzaWduKG9wdHMsIHsgc3RvcmVDb2RlYyB9KTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gdGhpcy5saWJwMnAuY29ubmVjdGlvbk1hbmFnZXIuZ2V0KHBlZXIuaWQpO1xuICAgIGlmICghY29ubmVjdGlvbikgdGhyb3cgXCJGYWlsZWQgdG8gZ2V0IGEgY29ubmVjdGlvbiB0byB0aGUgcGVlclwiO1xuXG4gICAgY29uc3QgZGVjcnlwdGlvbktleXMgPSBBcnJheS5mcm9tKHRoaXMuZGVjcnlwdGlvbktleXMpLm1hcChcbiAgICAgIChba2V5LCB7IG1ldGhvZCwgY29udGVudFRvcGljcyB9XSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgY29udGVudFRvcGljcyxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gQWRkIHRoZSBkZWNyeXB0aW9uIGtleXMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYWdhaW5zdCB0aGVcbiAgICAvLyBjb250ZW50IHRvcGljcyBhbHNvIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uLlxuICAgIGlmIChvcHRzLmRlY3J5cHRpb25LZXlzKSB7XG4gICAgICBvcHRzLmRlY3J5cHRpb25LZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBkZWNyeXB0aW9uS2V5cy5wdXNoKHtcbiAgICAgICAgICBrZXk6IGhleFRvQnl0ZXMoa2V5KSxcbiAgICAgICAgICBjb250ZW50VG9waWNzOiBjb250ZW50VG9waWNzLmxlbmd0aCA/IGNvbnRlbnRUb3BpY3MgOiB1bmRlZmluZWQsXG4gICAgICAgICAgbWV0aG9kOiB1bmRlZmluZWQsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2FnZXM6IFdha3VNZXNzYWdlW10gPSBbXTtcbiAgICBsZXQgY3Vyc29yID0gdW5kZWZpbmVkO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCB7IHN0cmVhbSB9ID0gYXdhaXQgY29ubmVjdGlvbi5uZXdTdHJlYW0oc3RvcmVDb2RlYyk7XG4gICAgICBjb25zdCBxdWVyeU9wdHMgPSBPYmplY3QuYXNzaWduKG9wdHMsIHsgY3Vyc29yIH0pO1xuICAgICAgY29uc3QgaGlzdG9yeVJwY1F1ZXJ5ID0gSGlzdG9yeVJQQy5jcmVhdGVRdWVyeShxdWVyeU9wdHMpO1xuICAgICAgZGJnKFwiUXVlcnlpbmcgc3RvcmUgcGVlclwiLCBjb25uZWN0aW9uLnJlbW90ZUFkZHIudG9TdHJpbmcoKSk7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHBpcGUoXG4gICAgICAgIFtoaXN0b3J5UnBjUXVlcnkuZW5jb2RlKCldLFxuICAgICAgICBscC5lbmNvZGUoKSxcbiAgICAgICAgc3RyZWFtLFxuICAgICAgICBscC5kZWNvZGUoKSxcbiAgICAgICAgY29uY2F0XG4gICAgICApO1xuICAgICAgY29uc3QgcmVwbHkgPSBoaXN0b3J5UnBjUXVlcnkuZGVjb2RlKHJlcy5zbGljZSgpKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXBseS5yZXNwb25zZTtcbiAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgdGhyb3cgXCJIaXN0b3J5IHJlc3BvbnNlIG1pc3NlcyByZXNwb25zZSBmaWVsZFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgXCJIaXN0b3J5IHJlc3BvbnNlIGNvbnRhaW5zIGFuIEVycm9yXCIgKyByZXNwb25zZS5lcnJvcjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5tZXNzYWdlcyB8fCAhcmVzcG9uc2UubWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIE5vIG1lc3NhZ2VzIGxlZnQgKG9yIHN0b3JlZClcbiAgICAgICAgY29uc29sZS5sb2coXCJObyBtZXNzYWdlcyBwcmVzZW50IGluIEhpc3RvcnlSUEMgcmVzcG9uc2VcIik7XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICAgIH1cblxuICAgICAgZGJnKFxuICAgICAgICBgJHtyZXNwb25zZS5tZXNzYWdlcy5sZW5ndGh9IG1lc3NhZ2VzIHJldHJpZXZlZCBmb3IgcHVic3ViIHRvcGljICR7b3B0cy5wdWJTdWJUb3BpY31gXG4gICAgICApO1xuXG4gICAgICBjb25zdCBwYWdlTWVzc2FnZXM6IFdha3VNZXNzYWdlW10gPSBbXTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICByZXNwb25zZS5tZXNzYWdlcy5tYXAoYXN5bmMgKHByb3RvTXNnKSA9PiB7XG4gICAgICAgICAgY29uc3QgbXNnID0gYXdhaXQgV2FrdU1lc3NhZ2UuZGVjb2RlUHJvdG8ocHJvdG9Nc2csIGRlY3J5cHRpb25LZXlzKTtcblxuICAgICAgICAgIGlmIChtc2cpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gobXNnKTtcbiAgICAgICAgICAgIHBhZ2VNZXNzYWdlcy5wdXNoKG1zZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgbGV0IGFib3J0ID0gZmFsc2U7XG4gICAgICBpZiAob3B0cy5jYWxsYmFjaykge1xuICAgICAgICBhYm9ydCA9IEJvb2xlYW4ob3B0cy5jYWxsYmFjayhwYWdlTWVzc2FnZXMpKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2VQYWdlU2l6ZSA9IHJlc3BvbnNlLnBhZ2luZ0luZm8/LnBhZ2VTaXplO1xuICAgICAgY29uc3QgcXVlcnlQYWdlU2l6ZSA9IGhpc3RvcnlScGNRdWVyeS5xdWVyeT8ucGFnaW5nSW5mbz8ucGFnZVNpemU7XG4gICAgICBpZiAoXG4gICAgICAgIGFib3J0IHx8XG4gICAgICAgIC8vIFJlc3BvbnNlIHBhZ2Ugc2l6ZSBzbWFsbGVyIHRoYW4gcXVlcnksIG1lYW5pbmcgdGhpcyBpcyB0aGUgbGFzdCBwYWdlXG4gICAgICAgIChyZXNwb25zZVBhZ2VTaXplICYmIHF1ZXJ5UGFnZVNpemUgJiYgcmVzcG9uc2VQYWdlU2l6ZSA8IHF1ZXJ5UGFnZVNpemUpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgICAgfVxuXG4gICAgICBjdXJzb3IgPSByZXNwb25zZS5wYWdpbmdJbmZvPy5jdXJzb3I7XG4gICAgICBpZiAoY3Vyc29yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNlcnZlciBkb2VzIG5vdCByZXR1cm4gY3Vyc29yIHRoZW4gdGhlcmUgaXMgYW4gaXNzdWUsXG4gICAgICAgIC8vIE5lZWQgdG8gYWJvcnQgb3Igd2UgZW5kIHVwIGluIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgY29uc29sZS5sb2coXCJObyBjdXJzb3IgcmV0dXJuZWQgYnkgcGVlci5cIik7XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBkZWNyeXB0aW9uIGtleSB0byBhdHRlbXB0IGRlY3J5cHRpb24gb2YgbWVzc2FnZXMgcmVjZWl2ZWQgaW4gYW55XG4gICAqIHN1YnNlcXVlbnQgW1txdWVyeUhpc3RvcnldXSBjYWxsLiBUaGlzIGNhbiBlaXRoZXIgYmUgYSBwcml2YXRlIGtleSBmb3JcbiAgICogYXN5bW1ldHJpYyBlbmNyeXB0aW9uIG9yIGEgc3ltbWV0cmljIGtleS4gW1tXYWt1U3RvcmVdXSB3aWxsIGF0dGVtcHQgdG9cbiAgICogZGVjcnlwdCBtZXNzYWdlcyB1c2luZyBib3RoIG1ldGhvZHMuXG4gICAqXG4gICAqIFN0cmluZ3MgbXVzdCBiZSBpbiBoZXggZm9ybWF0LlxuICAgKi9cbiAgYWRkRGVjcnlwdGlvbktleShcbiAgICBrZXk6IFVpbnQ4QXJyYXkgfCBzdHJpbmcsXG4gICAgb3B0aW9ucz86IHsgbWV0aG9kPzogRGVjcnlwdGlvbk1ldGhvZDsgY29udGVudFRvcGljcz86IHN0cmluZ1tdIH1cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5kZWNyeXB0aW9uS2V5cy5zZXQoaGV4VG9CeXRlcyhrZXkpLCBvcHRpb25zID8/IHt9KTtcbiAgfVxuXG4gIC8qKmN1cnNvclYyQmV0YTRcbiAgICogRGVsZXRlIGEgZGVjcnlwdGlvbiBrZXkgdGhhdCB3YXMgdXNlZCB0byBhdHRlbXB0IGRlY3J5cHRpb24gb2YgbWVzc2FnZXNcbiAgICogcmVjZWl2ZWQgaW4gc3Vic2VxdWVudCBbW3F1ZXJ5SGlzdG9yeV1dIGNhbGxzLlxuICAgKlxuICAgKiBTdHJpbmdzIG11c3QgYmUgaW4gaGV4IGZvcm1hdC5cbiAgICovXG4gIGRlbGV0ZURlY3J5cHRpb25LZXkoa2V5OiBVaW50OEFycmF5IHwgc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5kZWNyeXB0aW9uS2V5cy5kZWxldGUoaGV4VG9CeXRlcyhrZXkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGtub3duIHBlZXJzIGZyb20gdGhlIGFkZHJlc3MgYm9vayAoYGxpYnAycC5wZWVyU3RvcmVgKSB0aGF0IHN1cHBvcnRcbiAgICogc3RvcmUgcHJvdG9jb2wuIFdha3UgbWF5IG9yICBtYXkgbm90IGJlIGN1cnJlbnRseSBjb25uZWN0ZWQgdG8gdGhlc2UgcGVlcnMuXG4gICAqL1xuICBnZXQgcGVlcnMoKTogQXN5bmNJdGVyYWJsZTxQZWVyPiB7XG4gICAgY29uc3QgY29kZWNzID0gW107XG4gICAgZm9yIChjb25zdCBjb2RlYyBvZiBPYmplY3QudmFsdWVzKFN0b3JlQ29kZWNzKSkge1xuICAgICAgY29kZWNzLnB1c2goY29kZWMpO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRQZWVyc0ZvclByb3RvY29sKHRoaXMubGlicDJwLCBjb2RlY3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByYW5kb20gcGVlciB0aGF0IHN1cHBvcnRzIHN0b3JlIHByb3RvY29sIGZyb20gdGhlIGFkZHJlc3NcbiAgICogYm9vayAoYGxpYnAycC5wZWVyU3RvcmVgKS4gV2FrdSBtYXkgb3IgIG1heSBub3QgYmUgY3VycmVudGx5IGNvbm5lY3RlZCB0b1xuICAgKiB0aGlzIHBlZXIuXG4gICAqL1xuICBnZXQgcmFuZG9tUGVlcigpOiBQcm9taXNlPFBlZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gc2VsZWN0UmFuZG9tUGVlcih0aGlzLnBlZXJzKTtcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbmltcG9ydCBMb25nIGZyb20gXCJsb25nXCI7XG5pbXBvcnQgX20wIGZyb20gXCJwcm90b2J1ZmpzL21pbmltYWxcIjtcbmltcG9ydCB7IFdha3VNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL3dha3UvdjIvbWVzc2FnZVwiO1xuXG5leHBvcnQgY29uc3QgcHJvdG9idWZQYWNrYWdlID0gXCJ3YWt1LnYyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyUmVxdWVzdCB7XG4gIHN1YnNjcmliZTogYm9vbGVhbjtcbiAgdG9waWM6IHN0cmluZztcbiAgY29udGVudEZpbHRlcnM6IEZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlciB7XG4gIGNvbnRlbnRUb3BpYzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VQdXNoIHtcbiAgbWVzc2FnZXM6IFdha3VNZXNzYWdlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyUlBDIHtcbiAgcmVxdWVzdElkOiBzdHJpbmc7XG4gIHJlcXVlc3Q6IEZpbHRlclJlcXVlc3QgfCB1bmRlZmluZWQ7XG4gIHB1c2g6IE1lc3NhZ2VQdXNoIHwgdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCYXNlRmlsdGVyUmVxdWVzdCgpOiBGaWx0ZXJSZXF1ZXN0IHtcbiAgcmV0dXJuIHsgc3Vic2NyaWJlOiBmYWxzZSwgdG9waWM6IFwiXCIsIGNvbnRlbnRGaWx0ZXJzOiBbXSB9O1xufVxuXG5leHBvcnQgY29uc3QgRmlsdGVyUmVxdWVzdCA9IHtcbiAgZW5jb2RlKFxuICAgIG1lc3NhZ2U6IEZpbHRlclJlcXVlc3QsXG4gICAgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKVxuICApOiBfbTAuV3JpdGVyIHtcbiAgICBpZiAobWVzc2FnZS5zdWJzY3JpYmUgPT09IHRydWUpIHtcbiAgICAgIHdyaXRlci51aW50MzIoOCkuYm9vbChtZXNzYWdlLnN1YnNjcmliZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnRvcGljICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50b3BpYyk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmNvbnRlbnRGaWx0ZXJzKSB7XG4gICAgICBGaWx0ZXJSZXF1ZXN0X0NvbnRlbnRGaWx0ZXIuZW5jb2RlKHYhLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuXG4gIGRlY29kZShpbnB1dDogX20wLlJlYWRlciB8IFVpbnQ4QXJyYXksIGxlbmd0aD86IG51bWJlcik6IEZpbHRlclJlcXVlc3Qge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgX20wLlJlYWRlciA/IGlucHV0IDogbmV3IF9tMC5SZWFkZXIoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRmlsdGVyUmVxdWVzdCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5zdWJzY3JpYmUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgbWVzc2FnZS50b3BpYyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIG1lc3NhZ2UuY29udGVudEZpbHRlcnMucHVzaChcbiAgICAgICAgICAgIEZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlci5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuXG4gIGZyb21KU09OKG9iamVjdDogYW55KTogRmlsdGVyUmVxdWVzdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1YnNjcmliZTogaXNTZXQob2JqZWN0LnN1YnNjcmliZSkgPyBCb29sZWFuKG9iamVjdC5zdWJzY3JpYmUpIDogZmFsc2UsXG4gICAgICB0b3BpYzogaXNTZXQob2JqZWN0LnRvcGljKSA/IFN0cmluZyhvYmplY3QudG9waWMpIDogXCJcIixcbiAgICAgIGNvbnRlbnRGaWx0ZXJzOiBBcnJheS5pc0FycmF5KG9iamVjdD8uY29udGVudEZpbHRlcnMpXG4gICAgICAgID8gb2JqZWN0LmNvbnRlbnRGaWx0ZXJzLm1hcCgoZTogYW55KSA9PlxuICAgICAgICAgICAgRmlsdGVyUmVxdWVzdF9Db250ZW50RmlsdGVyLmZyb21KU09OKGUpXG4gICAgICAgICAgKVxuICAgICAgICA6IFtdLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IEZpbHRlclJlcXVlc3QpOiB1bmtub3duIHtcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xuICAgIG1lc3NhZ2Uuc3Vic2NyaWJlICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdWJzY3JpYmUgPSBtZXNzYWdlLnN1YnNjcmliZSk7XG4gICAgbWVzc2FnZS50b3BpYyAhPT0gdW5kZWZpbmVkICYmIChvYmoudG9waWMgPSBtZXNzYWdlLnRvcGljKTtcbiAgICBpZiAobWVzc2FnZS5jb250ZW50RmlsdGVycykge1xuICAgICAgb2JqLmNvbnRlbnRGaWx0ZXJzID0gbWVzc2FnZS5jb250ZW50RmlsdGVycy5tYXAoKGUpID0+XG4gICAgICAgIGUgPyBGaWx0ZXJSZXF1ZXN0X0NvbnRlbnRGaWx0ZXIudG9KU09OKGUpIDogdW5kZWZpbmVkXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmouY29udGVudEZpbHRlcnMgPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBmcm9tUGFydGlhbDxJIGV4dGVuZHMgRXhhY3Q8RGVlcFBhcnRpYWw8RmlsdGVyUmVxdWVzdD4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogRmlsdGVyUmVxdWVzdCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VGaWx0ZXJSZXF1ZXN0KCk7XG4gICAgbWVzc2FnZS5zdWJzY3JpYmUgPSBvYmplY3Quc3Vic2NyaWJlID8/IGZhbHNlO1xuICAgIG1lc3NhZ2UudG9waWMgPSBvYmplY3QudG9waWMgPz8gXCJcIjtcbiAgICBtZXNzYWdlLmNvbnRlbnRGaWx0ZXJzID1cbiAgICAgIG9iamVjdC5jb250ZW50RmlsdGVycz8ubWFwKChlKSA9PlxuICAgICAgICBGaWx0ZXJSZXF1ZXN0X0NvbnRlbnRGaWx0ZXIuZnJvbVBhcnRpYWwoZSlcbiAgICAgICkgfHwgW107XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVCYXNlRmlsdGVyUmVxdWVzdF9Db250ZW50RmlsdGVyKCk6IEZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlciB7XG4gIHJldHVybiB7IGNvbnRlbnRUb3BpYzogXCJcIiB9O1xufVxuXG5leHBvcnQgY29uc3QgRmlsdGVyUmVxdWVzdF9Db250ZW50RmlsdGVyID0ge1xuICBlbmNvZGUoXG4gICAgbWVzc2FnZTogRmlsdGVyUmVxdWVzdF9Db250ZW50RmlsdGVyLFxuICAgIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKClcbiAgKTogX20wLldyaXRlciB7XG4gICAgaWYgKG1lc3NhZ2UuY29udGVudFRvcGljICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5jb250ZW50VG9waWMpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuXG4gIGRlY29kZShcbiAgICBpbnB1dDogX20wLlJlYWRlciB8IFVpbnQ4QXJyYXksXG4gICAgbGVuZ3RoPzogbnVtYmVyXG4gICk6IEZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlciB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VGaWx0ZXJSZXF1ZXN0X0NvbnRlbnRGaWx0ZXIoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIG1lc3NhZ2UuY29udGVudFRvcGljID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBGaWx0ZXJSZXF1ZXN0X0NvbnRlbnRGaWx0ZXIge1xuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50VG9waWM6IGlzU2V0KG9iamVjdC5jb250ZW50VG9waWMpXG4gICAgICAgID8gU3RyaW5nKG9iamVjdC5jb250ZW50VG9waWMpXG4gICAgICAgIDogXCJcIixcbiAgICB9O1xuICB9LFxuXG4gIHRvSlNPTihtZXNzYWdlOiBGaWx0ZXJSZXF1ZXN0X0NvbnRlbnRGaWx0ZXIpOiB1bmtub3duIHtcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xuICAgIG1lc3NhZ2UuY29udGVudFRvcGljICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmouY29udGVudFRvcGljID0gbWVzc2FnZS5jb250ZW50VG9waWMpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPEZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlcj4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogRmlsdGVyUmVxdWVzdF9Db250ZW50RmlsdGVyIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlcigpO1xuICAgIG1lc3NhZ2UuY29udGVudFRvcGljID0gb2JqZWN0LmNvbnRlbnRUb3BpYyA/PyBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQmFzZU1lc3NhZ2VQdXNoKCk6IE1lc3NhZ2VQdXNoIHtcbiAgcmV0dXJuIHsgbWVzc2FnZXM6IFtdIH07XG59XG5cbmV4cG9ydCBjb25zdCBNZXNzYWdlUHVzaCA9IHtcbiAgZW5jb2RlKFxuICAgIG1lc3NhZ2U6IE1lc3NhZ2VQdXNoLFxuICAgIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKClcbiAgKTogX20wLldyaXRlciB7XG4gICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UubWVzc2FnZXMpIHtcbiAgICAgIFdha3VNZXNzYWdlLmVuY29kZSh2ISwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBNZXNzYWdlUHVzaCB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VNZXNzYWdlUHVzaCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5tZXNzYWdlcy5wdXNoKFdha3VNZXNzYWdlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBNZXNzYWdlUHVzaCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2VzOiBBcnJheS5pc0FycmF5KG9iamVjdD8ubWVzc2FnZXMpXG4gICAgICAgID8gb2JqZWN0Lm1lc3NhZ2VzLm1hcCgoZTogYW55KSA9PiBXYWt1TWVzc2FnZS5mcm9tSlNPTihlKSlcbiAgICAgICAgOiBbXSxcbiAgICB9O1xuICB9LFxuXG4gIHRvSlNPTihtZXNzYWdlOiBNZXNzYWdlUHVzaCk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZXMpIHtcbiAgICAgIG9iai5tZXNzYWdlcyA9IG1lc3NhZ2UubWVzc2FnZXMubWFwKChlKSA9PlxuICAgICAgICBlID8gV2FrdU1lc3NhZ2UudG9KU09OKGUpIDogdW5kZWZpbmVkXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmoubWVzc2FnZXMgPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBmcm9tUGFydGlhbDxJIGV4dGVuZHMgRXhhY3Q8RGVlcFBhcnRpYWw8TWVzc2FnZVB1c2g+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IE1lc3NhZ2VQdXNoIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU1lc3NhZ2VQdXNoKCk7XG4gICAgbWVzc2FnZS5tZXNzYWdlcyA9XG4gICAgICBvYmplY3QubWVzc2FnZXM/Lm1hcCgoZSkgPT4gV2FrdU1lc3NhZ2UuZnJvbVBhcnRpYWwoZSkpIHx8IFtdO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQmFzZUZpbHRlclJQQygpOiBGaWx0ZXJSUEMge1xuICByZXR1cm4geyByZXF1ZXN0SWQ6IFwiXCIsIHJlcXVlc3Q6IHVuZGVmaW5lZCwgcHVzaDogdW5kZWZpbmVkIH07XG59XG5cbmV4cG9ydCBjb25zdCBGaWx0ZXJSUEMgPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBGaWx0ZXJSUEMsXG4gICAgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKVxuICApOiBfbTAuV3JpdGVyIHtcbiAgICBpZiAobWVzc2FnZS5yZXF1ZXN0SWQgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJlcXVlc3RJZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJlcXVlc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgRmlsdGVyUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5yZXF1ZXN0LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5wdXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIE1lc3NhZ2VQdXNoLmVuY29kZShtZXNzYWdlLnB1c2gsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG5cbiAgZGVjb2RlKGlucHV0OiBfbTAuUmVhZGVyIHwgVWludDhBcnJheSwgbGVuZ3RoPzogbnVtYmVyKTogRmlsdGVyUlBDIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIF9tMC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBfbTAuUmVhZGVyKGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUZpbHRlclJQQygpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5yZXF1ZXN0SWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBtZXNzYWdlLnJlcXVlc3QgPSBGaWx0ZXJSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBtZXNzYWdlLnB1c2ggPSBNZXNzYWdlUHVzaC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBGaWx0ZXJSUEMge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1ZXN0SWQ6IGlzU2V0KG9iamVjdC5yZXF1ZXN0SWQpID8gU3RyaW5nKG9iamVjdC5yZXF1ZXN0SWQpIDogXCJcIixcbiAgICAgIHJlcXVlc3Q6IGlzU2V0KG9iamVjdC5yZXF1ZXN0KVxuICAgICAgICA/IEZpbHRlclJlcXVlc3QuZnJvbUpTT04ob2JqZWN0LnJlcXVlc3QpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgcHVzaDogaXNTZXQob2JqZWN0LnB1c2gpID8gTWVzc2FnZVB1c2guZnJvbUpTT04ob2JqZWN0LnB1c2gpIDogdW5kZWZpbmVkLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IEZpbHRlclJQQyk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgbWVzc2FnZS5yZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlcXVlc3RJZCA9IG1lc3NhZ2UucmVxdWVzdElkKTtcbiAgICBtZXNzYWdlLnJlcXVlc3QgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5yZXF1ZXN0ID0gbWVzc2FnZS5yZXF1ZXN0XG4gICAgICAgID8gRmlsdGVyUmVxdWVzdC50b0pTT04obWVzc2FnZS5yZXF1ZXN0KVxuICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgbWVzc2FnZS5wdXNoICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmoucHVzaCA9IG1lc3NhZ2UucHVzaCA/IE1lc3NhZ2VQdXNoLnRvSlNPTihtZXNzYWdlLnB1c2gpIDogdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LFxuXG4gIGZyb21QYXJ0aWFsPEkgZXh0ZW5kcyBFeGFjdDxEZWVwUGFydGlhbDxGaWx0ZXJSUEM+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IEZpbHRlclJQQyB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VGaWx0ZXJSUEMoKTtcbiAgICBtZXNzYWdlLnJlcXVlc3RJZCA9IG9iamVjdC5yZXF1ZXN0SWQgPz8gXCJcIjtcbiAgICBtZXNzYWdlLnJlcXVlc3QgPVxuICAgICAgb2JqZWN0LnJlcXVlc3QgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVxdWVzdCAhPT0gbnVsbFxuICAgICAgICA/IEZpbHRlclJlcXVlc3QuZnJvbVBhcnRpYWwob2JqZWN0LnJlcXVlc3QpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UucHVzaCA9XG4gICAgICBvYmplY3QucHVzaCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wdXNoICE9PSBudWxsXG4gICAgICAgID8gTWVzc2FnZVB1c2guZnJvbVBhcnRpYWwob2JqZWN0LnB1c2gpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxudHlwZSBCdWlsdGluID1cbiAgfCBEYXRlXG4gIHwgRnVuY3Rpb25cbiAgfCBVaW50OEFycmF5XG4gIHwgc3RyaW5nXG4gIHwgbnVtYmVyXG4gIHwgYm9vbGVhblxuICB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgRGVlcFBhcnRpYWw8VD4gPSBUIGV4dGVuZHMgQnVpbHRpblxuICA/IFRcbiAgOiBUIGV4dGVuZHMgTG9uZ1xuICA/IHN0cmluZyB8IG51bWJlciB8IExvbmdcbiAgOiBUIGV4dGVuZHMgQXJyYXk8aW5mZXIgVT5cbiAgPyBBcnJheTxEZWVwUGFydGlhbDxVPj5cbiAgOiBUIGV4dGVuZHMgUmVhZG9ubHlBcnJheTxpbmZlciBVPlxuICA/IFJlYWRvbmx5QXJyYXk8RGVlcFBhcnRpYWw8VT4+XG4gIDogVCBleHRlbmRzIHt9XG4gID8geyBbSyBpbiBrZXlvZiBUXT86IERlZXBQYXJ0aWFsPFRbS10+IH1cbiAgOiBQYXJ0aWFsPFQ+O1xuXG50eXBlIEtleXNPZlVuaW9uPFQ+ID0gVCBleHRlbmRzIFQgPyBrZXlvZiBUIDogbmV2ZXI7XG5leHBvcnQgdHlwZSBFeGFjdDxQLCBJIGV4dGVuZHMgUD4gPSBQIGV4dGVuZHMgQnVpbHRpblxuICA/IFBcbiAgOiBQICYgeyBbSyBpbiBrZXlvZiBQXTogRXhhY3Q8UFtLXSwgSVtLXT4gfSAmIFJlY29yZDxcbiAgICAgICAgRXhjbHVkZTxrZXlvZiBJLCBLZXlzT2ZVbmlvbjxQPj4sXG4gICAgICAgIG5ldmVyXG4gICAgICA+O1xuXG5pZiAoX20wLnV0aWwuTG9uZyAhPT0gTG9uZykge1xuICBfbTAudXRpbC5Mb25nID0gTG9uZyBhcyBhbnk7XG4gIF9tMC5jb25maWd1cmUoKTtcbn1cblxuZnVuY3Rpb24gaXNTZXQodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG5pbXBvcnQgTG9uZyBmcm9tIFwibG9uZ1wiO1xuaW1wb3J0IF9tMCBmcm9tIFwicHJvdG9idWZqcy9taW5pbWFsXCI7XG5pbXBvcnQgeyBXYWt1TWVzc2FnZSB9IGZyb20gXCIuLi8uLi93YWt1L3YyL21lc3NhZ2VcIjtcblxuZXhwb3J0IGNvbnN0IHByb3RvYnVmUGFja2FnZSA9IFwid2FrdS52MlwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFB1c2hSZXF1ZXN0IHtcbiAgcHViU3ViVG9waWM6IHN0cmluZztcbiAgbWVzc2FnZTogV2FrdU1lc3NhZ2UgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHVzaFJlc3BvbnNlIHtcbiAgaXNTdWNjZXNzOiBib29sZWFuO1xuICBpbmZvOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHVzaFJQQyB7XG4gIHJlcXVlc3RJZDogc3RyaW5nO1xuICByZXF1ZXN0OiBQdXNoUmVxdWVzdCB8IHVuZGVmaW5lZDtcbiAgcmVzcG9uc2U6IFB1c2hSZXNwb25zZSB8IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzZVB1c2hSZXF1ZXN0KCk6IFB1c2hSZXF1ZXN0IHtcbiAgcmV0dXJuIHsgcHViU3ViVG9waWM6IFwiXCIsIG1lc3NhZ2U6IHVuZGVmaW5lZCB9O1xufVxuXG5leHBvcnQgY29uc3QgUHVzaFJlcXVlc3QgPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBQdXNoUmVxdWVzdCxcbiAgICB3cml0ZXI6IF9tMC5Xcml0ZXIgPSBfbTAuV3JpdGVyLmNyZWF0ZSgpXG4gICk6IF9tMC5Xcml0ZXIge1xuICAgIGlmIChtZXNzYWdlLnB1YlN1YlRvcGljICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5wdWJTdWJUb3BpYyk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgV2FrdU1lc3NhZ2UuZW5jb2RlKG1lc3NhZ2UubWVzc2FnZSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBQdXNoUmVxdWVzdCB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQdXNoUmVxdWVzdCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5wdWJTdWJUb3BpYyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZSA9IFdha3VNZXNzYWdlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcblxuICBmcm9tSlNPTihvYmplY3Q6IGFueSk6IFB1c2hSZXF1ZXN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgcHViU3ViVG9waWM6IGlzU2V0KG9iamVjdC5wdWJTdWJUb3BpYykgPyBTdHJpbmcob2JqZWN0LnB1YlN1YlRvcGljKSA6IFwiXCIsXG4gICAgICBtZXNzYWdlOiBpc1NldChvYmplY3QubWVzc2FnZSlcbiAgICAgICAgPyBXYWt1TWVzc2FnZS5mcm9tSlNPTihvYmplY3QubWVzc2FnZSlcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgfSxcblxuICB0b0pTT04obWVzc2FnZTogUHVzaFJlcXVlc3QpOiB1bmtub3duIHtcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xuICAgIG1lc3NhZ2UucHViU3ViVG9waWMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5wdWJTdWJUb3BpYyA9IG1lc3NhZ2UucHViU3ViVG9waWMpO1xuICAgIG1lc3NhZ2UubWVzc2FnZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLm1lc3NhZ2UgPSBtZXNzYWdlLm1lc3NhZ2VcbiAgICAgICAgPyBXYWt1TWVzc2FnZS50b0pTT04obWVzc2FnZS5tZXNzYWdlKVxuICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBmcm9tUGFydGlhbDxJIGV4dGVuZHMgRXhhY3Q8RGVlcFBhcnRpYWw8UHVzaFJlcXVlc3Q+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IFB1c2hSZXF1ZXN0IHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVB1c2hSZXF1ZXN0KCk7XG4gICAgbWVzc2FnZS5wdWJTdWJUb3BpYyA9IG9iamVjdC5wdWJTdWJUb3BpYyA/PyBcIlwiO1xuICAgIG1lc3NhZ2UubWVzc2FnZSA9XG4gICAgICBvYmplY3QubWVzc2FnZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5tZXNzYWdlICE9PSBudWxsXG4gICAgICAgID8gV2FrdU1lc3NhZ2UuZnJvbVBhcnRpYWwob2JqZWN0Lm1lc3NhZ2UpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQmFzZVB1c2hSZXNwb25zZSgpOiBQdXNoUmVzcG9uc2Uge1xuICByZXR1cm4geyBpc1N1Y2Nlc3M6IGZhbHNlLCBpbmZvOiBcIlwiIH07XG59XG5cbmV4cG9ydCBjb25zdCBQdXNoUmVzcG9uc2UgPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBQdXNoUmVzcG9uc2UsXG4gICAgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKVxuICApOiBfbTAuV3JpdGVyIHtcbiAgICBpZiAobWVzc2FnZS5pc1N1Y2Nlc3MgPT09IHRydWUpIHtcbiAgICAgIHdyaXRlci51aW50MzIoOCkuYm9vbChtZXNzYWdlLmlzU3VjY2Vzcyk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmluZm8gIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmluZm8pO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuXG4gIGRlY29kZShpbnB1dDogX20wLlJlYWRlciB8IFVpbnQ4QXJyYXksIGxlbmd0aD86IG51bWJlcik6IFB1c2hSZXNwb25zZSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQdXNoUmVzcG9uc2UoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIG1lc3NhZ2UuaXNTdWNjZXNzID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UuaW5mbyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuXG4gIGZyb21KU09OKG9iamVjdDogYW55KTogUHVzaFJlc3BvbnNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNTdWNjZXNzOiBpc1NldChvYmplY3QuaXNTdWNjZXNzKSA/IEJvb2xlYW4ob2JqZWN0LmlzU3VjY2VzcykgOiBmYWxzZSxcbiAgICAgIGluZm86IGlzU2V0KG9iamVjdC5pbmZvKSA/IFN0cmluZyhvYmplY3QuaW5mbykgOiBcIlwiLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IFB1c2hSZXNwb25zZSk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgbWVzc2FnZS5pc1N1Y2Nlc3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlzU3VjY2VzcyA9IG1lc3NhZ2UuaXNTdWNjZXNzKTtcbiAgICBtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZm8gPSBtZXNzYWdlLmluZm8pO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPFB1c2hSZXNwb25zZT4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogUHVzaFJlc3BvbnNlIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVB1c2hSZXNwb25zZSgpO1xuICAgIG1lc3NhZ2UuaXNTdWNjZXNzID0gb2JqZWN0LmlzU3VjY2VzcyA/PyBmYWxzZTtcbiAgICBtZXNzYWdlLmluZm8gPSBvYmplY3QuaW5mbyA/PyBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQmFzZVB1c2hSUEMoKTogUHVzaFJQQyB7XG4gIHJldHVybiB7IHJlcXVlc3RJZDogXCJcIiwgcmVxdWVzdDogdW5kZWZpbmVkLCByZXNwb25zZTogdW5kZWZpbmVkIH07XG59XG5cbmV4cG9ydCBjb25zdCBQdXNoUlBDID0ge1xuICBlbmNvZGUoXG4gICAgbWVzc2FnZTogUHVzaFJQQyxcbiAgICB3cml0ZXI6IF9tMC5Xcml0ZXIgPSBfbTAuV3JpdGVyLmNyZWF0ZSgpXG4gICk6IF9tMC5Xcml0ZXIge1xuICAgIGlmIChtZXNzYWdlLnJlcXVlc3RJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UucmVxdWVzdElkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucmVxdWVzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBQdXNoUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5yZXF1ZXN0LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5yZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBQdXNoUmVzcG9uc2UuZW5jb2RlKG1lc3NhZ2UucmVzcG9uc2UsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG5cbiAgZGVjb2RlKGlucHV0OiBfbTAuUmVhZGVyIHwgVWludDhBcnJheSwgbGVuZ3RoPzogbnVtYmVyKTogUHVzaFJQQyB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQdXNoUlBDKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdCA9IFB1c2hSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBtZXNzYWdlLnJlc3BvbnNlID0gUHVzaFJlc3BvbnNlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcblxuICBmcm9tSlNPTihvYmplY3Q6IGFueSk6IFB1c2hSUEMge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1ZXN0SWQ6IGlzU2V0KG9iamVjdC5yZXF1ZXN0SWQpID8gU3RyaW5nKG9iamVjdC5yZXF1ZXN0SWQpIDogXCJcIixcbiAgICAgIHJlcXVlc3Q6IGlzU2V0KG9iamVjdC5yZXF1ZXN0KVxuICAgICAgICA/IFB1c2hSZXF1ZXN0LmZyb21KU09OKG9iamVjdC5yZXF1ZXN0KVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIHJlc3BvbnNlOiBpc1NldChvYmplY3QucmVzcG9uc2UpXG4gICAgICAgID8gUHVzaFJlc3BvbnNlLmZyb21KU09OKG9iamVjdC5yZXNwb25zZSlcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgfSxcblxuICB0b0pTT04obWVzc2FnZTogUHVzaFJQQyk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgbWVzc2FnZS5yZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlcXVlc3RJZCA9IG1lc3NhZ2UucmVxdWVzdElkKTtcbiAgICBtZXNzYWdlLnJlcXVlc3QgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5yZXF1ZXN0ID0gbWVzc2FnZS5yZXF1ZXN0XG4gICAgICAgID8gUHVzaFJlcXVlc3QudG9KU09OKG1lc3NhZ2UucmVxdWVzdClcbiAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgIG1lc3NhZ2UucmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5yZXNwb25zZSA9IG1lc3NhZ2UucmVzcG9uc2VcbiAgICAgICAgPyBQdXNoUmVzcG9uc2UudG9KU09OKG1lc3NhZ2UucmVzcG9uc2UpXG4gICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LFxuXG4gIGZyb21QYXJ0aWFsPEkgZXh0ZW5kcyBFeGFjdDxEZWVwUGFydGlhbDxQdXNoUlBDPiwgST4+KG9iamVjdDogSSk6IFB1c2hSUEMge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUHVzaFJQQygpO1xuICAgIG1lc3NhZ2UucmVxdWVzdElkID0gb2JqZWN0LnJlcXVlc3RJZCA/PyBcIlwiO1xuICAgIG1lc3NhZ2UucmVxdWVzdCA9XG4gICAgICBvYmplY3QucmVxdWVzdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXF1ZXN0ICE9PSBudWxsXG4gICAgICAgID8gUHVzaFJlcXVlc3QuZnJvbVBhcnRpYWwob2JqZWN0LnJlcXVlc3QpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UucmVzcG9uc2UgPVxuICAgICAgb2JqZWN0LnJlc3BvbnNlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJlc3BvbnNlICE9PSBudWxsXG4gICAgICAgID8gUHVzaFJlc3BvbnNlLmZyb21QYXJ0aWFsKG9iamVjdC5yZXNwb25zZSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG59O1xuXG50eXBlIEJ1aWx0aW4gPVxuICB8IERhdGVcbiAgfCBGdW5jdGlvblxuICB8IFVpbnQ4QXJyYXlcbiAgfCBzdHJpbmdcbiAgfCBudW1iZXJcbiAgfCBib29sZWFuXG4gIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgdHlwZSBEZWVwUGFydGlhbDxUPiA9IFQgZXh0ZW5kcyBCdWlsdGluXG4gID8gVFxuICA6IFQgZXh0ZW5kcyBMb25nXG4gID8gc3RyaW5nIHwgbnVtYmVyIHwgTG9uZ1xuICA6IFQgZXh0ZW5kcyBBcnJheTxpbmZlciBVPlxuICA/IEFycmF5PERlZXBQYXJ0aWFsPFU+PlxuICA6IFQgZXh0ZW5kcyBSZWFkb25seUFycmF5PGluZmVyIFU+XG4gID8gUmVhZG9ubHlBcnJheTxEZWVwUGFydGlhbDxVPj5cbiAgOiBUIGV4dGVuZHMge31cbiAgPyB7IFtLIGluIGtleW9mIFRdPzogRGVlcFBhcnRpYWw8VFtLXT4gfVxuICA6IFBhcnRpYWw8VD47XG5cbnR5cGUgS2V5c09mVW5pb248VD4gPSBUIGV4dGVuZHMgVCA/IGtleW9mIFQgOiBuZXZlcjtcbmV4cG9ydCB0eXBlIEV4YWN0PFAsIEkgZXh0ZW5kcyBQPiA9IFAgZXh0ZW5kcyBCdWlsdGluXG4gID8gUFxuICA6IFAgJiB7IFtLIGluIGtleW9mIFBdOiBFeGFjdDxQW0tdLCBJW0tdPiB9ICYgUmVjb3JkPFxuICAgICAgICBFeGNsdWRlPGtleW9mIEksIEtleXNPZlVuaW9uPFA+PixcbiAgICAgICAgbmV2ZXJcbiAgICAgID47XG5cbmlmIChfbTAudXRpbC5Mb25nICE9PSBMb25nKSB7XG4gIF9tMC51dGlsLkxvbmcgPSBMb25nIGFzIGFueTtcbiAgX20wLmNvbmZpZ3VyZSgpO1xufVxuXG5mdW5jdGlvbiBpc1NldCh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbmltcG9ydCBMb25nIGZyb20gXCJsb25nXCI7XG5pbXBvcnQgX20wIGZyb20gXCJwcm90b2J1ZmpzL21pbmltYWxcIjtcblxuZXhwb3J0IGNvbnN0IHByb3RvYnVmUGFja2FnZSA9IFwid2FrdS52MlwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdha3VNZXNzYWdlIHtcbiAgcGF5bG9hZD86IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQ7XG4gIGNvbnRlbnRUb3BpYz86IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgdmVyc2lvbj86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgdGltZXN0YW1wRGVwcmVjYXRlZD86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgdGltZXN0YW1wPzogTG9uZyB8IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzZVdha3VNZXNzYWdlKCk6IFdha3VNZXNzYWdlIHtcbiAgcmV0dXJuIHtcbiAgICBwYXlsb2FkOiB1bmRlZmluZWQsXG4gICAgY29udGVudFRvcGljOiB1bmRlZmluZWQsXG4gICAgdmVyc2lvbjogdW5kZWZpbmVkLFxuICAgIHRpbWVzdGFtcERlcHJlY2F0ZWQ6IHVuZGVmaW5lZCxcbiAgICB0aW1lc3RhbXA6IHVuZGVmaW5lZCxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IFdha3VNZXNzYWdlID0ge1xuICBlbmNvZGUoXG4gICAgbWVzc2FnZTogV2FrdU1lc3NhZ2UsXG4gICAgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKVxuICApOiBfbTAuV3JpdGVyIHtcbiAgICBpZiAobWVzc2FnZS5wYXlsb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLmJ5dGVzKG1lc3NhZ2UucGF5bG9hZCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmNvbnRlbnRUb3BpYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5jb250ZW50VG9waWMpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS52ZXJzaW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLnZlcnNpb24pO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50aW1lc3RhbXBEZXByZWNhdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMzMpLmRvdWJsZShtZXNzYWdlLnRpbWVzdGFtcERlcHJlY2F0ZWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS50aW1lc3RhbXAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgd3JpdGVyLnVpbnQzMig4MCkuc2ludDY0KG1lc3NhZ2UudGltZXN0YW1wKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBXYWt1TWVzc2FnZSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VXYWt1TWVzc2FnZSgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5wYXlsb2FkID0gcmVhZGVyLmJ5dGVzKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBtZXNzYWdlLmNvbnRlbnRUb3BpYyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wRGVwcmVjYXRlZCA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IHJlYWRlci5zaW50NjQoKSBhcyBMb25nO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBXYWt1TWVzc2FnZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBheWxvYWQ6IGlzU2V0KG9iamVjdC5wYXlsb2FkKVxuICAgICAgICA/IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QucGF5bG9hZClcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBjb250ZW50VG9waWM6IGlzU2V0KG9iamVjdC5jb250ZW50VG9waWMpXG4gICAgICAgID8gU3RyaW5nKG9iamVjdC5jb250ZW50VG9waWMpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgdmVyc2lvbjogaXNTZXQob2JqZWN0LnZlcnNpb24pID8gTnVtYmVyKG9iamVjdC52ZXJzaW9uKSA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcERlcHJlY2F0ZWQ6IGlzU2V0KG9iamVjdC50aW1lc3RhbXBEZXByZWNhdGVkKVxuICAgICAgICA/IE51bWJlcihvYmplY3QudGltZXN0YW1wRGVwcmVjYXRlZClcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IGlzU2V0KG9iamVjdC50aW1lc3RhbXApXG4gICAgICAgID8gTG9uZy5mcm9tU3RyaW5nKG9iamVjdC50aW1lc3RhbXApXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IFdha3VNZXNzYWdlKTogdW5rbm93biB7XG4gICAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcbiAgICBtZXNzYWdlLnBheWxvYWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5wYXlsb2FkID1cbiAgICAgICAgbWVzc2FnZS5wYXlsb2FkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLnBheWxvYWQpXG4gICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgIG1lc3NhZ2UuY29udGVudFRvcGljICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmouY29udGVudFRvcGljID0gbWVzc2FnZS5jb250ZW50VG9waWMpO1xuICAgIG1lc3NhZ2UudmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLnZlcnNpb24gPSBNYXRoLnJvdW5kKG1lc3NhZ2UudmVyc2lvbikpO1xuICAgIG1lc3NhZ2UudGltZXN0YW1wRGVwcmVjYXRlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLnRpbWVzdGFtcERlcHJlY2F0ZWQgPSBtZXNzYWdlLnRpbWVzdGFtcERlcHJlY2F0ZWQpO1xuICAgIG1lc3NhZ2UudGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmoudGltZXN0YW1wID0gKG1lc3NhZ2UudGltZXN0YW1wIHx8IHVuZGVmaW5lZCkudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBmcm9tUGFydGlhbDxJIGV4dGVuZHMgRXhhY3Q8RGVlcFBhcnRpYWw8V2FrdU1lc3NhZ2U+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IFdha3VNZXNzYWdlIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVdha3VNZXNzYWdlKCk7XG4gICAgbWVzc2FnZS5wYXlsb2FkID0gb2JqZWN0LnBheWxvYWQgPz8gdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UuY29udGVudFRvcGljID0gb2JqZWN0LmNvbnRlbnRUb3BpYyA/PyB1bmRlZmluZWQ7XG4gICAgbWVzc2FnZS52ZXJzaW9uID0gb2JqZWN0LnZlcnNpb24gPz8gdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UudGltZXN0YW1wRGVwcmVjYXRlZCA9IG9iamVjdC50aW1lc3RhbXBEZXByZWNhdGVkID8/IHVuZGVmaW5lZDtcbiAgICBtZXNzYWdlLnRpbWVzdGFtcCA9XG4gICAgICBvYmplY3QudGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRpbWVzdGFtcCAhPT0gbnVsbFxuICAgICAgICA/IExvbmcuZnJvbVZhbHVlKG9iamVjdC50aW1lc3RhbXApXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZGVjbGFyZSB2YXIgc2VsZjogYW55IHwgdW5kZWZpbmVkO1xuZGVjbGFyZSB2YXIgd2luZG93OiBhbnkgfCB1bmRlZmluZWQ7XG5kZWNsYXJlIHZhciBnbG9iYWw6IGFueSB8IHVuZGVmaW5lZDtcbnZhciBnbG9iYWxUaGlzOiBhbnkgPSAoKCkgPT4ge1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBnbG9iYWxUaGlzO1xuICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBzZWxmO1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHdpbmRvdztcbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBnbG9iYWw7XG4gIHRocm93IFwiVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0XCI7XG59KSgpO1xuXG5jb25zdCBhdG9iOiAoYjY0OiBzdHJpbmcpID0+IHN0cmluZyA9XG4gIGdsb2JhbFRoaXMuYXRvYiB8fFxuICAoKGI2NCkgPT4gZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShiNjQsIFwiYmFzZTY0XCIpLnRvU3RyaW5nKFwiYmluYXJ5XCIpKTtcbmZ1bmN0aW9uIGJ5dGVzRnJvbUJhc2U2NChiNjQ6IHN0cmluZyk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBiaW4gPSBhdG9iKGI2NCk7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KGJpbi5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbi5sZW5ndGg7ICsraSkge1xuICAgIGFycltpXSA9IGJpbi5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIHJldHVybiBhcnI7XG59XG5cbmNvbnN0IGJ0b2E6IChiaW46IHN0cmluZykgPT4gc3RyaW5nID1cbiAgZ2xvYmFsVGhpcy5idG9hIHx8XG4gICgoYmluKSA9PiBnbG9iYWxUaGlzLkJ1ZmZlci5mcm9tKGJpbiwgXCJiaW5hcnlcIikudG9TdHJpbmcoXCJiYXNlNjRcIikpO1xuZnVuY3Rpb24gYmFzZTY0RnJvbUJ5dGVzKGFycjogVWludDhBcnJheSk6IHN0cmluZyB7XG4gIGNvbnN0IGJpbjogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBieXRlIG9mIGFycikge1xuICAgIGJpbi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSkpO1xuICB9XG4gIHJldHVybiBidG9hKGJpbi5qb2luKFwiXCIpKTtcbn1cblxudHlwZSBCdWlsdGluID1cbiAgfCBEYXRlXG4gIHwgRnVuY3Rpb25cbiAgfCBVaW50OEFycmF5XG4gIHwgc3RyaW5nXG4gIHwgbnVtYmVyXG4gIHwgYm9vbGVhblxuICB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgRGVlcFBhcnRpYWw8VD4gPSBUIGV4dGVuZHMgQnVpbHRpblxuICA/IFRcbiAgOiBUIGV4dGVuZHMgTG9uZ1xuICA/IHN0cmluZyB8IG51bWJlciB8IExvbmdcbiAgOiBUIGV4dGVuZHMgQXJyYXk8aW5mZXIgVT5cbiAgPyBBcnJheTxEZWVwUGFydGlhbDxVPj5cbiAgOiBUIGV4dGVuZHMgUmVhZG9ubHlBcnJheTxpbmZlciBVPlxuICA/IFJlYWRvbmx5QXJyYXk8RGVlcFBhcnRpYWw8VT4+XG4gIDogVCBleHRlbmRzIHt9XG4gID8geyBbSyBpbiBrZXlvZiBUXT86IERlZXBQYXJ0aWFsPFRbS10+IH1cbiAgOiBQYXJ0aWFsPFQ+O1xuXG50eXBlIEtleXNPZlVuaW9uPFQ+ID0gVCBleHRlbmRzIFQgPyBrZXlvZiBUIDogbmV2ZXI7XG5leHBvcnQgdHlwZSBFeGFjdDxQLCBJIGV4dGVuZHMgUD4gPSBQIGV4dGVuZHMgQnVpbHRpblxuICA/IFBcbiAgOiBQICYgeyBbSyBpbiBrZXlvZiBQXTogRXhhY3Q8UFtLXSwgSVtLXT4gfSAmIFJlY29yZDxcbiAgICAgICAgRXhjbHVkZTxrZXlvZiBJLCBLZXlzT2ZVbmlvbjxQPj4sXG4gICAgICAgIG5ldmVyXG4gICAgICA+O1xuXG5pZiAoX20wLnV0aWwuTG9uZyAhPT0gTG9uZykge1xuICBfbTAudXRpbC5Mb25nID0gTG9uZyBhcyBhbnk7XG4gIF9tMC5jb25maWd1cmUoKTtcbn1cblxuZnVuY3Rpb24gaXNTZXQodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG5pbXBvcnQgTG9uZyBmcm9tIFwibG9uZ1wiO1xuaW1wb3J0IF9tMCBmcm9tIFwicHJvdG9idWZqcy9taW5pbWFsXCI7XG5pbXBvcnQgeyBXYWt1TWVzc2FnZSB9IGZyb20gXCIuLi8uLi8uLi8uLi93YWt1L3YyL21lc3NhZ2VcIjtcblxuZXhwb3J0IGNvbnN0IHByb3RvYnVmUGFja2FnZSA9IFwid2FrdS52Mi5zdG9yZS52MmJldGEzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5kZXgge1xuICBkaWdlc3Q6IFVpbnQ4QXJyYXk7XG4gIHJlY2VpdmVkVGltZTogbnVtYmVyO1xuICBzZW5kZXJUaW1lOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5nSW5mbyB7XG4gIHBhZ2VTaXplOiBMb25nO1xuICBjdXJzb3I6IEluZGV4IHwgdW5kZWZpbmVkO1xuICBkaXJlY3Rpb246IFBhZ2luZ0luZm9fRGlyZWN0aW9uO1xufVxuXG5leHBvcnQgZW51bSBQYWdpbmdJbmZvX0RpcmVjdGlvbiB7XG4gIERJUkVDVElPTl9CQUNLV0FSRF9VTlNQRUNJRklFRCA9IDAsXG4gIERJUkVDVElPTl9GT1JXQVJEID0gMSxcbiAgVU5SRUNPR05JWkVEID0gLTEsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWdpbmdJbmZvX0RpcmVjdGlvbkZyb21KU09OKFxuICBvYmplY3Q6IGFueVxuKTogUGFnaW5nSW5mb19EaXJlY3Rpb24ge1xuICBzd2l0Y2ggKG9iamVjdCkge1xuICAgIGNhc2UgMDpcbiAgICBjYXNlIFwiRElSRUNUSU9OX0JBQ0tXQVJEX1VOU1BFQ0lGSUVEXCI6XG4gICAgICByZXR1cm4gUGFnaW5nSW5mb19EaXJlY3Rpb24uRElSRUNUSU9OX0JBQ0tXQVJEX1VOU1BFQ0lGSUVEO1xuICAgIGNhc2UgMTpcbiAgICBjYXNlIFwiRElSRUNUSU9OX0ZPUldBUkRcIjpcbiAgICAgIHJldHVybiBQYWdpbmdJbmZvX0RpcmVjdGlvbi5ESVJFQ1RJT05fRk9SV0FSRDtcbiAgICBjYXNlIC0xOlxuICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFBhZ2luZ0luZm9fRGlyZWN0aW9uLlVOUkVDT0dOSVpFRDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFnaW5nSW5mb19EaXJlY3Rpb25Ub0pTT04oXG4gIG9iamVjdDogUGFnaW5nSW5mb19EaXJlY3Rpb25cbik6IHN0cmluZyB7XG4gIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgY2FzZSBQYWdpbmdJbmZvX0RpcmVjdGlvbi5ESVJFQ1RJT05fQkFDS1dBUkRfVU5TUEVDSUZJRUQ6XG4gICAgICByZXR1cm4gXCJESVJFQ1RJT05fQkFDS1dBUkRfVU5TUEVDSUZJRURcIjtcbiAgICBjYXNlIFBhZ2luZ0luZm9fRGlyZWN0aW9uLkRJUkVDVElPTl9GT1JXQVJEOlxuICAgICAgcmV0dXJuIFwiRElSRUNUSU9OX0ZPUldBUkRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiVU5LTk9XTlwiO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGVudEZpbHRlciB7XG4gIGNvbnRlbnRUb3BpYzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhpc3RvcnlRdWVyeSB7XG4gIHB1YlN1YlRvcGljPzogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBjb250ZW50RmlsdGVyczogQ29udGVudEZpbHRlcltdO1xuICBwYWdpbmdJbmZvPzogUGFnaW5nSW5mbyB8IHVuZGVmaW5lZDtcbiAgc3RhcnRUaW1lPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBlbmRUaW1lPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhpc3RvcnlSZXNwb25zZSB7XG4gIG1lc3NhZ2VzOiBXYWt1TWVzc2FnZVtdO1xuICBwYWdpbmdJbmZvOiBQYWdpbmdJbmZvIHwgdW5kZWZpbmVkO1xuICBlcnJvcjogSGlzdG9yeVJlc3BvbnNlX0Vycm9yO1xufVxuXG5leHBvcnQgZW51bSBIaXN0b3J5UmVzcG9uc2VfRXJyb3Ige1xuICBFUlJPUl9OT05FX1VOU1BFQ0lGSUVEID0gMCxcbiAgRVJST1JfSU5WQUxJRF9DVVJTT1IgPSAxLFxuICBVTlJFQ09HTklaRUQgPSAtMSxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpc3RvcnlSZXNwb25zZV9FcnJvckZyb21KU09OKFxuICBvYmplY3Q6IGFueVxuKTogSGlzdG9yeVJlc3BvbnNlX0Vycm9yIHtcbiAgc3dpdGNoIChvYmplY3QpIHtcbiAgICBjYXNlIDA6XG4gICAgY2FzZSBcIkVSUk9SX05PTkVfVU5TUEVDSUZJRURcIjpcbiAgICAgIHJldHVybiBIaXN0b3J5UmVzcG9uc2VfRXJyb3IuRVJST1JfTk9ORV9VTlNQRUNJRklFRDtcbiAgICBjYXNlIDE6XG4gICAgY2FzZSBcIkVSUk9SX0lOVkFMSURfQ1VSU09SXCI6XG4gICAgICByZXR1cm4gSGlzdG9yeVJlc3BvbnNlX0Vycm9yLkVSUk9SX0lOVkFMSURfQ1VSU09SO1xuICAgIGNhc2UgLTE6XG4gICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gSGlzdG9yeVJlc3BvbnNlX0Vycm9yLlVOUkVDT0dOSVpFRDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlzdG9yeVJlc3BvbnNlX0Vycm9yVG9KU09OKFxuICBvYmplY3Q6IEhpc3RvcnlSZXNwb25zZV9FcnJvclxuKTogc3RyaW5nIHtcbiAgc3dpdGNoIChvYmplY3QpIHtcbiAgICBjYXNlIEhpc3RvcnlSZXNwb25zZV9FcnJvci5FUlJPUl9OT05FX1VOU1BFQ0lGSUVEOlxuICAgICAgcmV0dXJuIFwiRVJST1JfTk9ORV9VTlNQRUNJRklFRFwiO1xuICAgIGNhc2UgSGlzdG9yeVJlc3BvbnNlX0Vycm9yLkVSUk9SX0lOVkFMSURfQ1VSU09SOlxuICAgICAgcmV0dXJuIFwiRVJST1JfSU5WQUxJRF9DVVJTT1JcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiVU5LTk9XTlwiO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlzdG9yeVJQQyB7XG4gIHJlcXVlc3RJZDogc3RyaW5nO1xuICBxdWVyeTogSGlzdG9yeVF1ZXJ5IHwgdW5kZWZpbmVkO1xuICByZXNwb25zZTogSGlzdG9yeVJlc3BvbnNlIHwgdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCYXNlSW5kZXgoKTogSW5kZXgge1xuICByZXR1cm4geyBkaWdlc3Q6IG5ldyBVaW50OEFycmF5KCksIHJlY2VpdmVkVGltZTogMCwgc2VuZGVyVGltZTogMCB9O1xufVxuXG5leHBvcnQgY29uc3QgSW5kZXggPSB7XG4gIGVuY29kZShtZXNzYWdlOiBJbmRleCwgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKSk6IF9tMC5Xcml0ZXIge1xuICAgIGlmIChtZXNzYWdlLmRpZ2VzdC5sZW5ndGggIT09IDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLmJ5dGVzKG1lc3NhZ2UuZGlnZXN0KTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucmVjZWl2ZWRUaW1lICE9PSAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE3KS5kb3VibGUobWVzc2FnZS5yZWNlaXZlZFRpbWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zZW5kZXJUaW1lICE9PSAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI1KS5kb3VibGUobWVzc2FnZS5zZW5kZXJUaW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBJbmRleCB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmRleCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5kaWdlc3QgPSByZWFkZXIuYnl0ZXMoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UucmVjZWl2ZWRUaW1lID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgbWVzc2FnZS5zZW5kZXJUaW1lID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBJbmRleCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpZ2VzdDogaXNTZXQob2JqZWN0LmRpZ2VzdClcbiAgICAgICAgPyBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmRpZ2VzdClcbiAgICAgICAgOiBuZXcgVWludDhBcnJheSgpLFxuICAgICAgcmVjZWl2ZWRUaW1lOiBpc1NldChvYmplY3QucmVjZWl2ZWRUaW1lKVxuICAgICAgICA/IE51bWJlcihvYmplY3QucmVjZWl2ZWRUaW1lKVxuICAgICAgICA6IDAsXG4gICAgICBzZW5kZXJUaW1lOiBpc1NldChvYmplY3Quc2VuZGVyVGltZSkgPyBOdW1iZXIob2JqZWN0LnNlbmRlclRpbWUpIDogMCxcbiAgICB9O1xuICB9LFxuXG4gIHRvSlNPTihtZXNzYWdlOiBJbmRleCk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgbWVzc2FnZS5kaWdlc3QgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5kaWdlc3QgPSBiYXNlNjRGcm9tQnl0ZXMoXG4gICAgICAgIG1lc3NhZ2UuZGlnZXN0ICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmRpZ2VzdCA6IG5ldyBVaW50OEFycmF5KClcbiAgICAgICkpO1xuICAgIG1lc3NhZ2UucmVjZWl2ZWRUaW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmoucmVjZWl2ZWRUaW1lID0gbWVzc2FnZS5yZWNlaXZlZFRpbWUpO1xuICAgIG1lc3NhZ2Uuc2VuZGVyVGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc2VuZGVyVGltZSA9IG1lc3NhZ2Uuc2VuZGVyVGltZSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBmcm9tUGFydGlhbDxJIGV4dGVuZHMgRXhhY3Q8RGVlcFBhcnRpYWw8SW5kZXg+LCBJPj4ob2JqZWN0OiBJKTogSW5kZXgge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5kZXgoKTtcbiAgICBtZXNzYWdlLmRpZ2VzdCA9IG9iamVjdC5kaWdlc3QgPz8gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICBtZXNzYWdlLnJlY2VpdmVkVGltZSA9IG9iamVjdC5yZWNlaXZlZFRpbWUgPz8gMDtcbiAgICBtZXNzYWdlLnNlbmRlclRpbWUgPSBvYmplY3Quc2VuZGVyVGltZSA/PyAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQmFzZVBhZ2luZ0luZm8oKTogUGFnaW5nSW5mbyB7XG4gIHJldHVybiB7IHBhZ2VTaXplOiBMb25nLlVaRVJPLCBjdXJzb3I6IHVuZGVmaW5lZCwgZGlyZWN0aW9uOiAwIH07XG59XG5cbmV4cG9ydCBjb25zdCBQYWdpbmdJbmZvID0ge1xuICBlbmNvZGUoXG4gICAgbWVzc2FnZTogUGFnaW5nSW5mbyxcbiAgICB3cml0ZXI6IF9tMC5Xcml0ZXIgPSBfbTAuV3JpdGVyLmNyZWF0ZSgpXG4gICk6IF9tMC5Xcml0ZXIge1xuICAgIGlmICghbWVzc2FnZS5wYWdlU2l6ZS5pc1plcm8oKSkge1xuICAgICAgd3JpdGVyLnVpbnQzMig4KS51aW50NjQobWVzc2FnZS5wYWdlU2l6ZSk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmN1cnNvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBJbmRleC5lbmNvZGUobWVzc2FnZS5jdXJzb3IsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmRpcmVjdGlvbiAhPT0gMCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5kaXJlY3Rpb24pO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuXG4gIGRlY29kZShpbnB1dDogX20wLlJlYWRlciB8IFVpbnQ4QXJyYXksIGxlbmd0aD86IG51bWJlcik6IFBhZ2luZ0luZm8ge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgX20wLlJlYWRlciA/IGlucHV0IDogbmV3IF9tMC5SZWFkZXIoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGFnaW5nSW5mbygpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5wYWdlU2l6ZSA9IHJlYWRlci51aW50NjQoKSBhcyBMb25nO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgbWVzc2FnZS5jdXJzb3IgPSBJbmRleC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgbWVzc2FnZS5kaXJlY3Rpb24gPSByZWFkZXIuaW50MzIoKSBhcyBhbnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcblxuICBmcm9tSlNPTihvYmplY3Q6IGFueSk6IFBhZ2luZ0luZm8ge1xuICAgIHJldHVybiB7XG4gICAgICBwYWdlU2l6ZTogaXNTZXQob2JqZWN0LnBhZ2VTaXplKVxuICAgICAgICA/IExvbmcuZnJvbVN0cmluZyhvYmplY3QucGFnZVNpemUpXG4gICAgICAgIDogTG9uZy5VWkVSTyxcbiAgICAgIGN1cnNvcjogaXNTZXQob2JqZWN0LmN1cnNvcikgPyBJbmRleC5mcm9tSlNPTihvYmplY3QuY3Vyc29yKSA6IHVuZGVmaW5lZCxcbiAgICAgIGRpcmVjdGlvbjogaXNTZXQob2JqZWN0LmRpcmVjdGlvbilcbiAgICAgICAgPyBwYWdpbmdJbmZvX0RpcmVjdGlvbkZyb21KU09OKG9iamVjdC5kaXJlY3Rpb24pXG4gICAgICAgIDogMCxcbiAgICB9O1xuICB9LFxuXG4gIHRvSlNPTihtZXNzYWdlOiBQYWdpbmdJbmZvKTogdW5rbm93biB7XG4gICAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcbiAgICBtZXNzYWdlLnBhZ2VTaXplICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmoucGFnZVNpemUgPSAobWVzc2FnZS5wYWdlU2l6ZSB8fCBMb25nLlVaRVJPKS50b1N0cmluZygpKTtcbiAgICBtZXNzYWdlLmN1cnNvciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLmN1cnNvciA9IG1lc3NhZ2UuY3Vyc29yID8gSW5kZXgudG9KU09OKG1lc3NhZ2UuY3Vyc29yKSA6IHVuZGVmaW5lZCk7XG4gICAgbWVzc2FnZS5kaXJlY3Rpb24gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5kaXJlY3Rpb24gPSBwYWdpbmdJbmZvX0RpcmVjdGlvblRvSlNPTihtZXNzYWdlLmRpcmVjdGlvbikpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPFBhZ2luZ0luZm8+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IFBhZ2luZ0luZm8ge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGFnaW5nSW5mbygpO1xuICAgIG1lc3NhZ2UucGFnZVNpemUgPVxuICAgICAgb2JqZWN0LnBhZ2VTaXplICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBhZ2VTaXplICE9PSBudWxsXG4gICAgICAgID8gTG9uZy5mcm9tVmFsdWUob2JqZWN0LnBhZ2VTaXplKVxuICAgICAgICA6IExvbmcuVVpFUk87XG4gICAgbWVzc2FnZS5jdXJzb3IgPVxuICAgICAgb2JqZWN0LmN1cnNvciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5jdXJzb3IgIT09IG51bGxcbiAgICAgICAgPyBJbmRleC5mcm9tUGFydGlhbChvYmplY3QuY3Vyc29yKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBtZXNzYWdlLmRpcmVjdGlvbiA9IG9iamVjdC5kaXJlY3Rpb24gPz8gMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VDb250ZW50RmlsdGVyKCk6IENvbnRlbnRGaWx0ZXIge1xuICByZXR1cm4geyBjb250ZW50VG9waWM6IFwiXCIgfTtcbn1cblxuZXhwb3J0IGNvbnN0IENvbnRlbnRGaWx0ZXIgPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBDb250ZW50RmlsdGVyLFxuICAgIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKClcbiAgKTogX20wLldyaXRlciB7XG4gICAgaWYgKG1lc3NhZ2UuY29udGVudFRvcGljICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5jb250ZW50VG9waWMpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuXG4gIGRlY29kZShpbnB1dDogX20wLlJlYWRlciB8IFVpbnQ4QXJyYXksIGxlbmd0aD86IG51bWJlcik6IENvbnRlbnRGaWx0ZXIge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgX20wLlJlYWRlciA/IGlucHV0IDogbmV3IF9tMC5SZWFkZXIoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ29udGVudEZpbHRlcigpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5jb250ZW50VG9waWMgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcblxuICBmcm9tSlNPTihvYmplY3Q6IGFueSk6IENvbnRlbnRGaWx0ZXIge1xuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50VG9waWM6IGlzU2V0KG9iamVjdC5jb250ZW50VG9waWMpXG4gICAgICAgID8gU3RyaW5nKG9iamVjdC5jb250ZW50VG9waWMpXG4gICAgICAgIDogXCJcIixcbiAgICB9O1xuICB9LFxuXG4gIHRvSlNPTihtZXNzYWdlOiBDb250ZW50RmlsdGVyKTogdW5rbm93biB7XG4gICAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcbiAgICBtZXNzYWdlLmNvbnRlbnRUb3BpYyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLmNvbnRlbnRUb3BpYyA9IG1lc3NhZ2UuY29udGVudFRvcGljKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LFxuXG4gIGZyb21QYXJ0aWFsPEkgZXh0ZW5kcyBFeGFjdDxEZWVwUGFydGlhbDxDb250ZW50RmlsdGVyPiwgST4+KFxuICAgIG9iamVjdDogSVxuICApOiBDb250ZW50RmlsdGVyIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNvbnRlbnRGaWx0ZXIoKTtcbiAgICBtZXNzYWdlLmNvbnRlbnRUb3BpYyA9IG9iamVjdC5jb250ZW50VG9waWMgPz8gXCJcIjtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VIaXN0b3J5UXVlcnkoKTogSGlzdG9yeVF1ZXJ5IHtcbiAgcmV0dXJuIHtcbiAgICBwdWJTdWJUb3BpYzogdW5kZWZpbmVkLFxuICAgIGNvbnRlbnRGaWx0ZXJzOiBbXSxcbiAgICBwYWdpbmdJbmZvOiB1bmRlZmluZWQsXG4gICAgc3RhcnRUaW1lOiB1bmRlZmluZWQsXG4gICAgZW5kVGltZTogdW5kZWZpbmVkLFxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgSGlzdG9yeVF1ZXJ5ID0ge1xuICBlbmNvZGUoXG4gICAgbWVzc2FnZTogSGlzdG9yeVF1ZXJ5LFxuICAgIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKClcbiAgKTogX20wLldyaXRlciB7XG4gICAgaWYgKG1lc3NhZ2UucHViU3ViVG9waWMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UucHViU3ViVG9waWMpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5jb250ZW50RmlsdGVycykge1xuICAgICAgQ29udGVudEZpbHRlci5lbmNvZGUodiEsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnBhZ2luZ0luZm8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgUGFnaW5nSW5mby5lbmNvZGUobWVzc2FnZS5wYWdpbmdJbmZvLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5zdGFydFRpbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgd3JpdGVyLnVpbnQzMig0MSkuZG91YmxlKG1lc3NhZ2Uuc3RhcnRUaW1lKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB3cml0ZXIudWludDMyKDQ5KS5kb3VibGUobWVzc2FnZS5lbmRUaW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBIaXN0b3J5UXVlcnkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgX20wLlJlYWRlciA/IGlucHV0IDogbmV3IF9tMC5SZWFkZXIoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSGlzdG9yeVF1ZXJ5KCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBtZXNzYWdlLnB1YlN1YlRvcGljID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgbWVzc2FnZS5jb250ZW50RmlsdGVycy5wdXNoKFxuICAgICAgICAgICAgQ29udGVudEZpbHRlci5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIG1lc3NhZ2UucGFnaW5nSW5mbyA9IFBhZ2luZ0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRUaW1lID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBIaXN0b3J5UXVlcnkge1xuICAgIHJldHVybiB7XG4gICAgICBwdWJTdWJUb3BpYzogaXNTZXQob2JqZWN0LnB1YlN1YlRvcGljKVxuICAgICAgICA/IFN0cmluZyhvYmplY3QucHViU3ViVG9waWMpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgY29udGVudEZpbHRlcnM6IEFycmF5LmlzQXJyYXkob2JqZWN0Py5jb250ZW50RmlsdGVycylcbiAgICAgICAgPyBvYmplY3QuY29udGVudEZpbHRlcnMubWFwKChlOiBhbnkpID0+IENvbnRlbnRGaWx0ZXIuZnJvbUpTT04oZSkpXG4gICAgICAgIDogW10sXG4gICAgICBwYWdpbmdJbmZvOiBpc1NldChvYmplY3QucGFnaW5nSW5mbylcbiAgICAgICAgPyBQYWdpbmdJbmZvLmZyb21KU09OKG9iamVjdC5wYWdpbmdJbmZvKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIHN0YXJ0VGltZTogaXNTZXQob2JqZWN0LnN0YXJ0VGltZSkgPyBOdW1iZXIob2JqZWN0LnN0YXJ0VGltZSkgOiB1bmRlZmluZWQsXG4gICAgICBlbmRUaW1lOiBpc1NldChvYmplY3QuZW5kVGltZSkgPyBOdW1iZXIob2JqZWN0LmVuZFRpbWUpIDogdW5kZWZpbmVkLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IEhpc3RvcnlRdWVyeSk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgbWVzc2FnZS5wdWJTdWJUb3BpYyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLnB1YlN1YlRvcGljID0gbWVzc2FnZS5wdWJTdWJUb3BpYyk7XG4gICAgaWYgKG1lc3NhZ2UuY29udGVudEZpbHRlcnMpIHtcbiAgICAgIG9iai5jb250ZW50RmlsdGVycyA9IG1lc3NhZ2UuY29udGVudEZpbHRlcnMubWFwKChlKSA9PlxuICAgICAgICBlID8gQ29udGVudEZpbHRlci50b0pTT04oZSkgOiB1bmRlZmluZWRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iai5jb250ZW50RmlsdGVycyA9IFtdO1xuICAgIH1cbiAgICBtZXNzYWdlLnBhZ2luZ0luZm8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5wYWdpbmdJbmZvID0gbWVzc2FnZS5wYWdpbmdJbmZvXG4gICAgICAgID8gUGFnaW5nSW5mby50b0pTT04obWVzc2FnZS5wYWdpbmdJbmZvKVxuICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgbWVzc2FnZS5zdGFydFRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXJ0VGltZSA9IG1lc3NhZ2Uuc3RhcnRUaW1lKTtcbiAgICBtZXNzYWdlLmVuZFRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZFRpbWUgPSBtZXNzYWdlLmVuZFRpbWUpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPEhpc3RvcnlRdWVyeT4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogSGlzdG9yeVF1ZXJ5IHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUhpc3RvcnlRdWVyeSgpO1xuICAgIG1lc3NhZ2UucHViU3ViVG9waWMgPSBvYmplY3QucHViU3ViVG9waWMgPz8gdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UuY29udGVudEZpbHRlcnMgPVxuICAgICAgb2JqZWN0LmNvbnRlbnRGaWx0ZXJzPy5tYXAoKGUpID0+IENvbnRlbnRGaWx0ZXIuZnJvbVBhcnRpYWwoZSkpIHx8IFtdO1xuICAgIG1lc3NhZ2UucGFnaW5nSW5mbyA9XG4gICAgICBvYmplY3QucGFnaW5nSW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYWdpbmdJbmZvICE9PSBudWxsXG4gICAgICAgID8gUGFnaW5nSW5mby5mcm9tUGFydGlhbChvYmplY3QucGFnaW5nSW5mbylcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgbWVzc2FnZS5zdGFydFRpbWUgPSBvYmplY3Quc3RhcnRUaW1lID8/IHVuZGVmaW5lZDtcbiAgICBtZXNzYWdlLmVuZFRpbWUgPSBvYmplY3QuZW5kVGltZSA/PyB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVCYXNlSGlzdG9yeVJlc3BvbnNlKCk6IEhpc3RvcnlSZXNwb25zZSB7XG4gIHJldHVybiB7IG1lc3NhZ2VzOiBbXSwgcGFnaW5nSW5mbzogdW5kZWZpbmVkLCBlcnJvcjogMCB9O1xufVxuXG5leHBvcnQgY29uc3QgSGlzdG9yeVJlc3BvbnNlID0ge1xuICBlbmNvZGUoXG4gICAgbWVzc2FnZTogSGlzdG9yeVJlc3BvbnNlLFxuICAgIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKClcbiAgKTogX20wLldyaXRlciB7XG4gICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UubWVzc2FnZXMpIHtcbiAgICAgIFdha3VNZXNzYWdlLmVuY29kZSh2ISwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucGFnaW5nSW5mbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBQYWdpbmdJbmZvLmVuY29kZShtZXNzYWdlLnBhZ2luZ0luZm8sIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLmVycm9yICE9PSAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDMyKS5pbnQzMihtZXNzYWdlLmVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBIaXN0b3J5UmVzcG9uc2Uge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgX20wLlJlYWRlciA/IGlucHV0IDogbmV3IF9tMC5SZWFkZXIoaW5wdXQpO1xuICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSGlzdG9yeVJlc3BvbnNlKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VzLnB1c2goV2FrdU1lc3NhZ2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBtZXNzYWdlLnBhZ2luZ0luZm8gPSBQYWdpbmdJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBtZXNzYWdlLmVycm9yID0gcmVhZGVyLmludDMyKCkgYXMgYW55O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBIaXN0b3J5UmVzcG9uc2Uge1xuICAgIHJldHVybiB7XG4gICAgICBtZXNzYWdlczogQXJyYXkuaXNBcnJheShvYmplY3Q/Lm1lc3NhZ2VzKVxuICAgICAgICA/IG9iamVjdC5tZXNzYWdlcy5tYXAoKGU6IGFueSkgPT4gV2FrdU1lc3NhZ2UuZnJvbUpTT04oZSkpXG4gICAgICAgIDogW10sXG4gICAgICBwYWdpbmdJbmZvOiBpc1NldChvYmplY3QucGFnaW5nSW5mbylcbiAgICAgICAgPyBQYWdpbmdJbmZvLmZyb21KU09OKG9iamVjdC5wYWdpbmdJbmZvKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yOiBpc1NldChvYmplY3QuZXJyb3IpXG4gICAgICAgID8gaGlzdG9yeVJlc3BvbnNlX0Vycm9yRnJvbUpTT04ob2JqZWN0LmVycm9yKVxuICAgICAgICA6IDAsXG4gICAgfTtcbiAgfSxcblxuICB0b0pTT04obWVzc2FnZTogSGlzdG9yeVJlc3BvbnNlKTogdW5rbm93biB7XG4gICAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcbiAgICBpZiAobWVzc2FnZS5tZXNzYWdlcykge1xuICAgICAgb2JqLm1lc3NhZ2VzID0gbWVzc2FnZS5tZXNzYWdlcy5tYXAoKGUpID0+XG4gICAgICAgIGUgPyBXYWt1TWVzc2FnZS50b0pTT04oZSkgOiB1bmRlZmluZWRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iai5tZXNzYWdlcyA9IFtdO1xuICAgIH1cbiAgICBtZXNzYWdlLnBhZ2luZ0luZm8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5wYWdpbmdJbmZvID0gbWVzc2FnZS5wYWdpbmdJbmZvXG4gICAgICAgID8gUGFnaW5nSW5mby50b0pTT04obWVzc2FnZS5wYWdpbmdJbmZvKVxuICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgbWVzc2FnZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLmVycm9yID0gaGlzdG9yeVJlc3BvbnNlX0Vycm9yVG9KU09OKG1lc3NhZ2UuZXJyb3IpKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LFxuXG4gIGZyb21QYXJ0aWFsPEkgZXh0ZW5kcyBFeGFjdDxEZWVwUGFydGlhbDxIaXN0b3J5UmVzcG9uc2U+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IEhpc3RvcnlSZXNwb25zZSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VIaXN0b3J5UmVzcG9uc2UoKTtcbiAgICBtZXNzYWdlLm1lc3NhZ2VzID1cbiAgICAgIG9iamVjdC5tZXNzYWdlcz8ubWFwKChlKSA9PiBXYWt1TWVzc2FnZS5mcm9tUGFydGlhbChlKSkgfHwgW107XG4gICAgbWVzc2FnZS5wYWdpbmdJbmZvID1cbiAgICAgIG9iamVjdC5wYWdpbmdJbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBhZ2luZ0luZm8gIT09IG51bGxcbiAgICAgICAgPyBQYWdpbmdJbmZvLmZyb21QYXJ0aWFsKG9iamVjdC5wYWdpbmdJbmZvKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBtZXNzYWdlLmVycm9yID0gb2JqZWN0LmVycm9yID8/IDA7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVCYXNlSGlzdG9yeVJQQygpOiBIaXN0b3J5UlBDIHtcbiAgcmV0dXJuIHsgcmVxdWVzdElkOiBcIlwiLCBxdWVyeTogdW5kZWZpbmVkLCByZXNwb25zZTogdW5kZWZpbmVkIH07XG59XG5cbmV4cG9ydCBjb25zdCBIaXN0b3J5UlBDID0ge1xuICBlbmNvZGUoXG4gICAgbWVzc2FnZTogSGlzdG9yeVJQQyxcbiAgICB3cml0ZXI6IF9tMC5Xcml0ZXIgPSBfbTAuV3JpdGVyLmNyZWF0ZSgpXG4gICk6IF9tMC5Xcml0ZXIge1xuICAgIGlmIChtZXNzYWdlLnJlcXVlc3RJZCAhPT0gXCJcIikge1xuICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UucmVxdWVzdElkKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucXVlcnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgSGlzdG9yeVF1ZXJ5LmVuY29kZShtZXNzYWdlLnF1ZXJ5LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5yZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBIaXN0b3J5UmVzcG9uc2UuZW5jb2RlKFxuICAgICAgICBtZXNzYWdlLnJlc3BvbnNlLFxuICAgICAgICB3cml0ZXIudWludDMyKDI2KS5mb3JrKClcbiAgICAgICkubGRlbGltKCk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG5cbiAgZGVjb2RlKGlucHV0OiBfbTAuUmVhZGVyIHwgVWludDhBcnJheSwgbGVuZ3RoPzogbnVtYmVyKTogSGlzdG9yeVJQQyB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VIaXN0b3J5UlBDKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UucXVlcnkgPSBIaXN0b3J5UXVlcnkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIG1lc3NhZ2UucmVzcG9uc2UgPSBIaXN0b3J5UmVzcG9uc2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuXG4gIGZyb21KU09OKG9iamVjdDogYW55KTogSGlzdG9yeVJQQyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcXVlc3RJZDogaXNTZXQob2JqZWN0LnJlcXVlc3RJZCkgPyBTdHJpbmcob2JqZWN0LnJlcXVlc3RJZCkgOiBcIlwiLFxuICAgICAgcXVlcnk6IGlzU2V0KG9iamVjdC5xdWVyeSlcbiAgICAgICAgPyBIaXN0b3J5UXVlcnkuZnJvbUpTT04ob2JqZWN0LnF1ZXJ5KVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIHJlc3BvbnNlOiBpc1NldChvYmplY3QucmVzcG9uc2UpXG4gICAgICAgID8gSGlzdG9yeVJlc3BvbnNlLmZyb21KU09OKG9iamVjdC5yZXNwb25zZSlcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgfSxcblxuICB0b0pTT04obWVzc2FnZTogSGlzdG9yeVJQQyk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgbWVzc2FnZS5yZXF1ZXN0SWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlcXVlc3RJZCA9IG1lc3NhZ2UucmVxdWVzdElkKTtcbiAgICBtZXNzYWdlLnF1ZXJ5ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmoucXVlcnkgPSBtZXNzYWdlLnF1ZXJ5XG4gICAgICAgID8gSGlzdG9yeVF1ZXJ5LnRvSlNPTihtZXNzYWdlLnF1ZXJ5KVxuICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgbWVzc2FnZS5yZXNwb25zZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLnJlc3BvbnNlID0gbWVzc2FnZS5yZXNwb25zZVxuICAgICAgICA/IEhpc3RvcnlSZXNwb25zZS50b0pTT04obWVzc2FnZS5yZXNwb25zZSlcbiAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPEhpc3RvcnlSUEM+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IEhpc3RvcnlSUEMge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSGlzdG9yeVJQQygpO1xuICAgIG1lc3NhZ2UucmVxdWVzdElkID0gb2JqZWN0LnJlcXVlc3RJZCA/PyBcIlwiO1xuICAgIG1lc3NhZ2UucXVlcnkgPVxuICAgICAgb2JqZWN0LnF1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnF1ZXJ5ICE9PSBudWxsXG4gICAgICAgID8gSGlzdG9yeVF1ZXJ5LmZyb21QYXJ0aWFsKG9iamVjdC5xdWVyeSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgbWVzc2FnZS5yZXNwb25zZSA9XG4gICAgICBvYmplY3QucmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVzcG9uc2UgIT09IG51bGxcbiAgICAgICAgPyBIaXN0b3J5UmVzcG9uc2UuZnJvbVBhcnRpYWwob2JqZWN0LnJlc3BvbnNlKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbn07XG5cbmRlY2xhcmUgdmFyIHNlbGY6IGFueSB8IHVuZGVmaW5lZDtcbmRlY2xhcmUgdmFyIHdpbmRvdzogYW55IHwgdW5kZWZpbmVkO1xuZGVjbGFyZSB2YXIgZ2xvYmFsOiBhbnkgfCB1bmRlZmluZWQ7XG52YXIgZ2xvYmFsVGhpczogYW55ID0gKCgpID0+IHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZ2xvYmFsVGhpcztcbiAgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gc2VsZjtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiB3aW5kb3c7XG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZ2xvYmFsO1xuICB0aHJvdyBcIlVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdFwiO1xufSkoKTtcblxuY29uc3QgYXRvYjogKGI2NDogc3RyaW5nKSA9PiBzdHJpbmcgPVxuICBnbG9iYWxUaGlzLmF0b2IgfHxcbiAgKChiNjQpID0+IGdsb2JhbFRoaXMuQnVmZmVyLmZyb20oYjY0LCBcImJhc2U2NFwiKS50b1N0cmluZyhcImJpbmFyeVwiKSk7XG5mdW5jdGlvbiBieXRlc0Zyb21CYXNlNjQoYjY0OiBzdHJpbmcpOiBVaW50OEFycmF5IHtcbiAgY29uc3QgYmluID0gYXRvYihiNjQpO1xuICBjb25zdCBhcnIgPSBuZXcgVWludDhBcnJheShiaW4ubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW4ubGVuZ3RoOyArK2kpIHtcbiAgICBhcnJbaV0gPSBiaW4uY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gYXJyO1xufVxuXG5jb25zdCBidG9hOiAoYmluOiBzdHJpbmcpID0+IHN0cmluZyA9XG4gIGdsb2JhbFRoaXMuYnRvYSB8fFxuICAoKGJpbikgPT4gZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShiaW4sIFwiYmluYXJ5XCIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpKTtcbmZ1bmN0aW9uIGJhc2U2NEZyb21CeXRlcyhhcnI6IFVpbnQ4QXJyYXkpOiBzdHJpbmcge1xuICBjb25zdCBiaW46IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgYnl0ZSBvZiBhcnIpIHtcbiAgICBiaW4ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUpKTtcbiAgfVxuICByZXR1cm4gYnRvYShiaW4uam9pbihcIlwiKSk7XG59XG5cbnR5cGUgQnVpbHRpbiA9XG4gIHwgRGF0ZVxuICB8IEZ1bmN0aW9uXG4gIHwgVWludDhBcnJheVxuICB8IHN0cmluZ1xuICB8IG51bWJlclxuICB8IGJvb2xlYW5cbiAgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCB0eXBlIERlZXBQYXJ0aWFsPFQ+ID0gVCBleHRlbmRzIEJ1aWx0aW5cbiAgPyBUXG4gIDogVCBleHRlbmRzIExvbmdcbiAgPyBzdHJpbmcgfCBudW1iZXIgfCBMb25nXG4gIDogVCBleHRlbmRzIEFycmF5PGluZmVyIFU+XG4gID8gQXJyYXk8RGVlcFBhcnRpYWw8VT4+XG4gIDogVCBleHRlbmRzIFJlYWRvbmx5QXJyYXk8aW5mZXIgVT5cbiAgPyBSZWFkb25seUFycmF5PERlZXBQYXJ0aWFsPFU+PlxuICA6IFQgZXh0ZW5kcyB7fVxuICA/IHsgW0sgaW4ga2V5b2YgVF0/OiBEZWVwUGFydGlhbDxUW0tdPiB9XG4gIDogUGFydGlhbDxUPjtcblxudHlwZSBLZXlzT2ZVbmlvbjxUPiA9IFQgZXh0ZW5kcyBUID8ga2V5b2YgVCA6IG5ldmVyO1xuZXhwb3J0IHR5cGUgRXhhY3Q8UCwgSSBleHRlbmRzIFA+ID0gUCBleHRlbmRzIEJ1aWx0aW5cbiAgPyBQXG4gIDogUCAmIHsgW0sgaW4ga2V5b2YgUF06IEV4YWN0PFBbS10sIElbS10+IH0gJiBSZWNvcmQ8XG4gICAgICAgIEV4Y2x1ZGU8a2V5b2YgSSwgS2V5c09mVW5pb248UD4+LFxuICAgICAgICBuZXZlclxuICAgICAgPjtcblxuaWYgKF9tMC51dGlsLkxvbmcgIT09IExvbmcpIHtcbiAgX20wLnV0aWwuTG9uZyA9IExvbmcgYXMgYW55O1xuICBfbTAuY29uZmlndXJlKCk7XG59XG5cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IExvbmcgZnJvbSBcImxvbmdcIjtcbmltcG9ydCBfbTAgZnJvbSBcInByb3RvYnVmanMvbWluaW1hbFwiO1xuaW1wb3J0IHsgV2FrdU1lc3NhZ2UgfSBmcm9tIFwiLi4vLi4vLi4vLi4vd2FrdS92Mi9tZXNzYWdlXCI7XG5cbmV4cG9ydCBjb25zdCBwcm90b2J1ZlBhY2thZ2UgPSBcIndha3UudjIuc3RvcmUudjJiZXRhNFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEluZGV4IHtcbiAgZGlnZXN0OiBVaW50OEFycmF5O1xuICByZWNlaXZlZFRpbWU6IExvbmc7XG4gIHNlbmRlclRpbWU6IExvbmc7XG4gIHB1YnN1YlRvcGljOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5nSW5mbyB7XG4gIHBhZ2VTaXplOiBMb25nO1xuICBjdXJzb3I6IEluZGV4IHwgdW5kZWZpbmVkO1xuICBkaXJlY3Rpb246IFBhZ2luZ0luZm9fRGlyZWN0aW9uO1xufVxuXG5leHBvcnQgZW51bSBQYWdpbmdJbmZvX0RpcmVjdGlvbiB7XG4gIERJUkVDVElPTl9CQUNLV0FSRF9VTlNQRUNJRklFRCA9IDAsXG4gIERJUkVDVElPTl9GT1JXQVJEID0gMSxcbiAgVU5SRUNPR05JWkVEID0gLTEsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWdpbmdJbmZvX0RpcmVjdGlvbkZyb21KU09OKFxuICBvYmplY3Q6IGFueVxuKTogUGFnaW5nSW5mb19EaXJlY3Rpb24ge1xuICBzd2l0Y2ggKG9iamVjdCkge1xuICAgIGNhc2UgMDpcbiAgICBjYXNlIFwiRElSRUNUSU9OX0JBQ0tXQVJEX1VOU1BFQ0lGSUVEXCI6XG4gICAgICByZXR1cm4gUGFnaW5nSW5mb19EaXJlY3Rpb24uRElSRUNUSU9OX0JBQ0tXQVJEX1VOU1BFQ0lGSUVEO1xuICAgIGNhc2UgMTpcbiAgICBjYXNlIFwiRElSRUNUSU9OX0ZPUldBUkRcIjpcbiAgICAgIHJldHVybiBQYWdpbmdJbmZvX0RpcmVjdGlvbi5ESVJFQ1RJT05fRk9SV0FSRDtcbiAgICBjYXNlIC0xOlxuICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFBhZ2luZ0luZm9fRGlyZWN0aW9uLlVOUkVDT0dOSVpFRDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFnaW5nSW5mb19EaXJlY3Rpb25Ub0pTT04oXG4gIG9iamVjdDogUGFnaW5nSW5mb19EaXJlY3Rpb25cbik6IHN0cmluZyB7XG4gIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgY2FzZSBQYWdpbmdJbmZvX0RpcmVjdGlvbi5ESVJFQ1RJT05fQkFDS1dBUkRfVU5TUEVDSUZJRUQ6XG4gICAgICByZXR1cm4gXCJESVJFQ1RJT05fQkFDS1dBUkRfVU5TUEVDSUZJRURcIjtcbiAgICBjYXNlIFBhZ2luZ0luZm9fRGlyZWN0aW9uLkRJUkVDVElPTl9GT1JXQVJEOlxuICAgICAgcmV0dXJuIFwiRElSRUNUSU9OX0ZPUldBUkRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiVU5LTk9XTlwiO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGVudEZpbHRlciB7XG4gIGNvbnRlbnRUb3BpYzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhpc3RvcnlRdWVyeSB7XG4gIHB1YlN1YlRvcGljPzogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBjb250ZW50RmlsdGVyczogQ29udGVudEZpbHRlcltdO1xuICBwYWdpbmdJbmZvPzogUGFnaW5nSW5mbyB8IHVuZGVmaW5lZDtcbiAgc3RhcnRUaW1lPzogTG9uZyB8IHVuZGVmaW5lZDtcbiAgZW5kVGltZT86IExvbmcgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlzdG9yeVJlc3BvbnNlIHtcbiAgbWVzc2FnZXM6IFdha3VNZXNzYWdlW107XG4gIHBhZ2luZ0luZm86IFBhZ2luZ0luZm8gfCB1bmRlZmluZWQ7XG4gIGVycm9yOiBIaXN0b3J5UmVzcG9uc2VfRXJyb3I7XG59XG5cbmV4cG9ydCBlbnVtIEhpc3RvcnlSZXNwb25zZV9FcnJvciB7XG4gIEVSUk9SX05PTkVfVU5TUEVDSUZJRUQgPSAwLFxuICBFUlJPUl9JTlZBTElEX0NVUlNPUiA9IDEsXG4gIFVOUkVDT0dOSVpFRCA9IC0xLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlzdG9yeVJlc3BvbnNlX0Vycm9yRnJvbUpTT04oXG4gIG9iamVjdDogYW55XG4pOiBIaXN0b3J5UmVzcG9uc2VfRXJyb3Ige1xuICBzd2l0Y2ggKG9iamVjdCkge1xuICAgIGNhc2UgMDpcbiAgICBjYXNlIFwiRVJST1JfTk9ORV9VTlNQRUNJRklFRFwiOlxuICAgICAgcmV0dXJuIEhpc3RvcnlSZXNwb25zZV9FcnJvci5FUlJPUl9OT05FX1VOU1BFQ0lGSUVEO1xuICAgIGNhc2UgMTpcbiAgICBjYXNlIFwiRVJST1JfSU5WQUxJRF9DVVJTT1JcIjpcbiAgICAgIHJldHVybiBIaXN0b3J5UmVzcG9uc2VfRXJyb3IuRVJST1JfSU5WQUxJRF9DVVJTT1I7XG4gICAgY2FzZSAtMTpcbiAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBIaXN0b3J5UmVzcG9uc2VfRXJyb3IuVU5SRUNPR05JWkVEO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaXN0b3J5UmVzcG9uc2VfRXJyb3JUb0pTT04oXG4gIG9iamVjdDogSGlzdG9yeVJlc3BvbnNlX0Vycm9yXG4pOiBzdHJpbmcge1xuICBzd2l0Y2ggKG9iamVjdCkge1xuICAgIGNhc2UgSGlzdG9yeVJlc3BvbnNlX0Vycm9yLkVSUk9SX05PTkVfVU5TUEVDSUZJRUQ6XG4gICAgICByZXR1cm4gXCJFUlJPUl9OT05FX1VOU1BFQ0lGSUVEXCI7XG4gICAgY2FzZSBIaXN0b3J5UmVzcG9uc2VfRXJyb3IuRVJST1JfSU5WQUxJRF9DVVJTT1I6XG4gICAgICByZXR1cm4gXCJFUlJPUl9JTlZBTElEX0NVUlNPUlwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJVTktOT1dOXCI7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBIaXN0b3J5UlBDIHtcbiAgcmVxdWVzdElkOiBzdHJpbmc7XG4gIHF1ZXJ5OiBIaXN0b3J5UXVlcnkgfCB1bmRlZmluZWQ7XG4gIHJlc3BvbnNlOiBIaXN0b3J5UmVzcG9uc2UgfCB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VJbmRleCgpOiBJbmRleCB7XG4gIHJldHVybiB7XG4gICAgZGlnZXN0OiBuZXcgVWludDhBcnJheSgpLFxuICAgIHJlY2VpdmVkVGltZTogTG9uZy5aRVJPLFxuICAgIHNlbmRlclRpbWU6IExvbmcuWkVSTyxcbiAgICBwdWJzdWJUb3BpYzogXCJcIixcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IEluZGV4ID0ge1xuICBlbmNvZGUobWVzc2FnZTogSW5kZXgsIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKCkpOiBfbTAuV3JpdGVyIHtcbiAgICBpZiAobWVzc2FnZS5kaWdlc3QubGVuZ3RoICE9PSAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDEwKS5ieXRlcyhtZXNzYWdlLmRpZ2VzdCk7XG4gICAgfVxuICAgIGlmICghbWVzc2FnZS5yZWNlaXZlZFRpbWUuaXNaZXJvKCkpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTYpLnNpbnQ2NChtZXNzYWdlLnJlY2VpdmVkVGltZSk7XG4gICAgfVxuICAgIGlmICghbWVzc2FnZS5zZW5kZXJUaW1lLmlzWmVybygpKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI0KS5zaW50NjQobWVzc2FnZS5zZW5kZXJUaW1lKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucHVic3ViVG9waWMgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLnB1YnN1YlRvcGljKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBJbmRleCB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmRleCgpO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbWVzc2FnZS5kaWdlc3QgPSByZWFkZXIuYnl0ZXMoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UucmVjZWl2ZWRUaW1lID0gcmVhZGVyLnNpbnQ2NCgpIGFzIExvbmc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBtZXNzYWdlLnNlbmRlclRpbWUgPSByZWFkZXIuc2ludDY0KCkgYXMgTG9uZztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIG1lc3NhZ2UucHVic3ViVG9waWMgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcblxuICBmcm9tSlNPTihvYmplY3Q6IGFueSk6IEluZGV4IHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlnZXN0OiBpc1NldChvYmplY3QuZGlnZXN0KVxuICAgICAgICA/IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QuZGlnZXN0KVxuICAgICAgICA6IG5ldyBVaW50OEFycmF5KCksXG4gICAgICByZWNlaXZlZFRpbWU6IGlzU2V0KG9iamVjdC5yZWNlaXZlZFRpbWUpXG4gICAgICAgID8gTG9uZy5mcm9tU3RyaW5nKG9iamVjdC5yZWNlaXZlZFRpbWUpXG4gICAgICAgIDogTG9uZy5aRVJPLFxuICAgICAgc2VuZGVyVGltZTogaXNTZXQob2JqZWN0LnNlbmRlclRpbWUpXG4gICAgICAgID8gTG9uZy5mcm9tU3RyaW5nKG9iamVjdC5zZW5kZXJUaW1lKVxuICAgICAgICA6IExvbmcuWkVSTyxcbiAgICAgIHB1YnN1YlRvcGljOiBpc1NldChvYmplY3QucHVic3ViVG9waWMpID8gU3RyaW5nKG9iamVjdC5wdWJzdWJUb3BpYykgOiBcIlwiLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IEluZGV4KTogdW5rbm93biB7XG4gICAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcbiAgICBtZXNzYWdlLmRpZ2VzdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLmRpZ2VzdCA9IGJhc2U2NEZyb21CeXRlcyhcbiAgICAgICAgbWVzc2FnZS5kaWdlc3QgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuZGlnZXN0IDogbmV3IFVpbnQ4QXJyYXkoKVxuICAgICAgKSk7XG4gICAgbWVzc2FnZS5yZWNlaXZlZFRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5yZWNlaXZlZFRpbWUgPSAobWVzc2FnZS5yZWNlaXZlZFRpbWUgfHwgTG9uZy5aRVJPKS50b1N0cmluZygpKTtcbiAgICBtZXNzYWdlLnNlbmRlclRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5zZW5kZXJUaW1lID0gKG1lc3NhZ2Uuc2VuZGVyVGltZSB8fCBMb25nLlpFUk8pLnRvU3RyaW5nKCkpO1xuICAgIG1lc3NhZ2UucHVic3ViVG9waWMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5wdWJzdWJUb3BpYyA9IG1lc3NhZ2UucHVic3ViVG9waWMpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPEluZGV4PiwgST4+KG9iamVjdDogSSk6IEluZGV4IHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZGV4KCk7XG4gICAgbWVzc2FnZS5kaWdlc3QgPSBvYmplY3QuZGlnZXN0ID8/IG5ldyBVaW50OEFycmF5KCk7XG4gICAgbWVzc2FnZS5yZWNlaXZlZFRpbWUgPVxuICAgICAgb2JqZWN0LnJlY2VpdmVkVGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZWNlaXZlZFRpbWUgIT09IG51bGxcbiAgICAgICAgPyBMb25nLmZyb21WYWx1ZShvYmplY3QucmVjZWl2ZWRUaW1lKVxuICAgICAgICA6IExvbmcuWkVSTztcbiAgICBtZXNzYWdlLnNlbmRlclRpbWUgPVxuICAgICAgb2JqZWN0LnNlbmRlclRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2VuZGVyVGltZSAhPT0gbnVsbFxuICAgICAgICA/IExvbmcuZnJvbVZhbHVlKG9iamVjdC5zZW5kZXJUaW1lKVxuICAgICAgICA6IExvbmcuWkVSTztcbiAgICBtZXNzYWdlLnB1YnN1YlRvcGljID0gb2JqZWN0LnB1YnN1YlRvcGljID8/IFwiXCI7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVCYXNlUGFnaW5nSW5mbygpOiBQYWdpbmdJbmZvIHtcbiAgcmV0dXJuIHsgcGFnZVNpemU6IExvbmcuVVpFUk8sIGN1cnNvcjogdW5kZWZpbmVkLCBkaXJlY3Rpb246IDAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IFBhZ2luZ0luZm8gPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBQYWdpbmdJbmZvLFxuICAgIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKClcbiAgKTogX20wLldyaXRlciB7XG4gICAgaWYgKCFtZXNzYWdlLnBhZ2VTaXplLmlzWmVybygpKSB7XG4gICAgICB3cml0ZXIudWludDMyKDgpLnVpbnQ2NChtZXNzYWdlLnBhZ2VTaXplKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuY3Vyc29yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIEluZGV4LmVuY29kZShtZXNzYWdlLmN1cnNvciwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZGlyZWN0aW9uICE9PSAwKSB7XG4gICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLmRpcmVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG5cbiAgZGVjb2RlKGlucHV0OiBfbTAuUmVhZGVyIHwgVWludDhBcnJheSwgbGVuZ3RoPzogbnVtYmVyKTogUGFnaW5nSW5mbyB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQYWdpbmdJbmZvKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBtZXNzYWdlLnBhZ2VTaXplID0gcmVhZGVyLnVpbnQ2NCgpIGFzIExvbmc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBtZXNzYWdlLmN1cnNvciA9IEluZGV4LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBtZXNzYWdlLmRpcmVjdGlvbiA9IHJlYWRlci5pbnQzMigpIGFzIGFueTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuXG4gIGZyb21KU09OKG9iamVjdDogYW55KTogUGFnaW5nSW5mbyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhZ2VTaXplOiBpc1NldChvYmplY3QucGFnZVNpemUpXG4gICAgICAgID8gTG9uZy5mcm9tU3RyaW5nKG9iamVjdC5wYWdlU2l6ZSlcbiAgICAgICAgOiBMb25nLlVaRVJPLFxuICAgICAgY3Vyc29yOiBpc1NldChvYmplY3QuY3Vyc29yKSA/IEluZGV4LmZyb21KU09OKG9iamVjdC5jdXJzb3IpIDogdW5kZWZpbmVkLFxuICAgICAgZGlyZWN0aW9uOiBpc1NldChvYmplY3QuZGlyZWN0aW9uKVxuICAgICAgICA/IHBhZ2luZ0luZm9fRGlyZWN0aW9uRnJvbUpTT04ob2JqZWN0LmRpcmVjdGlvbilcbiAgICAgICAgOiAwLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IFBhZ2luZ0luZm8pOiB1bmtub3duIHtcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xuICAgIG1lc3NhZ2UucGFnZVNpemUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5wYWdlU2l6ZSA9IChtZXNzYWdlLnBhZ2VTaXplIHx8IExvbmcuVVpFUk8pLnRvU3RyaW5nKCkpO1xuICAgIG1lc3NhZ2UuY3Vyc29yICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmouY3Vyc29yID0gbWVzc2FnZS5jdXJzb3IgPyBJbmRleC50b0pTT04obWVzc2FnZS5jdXJzb3IpIDogdW5kZWZpbmVkKTtcbiAgICBtZXNzYWdlLmRpcmVjdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLmRpcmVjdGlvbiA9IHBhZ2luZ0luZm9fRGlyZWN0aW9uVG9KU09OKG1lc3NhZ2UuZGlyZWN0aW9uKSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBmcm9tUGFydGlhbDxJIGV4dGVuZHMgRXhhY3Q8RGVlcFBhcnRpYWw8UGFnaW5nSW5mbz4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogUGFnaW5nSW5mbyB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQYWdpbmdJbmZvKCk7XG4gICAgbWVzc2FnZS5wYWdlU2l6ZSA9XG4gICAgICBvYmplY3QucGFnZVNpemUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGFnZVNpemUgIT09IG51bGxcbiAgICAgICAgPyBMb25nLmZyb21WYWx1ZShvYmplY3QucGFnZVNpemUpXG4gICAgICAgIDogTG9uZy5VWkVSTztcbiAgICBtZXNzYWdlLmN1cnNvciA9XG4gICAgICBvYmplY3QuY3Vyc29yICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmN1cnNvciAhPT0gbnVsbFxuICAgICAgICA/IEluZGV4LmZyb21QYXJ0aWFsKG9iamVjdC5jdXJzb3IpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UuZGlyZWN0aW9uID0gb2JqZWN0LmRpcmVjdGlvbiA/PyAwO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQmFzZUNvbnRlbnRGaWx0ZXIoKTogQ29udGVudEZpbHRlciB7XG4gIHJldHVybiB7IGNvbnRlbnRUb3BpYzogXCJcIiB9O1xufVxuXG5leHBvcnQgY29uc3QgQ29udGVudEZpbHRlciA9IHtcbiAgZW5jb2RlKFxuICAgIG1lc3NhZ2U6IENvbnRlbnRGaWx0ZXIsXG4gICAgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKVxuICApOiBfbTAuV3JpdGVyIHtcbiAgICBpZiAobWVzc2FnZS5jb250ZW50VG9waWMgIT09IFwiXCIpIHtcbiAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmNvbnRlbnRUb3BpYyk7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZXI7XG4gIH0sXG5cbiAgZGVjb2RlKGlucHV0OiBfbTAuUmVhZGVyIHwgVWludDhBcnJheSwgbGVuZ3RoPzogbnVtYmVyKTogQ29udGVudEZpbHRlciB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDb250ZW50RmlsdGVyKCk7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBtZXNzYWdlLmNvbnRlbnRUb3BpYyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuXG4gIGZyb21KU09OKG9iamVjdDogYW55KTogQ29udGVudEZpbHRlciB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRlbnRUb3BpYzogaXNTZXQob2JqZWN0LmNvbnRlbnRUb3BpYylcbiAgICAgICAgPyBTdHJpbmcob2JqZWN0LmNvbnRlbnRUb3BpYylcbiAgICAgICAgOiBcIlwiLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IENvbnRlbnRGaWx0ZXIpOiB1bmtub3duIHtcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xuICAgIG1lc3NhZ2UuY29udGVudFRvcGljICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmouY29udGVudFRvcGljID0gbWVzc2FnZS5jb250ZW50VG9waWMpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPENvbnRlbnRGaWx0ZXI+LCBJPj4oXG4gICAgb2JqZWN0OiBJXG4gICk6IENvbnRlbnRGaWx0ZXIge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ29udGVudEZpbHRlcigpO1xuICAgIG1lc3NhZ2UuY29udGVudFRvcGljID0gb2JqZWN0LmNvbnRlbnRUb3BpYyA/PyBcIlwiO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQmFzZUhpc3RvcnlRdWVyeSgpOiBIaXN0b3J5UXVlcnkge1xuICByZXR1cm4ge1xuICAgIHB1YlN1YlRvcGljOiB1bmRlZmluZWQsXG4gICAgY29udGVudEZpbHRlcnM6IFtdLFxuICAgIHBhZ2luZ0luZm86IHVuZGVmaW5lZCxcbiAgICBzdGFydFRpbWU6IHVuZGVmaW5lZCxcbiAgICBlbmRUaW1lOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBIaXN0b3J5UXVlcnkgPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBIaXN0b3J5UXVlcnksXG4gICAgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKVxuICApOiBfbTAuV3JpdGVyIHtcbiAgICBpZiAobWVzc2FnZS5wdWJTdWJUb3BpYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5wdWJTdWJUb3BpYyk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmNvbnRlbnRGaWx0ZXJzKSB7XG4gICAgICBDb250ZW50RmlsdGVyLmVuY29kZSh2ISwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UucGFnaW5nSW5mbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBQYWdpbmdJbmZvLmVuY29kZShtZXNzYWdlLnBhZ2luZ0luZm8sIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB3cml0ZXIudWludDMyKDQwKS5zaW50NjQobWVzc2FnZS5zdGFydFRpbWUpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5lbmRUaW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHdyaXRlci51aW50MzIoNDgpLnNpbnQ2NChtZXNzYWdlLmVuZFRpbWUpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuXG4gIGRlY29kZShpbnB1dDogX20wLlJlYWRlciB8IFVpbnQ4QXJyYXksIGxlbmd0aD86IG51bWJlcik6IEhpc3RvcnlRdWVyeSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VIaXN0b3J5UXVlcnkoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UucHViU3ViVG9waWMgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBtZXNzYWdlLmNvbnRlbnRGaWx0ZXJzLnB1c2goXG4gICAgICAgICAgICBDb250ZW50RmlsdGVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgbWVzc2FnZS5wYWdpbmdJbmZvID0gUGFnaW5nSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgbWVzc2FnZS5zdGFydFRpbWUgPSByZWFkZXIuc2ludDY0KCkgYXMgTG9uZztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIG1lc3NhZ2UuZW5kVGltZSA9IHJlYWRlci5zaW50NjQoKSBhcyBMb25nO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBIaXN0b3J5UXVlcnkge1xuICAgIHJldHVybiB7XG4gICAgICBwdWJTdWJUb3BpYzogaXNTZXQob2JqZWN0LnB1YlN1YlRvcGljKVxuICAgICAgICA/IFN0cmluZyhvYmplY3QucHViU3ViVG9waWMpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgY29udGVudEZpbHRlcnM6IEFycmF5LmlzQXJyYXkob2JqZWN0Py5jb250ZW50RmlsdGVycylcbiAgICAgICAgPyBvYmplY3QuY29udGVudEZpbHRlcnMubWFwKChlOiBhbnkpID0+IENvbnRlbnRGaWx0ZXIuZnJvbUpTT04oZSkpXG4gICAgICAgIDogW10sXG4gICAgICBwYWdpbmdJbmZvOiBpc1NldChvYmplY3QucGFnaW5nSW5mbylcbiAgICAgICAgPyBQYWdpbmdJbmZvLmZyb21KU09OKG9iamVjdC5wYWdpbmdJbmZvKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIHN0YXJ0VGltZTogaXNTZXQob2JqZWN0LnN0YXJ0VGltZSlcbiAgICAgICAgPyBMb25nLmZyb21TdHJpbmcob2JqZWN0LnN0YXJ0VGltZSlcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBlbmRUaW1lOiBpc1NldChvYmplY3QuZW5kVGltZSlcbiAgICAgICAgPyBMb25nLmZyb21TdHJpbmcob2JqZWN0LmVuZFRpbWUpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH07XG4gIH0sXG5cbiAgdG9KU09OKG1lc3NhZ2U6IEhpc3RvcnlRdWVyeSk6IHVua25vd24ge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgbWVzc2FnZS5wdWJTdWJUb3BpYyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLnB1YlN1YlRvcGljID0gbWVzc2FnZS5wdWJTdWJUb3BpYyk7XG4gICAgaWYgKG1lc3NhZ2UuY29udGVudEZpbHRlcnMpIHtcbiAgICAgIG9iai5jb250ZW50RmlsdGVycyA9IG1lc3NhZ2UuY29udGVudEZpbHRlcnMubWFwKChlKSA9PlxuICAgICAgICBlID8gQ29udGVudEZpbHRlci50b0pTT04oZSkgOiB1bmRlZmluZWRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iai5jb250ZW50RmlsdGVycyA9IFtdO1xuICAgIH1cbiAgICBtZXNzYWdlLnBhZ2luZ0luZm8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5wYWdpbmdJbmZvID0gbWVzc2FnZS5wYWdpbmdJbmZvXG4gICAgICAgID8gUGFnaW5nSW5mby50b0pTT04obWVzc2FnZS5wYWdpbmdJbmZvKVxuICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgbWVzc2FnZS5zdGFydFRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5zdGFydFRpbWUgPSAobWVzc2FnZS5zdGFydFRpbWUgfHwgdW5kZWZpbmVkKS50b1N0cmluZygpKTtcbiAgICBtZXNzYWdlLmVuZFRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5lbmRUaW1lID0gKG1lc3NhZ2UuZW5kVGltZSB8fCB1bmRlZmluZWQpLnRvU3RyaW5nKCkpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPEhpc3RvcnlRdWVyeT4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogSGlzdG9yeVF1ZXJ5IHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUhpc3RvcnlRdWVyeSgpO1xuICAgIG1lc3NhZ2UucHViU3ViVG9waWMgPSBvYmplY3QucHViU3ViVG9waWMgPz8gdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UuY29udGVudEZpbHRlcnMgPVxuICAgICAgb2JqZWN0LmNvbnRlbnRGaWx0ZXJzPy5tYXAoKGUpID0+IENvbnRlbnRGaWx0ZXIuZnJvbVBhcnRpYWwoZSkpIHx8IFtdO1xuICAgIG1lc3NhZ2UucGFnaW5nSW5mbyA9XG4gICAgICBvYmplY3QucGFnaW5nSW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYWdpbmdJbmZvICE9PSBudWxsXG4gICAgICAgID8gUGFnaW5nSW5mby5mcm9tUGFydGlhbChvYmplY3QucGFnaW5nSW5mbylcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgbWVzc2FnZS5zdGFydFRpbWUgPVxuICAgICAgb2JqZWN0LnN0YXJ0VGltZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zdGFydFRpbWUgIT09IG51bGxcbiAgICAgICAgPyBMb25nLmZyb21WYWx1ZShvYmplY3Quc3RhcnRUaW1lKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBtZXNzYWdlLmVuZFRpbWUgPVxuICAgICAgb2JqZWN0LmVuZFRpbWUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZW5kVGltZSAhPT0gbnVsbFxuICAgICAgICA/IExvbmcuZnJvbVZhbHVlKG9iamVjdC5lbmRUaW1lKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VIaXN0b3J5UmVzcG9uc2UoKTogSGlzdG9yeVJlc3BvbnNlIHtcbiAgcmV0dXJuIHsgbWVzc2FnZXM6IFtdLCBwYWdpbmdJbmZvOiB1bmRlZmluZWQsIGVycm9yOiAwIH07XG59XG5cbmV4cG9ydCBjb25zdCBIaXN0b3J5UmVzcG9uc2UgPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBIaXN0b3J5UmVzcG9uc2UsXG4gICAgd3JpdGVyOiBfbTAuV3JpdGVyID0gX20wLldyaXRlci5jcmVhdGUoKVxuICApOiBfbTAuV3JpdGVyIHtcbiAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5tZXNzYWdlcykge1xuICAgICAgV2FrdU1lc3NhZ2UuZW5jb2RlKHYhLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5wYWdpbmdJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIFBhZ2luZ0luZm8uZW5jb2RlKG1lc3NhZ2UucGFnaW5nSW5mbywgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT09IDApIHtcbiAgICAgIHdyaXRlci51aW50MzIoMzIpLmludDMyKG1lc3NhZ2UuZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gd3JpdGVyO1xuICB9LFxuXG4gIGRlY29kZShpbnB1dDogX20wLlJlYWRlciB8IFVpbnQ4QXJyYXksIGxlbmd0aD86IG51bWJlcik6IEhpc3RvcnlSZXNwb25zZSB7XG4gICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBfbTAuUmVhZGVyID8gaW5wdXQgOiBuZXcgX20wLlJlYWRlcihpbnB1dCk7XG4gICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VIaXN0b3J5UmVzcG9uc2UoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2UubWVzc2FnZXMucHVzaChXYWt1TWVzc2FnZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIG1lc3NhZ2UucGFnaW5nSW5mbyA9IFBhZ2luZ0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIG1lc3NhZ2UuZXJyb3IgPSByZWFkZXIuaW50MzIoKSBhcyBhbnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcblxuICBmcm9tSlNPTihvYmplY3Q6IGFueSk6IEhpc3RvcnlSZXNwb25zZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2VzOiBBcnJheS5pc0FycmF5KG9iamVjdD8ubWVzc2FnZXMpXG4gICAgICAgID8gb2JqZWN0Lm1lc3NhZ2VzLm1hcCgoZTogYW55KSA9PiBXYWt1TWVzc2FnZS5mcm9tSlNPTihlKSlcbiAgICAgICAgOiBbXSxcbiAgICAgIHBhZ2luZ0luZm86IGlzU2V0KG9iamVjdC5wYWdpbmdJbmZvKVxuICAgICAgICA/IFBhZ2luZ0luZm8uZnJvbUpTT04ob2JqZWN0LnBhZ2luZ0luZm8pXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgZXJyb3I6IGlzU2V0KG9iamVjdC5lcnJvcilcbiAgICAgICAgPyBoaXN0b3J5UmVzcG9uc2VfRXJyb3JGcm9tSlNPTihvYmplY3QuZXJyb3IpXG4gICAgICAgIDogMCxcbiAgICB9O1xuICB9LFxuXG4gIHRvSlNPTihtZXNzYWdlOiBIaXN0b3J5UmVzcG9uc2UpOiB1bmtub3duIHtcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xuICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VzKSB7XG4gICAgICBvYmoubWVzc2FnZXMgPSBtZXNzYWdlLm1lc3NhZ2VzLm1hcCgoZSkgPT5cbiAgICAgICAgZSA/IFdha3VNZXNzYWdlLnRvSlNPTihlKSA6IHVuZGVmaW5lZFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqLm1lc3NhZ2VzID0gW107XG4gICAgfVxuICAgIG1lc3NhZ2UucGFnaW5nSW5mbyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAob2JqLnBhZ2luZ0luZm8gPSBtZXNzYWdlLnBhZ2luZ0luZm9cbiAgICAgICAgPyBQYWdpbmdJbmZvLnRvSlNPTihtZXNzYWdlLnBhZ2luZ0luZm8pXG4gICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICBtZXNzYWdlLmVycm9yICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmouZXJyb3IgPSBoaXN0b3J5UmVzcG9uc2VfRXJyb3JUb0pTT04obWVzc2FnZS5lcnJvcikpO1xuICAgIHJldHVybiBvYmo7XG4gIH0sXG5cbiAgZnJvbVBhcnRpYWw8SSBleHRlbmRzIEV4YWN0PERlZXBQYXJ0aWFsPEhpc3RvcnlSZXNwb25zZT4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogSGlzdG9yeVJlc3BvbnNlIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUhpc3RvcnlSZXNwb25zZSgpO1xuICAgIG1lc3NhZ2UubWVzc2FnZXMgPVxuICAgICAgb2JqZWN0Lm1lc3NhZ2VzPy5tYXAoKGUpID0+IFdha3VNZXNzYWdlLmZyb21QYXJ0aWFsKGUpKSB8fCBbXTtcbiAgICBtZXNzYWdlLnBhZ2luZ0luZm8gPVxuICAgICAgb2JqZWN0LnBhZ2luZ0luZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGFnaW5nSW5mbyAhPT0gbnVsbFxuICAgICAgICA/IFBhZ2luZ0luZm8uZnJvbVBhcnRpYWwob2JqZWN0LnBhZ2luZ0luZm8pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIG1lc3NhZ2UuZXJyb3IgPSBvYmplY3QuZXJyb3IgPz8gMDtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VIaXN0b3J5UlBDKCk6IEhpc3RvcnlSUEMge1xuICByZXR1cm4geyByZXF1ZXN0SWQ6IFwiXCIsIHF1ZXJ5OiB1bmRlZmluZWQsIHJlc3BvbnNlOiB1bmRlZmluZWQgfTtcbn1cblxuZXhwb3J0IGNvbnN0IEhpc3RvcnlSUEMgPSB7XG4gIGVuY29kZShcbiAgICBtZXNzYWdlOiBIaXN0b3J5UlBDLFxuICAgIHdyaXRlcjogX20wLldyaXRlciA9IF9tMC5Xcml0ZXIuY3JlYXRlKClcbiAgKTogX20wLldyaXRlciB7XG4gICAgaWYgKG1lc3NhZ2UucmVxdWVzdElkICE9PSBcIlwiKSB7XG4gICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yZXF1ZXN0SWQpO1xuICAgIH1cbiAgICBpZiAobWVzc2FnZS5xdWVyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBIaXN0b3J5UXVlcnkuZW5jb2RlKG1lc3NhZ2UucXVlcnksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgfVxuICAgIGlmIChtZXNzYWdlLnJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIEhpc3RvcnlSZXNwb25zZS5lbmNvZGUoXG4gICAgICAgIG1lc3NhZ2UucmVzcG9uc2UsXG4gICAgICAgIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKVxuICAgICAgKS5sZGVsaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfSxcblxuICBkZWNvZGUoaW5wdXQ6IF9tMC5SZWFkZXIgfCBVaW50OEFycmF5LCBsZW5ndGg/OiBudW1iZXIpOiBIaXN0b3J5UlBDIHtcbiAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIF9tMC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBfbTAuUmVhZGVyKGlucHV0KTtcbiAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUhpc3RvcnlSUEMoKTtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIG1lc3NhZ2UucmVxdWVzdElkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgbWVzc2FnZS5xdWVyeSA9IEhpc3RvcnlRdWVyeS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgbWVzc2FnZS5yZXNwb25zZSA9IEhpc3RvcnlSZXNwb25zZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH0sXG5cbiAgZnJvbUpTT04ob2JqZWN0OiBhbnkpOiBIaXN0b3J5UlBDIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWVzdElkOiBpc1NldChvYmplY3QucmVxdWVzdElkKSA/IFN0cmluZyhvYmplY3QucmVxdWVzdElkKSA6IFwiXCIsXG4gICAgICBxdWVyeTogaXNTZXQob2JqZWN0LnF1ZXJ5KVxuICAgICAgICA/IEhpc3RvcnlRdWVyeS5mcm9tSlNPTihvYmplY3QucXVlcnkpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgcmVzcG9uc2U6IGlzU2V0KG9iamVjdC5yZXNwb25zZSlcbiAgICAgICAgPyBIaXN0b3J5UmVzcG9uc2UuZnJvbUpTT04ob2JqZWN0LnJlc3BvbnNlKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICB9O1xuICB9LFxuXG4gIHRvSlNPTihtZXNzYWdlOiBIaXN0b3J5UlBDKTogdW5rbm93biB7XG4gICAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcbiAgICBtZXNzYWdlLnJlcXVlc3RJZCAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVxdWVzdElkID0gbWVzc2FnZS5yZXF1ZXN0SWQpO1xuICAgIG1lc3NhZ2UucXVlcnkgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgKG9iai5xdWVyeSA9IG1lc3NhZ2UucXVlcnlcbiAgICAgICAgPyBIaXN0b3J5UXVlcnkudG9KU09OKG1lc3NhZ2UucXVlcnkpXG4gICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICBtZXNzYWdlLnJlc3BvbnNlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIChvYmoucmVzcG9uc2UgPSBtZXNzYWdlLnJlc3BvbnNlXG4gICAgICAgID8gSGlzdG9yeVJlc3BvbnNlLnRvSlNPTihtZXNzYWdlLnJlc3BvbnNlKVxuICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcblxuICBmcm9tUGFydGlhbDxJIGV4dGVuZHMgRXhhY3Q8RGVlcFBhcnRpYWw8SGlzdG9yeVJQQz4sIEk+PihcbiAgICBvYmplY3Q6IElcbiAgKTogSGlzdG9yeVJQQyB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VIaXN0b3J5UlBDKCk7XG4gICAgbWVzc2FnZS5yZXF1ZXN0SWQgPSBvYmplY3QucmVxdWVzdElkID8/IFwiXCI7XG4gICAgbWVzc2FnZS5xdWVyeSA9XG4gICAgICBvYmplY3QucXVlcnkgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucXVlcnkgIT09IG51bGxcbiAgICAgICAgPyBIaXN0b3J5UXVlcnkuZnJvbVBhcnRpYWwob2JqZWN0LnF1ZXJ5KVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBtZXNzYWdlLnJlc3BvbnNlID1cbiAgICAgIG9iamVjdC5yZXNwb25zZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXNwb25zZSAhPT0gbnVsbFxuICAgICAgICA/IEhpc3RvcnlSZXNwb25zZS5mcm9tUGFydGlhbChvYmplY3QucmVzcG9uc2UpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxufTtcblxuZGVjbGFyZSB2YXIgc2VsZjogYW55IHwgdW5kZWZpbmVkO1xuZGVjbGFyZSB2YXIgd2luZG93OiBhbnkgfCB1bmRlZmluZWQ7XG5kZWNsYXJlIHZhciBnbG9iYWw6IGFueSB8IHVuZGVmaW5lZDtcbnZhciBnbG9iYWxUaGlzOiBhbnkgPSAoKCkgPT4ge1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBnbG9iYWxUaGlzO1xuICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBzZWxmO1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHdpbmRvdztcbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBnbG9iYWw7XG4gIHRocm93IFwiVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0XCI7XG59KSgpO1xuXG5jb25zdCBhdG9iOiAoYjY0OiBzdHJpbmcpID0+IHN0cmluZyA9XG4gIGdsb2JhbFRoaXMuYXRvYiB8fFxuICAoKGI2NCkgPT4gZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShiNjQsIFwiYmFzZTY0XCIpLnRvU3RyaW5nKFwiYmluYXJ5XCIpKTtcbmZ1bmN0aW9uIGJ5dGVzRnJvbUJhc2U2NChiNjQ6IHN0cmluZyk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBiaW4gPSBhdG9iKGI2NCk7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KGJpbi5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbi5sZW5ndGg7ICsraSkge1xuICAgIGFycltpXSA9IGJpbi5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIHJldHVybiBhcnI7XG59XG5cbmNvbnN0IGJ0b2E6IChiaW46IHN0cmluZykgPT4gc3RyaW5nID1cbiAgZ2xvYmFsVGhpcy5idG9hIHx8XG4gICgoYmluKSA9PiBnbG9iYWxUaGlzLkJ1ZmZlci5mcm9tKGJpbiwgXCJiaW5hcnlcIikudG9TdHJpbmcoXCJiYXNlNjRcIikpO1xuZnVuY3Rpb24gYmFzZTY0RnJvbUJ5dGVzKGFycjogVWludDhBcnJheSk6IHN0cmluZyB7XG4gIGNvbnN0IGJpbjogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBieXRlIG9mIGFycikge1xuICAgIGJpbi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSkpO1xuICB9XG4gIHJldHVybiBidG9hKGJpbi5qb2luKFwiXCIpKTtcbn1cblxudHlwZSBCdWlsdGluID1cbiAgfCBEYXRlXG4gIHwgRnVuY3Rpb25cbiAgfCBVaW50OEFycmF5XG4gIHwgc3RyaW5nXG4gIHwgbnVtYmVyXG4gIHwgYm9vbGVhblxuICB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgRGVlcFBhcnRpYWw8VD4gPSBUIGV4dGVuZHMgQnVpbHRpblxuICA/IFRcbiAgOiBUIGV4dGVuZHMgTG9uZ1xuICA/IHN0cmluZyB8IG51bWJlciB8IExvbmdcbiAgOiBUIGV4dGVuZHMgQXJyYXk8aW5mZXIgVT5cbiAgPyBBcnJheTxEZWVwUGFydGlhbDxVPj5cbiAgOiBUIGV4dGVuZHMgUmVhZG9ubHlBcnJheTxpbmZlciBVPlxuICA/IFJlYWRvbmx5QXJyYXk8RGVlcFBhcnRpYWw8VT4+XG4gIDogVCBleHRlbmRzIHt9XG4gID8geyBbSyBpbiBrZXlvZiBUXT86IERlZXBQYXJ0aWFsPFRbS10+IH1cbiAgOiBQYXJ0aWFsPFQ+O1xuXG50eXBlIEtleXNPZlVuaW9uPFQ+ID0gVCBleHRlbmRzIFQgPyBrZXlvZiBUIDogbmV2ZXI7XG5leHBvcnQgdHlwZSBFeGFjdDxQLCBJIGV4dGVuZHMgUD4gPSBQIGV4dGVuZHMgQnVpbHRpblxuICA/IFBcbiAgOiBQICYgeyBbSyBpbiBrZXlvZiBQXTogRXhhY3Q8UFtLXSwgSVtLXT4gfSAmIFJlY29yZDxcbiAgICAgICAgRXhjbHVkZTxrZXlvZiBJLCBLZXlzT2ZVbmlvbjxQPj4sXG4gICAgICAgIG5ldmVyXG4gICAgICA+O1xuXG5pZiAoX20wLnV0aWwuTG9uZyAhPT0gTG9uZykge1xuICBfbTAudXRpbC5Mb25nID0gTG9uZyBhcyBhbnk7XG4gIF9tMC5jb25maWd1cmUoKTtcbn1cblxuZnVuY3Rpb24gaXNTZXQodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5hbWRPID0ge307IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDIwNDogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSB0aGlzW1wid2VicGFja0NodW5ranN3YWt1XCJdID0gdGhpc1tcIndlYnBhY2tDaHVua2pzd2FrdVwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzIxNl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MDcpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsImRlZmVycmVkIiwiZ2VuZXJhdGVQcml2YXRlS2V5IiwiZ2VuZXJhdGVTeW1tZXRyaWNLZXkiLCJnZXQiLCJnZXRQdWJsaWNLZXkiLCJnZXRQcmVkZWZpbmVkQm9vdHN0cmFwTm9kZXMiLCJXYWt1IiwiRGVmYXVsdFB1YlN1YlRvcGljIiwiUHJvdG9jb2xzIiwiV2FrdU1lc3NhZ2UiLCJXYWt1TGlnaHRQdXNoIiwiTGlnaHRQdXNoQ29kZWMiLCJQdXNoUmVzcG9uc2UiLCJXYWt1UmVsYXkiLCJSZWxheUNvZGVjcyIsIlBhZ2VEaXJlY3Rpb24iLCJXYWt1U3RvcmUiLCJTdG9yZUNvZGVjcyIsImNyeXB0byIsIm5vZGUiLCJ3ZWIiLCJzZWxmIiwidW5kZWZpbmVkIiwic3VidGxlIiwid2ViY3J5cHRvIiwiRXJyb3IiLCJyYW5kb21CeXRlcyIsInNlY3AiLCJ1dGlscyIsInNoYTI1NiIsIlByaXZhdGVLZXlTaXplIiwic3ltbWV0cmljIiwiS2V5U2l6ZSIsImFzeW5jIiwibWVzc2FnZSIsInByaXZhdGVLZXkiLCJzaWduYXR1cmUiLCJyZWNvdmVyeUlkIiwic2lnbiIsInJlY292ZXJlZCIsImRlciIsImNvbmNhdCIsImxlbmd0aCIsImlucHV0IiwiVWludDhBcnJheSIsInNoYTMiLCJrZWNjYWsyNTYiLCJhcnJheUJ1ZmZlciIsInB1YmxpY0tleSIsIlBvaW50IiwiZnJvbUhleCIsInRvUmF3Qnl0ZXMiLCJfc2lnbmF0dXJlIiwiU2lnbmF0dXJlIiwiZnJvbUNvbXBhY3QiLCJzbGljZSIsInZlcmlmeSIsImRiZyIsIkJvb3RzdHJhcCIsImNvbnN0cnVjdG9yIiwib3B0cyIsIm1heFBlZXJzIiwiRGVmYXVsdE1heFBlZXJzIiwiZGVmYXVsdCIsImdldEJvb3RzdHJhcFBlZXJzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwZWVycyIsImFsbFBlZXJzIiwibWFwIiwiTXVsdGlhZGRyIiwiZ2V0UHNldWRvUmFuZG9tU3Vic2V0IiwibWEiLCJ0b1N0cmluZyIsImdldFBlZXJzIiwiZW5yVXJsIiwid2FudGVkTm9kZUNhcGFiaWxpdHlDb3VudCIsImRucyIsIkRuc05vZGVEaXNjb3ZlcnkiLCJkbnNPdmVySHR0cCIsImVucnMiLCJlbnIiLCJnZXRGdWxsTXVsdGlhZGRycyIsImZsYXQiLCJkZWJ1ZyIsIl9lcnJvclRvbGVyYW5jZSIsIl9ETlNUcmVlQ2FjaGUiLCJzdGF0aWMiLCJlbmRwb2ludHMiLCJkbnNDbGllbnQiLCJEbnNPdmVySHR0cHMiLCJlbnJUcmVlVXJscyIsIm5ldHdvcmtJbmRleCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImRvbWFpbiIsIkVOUlRyZWUiLCJwYXJzZVRyZWUiLCJjb250ZXh0IiwidmlzaXRzIiwiX3NlYXJjaCIsInN1YmRvbWFpbiIsImVudHJ5IiwiX2dldFRYVFJlY29yZCIsIm5leHQiLCJicmFuY2hlcyIsImVudHJ5VHlwZSIsInN0YXJ0c1dpdGgiLCJST09UX1BSRUZJWCIsIkJSQU5DSF9QUkVGSVgiLCJSRUNPUkRfUFJFRklYIiwiZ2V0RW50cnlUeXBlIiwicGFyc2VBbmRWZXJpZnlSb290IiwicGFyc2VCcmFuY2giLCJjaXJjdWxhclJlZnMiLCJpZHgiLCJlbnRyaWVzIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4Iiwic2VsZWN0UmFuZG9tUGF0aCIsIkVOUiIsImRlY29kZVR4dCIsImVycm9yIiwibG9jYXRpb24iLCJyZXNwb25zZSIsInJlc29sdmVUWFQiLCJyZXN1bHQiLCJqb2luIiwiY2xvdWRmbGFyZSIsImdvb2dsZSIsIm9wZW5kbnMiLCJkYXRhIiwicXVlcnkiLCJxdWVzdGlvbnMiLCJ0eXBlIiwibmFtZSIsImFuc3dlcnMiLCJhIiwiZm9yRWFjaCIsImQiLCJwdXNoIiwiQXJyYXkiLCJpc0FycmF5Iiwic2QiLCJieXRlc1RvVXRmOCIsInJvb3RWYWx1ZXMiLCJwYXJzZVJvb3RWYWx1ZXMiLCJkZWNvZGVkUHVibGljS2V5IiwiYmFzZTMyIiwiZGVjb2RlIiwiYXNCeXRlcyIsInNpZ25lZENvbXBvbmVudCIsInNwbGl0Iiwic2lnbmVkQ29tcG9uZW50QnVmZmVyIiwidXRmOFRvQnl0ZXMiLCJzaWduYXR1cmVCdWZmZXIiLCJmcm9tU3RyaW5nIiwidmVyaWZ5U2lnbmF0dXJlIiwiZVJvb3QiLCJ0eHQiLCJtYXRjaGVzIiwibWF0Y2giLCJzaGlmdCIsImxSb290Iiwic2VxIiwiTnVtYmVyIiwidHJlZSIsIlRSRUVfUFJFRklYIiwiYnJhbmNoIiwiaXNTYXRpc2ZpZWQiLCJ3YW50ZWQiLCJhY3R1YWwiLCJyZWxheSIsInN0b3JlIiwiZmlsdGVyIiwibGlnaHRQdXNoIiwiaXNOZXdQZWVyIiwicGVlciIsIm5vZGVJZCIsImV4aXN0aW5nUGVlciIsImhlbHBzU2F0aXNmeUNhcGFiaWxpdGllcyIsIm1pc3NpbmciLCJtaXNzaW5nQ2FwYWJpbGl0aWVzIiwiZXJyb3JUb2xlcmFuY2UiLCJnZXROb2RlIiwibWF4U2VhcmNoZXMiLCJ0b3RhbFNlYXJjaGVzIiwid2FrdTIiLCJ0b3RhbCIsImlwIiwidmFsdWVzIiwid2FudGVkTnVtYmVyIiwic2h1ZmZsZSIsIkZsZWV0IiwiRGVmYXVsdFdhbnRlZE51bWJlciIsImZsZWV0IiwiUHJvZCIsIm5vZGVzIiwiZmxlZXRzIiwiVGVzdCIsIk1BWF9SRUNPUkRfU0laRSIsIkVSUl9JTlZBTElEX0lEIiwiRVJSX05PX1NJR05BVFVSRSIsIk1VTFRJQUREUl9MRU5HVEhfU0laRSIsIk1hcCIsImt2cyIsIkJpZ0ludCIsInN1cGVyIiwia2V5cGFpciIsImNyZWF0ZUtleXBhaXIiLCJrZXlwYWlyVHlwZSIsInBlZXJJZCIsImNyZWF0ZVBlZXJJZEZyb21LZXlwYWlyIiwiZSIsImNvbXByZXNzUHVibGljS2V5IiwiY3JlYXRlIiwiaWQiLCJzZWNwMjU2azEiLCJjcmVhdGVLZXlwYWlyRnJvbVBlZXJJZCIsIktleXBhaXJUeXBlIiwiY3JlYXRlVjQiLCJkZWNvZGVkIiwib2JqIiwiaSIsImhleFNlcSIsImJ5dGVzVG9IZXgiLCJybHBFbmNvZGVkQnl0ZXMiLCJoZXhUb0J5dGVzIiwiUkxQIiwiZW5jb2RlIiwiZW5jb2RlZCIsImRlY29kZUZyb21WYWx1ZXMiLCJzZXQiLCJrIiwidiIsInY0IiwicmF3IiwicHJvdG9jb2xzIiwibmFtZXMiLCJpcDQiLCJjb2RlIiwidG9CeXRlcyIsImRlbGV0ZSIsInRjcCIsInBvcnQiLCJ1ZHAiLCJpcDYiLCJ0Y3A2IiwidWRwNiIsIm11bHRpYWRkcnMiLCJkZWNvZGVNdWx0aWFkZHJzIiwibXVsdGlhZGRyc0J1ZiIsImVuY29kZU11bHRpYWRkcnMiLCJnZXRMb2NhdGlvbk11bHRpYWRkciIsInByb3RvY29sIiwiaXNJcHY2IiwiZW5kc1dpdGgiLCJpcFZhbCIsImlzVWRwIiwiaXNUY3AiLCJwcm90b05hbWUiLCJwcm90b1ZhbCIsImlwTWEiLCJpcEJ5dGVMZW4iLCJzaXplIiwicHJvdG9NYSIsInByb3RvQnVmIiwibWFCdWYiLCJzZXRMb2NhdGlvbk11bHRpYWRkciIsIm11bHRpYWRkciIsInByb3RvTmFtZXMiLCJ0dXBsZXMiLCJnZXRGdWxsTXVsdGlhZGRyIiwibG9jYXRpb25NdWx0aWFkZHIiLCJlbmNhcHN1bGF0ZSIsInRvQjU4U3RyaW5nIiwiZGVjb2RlV2FrdTIiLCJieXRlIiwiZW5jb2RlV2FrdTIiLCJjb250ZW50IiwiZnJvbSIsInNvcnQiLCJiIiwibG9jYWxlQ29tcGFyZSIsInVuc2hpZnQiLCJlbmNvZGVUb1ZhbHVlcyIsInY0Q3J5cHRvIiwia2V5c1BCTSIsInN1cHBvcnRlZEtleXMiLCJTZWNwMjU2azFLZXlwYWlyIiwiRVJSX1RZUEVfTk9UX0lNUExFTUVOVEVEIiwiZ2VuZXJhdGUiLCJwcml2S2V5IiwiaGFzUHJpdmF0ZUtleSIsIlNlY3AyNTZrMVByaXZhdGVLZXkiLCJwdWJLZXkiLCJTZWNwMjU2azFQdWJsaWNLZXkiLCJpZGVudGl0eSIsImRpZ2VzdCIsImJ5dGVzIiwicHViIiwiUHVibGljS2V5IiwiVHlwZSIsIm1hcnNoYWwiLCJEYXRhIiwiX3ByaXZhdGVLZXkiLCJwcml2YXRlS2V5VmVyaWZ5IiwiX3B1YmxpY0tleSIsInB1YmxpY0tleVZlcmlmeSIsImtleSIsImlzVmFsaWRQcml2YXRlS2V5IiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MTYiLCJtdWx0aWFkZHJCeXRlcyIsInRvdGFsTGVuZ3RoIiwicmVkdWNlIiwiYWNjIiwiZGF0YVZpZXciLCJnZXRQZWVySWQiLCJzZXRVaW50MTYiLCJtc2ciLCJ1bmNvbXByZXNzZWRQdWJrZXkiLCJwZWVyc0l0ZXIiLCJyb3VuZCIsImxpYnAycCIsInBlZXJTdG9yZSIsInBlZXJGb3VuZCIsImluY2x1ZGVzIiwiaGV4IiwiX2hleCIsInJlcGxhY2UiLCJzIiwid2Vic29ja2V0c1RyYW5zcG9ydEtleSIsInByb3RvdHlwZSIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiRGVmYXVsdFBpbmdLZWVwQWxpdmVWYWx1ZVNlY3MiLCJEZWZhdWx0UmVsYXlLZWVwQWxpdmVWYWx1ZVNlY3MiLCJvcHRpb25zIiwicHVic3ViIiwicGluZ0tlZXBBbGl2ZVRpbWVycyIsInJlbGF5S2VlcEFsaXZlVGltZXJzIiwicGluZ0tlZXBBbGl2ZSIsInJlbGF5S2VlcEFsaXZlIiwiY29ubmVjdGlvbk1hbmFnZXIiLCJvbiIsImNvbm5lY3Rpb24iLCJzdGFydEtlZXBBbGl2ZSIsInJlbW90ZVBlZXIiLCJzdG9wS2VlcEFsaXZlIiwiZGVjcnlwdGlvbktleXMiLCJhZGREZWNyeXB0aW9uS2V5IiwibGlicDJwT3B0cyIsImFzc2lnbiIsImNvbmZpZyIsInRyYW5zcG9ydCIsImFsbCIsInB1YlN1YlRvcGljIiwibW9kdWxlcyIsInN0cmVhbU11eGVyIiwiY29ubkVuY3J5cHRpb24iLCJOb2lzZSIsInN0YXRpY05vaXNlS2V5IiwiYm9vdHN0cmFwIiwibGlzdCIsInBlZXJEaXNjb3ZlcnkiLCJ0YWciLCJlbmFibGVkIiwid2FrdVN0b3JlIiwid2FrdUxpZ2h0UHVzaCIsIndha3VGaWx0ZXIiLCJXYWt1RmlsdGVyIiwic3RhcnQiLCJfcHJvdG9jb2xzIiwiUmVsYXkiLCJjb2RlY3MiLCJjb2RlYyIsIlN0b3JlIiwiTGlnaHRQdXNoIiwiRmlsdGVyIiwiRmlsdGVyQ29kZWMiLCJkaWFsUHJvdG9jb2wiLCJhZGRQZWVyVG9BZGRyZXNzQm9vayIsImNyZWF0ZUZyb21CNThTdHJpbmciLCJhZGRyZXNzZXMiLCJhZGRyIiwiYWRkcmVzc0Jvb2siLCJzdG9wIiwiZGVsZXRlRGVjcnlwdGlvbktleSIsImdldExvY2FsTXVsdGlhZGRyV2l0aElEIiwibG9jYWxNdWx0aWFkZHIiLCJmaW5kIiwidGltZW91dE1zIiwicHJvbWlzZXMiLCJwcm9taXNlIiwib25jZSIsInN0b3JlUHJvbWlzZSIsImxpZ2h0UHVzaFByb21pc2UiLCJmaWx0ZXJQcm9taXNlIiwicmVqZWN0T25UaW1lb3V0IiwicGluZ1BlcmlvZFNlY3MiLCJyZWxheVBlcmlvZFNlY3MiLCJwZWVySWRTdHIiLCJwaW5nU2VydmljZSIsInNldEludGVydmFsIiwicGluZyIsImNhdGNoIiwiZnJvbUJ5dGVzIiwiUmVsYXlQaW5nQ29udGVudFRvcGljIiwidGhlbiIsIndha3VNc2ciLCJzZW5kIiwiY2xlYXJJbnRlcnZhbCIsImF3YWl0VGltZW91dCIsIm1zIiwicmVqZWN0UmVhc29uIiwiX3Jlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwicmFjZSIsIkZpbHRlclJQQyIsInByb3RvIiwidG9waWMiLCJjb250ZW50RmlsdGVycyIsInJlcXVlc3RJZCIsInN1YnNjcmliZSIsInJlcXVlc3QiLCJyZXMiLCJSZWFkZXIiLCJmaW5pc2giLCJsb2ciLCJzdWJzY3JpcHRpb25zIiwiaGFuZGxlIiwib25SZXF1ZXN0IiwiYmluZCIsImNhbGxiYWNrIiwiY29udGVudFRvcGljcyIsInB1YnN1YlRvcGljIiwiY29udGVudFRvcGljIiwiY3JlYXRlUmVxdWVzdCIsImdldFBlZXIiLCJzdHJlYW0iLCJuZXdTdHJlYW0iLCJwaXBlIiwiYWRkQ2FsbGJhY2siLCJ1bnN1YnNjcmliZSIsInJlbW92ZUNhbGxiYWNrIiwic291cmNlIiwibWVzc2FnZXMiLCJwdXNoTWVzc2FnZXMiLCJtZXRob2QiLCJkZWNvZGVQcm90byIsInVuc3Vic2NyaWJlUmVxdWVzdCIsInNpbmsiLCJyYW5kb21QZWVyIiwiZ2V0UGVlcnNGb3JQcm90b2NvbCIsInNlbGVjdFJhbmRvbVBlZXIiLCJQdXNoUlBDIiwiY29uc29sZSIsImVyciIsImtkZiIsInNlY3JldCIsIm91dHB1dExlbmd0aCIsImN0ciIsIndyaXR0ZW4iLCJ3aWxsQmVSZXN1bHQiLCJjb3VudGVycyIsImNvdW50ZXJzU2VjcmV0Iiwid2lsbEJlSGFzaFJlc3VsdCIsImhhc2hSZXN1bHQiLCJfaGFzaFJlc3VsdCIsImRlcml2ZSIsInByaXZhdGVLZXlBIiwicHVibGljS2V5QiIsInB4IiwiZ2V0U2hhcmVkU2VjcmV0IiwicHVibGljS2V5VG8iLCJlcGhlbVByaXZhdGVLZXkiLCJzaGFyZWRQeCIsImhhc2giLCJpdiIsImVuY3J5cHRpb25LZXkiLCJjaXBoZXJUZXh0IiwiY291bnRlciIsImdldFN1YnRsZSIsImltcG9ydEtleSIsImNyeXB0b0tleSIsImVuY3J5cHQiLCJpdkNpcGhlclRleHQiLCJtYWNLZXkiLCJobWFjIiwiYWxnb3JpdGhtIiwiaG1hY1NoYTI1NlNpZ24iLCJlcGhlbVB1YmxpY0tleSIsImVuY3J5cHRlZCIsImNpcGhlclRleHRMZW5ndGgiLCJjaXBoZXJBbmRJdiIsImNpcGhlcnRleHQiLCJtc2dNYWMiLCJzaWciLCJobWFjU2hhMjU2VmVyaWZ5IiwiZGVjcnlwdCIsIkRlY3J5cHRpb25NZXRob2QiLCJfc2lnbmF0dXJlUHVibGljS2V5IiwidXRmOCIsInBheWxvYWQiLCJ0aW1lc3RhbXAiLCJlbmNQdWJsaWNLZXkiLCJzeW1LZXkiLCJzaWdQcml2S2V5IiwiRGF0ZSIsIl9wYXlsb2FkIiwidmVyc2lvbiIsImVuYyIsInZlcnNpb25fMSIsImNsZWFyRW5jb2RlIiwiZW5jcnlwdEFzeW1tZXRyaWMiLCJlbmNyeXB0U3ltbWV0cmljIiwidGltZXN0YW1wRGVwcmVjYXRlZCIsInZhbHVlT2YiLCJmcm9tTnVtYmVyIiwibXVsIiwic2lnbmF0dXJlUHVibGljS2V5IiwiaXNEZWZpbmVkIiwiZGVjIiwiZGVjb2RlZFJlc3VsdHMiLCJBc3ltbWV0cmljIiwiZGVjcnlwdEFzeW1tZXRyaWMiLCJTeW1tZXRyaWMiLCJkZWNyeXB0U3ltbWV0cmljIiwiY2xlYXJEZWNvZGUiLCJwYXlsb2FkQXNVdGY4IiwiZGl2IiwidG9OdW1iZXIiLCJJdlNpemUiLCJUYWdTaXplIiwiQWxnb3JpdGhtIiwiY2xlYXJUZXh0IiwiY2lwaGVyIiwiY2xlYXIiLCJjb21wdXRlU2l6ZU9mUGF5bG9hZFNpemVGaWVsZCIsIm1lc3NhZ2VQYXlsb2FkIiwiZW52ZWxvcGUiLCJmaWVsZFNpemUiLCJmaWVsZCIsInNldFVpbnQzMiIsImFkZFBheWxvYWRTaXplRmllbGQiLCJyYXdTaXplIiwicGFkZGluZ1NpemUiLCJwYWQiLCJleHBlY3RlZFNpemUiLCJ2YWx1ZSIsImZpbmRJbmRleCIsImJ5dGVzU2lnbmF0dXJlIiwic2l6ZU9mUGF5bG9hZFNpemVGaWVsZCIsImdldFVpbnQ4IiwiZ2V0U2l6ZU9mUGF5bG9hZFNpemVGaWVsZCIsInBheWxvYWRTaXplIiwicGF5bG9hZFNpemVCeXRlcyIsImdldEludDMyIiwiZ2V0UGF5bG9hZFNpemUiLCJwYXlsb2FkU3RhcnQiLCJpc1NpZ25lZCIsImlzTWVzc2FnZVNpZ25lZCIsImdldFNpZ25hdHVyZSIsImdldEhhc2giLCJtZXNzYWdlSGFzaCIsInJlY292ZXJ5IiwicmVjb3ZlclB1YmxpY0tleSIsImVjUmVjb3ZlclB1YktleSIsImVjaWVzIiwiZ2VuZXJhdGVJdiIsIml2U3RhcnQiLCJzZWNvbmQiLCJtaW51dGUiLCJSZWxheUdvc3NpcEZhY3RvciIsIlJlbGF5SGVhcnRiZWF0SW5pdGlhbERlbGF5IiwiUmVsYXlIZWFydGJlYXRJbnRlcnZhbCIsIlJlbGF5UHJ1bmVQZWVycyIsIlJlbGF5UHJ1bmVCYWNrb2ZmIiwiUmVsYXlGYW5vdXRUVEwiLCJSZWxheU9wcG9ydHVuaXN0aWNHcmFmdFRpY2tzIiwiUmVsYXlPcHBvcnR1bmlzdGljR3JhZnRQZWVycyIsIlJlbGF5TWF4SUhhdmVMZW5ndGgiLCJyb3V0ZXIiLCJjb3VudCIsInBlZXJzSW5Ub3BpYyIsInRvcGljcyIsIlNldCIsInBlZXJTdHJlYW1zIiwiZ2xvYmFsU2lnbmF0dXJlUG9saWN5IiwiU2lnbmF0dXJlUG9saWN5IiwiU3RyaWN0Tm9TaWduIiwiaGVhcnRiZWF0IiwiUmVsYXlIZWFydGJlYXQiLCJvYnNlcnZlcnMiLCJtdWx0aWNvZGVjcyIsImNvbnN0YW50cyIsInB1Ymxpc2giLCJhZGRPYnNlcnZlciIsImFkZCIsImRlbGV0ZU9ic2VydmVyIiwiZ2V0UmVsYXlQZWVycyIsIl9vcHRpb25zIiwiRCIsInNjb3JlIiwic2NvcmVUaHJlc2hvbGRzIiwicHVibGlzaFRocmVzaG9sZCIsImV2ZW50IiwiY2FsbGJhY2tGbiIsInN0YXJ0ZWQiLCJmYW5vdXRQZWVycyIsImZhbm91dCIsImhhcyIsImRpcmVjdCIsIm1lc2giLCJsYXN0cHViIiwiX3NlbmRHcmFmdCIsIm1zZ0lkU3RyIiwiZ2V0Q2Fub25pY2FsTXNnSWRTdHIiLCJyZWNlaXZlZEZyb20iLCJkZWxpdmVyTWVzc2FnZSIsImdvc3NpcFRyYWNlciIsInNlZW5DYWNoZSIsInB1dCIsIm1lc3NhZ2VDYWNoZSIsInRvU2VuZCIsInRvcGljSURzIiwibWVzaFBlZXJzIiwiX25vdyIsInJwYyIsImNyZWF0ZUdvc3NpcFJwYyIsIm5vcm1hbGl6ZU91dFJwY01lc3NhZ2UiLCJfc2VuZFJwYyIsIl9lbWl0R29zc2lwIiwiZXhjbHVkZSIsIm1lc3NhZ2VJRHMiLCJnZXRHb3NzaXBJRHMiLCJwZWVyc1RvR29zc2lwIiwidG9waWNQZWVycyIsImdvc3NpcFRocmVzaG9sZCIsInRhcmdldCIsIkRsYXp5IiwiZmFjdG9yIiwicGVlck1lc3NhZ2VJRHMiLCJfcHVzaEdvc3NpcCIsInRvcGljSUQiLCJkb1BYIiwiYmFja29mZiIsInhpZCIsInAiLCJwZWVySUQiLCJzaWduZWRQZWVyUmVjb3JkIiwiX2xpYnAycCIsImdldFJhd0VudmVsb3BlIiwiSGVhcnRiZWF0IiwiZ29zc2lwc3ViIiwiX2hlYXJ0YmVhdFRpbWVyIiwiX2hlYXJ0YmVhdCIsInRpbWVvdXQiLCJydW5QZXJpb2RpY2FsbHkiLCJfaW50ZXJ2YWxJZCIsImZuIiwicGVyaW9kIiwiY2FuY2VsIiwiY2xlYXJUaW1lb3V0IiwiRGxvIiwiRGhpIiwiRHNjb3JlIiwiRG91dCIsImhlYXJ0YmVhdFRpY2tzIiwic2NvcmVzIiwiZ2V0U2NvcmUiLCJ0b0dyYWZ0IiwidG9QcnVuZSIsIm5vUFgiLCJfY2xlYXJCYWNrb2ZmIiwicGVlcmhhdmUiLCJpYXNrZWQiLCJfYXBwbHlJd2FudFBlbmFsdGllcyIsIl9kaXJlY3RDb25uZWN0IiwicHJ1bmVQZWVyIiwicHJ1bmUiLCJfYWRkQmFja29mZiIsImdyYWZ0UGVlciIsImdyYWZ0IiwiaW5lZWQiLCJwZWVyc0FycmF5Iiwib3V0Ym91bmQiLCJyb3RhdGUiLCJqIiwiaWhhdmUiLCJwZWVyc0xpc3QiLCJtZWRpYW5JbmRleCIsIm1lZGlhblNjb3JlIiwib3Bwb3J0dW5pc3RpY0dyYWZ0VGhyZXNob2xkIiwibm93IiwiX3NlbmRHcmFmdFBydW5lIiwiX2ZsdXNoIiwiZW1pdCIsIkhpc3RvcnlSUEMiLCJzdG9yZUNvZGVjIiwiVjJCZXRhMyIsInByb3RvQ29kZWMiLCJwcm90b1YyQmV0YTMiLCJWMkJldGE0IiwicHJvdG9WMkJldGE0IiwicGFyYW1zIiwiZGlyZWN0aW9uIiwicGFnZURpcmVjdGlvbiIsIkJBQ0tXQVJEIiwiUGFnaW5nSW5mb19EaXJlY3Rpb24iLCJESVJFQ1RJT05fQkFDS1dBUkRfVU5TUEVDSUZJRUQiLCJGT1JXQVJEIiwiRElSRUNUSU9OX0ZPUldBUkQiLCJkaXJlY3Rpb25Ub1Byb3RvIiwicGFnaW5nSW5mbyIsInBhZ2VTaXplIiwiY3Vyc29yIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsIkRlZmF1bHRQYWdlU2l6ZSIsInRpbWVGaWx0ZXIiLCJxdWVyeU9wdHMiLCJoaXN0b3J5UnBjUXVlcnkiLCJjcmVhdGVRdWVyeSIsInJlbW90ZUFkZHIiLCJwYWdlTWVzc2FnZXMiLCJwcm90b01zZyIsImFib3J0IiwiQm9vbGVhbiIsInJlc3BvbnNlUGFnZVNpemUiLCJxdWVyeVBhZ2VTaXplIiwiaXNTZXQiLCJwcm90b2J1ZlBhY2thZ2UiLCJGaWx0ZXJSZXF1ZXN0Iiwid3JpdGVyIiwiV3JpdGVyIiwidWludDMyIiwiYm9vbCIsInN0cmluZyIsIkZpbHRlclJlcXVlc3RfQ29udGVudEZpbHRlciIsImZvcmsiLCJsZGVsaW0iLCJyZWFkZXIiLCJlbmQiLCJsZW4iLCJwb3MiLCJza2lwVHlwZSIsImZyb21KU09OIiwib2JqZWN0IiwiU3RyaW5nIiwidG9KU09OIiwiZnJvbVBhcnRpYWwiLCJNZXNzYWdlUHVzaCIsInV0aWwiLCJMb25nIiwiY29uZmlndXJlIiwiUHVzaFJlcXVlc3QiLCJpc1N1Y2Nlc3MiLCJpbmZvIiwiZG91YmxlIiwic2ludDY0IiwiYnl0ZXNGcm9tQmFzZTY0IiwiYXJyIiwiYmluIiwiZnJvbUNoYXJDb2RlIiwiYnRvYSIsImJhc2U2NEZyb21CeXRlcyIsImZyb21WYWx1ZSIsImdsb2JhbFRoaXMiLCJ3aW5kb3ciLCJnIiwiYXRvYiIsImI2NCIsIkJ1ZmZlciIsImNoYXJDb2RlQXQiLCJIaXN0b3J5UmVzcG9uc2VfRXJyb3IiLCJwYWdpbmdJbmZvX0RpcmVjdGlvbkZyb21KU09OIiwiVU5SRUNPR05JWkVEIiwicGFnaW5nSW5mb19EaXJlY3Rpb25Ub0pTT04iLCJoaXN0b3J5UmVzcG9uc2VfRXJyb3JGcm9tSlNPTiIsIkVSUk9SX05PTkVfVU5TUEVDSUZJRUQiLCJFUlJPUl9JTlZBTElEX0NVUlNPUiIsImhpc3RvcnlSZXNwb25zZV9FcnJvclRvSlNPTiIsImNyZWF0ZUJhc2VJbmRleCIsInJlY2VpdmVkVGltZSIsInNlbmRlclRpbWUiLCJjcmVhdGVCYXNlUGFnaW5nSW5mbyIsIlVaRVJPIiwiSW5kZXgiLCJQYWdpbmdJbmZvIiwiaXNaZXJvIiwidWludDY0IiwiaW50MzIiLCJDb250ZW50RmlsdGVyIiwiSGlzdG9yeVF1ZXJ5IiwiSGlzdG9yeVJlc3BvbnNlIiwiWkVSTyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsImFtZE8iLCJPIiwiY2h1bmtJZHMiLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiZnVsZmlsbGVkIiwiZXZlcnkiLCJzcGxpY2UiLCJyIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJGdW5jdGlvbiIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9